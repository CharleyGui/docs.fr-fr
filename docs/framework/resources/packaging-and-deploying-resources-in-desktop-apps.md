---
title: Packager et déployer des ressources dans des applications .NET
description: Empaquetez et déployez des ressources dans des applications .NET à l’aide d’un assembly principal (hub) et d’assemblys satellites (spokes). Un spoke contient des ressources localisées, mais pas de code.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- deploying applications [.NET Framework], resources
- resource files, deploying
- hub-and-spoke resource deployment model
- resource files, packaging
- application resources, packaging
- single resource assembly
- satellite assemblies
- default culture for applications
- names [.NET Framework], resources
- fallback process for resources
- grouping cultures
- application resources, deploying
- application resources, naming conventions
- culture, packaging and deploying resources
- resource files, naming conventions
- packaging application resources
- application resources, fallback processes
- resource files, fallback processes
- localizing resources
- neutral cultures
ms.assetid: b224d7c0-35f8-4e82-a705-dd76795e8d16
ms.openlocfilehash: 056569f86afcbdf124f9e617e4ad07b09a194681
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90553998"
---
# <a name="packaging-and-deploying-resources-in-net-apps"></a><span data-ttu-id="c3ae6-104">Packager et déployer des ressources dans des applications .NET</span><span class="sxs-lookup"><span data-stu-id="c3ae6-104">Packaging and Deploying Resources in .NET Apps</span></span>

<span data-ttu-id="c3ae6-105">Les applications s’appuient sur le gestionnaire des ressources du .NET Framework, représenté par la classe <xref:System.Resources.ResourceManager>, pour récupérer des ressources localisées.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-105">Applications rely on the .NET Framework Resource Manager, represented by the <xref:System.Resources.ResourceManager> class, to retrieve localized resources.</span></span> <span data-ttu-id="c3ae6-106">Le gestionnaire des ressources suppose qu’un modèle Hub and Spoke est utilisé pour empaqueter et déployer des ressources.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-106">The Resource Manager assumes that a hub and spoke model is used to package and deploy resources.</span></span> <span data-ttu-id="c3ae6-107">Le hub est l’assembly principal qui contient le code exécutable non localisable et les ressources pour une culture unique, appelée culture neutre ou par défaut.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-107">The hub is the main assembly that contains the nonlocalizable executable code and the resources for a single culture, called the neutral or default culture.</span></span> <span data-ttu-id="c3ae6-108">La culture par défaut est la culture de secours de l’application ; il s’agit de la culture dont les ressources sont utilisées si aucune ressource localisée ne peut être trouvée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-108">The default culture is the fallback culture for the application; it is the culture whose resources are used if localized resources cannot be found.</span></span> <span data-ttu-id="c3ae6-109">Chaque spoke se connecte à un assembly satellite qui contient les ressources d’une culture unique, mais ne contient pas de code.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-109">Each spoke connects to a satellite assembly that contains the resources for a single culture, but does not contain any code.</span></span>

<span data-ttu-id="c3ae6-110">Ce modèle présente plusieurs avantages :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-110">There are several advantages to this model:</span></span>

- <span data-ttu-id="c3ae6-111">Vous pouvez ajouter de façon incrémentielle des ressources pour de nouvelles cultures après avoir déployé une application.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-111">You can incrementally add resources for new cultures after you have deployed an application.</span></span> <span data-ttu-id="c3ae6-112">Comme le développement ultérieur de ressources spécifiques à une culture peut nécessiter du temps, cela vous permet de libérer d’abord votre application principale, puis de proposer des ressources spécifiques à une culture ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-112">Because subsequent development of culture-specific resources can require a significant amount of time, this allows you to release your main application first, and deliver culture-specific resources at a later date.</span></span>
- <span data-ttu-id="c3ae6-113">Vous pouvez mettre à jour et changer les assemblys satellites d’une application sans recompiler l’application.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-113">You can update and change an application's satellite assemblies without recompiling the application.</span></span>
- <span data-ttu-id="c3ae6-114">Une application doit charger uniquement les assemblys satellites qui contiennent les ressources nécessaires pour une culture particulière.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-114">An application needs to load only those satellite assemblies that contain the resources needed for a particular culture.</span></span> <span data-ttu-id="c3ae6-115">Cela peut réduire considérablement l’utilisation des ressources système.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-115">This can significantly reduce the use of system resources.</span></span>

 <span data-ttu-id="c3ae6-116">Cependant, ce modèle présente également des inconvénients :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-116">However, there are also disadvantages to this model:</span></span>

- <span data-ttu-id="c3ae6-117">Vous devez gérer plusieurs ensembles de ressources.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-117">You must manage multiple sets of resources.</span></span>
- <span data-ttu-id="c3ae6-118">Le coût initial du test d’une application augmente, car vous devez tester plusieurs configurations.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-118">The initial cost of testing an application increases, because you must test several configurations.</span></span> <span data-ttu-id="c3ae6-119">À longue échéance, il sera plus facile et moins coûteux de tester une application principale et plusieurs satellites que de tester et de tenir à jour en parallèle plusieurs versions internationales.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-119">Note that in the long term it will be easier and less expensive to test one core application with several satellites, than to test and maintain several parallel international versions.</span></span>

## <a name="resource-naming-conventions"></a><span data-ttu-id="c3ae6-120">Conventions de nommage des ressources</span><span class="sxs-lookup"><span data-stu-id="c3ae6-120">Resource naming conventions</span></span>

<span data-ttu-id="c3ae6-121">Quand vous empaquetez les ressources de votre application, vous devez les nommer en utilisant les conventions d’affectation de noms pour les ressources que le Common Language Runtime attend.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-121">When you package your application's resources, you must name them using the resource naming conventions that the common language runtime expects.</span></span> <span data-ttu-id="c3ae6-122">Le runtime identifie une ressource par son nom de culture.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-122">The runtime identifies a resource by its culture name.</span></span> <span data-ttu-id="c3ae6-123">Chaque culture a un nom unique, qui est en général une combinaison d’un nom de culture à deux lettres en minuscules associé à une langue et, si nécessaire, un nom de sous-culture à deux lettres en majuscules associé à un pays ou une région.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-123">Each culture is given a unique name, which is usually a combination of a two-letter, lowercase culture name associated with a language and, if required, a two-letter, uppercase subculture name associated with a country or region.</span></span> <span data-ttu-id="c3ae6-124">Le nom de la sous-culture suit le nom de la culture, séparés par un tiret (-).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-124">The subculture name follows the culture name, separated by a dash (-).</span></span> <span data-ttu-id="c3ae6-125">Les exemples incluent ja-JP pour le japonais tel qu’il est parlé au Japon, en-US pour l’anglais tel qu’il est parlé aux États-Unis, de-DE pour l’allemand tel qu’il est parlé en Allemagne ou de-AT pour l’allemand tel qu’il est parlé en Autriche.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-125">Examples include ja-JP for Japanese as spoken in Japan, en-US for English as spoken in the United States, de-DE for German as spoken in Germany, or de-AT for German as spoken in Austria.</span></span> <span data-ttu-id="c3ae6-126">Consultez la colonne **Balise de langue** dans la [liste des noms de langue/région pris en charge par Windows](/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-126">See the **Language tag** column in the [list of language/region names supported by Windows](/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).</span></span> <span data-ttu-id="c3ae6-127">Les noms de culture respectent la norme définie par [BCP 47](https://tools.ietf.org/html/bcp47).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-127">Culture names follow the standard defined by [BCP 47](https://tools.ietf.org/html/bcp47).</span></span>

> [!NOTE]
> <span data-ttu-id="c3ae6-128">Il existe des exceptions pour les noms de culture à deux lettres, par exemple `zh-Hans` pour le chinois (simplifié).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-128">There are some exceptions for the two-letter culture names, such as `zh-Hans` for Chinese (Simplified).</span></span>

> [!NOTE]
> <span data-ttu-id="c3ae6-129">Pour plus d’informations sur la création de fichiers de ressources, consultez [Création de fichiers de ressources](creating-resource-files-for-desktop-apps.md) et [Création d’assemblys satellites](creating-satellite-assemblies-for-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-129">For information about creating resource files, see [Creating Resource Files](creating-resource-files-for-desktop-apps.md) and [Creating Satellite Assemblies](creating-satellite-assemblies-for-desktop-apps.md).</span></span>

<a name="cpconpackagingdeployingresourcesanchor1"></a>

## <a name="the-resource-fallback-process"></a><span data-ttu-id="c3ae6-130">Processus de secours pour les ressources</span><span class="sxs-lookup"><span data-stu-id="c3ae6-130">The Resource Fallback Process</span></span>

<span data-ttu-id="c3ae6-131">Le modèle Hub and Spoke pour l’empaquetage et le déploiement de ressources utilise un processus de secours pour localiser les ressources appropriées.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-131">The hub and spoke model for packaging and deploying resources uses a fallback process to locate appropriate resources.</span></span> <span data-ttu-id="c3ae6-132">Si l’utilisateur d’une application demande une ressource localisée qui n’est pas disponible, le Common Language Runtime recherche dans la hiérarchie des cultures une ressource de secours appropriée, la plus proche de celle demandée par l’utilisateur, et lève une exception uniquement en dernier ressort.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-132">If an application requests a localized resource  that is unavailable, the common language runtime searches the hierarchy of cultures for an appropriate fallback resource that most closely matches the user's application's request, and throws an exception only as a last resort.</span></span> <span data-ttu-id="c3ae6-133">À chaque niveau de la hiérarchie, si une ressource appropriée est trouvée, le runtime l’utilise.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-133">At each level of the hierarchy, if an appropriate resource is found, the runtime uses it.</span></span> <span data-ttu-id="c3ae6-134">Si la ressource est introuvable, la recherche se poursuit au niveau suivant.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-134">If the resource is not found, the search continues at the next level.</span></span>

<span data-ttu-id="c3ae6-135">Pour améliorer les performances de recherche, appliquez l’attribut <xref:System.Resources.NeutralResourcesLanguageAttribute> à votre assembly principal et passez-lui le nom de la langue neutre à utiliser avec votre assembly principal.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-135">To improve lookup performance, apply the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to your main assembly, and pass it the name of the neutral language that will work with your main assembly.</span></span>

### <a name="net-framework-resource-fallback-process"></a><span data-ttu-id="c3ae6-136">Processus de secours pour les ressources .NET Framework</span><span class="sxs-lookup"><span data-stu-id="c3ae6-136">.NET Framework resource fallback process</span></span>

<span data-ttu-id="c3ae6-137">Le processus de secours pour les ressources .NET Framework comprend les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-137">The .NET Framework resource fallback process involves the following steps:</span></span>

> [!TIP]
> <span data-ttu-id="c3ae6-138">Vous pourrez peut-être utiliser l' [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) élément de configuration pour optimiser le processus de secours pour les ressources et le processus par lequel le runtime détecte les assemblys de ressource.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-138">You may be able to use the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) configuration element to optimize the resource fallback process and the process by which the runtime probes for resource assemblies.</span></span> <span data-ttu-id="c3ae6-139">Pour plus d’informations, consultez la section [Optimisation du processus de secours pour les ressources](packaging-and-deploying-resources-in-desktop-apps.md#Optimizing).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-139">For more information, see the [Optimizing the Resource Fallback Process](packaging-and-deploying-resources-in-desktop-apps.md#Optimizing) section.</span></span>

1. <span data-ttu-id="c3ae6-140">Le runtime recherche d’abord dans le [Global Assembly Cache](../app-domains/gac.md) un assembly qui correspond à la culture demandée pour votre application.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-140">The runtime first checks the [global assembly cache](../app-domains/gac.md) for an assembly that matches the requested culture for your application.</span></span>

     <span data-ttu-id="c3ae6-141">Le Global Assembly Cache peut stocker des assemblys de ressources partagés par de nombreuses applications.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-141">The global assembly cache can store resource assemblies that are shared by many applications.</span></span> <span data-ttu-id="c3ae6-142">Cela vous évite d’avoir à inclure des ensembles de ressources spécifiques dans la structure de répertoires de chaque application que vous créez.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-142">This frees you from having to include specific sets of resources in the directory structure of every application you create.</span></span> <span data-ttu-id="c3ae6-143">Si le runtime trouve une référence à l’assembly, il recherche la ressource demandée dans cet assembly.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-143">If the runtime finds a reference to the assembly, it searches the assembly for the requested resource.</span></span> <span data-ttu-id="c3ae6-144">S’il trouve l’entrée dans l’assembly, il utilise la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-144">If it finds the entry in the assembly, it uses the requested resource.</span></span> <span data-ttu-id="c3ae6-145">S’il ne trouve pas l’entrée, il continue la recherche.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-145">If it doesn't find the entry, it continues the search.</span></span>

2. <span data-ttu-id="c3ae6-146">Le runtime recherche ensuite un sous-répertoire correspondant à la culture demandée dans le répertoire de l’assembly en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-146">The runtime next checks the directory of the currently executing assembly for a subdirectory that matches the requested culture.</span></span> <span data-ttu-id="c3ae6-147">S’il le trouve, il y recherche un assembly satellite valide pour la culture demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-147">If it finds the subdirectory, it searches that subdirectory for a valid satellite assembly for the requested culture.</span></span> <span data-ttu-id="c3ae6-148">Le runtime recherche ensuite dans l’assembly satellite la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-148">The runtime then searches the satellite assembly for the requested resource.</span></span> <span data-ttu-id="c3ae6-149">S’il trouve la ressource dans l’assembly, il l’utilise.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-149">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="c3ae6-150">S’il ne trouve pas la ressource, il continue la recherche.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-150">If it doesn't find the resource, it continues the search.</span></span>

3. <span data-ttu-id="c3ae6-151">Le runtime interroge ensuite Windows Installer pour déterminer si l’assembly satellite doit être installé à la demande.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-151">The runtime next queries the Windows Installer to determine whether the satellite assembly is to be installed on demand.</span></span> <span data-ttu-id="c3ae6-152">Dans ce cas, il gère l’installation, charge l’assembly et y recherche la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-152">If so, it handles the installation, loads the assembly, and searches it or the requested resource.</span></span> <span data-ttu-id="c3ae6-153">S’il trouve la ressource dans l’assembly, il l’utilise.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-153">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="c3ae6-154">S’il ne trouve pas la ressource, il continue la recherche.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-154">If it doesn't find the resource, it continues the search.</span></span>

4. <span data-ttu-id="c3ae6-155">Le runtime déclenche l’événement <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> pour indiquer qu’il lui est impossible de trouver l’assembly satellite.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-155">The runtime raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="c3ae6-156">Si vous choisissez de gérer l’événement, le gestionnaire d’événements peut retourner une référence à l’assembly satellite dont les ressources seront utilisées pour la recherche.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-156">If you choose to handle the event, your event handler can return a reference to the satellite assembly whose resources will be used for the lookup.</span></span> <span data-ttu-id="c3ae6-157">Sinon, le gestionnaire d’événements retourne `null` et la recherche se poursuit.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-157">Otherwise, the event handler returns `null` and the search continues.</span></span>

5. <span data-ttu-id="c3ae6-158">Le runtime effectue ensuite une nouvelle recherche dans le Global Assembly Cache, cette fois pour trouver l’assembly parent de la culture demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-158">The runtime next searches the global assembly cache again, this time for the parent assembly of the requested culture.</span></span> <span data-ttu-id="c3ae6-159">Si l’assembly parent existe dans le Global Assembly Cache, le runtime recherche la ressource demandée dans cet assembly.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-159">If the parent assembly exists in the global assembly cache, the runtime searches the assembly for the requested resource.</span></span>

     <span data-ttu-id="c3ae6-160">La culture parente est définie comme culture de secours appropriée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-160">The parent culture is defined as the appropriate fallback culture.</span></span> <span data-ttu-id="c3ae6-161">Considérez les parents comme des candidats de secours, car n’importe quelle ressource est préférable à la levée d’une exception.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-161">Consider parents as fallback candidates, because providing any resource is preferable to throwing an exception.</span></span> <span data-ttu-id="c3ae6-162">Ce processus vous permet également de réutiliser les ressources.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-162">This process also allows you to reuse resources.</span></span> <span data-ttu-id="c3ae6-163">Vous devez inclure une ressource donnée au niveau parent uniquement si la culture enfant n’a pas besoin de localiser la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-163">You should include a particular resource at the parent level only if the child culture doesn't need to localize the requested resource.</span></span> <span data-ttu-id="c3ae6-164">Par exemple, si vous fournissez des assemblys satellites pour `en` (anglais neutre), `en-GB` (anglais du Royaume-Uni) et `en-US` (anglais des États-Unis), le satellite `en` contient la terminologie commune et les satellites `en-GB` et `en-US` une terminologie de remplacement, seulement pour les termes qui diffèrent.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-164">For example, if you supply satellite assemblies for `en` (neutral English), `en-GB` (English as spoken in the United Kingdom), and `en-US` (English as spoken in the United States), the `en` satellite would contain the common terminology, and the `en-GB` and `en-US` satellites could provide overrides for only those terms that differ.</span></span>

6. <span data-ttu-id="c3ae6-165">Le runtime vérifie ensuite le répertoire de l’assembly en cours d’exécution à la recherche d’un répertoire parent.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-165">The runtime next checks the directory of the currently executing assembly to see if it contains a parent directory.</span></span> <span data-ttu-id="c3ae6-166">Si un répertoire parent existe, le runtime y recherche un assembly satellite valide pour la culture parente.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-166">If a parent directory exists, the runtime searches the directory for a valid satellite assembly for the parent culture.</span></span> <span data-ttu-id="c3ae6-167">S’il trouve l’assembly, le runtime y recherche la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-167">If it finds the assembly, the runtime searches the assembly for the requested resource.</span></span> <span data-ttu-id="c3ae6-168">S’il trouve la ressource, il l’utilise.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-168">If it finds the resource, it uses it.</span></span> <span data-ttu-id="c3ae6-169">S’il ne trouve pas la ressource, il continue la recherche.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-169">If it doesn't find the resource, it continues the search.</span></span>

7. <span data-ttu-id="c3ae6-170">Le runtime interroge ensuite Windows Installer pour déterminer si l’assembly satellite parent doit être installé à la demande.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-170">The runtime next queries the Windows Installer to determine whether the parent satellite assembly is to be installed on demand.</span></span> <span data-ttu-id="c3ae6-171">Dans ce cas, il gère l’installation, charge l’assembly et y recherche la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-171">If so, it handles the installation, loads the assembly, and searches it or the requested resource.</span></span> <span data-ttu-id="c3ae6-172">S’il trouve la ressource dans l’assembly, il l’utilise.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-172">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="c3ae6-173">S’il ne trouve pas la ressource, il continue la recherche.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-173">If it doesn't find the resource, it continues the search.</span></span>

8. <span data-ttu-id="c3ae6-174">Le runtime déclenche l’événement <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> pour indiquer qu’il lui est impossible de trouver une ressource de secours appropriée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-174">The runtime raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find an appropriate fallback resource.</span></span> <span data-ttu-id="c3ae6-175">Si vous choisissez de gérer l’événement, le gestionnaire d’événements peut retourner une référence à l’assembly satellite dont les ressources seront utilisées pour la recherche.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-175">If you choose to handle the event, your event handler can return a reference to the satellite assembly whose resources will be used for the lookup.</span></span> <span data-ttu-id="c3ae6-176">Sinon, le gestionnaire d’événements retourne `null` et la recherche se poursuit.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-176">Otherwise, the event handler returns `null` and the search continues.</span></span>

9. <span data-ttu-id="c3ae6-177">Le runtime effectue ensuite des recherches dans les assemblys parents, comme aux trois étapes précédentes, dans les différents niveaux.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-177">The runtime next searches parent assemblies, as in the previous three steps, through many potential levels.</span></span> <span data-ttu-id="c3ae6-178">Chaque culture n’a qu’un seul parent, qui est défini par la propriété <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType>, mais un parent peut avoir son propre parent.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-178">Each culture has only one parent, which is defined by the <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> property, but a parent might have its own parent.</span></span> <span data-ttu-id="c3ae6-179">La recherche des cultures parentes s’arrête quand la propriété <xref:System.Globalization.CultureInfo.Parent%2A> d’une culture retourne <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> ; pour la culture de secours pour les ressources, la culture indifférente n’est pas considérée comme une culture parente ou une culture qui peut avoir des ressources.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-179">The search for parent cultures stops when a culture's <xref:System.Globalization.CultureInfo.Parent%2A> property returns <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>; for resource fallback, the invariant culture is not considered a parent culture or a culture that can have resources.</span></span>

10. <span data-ttu-id="c3ae6-180">Si la culture spécifiée à l’origine et tous les parents ont fait l’objet de la recherche et que la ressource est toujours introuvable, la ressource de la culture par défaut (de secours) est utilisée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-180">If the culture that was originally specified and all parents have been searched and the resource is still not found, the resource for the default (fallback) culture is used.</span></span> <span data-ttu-id="c3ae6-181">En règle générale, les ressources de la culture par défaut sont incluses dans l’assembly d’application principal.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-181">Typically, the resources for the default culture are included in the main application assembly.</span></span> <span data-ttu-id="c3ae6-182">Toutefois, vous pouvez spécifier la valeur <xref:System.Resources.UltimateResourceFallbackLocation.Satellite> pour la propriété <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> de l’attribut <xref:System.Resources.NeutralResourcesLanguageAttribute> pour indiquer que l’emplacement de secours ultime pour les ressources est un assembly satellite, plutôt que l’assembly principal.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-182">However, you can specify a value of <xref:System.Resources.UltimateResourceFallbackLocation.Satellite> for the <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> property of the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to indicate that the ultimate fallback location for resources is a satellite assembly, rather than the main assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="c3ae6-183">La ressource par défaut est la seule ressource qui peut être compilée avec l’assembly principal.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-183">The default resource is the only resource that can be compiled with the main assembly.</span></span> <span data-ttu-id="c3ae6-184">Sauf si vous spécifiez un assembly satellite à l’aide de l’attribut <xref:System.Resources.NeutralResourcesLanguageAttribute>, il s’agit du secours ultime (parent final).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-184">Unless you specify a satellite assembly by using the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute, it is the ultimate fallback (final parent).</span></span> <span data-ttu-id="c3ae6-185">Par conséquent, nous vous recommandons de toujours inclure un ensemble de ressources par défaut dans votre assembly principal.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-185">Therefore, we recommend that you always include a default set of resources in your main assembly.</span></span> <span data-ttu-id="c3ae6-186">Vous empêchez ainsi la levée d’exceptions.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-186">This helps prevent exceptions from being thrown.</span></span> <span data-ttu-id="c3ae6-187">En ajoutant un fichier de ressources par défaut, vous fournissez une solution de secours pour toutes les ressources et garantissez qu’au moins une ressource est toujours présente pour l’utilisateur, même si elle n’est pas propre à une culture.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-187">By including a default resource, file you provide a fallback for all resources and ensure that at least one resource is always present for the user, even if it is not culturally specific.</span></span>

11. <span data-ttu-id="c3ae6-188">Enfin, si le runtime ne trouve pas une ressource pour une culture par défaut (de secours), une exception <xref:System.Resources.MissingManifestResourceException> ou <xref:System.Resources.MissingSatelliteAssemblyException> est levée pour indiquer que la ressource est introuvable.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-188">Finally, if the runtime doesn't find a resource for a default (fallback) culture, a <xref:System.Resources.MissingManifestResourceException> or <xref:System.Resources.MissingSatelliteAssemblyException> exception is thrown to indicate that the resource could not be found.</span></span>

<span data-ttu-id="c3ae6-189">Supposons par exemple que l’application demande une ressource localisée en espagnol (Mexique) (la culture `es-MX`).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-189">For example, suppose the application requests a resource localized for Spanish (Mexico) (the `es-MX` culture).</span></span> <span data-ttu-id="c3ae6-190">Tout d’abord, le runtime recherche l’assembly correspondant à `es-MX` dans le Global Assembly Cache, mais ne le trouve pas.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-190">The runtime first searches the global assembly cache for the assembly that matches `es-MX`, but doesn't find it.</span></span> <span data-ttu-id="c3ae6-191">Il recherche ensuite un répertoire `es-MX` dans le répertoire de l’assembly en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-191">The runtime then searches the directory of the currently executing assembly for an `es-MX` directory.</span></span> <span data-ttu-id="c3ae6-192">En cas d’échec, il effectue une nouvelle recherche dans le Global Assembly Cache pour trouver un assembly parent qui reflète la culture de secours correspondante, ici `es` (espagnol).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-192">Failing that, the runtime searches the global assembly cache again for a parent assembly that reflects the appropriate fallback culture — in this case, `es` (Spanish).</span></span> <span data-ttu-id="c3ae6-193">S’il ne trouve pas l’assembly parent, le runtime fouille tous les niveaux potentiels des assemblys parents, à la recherche de la culture `es-MX`, jusqu’à ce qu’il trouve une ressource correspondante.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-193">If the parent assembly is not found, the runtime searches all potential levels of parent assemblies for the `es-MX` culture until it finds a corresponding resource.</span></span> <span data-ttu-id="c3ae6-194">Si aucune ressource n’est trouvée, le runtime utilise la ressource pour la culture par défaut.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-194">If a resource isn't found, the runtime uses the resource for the default culture.</span></span>

<a name="Optimizing"></a>

#### <a name="optimizing-the-net-framework-resource-fallback-process"></a><span data-ttu-id="c3ae6-195">Optimiser le processus de secours pour les ressources .NET Framework</span><span class="sxs-lookup"><span data-stu-id="c3ae6-195">Optimizing the .NET Framework Resource Fallback Process</span></span>

<span data-ttu-id="c3ae6-196">Dans les conditions suivantes, vous pouvez optimiser le processus par lequel le runtime recherche des ressources dans les assemblys satellites.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-196">Under the following conditions, you can optimize the process by which the runtime searches for resources in satellite assemblies</span></span>

- <span data-ttu-id="c3ae6-197">Les assemblys satellites sont déployés au même emplacement que l’assembly de code.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-197">Satellite assemblies are deployed in the same location as the code assembly.</span></span> <span data-ttu-id="c3ae6-198">Si l’assembly de code est installé dans le [Global Assembly Cache](../app-domains/gac.md), les assemblys satellites sont également installés dans le Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-198">If the code assembly is installed in the [Global Assembly Cache](../app-domains/gac.md), satellite assemblies are also installed in the global assembly cache.</span></span> <span data-ttu-id="c3ae6-199">Si l’assembly de code est installé dans un répertoire, les assemblys satellites sont installés dans des dossiers spécifiques à la culture de ce répertoire.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-199">If the code assembly is installed in a directory, satellite assemblies are installed in culture-specific folders of that directory.</span></span>

- <span data-ttu-id="c3ae6-200">Les assemblys satellites ne sont pas installés à la demande.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-200">Satellite assemblies are not installed on demand.</span></span>

- <span data-ttu-id="c3ae6-201">Le code d’application ne gère pas l’événement <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-201">Application code does not handle the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

<span data-ttu-id="c3ae6-202">Vous optimisez la sonde pour les assemblys satellites en incluant l' [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) élément et en affectant à son attribut la valeur `enabled` `true` dans le fichier de configuration de l’application, comme indiqué dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-202">You optimize the probe for satellite assemblies by including the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) element and setting its `enabled` attribute to `true` in the application configuration file, as shown in the following example.</span></span>

```xml
<configuration>
   <runtime>
      <relativeBindForResources enabled="true" />
   </runtime>
</configuration>
```

<span data-ttu-id="c3ae6-203">La recherche optimisée des assemblys satellites est une fonctionnalité d’abonnement.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-203">The optimized probe for satellite assemblies is an opt-in feature.</span></span> <span data-ttu-id="c3ae6-204">Autrement dit, le runtime suit les étapes documentées dans [le processus de secours](packaging-and-deploying-resources-in-desktop-apps.md#cpconpackagingdeployingresourcesanchor1) pour les ressources, sauf si l' [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) élément est présent dans le fichier de configuration de l’application et que son `enabled` attribut a la valeur `true` .</span><span class="sxs-lookup"><span data-stu-id="c3ae6-204">That is, the runtime follows the steps documented in [The Resource Fallback Process](packaging-and-deploying-resources-in-desktop-apps.md#cpconpackagingdeployingresourcesanchor1) unless the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) element is present in the application's configuration file and its `enabled` attribute is set to `true`.</span></span> <span data-ttu-id="c3ae6-205">Dans ce cas, le processus de recherche d’un assembly satellite est modifié comme suit :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-205">If this is the case, the process of probing for a satellite assembly is modified as follows:</span></span>

- <span data-ttu-id="c3ae6-206">Le runtime utilise l’emplacement de l’assembly de code parent pour rechercher l’assembly satellite.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-206">The runtime uses the location of the parent code assembly to probe for the satellite assembly.</span></span> <span data-ttu-id="c3ae6-207">Si l’assembly parent est installé dans le Global Assembly Cache, le runtime effectue la recherche dans le cache, mais pas dans le répertoire de l’application.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-207">If the parent assembly is installed in the global assembly cache, the runtime probes in the cache but not in the application's directory.</span></span> <span data-ttu-id="c3ae6-208">Si l’assembly parent est installé dans un répertoire de l’application, le runtime effectue la recherche dans le répertoire de l’application, mais pas dans le Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-208">If the parent assembly is installed in an application directory, the runtime probes in the application directory but not in the global assembly cache.</span></span>

- <span data-ttu-id="c3ae6-209">Le runtime n’interroge pas Windows Installer pour l’installation à la demande des assemblys satellites.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-209">The runtime doesn't query the Windows Installer for on-demand installation of satellite assemblies.</span></span>

- <span data-ttu-id="c3ae6-210">Si la recherche d’un assembly de ressource particulier échoue, le runtime ne déclenche pas l’événement <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-210">If the probe for a particular resource assembly fails, the runtime does not raise the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

### <a name="net-core-resource-fallback-process"></a><span data-ttu-id="c3ae6-211">Processus de secours pour les ressources .NET Core</span><span class="sxs-lookup"><span data-stu-id="c3ae6-211">.NET Core resource fallback process</span></span>

<span data-ttu-id="c3ae6-212">Le processus de secours pour les ressources .NET Core comprend les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-212">The .NET Core resource fallback process involves the following steps:</span></span>

1. <span data-ttu-id="c3ae6-213">Le runtime tente de charger un assembly satellite pour la culture demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-213">The runtime attempts to load a satellite assembly for the requested culture.</span></span>
     - <span data-ttu-id="c3ae6-214">Il recherche un sous-répertoire correspondant à la culture demandée dans le répertoire de l’assembly en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-214">Checks the directory of the currently executing assembly for a subdirectory that matches the requested culture.</span></span> <span data-ttu-id="c3ae6-215">S’il le trouve, il y recherche un assembly satellite valide pour la culture demandée et le charge.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-215">If it finds the subdirectory, it searches that subdirectory for a valid satellite assembly for the requested culture and loads it.</span></span>

       > [!NOTE]
       > <span data-ttu-id="c3ae6-216">Sur les systèmes d’exploitation dont le système de fichiers respecte la casse (autrement dit, Linux et macOS), la recherche d’un sous-répertoire du nom de la culture est sensible à la casse.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-216">On operating systems with case-sensitive file systems (that is, Linux and macOS), the culture name subdirectory search is case-sensitive.</span></span> <span data-ttu-id="c3ae6-217">La casse du nom du sous-répertoire doit être identique à celle de <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> (par exemple, `es` ou `es-MX`).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-217">The subdirectory name must exactly match the case of the <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> (for example, `es` or `es-MX`).</span></span>

       > [!NOTE]
       > <span data-ttu-id="c3ae6-218">Si le programmeur a dérivé un contexte de chargement d’assembly personnalisé à partir de <xref:System.Runtime.Loader.AssemblyLoadContext>, la situation est complexe.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-218">If the programmer has derived a custom assembly load context from <xref:System.Runtime.Loader.AssemblyLoadContext>, the situation is complicated.</span></span> <span data-ttu-id="c3ae6-219">Si l’assembly en cours d’exécution a été chargé dans le contexte personnalisé, le runtime charge l’assembly satellite dans le contexte personnalisé.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-219">If the executing assembly was loaded into the custom context, the runtime loads the satellite assembly into the custom context.</span></span> <span data-ttu-id="c3ae6-220">Ce document ne couvre pas ce processus en détail.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-220">The details are out of scope for this document.</span></span> <span data-ttu-id="c3ae6-221">Consultez <xref:System.Runtime.Loader.AssemblyLoadContext>.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-221">See  <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span>

     - <span data-ttu-id="c3ae6-222">S’il n’a pas trouvé l’assembly satellite, <xref:System.Runtime.Loader.AssemblyLoadContext> déclenche l’événement <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> pour le signaler.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-222">If a satellite assemble has not been found, the <xref:System.Runtime.Loader.AssemblyLoadContext> raises the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="c3ae6-223">Si vous choisissez de gérer l’événement, votre gestionnaire d’événements peut charger et retourner une référence à l’assembly satellite.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-223">If you choose to handle the event, your event handler can load and return a reference to the satellite assembly.</span></span>
     - <span data-ttu-id="c3ae6-224">Si l’assembly satellite reste introuvable, AssemblyLoadContext conduit AppDomain à déclencher un événement <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> pour le signaler.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-224">If a satellite assembly still has not been found, the AssemblyLoadContext causes the AppDomain to trigger an <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="c3ae6-225">Si vous choisissez de gérer l’événement, votre gestionnaire d’événements peut charger et retourner une référence à l’assembly satellite.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-225">If you choose to handle the event, your event handler can load and return a reference to the satellite assembly.</span></span>

2. <span data-ttu-id="c3ae6-226">Dès qu’il trouve un assembly satellite, le runtime y recherche la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-226">If a satellite assembly is found, the runtime searches it for the requested resource.</span></span> <span data-ttu-id="c3ae6-227">S’il trouve la ressource dans l’assembly, il l’utilise.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-227">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="c3ae6-228">S’il ne trouve pas la ressource, il continue la recherche.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-228">If it doesn't find the resource, it continues the search.</span></span>

     > [!NOTE]
     > <span data-ttu-id="c3ae6-229">Pour trouver une ressource dans l’assembly satellite, le runtime recherche le fichier de ressources demandé par <xref:System.Resources.ResourceManager> pour <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-229">To find a resource within the satellite assembly, the runtime searches for the resource file requested by the <xref:System.Resources.ResourceManager> for the current <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c3ae6-230">Dans le fichier de ressources, il cherche le nom de la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-230">Within the resource file it searches for the requested resource name.</span></span> <span data-ttu-id="c3ae6-231">En cas d’échec, la ressource est traitée comme introuvable.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-231">If either is not found, the resource is treated as not found.</span></span>

3. <span data-ttu-id="c3ae6-232">Le runtime parcourt ensuite les assemblys de culture parente à différents niveaux potentiels, en répétant à chaque fois les étapes 1 et 2.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-232">The runtime next searches the parent culture assemblies through many potential levels, each time repeating steps 1 & 2.</span></span>

     <span data-ttu-id="c3ae6-233">La culture parente est définie comme une culture de secours appropriée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-233">The parent culture is defined as an appropriate fallback culture.</span></span> <span data-ttu-id="c3ae6-234">Considérez les parents comme des candidats de secours, car n’importe quelle ressource est préférable à la levée d’une exception.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-234">Consider parents as fallback candidates, because providing any resource is preferable to throwing an exception.</span></span> <span data-ttu-id="c3ae6-235">Ce processus vous permet également de réutiliser les ressources.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-235">This process also allows you to reuse resources.</span></span> <span data-ttu-id="c3ae6-236">Vous devez inclure une ressource donnée au niveau parent uniquement si la culture enfant n’a pas besoin de localiser la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-236">You should include a particular resource at the parent level only if the child culture doesn't need to localize the requested resource.</span></span> <span data-ttu-id="c3ae6-237">Par exemple, si vous fournissez des assemblys satellites pour `en` (anglais neutre), `en-GB` (anglais du Royaume-Uni) et `en-US` (anglais des États-Unis), le satellite `en` contient la terminologie commune et les satellites `en-GB` et `en-US` une terminologie de remplacement, seulement pour les termes qui diffèrent.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-237">For example, if you supply satellite assemblies for `en` (neutral English), `en-GB` (English as spoken in the United Kingdom), and `en-US` (English as spoken in the United States), the `en` satellite contains the common terminology, and the `en-GB` and `en-US` satellites provides overrides for only those terms that differ.</span></span>

     <span data-ttu-id="c3ae6-238">Chaque culture n’a qu’un seul parent, qui est défini par la propriété <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType>, mais un parent peut avoir son propre parent.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-238">Each culture has only one parent, which is defined by the <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> property, but a parent might have its own parent.</span></span> <span data-ttu-id="c3ae6-239">La recherche des cultures parentes s’arrête lorsque la propriété <xref:System.Globalization.CultureInfo.Parent%2A> d’une culture retourne <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-239">The search for parent cultures stops when a culture's <xref:System.Globalization.CultureInfo.Parent%2A> property returns <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c3ae6-240">En ce qui concerne la culture de secours pour les ressources, la culture invariante n’est pas considérée comme une culture parente ou une culture pouvant comporter des ressources.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-240">For resource fallback, the invariant culture is not considered a parent culture or a culture that can have resources.</span></span>

4. <span data-ttu-id="c3ae6-241">Si la culture spécifiée à l’origine et tous les parents ont fait l’objet de la recherche et que la ressource est toujours introuvable, la ressource de la culture par défaut (de secours) est utilisée.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-241">If the culture that was originally specified and all parents have been searched and the resource is still not found, the resource for the default (fallback) culture is used.</span></span> <span data-ttu-id="c3ae6-242">En règle générale, les ressources de la culture par défaut sont incluses dans l’assembly d’application principal.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-242">Typically, the resources for the default culture are included in the main application assembly.</span></span> <span data-ttu-id="c3ae6-243">Toutefois, vous pouvez spécifier la valeur <xref:System.Resources.UltimateResourceFallbackLocation.Satellite?displayProperty.nameWithType> pour la propriété <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> afin d’indiquer que l’emplacement de secours ultime des ressources est un assembly satellite, plutôt que l’assembly principal.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-243">However, you can specify a value of <xref:System.Resources.UltimateResourceFallbackLocation.Satellite?displayProperty.nameWithType> for the <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> property to indicate that the ultimate fallback location for resources is a satellite assembly rather than the main assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="c3ae6-244">La ressource par défaut est la seule ressource qui peut être compilée avec l’assembly principal.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-244">The default resource is the only resource that can be compiled with the main assembly.</span></span> <span data-ttu-id="c3ae6-245">Sauf si vous spécifiez un assembly satellite à l’aide de l’attribut <xref:System.Resources.NeutralResourcesLanguageAttribute>, il s’agit du secours ultime (parent final).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-245">Unless you specify a satellite assembly by using the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute, it is the ultimate fallback (final parent).</span></span> <span data-ttu-id="c3ae6-246">Par conséquent, nous vous recommandons de toujours inclure un ensemble de ressources par défaut dans votre assembly principal.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-246">Therefore, we recommend that you always include a default set of resources in your main assembly.</span></span> <span data-ttu-id="c3ae6-247">Vous empêchez ainsi la levée d’exceptions.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-247">This helps prevent exceptions from being thrown.</span></span> <span data-ttu-id="c3ae6-248">En ajoutant un fichier de ressources par défaut, vous fournissez une solution de secours pour toutes les ressources et garantissez qu’au moins une ressource est toujours présente pour l’utilisateur, même si elle n’est pas propre à une culture.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-248">By including a default resource file, you provide a fallback for all resources and ensure that at least one resource is always present for the user, even if it is not culturally specific.</span></span>

5. <span data-ttu-id="c3ae6-249">Enfin, si le runtime ne trouve pas de fichier de ressources pour une culture (de secours) par défaut, une exception <xref:System.Resources.MissingManifestResourceException> ou <xref:System.Resources.MissingSatelliteAssemblyException> est levée pour indiquer que la ressource est introuvable.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-249">Finally, if the runtime doesn't find a resource file for a default (fallback) culture, a <xref:System.Resources.MissingManifestResourceException> or <xref:System.Resources.MissingSatelliteAssemblyException> exception is thrown to indicate that the resource could not be found.</span></span> <span data-ttu-id="c3ae6-250">Si le fichier de ressources est trouvé, mais que la ressource demandée n’est pas présente, la demande retourne `null`.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-250">If the resource file is found but the requested resource is not present the request returns `null`.</span></span>

### <a name="ultimate-fallback-to-satellite-assembly"></a><span data-ttu-id="c3ae6-251">Secours ultime pour l’assembly satellite</span><span class="sxs-lookup"><span data-stu-id="c3ae6-251">Ultimate Fallback to Satellite Assembly</span></span>

<span data-ttu-id="c3ae6-252">Vous pouvez éventuellement supprimer des ressources de l’assembly principal et spécifier que le runtime doit charger les ressources de secours ultime depuis un assembly satellite qui correspond à une culture spécifique.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-252">You can optionally remove resources from the main assembly and specify that the runtime should load the ultimate fallback resources from a satellite assembly that corresponds to a specific culture.</span></span> <span data-ttu-id="c3ae6-253">Pour contrôler le processus de secours, vous utilisez le constructeur <xref:System.Resources.NeutralResourcesLanguageAttribute.%23ctor%28System.String%2CSystem.Resources.UltimateResourceFallbackLocation%29> et fournissez une valeur pour le paramètre <xref:System.Resources.UltimateResourceFallbackLocation> qui spécifie si le gestionnaire des ressources doit extraire les ressources de secours à partir de l’assembly principal ou d’un assembly satellite.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-253">To control the fallback process, you use the <xref:System.Resources.NeutralResourcesLanguageAttribute.%23ctor%28System.String%2CSystem.Resources.UltimateResourceFallbackLocation%29> constructor and supply a value for the <xref:System.Resources.UltimateResourceFallbackLocation> parameter that specifies whether Resource Manager should extract the fallback resources from the main assembly or from a satellite assembly.</span></span>

<span data-ttu-id="c3ae6-254">L’exemple .NET Framework suivant utilise l’attribut <xref:System.Resources.NeutralResourcesLanguageAttribute> pour stocker les ressources de secours d’une application dans un assembly satellite pour la langue française (`fr`).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-254">The following .NET Framework example uses the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to store an application's fallback resources in a satellite assembly for the French (`fr`) language.</span></span> <span data-ttu-id="c3ae6-255">L’exemple comprend deux fichiers de ressources textuels qui définissent une ressource de type chaîne unique nommée `Greeting`.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-255">The example has two text-based resource files that define a single string resource named `Greeting`.</span></span> <span data-ttu-id="c3ae6-256">Le premier, resources.fr.txt, contient une ressource de langue française.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-256">The first, resources.fr.txt, contains a French language resource.</span></span>

```text
Greeting=Bon jour!
```

<span data-ttu-id="c3ae6-257">Le second, resources.ru.txt, contient une ressource de langue russe.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-257">The second, resources,ru.txt, contains a Russian language resource.</span></span>

```text
Greeting=Добрый день
```

<span data-ttu-id="c3ae6-258">Ces deux fichiers sont compilés en fichiers .resources en exécutant le [Générateur de fichiers de ressources (Resgen.exe)](../tools/resgen-exe-resource-file-generator.md) à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-258">These two files are compiled to .resources files by running the [resource file generator (Resgen.exe)](../tools/resgen-exe-resource-file-generator.md) from the command line.</span></span> <span data-ttu-id="c3ae6-259">Pour la ressource de langue française, la commande est :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-259">For the French language resource, the command is:</span></span>

<span data-ttu-id="c3ae6-260">**resgen.exe resources.fr.txt**</span><span class="sxs-lookup"><span data-stu-id="c3ae6-260">**resgen.exe resources.fr.txt**</span></span>

<span data-ttu-id="c3ae6-261">Pour la ressource de langue russe, la commande est :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-261">For the Russian language resource, the command is:</span></span>

<span data-ttu-id="c3ae6-262">**resgen.exe resources.ru.txt**</span><span class="sxs-lookup"><span data-stu-id="c3ae6-262">**resgen.exe resources.ru.txt**</span></span>

<span data-ttu-id="c3ae6-263">Les fichiers .resources sont incorporés dans des bibliothèques de liens dynamiques en exécutant [Assembly Linker (Al.exe)](../tools/al-exe-assembly-linker.md) à partir de la commande de ligne pour la ressource de langue française comme suit :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-263">The .resources files are embedded into dynamic link libraries by running [assembly linker (Al.exe)](../tools/al-exe-assembly-linker.md) from the command line for the French language resource as follows:</span></span>

<span data-ttu-id="c3ae6-264">**al /t:lib /embed:resources.fr.resources /culture:fr /out:fr\Example1.resources.dll**</span><span class="sxs-lookup"><span data-stu-id="c3ae6-264">**al /t:lib /embed:resources.fr.resources /culture:fr /out:fr\Example1.resources.dll**</span></span>

<span data-ttu-id="c3ae6-265">et pour la ressource de langue russe comme suit :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-265">and for the Russian language resource as follows:</span></span>

<span data-ttu-id="c3ae6-266">**al /t:lib /embed:resources.ru.resources /culture:ru /out:ru\Example1.resources.dll**</span><span class="sxs-lookup"><span data-stu-id="c3ae6-266">**al /t:lib /embed:resources.ru.resources /culture:ru /out:ru\Example1.resources.dll**</span></span>

<span data-ttu-id="c3ae6-267">Le code source de l’application réside dans un fichier nommé Example1.cs ou Example1.vb.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-267">The application source code resides in a file named Example1.cs or Example1.vb.</span></span> <span data-ttu-id="c3ae6-268">Il inclut l’attribut <xref:System.Resources.NeutralResourcesLanguageAttribute> pour indiquer que la ressource d’application par défaut se trouve dans le sous-répertoire fr.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-268">It includes the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to indicate that the default application resource is in the fr subdirectory.</span></span> <span data-ttu-id="c3ae6-269">Il instancie le gestionnaire des ressources, récupère la valeur de la ressource `Greeting` et l’affiche dans la console.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-269">It instantiates the Resource Manager, retrieves the value of the `Greeting` resource, and displays it to the console.</span></span>

[!code-csharp[Conceptual.Resources.Packaging#1](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.resources.packaging/cs/example1.cs#1)]
[!code-vb[Conceptual.Resources.Packaging#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.resources.packaging/vb/example1.vb#1)]

<span data-ttu-id="c3ae6-270">Vous pouvez ensuite compiler le code source C# à partir de la ligne de commande comme suit :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-270">You can then compile C# source code from the command line as follows:</span></span>

```console
csc Example1.cs
```

<span data-ttu-id="c3ae6-271">La commande pour le compilateur Visual Basic est très semblable :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-271">The command for the Visual Basic compiler is very similar:</span></span>

```console
vbc Example1.vb
```

<span data-ttu-id="c3ae6-272">Comme aucune ressource n’est incorporée dans l’assembly principal, il est inutile de compiler à l’aide du commutateur `/resource`.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-272">Because there are no resources embedded in the main assembly, you do not have to compile by using the `/resource` switch.</span></span>

<span data-ttu-id="c3ae6-273">Quand vous exécutez l’exemple à partir d’un système dont la langue est autre que le russe, la sortie suivante s’affiche :</span><span class="sxs-lookup"><span data-stu-id="c3ae6-273">When you run the example from a system whose language is anything other than Russian, it displays the following output:</span></span>

```output
Bon jour!
```

## <a name="suggested-packaging-alternative"></a><span data-ttu-id="c3ae6-274">Autre empaquetage suggéré</span><span class="sxs-lookup"><span data-stu-id="c3ae6-274">Suggested Packaging Alternative</span></span>

<span data-ttu-id="c3ae6-275">Des contraintes de temps ou de budget peuvent vous empêcher de créer un ensemble de ressources pour chaque sous-culture que votre application prend en charge.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-275">Time or budget constraints might prevent you from creating a set of resources for every subculture that your application supports.</span></span> <span data-ttu-id="c3ae6-276">À la place, vous pouvez créer un seul assembly satellite pour une culture parente qui peut être utilisé par toutes les sous-cultures apparentées.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-276">Instead, you can create a single satellite assembly for a parent culture that all related subcultures can use.</span></span> <span data-ttu-id="c3ae6-277">Par exemple, vous pouvez fournir un seul assembly satellite anglais (en) qui est récupéré par les utilisateurs qui demandent des ressources anglaises spécifiques à une région et un seul assembly satellite allemand (de) pour les utilisateurs qui demandent des ressources allemandes spécifiques à une région.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-277">For example, you can provide a single English satellite assembly (en) that is retrieved by users who request region-specific English resources, and a single German satellite assembly (de) for users who request region-specific German resources.</span></span> <span data-ttu-id="c3ae6-278">Par exemple, les demandes pour l’allemand tel qu’il est parlé en Allemagne (de-DE), en Autriche (de-AT) et en Suisse (de-CH) reviennent à l’assembly satellite allemand (de).</span><span class="sxs-lookup"><span data-stu-id="c3ae6-278">For example, requests for German as spoken in Germany (de-DE), Austria (de-AT), and Switzerland (de-CH) would fall back to the German satellite assembly (de).</span></span> <span data-ttu-id="c3ae6-279">Comme les ressources par défaut représentent les ressources de secours final et doivent dont être les ressources qui seront demandées par la majorité des utilisateurs de votre application, choisissez-les avec précaution.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-279">The default resources are the final fallback and therefore should be the resources that will be requested by the majority of your application's users, so choose these resources carefully.</span></span> <span data-ttu-id="c3ae6-280">Cette solution déploie des ressources qui sont moins spécifiques à une culture, mais peut réduire de manière significative les coûts de localisation de votre application.</span><span class="sxs-lookup"><span data-stu-id="c3ae6-280">This approach deploys resources that are less culturally specific, but can significantly reduce your application's localization costs.</span></span>

## <a name="see-also"></a><span data-ttu-id="c3ae6-281">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c3ae6-281">See also</span></span>

- [<span data-ttu-id="c3ae6-282">Ressources dans les applications de bureau</span><span class="sxs-lookup"><span data-stu-id="c3ae6-282">Resources in Desktop Apps</span></span>](index.md)
- [<span data-ttu-id="c3ae6-283">Global Assembly Cache</span><span class="sxs-lookup"><span data-stu-id="c3ae6-283">Global Assembly Cache</span></span>](../app-domains/gac.md)
- [<span data-ttu-id="c3ae6-284">Création de fichiers de ressources</span><span class="sxs-lookup"><span data-stu-id="c3ae6-284">Creating Resource Files</span></span>](creating-resource-files-for-desktop-apps.md)
- [<span data-ttu-id="c3ae6-285">Création d’assemblys satellites</span><span class="sxs-lookup"><span data-stu-id="c3ae6-285">Creating Satellite Assemblies</span></span>](creating-satellite-assemblies-for-desktop-apps.md)
