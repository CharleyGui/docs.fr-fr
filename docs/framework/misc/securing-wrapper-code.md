---
title: Sécurisation du code wrapper
ms.date: 03/30/2017
helpviewer_keywords:
- security [.NET Framework], wrapper code
- wrapper code, securing
- secure coding, wrapper code
- code security, wrapper code
ms.assetid: 1df6c516-5bba-48bd-b450-1070e04b7389
author: mairaw
ms.author: mairaw
ms.openlocfilehash: abbc817142ab6906a04b4dc053693f87109922dc
ms.sourcegitcommit: 155012a8a826ee8ab6aa49b1b3a3b532e7b7d9bd
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/04/2019
ms.locfileid: "66487898"
---
# <a name="securing-wrapper-code"></a><span data-ttu-id="86580-102">Sécurisation du code wrapper</span><span class="sxs-lookup"><span data-stu-id="86580-102">Securing Wrapper Code</span></span>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="86580-103">Le code wrapper, en particulier quand le wrapper est d'un niveau de confiance supérieur au code qui l'utilise, peut faire apparaître un ensemble unique de failles en matière de sécurité.</span><span class="sxs-lookup"><span data-stu-id="86580-103">Wrapper code, especially where the wrapper has higher trust than code that uses it, can open a unique set of security weaknesses.</span></span> <span data-ttu-id="86580-104">Toutes les opérations effectuées au nom d'un appelant, où les autorisations limitées de l'appelant ne sont pas incluses dans la vérification de sécurité appropriée, constituent une faille potentielle exploitable.</span><span class="sxs-lookup"><span data-stu-id="86580-104">Anything done on behalf of a caller, where the caller's limited permissions are not included in the appropriate security check, is a potential weakness to be exploited.</span></span>  
  
 <span data-ttu-id="86580-105">N'autorisez jamais une opération par l'intermédiaire du wrapper que l'appelant ne peut pas effectuer lui-même.</span><span class="sxs-lookup"><span data-stu-id="86580-105">Never enable something through the wrapper that the caller could not do itself.</span></span> <span data-ttu-id="86580-106">Toute opération impliquant une vérification de sécurité limitée représente un danger particulier contrairement à l'obligation d'effectuer un parcours de pile complet.</span><span class="sxs-lookup"><span data-stu-id="86580-106">This is a special danger when doing something that involves a limited security check, as opposed to a full stack walk demand.</span></span> <span data-ttu-id="86580-107">Dans le cadre de vérifications de niveau unique, l'interposition du code wrapper entre l'appelant réel et l'élément d'API dont il est question peut amener facilement la vérification de sécurité à aboutir quand elle ne le devrait pas, ce qui affaiblit la sécurité.</span><span class="sxs-lookup"><span data-stu-id="86580-107">When single-level checks are involved, interposing the wrapper code between the real caller and the API element in question can easily cause the security check to succeed when it should not, thereby weakening security.</span></span>  
  
## <a name="delegates"></a><span data-ttu-id="86580-108">Délégués</span><span class="sxs-lookup"><span data-stu-id="86580-108">Delegates</span></span>  
 <span data-ttu-id="86580-109">La sécurité de délégué diffère selon les versions du .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="86580-109">Delegate security differs between versions of the .NET Framework.</span></span>  <span data-ttu-id="86580-110">Cette section décrit les différents comportements de délégué et les considérations sur la sécurité associées.</span><span class="sxs-lookup"><span data-stu-id="86580-110">This section describes the different delegate behaviors and associated security considerations.</span></span>  
  
### <a name="in-version-10-and-11-of-the-net-framework"></a><span data-ttu-id="86580-111">Dans les versions 1.0 et 1.1 du .NET Framework</span><span class="sxs-lookup"><span data-stu-id="86580-111">In version 1.0 and 1.1 of the .NET Framework</span></span>  
 <span data-ttu-id="86580-112">Les versions 1.0 et 1.1 du .NET Framework exécutent les actions de sécurité suivantes sur un créateur de délégués et un appelant de délégués.</span><span class="sxs-lookup"><span data-stu-id="86580-112">Version 1.0 and 1.1 of the .NET Framework perform the following security actions against a delegate creator and a delegate caller.</span></span>  
  
- <span data-ttu-id="86580-113">Quand un délégué est créé, des demandes de liaison de sécurité sur la méthode cible du délégué sont exécutées sur le jeu d'autorisations du créateur de délégués.</span><span class="sxs-lookup"><span data-stu-id="86580-113">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="86580-114">Si la satisfaction de l'action de sécurité échoue, une <xref:System.Security.SecurityException> est levée.</span><span class="sxs-lookup"><span data-stu-id="86580-114">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="86580-115">Quand le délégué est appelé, toutes les demandes de sécurité existantes sur l'appelant de délégués sont exécutées.</span><span class="sxs-lookup"><span data-stu-id="86580-115">When the delegate is invoked, any existing security demands on the delegate caller are performed.</span></span>  
  
 <span data-ttu-id="86580-116">Chaque fois que votre code prend un <xref:System.Delegate> à partir de code d'un niveau de confiance moindre et susceptible de l'appeler, veillez à ne pas permettre au code d'un niveau de confiance moindre d'élargir ses autorisations.</span><span class="sxs-lookup"><span data-stu-id="86580-116">Whenever your code takes a <xref:System.Delegate> from less-trusted code that might call it, make sure that you are not enabling the less-trusted code to escalate its permissions.</span></span> <span data-ttu-id="86580-117">Si vous prenez un délégué et que vous l'utilisez ultérieurement, le code qui a créé le délégué ne se trouve pas dans la pile des appels et ses autorisations ne seront pas testées si le code dans ou sous le délégué tente une opération protégée.</span><span class="sxs-lookup"><span data-stu-id="86580-117">If you take a delegate and use it later, the code that created the delegate is not on the call stack and its permissions will not be tested if code in or under the delegate attempts a protected operation.</span></span> <span data-ttu-id="86580-118">Si votre code et le code de l’appelant disposent de privilèges supérieurs à ceux du créateur, ce dernier peut gérer le chemin d’appel sans faire partie de la pile des appels.</span><span class="sxs-lookup"><span data-stu-id="86580-118">If your code and the caller code have higher privileges than the creator, the creator can orchestrate the call path without being part of the call stack.</span></span>  
  
### <a name="in-version-20-and-later-versions-of-the-net-framework"></a><span data-ttu-id="86580-119">Dans les versions 2.0 et versions ultérieures du .NET Framework</span><span class="sxs-lookup"><span data-stu-id="86580-119">In version 2.0 and later versions of the .NET Framework</span></span>  
 <span data-ttu-id="86580-120">Contrairement aux versions précédentes, les versions 2.0 et ultérieures du .NET Framework effectue action de sécurité sur le créateur de délégués lorsque le délégué est créé et appelé.</span><span class="sxs-lookup"><span data-stu-id="86580-120">Unlike previous versions, version 2.0 and later versions of the .NET Framework performs security action against the delegate creator when the delegate is created and called.</span></span>  
  
- <span data-ttu-id="86580-121">Quand un délégué est créé, des demandes de liaison de sécurité sur la méthode cible du délégué sont exécutées sur le jeu d'autorisations du créateur de délégués.</span><span class="sxs-lookup"><span data-stu-id="86580-121">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="86580-122">Si la satisfaction de l'action de sécurité échoue, une <xref:System.Security.SecurityException> est levée.</span><span class="sxs-lookup"><span data-stu-id="86580-122">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="86580-123">Le jeu d'autorisations du créateur de délégués est également capturé au cours de la création du délégué et stocké avec celui-ci.</span><span class="sxs-lookup"><span data-stu-id="86580-123">The delegate creator's grant set is also captured during delegate creation and stored with the delegate.</span></span>  
  
- <span data-ttu-id="86580-124">Quand le délégué est appelé, le jeu d'autorisations capturé du créateur de délégués est d'abord évalué par rapport à toutes les demandes dans le contexte actuel, si le créateur et l'appelant de délégués appartiennent à des assemblys différents.</span><span class="sxs-lookup"><span data-stu-id="86580-124">When the delegate is invoked, the delegate creator's captured grant set is first evaluated against any demands in the current context if the delegate creator and caller belong to different assemblies.</span></span>  <span data-ttu-id="86580-125">Ensuite, toutes les demandes de sécurité existantes sur l'appelant de délégués sont exécutées.</span><span class="sxs-lookup"><span data-stu-id="86580-125">Next, any existing security demands on the delegate caller are performed.</span></span>  
  
## <a name="link-demands-and-wrappers"></a><span data-ttu-id="86580-126">Demandes de liaison et wrappers</span><span class="sxs-lookup"><span data-stu-id="86580-126">Link demands and wrappers</span></span>  
 <span data-ttu-id="86580-127">Un cas de protection particulier avec des demandes de liaison a fait l'objet d'une consolidation dans l'infrastructure de sécurité, mais il représente toujours une source de failles possibles dans votre code.</span><span class="sxs-lookup"><span data-stu-id="86580-127">A special protection case with link demands has been strengthened in the security infrastructure, but it is still a source of possible weakness in your code.</span></span>  
  
 <span data-ttu-id="86580-128">Si le code de confiance suffisant appelle une propriété, un événement ou une méthode protégée par un [LinkDemand](../../../docs/framework/misc/link-demands.md), l’appel aboutit si la **LinkDemand** vérification des autorisations pour que l’appelant est satisfaite.</span><span class="sxs-lookup"><span data-stu-id="86580-128">If fully trusted code calls a property, event, or method protected by a [LinkDemand](../../../docs/framework/misc/link-demands.md), the call succeeds if the **LinkDemand** permission check for the caller is satisfied.</span></span> <span data-ttu-id="86580-129">En outre, si le code de confiance suffisant expose une classe qui prend le nom d’une propriété et appelle son **obtenir** accesseur à l’aide de la réflexion, cet appel à la **obtenir** accesseur aboutit même si le code utilisateur a pas le droit d’accéder à cette propriété.</span><span class="sxs-lookup"><span data-stu-id="86580-129">Additionally, if the fully trusted code exposes a class that takes the name of a property and calls its **get** accessor using reflection, that call to the **get** accessor succeeds even though the user code does not have the right to access this property.</span></span> <span data-ttu-id="86580-130">Il s’agit, car le **LinkDemand** vérifie uniquement l’appelant immédiat qui correspond au code entièrement fiable.</span><span class="sxs-lookup"><span data-stu-id="86580-130">This is because the **LinkDemand** checks only the immediate caller, which is the fully trusted code.</span></span> <span data-ttu-id="86580-131">Essentiellement, le code d'un niveau de confiance suffisant effectue un appel privilégié pour le compte du code utilisateur sans s'assurer que celui-ci a le droit d'effectuer cet appel.</span><span class="sxs-lookup"><span data-stu-id="86580-131">In essence, the fully trusted code is making a privileged call on behalf of user code without making sure that the user code has the right to make that call.</span></span>  
  
 <span data-ttu-id="86580-132">Afin d’éviter les failles de sécurité, le common language runtime élargit le contrôle dans une demande de parcours de pile complet sur n’importe quel appel indirect à une méthode, constructeur, propriété ou événement protégé par un **LinkDemand**.</span><span class="sxs-lookup"><span data-stu-id="86580-132">To help prevent such security holes, the common language runtime extends the check into a full stack-walking demand on any indirect call to a method, constructor, property, or event protected by a **LinkDemand**.</span></span> <span data-ttu-id="86580-133">Cette protection entraîne des coûts de performance et change la sémantique de la vérification de sécurité ; la demande de parcours de pile complet risque d'échouer là où la vérification de niveau unique plus rapide aurait réussi.</span><span class="sxs-lookup"><span data-stu-id="86580-133">This protection incurs some performance costs and changes the semantics of the security check; the full stack-walk demand might fail where the faster, one-level check would have passed.</span></span>  
  
## <a name="assembly-loading-wrappers"></a><span data-ttu-id="86580-134">Wrappers chargeant des assemblys</span><span class="sxs-lookup"><span data-stu-id="86580-134">Assembly loading wrappers</span></span>  
 <span data-ttu-id="86580-135">Plusieurs méthodes utilisées pour charger du code managé, y compris <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, chargent des assemblys avec la preuve de l'appelant.</span><span class="sxs-lookup"><span data-stu-id="86580-135">Several methods used to load managed code, including <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, load assemblies with the evidence of the caller.</span></span> <span data-ttu-id="86580-136">Si vous encapsulez une de ces méthodes, le système de sécurité peut utiliser l'octroi d'autorisation de votre code à la place des autorisations de l'appelant à votre wrapper afin de charger les assemblys.</span><span class="sxs-lookup"><span data-stu-id="86580-136">If you wrap any of these methods, the security system could use your code's permission grant, instead of the permissions of the caller to your wrapper, to load the assemblies.</span></span> <span data-ttu-id="86580-137">Vous ne devez pas permettre au code d'un niveau de confiance moindre de charger du code dont les autorisations accordées sont supérieures à celles de l'appelant à votre wrapper.</span><span class="sxs-lookup"><span data-stu-id="86580-137">You should not allow less-trusted code to load code that is granted higher permissions than those of the caller to your wrapper.</span></span>  
  
 <span data-ttu-id="86580-138">Tout code de confiance totale ou dont le niveau de confiance est nettement supérieur à un appelant potentiel (y compris un appelant avec des autorisations au niveau d'Internet) risque d'affaiblir la sécurité dans ce contexte.</span><span class="sxs-lookup"><span data-stu-id="86580-138">Any code that has full trust or significantly higher trust than a potential caller (including an Internet-permissions-level caller) could weaken security in this way.</span></span> <span data-ttu-id="86580-139">Si votre code possède une méthode publique qui prend un tableau d’octets et le passe à **Assembly.Load**, ce nom de l’appelant, créez un assembly, il peut perturber la sécurité.</span><span class="sxs-lookup"><span data-stu-id="86580-139">If your code has a public method that takes a byte array and passes it to **Assembly.Load**, thereby creating an assembly on the caller's behalf, it might break security.</span></span>  
  
 <span data-ttu-id="86580-140">Ce problème s'applique aux éléments d'API suivants :</span><span class="sxs-lookup"><span data-stu-id="86580-140">This issue applies to the following API elements:</span></span>  
  
- <xref:System.AppDomain.DefineDynamicAssembly%2A?displayProperty=nameWithType>  
  
- <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>  
  
## <a name="demand-vs-linkdemand"></a><span data-ttu-id="86580-141">Demand et LinkDemand</span><span class="sxs-lookup"><span data-stu-id="86580-141">Demand vs. LinkDemand</span></span>  
 <span data-ttu-id="86580-142">La sécurité déclarative propose deux types de vérification de sécurité similaires, mais qui effectuent des vérifications très différentes.</span><span class="sxs-lookup"><span data-stu-id="86580-142">Declarative security offers two kinds of security checks that are similar but perform very different checks.</span></span> <span data-ttu-id="86580-143">Vous devez connaître les deux formes, car un mauvais choix pourrait nuire aux performances et à la sécurité.</span><span class="sxs-lookup"><span data-stu-id="86580-143">You should understand both forms because the wrong choice can result in weak security or performance loss.</span></span>  
  
 <span data-ttu-id="86580-144">La sécurité déclarative propose les vérifications de sécurité suivantes :</span><span class="sxs-lookup"><span data-stu-id="86580-144">Declarative security offers the following security checks:</span></span>  
  
- <span data-ttu-id="86580-145"><xref:System.Security.Permissions.SecurityAction.Demand> spécifie le parcours de pile de sécurité d'accès du code.</span><span class="sxs-lookup"><span data-stu-id="86580-145"><xref:System.Security.Permissions.SecurityAction.Demand> specifies the code access security stack walk.</span></span> <span data-ttu-id="86580-146">Tous les appelants sur la pile doivent avoir l'autorisation ou l'identité spécifiée pour passer.</span><span class="sxs-lookup"><span data-stu-id="86580-146">All callers on the stack must have the specified permission or identity to pass.</span></span> <span data-ttu-id="86580-147">**À la demande** se produit à chaque appel, car la pile peut contenir des appelants différents.</span><span class="sxs-lookup"><span data-stu-id="86580-147">**Demand** occurs on every call because the stack might contain different callers.</span></span> <span data-ttu-id="86580-148">Si vous appelez une méthode de façon répétée, cette vérification de sécurité se produit à chaque fois.</span><span class="sxs-lookup"><span data-stu-id="86580-148">If you call a method repeatedly, this security check occurs each time.</span></span> <span data-ttu-id="86580-149">**À la demande** constitue une bonne protection contre les attaques malveillantes ; code non autorisé essaie de passer sera détecté.</span><span class="sxs-lookup"><span data-stu-id="86580-149">**Demand** is good protection against luring attacks; unauthorized code trying to get through it will be detected.</span></span>  
  
- <span data-ttu-id="86580-150">[LinkDemand](../../../docs/framework/misc/link-demands.md) se produit au moment de la compilation juste-à-temps (JIT) et vérifie uniquement l’appelant immédiat.</span><span class="sxs-lookup"><span data-stu-id="86580-150">[LinkDemand](../../../docs/framework/misc/link-demands.md) happens at just-in-time (JIT) compilation time and checks only the immediate caller.</span></span> <span data-ttu-id="86580-151">Cette vérification de sécurité ne vérifie pas l'appelant de l'appelant.</span><span class="sxs-lookup"><span data-stu-id="86580-151">This security check does not check the caller's caller.</span></span> <span data-ttu-id="86580-152">Une fois cette vérification effectuée, il n'y a pas de charge de sécurité supplémentaire, quel que soit le nombre d'appels effectués par l'appelant.</span><span class="sxs-lookup"><span data-stu-id="86580-152">Once this check passes, there is no additional security overhead no matter how many times the caller might call.</span></span> <span data-ttu-id="86580-153">Cependant, il n'y a pas non plus de protection contre les attaques malveillantes.</span><span class="sxs-lookup"><span data-stu-id="86580-153">However, there is also no protection from luring attacks.</span></span> <span data-ttu-id="86580-154">Avec **LinkDemand**, tout code qui réussit le test et peut référencer votre code risque de perturber la sécurité en autorisant le code nuisible d’appeler à l’aide du code autorisé.</span><span class="sxs-lookup"><span data-stu-id="86580-154">With **LinkDemand**, any code that passes the test and can reference your code can potentially break security by allowing malicious code to call using the authorized code.</span></span> <span data-ttu-id="86580-155">Par conséquent, n’utilisez pas **LinkDemand** , sauf si toutes les failles possibles peuvent être évités de manière approfondie.</span><span class="sxs-lookup"><span data-stu-id="86580-155">Therefore, do not use **LinkDemand** unless all the possible weaknesses can be thoroughly avoided.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="86580-156">Dans le .NET Framework 4, les demandes de liaison ont été remplacés par le <xref:System.Security.SecurityCriticalAttribute> attribut <xref:System.Security.SecurityRuleSet.Level2> assemblys.</span><span class="sxs-lookup"><span data-stu-id="86580-156">In the .NET Framework 4, link demands have been replaced by the <xref:System.Security.SecurityCriticalAttribute> attribute in <xref:System.Security.SecurityRuleSet.Level2> assemblies.</span></span> <span data-ttu-id="86580-157">Le <xref:System.Security.SecurityCriticalAttribute> est équivalente à une demande de liaison pour la confiance totale ; Toutefois, elle affecte également les règles d’héritage.</span><span class="sxs-lookup"><span data-stu-id="86580-157">The <xref:System.Security.SecurityCriticalAttribute> is equivalent to a link demand for full trust; however, it also affects inheritance rules.</span></span> <span data-ttu-id="86580-158">Pour plus d’informations sur cette modification, consultez [Code Transparent de sécurité, niveau 2](../../../docs/framework/misc/security-transparent-code-level-2.md).</span><span class="sxs-lookup"><span data-stu-id="86580-158">For more information about this change, see [Security-Transparent Code, Level 2](../../../docs/framework/misc/security-transparent-code-level-2.md).</span></span>  
  
 <span data-ttu-id="86580-159">Les précautions supplémentaires requises lors de l’utilisation **LinkDemand** doivent être programmées individuellement ; le système de sécurité peut aider à leur application.</span><span class="sxs-lookup"><span data-stu-id="86580-159">The extra precautions required when using **LinkDemand** must be programmed individually; the security system can help with enforcement.</span></span> <span data-ttu-id="86580-160">La moindre erreur fait apparaître une défaillance en matière de sécurité.</span><span class="sxs-lookup"><span data-stu-id="86580-160">Any mistake opens a security weakness.</span></span> <span data-ttu-id="86580-161">Tout le code autorisé qui utilise votre code doit prendre en charge l'implémentation de la sécurité supplémentaire en effectuant les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="86580-161">All authorized code that uses your code must be responsible for implementing additional security by doing the following:</span></span>  
  
- <span data-ttu-id="86580-162">Limiter l'accès du code appelant à la classe ou à l'assembly.</span><span class="sxs-lookup"><span data-stu-id="86580-162">Restricting the calling code's access to the class or assembly.</span></span>  
  
- <span data-ttu-id="86580-163">Placer les mêmes vérifications de sécurité sur le code appelant que celles figurant dans le code appelé et forcer ses appelants à effectuer les vérifications.</span><span class="sxs-lookup"><span data-stu-id="86580-163">Placing the same security checks on the calling code that appear on the code being called and obligating its callers to do so.</span></span> <span data-ttu-id="86580-164">Par exemple, si vous écrivez du code qui appelle une méthode qui est protégée par un **LinkDemand** pour le <xref:System.Security.Permissions.SecurityPermission> avec la <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> indicateur spécifié, votre méthode doit également effectuer un **LinkDemand** (ou **à la demande**, qui est plus fort) pour cette autorisation.</span><span class="sxs-lookup"><span data-stu-id="86580-164">For example, if you write code that calls a method that is protected with a **LinkDemand** for the <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> flag specified, your method should also make a **LinkDemand** (or **Demand**, which is stronger) for this permission.</span></span> <span data-ttu-id="86580-165">L’exception est si votre code utilise le **LinkDemand**-méthode protégée d’une façon limitée que vous décidez est sûr, étant donné les autres mécanismes de protection de sécurité (par exemple, les demandes) dans votre code.</span><span class="sxs-lookup"><span data-stu-id="86580-165">The exception is if your code uses the **LinkDemand**-protected method in a limited way that you decide is safe, given other security protection mechanisms (such as demands) in your code.</span></span> <span data-ttu-id="86580-166">Dans ce cas exceptionnel, l'appelant prend la responsabilité d'affaiblir la protection de la sécurité sur le code sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="86580-166">In this exceptional case, the caller takes responsibility in weakening the security protection on the underlying code.</span></span>  
  
- <span data-ttu-id="86580-167">Veiller à ce que les appelants de votre code ne puissent pas tromper celui-ci et lui faire appeler le code protégé de leur part.</span><span class="sxs-lookup"><span data-stu-id="86580-167">Ensuring that your code's callers cannot trick your code into calling the protected code on their behalf.</span></span> <span data-ttu-id="86580-168">En d'autres termes, les appelants ne peuvent pas forcer le code autorisé à passer des paramètres spécifiques au code protégé ou pour obtenir de ce dernier des résultats.</span><span class="sxs-lookup"><span data-stu-id="86580-168">In other words, callers cannot force the authorized code to pass specific parameters to the protected code, or to get results back from it.</span></span>  
  
### <a name="interfaces-and-link-demands"></a><span data-ttu-id="86580-169">Interfaces et demandes de liaison</span><span class="sxs-lookup"><span data-stu-id="86580-169">Interfaces and Link Demands</span></span>  
 <span data-ttu-id="86580-170">Si une méthode virtuelle, une propriété ou un événement avec **LinkDemand** substitue une méthode de classe de base, la méthode de classe de base doit avoir également le même **LinkDemand** pour la méthode substituée soit efficace.</span><span class="sxs-lookup"><span data-stu-id="86580-170">If a virtual method, property, or event with **LinkDemand** overrides a base class method, the base class method must also have the same **LinkDemand** for the overridden method in order to be effective.</span></span> <span data-ttu-id="86580-171">Il est possible pour le code nuisible d'effectuer un cast en type de base en retour et d'appeler la méthode de la classe de base.</span><span class="sxs-lookup"><span data-stu-id="86580-171">It is possible for malicious code to cast back to the base type and call the base class method.</span></span> <span data-ttu-id="86580-172">Notez également que les demandes de liaison peuvent être ajoutées implicitement aux assemblys qui n'ont pas l'attribut <xref:System.Security.AllowPartiallyTrustedCallersAttribute> de niveau assembly.</span><span class="sxs-lookup"><span data-stu-id="86580-172">Also note that link demands can be added implicitly to assemblies that do not have the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> assembly-level attribute.</span></span>  
  
 <span data-ttu-id="86580-173">Il est recommandé de protéger les implémentations des méthodes avec des demandes de liaison quand des méthodes d'interface possèdent également des demandes de liaison.</span><span class="sxs-lookup"><span data-stu-id="86580-173">It is a good practice to protect method implementations with link demands when interface methods also have link demands.</span></span> <span data-ttu-id="86580-174">Notez les informations suivantes concernant l'utilisation de demandes de liaison avec des interfaces :</span><span class="sxs-lookup"><span data-stu-id="86580-174">Note the following about using link demands with interfaces:</span></span>  
  
- <span data-ttu-id="86580-175">Si vous placez un **LinkDemand** sur une méthode publique d’une classe qui implémente une méthode d’interface, le **LinkDemand** ne sont pas appliquées si vous effectuez un cast à l’interface, puis appelez la méthode.</span><span class="sxs-lookup"><span data-stu-id="86580-175">If you place a **LinkDemand** on a public method of a class that implements an interface method, the **LinkDemand** will not be enforced if you then cast to the interface and call the method.</span></span> <span data-ttu-id="86580-176">Dans ce cas, étant donné que vous avez relié à l’interface, seul le **LinkDemand** sur l’interface est honoré.</span><span class="sxs-lookup"><span data-stu-id="86580-176">In this case, because you linked against the interface, only the **LinkDemand** on the interface is honored.</span></span>  
  
 <span data-ttu-id="86580-177">Passez en revue les éléments suivants en examinant les questions de sécurité :</span><span class="sxs-lookup"><span data-stu-id="86580-177">Review the following items for security issues:</span></span>  
  
- <span data-ttu-id="86580-178">Explicitez les demandes de liaison sur des méthodes d'interface.</span><span class="sxs-lookup"><span data-stu-id="86580-178">Explicit link demands on interface methods.</span></span> <span data-ttu-id="86580-179">Veillez à ce que ces demandes de liaison offrent la protection attendue.</span><span class="sxs-lookup"><span data-stu-id="86580-179">Make sure these link demands offer the expected protection.</span></span> <span data-ttu-id="86580-180">Déterminez si du code nuisible peut utiliser un cast pour contourner les demandes de liaison comme décrit précédemment.</span><span class="sxs-lookup"><span data-stu-id="86580-180">Determine whether malicious code can use a cast to get around the link demands as described previously.</span></span>  
  
- <span data-ttu-id="86580-181">Méthodes virtuelles avec demandes de liaison appliquées.</span><span class="sxs-lookup"><span data-stu-id="86580-181">Virtual methods with link demands applied.</span></span>  
  
- <span data-ttu-id="86580-182">Types et interfaces qu'ils implémentent.</span><span class="sxs-lookup"><span data-stu-id="86580-182">Types and the interfaces they implement.</span></span> <span data-ttu-id="86580-183">Ceux-ci doivent utiliser les demandes de liaison de manière cohérente.</span><span class="sxs-lookup"><span data-stu-id="86580-183">These should use link demands consistently.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="86580-184">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="86580-184">See also</span></span>

- [<span data-ttu-id="86580-185">Instructions de codage sécurisé</span><span class="sxs-lookup"><span data-stu-id="86580-185">Secure Coding Guidelines</span></span>](../../../docs/standard/security/secure-coding-guidelines.md)
