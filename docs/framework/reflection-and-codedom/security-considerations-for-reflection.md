---
title: Considérations sur la sécurité de la réflexion
description: En savoir plus sur les considérations de sécurité pour la réflexion dans .NET. L’obtention d’informations sur les types et les membres est autorisée, mais l’accès aux membres a des restrictions.
ms.date: 03/30/2017
helpviewer_keywords:
- permissions [.NET Framework], reflection
- MethodInfo parameters
- reflection, security
- partial trust,reflection
- nonpublic members
- reflection,partial trust
- link demands
ms.assetid: 42d9dc2a-8fcc-4ff3-b002-4ff260ef3dc5
ms.openlocfilehash: 0465cbd5ceb7d4f44bb6d10865fcbd17b8ed7af6
ms.sourcegitcommit: 3d84eac0818099c9949035feb96bbe0346358504
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/21/2020
ms.locfileid: "86865253"
---
# <a name="security-considerations-for-reflection"></a><span data-ttu-id="a336c-104">Considérations sur la sécurité de la réflexion</span><span class="sxs-lookup"><span data-stu-id="a336c-104">Security Considerations for Reflection</span></span>

<span data-ttu-id="a336c-105">La réflexion permet d'obtenir des informations sur les types et les membres, et d'accéder aux membres (c'est-à-dire appeler des méthodes et des constructeurs, obtenir et définir des valeurs de propriétés, ajouter et supprimer des gestionnaires d'événements, etc.).</span><span class="sxs-lookup"><span data-stu-id="a336c-105">Reflection provides the ability to obtain information about types and members, and to access members (that is, to call methods and constructors, to get and set property values, to add and remove event handlers, and so on).</span></span> <span data-ttu-id="a336c-106">L'utilisation de la réflexion pour obtenir des informations sur les types et les membres n'est pas limitée.</span><span class="sxs-lookup"><span data-stu-id="a336c-106">The use of reflection to obtain information about types and members is not restricted.</span></span> <span data-ttu-id="a336c-107">Tout code peut utiliser la réflexion pour effectuer les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="a336c-107">All code can use reflection to perform the following tasks:</span></span>

- <span data-ttu-id="a336c-108">Énumérer les types et les membres, et examiner leurs métadonnées.</span><span class="sxs-lookup"><span data-stu-id="a336c-108">Enumerate types and members, and examine their metadata.</span></span>

- <span data-ttu-id="a336c-109">Énumérer et examiner les assemblys et les modules.</span><span class="sxs-lookup"><span data-stu-id="a336c-109">Enumerate and examine assemblies and modules.</span></span>

<span data-ttu-id="a336c-110">En revanche, l'utilisation de la réflexion pour accéder aux membres est soumise à des restrictions.</span><span class="sxs-lookup"><span data-stu-id="a336c-110">Using reflection to access members, by contrast, is subject to restrictions.</span></span> <span data-ttu-id="a336c-111">À compter de .NET Framework 4, seul le code de confiance peut utiliser la réflexion pour accéder aux membres critiques de sécurité.</span><span class="sxs-lookup"><span data-stu-id="a336c-111">Beginning with the .NET Framework 4, only trusted code can use reflection to access security-critical members.</span></span> <span data-ttu-id="a336c-112">En outre, seul le code de confiance peut utiliser la réflexion pour accéder aux membres non publics qui ne seraient pas directement accessibles au code compilé.</span><span class="sxs-lookup"><span data-stu-id="a336c-112">Furthermore, only trusted code can use reflection to access nonpublic members that would not be directly accessible to compiled code.</span></span> <span data-ttu-id="a336c-113">Enfin, le code qui utilise la réflexion pour accéder à un membre critique sécurisé doit avoir les autorisations demandées par ce membre, tout comme avec le code compilé.</span><span class="sxs-lookup"><span data-stu-id="a336c-113">Finally, code that uses reflection to access a safe-critical member must have whatever permissions the safe-critical member demands, just as with compiled code.</span></span>

<span data-ttu-id="a336c-114">Moyennant les autorisations nécessaires, le code peut utiliser la réflexion pour effectuer les types d'accès suivants :</span><span class="sxs-lookup"><span data-stu-id="a336c-114">Subject to necessary permissions, code can use reflection to perform the following kinds of access:</span></span>

- <span data-ttu-id="a336c-115">Accès aux membres publics qui ne sont pas critiques de sécurité.</span><span class="sxs-lookup"><span data-stu-id="a336c-115">Access public members that are not security-critical.</span></span>

- <span data-ttu-id="a336c-116">Accès aux membres non publics qui seraient accessibles au code compilé, si ces membres ne sont pas critiques de sécurité.</span><span class="sxs-lookup"><span data-stu-id="a336c-116">Access nonpublic members that would be accessible to compiled code, if those members are not security-critical.</span></span> <span data-ttu-id="a336c-117">Voici des exemples de ces membres non publics :</span><span class="sxs-lookup"><span data-stu-id="a336c-117">Examples of such nonpublic members include:</span></span>

  - <span data-ttu-id="a336c-118">Membres protégés des classes de base du code appelant.</span><span class="sxs-lookup"><span data-stu-id="a336c-118">Protected members of the calling code's base classes.</span></span> <span data-ttu-id="a336c-119">(Dans la réflexion, ceci s'appelle l'accès au niveau de la famille.)</span><span class="sxs-lookup"><span data-stu-id="a336c-119">(In reflection, this is referred to as family-level access.)</span></span>

  - <span data-ttu-id="a336c-120">Membres `internal` (les membres `Friend` en Visual Basic) de l'assembly du code appelant.</span><span class="sxs-lookup"><span data-stu-id="a336c-120">`internal` members (`Friend` members in Visual Basic) in the calling code's assembly.</span></span> <span data-ttu-id="a336c-121">(Dans la réflexion, ceci s'appelle l'accès au niveau de l'assembly.)</span><span class="sxs-lookup"><span data-stu-id="a336c-121">(In reflection, this is referred to as assembly-level access.)</span></span>

  - <span data-ttu-id="a336c-122">Membres privés d'autres instances de la classe qui contient le code appelant.</span><span class="sxs-lookup"><span data-stu-id="a336c-122">Private members of other instances of the class that contains the calling code.</span></span>

<span data-ttu-id="a336c-123">Par exemple, le code qui est exécuté dans un domaine d'application sandbox est limité aux accès décrits dans cette liste, sauf si le domaine d'application accorde des autorisations supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="a336c-123">For example, code that is run in a sandboxed application domain is limited to the access described in this list, unless the application domain grants additional permissions.</span></span>

<span data-ttu-id="a336c-124">À compter de .NET Framework 2.0 Service Pack 1, le fait de tenter d’accéder à des membres normalement inaccessibles génère une demande du jeu d’autorisations de l’objet cible, plus <xref:System.Security.Permissions.ReflectionPermission> avec l’indicateur <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a336c-124">Starting with the .NET Framework 2.0 Service Pack 1, attempting to access members that are normally inaccessible generates a demand for the grant set of the target object plus <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag.</span></span> <span data-ttu-id="a336c-125">Un code qui s’exécute avec un niveau de confiance total (par exemple, le code d’une application lancée à partir de la ligne de commande) peut toujours satisfaire à ces autorisations.</span><span class="sxs-lookup"><span data-stu-id="a336c-125">Code that is running with full trust (for example, code in an application that is launched from the command line) can always satisfy these permissions.</span></span> <span data-ttu-id="a336c-126">(Ceci est soumis aux limitations de l'accès aux membres critiques de sécurité, comme décrit plus loin dans cet article.)</span><span class="sxs-lookup"><span data-stu-id="a336c-126">(This is subject to limitations in accessing security-critical members, as described later in this article.)</span></span>

<span data-ttu-id="a336c-127">De façon facultative, un domaine d’application sandbox peut accorder <xref:System.Security.Permissions.ReflectionPermission> avec l’indicateur <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType>, comme décrit dans la section [Accès aux membres normalement inaccessibles](#accessingNormallyInaccessible) plus loin dans cet article.</span><span class="sxs-lookup"><span data-stu-id="a336c-127">Optionally, a sandboxed application domain can grant <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag, as described in the section [Accessing Members That Are Normally Inaccessible](#accessingNormallyInaccessible), later in this article.</span></span>

<a name="accessingSecurityCritical"></a>

## <a name="accessing-security-critical-members"></a><span data-ttu-id="a336c-128">Accès aux membres critiques de sécurité</span><span class="sxs-lookup"><span data-stu-id="a336c-128">Accessing Security-Critical Members</span></span>

<span data-ttu-id="a336c-129">Un membre est critique du point de vue de la sécurité s'il a l'attribut <xref:System.Security.SecurityCriticalAttribute>, s'il appartient à un type qui a l'attribut <xref:System.Security.SecurityCriticalAttribute> ou s'il est dans un assembly critique du point de vue de la sécurité.</span><span class="sxs-lookup"><span data-stu-id="a336c-129">A member is security-critical if it has the <xref:System.Security.SecurityCriticalAttribute>, if it belongs to a type that has the <xref:System.Security.SecurityCriticalAttribute>, or if it is in a security-critical assembly.</span></span> <span data-ttu-id="a336c-130">À compter de .NET Framework 4, les règles d’accès aux membres critiques de sécurité sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="a336c-130">Beginning with the .NET Framework 4, the rules for accessing security-critical members are as follows:</span></span>

- <span data-ttu-id="a336c-131">Le code transparent ne peut pas utiliser la réflexion pour accéder aux membres critiques de sécurité, même si le code est d'un niveau de confiance total.</span><span class="sxs-lookup"><span data-stu-id="a336c-131">Transparent code cannot use reflection to access security-critical members, even if the code is fully trusted.</span></span> <span data-ttu-id="a336c-132">Une exception <xref:System.MethodAccessException>, <xref:System.FieldAccessException> ou <xref:System.TypeAccessException> est levée.</span><span class="sxs-lookup"><span data-stu-id="a336c-132">A <xref:System.MethodAccessException>, <xref:System.FieldAccessException>, or <xref:System.TypeAccessException> is thrown.</span></span>

- <span data-ttu-id="a336c-133">Le code qui s'exécute avec un niveau de confiance partiel est traité comme étant transparent.</span><span class="sxs-lookup"><span data-stu-id="a336c-133">Code that is running with partial trust is treated as transparent.</span></span>

<span data-ttu-id="a336c-134">Ces règles sont les mêmes si l'accès à un membre critique du point de vue de la sécurité se fait directement par du code compilé ou en utilisant la réflexion.</span><span class="sxs-lookup"><span data-stu-id="a336c-134">These rules are the same whether a security-critical member is accessed directly by compiled code, or accessed by using reflection.</span></span>

<span data-ttu-id="a336c-135">Le code d'application qui est exécuté à partir de la ligne de commande s'exécute avec une confiance totale.</span><span class="sxs-lookup"><span data-stu-id="a336c-135">Application code that is run from the command line runs with full trust.</span></span> <span data-ttu-id="a336c-136">Tant qu'il n'est pas marqué comme transparent, il peut utiliser la réflexion pour accéder aux membres critiques de sécurité.</span><span class="sxs-lookup"><span data-stu-id="a336c-136">As long as it is not marked as transparent, it can use reflection to access security-critical members.</span></span> <span data-ttu-id="a336c-137">Quand le même code est exécuté avec un niveau de confiance partiel (par exemple dans un domaine d'application sandbox), le niveau de confiance de l'assembly détermine s'il peut accéder au code critique du point de vue de la sécurité. Si l'assembly a un nom fort et qu'il est installé dans le Global Assembly Cache, c'est un assembly de confiance et il peut appeler des membres critiques de sécurité.</span><span class="sxs-lookup"><span data-stu-id="a336c-137">When the same code is run with partial trust (for example, in a sandboxed application domain) the assembly's trust level determines whether it can access security-critical code: If the assembly has a strong name and is installed in the global assembly cache, it is a trusted assembly and can call security-critical members.</span></span> <span data-ttu-id="a336c-138">Si elle n'est pas de confiance, il devient transparent même s'il n'était pas marqué comme tel, et il ne peut pas accéder aux membres critiques de sécurité.</span><span class="sxs-lookup"><span data-stu-id="a336c-138">If it is not trusted, it becomes transparent even though it was not marked as transparent, and it cannot access security-critical members.</span></span>

<span data-ttu-id="a336c-139">Pour plus d’informations sur le modèle de sécurité dans .NET Framework 4, consultez [Changements relatifs à la sécurité](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes).</span><span class="sxs-lookup"><span data-stu-id="a336c-139">For more information about the security model in the .NET Framework 4, see [Security Changes](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes).</span></span>

## <a name="reflection-and-transparency"></a><span data-ttu-id="a336c-140">Réflexion et transparence</span><span class="sxs-lookup"><span data-stu-id="a336c-140">Reflection and Transparency</span></span>

<span data-ttu-id="a336c-141">Depuis .NET Framework 4, le common language runtime détermine le niveau de transparence d’un type ou d’un membre à partir de plusieurs facteurs, notamment le niveau de confiance de l’assembly et le niveau de confiance du domaine d’application.</span><span class="sxs-lookup"><span data-stu-id="a336c-141">Beginning with the .NET Framework 4, the common language runtime determines the transparency level of a type or member from several factors, including the trust level of the assembly and the trust level of the application domain.</span></span> <span data-ttu-id="a336c-142">La réflexion fournit les propriétés <xref:System.Type.IsSecurityCritical%2A>, <xref:System.Type.IsSecuritySafeCritical%2A> et <xref:System.Type.IsSecurityTransparent%2A> pour vous permettre de connaître le niveau de transparence d'un type.</span><span class="sxs-lookup"><span data-stu-id="a336c-142">Reflection provides the <xref:System.Type.IsSecurityCritical%2A>, <xref:System.Type.IsSecuritySafeCritical%2A>, and <xref:System.Type.IsSecurityTransparent%2A> properties to enable you to discover the transparency level of a type.</span></span> <span data-ttu-id="a336c-143">Le tableau suivant montre les combinaisons valides de ces propriétés.</span><span class="sxs-lookup"><span data-stu-id="a336c-143">The following table shows the valid combinations of these properties.</span></span>

|<span data-ttu-id="a336c-144">Niveau de sécurité</span><span class="sxs-lookup"><span data-stu-id="a336c-144">Security level</span></span>|<span data-ttu-id="a336c-145">EstCritiqueDeSécurité</span><span class="sxs-lookup"><span data-stu-id="a336c-145">IsSecurityCritical</span></span>|<span data-ttu-id="a336c-146">EstCritiqueSécurisé</span><span class="sxs-lookup"><span data-stu-id="a336c-146">IsSecuritySafeCritical</span></span>|<span data-ttu-id="a336c-147">EstTransparentDeSécurité</span><span class="sxs-lookup"><span data-stu-id="a336c-147">IsSecurityTransparent</span></span>|
|--------------------|------------------------|----------------------------|---------------------------|
|<span data-ttu-id="a336c-148">Critique</span><span class="sxs-lookup"><span data-stu-id="a336c-148">Critical</span></span>|`true`|`false`|`false`|
|<span data-ttu-id="a336c-149">Critique sécurisé</span><span class="sxs-lookup"><span data-stu-id="a336c-149">Safe-critical</span></span>|`true`|`true`|`false`|
|<span data-ttu-id="a336c-150">Mode transparent</span><span class="sxs-lookup"><span data-stu-id="a336c-150">Transparent</span></span>|`false`|`false`|`true`|

<span data-ttu-id="a336c-151">L'utilisation de ces propriétés est beaucoup plus simple que d'examiner les annotations de sécurité d'un assembly et ses types, de vérifier le niveau de confiance actuel et de tenter de dupliquer les règles du runtime.</span><span class="sxs-lookup"><span data-stu-id="a336c-151">Using these properties is much simpler than examining the security annotations of an assembly and its types, checking the current trust level, and attempting to duplicate the runtime's rules.</span></span> <span data-ttu-id="a336c-152">Par exemple, un même type peut être critique du point de vue de la sécurité quand il est exécuté à partir de la ligne de commande ou il peut être transparent de sécurité quand il est exécuté dans un domaine d'application sandbox.</span><span class="sxs-lookup"><span data-stu-id="a336c-152">For example, the same type can be security-critical when it is run from the command line, or security-transparent when it is run in a sandboxed application domain.</span></span>

<span data-ttu-id="a336c-153">Il existe des propriétés similaires sur les classes <xref:System.Reflection.MethodBase>, <xref:System.Reflection.FieldInfo>, <xref:System.Reflection.Emit.TypeBuilder>, <xref:System.Reflection.Emit.MethodBuilder> et <xref:System.Reflection.Emit.DynamicMethod>.</span><span class="sxs-lookup"><span data-stu-id="a336c-153">There are similar properties on the <xref:System.Reflection.MethodBase>, <xref:System.Reflection.FieldInfo>, <xref:System.Reflection.Emit.TypeBuilder>, <xref:System.Reflection.Emit.MethodBuilder>, and <xref:System.Reflection.Emit.DynamicMethod> classes.</span></span> <span data-ttu-id="a336c-154">(Pour d'autres abstractions de réflexion et d'émission de réflexion, des attributs de sécurité sont appliqués aux méthodes associées ; par exemple, dans le cas des propriétés, ils sont appliqués aux accesseurs de propriété.)</span><span class="sxs-lookup"><span data-stu-id="a336c-154">(For other reflection and reflection emit abstractions, security attributes are applied to the associated methods; for example, in the case of properties they are applied to the property accessors.)</span></span>

<a name="accessingNormallyInaccessible"></a>

## <a name="accessing-members-that-are-normally-inaccessible"></a><span data-ttu-id="a336c-155">Accès aux membres qui sont normalement inaccessibles</span><span class="sxs-lookup"><span data-stu-id="a336c-155">Accessing Members That Are Normally Inaccessible</span></span>

<span data-ttu-id="a336c-156">Pour utiliser la réflexion pour appeler des membres inaccessibles en fonction des règles d'accessibilité du common language runtime, votre code doit disposer de l'une des deux autorisations suivantes :</span><span class="sxs-lookup"><span data-stu-id="a336c-156">To use reflection to invoke members that are inaccessible according to the accessibility rules of the common language runtime, your code must be granted one of two permissions:</span></span>

- <span data-ttu-id="a336c-157">Pour permettre au code d’appeler un membre non public : votre code doit disposer de l’autorisation <xref:System.Security.Permissions.ReflectionPermission> avec l’indicateur <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a336c-157">To allow code to invoke any nonpublic member:Your code must be granted <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a336c-158">Par défaut, la stratégie de sécurité refuse cette autorisation à du code provenant d'Internet.</span><span class="sxs-lookup"><span data-stu-id="a336c-158">By default, security policy denies this permission to code that originates from the Internet.</span></span> <span data-ttu-id="a336c-159">Cette autorisation ne doit jamais être accordée à du code provenant d'Internet.</span><span class="sxs-lookup"><span data-stu-id="a336c-159">This permission should never be granted to code that originates from the Internet.</span></span>

- <span data-ttu-id="a336c-160">Pour permettre au code d'appeler un membre non public, pour autant que le jeu d'autorisations de l'assembly qui contient le membre appelé soit l'équivalent ou un sous-ensemble du jeu d'autorisations de l'assembly qui contient l'appel de code : votre code doit disposer de l'autorisation <xref:System.Security.Permissions.ReflectionPermission> avec l'indicateur <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a336c-160">To allow code to invoke any nonpublic member, as long as the grant set of the assembly that contains the invoked member is the same as, or a subset of, the grant set of the assembly that contains the invoking code: Your code must be granted <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag.</span></span>

<span data-ttu-id="a336c-161">Par exemple, supposons que vous accordez des autorisations Internet à un domaine d'application, plus l'autorisation <xref:System.Security.Permissions.ReflectionPermission> avec l'indicateur <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType>, puis que vous exécutez une application Internet avec deux assemblys, A et B.</span><span class="sxs-lookup"><span data-stu-id="a336c-161">For example, suppose you grant an application domain Internet permissions plus <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag, and then run an Internet application with two assemblies, A and B.</span></span>

- <span data-ttu-id="a336c-162">L'assembly A peut utiliser la réflexion pour accéder aux membres privés de l'assembly B, car le jeu d'autorisations de l'assembly B n'inclut pas d'autorisations qui n'ont pas été accordées à A.</span><span class="sxs-lookup"><span data-stu-id="a336c-162">Assembly A can use reflection to access private members of assembly B, because the grant set of assembly B does not include any permissions that A has not been granted.</span></span>

- <span data-ttu-id="a336c-163">L’assembly A ne peut pas utiliser la réflexion pour accéder aux membres privés des assemblys du .NET Framework, comme mscorlib.dll, car mscorlib.dll est d’un niveau de confiance total et dispose donc d’autorisations qui n’ont pas été accordées à l’assembly A. Une exception <xref:System.MemberAccessException> est levée quand la sécurité d’accès du code parcourt la pile au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="a336c-163">Assembly A cannot use reflection to access private members of .NET Framework assemblies such as mscorlib.dll, because mscorlib.dll is fully trusted and therefore has permissions that have not been granted to assembly A. A <xref:System.MemberAccessException> is thrown when code access security walks the stack at run time.</span></span>

## <a name="serialization"></a><span data-ttu-id="a336c-164">Sérialisation</span><span class="sxs-lookup"><span data-stu-id="a336c-164">Serialization</span></span>

<span data-ttu-id="a336c-165">Pour la sérialisation, l'autorisation <xref:System.Security.Permissions.SecurityPermission> avec l'indicateur <xref:System.Security.Permissions.SecurityPermissionAttribute.SerializationFormatter%2A?displayProperty=nameWithType> permet d'obtenir et de définir des membres des types sérialisables, indépendamment de l'accessibilité.</span><span class="sxs-lookup"><span data-stu-id="a336c-165">For serialization, <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionAttribute.SerializationFormatter%2A?displayProperty=nameWithType> flag provides the ability to get and set members of serializable types, regardless of accessibility.</span></span> <span data-ttu-id="a336c-166">Cette autorisation permet au code de découvrir et de changer l'état privé d'une instance.</span><span class="sxs-lookup"><span data-stu-id="a336c-166">This permission enables code to discover and change the private state of an instance.</span></span> <span data-ttu-id="a336c-167">(En plus de disposer des autorisations appropriées, le type doit être [marqué](../../standard/attributes/applying-attributes.md) comme étant sérialisable dans les métadonnées.)</span><span class="sxs-lookup"><span data-stu-id="a336c-167">(In addition to being granted the appropriate permissions, the type must be [marked](../../standard/attributes/applying-attributes.md) as serializable in metadata.)</span></span>

## <a name="parameters-of-type-methodinfo"></a><span data-ttu-id="a336c-168">Paramètres de type MethodInfo</span><span class="sxs-lookup"><span data-stu-id="a336c-168">Parameters of Type MethodInfo</span></span>

<span data-ttu-id="a336c-169">Évitez d'écrire des membres publics qui prennent des paramètres <xref:System.Reflection.MethodInfo>, en particulier pour du code de confiance.</span><span class="sxs-lookup"><span data-stu-id="a336c-169">Avoid writing public members that take <xref:System.Reflection.MethodInfo> parameters, especially for trusted code.</span></span> <span data-ttu-id="a336c-170">Ces membres peuvent être plus vulnérables au code malveillant.</span><span class="sxs-lookup"><span data-stu-id="a336c-170">Such members might be more vulnerable to malicious code.</span></span> <span data-ttu-id="a336c-171">Par exemple, considérez un membre public dans du code d'un niveau de confiance élevé qui prend un paramètre <xref:System.Reflection.MethodInfo>.</span><span class="sxs-lookup"><span data-stu-id="a336c-171">For example, consider a public member in highly trusted code that takes a <xref:System.Reflection.MethodInfo> parameter.</span></span> <span data-ttu-id="a336c-172">Supposons que ce membre public appelle indirectement la méthode <xref:System.Reflection.MethodBase.Invoke%2A> sur le paramètre fourni.</span><span class="sxs-lookup"><span data-stu-id="a336c-172">Assume that the public member indirectly calls the <xref:System.Reflection.MethodBase.Invoke%2A> method on the supplied parameter.</span></span> <span data-ttu-id="a336c-173">Si le membre public n'effectue pas les vérifications d'autorisations nécessaires, l'appel à la méthode <xref:System.Reflection.MethodBase.Invoke%2A> réussit toujours, car le système de sécurité détermine que l'appelant est d'un niveau de confiance élevé.</span><span class="sxs-lookup"><span data-stu-id="a336c-173">If the public member does not perform the necessary permission checks, the call to the <xref:System.Reflection.MethodBase.Invoke%2A> method will always succeed, because the security system determines that the caller is highly trusted.</span></span> <span data-ttu-id="a336c-174">Même si un code malveillant n'a pas l'autorisation d'appeler directement la méthode, il peut néanmoins le faire indirectement en appelant le membre public.</span><span class="sxs-lookup"><span data-stu-id="a336c-174">Even if malicious code does not have the permission to directly invoke the method, it can still do so indirectly by calling the public member.</span></span>

## <a name="version-information"></a><span data-ttu-id="a336c-175">Informations sur la version</span><span class="sxs-lookup"><span data-stu-id="a336c-175">Version Information</span></span>

- <span data-ttu-id="a336c-176">À compter de .NET Framework 4, le code transparent ne peut pas utiliser la réflexion pour accéder aux membres critiques de sécurité.</span><span class="sxs-lookup"><span data-stu-id="a336c-176">Beginning with the .NET Framework 4, transparent code cannot use reflection to access security-critical members.</span></span>

- <span data-ttu-id="a336c-177">L’indicateur <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> a été introduit dans .NET Framework 2.0 Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="a336c-177">The <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag is introduced in the .NET Framework 2.0 Service Pack 1.</span></span> <span data-ttu-id="a336c-178">Les versions antérieures du .NET Framework exigent l’indicateur <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> pour le code qui utilise la réflexion pour accéder aux membres non publics.</span><span class="sxs-lookup"><span data-stu-id="a336c-178">Earlier versions of the .NET Framework require the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag for code that uses reflection to access nonpublic members.</span></span> <span data-ttu-id="a336c-179">Il s'agit d'une autorisation qui ne doit jamais être accordée à du code d'un niveau de confiance partiel.</span><span class="sxs-lookup"><span data-stu-id="a336c-179">This is a permission that should never be granted to partially trusted code.</span></span>

- <span data-ttu-id="a336c-180">Depuis .NET Framework 2.0, l’utilisation de la réflexion pour obtenir des informations sur les types et les membres non publics ne nécessite aucune autorisation.</span><span class="sxs-lookup"><span data-stu-id="a336c-180">Beginning with the .NET Framework 2.0, using reflection to obtain information about nonpublic types and members does not require any permissions.</span></span> <span data-ttu-id="a336c-181">Dans les versions antérieures, l’autorisation <xref:System.Security.Permissions.ReflectionPermission> avec l’indicateur <xref:System.Security.Permissions.ReflectionPermissionFlag.TypeInformation?displayProperty=nameWithType> est exigée.</span><span class="sxs-lookup"><span data-stu-id="a336c-181">In earlier versions, <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.TypeInformation?displayProperty=nameWithType> flag is required.</span></span>

## <a name="see-also"></a><span data-ttu-id="a336c-182">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a336c-182">See also</span></span>

- <xref:System.Security.Permissions.ReflectionPermissionFlag>
- <xref:System.Security.Permissions.ReflectionPermission>
- <xref:System.Security.Permissions.SecurityPermission>
- [<span data-ttu-id="a336c-183">Modifications de sécurité</span><span class="sxs-lookup"><span data-stu-id="a336c-183">Security Changes</span></span>](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes)
- [<span data-ttu-id="a336c-184">Sécurité d’accès du code</span><span class="sxs-lookup"><span data-stu-id="a336c-184">Code Access Security</span></span>](../misc/code-access-security.md)
- [<span data-ttu-id="a336c-185">Problèmes de sécurité dans l'émission de réflexion</span><span class="sxs-lookup"><span data-stu-id="a336c-185">Security Issues in Reflection Emit</span></span>](security-issues-in-reflection-emit.md)
- [<span data-ttu-id="a336c-186">Affichage des informations de type</span><span class="sxs-lookup"><span data-stu-id="a336c-186">Viewing Type Information</span></span>](viewing-type-information.md)
- [<span data-ttu-id="a336c-187">Application des attributs</span><span class="sxs-lookup"><span data-stu-id="a336c-187">Applying Attributes</span></span>](../../standard/attributes/applying-attributes.md)
- [<span data-ttu-id="a336c-188">Accès aux attributs personnalisés</span><span class="sxs-lookup"><span data-stu-id="a336c-188">Accessing Custom Attributes</span></span>](accessing-custom-attributes.md)
