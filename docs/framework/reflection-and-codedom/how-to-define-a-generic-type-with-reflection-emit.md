---
title: Guide pratique pour définir un type générique avec l'émission de réflexion
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- generics [.NET Framework], reflection emit
- generics [.NET Framework], dynamic types
- reflection emit, generic types
ms.assetid: 07d5f01a-7b5b-40ea-9b15-f21561098fe4
ms.openlocfilehash: b553fd2235c73cf879474dc4f44f958dddcb649c
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/30/2019
ms.locfileid: "73130153"
---
# <a name="how-to-define-a-generic-type-with-reflection-emit"></a><span data-ttu-id="22cc5-102">Guide pratique pour définir un type générique avec l'émission de réflexion</span><span class="sxs-lookup"><span data-stu-id="22cc5-102">How to: Define a Generic Type with Reflection Emit</span></span>
<span data-ttu-id="22cc5-103">Cette rubrique montre comment créer un type générique simple avec deux paramètres de type, comment appliquer des contraintes de classe, des contraintes d’interface et des contraintes spéciales aux paramètres de type, et comment créer des membres qui utilisent les paramètres de type de la classe comme types de paramètres et types de retour.</span><span class="sxs-lookup"><span data-stu-id="22cc5-103">This topic shows how to create a simple generic type with two type parameters, how to apply class constraints, interface constraints, and special constraints to the type parameters, and how to create members that use the type parameters of the class as parameter types and return types.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="22cc5-104">Une méthode n’est pas générique simplement car elle appartient à un type générique et utilise les paramètres de type de ce type.</span><span class="sxs-lookup"><span data-stu-id="22cc5-104">A method is not generic just because it belongs to a generic type and uses the type parameters of that type.</span></span> <span data-ttu-id="22cc5-105">Une méthode est générique uniquement si elle a sa propre liste de paramètres de type.</span><span class="sxs-lookup"><span data-stu-id="22cc5-105">A method is generic only if it has its own type parameter list.</span></span> <span data-ttu-id="22cc5-106">La plupart des méthodes sur les types génériques ne sont pas génériques, comme dans cet exemple.</span><span class="sxs-lookup"><span data-stu-id="22cc5-106">Most methods on generic types are not generic, as in this example.</span></span> <span data-ttu-id="22cc5-107">Pour obtenir un exemple d’émission de méthode générique, consultez [Guide pratique pour définir une méthode générique avec l’émission de réflexion](how-to-define-a-generic-method-with-reflection-emit.md).</span><span class="sxs-lookup"><span data-stu-id="22cc5-107">For an example of emitting a generic method, see [How to: Define a Generic Method with Reflection Emit](how-to-define-a-generic-method-with-reflection-emit.md).</span></span>  
  
### <a name="to-define-a-generic-type"></a><span data-ttu-id="22cc5-108">Pour définir un type générique</span><span class="sxs-lookup"><span data-stu-id="22cc5-108">To define a generic type</span></span>  
  
1. <span data-ttu-id="22cc5-109">Définissez un assembly dynamique nommé `GenericEmitExample1`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-109">Define a dynamic assembly named `GenericEmitExample1`.</span></span> <span data-ttu-id="22cc5-110">Dans cet exemple, l’assembly est exécuté et enregistré sur le disque. <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType> est donc spécifié.</span><span class="sxs-lookup"><span data-stu-id="22cc5-110">In this example, the assembly is executed and saved to disk, so <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType> is specified.</span></span>  
  
     [!code-cpp[EmitGenericType#2](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#2)]
     [!code-csharp[EmitGenericType#2](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#2)]
     [!code-vb[EmitGenericType#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#2)]  
  
2. <span data-ttu-id="22cc5-111">Définissez un module dynamique.</span><span class="sxs-lookup"><span data-stu-id="22cc5-111">Define a dynamic module.</span></span> <span data-ttu-id="22cc5-112">Un assembly est composé de modules exécutables.</span><span class="sxs-lookup"><span data-stu-id="22cc5-112">An assembly is made up of executable modules.</span></span> <span data-ttu-id="22cc5-113">Pour un assembly à module unique, le nom du module est identique au nom de l’assembly, et le nom de fichier est le nom du module suivi d’une extension.</span><span class="sxs-lookup"><span data-stu-id="22cc5-113">For a single-module assembly, the module name is the same as the assembly name, and the file name is the module name plus an extension.</span></span>  
  
     [!code-cpp[EmitGenericType#3](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#3)]
     [!code-csharp[EmitGenericType#3](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#3)]
     [!code-vb[EmitGenericType#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#3)]  
  
3. <span data-ttu-id="22cc5-114">Définissez une classe.</span><span class="sxs-lookup"><span data-stu-id="22cc5-114">Define a class.</span></span> <span data-ttu-id="22cc5-115">Dans cet exemple, la classe se nomme `Sample`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-115">In this example, the class is named `Sample`.</span></span>  
  
     [!code-cpp[EmitGenericType#4](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#4)]
     [!code-csharp[EmitGenericType#4](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#4)]
     [!code-vb[EmitGenericType#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#4)]  
  
4. <span data-ttu-id="22cc5-116">Définissez les paramètres de type générique de `Sample` en passant un tableau de chaînes contenant les noms des paramètres à la méthode <xref:System.Reflection.Emit.TypeBuilder.DefineGenericParameters%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="22cc5-116">Define the generic type parameters of `Sample` by passing an array of strings containing the names of the parameters to the <xref:System.Reflection.Emit.TypeBuilder.DefineGenericParameters%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="22cc5-117">Cela fait de la classe un type générique.</span><span class="sxs-lookup"><span data-stu-id="22cc5-117">This makes the class a generic type.</span></span> <span data-ttu-id="22cc5-118">La valeur de retour est un tableau d’objets <xref:System.Reflection.Emit.GenericTypeParameterBuilder> représentant les paramètres de type, qui peut être utilisé dans votre code émis.</span><span class="sxs-lookup"><span data-stu-id="22cc5-118">The return value is an array of <xref:System.Reflection.Emit.GenericTypeParameterBuilder> objects representing the type parameters, which can be used in your emitted code.</span></span>  
  
     <span data-ttu-id="22cc5-119">Dans le code suivant, `Sample` devient un type générique avec les paramètres de type `TFirst` et `TSecond`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-119">In the following code, `Sample` becomes a generic type with type parameters `TFirst` and `TSecond`.</span></span> <span data-ttu-id="22cc5-120">Pour faciliter la lecture du code, chaque <xref:System.Reflection.Emit.GenericTypeParameterBuilder> est placé dans une variable du même nom que le paramètre de type.</span><span class="sxs-lookup"><span data-stu-id="22cc5-120">To make the code easier to read, each <xref:System.Reflection.Emit.GenericTypeParameterBuilder> is placed in a variable with the same name as the type parameter.</span></span>  
  
     [!code-cpp[EmitGenericType#5](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#5)]
     [!code-csharp[EmitGenericType#5](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#5)]
     [!code-vb[EmitGenericType#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#5)]  
  
5. <span data-ttu-id="22cc5-121">Ajoutez des contraintes spéciales aux paramètres de type.</span><span class="sxs-lookup"><span data-stu-id="22cc5-121">Add special constraints to the type parameters.</span></span> <span data-ttu-id="22cc5-122">Dans cet exemple, le paramètre de type `TFirst` est limité aux types qui ont des constructeurs sans paramètre et aux types référence.</span><span class="sxs-lookup"><span data-stu-id="22cc5-122">In this example, type parameter `TFirst` is constrained to types that have parameterless constructors, and to reference types.</span></span>  
  
     [!code-cpp[EmitGenericType#6](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#6)]
     [!code-csharp[EmitGenericType#6](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#6)]
     [!code-vb[EmitGenericType#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#6)]  
  
6. <span data-ttu-id="22cc5-123">Ajoutez éventuellement des contraintes de classe et d’interface aux paramètres de type.</span><span class="sxs-lookup"><span data-stu-id="22cc5-123">Optionally add class and interface constraints to the type parameters.</span></span> <span data-ttu-id="22cc5-124">Dans cet exemple, le paramètre de type `TFirst` est limité aux types qui dérivent de la classe de base représentée par l’objet <xref:System.Type> contenu dans la variable `baseType`, et qui implémentent les interfaces dont les types sont contenus dans les variables `interfaceA` et `interfaceB`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-124">In this example, type parameter `TFirst` is constrained to types that derive from the base class represented by the <xref:System.Type> object contained in the variable `baseType`, and that implement the interfaces whose types are contained in the variables `interfaceA` and `interfaceB`.</span></span> <span data-ttu-id="22cc5-125">Pour plus d’informations sur la déclaration et l’assignation de ces variables, consultez l’exemple de code.</span><span class="sxs-lookup"><span data-stu-id="22cc5-125">See the code example for the declaration and assignment of these variables.</span></span>  
  
     [!code-cpp[EmitGenericType#7](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#7)]
     [!code-csharp[EmitGenericType#7](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#7)]
     [!code-vb[EmitGenericType#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#7)]  
  
7. <span data-ttu-id="22cc5-126">Définissez un champ.</span><span class="sxs-lookup"><span data-stu-id="22cc5-126">Define a field.</span></span> <span data-ttu-id="22cc5-127">Dans cet exemple, le type du champ est spécifié par le paramètre de type `TFirst`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-127">In this example, the type of the field is specified by type parameter `TFirst`.</span></span> <span data-ttu-id="22cc5-128"><xref:System.Reflection.Emit.GenericTypeParameterBuilder> dérive de <xref:System.Type>. Vous pouvez donc utiliser des paramètres de type générique partout où un type peut être utilisé.</span><span class="sxs-lookup"><span data-stu-id="22cc5-128"><xref:System.Reflection.Emit.GenericTypeParameterBuilder> derives from <xref:System.Type>, so you can use generic type parameters anywhere a type can be used.</span></span>  
  
     [!code-cpp[EmitGenericType#21](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#21)]
     [!code-csharp[EmitGenericType#21](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#21)]
     [!code-vb[EmitGenericType#21](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#21)]  
  
8. <span data-ttu-id="22cc5-129">Définissez une méthode qui utilise les paramètres de type du type générique.</span><span class="sxs-lookup"><span data-stu-id="22cc5-129">Define a method that uses the type parameters of the generic type.</span></span> <span data-ttu-id="22cc5-130">Notez que ces méthodes ne sont génériques que si elles ont leurs propres listes de paramètres de type.</span><span class="sxs-lookup"><span data-stu-id="22cc5-130">Note that such methods are not generic unless they have their own type parameter lists.</span></span> <span data-ttu-id="22cc5-131">Le code suivant définit une méthode `static` (`Shared` en Visual Basic) qui prend un tableau de `TFirst` et retourne un `List<TFirst>` (`List(Of TFirst)` en Visual Basic) contenant tous les éléments du tableau.</span><span class="sxs-lookup"><span data-stu-id="22cc5-131">The following code defines a `static` method (`Shared` in Visual Basic) that takes an array of `TFirst` and returns a `List<TFirst>` (`List(Of TFirst)` in Visual Basic) containing all the elements of the array.</span></span> <span data-ttu-id="22cc5-132">Pour définir cette méthode, vous devez créer le type `List<TFirst>` en appelant <xref:System.Type.MakeGenericType%2A> sur la définition de type générique, `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-132">To define this method, it is necessary to create the type `List<TFirst>` by calling <xref:System.Type.MakeGenericType%2A> on the generic type definition, `List<T>`.</span></span> <span data-ttu-id="22cc5-133">( `T` Est omis lorsque vous utilisez l' `typeof` opérateur (`GetType` dans Visual Basic) pour récupérer la définition de type générique.) Le type de paramètre est créé à l' <xref:System.Type.MakeArrayType%2A> aide de la méthode.</span><span class="sxs-lookup"><span data-stu-id="22cc5-133">(The `T` is omitted when you use the `typeof` operator (`GetType` in Visual Basic) to get the generic type definition.) The parameter type is created by using the <xref:System.Type.MakeArrayType%2A> method.</span></span>  
  
     [!code-cpp[EmitGenericType#22](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#22)]
     [!code-csharp[EmitGenericType#22](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#22)]
     [!code-vb[EmitGenericType#22](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#22)]  
  
9. <span data-ttu-id="22cc5-134">Émettez le corps de méthode.</span><span class="sxs-lookup"><span data-stu-id="22cc5-134">Emit the method body.</span></span> <span data-ttu-id="22cc5-135">Le corps de la méthode se compose de trois opcodes qui chargent le tableau d’entrée sur la pile, appellent le constructeur `List<TFirst>` qui accepte `IEnumerable<TFirst>` (qui fait tout le travail nécessaire pour placer les éléments d’entrée dans la liste), et retournent (en laissant le nouvel objet <xref:System.Collections.Generic.List%601> sur la pile).</span><span class="sxs-lookup"><span data-stu-id="22cc5-135">The method body consists of three opcodes that load the input array onto the stack, call the `List<TFirst>` constructor that takes `IEnumerable<TFirst>` (which does all the work of putting the input elements into the list), and return (leaving the new <xref:System.Collections.Generic.List%601> object on the stack).</span></span> <span data-ttu-id="22cc5-136">La partie difficile de l’émission de ce code consiste à obtenir le constructeur.</span><span class="sxs-lookup"><span data-stu-id="22cc5-136">The difficult part of emitting this code is getting the constructor.</span></span>  
  
     <span data-ttu-id="22cc5-137">La méthode <xref:System.Type.GetConstructor%2A> n’étant pas prise en charge sur un <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, vous ne pouvez pas obtenir directement le constructeur de `List<TFirst>`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-137">The <xref:System.Type.GetConstructor%2A> method is not supported on a <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, so it is not possible to get the constructor of `List<TFirst>` directly.</span></span> <span data-ttu-id="22cc5-138">Vous devez d’abord obtenir le constructeur de la définition de type générique `List<T>`, puis appeler une méthode qui le convertit en constructeur de `List<TFirst>` correspondant.</span><span class="sxs-lookup"><span data-stu-id="22cc5-138">First, it is necessary to get the constructor of the generic type definition `List<T>` and then to call a method that converts it to the corresponding constructor of `List<TFirst>`.</span></span>  
  
     <span data-ttu-id="22cc5-139">Le constructeur utilisé pour cet exemple de code prend un `IEnumerable<T>`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-139">The constructor used for this code example takes an `IEnumerable<T>`.</span></span> <span data-ttu-id="22cc5-140">Notez cependant qu’il ne s’agit pas de la définition de type générique de l’interface générique <xref:System.Collections.Generic.IEnumerable%601>. Au lieu de cela, le paramètre de type `T` de `List<T>` doit remplacer le paramètre de type `T` de `IEnumerable<T>`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-140">Note, however, that this is not the generic type definition of the <xref:System.Collections.Generic.IEnumerable%601> generic interface; instead, the type parameter `T` from `List<T>` must be substituted for the type parameter `T` of `IEnumerable<T>`.</span></span> <span data-ttu-id="22cc5-141">(Cela peut paraître déroutant uniquement car les deux types ont des paramètres de type nommés `T`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-141">(This seems confusing only because both types have type parameters named `T`.</span></span> <span data-ttu-id="22cc5-142">C’est pourquoi cet exemple de code utilise les `TFirst` noms `TSecond`et.) Pour récupérer le type de l’argument de constructeur, commencez par la définition `IEnumerable<T>` de type générique <xref:System.Type.MakeGenericType%2A> et appelez avec le premier paramètre de `List<T>`type générique de.</span><span class="sxs-lookup"><span data-stu-id="22cc5-142">That is why this code example uses the names `TFirst` and `TSecond`.) To get the type of the constructor argument, start with the generic type definition `IEnumerable<T>` and call <xref:System.Type.MakeGenericType%2A> with the first generic type parameter of `List<T>`.</span></span> <span data-ttu-id="22cc5-143">La liste d’arguments de constructeur doit être passée en tant que tableau, avec un seul argument dans ce cas.</span><span class="sxs-lookup"><span data-stu-id="22cc5-143">The constructor argument list must be passed as an array, with just one argument in this case.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="22cc5-144">La définition de type générique est exprimée en tant que `IEnumerable<>` quand vous utilisez l’opérateur `typeof` en C#, ou `IEnumerable(Of )` quand vous utilisez l’opérateur `GetType` en Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="22cc5-144">The generic type definition is expressed as `IEnumerable<>` when you use the `typeof` operator in C#, or `IEnumerable(Of )` when you use the `GetType` operator in Visual Basic.</span></span>  
  
     <span data-ttu-id="22cc5-145">Il est désormais possible d’obtenir le constructeur de `List<T>` en appelant <xref:System.Type.GetConstructor%2A> sur la définition de type générique.</span><span class="sxs-lookup"><span data-stu-id="22cc5-145">Now it is possible to get the constructor of `List<T>` by calling <xref:System.Type.GetConstructor%2A> on the generic type definition.</span></span> <span data-ttu-id="22cc5-146">Pour convertir ce constructeur en constructeur correspondant de `List<TFirst>`, transmettez `List<TFirst>` et le constructeur de `List<T>` à la méthode statique <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="22cc5-146">To convert this constructor to the corresponding constructor of `List<TFirst>`, pass `List<TFirst>` and the constructor from `List<T>` to the static <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29?displayProperty=nameWithType> method.</span></span>  
  
     [!code-cpp[EmitGenericType#23](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#23)]
     [!code-csharp[EmitGenericType#23](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#23)]
     [!code-vb[EmitGenericType#23](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#23)]  
  
10. <span data-ttu-id="22cc5-147">Créez le type et enregistrez le fichier.</span><span class="sxs-lookup"><span data-stu-id="22cc5-147">Create the type and save the file.</span></span>  
  
     [!code-cpp[EmitGenericType#8](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#8)]
     [!code-csharp[EmitGenericType#8](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#8)]
     [!code-vb[EmitGenericType#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#8)]  
  
11. <span data-ttu-id="22cc5-148">Appelez la méthode.</span><span class="sxs-lookup"><span data-stu-id="22cc5-148">Invoke the method.</span></span> <span data-ttu-id="22cc5-149">`ExampleMethod` n’est pas générique, mais le type auquel elle appartient est générique. Ainsi, pour obtenir un <xref:System.Reflection.MethodInfo> qui peut être appelé, vous devez créer un type construit à partir de la définition de type pour `Sample`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-149">`ExampleMethod` is not generic, but the type it belongs to is generic, so in order to get a <xref:System.Reflection.MethodInfo> that can be invoked it is necessary to create a constructed type from the type definition for `Sample`.</span></span> <span data-ttu-id="22cc5-150">Le type construit utilise la classe `Example`, ce qui satisfait aux contraintes sur `TFirst` car il s’agit d’un type référence avec un constructeur sans paramètre par défaut, et la classe `ExampleDerived` qui satisfait aux contraintes sur `TSecond`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-150">The constructed type uses the `Example` class, which satisfies the constraints on `TFirst` because it is a reference type and has a default parameterless constructor, and the `ExampleDerived` class which satisfies the constraints on `TSecond`.</span></span> <span data-ttu-id="22cc5-151">(Le code de `ExampleDerived` se trouve dans la section exemple de code.) Ces deux types sont passés à <xref:System.Type.MakeGenericType%2A> pour créer le type construit.</span><span class="sxs-lookup"><span data-stu-id="22cc5-151">(The code for `ExampleDerived` can be found in the example code section.) These two types are passed to <xref:System.Type.MakeGenericType%2A> to create the constructed type.</span></span> <span data-ttu-id="22cc5-152"><xref:System.Reflection.MethodInfo> est ensuite obtenu à l’aide de la méthode <xref:System.Type.GetMethod%2A>.</span><span class="sxs-lookup"><span data-stu-id="22cc5-152">The <xref:System.Reflection.MethodInfo> is then obtained using the <xref:System.Type.GetMethod%2A> method.</span></span>  
  
     [!code-cpp[EmitGenericType#9](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#9)]
     [!code-csharp[EmitGenericType#9](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#9)]
     [!code-vb[EmitGenericType#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#9)]  
  
12. <span data-ttu-id="22cc5-153">Le code suivant crée un tableau d’objets `Example`, place ce tableau dans un tableau de type <xref:System.Object> représentant les arguments de la méthode à appeler, puis les passe à la méthode <xref:System.Reflection.MethodBase.Invoke%28System.Object%2CSystem.Object%5B%5D%29>.</span><span class="sxs-lookup"><span data-stu-id="22cc5-153">The following code creates an array of `Example` objects, places that array in an array of type <xref:System.Object> representing the arguments of the method to be invoked, and passes them to the <xref:System.Reflection.MethodBase.Invoke%28System.Object%2CSystem.Object%5B%5D%29> method.</span></span> <span data-ttu-id="22cc5-154">Le premier argument de la méthode <xref:System.Reflection.MethodBase.Invoke%2A> est une référence null car la méthode est `static`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-154">The first argument of the <xref:System.Reflection.MethodBase.Invoke%2A> method is a null reference because the method is `static`.</span></span>  
  
     [!code-cpp[EmitGenericType#10](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#10)]
     [!code-csharp[EmitGenericType#10](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#10)]
     [!code-vb[EmitGenericType#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#10)]  
  
## <a name="example"></a><span data-ttu-id="22cc5-155">Exemple</span><span class="sxs-lookup"><span data-stu-id="22cc5-155">Example</span></span>  
 <span data-ttu-id="22cc5-156">L’exemple de code suivant définit une classe nommée `Sample`, ainsi qu’une classe de base et deux interfaces.</span><span class="sxs-lookup"><span data-stu-id="22cc5-156">The following code example defines a class named `Sample`, along with a base class and two interfaces.</span></span> <span data-ttu-id="22cc5-157">Le programme définit deux paramètres de type générique pour `Sample`, ce qui en fait un type générique.</span><span class="sxs-lookup"><span data-stu-id="22cc5-157">The program defines two generic type parameters for `Sample`, turning it into a generic type.</span></span> <span data-ttu-id="22cc5-158">Les paramètres de type sont la seule chose qui rend un type générique.</span><span class="sxs-lookup"><span data-stu-id="22cc5-158">Type parameters are the only thing that makes a type generic.</span></span> <span data-ttu-id="22cc5-159">Le programme l’indique en affichant un message de test avant et après la définition des paramètres de type.</span><span class="sxs-lookup"><span data-stu-id="22cc5-159">The program shows this by displaying a test message before and after the definition of the type parameters.</span></span>  
  
 <span data-ttu-id="22cc5-160">Le paramètre de type `TSecond` sert à illustrer les contraintes de classe et d’interface, à l’aide des interfaces et de la classe de base, et le paramètre de type `TFirst` sert à illustrer des contraintes spéciales.</span><span class="sxs-lookup"><span data-stu-id="22cc5-160">The type parameter `TSecond` is used to demonstrate class and interface constraints, using the base class and interfaces, and the type parameter `TFirst` is used to demonstrate special constraints.</span></span>  
  
 <span data-ttu-id="22cc5-161">L’exemple de code définit un champ et une méthode à l’aide des paramètres de type de la classe pour le type de champ et pour le paramètre et le type de retour de la méthode.</span><span class="sxs-lookup"><span data-stu-id="22cc5-161">The code example defines a field and a method using the class's type parameters for the field type and for the parameter and return type of the method.</span></span>  
  
 <span data-ttu-id="22cc5-162">Une fois la classe `Sample` créée, la méthode est appelée.</span><span class="sxs-lookup"><span data-stu-id="22cc5-162">After the `Sample` class has been created, the method is invoked.</span></span>  
  
 <span data-ttu-id="22cc5-163">Le programme inclut une méthode qui répertorie les informations sur un type générique, et une méthode qui répertorie les contraintes spéciales sur un paramètre de type.</span><span class="sxs-lookup"><span data-stu-id="22cc5-163">The program includes a method that lists information about a generic type, and a method that lists the special constraints on a type parameter.</span></span> <span data-ttu-id="22cc5-164">Ces méthodes sont utilisées pour afficher des informations sur la classe `Sample` finie.</span><span class="sxs-lookup"><span data-stu-id="22cc5-164">These methods are used to display information about the finished `Sample` class.</span></span>  
  
 <span data-ttu-id="22cc5-165">Le programme enregistre le module fini sur le disque en tant que `GenericEmitExample1.dll`. Ainsi, vous pouvez l’ouvrir avec [Ildasm.exe (désassembleur IL)](../tools/ildasm-exe-il-disassembler.md) et examiner le code MSIL de la classe `Sample`.</span><span class="sxs-lookup"><span data-stu-id="22cc5-165">The program saves the finished module to disk as `GenericEmitExample1.dll`, so you can open it with the [Ildasm.exe (IL Disassembler)](../tools/ildasm-exe-il-disassembler.md) and examine the MSIL for the `Sample` class.</span></span>  
  
 [!code-cpp[EmitGenericType#1](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#1)]
 [!code-csharp[EmitGenericType#1](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#1)]
 [!code-vb[EmitGenericType#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="22cc5-166">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="22cc5-166">See also</span></span>

- <xref:System.Reflection.Emit.GenericTypeParameterBuilder>
- <span data-ttu-id="22cc5-167">[Utiliser l’émission de réflexion](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/3y322t50(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="22cc5-167">[Using Reflection Emit](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/3y322t50(v=vs.100))</span></span>
- <span data-ttu-id="22cc5-168">[Scénarios d’assemblys dynamiques avec émission de réflexion](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/tt9483fk(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="22cc5-168">[Reflection Emit Dynamic Assembly Scenarios](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/tt9483fk(v=vs.100))</span></span>
