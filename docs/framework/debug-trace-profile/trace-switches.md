---
title: Commutateurs de traçage
description: Explorez les commutateurs de trace, qui vous permettent d’activer, de désactiver et de filtrer la sortie de traçage. .NET fournit les classes BooleanSwitch, TraceSwitch et SourceSwitch.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- tracing [.NET Framework], trace switches
- trace switches, about trace switches
- tracing [.NET Framework], level of detail
- switches, trace
- trace switches
- trace switches, creating custom
ms.assetid: 8ab913aa-f400-4406-9436-f45bc6e54fbe
ms.openlocfilehash: 29de46afa2a96dd7011cec40f4f76e7bfb8ee454
ms.sourcegitcommit: c23d9666ec75b91741da43ee3d91c317d68c7327
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/01/2020
ms.locfileid: "85803534"
---
# <a name="trace-switches"></a><span data-ttu-id="6c1cc-104">Commutateurs de traçage</span><span class="sxs-lookup"><span data-stu-id="6c1cc-104">Trace Switches</span></span>
<span data-ttu-id="6c1cc-105">Les commutateurs de trace vous permettent d'activer ou de désactiver la sortie de traçage, et de la filtrer.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-105">Trace switches enable you to enable, disable, and filter tracing output.</span></span> <span data-ttu-id="6c1cc-106">Ces commutateurs sont des objets présents dans votre code, mais ils peuvent être configurés en dehors du code via le fichier .config.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-106">They are objects that exist in your code and can be configured externally through the .config file.</span></span> <span data-ttu-id="6c1cc-107">Trois types de commutateurs de trace sont disponibles dans .NET Framework : la classe <xref:System.Diagnostics.BooleanSwitch> , la classe <xref:System.Diagnostics.TraceSwitch> et la classe <xref:System.Diagnostics.SourceSwitch> .</span><span class="sxs-lookup"><span data-stu-id="6c1cc-107">There are three types of trace switches provided in the .NET Framework: the <xref:System.Diagnostics.BooleanSwitch> class, the <xref:System.Diagnostics.TraceSwitch> class, and the <xref:System.Diagnostics.SourceSwitch> class.</span></span> <span data-ttu-id="6c1cc-108">La classe <xref:System.Diagnostics.BooleanSwitch> agit comme un bouton bascule qui active ou désactive diverses instructions de trace.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-108">The <xref:System.Diagnostics.BooleanSwitch> class acts as a toggle switch, either enabling or disabling a variety of trace statements.</span></span> <span data-ttu-id="6c1cc-109">Les classes <xref:System.Diagnostics.TraceSwitch> et <xref:System.Diagnostics.SourceSwitch> vous permettent d'activer un commutateur de trace pour un niveau de traçage spécifique. Les messages <xref:System.Diagnostics.Trace> ou <xref:System.Diagnostics.TraceSource> spécifiés pour ce niveau et tous les niveaux inférieurs seront alors affichés.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-109">The <xref:System.Diagnostics.TraceSwitch> and <xref:System.Diagnostics.SourceSwitch> classes allow you to enable a trace switch for a particular tracing level so that the <xref:System.Diagnostics.Trace> or <xref:System.Diagnostics.TraceSource> messages specified for that level and all levels below it appear.</span></span> <span data-ttu-id="6c1cc-110">Si vous désactivez le commutateur, les messages de trace ne seront pas affichés.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-110">If you disable the switch, the trace messages will not appear.</span></span> <span data-ttu-id="6c1cc-111">Toutes ces classes dérivent de la classe abstraite (**MustInherit**) **Switch**, comme tous les commutateurs créés par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-111">All these classes derive from the abstract (**MustInherit**) class **Switch**, as should any user-developed switches.</span></span>  
  
 <span data-ttu-id="6c1cc-112">Les commutateurs de trace sont parfois utiles pour filtrer des informations.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-112">Trace switches can be useful for filtering information.</span></span> <span data-ttu-id="6c1cc-113">Supposons que vous vouliez afficher tous les messages de trace dans un module d'accès aux données, mais afficher uniquement les messages d'erreur dans les autres parties de l'application.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-113">For example, you might want to see every tracing message in a data access module, but only error messages in the rest of the application.</span></span> <span data-ttu-id="6c1cc-114">Dans ce cas, vous pouvez utiliser un commutateur de trace pour le module d'accès aux données et un deuxième commutateur pour les autres parties de l'application.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-114">In that case, you would use one trace switch for the data access module and one switch for the rest of the application.</span></span> <span data-ttu-id="6c1cc-115">Si vous utilisez le fichier .config pour configurer les commutateurs avec les paramètres appropriés, vous pouvez déterminer les types de messages de trace que vous recevez.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-115">By using the .config file to configure the switches to the appropriate settings, you could control what types of trace message you received.</span></span> <span data-ttu-id="6c1cc-116">Pour plus d’informations, consultez [Guide pratique pour créer, initialiser et configurer des commutateurs de suivi](how-to-create-initialize-and-configure-trace-switches.md).</span><span class="sxs-lookup"><span data-stu-id="6c1cc-116">For more information, see [How to: Create, Initialize and Configure Trace Switches](how-to-create-initialize-and-configure-trace-switches.md).</span></span>  
  
 <span data-ttu-id="6c1cc-117">En règle générale, une application déployée s'exécute sans que les commutateurs ne soient activés. Cela évite aux utilisateurs de voir s'afficher de nombreux messages inutiles à l'écran ou que ces messages soient enregistrés dans un fichier journal durant l'exécution de l'application.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-117">Typically, a deployed application is executed with its switches disabled, so that users need not observe a lot of irrelevant trace messages appearing on a screen or filling up a log file as the application runs.</span></span> <span data-ttu-id="6c1cc-118">Si un problème survient au cours de l'exécution de l'application, vous pouvez arrêter l'application, activer les commutateurs et redémarrer l'application</span><span class="sxs-lookup"><span data-stu-id="6c1cc-118">If a problem arises during application execution, you can stop the application, enable the switches, and restart the application.</span></span> <span data-ttu-id="6c1cc-119">pour afficher les messages de trace.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-119">Then the tracing messages will be displayed.</span></span>  
  
 <span data-ttu-id="6c1cc-120">Pour utiliser un commutateur, vous devez tout d'abord créer un objet commutateur à partir d'une classe **BooleanSwitch** , d'une classe **TraceSwitch** ou d'une classe de commutateur définie par le développeur.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-120">To use a switch you must first create a switch object from a **BooleanSwitch** class, a **TraceSwitch** class, or a developer-defined switch class.</span></span> <span data-ttu-id="6c1cc-121">Pour plus d’informations sur la création de commutateurs définis par le développeur, consultez la classe <xref:System.Diagnostics.Switch> dans la référence .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-121">For more information about creating developer-defined switches, see the <xref:System.Diagnostics.Switch> class in the .NET Framework reference.</span></span> <span data-ttu-id="6c1cc-122">Définissez ensuite une valeur de configuration qui spécifie à quel moment l'objet commutateur doit être utilisé.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-122">Then you set a configuration value that specifies when the switch object is to be used.</span></span> <span data-ttu-id="6c1cc-123">Enfin, testez le paramètre de l'objet commutateur dans plusieurs méthodes de traçage **Trace** (ou **Debug**).</span><span class="sxs-lookup"><span data-stu-id="6c1cc-123">You then test the setting of the switch object in various **Trace** (or **Debug**) tracing methods.</span></span>  
  
## <a name="trace-levels"></a><span data-ttu-id="6c1cc-124">Niveaux de trace</span><span class="sxs-lookup"><span data-stu-id="6c1cc-124">Trace Levels</span></span>  
 <span data-ttu-id="6c1cc-125">Quand vous utilisez **TraceSwitch**, d'autres aspects sont à prendre en compte.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-125">When you use **TraceSwitch**, there are additional considerations.</span></span> <span data-ttu-id="6c1cc-126">Un objet **TraceSwitch** possède quatre propriétés qui retournent des valeurs de type **Boolean** indiquant si au moins un niveau de trace est défini pour le commutateur :</span><span class="sxs-lookup"><span data-stu-id="6c1cc-126">A **TraceSwitch** object has four properties that return **Boolean** values indicating whether the switch is set to at least a particular level:</span></span>  
  
- <xref:System.Diagnostics.TraceSwitch.TraceError%2A?displayProperty=nameWithType>  
  
- <xref:System.Diagnostics.TraceSwitch.TraceWarning%2A?displayProperty=nameWithType>  
  
- <xref:System.Diagnostics.TraceSwitch.TraceInfo%2A?displayProperty=nameWithType>  
  
- <xref:System.Diagnostics.TraceSwitch.TraceVerbose%2A?displayProperty=nameWithType>  
  
 <span data-ttu-id="6c1cc-127">Les niveaux vous permettent de limiter la quantité d'informations de traçage reçues à celles qui sont nécessaires pour résoudre un problème.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-127">Levels allow you to limit the amount of tracing information you receive to only that information needed to solve a problem.</span></span> <span data-ttu-id="6c1cc-128">Vous spécifiez le niveau de détail souhaité dans la sortie de traçage en définissant et en configurant les commutateurs de trace avec le niveau de trace approprié.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-128">You specify the level of detail you want in your tracing output by setting and configuring trace switches to the appropriate trace level.</span></span> <span data-ttu-id="6c1cc-129">Vous pouvez choisir de recevoir les messages d'erreur, les messages d'avertissement, les messages d'information, les messages de trace détaillés ou, au contraire, de ne recevoir aucun message.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-129">You can receive error messages, warning messages, informational messages, verbose tracing messages, or no message at all.</span></span>  
  
 <span data-ttu-id="6c1cc-130">C'est vous qui déterminez le type de message à associer à chaque niveau.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-130">It is entirely up to you to decide what kind of message to associate with each level.</span></span> <span data-ttu-id="6c1cc-131">Généralement, le contenu des messages de trace dépend de ce que vous associez à chaque niveau, mais vous déterminez les différences entre les niveaux.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-131">Typically, the content of tracing messages depends on what you associate with each level, but you determine the differences between levels.</span></span> <span data-ttu-id="6c1cc-132">Vous pouvez, par exemple, choisir d'afficher une description détaillée d'un problème au niveau 3 (**Info**), mais uniquement un numéro de référence d'erreur au niveau 1 (**Error**).</span><span class="sxs-lookup"><span data-stu-id="6c1cc-132">You might want to provide detailed descriptions of a problem at level 3 (**Info**), for example, but provide only an error reference number at level 1 (**Error**).</span></span> <span data-ttu-id="6c1cc-133">Choisissez le schéma le plus approprié pour votre application.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-133">It is entirely up to you to decide what scheme works best in your application.</span></span>  
  
 <span data-ttu-id="6c1cc-134">Ces propriétés correspondent aux valeurs 1 à 4 de l'énumération **TraceLevel** .</span><span class="sxs-lookup"><span data-stu-id="6c1cc-134">These properties correspond to the values 1 through 4 of the **TraceLevel** enumeration.</span></span> <span data-ttu-id="6c1cc-135">Le tableau suivant répertorie les niveaux de l'énumération **TraceLevel** et leurs valeurs.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-135">The following table lists the levels of the **TraceLevel** enumeration and their values.</span></span>  
  
|<span data-ttu-id="6c1cc-136">Valeur énumérée</span><span class="sxs-lookup"><span data-stu-id="6c1cc-136">Enumerated value</span></span>|<span data-ttu-id="6c1cc-137">Valeur entière</span><span class="sxs-lookup"><span data-stu-id="6c1cc-137">Integer value</span></span>|<span data-ttu-id="6c1cc-138">Type de message affiché (ou écrit vers une cible de sortie spécifiée)</span><span class="sxs-lookup"><span data-stu-id="6c1cc-138">Type of message displayed (or written to a specified output target)</span></span>|  
|----------------------|-------------------|---------------------------------------------------------------------------|  
|<span data-ttu-id="6c1cc-139">Désactivé</span><span class="sxs-lookup"><span data-stu-id="6c1cc-139">Off</span></span>|<span data-ttu-id="6c1cc-140">0</span><span class="sxs-lookup"><span data-stu-id="6c1cc-140">0</span></span>|<span data-ttu-id="6c1cc-141">None</span><span class="sxs-lookup"><span data-stu-id="6c1cc-141">None</span></span>|  
|<span data-ttu-id="6c1cc-142">Error</span><span class="sxs-lookup"><span data-stu-id="6c1cc-142">Error</span></span>|<span data-ttu-id="6c1cc-143">1</span><span class="sxs-lookup"><span data-stu-id="6c1cc-143">1</span></span>|<span data-ttu-id="6c1cc-144">Uniquement les messages d'erreur</span><span class="sxs-lookup"><span data-stu-id="6c1cc-144">Only error messages</span></span>|  
|<span data-ttu-id="6c1cc-145">Avertissement</span><span class="sxs-lookup"><span data-stu-id="6c1cc-145">Warning</span></span>|<span data-ttu-id="6c1cc-146">2</span><span class="sxs-lookup"><span data-stu-id="6c1cc-146">2</span></span>|<span data-ttu-id="6c1cc-147">Messages d'avertissement et messages d'erreur</span><span class="sxs-lookup"><span data-stu-id="6c1cc-147">Warning messages and error messages</span></span>|  
|<span data-ttu-id="6c1cc-148">Info</span><span class="sxs-lookup"><span data-stu-id="6c1cc-148">Info</span></span>|<span data-ttu-id="6c1cc-149">3</span><span class="sxs-lookup"><span data-stu-id="6c1cc-149">3</span></span>|<span data-ttu-id="6c1cc-150">Messages d'information, messages d'avertissement et messages d'erreur</span><span class="sxs-lookup"><span data-stu-id="6c1cc-150">Informational messages, warning messages, and error messages</span></span>|  
|<span data-ttu-id="6c1cc-151">Commentaires</span><span class="sxs-lookup"><span data-stu-id="6c1cc-151">Verbose</span></span>|<span data-ttu-id="6c1cc-152">4</span><span class="sxs-lookup"><span data-stu-id="6c1cc-152">4</span></span>|<span data-ttu-id="6c1cc-153">Messages détaillés, messages d'information, messages d'avertissement et messages d'erreur</span><span class="sxs-lookup"><span data-stu-id="6c1cc-153">Verbose messages, informational messages, warning messages, and error messages</span></span>|  
  
 <span data-ttu-id="6c1cc-154">Les propriétés **TraceSwitch** indiquent le niveau de trace maximal pour le commutateur.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-154">The **TraceSwitch** properties indicate the maximum trace level for the switch.</span></span> <span data-ttu-id="6c1cc-155">Autrement dit, les informations de traçage sont écrites pour le niveau spécifié et tous les niveaux inférieurs.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-155">That is, tracing information is written for the level specified as well as for all lower levels.</span></span> <span data-ttu-id="6c1cc-156">Par exemple, si **TraceInfo** a la valeur **true**, **TraceError** et **TraceWarning** ont également la valeur **true** , mais **TraceVerbose** peut très bien avoir la valeur **false**.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-156">For example, if **TraceInfo** is **true**, then **TraceError** and **TraceWarning** are also **true** but **TraceVerbose** might well be **false**.</span></span>  
  
 <span data-ttu-id="6c1cc-157">Ces propriétés sont en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-157">These properties are read-only.</span></span> <span data-ttu-id="6c1cc-158">L'objet **TraceSwitch** les définit automatiquement quand la propriété **TraceLevel** est définie.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-158">The **TraceSwitch** object automatically sets them when the **TraceLevel** property is set.</span></span> <span data-ttu-id="6c1cc-159">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="6c1cc-159">For example:</span></span>  
  
```vb  
Dim myTraceSwitch As New TraceSwitch("SwitchOne", "The first switch")  
myTraceSwitch.Level = TraceLevel.Info  
' This message box displays true, because setting the level to  
' TraceLevel.Info sets all lower levels to true as well.  
MessageBox.Show(myTraceSwitch.TraceWarning.ToString())  
' This messagebox displays false.  
MessageBox.Show(myTraceSwitch.TraceVerbose.ToString())  
```  
  
```csharp  
System.Diagnostics.TraceSwitch myTraceSwitch =
   new System.Diagnostics.TraceSwitch("SwitchOne", "The first switch");  
myTraceSwitch.Level = System.Diagnostics.TraceLevel.Info;  
// This message box displays true, because setting the level to
// TraceLevel.Info sets all lower levels to true as well.  
MessageBox.Show(myTraceSwitch.TraceWarning.ToString());  
// This message box displays false.  
MessageBox.Show(myTraceSwitch.TraceVerbose.ToString());  
```  
  
## <a name="developer-defined-switches"></a><span data-ttu-id="6c1cc-160">Commutateurs définis par le développeur</span><span class="sxs-lookup"><span data-stu-id="6c1cc-160">Developer-Defined Switches</span></span>  
 <span data-ttu-id="6c1cc-161">En plus des commutateurs **BooleanSwitch** et **TraceSwitch**, vous pouvez définir vos propres commutateurs en les dérivant de la classe **Switch** et en remplaçant les méthodes de la classe de base par des méthodes personnalisées.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-161">In addition to providing **BooleanSwitch** and **TraceSwitch**, you can define your own switches by inheriting from the **Switch** class and overriding the base class methods with customized methods.</span></span> <span data-ttu-id="6c1cc-162">Pour plus d’informations sur la création de commutateurs définis par le développeur, consultez la classe <xref:System.Diagnostics.Switch> dans la référence .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6c1cc-162">For more information about creating developer-defined switches, see the <xref:System.Diagnostics.Switch> class in the .NET Framework reference.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6c1cc-163">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="6c1cc-163">See also</span></span>

- [<span data-ttu-id="6c1cc-164">Écouteurs de suivi</span><span class="sxs-lookup"><span data-stu-id="6c1cc-164">Trace Listeners</span></span>](trace-listeners.md)
- [<span data-ttu-id="6c1cc-165">Comment : ajouter des instructions de traçage dans le code d'une application</span><span class="sxs-lookup"><span data-stu-id="6c1cc-165">How to: Add Trace Statements to Application Code</span></span>](how-to-add-trace-statements-to-application-code.md)
- [<span data-ttu-id="6c1cc-166">Traçage et instrumentation d'applications</span><span class="sxs-lookup"><span data-stu-id="6c1cc-166">Tracing and Instrumenting Applications</span></span>](tracing-and-instrumenting-applications.md)
