---
title: Représentation matricielle des transformations
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- composite transformations
- transformations [Windows Forms], linear
- matrices
- translations in matrix representation
- transformations [Windows Forms], composite
- vectors
- linear transformations
- transformations [Windows Forms], matrix representation of
- transformations [Windows Forms], translation
- affine transformations
ms.assetid: 0659fe00-9e0c-41c4-9118-016f2404c905
ms.openlocfilehash: ceaad7b4bb5a70a890d261e39bc608becb388c17
ms.sourcegitcommit: b1cfd260928d464d91e20121f9bdba7611c94d71
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/02/2019
ms.locfileid: "67505640"
---
# <a name="matrix-representation-of-transformations"></a><span data-ttu-id="01e73-102">Représentation matricielle des transformations</span><span class="sxs-lookup"><span data-stu-id="01e73-102">Matrix Representation of Transformations</span></span>
<span data-ttu-id="01e73-103">Une matrice m × n est un ensemble de nombres organisés dans des millions de lignes et colonnes n.</span><span class="sxs-lookup"><span data-stu-id="01e73-103">An m×n matrix is a set of numbers arranged in m rows and n columns.</span></span> <span data-ttu-id="01e73-104">L’illustration suivante montre plusieurs matrices.</span><span class="sxs-lookup"><span data-stu-id="01e73-104">The following illustration shows several matrices.</span></span>  
  
 <span data-ttu-id="01e73-105">![Transformations](./media/aboutgdip05-art04.gif "AboutGdip05_art04")</span><span class="sxs-lookup"><span data-stu-id="01e73-105">![Transformations](./media/aboutgdip05-art04.gif "AboutGdip05_art04")</span></span>  
  
 <span data-ttu-id="01e73-106">Vous pouvez ajouter deux matrices de même taille en ajoutant des éléments individuels.</span><span class="sxs-lookup"><span data-stu-id="01e73-106">You can add two matrices of the same size by adding individual elements.</span></span> <span data-ttu-id="01e73-107">L’illustration suivante montre deux exemples d’ajout de la matrice.</span><span class="sxs-lookup"><span data-stu-id="01e73-107">The following illustration shows two examples of matrix addition.</span></span>  
  
 <span data-ttu-id="01e73-108">![Transformations](./media/aboutgdip05-art05.gif "AboutGdip05_art05")</span><span class="sxs-lookup"><span data-stu-id="01e73-108">![Transformations](./media/aboutgdip05-art05.gif "AboutGdip05_art05")</span></span>  
  
 <span data-ttu-id="01e73-109">Une matrice m × n peut être multipliée par une matrice de p × n, et le résultat est une matrice de p × m.</span><span class="sxs-lookup"><span data-stu-id="01e73-109">An m×n matrix can be multiplied by an n×p matrix, and the result is an m×p matrix.</span></span> <span data-ttu-id="01e73-110">Le nombre de colonnes dans la première matrice doit être le même que le nombre de lignes dans la deuxième matrice.</span><span class="sxs-lookup"><span data-stu-id="01e73-110">The number of columns in the first matrix must be the same as the number of rows in the second matrix.</span></span> <span data-ttu-id="01e73-111">Par exemple, une matrice 4 × 2 peut être multipliée par une matrice 2 × 3 pour produire une matrice 4 × 3.</span><span class="sxs-lookup"><span data-stu-id="01e73-111">For example, a 4×2 matrix can be multiplied by a 2×3 matrix to produce a 4×3 matrix.</span></span>  
  
 <span data-ttu-id="01e73-112">Points dans le plan et les lignes et les colonnes d’une matrice peuvent être considérés comme des vecteurs.</span><span class="sxs-lookup"><span data-stu-id="01e73-112">Points in the plane and rows and columns of a matrix can be thought of as vectors.</span></span> <span data-ttu-id="01e73-113">Par exemple, (2, 5) est un vecteur avec deux composants et (3, 7, 1) est un vecteur à trois composants.</span><span class="sxs-lookup"><span data-stu-id="01e73-113">For example, (2, 5) is a vector with two components, and (3, 7, 1) is a vector with three components.</span></span> <span data-ttu-id="01e73-114">Le produit scalaire de deux vecteurs est défini comme suit :</span><span class="sxs-lookup"><span data-stu-id="01e73-114">The dot product of two vectors is defined as follows:</span></span>  
  
 <span data-ttu-id="01e73-115">(a, b) • (c, d) = ac + bd</span><span class="sxs-lookup"><span data-stu-id="01e73-115">(a, b) • (c, d) = ac + bd</span></span>  
  
 <span data-ttu-id="01e73-116">(a, b, c) • (d, e, f) = ad + be + cf</span><span class="sxs-lookup"><span data-stu-id="01e73-116">(a, b, c) • (d, e, f) = ad + be + cf</span></span>  
  
 <span data-ttu-id="01e73-117">Par exemple, le produit scalaire de (2, 3) et (5, 4) est (2)(5) + (3)(4) = 22.</span><span class="sxs-lookup"><span data-stu-id="01e73-117">For example, the dot product of (2, 3) and (5, 4) is (2)(5) + (3)(4) = 22.</span></span> <span data-ttu-id="01e73-118">Le produit scalaire de (2, 5, 1) et (4, 3, 1) est (2)(4) + (5)(3) + (1)(1) = 24.</span><span class="sxs-lookup"><span data-stu-id="01e73-118">The dot product of (2, 5, 1) and (4, 3, 1) is (2)(4) + (5)(3) + (1)(1) = 24.</span></span> <span data-ttu-id="01e73-119">Notez que le produit scalaire de deux vecteurs est un nombre, pas un autre vecteur.</span><span class="sxs-lookup"><span data-stu-id="01e73-119">Note that the dot product of two vectors is a number, not another vector.</span></span> <span data-ttu-id="01e73-120">Notez également que vous pouvez calculer le produit scalaire uniquement si les deux vecteurs ont le même nombre de composants.</span><span class="sxs-lookup"><span data-stu-id="01e73-120">Also note that you can calculate the dot product only if the two vectors have the same number of components.</span></span>  
  
 <span data-ttu-id="01e73-121">A(i, j) permettent d’être l’entrée de la matrice A dans la ligne i et la colonne j.</span><span class="sxs-lookup"><span data-stu-id="01e73-121">Let A(i, j) be the entry in matrix A in the ith row and the jth column.</span></span> <span data-ttu-id="01e73-122">Par exemple, A (3, 2) est l’entrée de la matrice A dans la ligne 3 et la 2e colonne.</span><span class="sxs-lookup"><span data-stu-id="01e73-122">For example A(3, 2) is the entry in matrix A in the 3rd row and the 2nd column.</span></span> <span data-ttu-id="01e73-123">Supposons que A, B et C sont des matrices et AB = C. Les entrées de C sont calculées comme suit :</span><span class="sxs-lookup"><span data-stu-id="01e73-123">Suppose A, B, and C are matrices, and AB = C. The entries of C are calculated as follows:</span></span>  
  
 <span data-ttu-id="01e73-124">C (i, j) = (ligne i de A) • (colonne j de B)</span><span class="sxs-lookup"><span data-stu-id="01e73-124">C(i, j) = (row i of A) • (column j of B)</span></span>  
  
 <span data-ttu-id="01e73-125">L’illustration suivante montre plusieurs exemples de multiplication de matrice.</span><span class="sxs-lookup"><span data-stu-id="01e73-125">The following illustration shows several examples of matrix multiplication.</span></span>  
  
 <span data-ttu-id="01e73-126">![Transformations](./media/aboutgdip05-art06.gif "AboutGdip05_art06")</span><span class="sxs-lookup"><span data-stu-id="01e73-126">![Transformations](./media/aboutgdip05-art06.gif "AboutGdip05_art06")</span></span>  
  
 <span data-ttu-id="01e73-127">Si vous pensez que d’un point dans un plan est une 1 matrice × 2, vous pouvez transformer ce point en la multipliant par une matrice 2 × 2.</span><span class="sxs-lookup"><span data-stu-id="01e73-127">If you think of a point in a plane as a 1×2 matrix, you can transform that point by multiplying it by a 2×2 matrix.</span></span> <span data-ttu-id="01e73-128">L’illustration suivante montre plusieurs transformations appliquées au point (2, 1).</span><span class="sxs-lookup"><span data-stu-id="01e73-128">The following illustration shows several transformations applied to the point (2, 1).</span></span>  
  
 <span data-ttu-id="01e73-129">![Transformations](./media/aboutgdip05-art07.gif "AboutGdip05_art07")</span><span class="sxs-lookup"><span data-stu-id="01e73-129">![Transformations](./media/aboutgdip05-art07.gif "AboutGdip05_art07")</span></span>  
  
 <span data-ttu-id="01e73-130">Toutes les transformations indiquées dans la figure précédente sont des transformations linéaires.</span><span class="sxs-lookup"><span data-stu-id="01e73-130">All of the transformations shown in the preceding figure are linear transformations.</span></span> <span data-ttu-id="01e73-131">Certaines transformations, telles que la traduction, ne sont pas linéaires et ne peuvent pas être exprimées en tant que la multiplication par une matrice 2 × 2.</span><span class="sxs-lookup"><span data-stu-id="01e73-131">Certain other transformations, such as translation, are not linear, and cannot be expressed as multiplication by a 2×2 matrix.</span></span> <span data-ttu-id="01e73-132">Supposons que vous vouliez pour commencer le point (2, 1), faire pivoter de 90 degrés, translation de 3 unités sur l’axe x et la traduire 4 unités sur l’axe y.</span><span class="sxs-lookup"><span data-stu-id="01e73-132">Suppose you want to start with the point (2, 1), rotate it 90 degrees, translate it 3 units in the x direction, and translate it 4 units in the y direction.</span></span> <span data-ttu-id="01e73-133">Vous pouvez y parvenir à l’aide d’une multiplication de matrice suivie d’une addition de matrice.</span><span class="sxs-lookup"><span data-stu-id="01e73-133">You can accomplish this by using a matrix multiplication followed by a matrix addition.</span></span>  
  
 <span data-ttu-id="01e73-134">![Transformations](./media/aboutgdip05-art08.gif "AboutGdip05_art08")</span><span class="sxs-lookup"><span data-stu-id="01e73-134">![Transformations](./media/aboutgdip05-art08.gif "AboutGdip05_art08")</span></span>  
  
 <span data-ttu-id="01e73-135">Une transformation linéaire (multiplication par une matrice 2 × 2) suivie d’une traduction (ajout d’une 1 matrice × 2) est appelée une transformation affine.</span><span class="sxs-lookup"><span data-stu-id="01e73-135">A linear transformation (multiplication by a 2×2 matrix) followed by a translation (addition of a 1×2 matrix) is called an affine transformation.</span></span> <span data-ttu-id="01e73-136">Une alternative au stockage d’une transformation affine dans une paire de matrices (une pour la partie linéaire) et une pour la traduction consiste à stocker la transformation ensemble dans une matrice 3 x 3.</span><span class="sxs-lookup"><span data-stu-id="01e73-136">An alternative to storing an affine transformation in a pair of matrices (one for the linear part and one for the translation) is to store the entire transformation in a 3×3 matrix.</span></span> <span data-ttu-id="01e73-137">Pour que cela fonctionne, un point dans le plan doit être stocké dans une matrice 1 × 3 avec une coordonnée 3e factice.</span><span class="sxs-lookup"><span data-stu-id="01e73-137">To make this work, a point in the plane must be stored in a 1×3 matrix with a dummy 3rd coordinate.</span></span> <span data-ttu-id="01e73-138">La technique habituelle consiste à rendre toutes les coordonnées 3e égal à 1.</span><span class="sxs-lookup"><span data-stu-id="01e73-138">The usual technique is to make all 3rd coordinates equal to 1.</span></span> <span data-ttu-id="01e73-139">Par exemple, le point (2, 1) est représenté par la matrice [2 1 1].</span><span class="sxs-lookup"><span data-stu-id="01e73-139">For example, the point (2, 1) is represented by the matrix [2 1 1].</span></span> <span data-ttu-id="01e73-140">L’illustration suivante montre une transformation affine (rotation de 90 degrés, translation de 3 unités sur l’axe x et 4 unités dans la direction y) exprimée sous la forme multiplication par une seule matrice 3 × 3.</span><span class="sxs-lookup"><span data-stu-id="01e73-140">The following illustration shows an affine transformation (rotate 90 degrees; translate 3 units in the x direction, 4 units in the y direction) expressed as multiplication by a single 3×3 matrix.</span></span>  
  
 <span data-ttu-id="01e73-141">![Transformations](./media/aboutgdip05-art09.gif "AboutGdip05_art09")</span><span class="sxs-lookup"><span data-stu-id="01e73-141">![Transformations](./media/aboutgdip05-art09.gif "AboutGdip05_art09")</span></span>  
  
 <span data-ttu-id="01e73-142">Dans l’exemple précédent, le point (2, 1) est mappé au point (2, 6).</span><span class="sxs-lookup"><span data-stu-id="01e73-142">In the preceding example, the point (2, 1) is mapped to the point (2, 6).</span></span> <span data-ttu-id="01e73-143">Notez que la troisième colonne de la matrice 3 x 3 contient les nombres 0, 0, 1.</span><span class="sxs-lookup"><span data-stu-id="01e73-143">Note that the third column of the 3×3 matrix contains the numbers 0, 0, 1.</span></span> <span data-ttu-id="01e73-144">Cela sera toujours le cas pour la matrice 3 x 3 d’une transformation affine.</span><span class="sxs-lookup"><span data-stu-id="01e73-144">This will always be the case for the 3×3 matrix of an affine transformation.</span></span> <span data-ttu-id="01e73-145">Les nombres importants sont les six nombres des colonnes 1 et 2.</span><span class="sxs-lookup"><span data-stu-id="01e73-145">The important numbers are the six numbers in columns 1 and 2.</span></span> <span data-ttu-id="01e73-146">La partie supérieure gauche 2 × 2 de la matrice représente la partie linéaire de la transformation, et les deux premières entrées de la 3e ligne représentent la translation.</span><span class="sxs-lookup"><span data-stu-id="01e73-146">The upper-left 2×2 portion of the matrix represents the linear part of the transformation, and the first two entries in the 3rd row represent the translation.</span></span>  
  
 <span data-ttu-id="01e73-147">![Transformations](./media/aboutgdip05-art10.gif "AboutGdip05_art10")</span><span class="sxs-lookup"><span data-stu-id="01e73-147">![Transformations](./media/aboutgdip05-art10.gif "AboutGdip05_art10")</span></span>  
  
 <span data-ttu-id="01e73-148">Dans GDI +, vous pouvez stocker une transformation affine dans un <xref:System.Drawing.Drawing2D.Matrix> objet.</span><span class="sxs-lookup"><span data-stu-id="01e73-148">In GDI+ you can store an affine transformation in a <xref:System.Drawing.Drawing2D.Matrix> object.</span></span> <span data-ttu-id="01e73-149">Étant donné que la troisième colonne d’une matrice qui représente une transformation affine est toujours (0, 0, 1), vous spécifiez uniquement les six nombres dans les deux premières colonnes lorsque vous construisez un <xref:System.Drawing.Drawing2D.Matrix> objet.</span><span class="sxs-lookup"><span data-stu-id="01e73-149">Because the third column of a matrix that represents an affine transformation is always (0, 0, 1), you specify only the six numbers in the first two columns when you construct a <xref:System.Drawing.Drawing2D.Matrix> object.</span></span> <span data-ttu-id="01e73-150">L’instruction `Matrix myMatrix = new Matrix(0, 1, -1, 0, 3, 4)` construit la matrice affichée dans la figure précédente.</span><span class="sxs-lookup"><span data-stu-id="01e73-150">The statement `Matrix myMatrix = new Matrix(0, 1, -1, 0, 3, 4)` constructs the matrix shown in the preceding figure.</span></span>  
  
## <a name="composite-transformations"></a><span data-ttu-id="01e73-151">Transformations composites</span><span class="sxs-lookup"><span data-stu-id="01e73-151">Composite Transformations</span></span>  
 <span data-ttu-id="01e73-152">Une transformation composite est une séquence de transformations, une après l’autre.</span><span class="sxs-lookup"><span data-stu-id="01e73-152">A composite transformation is a sequence of transformations, one followed by the other.</span></span> <span data-ttu-id="01e73-153">Prenez en compte les matrices et les transformations dans la liste suivante :</span><span class="sxs-lookup"><span data-stu-id="01e73-153">Consider the matrices and transformations in the following list:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="01e73-154">Matrice A</span><span class="sxs-lookup"><span data-stu-id="01e73-154">Matrix A</span></span>|<span data-ttu-id="01e73-155">Faire pivoter de 90 degrés</span><span class="sxs-lookup"><span data-stu-id="01e73-155">Rotate 90 degrees</span></span>|  
|<span data-ttu-id="01e73-156">Matrix B</span><span class="sxs-lookup"><span data-stu-id="01e73-156">Matrix B</span></span>|<span data-ttu-id="01e73-157">Mettre à l’échelle par un facteur de 2 sur l’axe x</span><span class="sxs-lookup"><span data-stu-id="01e73-157">Scale by a factor of 2 in the x direction</span></span>|  
|<span data-ttu-id="01e73-158">Matrice C</span><span class="sxs-lookup"><span data-stu-id="01e73-158">Matrix C</span></span>|<span data-ttu-id="01e73-159">Translation de 3 unités dans la direction y</span><span class="sxs-lookup"><span data-stu-id="01e73-159">Translate 3 units in the y direction</span></span>|  
  
 <span data-ttu-id="01e73-160">Si nous commençons avec le point (2, 1), représenté par la matrice [2 1 1] et le multiplier par A, puis B, puis C, le point (2, 1) subiront les trois transformations dans l’ordre indiqué.</span><span class="sxs-lookup"><span data-stu-id="01e73-160">If we start with the point (2, 1) — represented by the matrix [2 1 1] — and multiply by A, then B, then C, the point (2, 1) will undergo the three transformations in the order listed.</span></span>  
  
 <span data-ttu-id="01e73-161">[2 1 1]ABC = [-2 5 1]</span><span class="sxs-lookup"><span data-stu-id="01e73-161">[2 1 1]ABC = [-2 5 1]</span></span>  
  
 <span data-ttu-id="01e73-162">Au lieu de cela les trois parties de la transformation composite dans trois matrices distinctes, vous pouvez multiplier A, B et C entre elles pour obtenir une matrice 3 x 3 unique qui stocke la transformation composite entière.</span><span class="sxs-lookup"><span data-stu-id="01e73-162">Rather than store the three parts of the composite transformation in three separate matrices, you can multiply A, B, and C together to get a single 3×3 matrix that stores the entire composite transformation.</span></span> <span data-ttu-id="01e73-163">Supposons que ABC = D. Puis un point multiplié par D donne le même résultat qu’un point multiplié par A, puis B, puis sur C.</span><span class="sxs-lookup"><span data-stu-id="01e73-163">Suppose ABC = D. Then a point multiplied by D gives the same result as a point multiplied by A, then B, then C.</span></span>  
  
 <span data-ttu-id="01e73-164">[2 1 1]D = [-2 5 1]</span><span class="sxs-lookup"><span data-stu-id="01e73-164">[2 1 1]D = [-2 5 1]</span></span>  
  
 <span data-ttu-id="01e73-165">L’illustration suivante montre les matrices A, B, C et D.</span><span class="sxs-lookup"><span data-stu-id="01e73-165">The following illustration shows the matrices A, B, C, and D.</span></span>  
  
 <span data-ttu-id="01e73-166">![Transformations](./media/aboutgdip05-art12.gif "AboutGdip05_art12")</span><span class="sxs-lookup"><span data-stu-id="01e73-166">![Transformations](./media/aboutgdip05-art12.gif "AboutGdip05_art12")</span></span>  
  
 <span data-ttu-id="01e73-167">Le fait que la matrice d’une transformation composite peut être formée en multipliant les matrices de transformation individuelles signifie que n’importe quelle séquence de transformations affines peut être stockée dans un seul <xref:System.Drawing.Drawing2D.Matrix> objet.</span><span class="sxs-lookup"><span data-stu-id="01e73-167">The fact that the matrix of a composite transformation can be formed by multiplying the individual transformation matrices means that any sequence of affine transformations can be stored in a single <xref:System.Drawing.Drawing2D.Matrix> object.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="01e73-168">L’ordre d’une transformation composite est important.</span><span class="sxs-lookup"><span data-stu-id="01e73-168">The order of a composite transformation is important.</span></span> <span data-ttu-id="01e73-169">En règle générale, faire pivoter, mettre à l’échelle, puis traduire n’est pas le même en tant que mise à l’échelle, faire pivoter, puis traduire.</span><span class="sxs-lookup"><span data-stu-id="01e73-169">In general, rotate, then scale, then translate is not the same as scale, then rotate, then translate.</span></span> <span data-ttu-id="01e73-170">De même, l’ordre de multiplication de matrice est important.</span><span class="sxs-lookup"><span data-stu-id="01e73-170">Similarly, the order of matrix multiplication is important.</span></span> <span data-ttu-id="01e73-171">En général, ABC n’est pas identique à BAC.</span><span class="sxs-lookup"><span data-stu-id="01e73-171">In general, ABC is not the same as BAC.</span></span>  
  
 <span data-ttu-id="01e73-172">Le <xref:System.Drawing.Drawing2D.Matrix> classe fournit plusieurs méthodes pour créer une transformation composite : <xref:System.Drawing.Drawing2D.Matrix.Multiply%2A>, <xref:System.Drawing.Drawing2D.Matrix.Rotate%2A>, <xref:System.Drawing.Drawing2D.Matrix.RotateAt%2A>, <xref:System.Drawing.Drawing2D.Matrix.Scale%2A>, <xref:System.Drawing.Drawing2D.Matrix.Shear%2A>, et <xref:System.Drawing.Drawing2D.Matrix.Translate%2A>.</span><span class="sxs-lookup"><span data-stu-id="01e73-172">The <xref:System.Drawing.Drawing2D.Matrix> class provides several methods for building a composite transformation: <xref:System.Drawing.Drawing2D.Matrix.Multiply%2A>, <xref:System.Drawing.Drawing2D.Matrix.Rotate%2A>, <xref:System.Drawing.Drawing2D.Matrix.RotateAt%2A>, <xref:System.Drawing.Drawing2D.Matrix.Scale%2A>, <xref:System.Drawing.Drawing2D.Matrix.Shear%2A>, and <xref:System.Drawing.Drawing2D.Matrix.Translate%2A>.</span></span> <span data-ttu-id="01e73-173">L’exemple suivant crée la matrice d’une transformation composite qui pivote tout d’abord de 30 degrés, puis met à l’échelle par un facteur de 2 sur l’axe y et traduit alors 5 unités dans la direction x :</span><span class="sxs-lookup"><span data-stu-id="01e73-173">The following example creates the matrix of a composite transformation that first rotates 30 degrees, then scales by a factor of 2 in the y direction, and then translates 5 units in the x direction:</span></span>  
  
 [!code-csharp[System.Drawing.CoordinateSystems#11](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Drawing.CoordinateSystems/CS/Class1.cs#11)]
 [!code-vb[System.Drawing.CoordinateSystems#11](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Drawing.CoordinateSystems/VB/Class1.vb#11)]  
  
 <span data-ttu-id="01e73-174">L’illustration suivante montre la matrice.</span><span class="sxs-lookup"><span data-stu-id="01e73-174">The following illustration shows the matrix.</span></span>  
  
 <span data-ttu-id="01e73-175">![Transformations](./media/aboutgdip05-art13.gif "AboutGdip05_art13")</span><span class="sxs-lookup"><span data-stu-id="01e73-175">![Transformations](./media/aboutgdip05-art13.gif "AboutGdip05_art13")</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="01e73-176">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="01e73-176">See also</span></span>

- [<span data-ttu-id="01e73-177">Systèmes de coordonnées et transformations</span><span class="sxs-lookup"><span data-stu-id="01e73-177">Coordinate Systems and Transformations</span></span>](coordinate-systems-and-transformations.md)
- [<span data-ttu-id="01e73-178">Utilisation des transformations dans GDI+ managé</span><span class="sxs-lookup"><span data-stu-id="01e73-178">Using Transformations in Managed GDI+</span></span>](using-transformations-in-managed-gdi.md)
