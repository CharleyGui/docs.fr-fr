---
title: Utilisation de conteneurs graphiques imbriqués
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- graphics [Windows Forms], nested containers
- graphics [Windows Forms], clipping
- graphics [Windows Forms], transformations in nested objects
ms.assetid: a0d9f178-43a4-4323-bb5a-d3e3f77ae6c1
ms.openlocfilehash: 460ebb37ee62691a1e282f756840121fd378ebd8
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79182465"
---
# <a name="using-nested-graphics-containers"></a><span data-ttu-id="6d887-102">Utilisation de conteneurs graphiques imbriqués</span><span class="sxs-lookup"><span data-stu-id="6d887-102">Using Nested Graphics Containers</span></span>
<span data-ttu-id="6d887-103">GDIMD fournit des conteneurs que vous pouvez utiliser pour <xref:System.Drawing.Graphics> remplacer ou augmenter temporairement une partie de l’état dans un objet.</span><span class="sxs-lookup"><span data-stu-id="6d887-103">GDI+ provides containers that you can use to temporarily replace or augment part of the state in a <xref:System.Drawing.Graphics> object.</span></span> <span data-ttu-id="6d887-104">Vous créez un conteneur <xref:System.Drawing.Graphics.BeginContainer%2A> en <xref:System.Drawing.Graphics> appelant la méthode d’un objet.</span><span class="sxs-lookup"><span data-stu-id="6d887-104">You create a container by calling the <xref:System.Drawing.Graphics.BeginContainer%2A> method of a <xref:System.Drawing.Graphics> object.</span></span> <span data-ttu-id="6d887-105">Vous pouvez <xref:System.Drawing.Graphics.BeginContainer%2A> appeler à plusieurs reprises pour former des conteneurs imbriqués.</span><span class="sxs-lookup"><span data-stu-id="6d887-105">You can call <xref:System.Drawing.Graphics.BeginContainer%2A> repeatedly to form nested containers.</span></span> <span data-ttu-id="6d887-106">Chaque appel <xref:System.Drawing.Graphics.BeginContainer%2A> doit être jumelé à <xref:System.Drawing.Graphics.EndContainer%2A>un appel à .</span><span class="sxs-lookup"><span data-stu-id="6d887-106">Each call to <xref:System.Drawing.Graphics.BeginContainer%2A> must be paired with a call to <xref:System.Drawing.Graphics.EndContainer%2A>.</span></span>  
  
## <a name="transformations-in-nested-containers"></a><span data-ttu-id="6d887-107">Transformations dans les conteneurs imbriqués</span><span class="sxs-lookup"><span data-stu-id="6d887-107">Transformations in Nested Containers</span></span>  
 <span data-ttu-id="6d887-108">L’exemple suivant <xref:System.Drawing.Graphics> crée un objet <xref:System.Drawing.Graphics> et un conteneur à l’intérieur de cet objet.</span><span class="sxs-lookup"><span data-stu-id="6d887-108">The following example creates a <xref:System.Drawing.Graphics> object and a container within that <xref:System.Drawing.Graphics> object.</span></span> <span data-ttu-id="6d887-109">La transformation du <xref:System.Drawing.Graphics> monde de l’objet est une traduction de 100 unités dans la direction x et 80 unités dans la direction y.</span><span class="sxs-lookup"><span data-stu-id="6d887-109">The world transformation of the <xref:System.Drawing.Graphics> object is a translation 100 units in the x direction and 80 units in the y direction.</span></span> <span data-ttu-id="6d887-110">La transformation mondiale du conteneur est une rotation de 30 degrés.</span><span class="sxs-lookup"><span data-stu-id="6d887-110">The world transformation of the container is a 30-degree rotation.</span></span> <span data-ttu-id="6d887-111">Le code fait `DrawRectangle(pen, -60, -30, 120, 60)` l’appel deux fois.</span><span class="sxs-lookup"><span data-stu-id="6d887-111">The code makes the call `DrawRectangle(pen, -60, -30, 120, 60)` twice.</span></span> <span data-ttu-id="6d887-112">Le premier <xref:System.Drawing.Graphics.DrawRectangle%2A> appel est à l’intérieur du conteneur; c’est-à-dire, l’appel est entre les appels à <xref:System.Drawing.Graphics.BeginContainer%2A> et <xref:System.Drawing.Graphics.EndContainer%2A>.</span><span class="sxs-lookup"><span data-stu-id="6d887-112">The first call to <xref:System.Drawing.Graphics.DrawRectangle%2A> is inside the container; that is, the call is in between the calls to <xref:System.Drawing.Graphics.BeginContainer%2A> and <xref:System.Drawing.Graphics.EndContainer%2A>.</span></span> <span data-ttu-id="6d887-113">Le deuxième <xref:System.Drawing.Graphics.DrawRectangle%2A> appel à est <xref:System.Drawing.Graphics.EndContainer%2A>après l’appel à .</span><span class="sxs-lookup"><span data-stu-id="6d887-113">The second call to <xref:System.Drawing.Graphics.DrawRectangle%2A> is after the call to <xref:System.Drawing.Graphics.EndContainer%2A>.</span></span>  
  
 [!code-csharp[System.Drawing.MiscLegacyTopics#61](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Drawing.MiscLegacyTopics/CS/Class1.cs#61)]
 [!code-vb[System.Drawing.MiscLegacyTopics#61](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Drawing.MiscLegacyTopics/VB/Class1.vb#61)]  
  
 <span data-ttu-id="6d887-114">Dans le code précédent, le rectangle tiré de l’intérieur du récipient est transformé d’abord <xref:System.Drawing.Graphics> par la transformation du monde du conteneur (rotation) puis par la transformation du monde de l’objet (traduction).</span><span class="sxs-lookup"><span data-stu-id="6d887-114">In the preceding code, the rectangle drawn from inside the container is transformed first by the world transformation of the container (rotation) and then by the world transformation of the <xref:System.Drawing.Graphics> object (translation).</span></span> <span data-ttu-id="6d887-115">Le rectangle tiré de l’extérieur du récipient <xref:System.Drawing.Graphics> n’est transformé que par la transformation mondiale de l’objet (traduction).</span><span class="sxs-lookup"><span data-stu-id="6d887-115">The rectangle drawn from outside the container is transformed only by the world transformation of the <xref:System.Drawing.Graphics> object (translation).</span></span> <span data-ttu-id="6d887-116">L’illustration suivante montre les deux rectangles :</span><span class="sxs-lookup"><span data-stu-id="6d887-116">The following illustration shows the two rectangles:</span></span>
  
 ![Illustration qui montre des conteneurs imbriqués.](./media/using-nested-graphics-containers/nested-containers-illustration.png)  
  
## <a name="clipping-in-nested-containers"></a><span data-ttu-id="6d887-118">Clipping dans des conteneurs imbriqués</span><span class="sxs-lookup"><span data-stu-id="6d887-118">Clipping in Nested Containers</span></span>  
 <span data-ttu-id="6d887-119">L’exemple suivant montre comment les conteneurs imbriqués gèrent les régions de coupure.</span><span class="sxs-lookup"><span data-stu-id="6d887-119">The following example demonstrates how nested containers handle clipping regions.</span></span> <span data-ttu-id="6d887-120">Le code <xref:System.Drawing.Graphics> crée un objet <xref:System.Drawing.Graphics> et un conteneur à l’intérieur de cet objet.</span><span class="sxs-lookup"><span data-stu-id="6d887-120">The code creates a <xref:System.Drawing.Graphics> object and a container within that <xref:System.Drawing.Graphics> object.</span></span> <span data-ttu-id="6d887-121">La région de <xref:System.Drawing.Graphics> coupure de l’objet est un rectangle, et la région de coupure du récipient est une ellipse.</span><span class="sxs-lookup"><span data-stu-id="6d887-121">The clipping region of the <xref:System.Drawing.Graphics> object is a rectangle, and the clipping region of the container is an ellipse.</span></span> <span data-ttu-id="6d887-122">Le code passe deux <xref:System.Drawing.Graphics.DrawLine%2A> appels à la méthode.</span><span class="sxs-lookup"><span data-stu-id="6d887-122">The code makes two calls to the <xref:System.Drawing.Graphics.DrawLine%2A> method.</span></span> <span data-ttu-id="6d887-123">Le premier <xref:System.Drawing.Graphics.DrawLine%2A> appel à est à l’intérieur du conteneur, et le deuxième appel à est à l’extérieur <xref:System.Drawing.Graphics.DrawLine%2A> du conteneur (après l’appel à <xref:System.Drawing.Graphics.EndContainer%2A>).</span><span class="sxs-lookup"><span data-stu-id="6d887-123">The first call to <xref:System.Drawing.Graphics.DrawLine%2A> is inside the container, and the second call to <xref:System.Drawing.Graphics.DrawLine%2A> is outside the container (after the call to <xref:System.Drawing.Graphics.EndContainer%2A>).</span></span> <span data-ttu-id="6d887-124">La première ligne est coupée par l’intersection des deux régions de coupure.</span><span class="sxs-lookup"><span data-stu-id="6d887-124">The first line is clipped by the intersection of the two clipping regions.</span></span> <span data-ttu-id="6d887-125">La deuxième ligne n’est coupée que par la <xref:System.Drawing.Graphics> région rectangulaire de coupe de l’objet.</span><span class="sxs-lookup"><span data-stu-id="6d887-125">The second line is clipped only by the rectangular clipping region of the <xref:System.Drawing.Graphics> object.</span></span>  
  
 [!code-csharp[System.Drawing.MiscLegacyTopics#62](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Drawing.MiscLegacyTopics/CS/Class1.cs#62)]
 [!code-vb[System.Drawing.MiscLegacyTopics#62](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Drawing.MiscLegacyTopics/VB/Class1.vb#62)]  
  
 <span data-ttu-id="6d887-126">L’illustration suivante montre les deux lignes coupées :</span><span class="sxs-lookup"><span data-stu-id="6d887-126">The following illustration shows the two clipped lines:</span></span>
  
 ![Illustration qui montre un récipient imbriqué avec des lignes coupées.](./media/using-nested-graphics-containers/nested-container-clipped-lines.png)  
  
 <span data-ttu-id="6d887-128">Comme le montrent les deux exemples précédents, les transformations et les régions de coupure sont cumulatives dans les conteneurs imbriqués.</span><span class="sxs-lookup"><span data-stu-id="6d887-128">As the two preceding examples show, transformations and clipping regions are cumulative in nested containers.</span></span> <span data-ttu-id="6d887-129">Si vous définissez les transformations <xref:System.Drawing.Graphics> mondiales du conteneur et de l’objet, les deux transformations s’appliqueront aux éléments tirés de l’intérieur du conteneur.</span><span class="sxs-lookup"><span data-stu-id="6d887-129">If you set the world transformations of the container and the <xref:System.Drawing.Graphics> object, both transformations will apply to items drawn from inside the container.</span></span> <span data-ttu-id="6d887-130">La transformation du conteneur sera appliquée en premier, et la transformation de l’objet <xref:System.Drawing.Graphics> sera appliquée en second lieu.</span><span class="sxs-lookup"><span data-stu-id="6d887-130">The transformation of the container will be applied first, and the transformation of the <xref:System.Drawing.Graphics> object will be applied second.</span></span> <span data-ttu-id="6d887-131">Si vous définissez les régions <xref:System.Drawing.Graphics> de coupure du conteneur et de l’objet, les objets tirés de l’intérieur du conteneur seront coupés par l’intersection des deux régions de coupure.</span><span class="sxs-lookup"><span data-stu-id="6d887-131">If you set the clipping regions of the container and the <xref:System.Drawing.Graphics> object, items drawn from inside the container will be clipped by the intersection of the two clipping regions.</span></span>  
  
## <a name="quality-settings-in-nested-containers"></a><span data-ttu-id="6d887-132">Paramètres de qualité dans les conteneurs imbriqués</span><span class="sxs-lookup"><span data-stu-id="6d887-132">Quality Settings in Nested Containers</span></span>  
 <span data-ttu-id="6d887-133">Les paramètres<xref:System.Drawing.Graphics.SmoothingMode%2A> <xref:System.Drawing.Graphics.TextRenderingHint%2A>de qualité (, , et autres) dans les conteneurs imbriqués ne sont pas cumulatifs; les paramètres de qualité du conteneur remplacent <xref:System.Drawing.Graphics> temporairement les paramètres de qualité d’un objet.</span><span class="sxs-lookup"><span data-stu-id="6d887-133">Quality settings (<xref:System.Drawing.Graphics.SmoothingMode%2A>, <xref:System.Drawing.Graphics.TextRenderingHint%2A>, and the like) in nested containers are not cumulative; rather, the quality settings of the container temporarily replace the quality settings of a <xref:System.Drawing.Graphics> object.</span></span> <span data-ttu-id="6d887-134">Lorsque vous créez un nouveau conteneur, les paramètres de qualité de ce conteneur sont définis selon des valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="6d887-134">When you create a new container, the quality settings for that container are set to default values.</span></span> <span data-ttu-id="6d887-135">Par exemple, supposons <xref:System.Drawing.Graphics> que vous avez <xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias>un objet avec un mode de lissage de .</span><span class="sxs-lookup"><span data-stu-id="6d887-135">For example, suppose you have a <xref:System.Drawing.Graphics> object with a smoothing mode of <xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias>.</span></span> <span data-ttu-id="6d887-136">Lorsque vous créez un conteneur, le mode de lissage à l’intérieur du conteneur est le mode de lissage par défaut.</span><span class="sxs-lookup"><span data-stu-id="6d887-136">When you create a container, the smoothing mode inside the container is the default smoothing mode.</span></span> <span data-ttu-id="6d887-137">Vous êtes libre de définir le mode de lissage du conteneur, et tous les articles tirés de l’intérieur du conteneur seront dessinés selon le mode que vous définissez.</span><span class="sxs-lookup"><span data-stu-id="6d887-137">You are free to set the smoothing mode of the container, and any items drawn from inside the container will be drawn according to the mode you set.</span></span> <span data-ttu-id="6d887-138">Les objets dessinés <xref:System.Drawing.Graphics.EndContainer%2A> après l’appel seront tirés selon le mode de lissage ()<xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias>qui était en place avant l’appel à <xref:System.Drawing.Graphics.BeginContainer%2A>.</span><span class="sxs-lookup"><span data-stu-id="6d887-138">Items drawn after the call to <xref:System.Drawing.Graphics.EndContainer%2A> will be drawn according to the smoothing mode (<xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias>) that was in place before the call to <xref:System.Drawing.Graphics.BeginContainer%2A>.</span></span>  
  
## <a name="several-layers-of-nested-containers"></a><span data-ttu-id="6d887-139">Plusieurs couches de conteneurs imbriqués</span><span class="sxs-lookup"><span data-stu-id="6d887-139">Several Layers of Nested Containers</span></span>  
 <span data-ttu-id="6d887-140">Vous n’êtes pas limité <xref:System.Drawing.Graphics> à un conteneur dans un objet.</span><span class="sxs-lookup"><span data-stu-id="6d887-140">You are not limited to one container in a <xref:System.Drawing.Graphics> object.</span></span> <span data-ttu-id="6d887-141">Vous pouvez créer une séquence de conteneurs, chacun niché dans le précédent, et vous pouvez spécifier la transformation du monde, la région de coupure, et les paramètres de qualité de chacun de ces conteneurs imbriqués.</span><span class="sxs-lookup"><span data-stu-id="6d887-141">You can create a sequence of containers, each nested in the preceding, and you can specify the world transformation, clipping region, and quality settings of each of those nested containers.</span></span> <span data-ttu-id="6d887-142">Si vous appelez une méthode de dessin de l’intérieur du récipient le plus intérieur, les transformations seront appliquées dans l’ordre, en commençant par le récipient le plus intérieur et se terminant par le récipient le plus externe.</span><span class="sxs-lookup"><span data-stu-id="6d887-142">If you call a drawing method from inside the innermost container, the transformations will be applied in order, starting with the innermost container and ending with the outermost container.</span></span> <span data-ttu-id="6d887-143">Les articles tirés de l’intérieur du conteneur le plus intime seront coupés par l’intersection de toutes les régions de coupure.</span><span class="sxs-lookup"><span data-stu-id="6d887-143">Items drawn from inside the innermost container will be clipped by the intersection of all the clipping regions.</span></span>  
  
 <span data-ttu-id="6d887-144">L’exemple suivant <xref:System.Drawing.Graphics> crée un objet et <xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias>définit son indice de rendu de texte à .</span><span class="sxs-lookup"><span data-stu-id="6d887-144">The following example creates a <xref:System.Drawing.Graphics> object and sets its text rendering hint to <xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias>.</span></span> <span data-ttu-id="6d887-145">Le code crée deux conteneurs, l’un imbriqué dans l’autre.</span><span class="sxs-lookup"><span data-stu-id="6d887-145">The code creates two containers, one nested within the other.</span></span> <span data-ttu-id="6d887-146">Le soupçon de rendu de texte <xref:System.Drawing.Text.TextRenderingHint.SingleBitPerPixel>du récipient externe est réglé à, et <xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias>le soupçon de rendu de texte du récipient intérieur est réglé à .</span><span class="sxs-lookup"><span data-stu-id="6d887-146">The text rendering hint of the outer container is set to <xref:System.Drawing.Text.TextRenderingHint.SingleBitPerPixel>, and the text rendering hint of the inner container is set to <xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias>.</span></span> <span data-ttu-id="6d887-147">Le code dessine trois cordes : une du récipient intérieur, une <xref:System.Drawing.Graphics> du récipient extérieur et une de l’objet lui-même.</span><span class="sxs-lookup"><span data-stu-id="6d887-147">The code draws three strings: one from the inner container, one from the outer container, and one from the <xref:System.Drawing.Graphics> object itself.</span></span>  
  
 [!code-csharp[System.Drawing.MiscLegacyTopics#63](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Drawing.MiscLegacyTopics/CS/Class1.cs#63)]
 [!code-vb[System.Drawing.MiscLegacyTopics#63](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Drawing.MiscLegacyTopics/VB/Class1.vb#63)]  
  
 <span data-ttu-id="6d887-148">L’illustration suivante montre les trois cordes.</span><span class="sxs-lookup"><span data-stu-id="6d887-148">The following illustration shows the three strings.</span></span> <span data-ttu-id="6d887-149">Les cordes tirées du récipient <xref:System.Drawing.Graphics> intérieur et de l’objet sont lissées par l’antianage.</span><span class="sxs-lookup"><span data-stu-id="6d887-149">The strings drawn from the inner container and from the <xref:System.Drawing.Graphics> object are smoothed by antialiasing.</span></span> <span data-ttu-id="6d887-150">La ficelle tirée du récipient extérieur n’est pas <xref:System.Drawing.Graphics.TextRenderingHint%2A> lissée <xref:System.Drawing.Text.TextRenderingHint.SingleBitPerPixel>par l’antialiasing parce que la propriété est réglée à .</span><span class="sxs-lookup"><span data-stu-id="6d887-150">The string drawn from the outer container is not smoothed by antialiasing because the <xref:System.Drawing.Graphics.TextRenderingHint%2A> property is set to <xref:System.Drawing.Text.TextRenderingHint.SingleBitPerPixel>.</span></span>  
  
 ![Illustration qui montre les cordes tirées de récipients imbriqués.](./media/using-nested-graphics-containers/nested-containers-three-strings.png)  
  
## <a name="see-also"></a><span data-ttu-id="6d887-152">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="6d887-152">See also</span></span>

- <xref:System.Drawing.Graphics>
- [<span data-ttu-id="6d887-153">Gestion de l'état d'un objet graphique</span><span class="sxs-lookup"><span data-stu-id="6d887-153">Managing the State of a Graphics Object</span></span>](managing-the-state-of-a-graphics-object.md)
