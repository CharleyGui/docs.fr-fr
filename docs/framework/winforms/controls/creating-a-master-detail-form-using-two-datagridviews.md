---
title: 'Procédure pas à pas : Création d’un formulaire maître / détail utilisant deux contrôles de DataGridView Windows Forms'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- DataGridView control [Windows Forms], master/detail form
- parent-child tables [Windows Forms], displaying on Windows Forms
- master-details lists [Windows Forms], displaying on Windows Forms
- walkthroughs [Windows Forms], DataGridView control
ms.assetid: c5fa29e8-47f7-4691-829b-0e697a691f36
ms.openlocfilehash: 774151efb136207a1c4f7a2f8f812bbbaefbf9e1
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64648209"
---
# <a name="walkthrough-creating-a-masterdetail-form-using-two-windows-forms-datagridview-controls"></a><span data-ttu-id="cf5fa-102">Procédure pas à pas : création d’un formulaire maître/détails qui utilise deux contrôles DataGridView Windows Forms</span><span class="sxs-lookup"><span data-stu-id="cf5fa-102">Walkthrough: Creating a Master/Detail Form Using Two Windows Forms DataGridView Controls</span></span>
<span data-ttu-id="cf5fa-103">Un des scénarios plus courants pour l’utilisation de la <xref:System.Windows.Forms.DataGridView> contrôle est le *maître/détail* formulaire, dans lequel une relation parent/enfant entre deux tables de base de données est affichée.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-103">One of the most common scenarios for using the <xref:System.Windows.Forms.DataGridView> control is the *master/detail* form, in which a parent/child relationship between two database tables is displayed.</span></span> <span data-ttu-id="cf5fa-104">Sélection de lignes dans la table maîtresse provoque la table secondaire pour mettre à jour avec les données enfants correspondantes.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-104">Selecting rows in the master table causes the detail table to update with the corresponding child data.</span></span>  
  
 <span data-ttu-id="cf5fa-105">Implémentation d’un formulaire maître/détail est facile à l’aide de l’interaction entre le <xref:System.Windows.Forms.DataGridView> contrôle et le <xref:System.Windows.Forms.BindingSource> composant.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-105">Implementing a master/detail form is easy using the interaction between the <xref:System.Windows.Forms.DataGridView> control and the <xref:System.Windows.Forms.BindingSource> component.</span></span> <span data-ttu-id="cf5fa-106">Dans cette procédure pas à pas, vous allez créer le formulaire à l’aide de deux <xref:System.Windows.Forms.DataGridView> contrôles et deux <xref:System.Windows.Forms.BindingSource> composants.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-106">In this walkthrough, you will build the form using two <xref:System.Windows.Forms.DataGridView> controls and two <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="cf5fa-107">L’écran affiche deux tables connexes dans la base de données Northwind SQL Server : `Customers` et `Orders`.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-107">The form will show two related tables in the Northwind SQL Server sample database: `Customers` and `Orders`.</span></span> <span data-ttu-id="cf5fa-108">Lorsque vous avez terminé, avoir un formulaire qui affiche tous les clients dans la base de données dans le maître <xref:System.Windows.Forms.DataGridView> et toutes les commandes du client sélectionné dans le détail <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-108">When you are finished, you will have a form that shows all the customers in the database in the master <xref:System.Windows.Forms.DataGridView> and all the orders for the selected customer in the detail <xref:System.Windows.Forms.DataGridView>.</span></span>  
  
 <span data-ttu-id="cf5fa-109">Pour copier le code dans cette rubrique sous la forme d’une liste unique, consultez [Guide pratique pour Créer un formulaire maître/détail utilisant deux contrôles de DataGridView Windows Forms](create-a-master-detail-form-using-two-datagridviews.md).</span><span class="sxs-lookup"><span data-stu-id="cf5fa-109">To copy the code in this topic as a single listing, see [How to: Create a Master/Detail Form Using Two Windows Forms DataGridView Controls](create-a-master-detail-form-using-two-datagridviews.md).</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="cf5fa-110">Prérequis</span><span class="sxs-lookup"><span data-stu-id="cf5fa-110">Prerequisites</span></span>  
 <span data-ttu-id="cf5fa-111">Pour exécuter cette procédure pas à pas, vous avez besoin des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="cf5fa-111">In order to complete this walkthrough, you will need:</span></span>  
  
- <span data-ttu-id="cf5fa-112">Accès à un serveur doté de la base de données Northwind SQL Server.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-112">Access to a server that has the Northwind SQL Server sample database.</span></span>  
  
## <a name="creating-the-form"></a><span data-ttu-id="cf5fa-113">Création du formulaire</span><span class="sxs-lookup"><span data-stu-id="cf5fa-113">Creating the form</span></span>  
  
#### <a name="to-create-a-masterdetail-form"></a><span data-ttu-id="cf5fa-114">Pour créer un formulaire maître/détail</span><span class="sxs-lookup"><span data-stu-id="cf5fa-114">To create a master/detail form</span></span>  
  
1. <span data-ttu-id="cf5fa-115">Créez une classe qui dérive de <xref:System.Windows.Forms.Form> et contient deux <xref:System.Windows.Forms.DataGridView> contrôles et deux <xref:System.Windows.Forms.BindingSource> composants.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-115">Create a class that derives from <xref:System.Windows.Forms.Form> and contains two <xref:System.Windows.Forms.DataGridView> controls and two <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="cf5fa-116">Le code suivant fournit l’initialisation de base et inclut un `Main` (méthode).</span><span class="sxs-lookup"><span data-stu-id="cf5fa-116">The following code provides basic form initialization and includes a `Main` method.</span></span> <span data-ttu-id="cf5fa-117">Si vous utilisez le concepteur Visual Studio pour créer votre formulaire, vous pouvez utiliser le code concepteur généré au lieu de ce code, mais veillez à utiliser les noms indiqués dans les déclarations de variable.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-117">If you use the Visual Studio designer to create your form, you can use the designer generated code instead of this code, but be sure to use the names shown in the variable declarations here.</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#01](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#01)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#01](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#01)]  
    [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#02](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#02)]
    [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#02](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#02)]  
  
2. <span data-ttu-id="cf5fa-118">Implémenter une méthode dans la définition de classe de votre formulaire pour gérer les détails de la connexion à la base de données.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-118">Implement a method in your form's class definition for handling the detail of connecting to the database.</span></span> <span data-ttu-id="cf5fa-119">Cet exemple utilise un `GetData` méthode qui remplit une <xref:System.Data.DataSet> d’objet, ajoute un <xref:System.Data.DataRelation> objet au jeu de données et lie le <xref:System.Windows.Forms.BindingSource> composants.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-119">This example uses a `GetData` method that populates a <xref:System.Data.DataSet> object, adds a <xref:System.Data.DataRelation> object to the data set, and binds the <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="cf5fa-120">Veillez à définir la variable `connectionString` avec une valeur appropriée pour votre base de données.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-120">Be sure to set the `connectionString` variable to a value that is appropriate for your database.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="cf5fa-121">Le stockage d'informations sensibles (telles qu'un mot de passe) dans la chaîne de connexion peut affecter la sécurité de votre application.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-121">Storing sensitive information, such as a password, within the connection string can affect the security of your application.</span></span> <span data-ttu-id="cf5fa-122">L'utilisation de l'authentification Windows (également appelée sécurité intégrée) offre un moyen plus sûr de contrôler l'accès à une base de données.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-122">Using Windows Authentication (also known as integrated security) is a more secure way to control access to a database.</span></span> <span data-ttu-id="cf5fa-123">Pour plus d’informations, consultez [Protection des informations de connexion](../../data/adonet/protecting-connection-information.md).</span><span class="sxs-lookup"><span data-stu-id="cf5fa-123">For more information, see [Protecting Connection Information](../../data/adonet/protecting-connection-information.md).</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#20](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#20)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#20](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#20)]  
  
3. <span data-ttu-id="cf5fa-124">Implémenter un gestionnaire pour votre formulaire <xref:System.Windows.Forms.Form.Load> les événements qui lie la <xref:System.Windows.Forms.DataGridView> de contrôles à la <xref:System.Windows.Forms.BindingSource> composants et appelle le `GetData` (méthode).</span><span class="sxs-lookup"><span data-stu-id="cf5fa-124">Implement a handler for your form's <xref:System.Windows.Forms.Form.Load> event that binds the <xref:System.Windows.Forms.DataGridView> controls to the <xref:System.Windows.Forms.BindingSource> components and calls the `GetData` method.</span></span> <span data-ttu-id="cf5fa-125">L’exemple suivant inclut le code qui redimensionne <xref:System.Windows.Forms.DataGridView> colonnes pour correspondre les données affichées.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-125">The following example includes code that resizes <xref:System.Windows.Forms.DataGridView> columns to fit the displayed data.</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#10](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#10)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#10](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#10)]  
  
## <a name="testing-the-application"></a><span data-ttu-id="cf5fa-126">Test de l'application</span><span class="sxs-lookup"><span data-stu-id="cf5fa-126">Testing the Application</span></span>  
 <span data-ttu-id="cf5fa-127">Vous pouvez maintenant tester le formulaire pour vous assurer qu’il se comporte comme prévu.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-127">You can now test the form to make sure it behaves as expected.</span></span>  
  
#### <a name="to-test-the-form"></a><span data-ttu-id="cf5fa-128">Pour tester le formulaire</span><span class="sxs-lookup"><span data-stu-id="cf5fa-128">To test the form</span></span>  
  
- <span data-ttu-id="cf5fa-129">Compilez et exécutez l'application.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-129">Compile and run the application.</span></span>  
  
     <span data-ttu-id="cf5fa-130">Vous verrez deux <xref:System.Windows.Forms.DataGridView> des contrôles, un au-dessus de l’autre.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-130">You will see two <xref:System.Windows.Forms.DataGridView> controls, one above the other.</span></span> <span data-ttu-id="cf5fa-131">En haut, sont les clients de Northwind `Customers` table et en bas sont le `Orders` correspondant au client sélectionné.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-131">On top are the customers from the Northwind `Customers` table, and at the bottom are the `Orders` corresponding to the selected customer.</span></span> <span data-ttu-id="cf5fa-132">Lorsque vous sélectionnez des lignes différentes dans le coin supérieur <xref:System.Windows.Forms.DataGridView>, le contenu du plus faible <xref:System.Windows.Forms.DataGridView> modifier en conséquence.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-132">As you select different rows in the upper <xref:System.Windows.Forms.DataGridView>, the contents of the lower <xref:System.Windows.Forms.DataGridView> change accordingly.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="cf5fa-133">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="cf5fa-133">Next Steps</span></span>  
 <span data-ttu-id="cf5fa-134">Cette application vous donne une connaissance élémentaire de la <xref:System.Windows.Forms.DataGridView> fonctionnalités du contrôle.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-134">This application gives you a basic understanding of the <xref:System.Windows.Forms.DataGridView> control's capabilities.</span></span> <span data-ttu-id="cf5fa-135">Vous pouvez personnaliser l’apparence et le comportement de la <xref:System.Windows.Forms.DataGridView> contrôle de plusieurs manières :</span><span class="sxs-lookup"><span data-stu-id="cf5fa-135">You can customize the appearance and behavior of the <xref:System.Windows.Forms.DataGridView> control in several ways:</span></span>  
  
- <span data-ttu-id="cf5fa-136">Modifier les styles de bordure et en-tête.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-136">Change border and header styles.</span></span> <span data-ttu-id="cf5fa-137">Pour plus d'informations, voir [Procédure : Modifier la bordure et de Styles de quadrillage dans les Windows Forms DataGridView Control](change-the-border-and-gridline-styles-in-the-datagrid.md).</span><span class="sxs-lookup"><span data-stu-id="cf5fa-137">For more information, see [How to: Change the Border and Gridline Styles in the Windows Forms DataGridView Control](change-the-border-and-gridline-styles-in-the-datagrid.md).</span></span>  
  
- <span data-ttu-id="cf5fa-138">Activer ou restreindre l’entrée utilisateur et le <xref:System.Windows.Forms.DataGridView> contrôle.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-138">Enable or restrict user input to the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="cf5fa-139">Pour plus d'informations, voir [Procédure : Empêcher l’ajout de ligne et de suppression dans les Windows Forms DataGridView Control](prevent-row-addition-and-deletion-datagridview.md), et [Comment : Définir une colonne en lecture seule dans les Windows Forms DataGridView Control](how-to-make-columns-read-only-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="cf5fa-139">For more information, see [How to: Prevent Row Addition and Deletion in the Windows Forms DataGridView Control](prevent-row-addition-and-deletion-datagridview.md), and [How to: Make Columns Read-Only in the Windows Forms DataGridView Control](how-to-make-columns-read-only-in-the-windows-forms-datagridview-control.md).</span></span>  
  
- <span data-ttu-id="cf5fa-140">Valider l’entrée utilisateur pour le <xref:System.Windows.Forms.DataGridView> contrôle.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-140">Validate user input to the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="cf5fa-141">Pour plus d’informations, consultez [Procédure pas à pas : Validation des données dans les Windows Forms DataGridView Control](walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="cf5fa-141">For more information, see [Walkthrough: Validating Data in the Windows Forms DataGridView Control](walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span></span>  
  
- <span data-ttu-id="cf5fa-142">Gérer des jeux de données très volumineux à l’aide du mode virtuel.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-142">Handle very large data sets using virtual mode.</span></span> <span data-ttu-id="cf5fa-143">Pour plus d’informations, consultez [Procédure pas à pas : Implémentation du Mode virtuel dans les Windows Forms DataGridView Control](implementing-virtual-mode-wf-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="cf5fa-143">For more information, see [Walkthrough: Implementing Virtual Mode in the Windows Forms DataGridView Control](implementing-virtual-mode-wf-datagridview-control.md).</span></span>  
  
- <span data-ttu-id="cf5fa-144">Personnaliser l’apparence des cellules.</span><span class="sxs-lookup"><span data-stu-id="cf5fa-144">Customize the appearance of cells.</span></span> <span data-ttu-id="cf5fa-145">Pour plus d'informations, voir [Procédure : Personnaliser l’apparence des cellules dans le contrôle de DataGridView Windows Forms](customize-the-appearance-of-cells-in-the-datagrid.md) et [Comment : Définir des Styles de cellules par défaut pour les Windows Forms DataGridView Control](how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="cf5fa-145">For more information, see [How to: Customize the Appearance of Cells in the Windows Forms DataGridView Control](customize-the-appearance-of-cells-in-the-datagrid.md) and [How to: Set Default Cell Styles for the Windows Forms DataGridView Control](how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cf5fa-146">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="cf5fa-146">See also</span></span>

- <xref:System.Windows.Forms.DataGridView>
- <xref:System.Windows.Forms.BindingSource>
- [<span data-ttu-id="cf5fa-147">Affichage des données dans le contrôle DataGridView Windows Forms</span><span class="sxs-lookup"><span data-stu-id="cf5fa-147">Displaying Data in the Windows Forms DataGridView Control</span></span>](displaying-data-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="cf5fa-148">Guide pratique pour Créer un formulaire maître/détail utilisant deux contrôles de DataGridView Windows Forms</span><span class="sxs-lookup"><span data-stu-id="cf5fa-148">How to: Create a Master/Detail Form Using Two Windows Forms DataGridView Controls</span></span>](create-a-master-detail-form-using-two-datagridviews.md)
- [<span data-ttu-id="cf5fa-149">Protection des informations de connexion</span><span class="sxs-lookup"><span data-stu-id="cf5fa-149">Protecting Connection Information</span></span>](../../data/adonet/protecting-connection-information.md)
