---
title: Utilisation de la ligne pour les nouveaux enregistrements dans le contrôle DataGridView Windows Forms
ms.date: 03/30/2017
helpviewer_keywords:
- DataGridView control [Windows Forms], adding rows for new records
- rows [Windows Forms], new records
- DataGridView control [Windows Forms], data entry
ms.assetid: 6110f1ea-9794-442c-a98a-f104a1feeaf4
ms.openlocfilehash: b28a8a8fc2d75f80a14447008c850de63e4e04b3
ms.sourcegitcommit: c4e9d05644c9cb89de5ce6002723de107ea2e2c4
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/19/2019
ms.locfileid: "65882436"
---
# <a name="using-the-row-for-new-records-in-the-windows-forms-datagridview-control"></a><span data-ttu-id="3333e-102">Utilisation de la ligne pour les nouveaux enregistrements dans le contrôle DataGridView Windows Forms</span><span class="sxs-lookup"><span data-stu-id="3333e-102">Using the Row for New Records in the Windows Forms DataGridView Control</span></span>
<span data-ttu-id="3333e-103">Lorsque vous utilisez un <xref:System.Windows.Forms.DataGridView> pour la modification des données dans votre application, vous souhaiterez souvent donner aux utilisateurs la possibilité d’ajouter de nouvelles lignes de données au magasin de données.</span><span class="sxs-lookup"><span data-stu-id="3333e-103">When you use a <xref:System.Windows.Forms.DataGridView> for editing data in your application, you will often want to give your users the ability to add new rows of data to the data store.</span></span> <span data-ttu-id="3333e-104">Le <xref:System.Windows.Forms.DataGridView> contrôle prend en charge cette fonctionnalité en fournissant une ligne pour les nouveaux enregistrements, qui est toujours affichée en tant que la dernière ligne.</span><span class="sxs-lookup"><span data-stu-id="3333e-104">The <xref:System.Windows.Forms.DataGridView> control supports this functionality by providing a row for new records, which is always shown as the last row.</span></span> <span data-ttu-id="3333e-105">Elle est marquée avec un astérisque (\*) dans son en-tête de ligne.</span><span class="sxs-lookup"><span data-stu-id="3333e-105">It is marked with an asterisk (\*) symbol in its row header.</span></span> <span data-ttu-id="3333e-106">Les sections suivantes décrivent certains éléments que vous devez envisager lorsque vous programmez avec la ligne pour les nouveaux enregistrements est activé.</span><span class="sxs-lookup"><span data-stu-id="3333e-106">The following sections discuss some of the things you should consider when you program with the row for new records enabled.</span></span>  
  
## <a name="displaying-the-row-for-new-records"></a><span data-ttu-id="3333e-107">Affichage de la ligne pour les nouveaux enregistrements</span><span class="sxs-lookup"><span data-stu-id="3333e-107">Displaying the Row for New Records</span></span>  
 <span data-ttu-id="3333e-108">Utilisez le <xref:System.Windows.Forms.DataGridView.AllowUserToAddRows%2A> propriété pour indiquer si la ligne pour les nouveaux enregistrements s’affiche.</span><span class="sxs-lookup"><span data-stu-id="3333e-108">Use the <xref:System.Windows.Forms.DataGridView.AllowUserToAddRows%2A> property to indicate whether the row for new records is displayed.</span></span> <span data-ttu-id="3333e-109">La valeur par défaut de cette propriété est `true`.</span><span class="sxs-lookup"><span data-stu-id="3333e-109">The default value of this property is `true`.</span></span>  
  
 <span data-ttu-id="3333e-110">Pour les données liées aux cas, la ligne des nouveaux enregistrements s’affichera si le <xref:System.Windows.Forms.DataGridView.AllowUserToAddRows%2A> propriété du contrôle et le <xref:System.ComponentModel.IBindingList.AllowNew%2A?displayProperty=nameWithType> propriété de la source de données sont tous deux `true`.</span><span class="sxs-lookup"><span data-stu-id="3333e-110">For the data bound case, the row for new records will be shown if the <xref:System.Windows.Forms.DataGridView.AllowUserToAddRows%2A> property of the control and the <xref:System.ComponentModel.IBindingList.AllowNew%2A?displayProperty=nameWithType> property of the data source are both `true`.</span></span> <span data-ttu-id="3333e-111">Si une est `false` la ligne n’est pas affichée.</span><span class="sxs-lookup"><span data-stu-id="3333e-111">If either is `false` then the row will not be shown.</span></span>  
  
## <a name="populating-the-row-for-new-records-with-default-data"></a><span data-ttu-id="3333e-112">Remplissage de la ligne pour les nouveaux enregistrements avec les données par défaut</span><span class="sxs-lookup"><span data-stu-id="3333e-112">Populating the Row for New Records with Default Data</span></span>  
 <span data-ttu-id="3333e-113">Lorsque l’utilisateur sélectionne la ligne pour les nouveaux enregistrements que la ligne actuelle, le <xref:System.Windows.Forms.DataGridView> incrémente le <xref:System.Windows.Forms.DataGridView.DefaultValuesNeeded> événement.</span><span class="sxs-lookup"><span data-stu-id="3333e-113">When the user selects the row for new records as the current row, the <xref:System.Windows.Forms.DataGridView> control raises the <xref:System.Windows.Forms.DataGridView.DefaultValuesNeeded> event.</span></span>  
  
 <span data-ttu-id="3333e-114">Cet événement permet d’accéder au nouveau <xref:System.Windows.Forms.DataGridViewRow> et vous permet de remplir la nouvelle ligne avec les données par défaut.</span><span class="sxs-lookup"><span data-stu-id="3333e-114">This event provides access to the new <xref:System.Windows.Forms.DataGridViewRow> and enables you to populate the new row with default data.</span></span> <span data-ttu-id="3333e-115">Pour plus d'informations, voir [Procédure : Spécifiez les valeurs par défaut pour les nouvelles lignes dans le contrôle de DataGridView Windows Forms](specify-default-values-for-new-rows-in-the-datagrid.md)</span><span class="sxs-lookup"><span data-stu-id="3333e-115">For more information, see [How to: Specify Default Values for New Rows in the Windows Forms DataGridView Control](specify-default-values-for-new-rows-in-the-datagrid.md)</span></span>  
  
## <a name="the-rows-collection"></a><span data-ttu-id="3333e-116">La Collection de lignes</span><span class="sxs-lookup"><span data-stu-id="3333e-116">The Rows Collection</span></span>  
 <span data-ttu-id="3333e-117">La ligne des nouveaux enregistrements est contenue dans le <xref:System.Windows.Forms.DataGridView> du contrôle <xref:System.Windows.Forms.DataGridView.Rows%2A> collection mais se comporte différemment à deux égards :</span><span class="sxs-lookup"><span data-stu-id="3333e-117">The row for new records is contained in the <xref:System.Windows.Forms.DataGridView> control's <xref:System.Windows.Forms.DataGridView.Rows%2A> collection but behaves differently in two respects:</span></span>  
  
- <span data-ttu-id="3333e-118">Impossible de supprimer la ligne des nouveaux enregistrements de la <xref:System.Windows.Forms.DataGridView.Rows%2A> collection par programme.</span><span class="sxs-lookup"><span data-stu-id="3333e-118">The row for new records cannot be removed from the <xref:System.Windows.Forms.DataGridView.Rows%2A> collection programmatically.</span></span> <span data-ttu-id="3333e-119">Un <xref:System.InvalidOperationException> est levée si cette opération est tentée.</span><span class="sxs-lookup"><span data-stu-id="3333e-119">An <xref:System.InvalidOperationException> is thrown if this is attempted.</span></span> <span data-ttu-id="3333e-120">L’utilisateur ne peut pas également supprimer la ligne pour les nouveaux enregistrements.</span><span class="sxs-lookup"><span data-stu-id="3333e-120">The user also cannot delete the row for new records.</span></span> <span data-ttu-id="3333e-121">Le <xref:System.Windows.Forms.DataGridViewRowCollection.Clear%2A?displayProperty=nameWithType> méthode ne supprime pas cette ligne à partir de la <xref:System.Windows.Forms.DataGridView.Rows%2A> collection.</span><span class="sxs-lookup"><span data-stu-id="3333e-121">The <xref:System.Windows.Forms.DataGridViewRowCollection.Clear%2A?displayProperty=nameWithType> method does not remove this row from the <xref:System.Windows.Forms.DataGridView.Rows%2A> collection.</span></span>  
  
- <span data-ttu-id="3333e-122">Aucune ligne ne peut être ajoutée après la ligne pour les nouveaux enregistrements.</span><span class="sxs-lookup"><span data-stu-id="3333e-122">No row can be added after the row for new records.</span></span> <span data-ttu-id="3333e-123">Un <xref:System.InvalidOperationException> est levée si cette opération est tentée.</span><span class="sxs-lookup"><span data-stu-id="3333e-123">An <xref:System.InvalidOperationException> is raised if this is attempted.</span></span> <span data-ttu-id="3333e-124">Par conséquent, la ligne des nouveaux enregistrements est toujours la dernière ligne dans le <xref:System.Windows.Forms.DataGridView> contrôle.</span><span class="sxs-lookup"><span data-stu-id="3333e-124">As a result, the row for new records is always the last row in the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="3333e-125">Les méthodes sur <xref:System.Windows.Forms.DataGridViewRowCollection> qui ajoutent des lignes :<xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A>, <xref:System.Windows.Forms.DataGridViewRowCollection.AddCopy%2A>, et <xref:System.Windows.Forms.DataGridViewRowCollection.AddCopies%2A>— appellent toutes les méthodes d’insertion en interne lorsque la ligne pour les nouveaux enregistrements est présente.</span><span class="sxs-lookup"><span data-stu-id="3333e-125">The methods on <xref:System.Windows.Forms.DataGridViewRowCollection> that add rows—<xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A>, <xref:System.Windows.Forms.DataGridViewRowCollection.AddCopy%2A>, and <xref:System.Windows.Forms.DataGridViewRowCollection.AddCopies%2A>—all call insertion methods internally when the row for new records is present.</span></span>  
  
## <a name="visual-customization-of-the-row-for-new-records"></a><span data-ttu-id="3333e-126">Personnalisation visuelle de la ligne pour les nouveaux enregistrements</span><span class="sxs-lookup"><span data-stu-id="3333e-126">Visual Customization of the Row for New Records</span></span>  
 <span data-ttu-id="3333e-127">Lorsque la ligne pour les nouveaux enregistrements est créée, elle est basée sur la ligne spécifiée par le <xref:System.Windows.Forms.DataGridView.RowTemplate%2A> propriété.</span><span class="sxs-lookup"><span data-stu-id="3333e-127">When the row for new records is created, it is based on the row specified by the <xref:System.Windows.Forms.DataGridView.RowTemplate%2A> property.</span></span> <span data-ttu-id="3333e-128">Les styles de cellules qui ne sont pas spécifiés pour cette ligne sont hérités d’autres propriétés.</span><span class="sxs-lookup"><span data-stu-id="3333e-128">Any cell styles that are not specified for this row are inherited from other properties.</span></span> <span data-ttu-id="3333e-129">Pour plus d’informations sur l’héritage de style de cellule, consultez [Styles de cellules dans le contrôle DataGridView Windows Forms](cell-styles-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="3333e-129">For more information about cell style inheritance, see [Cell Styles in the Windows Forms DataGridView Control](cell-styles-in-the-windows-forms-datagridview-control.md).</span></span>  
  
 <span data-ttu-id="3333e-130">Les valeurs initiales affichées par les cellules dans la ligne pour les nouveaux enregistrements sont extraites à partir de chaque cellule <xref:System.Windows.Forms.DataGridViewCell.DefaultNewRowValue%2A> propriété.</span><span class="sxs-lookup"><span data-stu-id="3333e-130">The initial values displayed by cells in the row for new records are retrieved from each cell's <xref:System.Windows.Forms.DataGridViewCell.DefaultNewRowValue%2A> property.</span></span> <span data-ttu-id="3333e-131">Pour les cellules de type <xref:System.Windows.Forms.DataGridViewImageCell>, cette propriété retourne un espace réservé d’image.</span><span class="sxs-lookup"><span data-stu-id="3333e-131">For cells of type <xref:System.Windows.Forms.DataGridViewImageCell>, this property returns a placeholder image.</span></span> <span data-ttu-id="3333e-132">Sinon, cette propriété retourne `null`.</span><span class="sxs-lookup"><span data-stu-id="3333e-132">Otherwise, this property returns `null`.</span></span> <span data-ttu-id="3333e-133">Vous pouvez remplacer cette propriété pour retourner une valeur personnalisée.</span><span class="sxs-lookup"><span data-stu-id="3333e-133">You can override this property to return a custom value.</span></span> <span data-ttu-id="3333e-134">Toutefois, ces valeurs initiales peuvent être remplacées par un <xref:System.Windows.Forms.DataGridView.DefaultValuesNeeded> Gestionnaire d’événements lorsque le focus entre dans la ligne pour les nouveaux enregistrements.</span><span class="sxs-lookup"><span data-stu-id="3333e-134">However, these initial values can be replaced by a <xref:System.Windows.Forms.DataGridView.DefaultValuesNeeded> event handler when focus enters the row for new records.</span></span>  
  
 <span data-ttu-id="3333e-135">Les icônes standards pour l’en-tête de cette ligne, qui sont une flèche ou un astérisque, ne sont pas exposées publiquement.</span><span class="sxs-lookup"><span data-stu-id="3333e-135">The standard icons for this row's header, which are an arrow or an asterisk, are not exposed publicly.</span></span> <span data-ttu-id="3333e-136">Si vous souhaitez personnaliser les icônes, vous devrez créer un personnalisé <xref:System.Windows.Forms.DataGridViewRowHeaderCell> classe.</span><span class="sxs-lookup"><span data-stu-id="3333e-136">If you want to customize the icons, you will need to create a custom <xref:System.Windows.Forms.DataGridViewRowHeaderCell> class.</span></span>  
  
 <span data-ttu-id="3333e-137">Les icônes standard utilisent le <xref:System.Windows.Forms.DataGridViewCellStyle.ForeColor%2A> propriété de le <xref:System.Windows.Forms.DataGridViewCellStyle> en cours d’utilisation par la cellule d’en-tête de ligne.</span><span class="sxs-lookup"><span data-stu-id="3333e-137">The standard icons use the <xref:System.Windows.Forms.DataGridViewCellStyle.ForeColor%2A> property of the <xref:System.Windows.Forms.DataGridViewCellStyle> in use by the row header cell.</span></span> <span data-ttu-id="3333e-138">Les icônes standards ne sont pas rendus si n’est pas suffisamment d’espace pour les afficher complètement.</span><span class="sxs-lookup"><span data-stu-id="3333e-138">The standard icons are not rendered if there is not enough space to display them completely.</span></span>  
  
 <span data-ttu-id="3333e-139">Si une valeur de chaîne est définie par la cellule d’en-tête de ligne, et si l’espace n’est pas suffisant pour le texte et l’icône, l’icône est d’abord supprimée.</span><span class="sxs-lookup"><span data-stu-id="3333e-139">If the row header cell has a string value set, and if there is not enough room for both the text and icon, the icon is dropped first.</span></span>  
  
## <a name="sorting"></a><span data-ttu-id="3333e-140">Tri</span><span class="sxs-lookup"><span data-stu-id="3333e-140">Sorting</span></span>  
 <span data-ttu-id="3333e-141">En mode indépendant, nouveaux enregistrements sont toujours ajoutés à la fin de la <xref:System.Windows.Forms.DataGridView> même si l’utilisateur les a triées le contenu de la <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="3333e-141">In unbound mode, new records will always be added to the end of the <xref:System.Windows.Forms.DataGridView> even if the user has sorted the content of the <xref:System.Windows.Forms.DataGridView>.</span></span> <span data-ttu-id="3333e-142">L’utilisateur doit appliquer encore le tri pour trier la ligne à la position correcte ; Ce comportement est semblable à celle de la <xref:System.Windows.Forms.ListView> contrôle.</span><span class="sxs-lookup"><span data-stu-id="3333e-142">The user will need to apply the sort again in order to sort the row to the correct position; this behavior is similar to that of the <xref:System.Windows.Forms.ListView> control.</span></span>  
  
 <span data-ttu-id="3333e-143">Dans données de modes dépendants et virtuels, le comportement d’insertion lorsqu’un tri est appliqué sera dépendants de l’implémentation du modèle de données.</span><span class="sxs-lookup"><span data-stu-id="3333e-143">In data bound and virtual modes, the insertion behavior when a sort is applied will be dependent on the implementation of the data model.</span></span> <span data-ttu-id="3333e-144">Pour ADO.NET, la ligne est immédiatement placée à la position correcte.</span><span class="sxs-lookup"><span data-stu-id="3333e-144">For ADO.NET, the row is immediately sorted into the correct position.</span></span>  
  
## <a name="other-notes-on-the-row-for-new-records"></a><span data-ttu-id="3333e-145">Autres remarques sur la ligne pour les nouveaux enregistrements</span><span class="sxs-lookup"><span data-stu-id="3333e-145">Other Notes on the Row for New Records</span></span>  
 <span data-ttu-id="3333e-146">Vous ne pouvez pas définir le <xref:System.Windows.Forms.DataGridViewRow.Visible%2A> propriété de cette ligne à `false`.</span><span class="sxs-lookup"><span data-stu-id="3333e-146">You cannot set the <xref:System.Windows.Forms.DataGridViewRow.Visible%2A> property of this row to `false`.</span></span> <span data-ttu-id="3333e-147">Un <xref:System.InvalidOperationException> est levée si cette opération est tentée.</span><span class="sxs-lookup"><span data-stu-id="3333e-147">An <xref:System.InvalidOperationException> is raised if this is attempted.</span></span>  
  
 <span data-ttu-id="3333e-148">La ligne pour les nouveaux enregistrements est toujours créée dans un état désélectionné.</span><span class="sxs-lookup"><span data-stu-id="3333e-148">The row for new records is always created in the unselected state.</span></span>  
  
## <a name="virtual-mode"></a><span data-ttu-id="3333e-149">Mode virtuel</span><span class="sxs-lookup"><span data-stu-id="3333e-149">Virtual Mode</span></span>  
 <span data-ttu-id="3333e-150">Si vous implémentez le mode virtuel, vous devez suivre à quel moment une ligne pour les nouveaux enregistrements est nécessaire dans le modèle de données et quand annuler l’ajout de la ligne.</span><span class="sxs-lookup"><span data-stu-id="3333e-150">If you are implementing virtual mode, you will need to track when a row for new records is needed in the data model and when to roll back the addition of the row.</span></span> <span data-ttu-id="3333e-151">L’implémentation exacte de cette fonctionnalité dépend de l’implémentation du modèle de données et sa sémantique de transaction, par exemple, si la validation étendue est au niveau de la cellule ou la ligne.</span><span class="sxs-lookup"><span data-stu-id="3333e-151">The exact implementation of this functionality depends on the implementation of the data model and its transaction semantics, for example, whether commit scope is at the cell or row level.</span></span> <span data-ttu-id="3333e-152">Pour plus d’informations, consultez [Mode virtuel dans le contrôle DataGridView Windows Forms](virtual-mode-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="3333e-152">For more information, see [Virtual Mode in the Windows Forms DataGridView Control](virtual-mode-in-the-windows-forms-datagridview-control.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3333e-153">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="3333e-153">See also</span></span>

- <xref:System.Windows.Forms.DataGridView>
- <xref:System.Windows.Forms.DataGridView.DefaultValuesNeeded?displayProperty=nameWithType>
- [<span data-ttu-id="3333e-154">Saisie de données dans le contrôle DataGridView Windows Forms</span><span class="sxs-lookup"><span data-stu-id="3333e-154">Data Entry in the Windows Forms DataGridView Control</span></span>](data-entry-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="3333e-155">Guide pratique pour Spécifiez les valeurs par défaut pour les nouvelles lignes dans le contrôle de DataGridView Windows Forms</span><span class="sxs-lookup"><span data-stu-id="3333e-155">How to: Specify Default Values for New Rows in the Windows Forms DataGridView Control</span></span>](specify-default-values-for-new-rows-in-the-datagrid.md)
