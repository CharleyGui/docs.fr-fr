---
title: Convertisseurs de types et extensions de balisage pour XAML
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [XAML Services], type converter services
- XAML [XAML Services], value converters
- XAML [XAML Services], markup extension services
- value converters for XAML [XAML Services]
- XAML [XAML Services], service context
ms.assetid: db07a952-05ce-4aa4-b6f9-aac7397d0326
ms.openlocfilehash: 6d859f5f341eaf7c86573077ec56eab7b4cd7bb8
ms.sourcegitcommit: 90f0bee0e8a416e45c78fa3ad4c91ef00e5228d5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/06/2019
ms.locfileid: "66722554"
---
# <a name="type-converters-and-markup-extensions-for-xaml"></a><span data-ttu-id="4084f-102">Convertisseurs de types et extensions de balisage pour XAML</span><span class="sxs-lookup"><span data-stu-id="4084f-102">Type Converters and Markup Extensions for XAML</span></span>
<span data-ttu-id="4084f-103">Les convertisseurs de type et les extensions de balisage sont deux techniques que les systèmes de type XAML et les writers XAML utilisent pour générer des composants de graphique d'objets.</span><span class="sxs-lookup"><span data-stu-id="4084f-103">Type converters and markup extensions are two techniques that XAML type systems and XAML writers use to generate object graph components.</span></span> <span data-ttu-id="4084f-104">Bien qu'ils partagent certaines caractéristiques, les convertisseurs de type et les extensions de balisage sont représentés différemment dans un flux de nœud XAML.</span><span class="sxs-lookup"><span data-stu-id="4084f-104">Although they share some characteristics, type converters and markup extensions are represented differently in a XAML node stream.</span></span> <span data-ttu-id="4084f-105">Dans cet ensemble de documentation, les convertisseurs de type, les extensions de balisage et les constructions similaires sont parfois désignés collectivement sous le nom de « convertisseurs de valeurs ».</span><span class="sxs-lookup"><span data-stu-id="4084f-105">In this documentation set, type converters, markup extensions, and similar constructs are sometimes collectively referred to as value converters.</span></span>  
  
<a name="value_converters"></a>   
## <a name="value-converters"></a><span data-ttu-id="4084f-106">Convertisseurs de valeurs</span><span class="sxs-lookup"><span data-stu-id="4084f-106">Value Converters</span></span>  
 <span data-ttu-id="4084f-107">En XAML, les convertisseurs de valeurs sont utilisés pour différents scénarios.</span><span class="sxs-lookup"><span data-stu-id="4084f-107">In XAML, value converters are used for various scenarios.</span></span> <span data-ttu-id="4084f-108">La liste suivante présente les différents types de convertisseurs de valeur en XAML :</span><span class="sxs-lookup"><span data-stu-id="4084f-108">The following list shows the different types of value converters in XAML:</span></span>  
  
- <span data-ttu-id="4084f-109">Convertisseur de type</span><span class="sxs-lookup"><span data-stu-id="4084f-109">Type converter</span></span>  
  
- <span data-ttu-id="4084f-110">Extension de balisage</span><span class="sxs-lookup"><span data-stu-id="4084f-110">Markup extension</span></span>  
  
- <span data-ttu-id="4084f-111">Sérialiseur de valeur</span><span class="sxs-lookup"><span data-stu-id="4084f-111">Value serializer</span></span>  
  
- <span data-ttu-id="4084f-112">Classe connexe ou classe de prise en charge qui fournit la logique pour une syntaxe de texte XAML</span><span class="sxs-lookup"><span data-stu-id="4084f-112">Related class or support class that provides the logic for a XAML text syntax</span></span>  
  
<a name="type_converters"></a>   
## <a name="type-converters"></a><span data-ttu-id="4084f-113">Convertisseurs de type</span><span class="sxs-lookup"><span data-stu-id="4084f-113">Type Converters</span></span>  
 <span data-ttu-id="4084f-114">Dans la définition des services XAML .NET Framework, les convertisseurs de type sont des classes qui dérivent de la classe CLR <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="4084f-114">In the .NET Framework XAML Services definition, type converters are classes that derive from the CLR <xref:System.ComponentModel.TypeConverter> class.</span></span> <span data-ttu-id="4084f-115"><xref:System.ComponentModel.TypeConverter> est une classe qui se trouvait dans le Microsoft .NET Framework antérieures à l’introduction de XAML.</span><span class="sxs-lookup"><span data-stu-id="4084f-115"><xref:System.ComponentModel.TypeConverter> is a class that was in the Microsoft .NET Framework before XAML existed.</span></span> <span data-ttu-id="4084f-116">Son rôle initial était de prendre en charge les fenêtres de propriétés et les métaphores de modification de texte similaires pour les propriétés de l' [!INCLUDE[TLA2#tla_ide](../../../includes/tla2sharptla-ide-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="4084f-116">Its original purpose was to support property windows and similar text-based editing metaphors for [!INCLUDE[TLA2#tla_ide](../../../includes/tla2sharptla-ide-md.md)] properties.</span></span> <span data-ttu-id="4084f-117">L’introduction de XAML dans le .NET Framework utilise <xref:System.ComponentModel.TypeConverter> pour convertir une syntaxe de texte (comme dans une valeur d’attribut ou un nœud de valeur XAML) en objet.</span><span class="sxs-lookup"><span data-stu-id="4084f-117">The introduction of XAML to .NET Framework uses <xref:System.ComponentModel.TypeConverter> to convert a text syntax (as found in an attribute value or a XAML value node) into an object.</span></span> <span data-ttu-id="4084f-118"><xref:System.ComponentModel.TypeConverter> peut également être utilisée pour sérialiser une valeur d’objet en syntaxe de texte.</span><span class="sxs-lookup"><span data-stu-id="4084f-118"><xref:System.ComponentModel.TypeConverter> can also be used to serialize an object value to text syntax.</span></span> <span data-ttu-id="4084f-119"><xref:System.ComponentModel.TypeConverter> était également utilisée dans les implémentations XAML spécifiques à l’infrastructure précédentes dans Windows Presentation Foundation (WPF) et Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="4084f-119"><xref:System.ComponentModel.TypeConverter> was also used in previous framework-specific XAML implementations in Windows Presentation Foundation (WPF) and Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="4084f-120">Pour plus d’informations sur le <xref:System.ComponentModel.TypeConverter> en XAML, consultez [Type Converters for XAML Overview](type-converters-for-xaml-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4084f-120">For more information about the <xref:System.ComponentModel.TypeConverter> in XAML, see [Type Converters for XAML Overview](type-converters-for-xaml-overview.md).</span></span>  
  
<a name="markup_extensions"></a>   
## <a name="markup-extensions"></a><span data-ttu-id="4084f-121">Extensions de balisage</span><span class="sxs-lookup"><span data-stu-id="4084f-121">Markup Extensions</span></span>  
 <span data-ttu-id="4084f-122">Dans l'implémentation des services XAML .NET Framework, les extensions de balisage sont des classes qui dérivent de la classe <xref:System.Windows.Markup.MarkupExtension> .</span><span class="sxs-lookup"><span data-stu-id="4084f-122">In the .NET Framework XAML Services implementation, markup extensions are classes that derive from the <xref:System.Windows.Markup.MarkupExtension> class.</span></span> <span data-ttu-id="4084f-123">Les extensions de balisage sont un concept qui, sous cette forme, provient du langage XAML.</span><span class="sxs-lookup"><span data-stu-id="4084f-123">Markup extensions are a concept that in this form is originated by the XAML language.</span></span> <span data-ttu-id="4084f-124">Vous pouvez considérer qu'une extension de balisage s'apparente à une séquence d'échappement extensible qui effectue des appels dans une classe de service pour fournir sa logique.</span><span class="sxs-lookup"><span data-stu-id="4084f-124">You can think of a markup extension as being something like an extensible escape sequence that calls into a service class to provide its logic.</span></span> <span data-ttu-id="4084f-125">Quant au balisage, les processeurs XAML reconnaissent universellement une extension de balisage par une séquence de texte qui commence par une accolade ouvrante ({) dans une chaîne de texte.</span><span class="sxs-lookup"><span data-stu-id="4084f-125">In terms of markup, XAML processors universally recognize a markup extension by a text sequence that starts with an opening brace ({) in a text string.</span></span>  
  
 <span data-ttu-id="4084f-126">Les extensions de balisage diffèrent des convertisseurs de type.</span><span class="sxs-lookup"><span data-stu-id="4084f-126">Markup extensions differ from type converters.</span></span> <span data-ttu-id="4084f-127">Les convertisseurs de type sont généralement associés à des types ou à des membres.</span><span class="sxs-lookup"><span data-stu-id="4084f-127">Type converters are typically associated with types or members.</span></span> <span data-ttu-id="4084f-128">Ils sont appelés lors de la création d'un graphique d'objets ou quand une sérialisation rencontre une syntaxe de texte associée à ces entités.</span><span class="sxs-lookup"><span data-stu-id="4084f-128">They are invoked when an object graph creation or a serialization encounters text syntax that is associated with those entities.</span></span>  
  
 <span data-ttu-id="4084f-129">Les extensions de balisage sont associées à une seule classe de service de prise en charge, mais peuvent être appliquées pour toute valeur de membre.</span><span class="sxs-lookup"><span data-stu-id="4084f-129">Markup extensions are associated with a single supporting service class, but can be applied for any member value.</span></span> <span data-ttu-id="4084f-130">(Toutefois, vous pouvez implémenter votre extension de balisage pour limiter délibérément son utilisation à certains membres ou types de destination, à l'aide du contexte de service). Les extensions de balisage peuvent remplacer une association de convertisseurs de type.</span><span class="sxs-lookup"><span data-stu-id="4084f-130">(However, you can implement your markup extension to deliberately restrict its use to certain members or destination types, by using service context.) Markup extensions can override a type converter association.</span></span> <span data-ttu-id="4084f-131">Ou vous pouvez les utiliser pour spécifier une valeur d'attribut pour les membres qui, sans cela, ne prendrait pas en charge une syntaxe de texte.</span><span class="sxs-lookup"><span data-stu-id="4084f-131">Or you can use them to specify an attribute value for members that would not otherwise support a text syntax.</span></span>  
  
 <span data-ttu-id="4084f-132">Pour plus d’informations sur le modèle d’implémentation d’extensions de balisage pour XAML, consultez [Markup Extensions for XAML Overview](markup-extensions-for-xaml-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4084f-132">For more information about the markup extension implementation pattern for XAML, see [Markup Extensions for XAML Overview](markup-extensions-for-xaml-overview.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4084f-133">Les types <xref:System.Windows.Markup.MarkupExtension> et <xref:System.Windows.Markup.ValueSerializer> sont trouvent tous les deux dans l'espace de noms <xref:System.Windows.Markup> , et non dans l'espace de noms <xref:System.Xaml> .</span><span class="sxs-lookup"><span data-stu-id="4084f-133">The <xref:System.Windows.Markup.MarkupExtension> and <xref:System.Windows.Markup.ValueSerializer> types are both in the <xref:System.Windows.Markup> namespace and not in the <xref:System.Xaml> namespace.</span></span> <span data-ttu-id="4084f-134">Cela ne signifie pas que ces types sont spécifiques aux technologies WPF ou Windows Forms qui remplissent normalement les espaces de noms CLR contenant la chaîne `Windows`.</span><span class="sxs-lookup"><span data-stu-id="4084f-134">This does not imply that these types are specific to either the WPF or Windows Forms technologies that otherwise populate CLR namespaces that contain the string `Windows`.</span></span> <span data-ttu-id="4084f-135"><xref:System.Windows.Markup.MarkupExtension> et <xref:System.Windows.Markup.ValueSerializer> se trouvent dans l'assembly System.Xaml et n'ont pas de dépendance d'infrastructure spécifique.</span><span class="sxs-lookup"><span data-stu-id="4084f-135"><xref:System.Windows.Markup.MarkupExtension> and <xref:System.Windows.Markup.ValueSerializer> are in the System.Xaml assembly and have no specific framework dependency.</span></span> <span data-ttu-id="4084f-136">Ces types existaient dans l’espace de noms CLR pour .NET Framework 3.0 et restent dans l’espace de noms CLR dans .NET Framework 4 afin d’éviter de rompre des références dans des projets WPF existants.</span><span class="sxs-lookup"><span data-stu-id="4084f-136">These types existed in the CLR namespace for .NET Framework 3.0 and remain in the CLR namespace in .NET Framework 4 to avoid breaking references in existing WPF projects.</span></span> <span data-ttu-id="4084f-137">Pour plus d'informations, consultez [Types Migrated from WPF to System.Xaml](types-migrated-from-wpf-to-system-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="4084f-137">For more information, see [Types Migrated from WPF to System.Xaml](types-migrated-from-wpf-to-system-xaml.md).</span></span>  
  
<a name="value_serializers"></a>   
## <a name="value-serializers"></a><span data-ttu-id="4084f-138">Sérialiseurs de valeur</span><span class="sxs-lookup"><span data-stu-id="4084f-138">Value Serializers</span></span>  
 <span data-ttu-id="4084f-139">Un <xref:System.Windows.Markup.ValueSerializer> est un convertisseur de type spécialisé qui est optimisé pour la conversion d'un objet en chaîne.</span><span class="sxs-lookup"><span data-stu-id="4084f-139">A <xref:System.Windows.Markup.ValueSerializer> is a specialized type converter that is optimized for converting an object to a string.</span></span> <span data-ttu-id="4084f-140">Il est possible qu'un <xref:System.Windows.Markup.ValueSerializer> pour XAML n'implémente pas du tout la méthode `ConvertFrom` .</span><span class="sxs-lookup"><span data-stu-id="4084f-140">A <xref:System.Windows.Markup.ValueSerializer> for XAML might not implement the `ConvertFrom` method at all.</span></span> <span data-ttu-id="4084f-141">Une implémentation de <xref:System.Windows.Markup.ValueSerializer> obtient des services d'une manière qui ressemble à une implémentation de <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="4084f-141">A <xref:System.Windows.Markup.ValueSerializer> implementation obtains services in a manner that is like a <xref:System.ComponentModel.TypeConverter> implementation.</span></span> <span data-ttu-id="4084f-142">Les méthodes virtuelles fournissent un paramètre d'entrée `context` .</span><span class="sxs-lookup"><span data-stu-id="4084f-142">The virtual methods provide an input `context` parameter.</span></span> <span data-ttu-id="4084f-143">Le paramètre `context` est de type <xref:System.Windows.Markup.IValueSerializerContext>, qui hérite de l'interface <xref:System.IServiceProvider> et a une méthode <xref:System.IServiceProvider.GetService%2A> .</span><span class="sxs-lookup"><span data-stu-id="4084f-143">The `context` parameter is of type <xref:System.Windows.Markup.IValueSerializerContext>, which inherits from the <xref:System.IServiceProvider> interface and has a <xref:System.IServiceProvider.GetService%2A> method.</span></span>  
  
 <span data-ttu-id="4084f-144">Dans le système de type XAML et pour les implémentations de writer XAML utilisant un traitement des boucles de nœud XAML pour la sérialisation, un convertisseur de valeurs qui est associé à un type ou à un membre est signalé par sa propre propriété <xref:System.Xaml.XamlType.ValueSerializer%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="4084f-144">In the XAML type system and for XAML writer implementations that use XAML node loop processing for serialization, a value converter that is associated with a type or member is reported by its own <xref:System.Xaml.XamlType.ValueSerializer%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="4084f-145">Pour les writers XAML qui effectuent la sérialisation, cela signifie que s'il existe une propriété <xref:System.Xaml.XamlType.TypeConverter%2A?displayProperty=nameWithType> et une propriété <xref:System.Xaml.XamlType.ValueSerializer%2A?displayProperty=nameWithType> , le convertisseur de type doit être utilisé pour le chemin de chargement, et le sérialiseur de valeur doit être utilisé pour le chemin d'enregistrement.</span><span class="sxs-lookup"><span data-stu-id="4084f-145">The meaning to XAML writers that perform serialization is that if a <xref:System.Xaml.XamlType.TypeConverter%2A?displayProperty=nameWithType> and <xref:System.Xaml.XamlType.ValueSerializer%2A?displayProperty=nameWithType> exist, the type converter should be used for the load path and the value serializer should be used for the save path.</span></span> <span data-ttu-id="4084f-146">Si <xref:System.Xaml.XamlType.TypeConverter%2A?displayProperty=nameWithType> existe mais que <xref:System.Xaml.XamlType.ValueSerializer%2A?displayProperty=nameWithType> a la valeur `null`, le convertisseur de type est également utilisé pour le chemin d'enregistrement.</span><span class="sxs-lookup"><span data-stu-id="4084f-146">If <xref:System.Xaml.XamlType.TypeConverter%2A?displayProperty=nameWithType> exists but <xref:System.Xaml.XamlType.ValueSerializer%2A?displayProperty=nameWithType> is `null`, the type converter is also used for the save path.</span></span>  
  
<a name="other_value_converters"></a>   
## <a name="other-value-converters"></a><span data-ttu-id="4084f-147">Autres convertisseurs de valeurs</span><span class="sxs-lookup"><span data-stu-id="4084f-147">Other Value Converters</span></span>  
 <span data-ttu-id="4084f-148">Un convertisseur de valeurs est extensible au-delà des modèles spécifiques d'un convertisseur de type ou d'une extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="4084f-148">A value converter is extensible beyond the specific patterns of a type converter or a markup extension.</span></span> <span data-ttu-id="4084f-149">Cependant, cette personnalisation nécessiterait également la redéfinition du système de type XAML tel que fourni par les services XAML .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="4084f-149">However, this customization would also require the redefinition of the XAML type system as provided by .NET Framework XAML Services.</span></span> <span data-ttu-id="4084f-150">Le système de type XAML existant a des représentations et des systèmes de création de rapports pour les convertisseurs de type, les extensions de balisage et les sérialiseurs de valeurs, mais pas pour les formes personnalisées de conversion de valeurs.</span><span class="sxs-lookup"><span data-stu-id="4084f-150">The existing XAML type system has representations and reporting systems for type converters, markup extensions, and value serializers, but not for custom forms of value conversion.</span></span> <span data-ttu-id="4084f-151">Si vous souhaitez créer des convertisseurs de valeurs personnalisés, utilisez le type <xref:System.Xaml.Schema.XamlValueConverter%601> .</span><span class="sxs-lookup"><span data-stu-id="4084f-151">If you want to create custom value converters, use the <xref:System.Xaml.Schema.XamlValueConverter%601> type.</span></span>  
  
<a name="type_converters_and_markup_extensions_in_combination"></a>   
## <a name="type-converters-and-markup-extensions-in-combination"></a><span data-ttu-id="4084f-152">Convertisseurs de type et extensions de balisage pour XAML</span><span class="sxs-lookup"><span data-stu-id="4084f-152">Type Converters and Markup Extensions in Combination</span></span>  
 <span data-ttu-id="4084f-153">Les extensions de balisage et les convertisseurs de type sont utilisés pour des situations différentes en XAML.</span><span class="sxs-lookup"><span data-stu-id="4084f-153">Markup extensions and type converters are used for different situations in XAML.</span></span> <span data-ttu-id="4084f-154">Bien que le contexte soit disponible pour les extensions de balisage, le comportement de la conversion de type des propriétés où une extension de balisage fournit une valeur n'est généralement pas vérifié dans les implémentations d'extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="4084f-154">Although context is available for markup extension usages, type conversion behavior of properties where a markup extension provides a value is generally is not checked in the markup extension implementations.</span></span> <span data-ttu-id="4084f-155">En d'autres termes, même si une extension de balisage retourne une chaîne de texte comme sortie de `ProvideValue` , le comportement de la conversion de type sur cette chaîne tel qu'appliqué à une propriété ou à un type de valeur de propriété spécifique n'est pas appelé.</span><span class="sxs-lookup"><span data-stu-id="4084f-155">In other words, even if a markup extension returns a text string as its `ProvideValue` output, type conversion behavior on that string as applied to a specific property or property value type is not invoked.</span></span> <span data-ttu-id="4084f-156">En général, le but d'une extension de balisage est de traiter une chaîne et de retourner un objet sans qu'aucun convertisseur de type ne soit impliqué.</span><span class="sxs-lookup"><span data-stu-id="4084f-156">Generally, the purpose of a markup extension is to process a string and return an object without any type converter involved.</span></span>  
  
<a name="service_context_for_a_value_converter"></a>   
## <a name="service-context-for-a-value-converter"></a><span data-ttu-id="4084f-157">Contexte de service pour un convertisseur de valeurs</span><span class="sxs-lookup"><span data-stu-id="4084f-157">Service Context for a Value Converter</span></span>  
 <span data-ttu-id="4084f-158">Lorsque vous implémentez un convertisseur de valeurs, vous devez souvent accéder à un contexte dans lequel le convertisseur de valeurs est appliqué.</span><span class="sxs-lookup"><span data-stu-id="4084f-158">When you implement a value converter, you often need access to a context in which the value converter is applied.</span></span> <span data-ttu-id="4084f-159">Ce contexte est appelé « contexte de service ».</span><span class="sxs-lookup"><span data-stu-id="4084f-159">This context is known as the service context.</span></span> <span data-ttu-id="4084f-160">Le contexte de service peut inclure des informations telles que le contexte de schéma XAML actif, l'accès au système de mappage de type fourni par le contexte de schéma XAML et le writer d'objet XAML, etc.</span><span class="sxs-lookup"><span data-stu-id="4084f-160">The service context might include information such as the active XAML schema context, access to the type mapping system that the XAML schema context and XAML object writer provide, and so on.</span></span> <span data-ttu-id="4084f-161">Pour plus d’informations sur les contextes de services disponibles pour un convertisseur de valeurs et pour savoir comment accéder aux services pouvant être fournis par un contexte de service, consultez [Contextes de services disponibles aux convertisseurs de types ou aux extensions de balisage](service-contexts-available-to-type-converters-and-markup-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="4084f-161">For more information about the service contexts available for a value converter and how to access the services that a service context might provide, see [Service Contexts Available to Type Converters and Markup Extensions](service-contexts-available-to-type-converters-and-markup-extensions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4084f-162">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="4084f-162">See also</span></span>

- <xref:System.Windows.Markup.MarkupExtension>
- <xref:System.Xaml.XamlObjectWriter>
- [<span data-ttu-id="4084f-163">Vue d’ensemble des extensions de balisage pour XAML</span><span class="sxs-lookup"><span data-stu-id="4084f-163">Markup Extensions for XAML Overview</span></span>](markup-extensions-for-xaml-overview.md)
- [<span data-ttu-id="4084f-164">Vue d'ensemble des convertisseurs de types pour XAML</span><span class="sxs-lookup"><span data-stu-id="4084f-164">Type Converters for XAML Overview</span></span>](type-converters-for-xaml-overview.md)
- [<span data-ttu-id="4084f-165">Service Contexts Available to Type Converters and Markup Extensions</span><span class="sxs-lookup"><span data-stu-id="4084f-165">Service Contexts Available to Type Converters and Markup Extensions</span></span>](service-contexts-available-to-type-converters-and-markup-extensions.md)
