---
title: Stratégie de protection étendue
ms.date: 03/30/2017
ms.assetid: e2616a10-317e-4c34-8023-0c015a80a82f
ms.openlocfilehash: 1cb6d44e8f6ee8f54f776453e5a1783ab0cfa4f0
ms.sourcegitcommit: 5fb5b6520b06d7f5e6131ec2ad854da302a28f2e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/03/2019
ms.locfileid: "74716420"
---
# <a name="extended-protection-policy"></a><span data-ttu-id="8c0cc-102">Stratégie de protection étendue</span><span class="sxs-lookup"><span data-stu-id="8c0cc-102">Extended Protection Policy</span></span>
<span data-ttu-id="8c0cc-103">La protection étendue est une initiative de sécurité visant à se protéger des attaques de l'intercepteur (MITM, Man In The Middle).</span><span class="sxs-lookup"><span data-stu-id="8c0cc-103">Extended Protection is a security initiative for protecting against man-in-the-middle (MITM) attacks.</span></span> <span data-ttu-id="8c0cc-104">Une attaque de l'intercepteur est une atteinte à la sécurité dans laquelle un intercepteur prend les informations d'identification d'un client et les envoie à un serveur.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-104">A MITM attack is a security threat in which a MITM takes a client’s credentials and forwards it to a server.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="8c0cc-105">Montre</span><span class="sxs-lookup"><span data-stu-id="8c0cc-105">Demonstrates</span></span>  
 <span data-ttu-id="8c0cc-106">Protection étendue</span><span class="sxs-lookup"><span data-stu-id="8c0cc-106">Extended protection</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="8c0cc-107">Discussion</span><span class="sxs-lookup"><span data-stu-id="8c0cc-107">Discussion</span></span>  
 <span data-ttu-id="8c0cc-108">Lorsque des applications s'authentifient à l'aide de Kerberos, de Digest ou de NTLM via le protocole HTTPS, un canal TLS (Transport Level Security) est d'abord établi, puis l'authentification s'effectue au moyen du canal sécurisé.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-108">When applications authenticate using Kerberos, Digest or NTLM using HTTPS, a Transport Level Security (TLS) channel is first established and then authentication takes place using the secure channel.</span></span> <span data-ttu-id="8c0cc-109">Toutefois, il n’existe aucune liaison entre la clé de session générée par SSL (Secure Sockets Layer) et celle qui est générée au cours de l’authentification.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-109">However, there is no binding between the session key generated by SSL and the session key generated during authentication.</span></span> <span data-ttu-id="8c0cc-110">Tout intercepteur peut s'établir entre le client et le serveur et commencer à transférer les requêtes émanant du client, même quand le canal de transport lui-même est sécurisé, car le serveur n'a aucun moyen de savoir si le canal sécurisé est établi depuis le client ou un intercepteur.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-110">Any MITM can establish itself between the client and the server and start forwarding the requests from the client, even when the transport channel itself is secure, because the server has no way of knowing whether the secure channel has been established from the client or a MITM.</span></span> <span data-ttu-id="8c0cc-111">Dans un tel scénario, la solution consiste à lier le canal TLS externe avec le canal d'authentification interne de façon à permettre au serveur de détecter la présence d'un intercepteur.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-111">The solution in this scenario is to bind the outer TLS channel with the inner authentication channel such that the server can detect if there is a MITM.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8c0cc-112">Cet exemple ne fonctionne que s'il est hébergé sur IIS et ne peut pas fonctionner sur Cassini (serveur Visual Studio Development), car Cassini ne prend pas en charge HTTPS.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-112">This sample only works when hosted on IIS and cannot work on Cassini – Visual Studio Development Server because Cassini does not support HTTPS.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8c0cc-113">Cette fonctionnalité est actuellement disponible uniquement sur Windows 7.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-113">This feature is currently only available on Windows 7.</span></span> <span data-ttu-id="8c0cc-114">Les étapes suivantes sont propres à Windows 7.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-114">The following steps are specific to Windows 7.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="8c0cc-115">Pour configurer, générer et exécuter l'exemple</span><span class="sxs-lookup"><span data-stu-id="8c0cc-115">To set up, build, and run the sample</span></span>  
  
1. <span data-ttu-id="8c0cc-116">Installez Internet Information Services depuis **le panneau de configuration**, **Ajout/suppression de programmes**, **fonctionnalités Windows**.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-116">Install Internet Information Services from **Control Panel**, **Add/Remove Programs**, **Windows Features**.</span></span>  
  
2. <span data-ttu-id="8c0cc-117">Installez **l’authentification Windows** dans les **fonctionnalités windows**, les **Internet Information Services**, les **Services World Wide Web**, la **sécurité**et **l’authentification Windows**.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-117">Install **Windows Authentication** in **Windows Features**, **Internet Information Services**, **World Wide Web Services**, **Security**, and **Windows Authentication**.</span></span>  
  
3. <span data-ttu-id="8c0cc-118">Installez **Windows Communication Foundation l’activation http** dans les **fonctionnalités de Windows**, **Microsoft .NET Framework 3.5.1**et **Windows Communication Foundation l’activation http**.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-118">Install **Windows Communication Foundation HTTP Activation** in **Windows Features**, **Microsoft .NET Framework 3.5.1**, and **Windows Communication Foundation HTTP Activation**.</span></span>  
  
4. <span data-ttu-id="8c0cc-119">Cet exemple requiert l'établissement par le client d'un canal sécurisé avec le serveur et nécessite donc la présence d'un certificat de serveur qui peut être installé à partir du Gestionnaire des services Internet (IIS).</span><span class="sxs-lookup"><span data-stu-id="8c0cc-119">This sample requires the client to establish a secure channel with the server, so it requires the presence of a server certificate which can be installed from Internet Information Services (IIS) Manager.</span></span>  
  
    1. <span data-ttu-id="8c0cc-120">Ouvrez le Gestionnaire de services Internet (IIS).</span><span class="sxs-lookup"><span data-stu-id="8c0cc-120">Open IIS Manager.</span></span> <span data-ttu-id="8c0cc-121">Ouvrez **certificats de serveur**, qui apparaît sous l’onglet **affichage des fonctionnalités** lorsque le nœud racine (nom de l’ordinateur) est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-121">Open **Server certificates**, which appears in the **Feature View** tab when the root node (machine name) is selected.</span></span>  
  
    2. <span data-ttu-id="8c0cc-122">À des fins de test de cet exemple, créez un certificat auto-signé.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-122">For the purpose of testing this sample, create a self-signed certificate.</span></span> <span data-ttu-id="8c0cc-123">Si vous ne souhaitez pas qu'Internet Explorer vous informe que le certificat n'est pas sécurisé, installez le certificat dans le magasin d'autorités racine approuvées de certificats.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-123">If you do not want Internet Explorer to prompt you about the certificate not being secure, install the certificate in the Trusted Certificate Root authority store.</span></span>  
  
5. <span data-ttu-id="8c0cc-124">Ouvrez le volet **actions** du site Web par défaut.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-124">Open the **Actions** pane for the default Web site.</span></span> <span data-ttu-id="8c0cc-125">Cliquez sur **modifier le site**, **liaisons**.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-125">Click **Edit Site**, **Bindings**.</span></span> <span data-ttu-id="8c0cc-126">S'il n'est pas déjà présent, ajoutez le type HTTPS avec le numéro de port 443.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-126">Add HTTPS as a type if not already present, with port number 443.</span></span> <span data-ttu-id="8c0cc-127">Assignez le certificat SSL créé au cours de l’étape précédente.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-127">Assign the SSL certificate created in the preceding step.</span></span>  
  
6. <span data-ttu-id="8c0cc-128">Générez le service.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-128">Build the service.</span></span> <span data-ttu-id="8c0cc-129">Un répertoire virtuel est alors créé dans IIS et les fichiers dll, .svc et .config requis pour l'hébergement Web du service sont copiés.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-129">This creates a virtual directory in IIS, and copies the .dll, .svc and .config files as required for the service to be Web hosted.</span></span>  
  
7. <span data-ttu-id="8c0cc-130">Ouvrez le Gestionnaire de services Internet (IIS).</span><span class="sxs-lookup"><span data-stu-id="8c0cc-130">Open IIS Manager.</span></span> <span data-ttu-id="8c0cc-131">Cliquez avec le bouton droit sur le répertoire virtuel (**ExtendedProtection**) qui a été créé à l’étape précédente.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-131">Right-click the virtual directory (**ExtendedProtection**), which was created in the preceding step.</span></span> <span data-ttu-id="8c0cc-132">Sélectionnez **convertir en application**.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-132">Select **Convert to Application**.</span></span>  
  
8. <span data-ttu-id="8c0cc-133">Ouvrez le module **d’authentification** dans le gestionnaire des services Internet pour ce répertoire virtuel et activez **l’authentification Windows**.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-133">Open the **Authentication** module in IIS Manager for this virtual directory and enable **Windows Authentication**.</span></span>  
  
9. <span data-ttu-id="8c0cc-134">Ouvrez **Paramètres avancés** sous **authentification Windows** pour ce répertoire virtuel et affectez-lui la valeur **obligatoire**.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-134">Open **Advanced Settings** under **Windows Authentication** for this virtual directory and set it to **Required**.</span></span>  
  
10. <span data-ttu-id="8c0cc-135">Vous pouvez tester le service en accédant à l'URL HTTPS à partir d'une fenêtre de navigateur (fournissez un nom de domaine complet).</span><span class="sxs-lookup"><span data-stu-id="8c0cc-135">You can test the service by accessing the HTTPS URL from a browser window (Provide a fully-qualified domain name).</span></span> <span data-ttu-id="8c0cc-136">Si vous souhaitez accéder à cette URL à partir d'un ordinateur distant, assurez-vous que le pare-feu est ouvert pour l'ensemble des connexions HTTP et HTTPS entrantes.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-136">If you want to access this URL from a remote machine, make sure that the firewall is opened for all incoming HTTP and HTTPS connections.</span></span>  
  
11. <span data-ttu-id="8c0cc-137">Ouvrez le fichier de configuration du client et fournissez un nom de domaine complet pour le client ou l'attribut d'adresse du point de terminaison qui remplace `<<full_machine_name>>`.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-137">Open the client configuration file and provide a fully-qualified domain name for the client or endpoint address attribute that replaces `<<full_machine_name>>`.</span></span>  
  
12. <span data-ttu-id="8c0cc-138">Exécutez le client.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-138">Run the client.</span></span> <span data-ttu-id="8c0cc-139">Le client communique avec le service, qui établit un canal sécurisé et utilise la protection étendue.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-139">The client communicates with the service, which establishes a secure channel and uses extended protection.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="8c0cc-140">Les exemples peuvent déjà être installés sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-140">The samples may already be installed on your machine.</span></span> <span data-ttu-id="8c0cc-141">Recherchez le répertoire (par défaut) suivant avant de continuer.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-141">Check for the following (default) directory before continuing.</span></span>  
>   
> `<InstallDrive>:\WF_WCF_Samples`  
>   
> <span data-ttu-id="8c0cc-142">Si ce répertoire n’existe pas, accédez à [Windows Communication Foundation (WCF) et Windows Workflow Foundation (WF) exemples pour .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) pour télécharger tous les exemples Windows Communication Foundation (WCF) et [!INCLUDE[wf1](../../../../includes/wf1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8c0cc-142">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="8c0cc-143">Cet exemple se trouve dans le répertoire suivant.</span><span class="sxs-lookup"><span data-stu-id="8c0cc-143">This sample is located in the following directory.</span></span>  
>   
> `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Services\Security\ExtendedProtection`
