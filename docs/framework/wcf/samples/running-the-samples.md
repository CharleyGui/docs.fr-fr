---
title: Exécution des exemples Windows Communication Foundation
ms.date: 03/30/2017
ms.assetid: db8a83da-95c1-4a21-a9d2-48caeb6398ea
ms.openlocfilehash: 57f760fa8bf4a3abf83492ac455dfaed2b327e7e
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90545101"
---
# <a name="running-the-windows-communication-foundation-samples"></a><span data-ttu-id="58c29-102">Exécution des exemples Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="58c29-102">Running the Windows Communication Foundation Samples</span></span>
<span data-ttu-id="58c29-103">Les exemples Windows Communication Foundation (WCF) peuvent être exécutés dans une configuration à un seul ordinateur ou sur plusieurs ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="58c29-103">The Windows Communication Foundation (WCF) samples can be run in a single-machine or cross-machine configuration.</span></span> <span data-ttu-id="58c29-104">Tels qu'ils sont fournis, les exemples sont configurés pour être exécutés sur un ordinateur unique.</span><span class="sxs-lookup"><span data-stu-id="58c29-104">As supplied, the samples are ready for running on a single machine.</span></span> <span data-ttu-id="58c29-105">Pour les exécuter sur plusieurs ordinateurs, il est nécessaire de modifier les paramètres de leur fichier de configuration.</span><span class="sxs-lookup"><span data-stu-id="58c29-105">In a cross-machine configuration, it is necessary to modify a sample's configuration file settings.</span></span> <span data-ttu-id="58c29-106">Les procédures suivantes permettent d'exécuter les exemples sur un même ordinateur ou sur plusieurs ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="58c29-106">The following procedures explain how to run a sample in same-machine and cross-machine configurations.</span></span> <span data-ttu-id="58c29-107">Notez que ces procédures ne sont pas tout à fait les mêmes pour les exemples hébergés dans les services IIS et les exemples auto-hébergés.</span><span class="sxs-lookup"><span data-stu-id="58c29-107">Note that there are variations in the steps for services hosted in Internet Information Services (IIS) and the self-hosted samples.</span></span> <span data-ttu-id="58c29-108">La plupart des exemples sont hébergés dans les services IIS. Consultez les informations contenues dans leur fichier lisezmoi respectif pour connaître leurs modalités d'hébergement.</span><span class="sxs-lookup"><span data-stu-id="58c29-108">Most samples are hosted in IIS; see the sample readme information to determine how it is hosted.</span></span>  
  
 <span data-ttu-id="58c29-109">Sur Windows Vista, les exemples qui ne sont pas hébergés dans IIS requièrent des privilèges élevés pour inscrire un écouteur auprès de Http.sys.</span><span class="sxs-lookup"><span data-stu-id="58c29-109">On Windows Vista, samples that are not hosted in IIS require elevated privileges to register a listener with Http.sys.</span></span> <span data-ttu-id="58c29-110">Utilisez Httpcfg.exe pour enregistrer les adresses d'écoute du service à l'aide du compte sous lequel le service s'exécute, ou lancez ce même service depuis une invite de commandes s'exécutant sous un compte d'administrateur.</span><span class="sxs-lookup"><span data-stu-id="58c29-110">Use Httpcfg.exe to register the service's listening addresses with the account the service is running under, or launch the service from a command prompt running with administrator privileges.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="58c29-111">Avant de générer ou d’exécuter l’un des exemples WCF, assurez-vous d’avoir effectué la [procédure d’installation unique pour les exemples de Windows Communication Foundation](one-time-setup-procedure-for-the-wcf-samples.md).</span><span class="sxs-lookup"><span data-stu-id="58c29-111">Before building or running any of the WCF samples, be sure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](one-time-setup-procedure-for-the-wcf-samples.md).</span></span>  
  
### <a name="to-run-the-sample-on-the-same-machine"></a><span data-ttu-id="58c29-112">Pour exécuter l'exemple sur le même ordinateur</span><span class="sxs-lookup"><span data-stu-id="58c29-112">To run the sample on the same machine</span></span>  
  
1. <span data-ttu-id="58c29-113">Si le service est hébergé par IIS, assurez-vous que vous pouvez accéder au service à l’aide d’un navigateur en entrant l’adresse suivante : `http://localhost/servicemodelsamples/service.svc` .</span><span class="sxs-lookup"><span data-stu-id="58c29-113">If the service is hosted by IIS, ensure that you can access the service using a browser by entering the following address: `http://localhost/servicemodelsamples/service.svc`.</span></span> <span data-ttu-id="58c29-114">Une page de confirmation doit s'afficher en réponse.</span><span class="sxs-lookup"><span data-stu-id="58c29-114">A confirmation page should be displayed in response.</span></span> <span data-ttu-id="58c29-115">Si la page de confirmation ne s’affiche pas, consultez [conseils de dépannage pour les exemples WCF](/previous-versions/dotnet/netframework-3.5/ms751511(v=vs.90)).</span><span class="sxs-lookup"><span data-stu-id="58c29-115">If the confirmation page is not displayed, see [Troubleshooting Tips for WCF Samples](/previous-versions/dotnet/netframework-3.5/ms751511(v=vs.90)).</span></span>  
  
2. <span data-ttu-id="58c29-116">Si le service est auto-hébergé, exécutez Service.exe à partir du répertoire \service\bin, situé dans le dossier correspondant à votre langue.</span><span class="sxs-lookup"><span data-stu-id="58c29-116">If the service is self-hosted, run Service.exe from \service\bin, from under the language-specific folder.</span></span> <span data-ttu-id="58c29-117">L'activité du service s'affiche dans sa fenêtre de console.</span><span class="sxs-lookup"><span data-stu-id="58c29-117">Service activity is displayed on the service console window.</span></span>  
  
3. <span data-ttu-id="58c29-118">Exécutez Client.exe à partir de \client\bin \\ , dans le dossier propre à la langue.</span><span class="sxs-lookup"><span data-stu-id="58c29-118">Run Client.exe from \client\bin\\, from under the language-specific folder.</span></span> <span data-ttu-id="58c29-119">L'activité du client s'affiche dans sa fenêtre de console.</span><span class="sxs-lookup"><span data-stu-id="58c29-119">Client activity is displayed on the client console window.</span></span>  
  
4. <span data-ttu-id="58c29-120">Si le client et le service ne sont pas en mesure de communiquer, consultez [conseils de dépannage pour les exemples WCF](/previous-versions/dotnet/netframework-3.5/ms751511(v=vs.90)).</span><span class="sxs-lookup"><span data-stu-id="58c29-120">If the client and service are not able to communicate, see [Troubleshooting Tips for WCF Samples](/previous-versions/dotnet/netframework-3.5/ms751511(v=vs.90)).</span></span>  
  
### <a name="to-run-the-sample-across-machines"></a><span data-ttu-id="58c29-121">Pour exécuter l'exemple sur plusieurs ordinateurs</span><span class="sxs-lookup"><span data-stu-id="58c29-121">To run the sample across machines</span></span>  
  
1. <span data-ttu-id="58c29-122">Si le service est hébergé par IIS :</span><span class="sxs-lookup"><span data-stu-id="58c29-122">If the service is hosted in IIS:</span></span>  
  
    1. <span data-ttu-id="58c29-123">Créez un répertoire virtuel nommé ServiceModelSamples sur l'ordinateur de service.</span><span class="sxs-lookup"><span data-stu-id="58c29-123">On the service machine, create a virtual directory named ServiceModelSamples.</span></span> <span data-ttu-id="58c29-124">Le fichier de commandes Setupvroot.bat inclus avec [une procédure d’installation unique pour les exemples de Windows Communication Foundation](one-time-setup-procedure-for-the-wcf-samples.md) peut être utilisé pour créer le répertoire de disque et le répertoire virtuel.</span><span class="sxs-lookup"><span data-stu-id="58c29-124">The batch file Setupvroot.bat included with [One-Time Setup Procedure for the Windows Communication Foundation Samples](one-time-setup-procedure-for-the-wcf-samples.md) can be used to create the disk directory and virtual directory.</span></span>  
  
    2. <span data-ttu-id="58c29-125">Copiez les fichiers du programme de service depuis %SystemDrive%\Inetpub\wwwroot\servicemodelsamples vers le répertoire virtuel ServiceModelSamples.</span><span class="sxs-lookup"><span data-stu-id="58c29-125">Copy the service program files from %SystemDrive%\Inetpub\wwwroot\servicemodelsamples to the ServiceModelSamples virtual directory on the service machine.</span></span> <span data-ttu-id="58c29-126">Assurez-vous de copier les fichiers dans le répertoire \bin.</span><span class="sxs-lookup"><span data-stu-id="58c29-126">Ensure that you include the files in the \bin directory.</span></span>  
  
    3. <span data-ttu-id="58c29-127">Assurez-vous que le service est accessible depuis l'ordinateur du client en utilisant un navigateur.</span><span class="sxs-lookup"><span data-stu-id="58c29-127">Test that you can access the service from the client machine using a browser.</span></span>  
  
     <span data-ttu-id="58c29-128">Si le service est auto-hébergé :</span><span class="sxs-lookup"><span data-stu-id="58c29-128">If the service is self-hosted:</span></span>  
  
    1. <span data-ttu-id="58c29-129">Sur l'ordinateur du service, créez un répertoire afin d'y stocker les fichiers lui correspondant.</span><span class="sxs-lookup"><span data-stu-id="58c29-129">On the service machine, create a directory to hold the service files.</span></span>  
  
    2. <span data-ttu-id="58c29-130">Copiez les fichiers de programme du service figurant dans le dossier \service\bin\ (situé dans le dossier correspondant à votre langue) sur l’ordinateur de service.</span><span class="sxs-lookup"><span data-stu-id="58c29-130">Copy the service program files from the \service\bin\ folder, under the language-specific folder, to the service machine.</span></span>  
  
    3. <span data-ttu-id="58c29-131">Dans le fichier de configuration du service, modifiez l'adresse de la définition du point de terminaison afin qu'elle corresponde à la nouvelle adresse de votre service.</span><span class="sxs-lookup"><span data-stu-id="58c29-131">In the service configuration file, change the address value of the endpoint definition to match the new address of your service.</span></span> <span data-ttu-id="58c29-132">Remplacez toutes les occurrences de « localhost » de l'adresse par un nom de domaine complet.</span><span class="sxs-lookup"><span data-stu-id="58c29-132">Replace any references to "localhost" with a fully-qualified domain name in the address.</span></span>  
  
    4. <span data-ttu-id="58c29-133">Lancez Service.exe depuis une invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="58c29-133">Launch Service.exe from a command prompt.</span></span>  
  
2. <span data-ttu-id="58c29-134">Copiez les fichiers programme du client du dossier \client\bin\ (situé dans le dossier correspondant à votre langue) sur l’ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="58c29-134">Copy the client program files from the \client\bin\ folder, under the language-specific folder, to the client machine.</span></span>  
  
3. <span data-ttu-id="58c29-135">Définissez l'adresse de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="58c29-135">Set the endpoint address.</span></span>  
  
    1. <span data-ttu-id="58c29-136">Si le service ne s'exécute pas sous un compte de domaine, ouvrez le fichier de configuration du client, puis modifiez l'adresse du point de terminaison en fonction de la nouvelle adresse de votre service.</span><span class="sxs-lookup"><span data-stu-id="58c29-136">If the service is not running under a domain account, open the client configuration file and change the address value of the endpoint definition to match the new address of your service.</span></span> <span data-ttu-id="58c29-137">Remplacez toutes les occurrences de « localhost » de l'adresse par un nom de domaine complet.</span><span class="sxs-lookup"><span data-stu-id="58c29-137">Replace any references to "localhost" with a fully-qualified domain name in the address.</span></span>  
  
    2. <span data-ttu-id="58c29-138">Si le service s'exécute sous un compte de domaine, régénérez la configuration du client en exécutant Svcutil.exe par rapport au service.</span><span class="sxs-lookup"><span data-stu-id="58c29-138">If the service is running under a domain account, regenerate the client configuration by running Svcutil.exe against the service.</span></span> <span data-ttu-id="58c29-139">Pour plus d’informations sur l’exécution de Svcutil.exe, consultez [génération des exemples de Windows Communication Foundation](building-the-samples.md).</span><span class="sxs-lookup"><span data-stu-id="58c29-139">For more information about running Svcutil.exe, see [Building the Windows Communication Foundation Samples](building-the-samples.md).</span></span> <span data-ttu-id="58c29-140">Utilisez le fichier généré au lieu du fichier de configuration utilisé dans l'exemple.</span><span class="sxs-lookup"><span data-stu-id="58c29-140">Use the generated file instead of the configuration file in the sample.</span></span> <span data-ttu-id="58c29-141">Le fichier de configuration généré contient des informations d'identité supplémentaires et contient tous les paramètres nécessaires à la connexion au point de terminaison du service bien qu'il s'agisse de paramètres par défaut.</span><span class="sxs-lookup"><span data-stu-id="58c29-141">The generated configuration file has additional identity information, and contains all settings necessary to connect to the service endpoint even though they are the default settings.</span></span> <span data-ttu-id="58c29-142">Pour plus d’informations sur les informations d’identité, consultez [identité du service et authentification](../feature-details/service-identity-and-authentication.md), et [\<identity>](../../configure-apps/file-schema/wcf/identity.md) .</span><span class="sxs-lookup"><span data-stu-id="58c29-142">For more information about identity information, see [Service Identity and Authentication](../feature-details/service-identity-and-authentication.md), and [\<identity>](../../configure-apps/file-schema/wcf/identity.md).</span></span>  
  
4. <span data-ttu-id="58c29-143">Sur l'ordinateur client, lancez Client.exe à partir d'une invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="58c29-143">On the client machine, launch Client.exe from a command prompt.</span></span>  
  
### <a name="to-debug-a-service"></a><span data-ttu-id="58c29-144">Pour déboguer un service</span><span class="sxs-lookup"><span data-stu-id="58c29-144">To debug a service</span></span>  
  
1. <span data-ttu-id="58c29-145">Générez la solution (client et service) à l’aide du menu **générer** ou en appuyant sur Ctrl + Maj + B.</span><span class="sxs-lookup"><span data-stu-id="58c29-145">Build the solution (both client and service) using the **Build** menu or CTRL+SHIFT+B.</span></span>  
  
2. <span data-ttu-id="58c29-146">Si le service est hébergé par IIS :</span><span class="sxs-lookup"><span data-stu-id="58c29-146">If the service is hosted in IIS:</span></span>  
  
    1. <span data-ttu-id="58c29-147">Activez le service à l’aide d’un navigateur en entrant l’adresse `http://localhost/servicemodelsamples/service.svc` .</span><span class="sxs-lookup"><span data-stu-id="58c29-147">Activate the service using a browser by entering the address `http://localhost/servicemodelsamples/service.svc`.</span></span>  
  
    2. <span data-ttu-id="58c29-148">Dans la solution, choisissez le menu **Déboguer** et l’élément **de menu attacher au processus** .</span><span class="sxs-lookup"><span data-stu-id="58c29-148">In the solution, choose the **Debug** menu and the **Attach to Process** menu item.</span></span>  
  
    3. <span data-ttu-id="58c29-149">Cochez la case **Afficher les processus de tous les utilisateurs**.</span><span class="sxs-lookup"><span data-stu-id="58c29-149">Select the **Show processes from all users** check box.</span></span>  
  
    4. <span data-ttu-id="58c29-150">Sélectionnez le processus de traitement W3wp.exe hôte afin de procéder au débogage (sélectionnez ASPNet_wp.exe sur Windows XP).</span><span class="sxs-lookup"><span data-stu-id="58c29-150">Select the host worker process W3wp.exe to debug (select ASPNet_wp.exe on Windows XP).</span></span>  
  
3. <span data-ttu-id="58c29-151">Vous pouvez à présent définir des points d'arrêt dans le code de service et activer ces points pour les exceptions.</span><span class="sxs-lookup"><span data-stu-id="58c29-151">You can now set breakpoints in the service code and enable breakpoints on exceptions.</span></span>  
  
4. <span data-ttu-id="58c29-152">Cliquez avec le bouton droit sur l’élément de projet client, puis choisissez **Déboguer**, **Démarrer une nouvelle instance**.</span><span class="sxs-lookup"><span data-stu-id="58c29-152">Right-click the client project item and choose **Debug**, **Start new instance**.</span></span>  
  
### <a name="to-clean-up-after-the-sample"></a><span data-ttu-id="58c29-153">Pour procéder au nettoyage après exécution de l'exemple</span><span class="sxs-lookup"><span data-stu-id="58c29-153">To clean up after the sample</span></span>  
  
- <span data-ttu-id="58c29-154">Si le service est hébergé par IIS, pour des raisons de sécurité, supprimez la définition du répertoire virtuel ainsi que les autorisations accordées au cours des étapes d'installation (une fois l'exécution des exemples terminée).</span><span class="sxs-lookup"><span data-stu-id="58c29-154">If the service is hosted in IIS for security purposes, remove the virtual directory definition and permissions granted in the setup steps when you are finished with the samples.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="58c29-155">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="58c29-155">See also</span></span>

- [<span data-ttu-id="58c29-156">Génération des exemples Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="58c29-156">Building the Windows Communication Foundation Samples</span></span>](building-the-samples.md)
- <span data-ttu-id="58c29-157">[Conseils de dépannage pour les exemples WCF](/previous-versions/dotnet/netframework-3.5/ms751511(v=vs.90))</span><span class="sxs-lookup"><span data-stu-id="58c29-157">[Troubleshooting Tips for WCF Samples](/previous-versions/dotnet/netframework-3.5/ms751511(v=vs.90))</span></span>
