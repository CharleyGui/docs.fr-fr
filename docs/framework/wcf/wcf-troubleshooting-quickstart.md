---
title: Démarrage rapide de la résolution des problèmes WCF
ms.date: 03/30/2017
helpviewer_keywords:
- WCF [WCF], troubleshooting
- Windows Communication Foundation [WCF], troubleshooting
ms.assetid: a9ea7a53-f31a-46eb-806e-898e465a4992
ms.openlocfilehash: 42cbcf4bcc7ad5c9725b657d5fdadb2cdbd9aacb
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90545041"
---
# <a name="wcf-troubleshooting-quickstart"></a><span data-ttu-id="d2a9f-102">Démarrage rapide de la résolution des problèmes WCF</span><span class="sxs-lookup"><span data-stu-id="d2a9f-102">WCF Troubleshooting Quickstart</span></span>
<span data-ttu-id="d2a9f-103">Cette rubrique décrit quelques problèmes connus rencontrés par les clients lorsqu'ils développement des clients et services WCF.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-103">This topic lists a number of known issues customers have run into while developing WCF clients and services.</span></span> <span data-ttu-id="d2a9f-104">Si le problème que vous rencontrez n'est pas répertorié dans la liste, nous vous recommandons de configurer le traçage de votre service.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-104">If the issue you are running into is not in this list, we recommend you configure tracing for your service.</span></span> <span data-ttu-id="d2a9f-105">Vous allez ainsi générer un fichier de suivi que vous pourrez consulter à l'aide de la visionneuse dédiée pour obtenir des informations détaillées sur les exceptions pouvant se produire au sein du service.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-105">This will generate a trace file that you can view with the trace file viewer and get detailed information about exceptions that may be occurring within the service.</span></span> <span data-ttu-id="d2a9f-106">Pour plus d’informations sur la configuration du traçage, consultez [Configuring Tracing](./diagnostics/tracing/configuring-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="d2a9f-106">For more information on configuring tracing, see: [Configuring Tracing](./diagnostics/tracing/configuring-tracing.md).</span></span> <span data-ttu-id="d2a9f-107">Pour plus d’informations sur la visionneuse de fichier de traçage, consultez [Service Trace Viewer Tool (SvcTraceViewer.exe)](service-trace-viewer-tool-svctraceviewer-exe.md).</span><span class="sxs-lookup"><span data-stu-id="d2a9f-107">For more information on the trace file viewer, see: [Service Trace Viewer Tool (SvcTraceViewer.exe)](service-trace-viewer-tool-svctraceviewer-exe.md).</span></span>  
  
1. [<span data-ttu-id="d2a9f-108">Après l'installation de Windows 7 et IIS, lorsque vous tentez d'accéder à un service WCF, vous obtenez le message d'erreur suivant : Erreur HTTP 404.3 –Introuvable</span><span class="sxs-lookup"><span data-stu-id="d2a9f-108">After installing Windows 7 and IIS, when I attempt to browse to a WCF service I get the following error message: HTTP Error 404.3 – Not Found</span></span>](#bkmk_0)  
  
     <span data-ttu-id="d2a9f-109">Erreur HTTP 404.3 – Introuvable. Impossible d’afficher la page demandée en raison de la configuration d’extension.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-109">HTTP Error 404.3 – Not FoundThe page you are requesting cannot be served because of the extension configuration.</span></span> <span data-ttu-id="d2a9f-110">Si la page est un script, ajoutez un gestionnaire.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-110">If the page is a script, add a handler.</span></span> <span data-ttu-id="d2a9f-111">Si le fichier doit être téléchargé, ajoutez un mappage MIME.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-111">If the file should be downloaded, add a MIME map.</span></span> <span data-ttu-id="d2a9f-112">Erreur détaillée InformationModule StaticFileModule.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-112">Detailed Error InformationModule StaticFileModule.</span></span>  
  
2. [<span data-ttu-id="d2a9f-113">Je reçois parfois un MessageSecurityException sur la deuxième demande si mon client est inactif pendant un certain temps après la première demande. Que se passe-t-il?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-113">Sometimes I receive a MessageSecurityException on the second request if my client is idle for a while after the first request. What is happening?</span></span>](#BKMK_q1)  
  
3. [<span data-ttu-id="d2a9f-114">Mon service commence à rejeter les nouveaux clients une fois qu’environ 10 clients interagissent avec lui. Que se passe-t-il?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-114">My service starts to reject new clients after about 10 clients are interacting with it. What is happening?</span></span>](#BKMK_q2)  
  
4. [<span data-ttu-id="d2a9f-115">Est-ce que je peux charger la configuration de mon service autrement qu'à partir du fichier de configuration de l'application WCF ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-115">Can I load my service configuration from somewhere other than the WCF application’s configuration file?</span></span>](#BKMK_q3)  
  
5. [<span data-ttu-id="d2a9f-116">Mon service et mon client fonctionnent très bien, mais je ne parviens pas à les faire fonctionner lorsque le client se trouve sur un autre ordinateur ? Que se passe-t-il?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-116">My service and client work great, but I can’t get them to work when the client is on another computer? What’s happening?</span></span>](#BKMK_q4)  
  
6. [<span data-ttu-id="d2a9f-117">Lorsque je lève une FaultException \<Exception> où le type est une exception, je reçois toujours un type FaultException général sur le client et non le type générique. Que se passe-t-il?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-117">When I throw a FaultException\<Exception> where the type is an exception, I always receive a general FaultException type on the client and not the generic type. What’s happening?</span></span>](#BKMK_q5)  
  
7. [<span data-ttu-id="d2a9f-118">Il semble que les opérations à sens unique et demande-réponse renvoient à peu près la même vitesse lorsque la réponse ne contient pas de données. Que se passe-t-il?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-118">It seems like one-way and request-reply operations return at roughly the same speed when the reply contains no data. What's happening?</span></span>](#BKMK_q6)  
  
8. [<span data-ttu-id="d2a9f-119">J’utilise un certificat X. 509 avec mon service et j’obtiens System. Security. Cryptography. CryptographicException. Que se passe-t-il?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-119">I’m using an X.509 certificate with my service and I get a System.Security.Cryptography.CryptographicException. What’s happening?</span></span>](#BKMK_q77)  
  
9. [<span data-ttu-id="d2a9f-120">J’ai remplacé les majuscules du premier paramètre d’une opération par des minuscules ; désormais, mon client lève une exception. Que se passe-t-il?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-120">I changed the first parameter of an operation from uppercase to lowercase; now my client throws an exception. What's happening?</span></span>](#BKMK_q88)  
  
10. [<span data-ttu-id="d2a9f-121">J’utilise l’un de mes outils de suivi et j’obtiens un EndpointNotFoundException. Que se passe-t-il?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-121">I’m using one of my tracing tools and I get an EndpointNotFoundException. What’s happening?</span></span>](#BKMK_q99)  
  
11. [<span data-ttu-id="d2a9f-122">Lors de l'appel d'une application HTTP Web WCF à partir d'une application SOAP WCF, le service retourne l'erreur suivante : 405 Méthode non autorisée</span><span class="sxs-lookup"><span data-stu-id="d2a9f-122">When calling a WCF Web HTTP application from a WCF SOAP application the service returns the following error: 405 Method Not Allowed</span></span>](#BK_MK99)  
  
 [<span data-ttu-id="d2a9f-123">Qu’est-ce que l’adresse de base ? Comment est-elle liée à une adresse de point de terminaison ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-123">What is the base address? How does it relate to an endpoint address?</span></span>](#BKMK_q10)  
  
<a name="bkmk_0"></a>
## <a name="after-installing-windows-7-and-iis-when-i-attempt-to-browse-to-a-wcf-service-i-get-the-following-error-message-http-error-4043--not-found"></a><span data-ttu-id="d2a9f-124">Après l'installation de Windows 7 et IIS, lorsque vous tentez d'accéder à un service WCF, vous obtenez le message d'erreur suivant : Erreur HTTP 404.3 –Introuvable</span><span class="sxs-lookup"><span data-stu-id="d2a9f-124">After installing Windows 7 and IIS, when I attempt to browse to a WCF service I get the following error message: HTTP Error 404.3 – Not Found</span></span>  
 <span data-ttu-id="d2a9f-125">Voici le message d'erreur complet :</span><span class="sxs-lookup"><span data-stu-id="d2a9f-125">The full error message is:</span></span>  
  
 <span data-ttu-id="d2a9f-126">Erreur HTTP 404.3 – Introuvable. Impossible d’afficher la page demandée en raison de la configuration d’extension.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-126">HTTP Error 404.3 – Not FoundThe page you are requesting cannot be served because of the extension configuration.</span></span> <span data-ttu-id="d2a9f-127">Si la page est un script, ajoutez un gestionnaire.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-127">If the page is a script, add a handler.</span></span> <span data-ttu-id="d2a9f-128">Si le fichier doit être téléchargé, ajoutez un mappage MIME.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-128">If the file should be downloaded, add a MIME map.</span></span> <span data-ttu-id="d2a9f-129">Erreur détaillée InformationModule StaticFileModule.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-129">Detailed Error InformationModule StaticFileModule.</span></span>  
  
 <span data-ttu-id="d2a9f-130">Ce message d’erreur s’affiche lorsque « Windows Communication Foundation HTTP activation » n’est pas défini explicitement dans le panneau de configuration.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-130">This error message occurs when "Windows Communication Foundation HTTP Activation" is not explicitly set in the Control Panel.</span></span> <span data-ttu-id="d2a9f-131">Pour ce faire, accédez au panneau de configuration, puis cliquez sur programmes dans le coin inférieur gauche de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-131">To set this go to the Control Panel, click Programs in the lower left-hand corner of the window.</span></span> <span data-ttu-id="d2a9f-132">Cliquez sur Activer ou désactiver des fonctionnalités Windows.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-132">Click Turn Windows features on or off.</span></span> <span data-ttu-id="d2a9f-133">Développez l'élément Microsoft .NET Framework 3.5.1, puis sélectionnez Activation HTTP de Windows Communication Foundation.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-133">Expand Microsoft .NET Framework 3.5.1 and select Windows Communication Foundation HTTP Activation.</span></span>  
  
<a name="BKMK_q1"></a>
## <a name="sometimes-i-receive-a-messagesecurityexception-on-the-second-request-if-my-client-is-idle-for-a-while-after-the-first-request-what-is-happening"></a><span data-ttu-id="d2a9f-134">Je reçois parfois une MessageSecurityException sur la deuxième demande si mon client est inactif pendant un instant après la première demande.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-134">Sometimes I receive a MessageSecurityException on the second request if my client is idle for a while after the first request.</span></span> <span data-ttu-id="d2a9f-135">Ce qui se passe</span><span class="sxs-lookup"><span data-stu-id="d2a9f-135">What is happening?</span></span>  
 <span data-ttu-id="d2a9f-136">La deuxième demande peut échouer pour deux raisons principales : (1) la session a expiré ou (2) le serveur Web qui héberge le service est recyclé.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-136">The second request can fail primarily for two reasons: (1) the session has timed out or (2) the Web server that is hosting the service is recycled.</span></span> <span data-ttu-id="d2a9f-137">Dans le premier cas, la session est valide jusqu’à ce que le service expire. Lorsque le service ne reçoit pas de demande du client dans le délai spécifié dans la liaison du service ( <xref:System.ServiceModel.Channels.Binding.ReceiveTimeout%2A> ), le service met fin à la session de sécurité.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-137">In the first case, the session is valid until the service times out. When the service does not receive a request from the client within the period of time specified in the service's binding (<xref:System.ServiceModel.Channels.Binding.ReceiveTimeout%2A>), the service terminates the security session.</span></span> <span data-ttu-id="d2a9f-138">Les messages clients suivants engendrent une <xref:System.ServiceModel.Security.MessageSecurityException>.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-138">Subsequent client messages result in the <xref:System.ServiceModel.Security.MessageSecurityException>.</span></span> <span data-ttu-id="d2a9f-139">Le client doit de nouveau établir une session sécurisée avec le service pour envoyer de futurs messages ou utiliser un jeton de contexte de sécurité avec état.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-139">The client must re-establish a secure session with the service to send future messages or use a stateful security context token.</span></span> <span data-ttu-id="d2a9f-140">Les jetons de contexte de sécurité avec état permettent également à une session sécurisée de survivre à un serveur Web en cours de recyclage.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-140">Stateful security context tokens also allow a secure session to survive a Web server being recycled.</span></span> <span data-ttu-id="d2a9f-141">Pour plus d’informations sur l’utilisation des jetons de contexte sécurisé avec état dans une session sécurisée, consultez [Comment : créer un jeton de contexte de sécurité pour une session sécurisée](./feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).</span><span class="sxs-lookup"><span data-stu-id="d2a9f-141">For more information about using stateful secure context tokens in a secure session, see [How to: Create a Security Context Token for a Secure Session](./feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).</span></span> <span data-ttu-id="d2a9f-142">Vous pouvez également désactiver des sessions sécurisées.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-142">Alternatively, you can disable secure sessions.</span></span> <span data-ttu-id="d2a9f-143">Lorsque vous utilisez la [\<wsHttpBinding>](../configure-apps/file-schema/wcf/wshttpbinding.md) liaison, vous pouvez affecter à la propriété la valeur `establishSecurityContext` `false` pour désactiver les sessions sécurisées.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-143">When you use the [\<wsHttpBinding>](../configure-apps/file-schema/wcf/wshttpbinding.md) binding, you can set the `establishSecurityContext` property to `false` to disable secure sessions.</span></span> <span data-ttu-id="d2a9f-144">Pour désactiver des sessions sécurisées pour d'autres liaisons, vous devez créer une liaison personnalisée.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-144">To disable secure sessions for other bindings, you must create a custom binding.</span></span> <span data-ttu-id="d2a9f-145">Pour plus d’informations sur la création d’une liaison personnalisée, consultez [How to: Create a Custom Binding Using the SecurityBindingElement](./feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span><span class="sxs-lookup"><span data-stu-id="d2a9f-145">For details about creating a custom binding, see [How to: Create a Custom Binding Using the SecurityBindingElement](./feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span></span> <span data-ttu-id="d2a9f-146">Avant d'appliquer chacune de ces options, vous devez comprendre les conditions de sécurité de votre application.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-146">Before you apply any of these options, you must understand your application's security requirements.</span></span>  
  
<a name="BKMK_q2"></a>
## <a name="my-service-starts-to-reject-new-clients-after-about-10-clients-are-interacting-with-it-what-is-happening"></a><span data-ttu-id="d2a9f-147">Mon service commence à rejeter les nouveaux clients une fois qu'environ 10 clients interagissent avec lui.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-147">My service starts to reject new clients after about 10 clients are interacting with it.</span></span> <span data-ttu-id="d2a9f-148">Ce qui se passe</span><span class="sxs-lookup"><span data-stu-id="d2a9f-148">What is happening?</span></span>  
 <span data-ttu-id="d2a9f-149">Par défaut, les services peuvent avoir uniquement 10 sessions simultanées.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-149">By default, services can have only 10 concurrent sessions.</span></span> <span data-ttu-id="d2a9f-150">Par conséquent, si les liaisons de service utilisent des sessions, le service accepte les nouvelles connexions clientes jusqu'à ce qu'il atteigne ce nombre, après quoi il refuse les nouvelles connexions clientes jusqu'à ce que l'une des sessions en cours se termine.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-150">Therefore, if the service bindings use sessions, the service accepts new client connections until it reaches that number, after which it refuses new client connections until one of the current sessions ends.</span></span> <span data-ttu-id="d2a9f-151">Vous pouvez prendre en charge davantage de clients de plusieurs manières.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-151">You can support more clients in a number of ways.</span></span> <span data-ttu-id="d2a9f-152">Si votre service ne requiert pas de sessions, n’utilisez pas de liaison avec session.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-152">If your service does not require sessions, do not use a sessionful binding.</span></span> <span data-ttu-id="d2a9f-153">(Pour plus d’informations, consultez [utilisation de sessions](using-sessions.md).) Une autre option consiste à augmenter la limite de session en remplaçant la valeur de la <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentSessions%2A> propriété par le nombre approprié à votre situation.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-153">(For more information, see [Using Sessions](using-sessions.md).) Another option is to increase the session limit by changing the value of the <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentSessions%2A> property to the number appropriate to your circumstance.</span></span>  
  
<a name="BKMK_q3"></a>
## <a name="can-i-load-my-service-configuration-from-somewhere-other-than-the-wcf-applications-configuration-file"></a><span data-ttu-id="d2a9f-154">Est-ce que je peux charger la configuration de mon service autrement qu'à partir du fichier de configuration de l'application WCF ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-154">Can I load my service configuration from somewhere other than the WCF application’s configuration file?</span></span>  
 <span data-ttu-id="d2a9f-155">Oui. Toutefois vous devez créer une classe <xref:System.ServiceModel.ServiceHost> personnalisée qui remplace la méthode <xref:System.ServiceModel.ServiceHostBase.ApplyConfiguration%2A> .</span><span class="sxs-lookup"><span data-stu-id="d2a9f-155">Yes, however, you have to create a custom <xref:System.ServiceModel.ServiceHost> class that overrides the <xref:System.ServiceModel.ServiceHostBase.ApplyConfiguration%2A> method.</span></span> <span data-ttu-id="d2a9f-156">À l'intérieur de cette méthode, vous pouvez appeler la base pour charger la configuration en premier (si vous souhaitez charger également les informations de configuration standard), mais vous pouvez également remplacer entièrement le système de chargement de la configuration.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-156">Inside that method, you can call the base to load configuration first (if you want to load the standard configuration information as well) but you can also entirely replace the configuration loading system.</span></span> <span data-ttu-id="d2a9f-157">Si vous souhaitez charger la configuration à partir d’un fichier de configuration différent du fichier de configuration de l’application, vous devez analyser le fichier de configuration vous-même et charger la configuration.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-157">If you want to load configuration from a configuration file that is different from the application configuration file, you must parse the configuration file yourself and load the configuration.</span></span>  
  
 <span data-ttu-id="d2a9f-158">L'exemple de code suivant indique la manière de substituer la méthode <xref:System.ServiceModel.ServiceHostBase.ApplyConfiguration%2A> et de configurer directement un point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-158">The following code example shows how to override the <xref:System.ServiceModel.ServiceHostBase.ApplyConfiguration%2A> method and directly configure an endpoint.</span></span>  
  
```csharp
public class MyServiceHost : ServiceHost  
{  
    public MyServiceHost(Type serviceType, params Uri[] baseAddresses)
      : base(serviceType, baseAddresses)  
    {
        Console.WriteLine("MyServiceHost Constructor");
    }  
  
    protected override void ApplyConfiguration()  
    {  
        string straddress = GetAddress();  
        Uri address = new Uri(straddress);  
        Binding binding = GetBinding();  
        base.AddServiceEndpoint(typeof(IData), binding, address);  
    }  
  
    string GetAddress()  
    {
        return "http://MyMachine:7777/MyEndpointAddress/";
    }  
  
    Binding GetBinding()  
    {  
        WSHttpBinding binding = new WSHttpBinding();  
        binding.Security.Mode = SecurityMode.None;  
        return binding;  
    }  
}  
```  
  
<a name="BKMK_q4"></a>
## <a name="my-service-and-client-work-great-but-i-cant-get-them-to-work-when-the-client-is-on-another-computer-whats-happening"></a><span data-ttu-id="d2a9f-159">Mon service et mon client fonctionnent convenablement, mais je ne parviens pas à les faire fonctionner lorsque le client est sur un autre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-159">My service and client work great, but I can’t get them to work when the client is on another computer?</span></span> <span data-ttu-id="d2a9f-160">Que se passe-t-il ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-160">What’s happening?</span></span>  
 <span data-ttu-id="d2a9f-161">En fonction de l'exception, plusieurs problèmes peuvent exister :</span><span class="sxs-lookup"><span data-stu-id="d2a9f-161">Depending upon the exception, there may be several issues:</span></span>  
  
- <span data-ttu-id="d2a9f-162">Vous devrez peut-être remplacer les adresses de point de terminaison du client par le nom d'hôte, au lieu de « localhost ».</span><span class="sxs-lookup"><span data-stu-id="d2a9f-162">You might need to change the client endpoint addresses to the host name and not "localhost".</span></span>  
  
- <span data-ttu-id="d2a9f-163">Vous devrez peut-être ouvrir le port vers l'application.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-163">You might need to open the port to the application.</span></span> <span data-ttu-id="d2a9f-164">Pour plus d’informations, consultez [Firewall Instructions](./samples/firewall-instructions.md) dans les exemples du Kit de développement logiciel.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-164">For details, see [Firewall Instructions](./samples/firewall-instructions.md) from the SDK samples.</span></span>  
  
- <span data-ttu-id="d2a9f-165">Pour d’autres problèmes possibles, consultez la rubrique Exemples [exécution des exemples de Windows Communication Foundation](./samples/running-the-samples.md).</span><span class="sxs-lookup"><span data-stu-id="d2a9f-165">For other possible issues, see the samples topic [Running the Windows Communication Foundation Samples](./samples/running-the-samples.md).</span></span>  
  
- <span data-ttu-id="d2a9f-166">Si votre client utilise des informations d'identification Windows et que l'exception est une <xref:System.ServiceModel.Security.SecurityNegotiationException>, configurez Kerberos comme suit.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-166">If your client is using Windows credentials and the exception is a <xref:System.ServiceModel.Security.SecurityNegotiationException>, configure Kerberos as follows.</span></span>  
  
    1. <span data-ttu-id="d2a9f-167">Ajoutez les informations d'identification à l'élément de point de terminaison dans le fichier App.config du client :</span><span class="sxs-lookup"><span data-stu-id="d2a9f-167">Add the identity credentials to the endpoint element in the client’s App.config file:</span></span>  
  
        ```xml
        <endpoint
          address="http://MyServer:8000/MyService/"
          binding="wsHttpBinding"
          bindingConfiguration="WSHttpBinding_IServiceExample"
          contract="IServiceExample"
          behaviorConfiguration="ClientCredBehavior"
          name="WSHttpBinding_IServiceExample">  
          <identity>  
            <userPrincipalName value="name@corp.contoso.com"/>  
          </identity>  
        </endpoint>  
        ```  
  
    2. <span data-ttu-id="d2a9f-168">Exécutez le service auto-hébergé sous le compte System ou NetworkService.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-168">Run the self-hosted service under the System or NetworkService account.</span></span> <span data-ttu-id="d2a9f-169">Vous pouvez exécuter cette commande pour créer une fenêtre de commande sous le compte System :</span><span class="sxs-lookup"><span data-stu-id="d2a9f-169">You can run this command to create a command window under the System account:</span></span>  
  
        ```console
        at 12:36 /interactive "cmd.exe"  
        ```  
  
    3. <span data-ttu-id="d2a9f-170">Hébergez le service sous IIS (Internet Information Services) qui, par défaut, utilise le compte du nom de principal du service (SPN).</span><span class="sxs-lookup"><span data-stu-id="d2a9f-170">Host the service under Internet Information Services (IIS), which, by default, uses the service principal name (SPN) account.</span></span>  
  
    4. <span data-ttu-id="d2a9f-171">Enregistrez un nouveau SPN avec le domaine à l'aide de SetSPN.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-171">Register a new SPN with the domain using SetSPN.</span></span> <span data-ttu-id="d2a9f-172">Pour ce faire, vous devez être administrateur de domaine.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-172">You need to be a domain administrator in order to do this.</span></span>  
  
 <span data-ttu-id="d2a9f-173">Pour plus d’informations sur le protocole Kerberos, consultez [concepts de sécurité utilisés dans WCF](./feature-details/security-concepts-used-in-wcf.md) et :</span><span class="sxs-lookup"><span data-stu-id="d2a9f-173">For more information about the Kerberos protocol, see [Security Concepts Used in WCF](./feature-details/security-concepts-used-in-wcf.md) and:</span></span>  
  
- [<span data-ttu-id="d2a9f-174">Débogage d'erreurs d'authentification Windows</span><span class="sxs-lookup"><span data-stu-id="d2a9f-174">Debugging Windows Authentication Errors</span></span>](./feature-details/debugging-windows-authentication-errors.md)  
  
- <span data-ttu-id="d2a9f-175">[Inscription de noms de principaux du service Kerberos à l’aide de Http.sys](/previous-versions/sql/sql-server-2008-r2/ms178119(v=sql.105))</span><span class="sxs-lookup"><span data-stu-id="d2a9f-175">[Registering Kerberos Service Principal Names by Using Http.sys](/previous-versions/sql/sql-server-2008-r2/ms178119(v=sql.105))</span></span>  
  
- <span data-ttu-id="d2a9f-176">[Kerberos Explained (Présentation de Kerberos)](/previous-versions/windows/it-pro/windows-2000-server/bb742516(v=technet.10))</span><span class="sxs-lookup"><span data-stu-id="d2a9f-176">[Kerberos Explained](/previous-versions/windows/it-pro/windows-2000-server/bb742516(v=technet.10))</span></span>  
  
<a name="BKMK_q5"></a>
## <a name="when-i-throw-a-faultexceptionexception-where-the-type-is-an-exception-i-always-receive-a-general-faultexception-type-on-the-client-and-not-the-generic-type-whats-happening"></a><span data-ttu-id="d2a9f-177">Lorsque je lève une FaultException \<Exception> où le type est une exception, je reçois toujours un type FaultException général sur le client et non le type générique.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-177">When I throw a FaultException\<Exception> where the type is an exception, I always receive a general FaultException type on the client and not the generic type.</span></span> <span data-ttu-id="d2a9f-178">Que se passe-t-il ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-178">What’s happening?</span></span>  
 <span data-ttu-id="d2a9f-179">Il est fortement recommandé de créer votre propre type de données d'erreur personnalisé et de le déclarer comme le type de détail dans votre contrat d'erreur.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-179">It is highly recommended that you create your own custom error data type and declare that as the detail type in your fault contract.</span></span> <span data-ttu-id="d2a9f-180">La raison est que l'utilisation des types d'exceptions fournis par le système :</span><span class="sxs-lookup"><span data-stu-id="d2a9f-180">The reason is that using system-provided exception types:</span></span>  
  
- <span data-ttu-id="d2a9f-181">crée une dépendance des types qui supprime l'une des plus grandes forces des applications orientées service ;</span><span class="sxs-lookup"><span data-stu-id="d2a9f-181">Creates a type dependency that removes one of the biggest strengths of service-oriented applications.</span></span>  
  
- <span data-ttu-id="d2a9f-182">ne peut pas dépendre d'exceptions sérialisant de manière standard</span><span class="sxs-lookup"><span data-stu-id="d2a9f-182">Cannot depend upon exceptions serializing in a standard way.</span></span> <span data-ttu-id="d2a9f-183">(certaines, comme <xref:System.Security.SecurityException>risquent de pas être du tout sérialisables) ;</span><span class="sxs-lookup"><span data-stu-id="d2a9f-183">Some—like <xref:System.Security.SecurityException>—may not be serializable at all.</span></span>  
  
- <span data-ttu-id="d2a9f-184">expose des informations d'implémentation interne aux clients.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-184">Exposes internal implementation details to clients.</span></span> <span data-ttu-id="d2a9f-185">Pour plus d’informations, consultez [spécification et gestion des erreurs dans les contrats et les services](specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="d2a9f-185">For more information, see [Specifying and Handling Faults in Contracts and Services](specifying-and-handling-faults-in-contracts-and-services.md).</span></span>  
  
 <span data-ttu-id="d2a9f-186">Si vous déboguez une application, toutefois, vous pouvez sérialiser des informations sur les exceptions et les renvoyer au client à l'aide de la classe <xref:System.ServiceModel.Description.ServiceDebugBehavior> .</span><span class="sxs-lookup"><span data-stu-id="d2a9f-186">If you are debugging an application, however, you can serialize exception information and return it to the client by using the <xref:System.ServiceModel.Description.ServiceDebugBehavior> class.</span></span>  
  
<a name="BKMK_q6"></a>
## <a name="it-seems-like-one-way-and-request-reply-operations-return-at-roughly-the-same-speed-when-the-reply-contains-no-data-whats-happening"></a><span data-ttu-id="d2a9f-187">Il semble que les opérations monodirectionnelles et demande-réponse reviennent quasiment à la même vitesse lorsque la réponse ne contient pas de données.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-187">It seems like one-way and request-reply operations return at roughly the same speed when the reply contains no data.</span></span> <span data-ttu-id="d2a9f-188">Que se passe-t-il ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-188">What's happening?</span></span>  
 <span data-ttu-id="d2a9f-189">Spécifier qu'une opération est monodirectionnelle signifie uniquement que le contrat de l'opération accepte un message d'entrée et ne renvoie pas de message de sortie.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-189">Specifying that an operation is one way means only that the operation contract accepts an input message and does not return an output message.</span></span> <span data-ttu-id="d2a9f-190">Dans WCF, tous les appels clients sont retournés lorsque les données sortantes ont été écrites sur le câble ou qu’une exception est levée.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-190">In WCF, all client invocations return when the outbound data has been written to the wire or an exception is thrown.</span></span> <span data-ttu-id="d2a9f-191">Les opérations monodirectionnelles fonctionnent de la même façon et elles peuvent lever si le service ne peut pas être localisé ou bloquer si le service n'est pas préparé à accepter les données du réseau.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-191">One-way operations work the same way, and they can throw if the service cannot be located or block if the service is not prepared to accept the data from the network.</span></span> <span data-ttu-id="d2a9f-192">En général, dans WCF, les appels unidirectionnels sont retournés au client plus rapidement qu’une demande-réponse ; Toutefois, toute condition qui ralentit l’envoi des données sortantes sur le réseau ralentit les opérations monodirectionnelles, ainsi que les opérations de demande-réponse.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-192">Typically in WCF, this results in one-way calls returning to the client more quickly than request-reply; but any condition that slows the sending of the outbound data over the network slows one-way operations as well as request-reply operations.</span></span> <span data-ttu-id="d2a9f-193">Pour plus d’informations, consultez [services unidirectionnels](./feature-details/one-way-services.md) et [accès aux services à l’aide d’un client WCF](./feature-details/accessing-services-using-a-client.md).</span><span class="sxs-lookup"><span data-stu-id="d2a9f-193">For more information, see [One-Way Services](./feature-details/one-way-services.md) and [Accessing Services Using a WCF Client](./feature-details/accessing-services-using-a-client.md).</span></span>  
  
<a name="BKMK_q77"></a>
## <a name="im-using-an-x509-certificate-with-my-service-and-i-get-a-systemsecuritycryptographycryptographicexception-whats-happening"></a><span data-ttu-id="d2a9f-194">J'utilise un certificat X.509 avec mon service et j'obtiens une System.Security.Cryptography.CryptographicException.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-194">I’m using an X.509 certificate with my service and I get a System.Security.Cryptography.CryptographicException.</span></span> <span data-ttu-id="d2a9f-195">Que se passe-t-il ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-195">What’s happening?</span></span>  
 <span data-ttu-id="d2a9f-196">Cela se produit couramment après avoir modifié le compte d'utilisateur sous lequel le processus de travail IIS s'exécute.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-196">This commonly occurs after changing the user account under which the IIS worker process runs.</span></span> <span data-ttu-id="d2a9f-197">Par exemple, dans Windows XP, si vous modifiez le compte d’utilisateur par défaut sous lequel l' Aspnet_wp.exe s’exécute à partir de ASPNET à un compte d’utilisateur personnalisé, vous pouvez voir cette erreur.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-197">For example, in Windows XP, if you change the default user account that the Aspnet_wp.exe runs under from ASPNET to a custom user account, you may see this error.</span></span> <span data-ttu-id="d2a9f-198">Lors de l'utilisation d'une clé privée, le processus qui l'utilise aura besoin des autorisations d'accès au fichier qui stocke cette clé.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-198">If using a private key, the process that uses it will need to have permissions to access the file storing that key.</span></span>  
  
 <span data-ttu-id="d2a9f-199">Le cas échéant, vous devez octroyer des privilèges d'accès en lecture au compte du processus pour le fichier contenant la clé privée.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-199">If this is the case, you must give read access privileges to the process's account for the file containing the private key.</span></span> <span data-ttu-id="d2a9f-200">Par exemple, si le processus de travail IIS s'exécute sous le compte Jacques, vous devrez octroyer à Jacques un accès en lecture au fichier contenant la clé privée.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-200">For example, if the IIS worker process is running under the Bob account, then you will need to give Bob read access to the file containing the private key.</span></span>  
  
 <span data-ttu-id="d2a9f-201">Pour plus d’informations sur la façon d’octroyer au compte d’utilisateur un accès au fichier qui contient la clé privée pour un certificat X. 509 spécifique, consultez [Comment : rendre des certificats x. 509 accessibles à WCF](./feature-details/how-to-make-x-509-certificates-accessible-to-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="d2a9f-201">For more information about how to give the correct user account access to the file that contains the private key for a specific X.509 certificate, see [How to: Make X.509 Certificates Accessible to WCF](./feature-details/how-to-make-x-509-certificates-accessible-to-wcf.md).</span></span>  
  
<a name="BKMK_q88"></a>
## <a name="i-changed-the-first-parameter-of-an-operation-from-uppercase-to-lowercase-now-my-client-throws-an-exception-whats-happening"></a><span data-ttu-id="d2a9f-202">J'ai remplacé les majuscules du premier paramètre d'une opération par des minuscules ; à présent, mon client lève une exception.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-202">I changed the first parameter of an operation from uppercase to lowercase; now my client throws an exception.</span></span> <span data-ttu-id="d2a9f-203">Que se passe-t-il ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-203">What's happening?</span></span>  
 <span data-ttu-id="d2a9f-204">Les valeurs des noms de paramètres dans la signature d’opération font partie du contrat et respectent la casse.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-204">The values of the parameter names in the operation signature are part of the contract and are case-sensitive.</span></span> <span data-ttu-id="d2a9f-205">Utilisez l'attribut <xref:System.ServiceModel.MessageParameterAttribute?displayProperty=nameWithType> lorsque vous devez distinguer le nom du paramètre local et les métadonnées qui décrivent l'opération pour les applications clientes.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-205">Use the <xref:System.ServiceModel.MessageParameterAttribute?displayProperty=nameWithType> attribute when you need to distinguish between the local parameter name and the metadata that describes the operation for client applications.</span></span>  
  
<a name="BKMK_q99"></a>
## <a name="im-using-one-of-my-tracing-tools-and-i-get-an-endpointnotfoundexception-whats-happening"></a><span data-ttu-id="d2a9f-206">J'utilise l'un de mes outils de suivi et j'obtiens une EndpointNotFoundException.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-206">I’m using one of my tracing tools and I get an EndpointNotFoundException.</span></span> <span data-ttu-id="d2a9f-207">Que se passe-t-il ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-207">What’s happening?</span></span>  
 <span data-ttu-id="d2a9f-208">Si vous utilisez un outil de suivi qui n’est pas le mécanisme de suivi WCF fourni par le système et que vous recevez un <xref:System.ServiceModel.EndpointNotFoundException> qui indique qu’il y a une incompatibilité de filtre d’adresse, vous devez utiliser la <xref:System.ServiceModel.Description.ClientViaBehavior> classe pour diriger les messages vers l’utilitaire de suivi et faire en sorte que l’utilitaire redirige ces messages vers l’adresse du service.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-208">If you are using a tracing tool that is not the system-provided WCF tracing mechanism and you receive an <xref:System.ServiceModel.EndpointNotFoundException> that indicates that there was an address filter mismatch, you need to use the <xref:System.ServiceModel.Description.ClientViaBehavior> class to direct the messages to the tracing utility and have the utility redirect those messages to the service address.</span></span> <span data-ttu-id="d2a9f-209">La classe <xref:System.ServiceModel.Description.ClientViaBehavior> altère l'en-tête d'adressage `Via` pour spécifier l'adresse réseau suivante séparément du dernier destinataire, indiqué par l'en-tête d'adressage `To` .</span><span class="sxs-lookup"><span data-stu-id="d2a9f-209">The <xref:System.ServiceModel.Description.ClientViaBehavior> class alters the `Via` addressing header to specify the next network address separately from the ultimate receiver, indicated by the `To` addressing header.</span></span> <span data-ttu-id="d2a9f-210">Ce faisant, en revanche, ne modifiez pas l'adresse du point de terminaison, utilisée pour établir la valeur `To` .</span><span class="sxs-lookup"><span data-stu-id="d2a9f-210">When doing this, however, do not change the endpoint address, which is used to establish the `To` value.</span></span>  
  
 <span data-ttu-id="d2a9f-211">L'exemple de code suivant présente un exemple de fichier de configuration d'un client.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-211">The following code example shows an example client configuration file.</span></span>  
  
```xml
<endpoint
  address="http://localhost:8000/MyServer/"  
  binding="wsHttpBinding"  
  bindingConfiguration="WSHttpBinding_IMyContract"  
  behaviorConfiguration="MyClient"
  contract="IMyContract"
  name="WSHttpBinding_IMyContract">  
</endpoint>  
<behaviors>  
  <endpointBehaviors>  
    <behavior name="MyClient">  
      <clientVia viaUri="http://localhost:8001/MyServer/"/>  
    </behavior>  
  </endpointBehaviors>  
</behaviors>  
```  
  
<a name="BKMK_q10"></a>
## <a name="what-is-the-base-address-how-does-it-relate-to-an-endpoint-address"></a><span data-ttu-id="d2a9f-212">Qu'est-ce que l'adresse de base ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-212">What is the base address?</span></span> <span data-ttu-id="d2a9f-213">Comment est-elle liée à une adresse de point de terminaison ?</span><span class="sxs-lookup"><span data-stu-id="d2a9f-213">How does it relate to an endpoint address?</span></span>  
 <span data-ttu-id="d2a9f-214">Une adresse de base est l'adresse racine d'une classe <xref:System.ServiceModel.ServiceHost> .</span><span class="sxs-lookup"><span data-stu-id="d2a9f-214">A base address is the root address for a <xref:System.ServiceModel.ServiceHost> class.</span></span> <span data-ttu-id="d2a9f-215">Par défaut, si vous ajoutez une classe <xref:System.ServiceModel.Description.ServiceMetadataBehavior> dans votre configuration de service, tous les points de terminaison WSDL (Web Services Description Language) que l'hôte publie sont récupérés à partir de l'adresse de base HTTP, plus toute adresse relative fournie au comportement de métadonnées, plus « ?wsdl ».</span><span class="sxs-lookup"><span data-stu-id="d2a9f-215">By default, if you add a <xref:System.ServiceModel.Description.ServiceMetadataBehavior> class into your service configuration, the Web Services Description Language (WSDL) for all endpoints the host publishes are retrieved from the HTTP base address, plus any relative address provided to the metadata behavior, plus "?wsdl".</span></span> <span data-ttu-id="d2a9f-216">Si vous êtes familiarisé avec ASP.NET et IIS, l’adresse de base est équivalente au répertoire virtuel.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-216">If you are familiar with ASP.NET and IIS, the base address is equivalent to the virtual directory.</span></span>  
  
## <a name="sharing-a-port-between-a-service-endpoint-and-a-mex-endpoint-using-the-nettcpbinding"></a><span data-ttu-id="d2a9f-217">Partage d'un port entre un point de terminaison de service et un point de terminaison mex à l'aide de NetTcpBinding</span><span class="sxs-lookup"><span data-stu-id="d2a9f-217">Sharing a port between a service endpoint and a mex endpoint using the NetTcpBinding</span></span>  
 <span data-ttu-id="d2a9f-218">Si vous spécifiez l'adresse de base d'un service en tant que net.tcp://MyServer:8080/MyService et ajoutez les points de terminaison suivants :</span><span class="sxs-lookup"><span data-stu-id="d2a9f-218">If you specify the base address for a service as net.tcp://MyServer:8080/MyService and add the following endpoints:</span></span>  
  
```xml  
<services>  
  <service name="Microsoft.Samples.NetTcp.CalculatorService">  
    <endpoint address="calcsvc" binding ="netTcpBinding" contract="Microsoft.Samples.NetTcp.ICalculator"/>  
    <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange" />  
  </service>  
</services>  
```  
  
 <span data-ttu-id="d2a9f-219">Et si vous modifiez un des paramètres NetTcpBinding comme illustré dans l'extrait de configuration suivant :</span><span class="sxs-lookup"><span data-stu-id="d2a9f-219">And if you modify one of the NetTcpBinding settings as shown in the following configuration snippet:</span></span>  
  
```xml  
<bindings>  
  <netTcpBinding>  
    <binding closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="11" maxReceivedMessageSize="65536">  
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>  
      <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false"/>  
      <security mode="Transport">  
        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign"/>  
      </security>  
    </binding>  
  </netTcpBinding>  
</bindings>  
```  
  
 <span data-ttu-id="d2a9f-220">Un message d'erreur se présentant comme suit s'affiche : Exception non gérée : System.ServiceModel.AddressAlreadyInUseException : Il existe déjà un écouteur sur le point de terminaison IP 0.0.0.0:9000 Vous pouvez contourner cette erreur en spécifiant une URL complète avec un autre port pour le point de terminaison MEX comme illustré dans l'extrait de configuration suivant :</span><span class="sxs-lookup"><span data-stu-id="d2a9f-220">You will see an error like the following: Unhandled Exception: System.ServiceModel.AddressAlreadyInUseException: There is already a listener on IP endpoint 0.0.0.0:9000 You can work around this error by specifying a fully qualified URL with a different port for the MEX endpoint as shown in the following configuration snippet:</span></span>  
  
```xml
<services>  
  <service name="Microsoft.Samples.NetTcp.CalculatorService">  
    <endpoint address="calcsvc" binding ="netTcpBinding" contract="Microsoft.Samples.NetTcp.ICalculator"/>  
    <endpoint address="net.tcp://localhost:9001/servicemodelsamples/mex" binding="mexTcpBinding" contract="IMetadataExchange" />  
  </service>  
</services>  
```  
  
<a name="BK_MK99"></a>
## <a name="when-calling-a-wcf-web-http-application-from-a-wcf-soap-application-the-service-returns-the-following-error-405-method-not-allowed"></a><span data-ttu-id="d2a9f-221">Lors de l'appel d'une application HTTP Web WCF à partir d'une application SOAP WCF, le service retourne l'erreur suivante : 405 Méthode non autorisée</span><span class="sxs-lookup"><span data-stu-id="d2a9f-221">When calling a WCF Web HTTP application from a WCF SOAP application the service returns the following error: 405 Method Not Allowed</span></span>  
 <span data-ttu-id="d2a9f-222">L’appel d’une application HTTP Web WCF (un service qui utilise <xref:System.ServiceModel.WebHttpBinding> et <xref:System.ServiceModel.Description.WebHttpBehavior> ) à partir d’un service WCF peut générer l’exception suivante : ``Unhandled Exception: System.ServiceModel.FaultException`1[System.ServiceModel.ExceptionDetail]: The remote server returned an unexpected response: (405) Method Not Allowed.`` cette exception se produit parce que WCF remplace le sortant <xref:System.ServiceModel.OperationContext> par le entrant <xref:System.ServiceModel.OperationContext> .</span><span class="sxs-lookup"><span data-stu-id="d2a9f-222">Calling a WCF Web HTTP application (a service that uses the <xref:System.ServiceModel.WebHttpBinding> and <xref:System.ServiceModel.Description.WebHttpBehavior>) from a WCF service may generate the following exception: ``Unhandled Exception: System.ServiceModel.FaultException`1[System.ServiceModel.ExceptionDetail]: The remote server returned an unexpected response: (405) Method Not Allowed.`` This exception occurs because WCF overwrites the outgoing <xref:System.ServiceModel.OperationContext> with the incoming <xref:System.ServiceModel.OperationContext>.</span></span> <span data-ttu-id="d2a9f-223">Pour résoudre ce problème, créez un <xref:System.ServiceModel.OperationContextScope> dans l’opération de service http Web WCF.</span><span class="sxs-lookup"><span data-stu-id="d2a9f-223">To solve this problem, create an <xref:System.ServiceModel.OperationContextScope> within the WCF Web HTTP service operation.</span></span> <span data-ttu-id="d2a9f-224">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="d2a9f-224">For example:</span></span>  
  
```csharp
public string Echo(string input)  
{  
    using (new OperationContextScope(this.InnerChannel))  
    {  
        return base.Channel.Echo(input);  
    }  
}  
```  
  
## <a name="see-also"></a><span data-ttu-id="d2a9f-225">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d2a9f-225">See also</span></span>

- [<span data-ttu-id="d2a9f-226">Débogage d'erreurs d'authentification Windows</span><span class="sxs-lookup"><span data-stu-id="d2a9f-226">Debugging Windows Authentication Errors</span></span>](./feature-details/debugging-windows-authentication-errors.md)
