---
title: 'Comment : récupérer des métadonnées et implémenter un service conforme'
ms.date: 03/30/2017
ms.assetid: f6f3a2b9-c8aa-4b0b-832c-ec2927bf1163
ms.openlocfilehash: 0a13d504b1c7c38ec13fee58c36913a75119271b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79184857"
---
# <a name="how-to-retrieve-metadata-and-implement-a-compliant-service"></a><span data-ttu-id="2b695-102">Comment : récupérer des métadonnées et implémenter un service conforme</span><span class="sxs-lookup"><span data-stu-id="2b695-102">How to: Retrieve Metadata and Implement a Compliant Service</span></span>
<span data-ttu-id="2b695-103">Souvent, la personne qui conçoit et implémente des services n'est pas la même.</span><span class="sxs-lookup"><span data-stu-id="2b695-103">Often, the same person does not design and implement services.</span></span> <span data-ttu-id="2b695-104">Dans les environnements où l'interaction d'applications est importante, les contrats peuvent être conçus ou décrits en WSDL (Web Services Description Language) et un développeur doit implémenter un service qui se conforme au contrat fourni.</span><span class="sxs-lookup"><span data-stu-id="2b695-104">In environments where interoperating applications are important, contracts can be designed or described in Web Services Description Language (WSDL) and a developer must implement a service that complies with the provided contract.</span></span> <span data-ttu-id="2b695-105">Vous pouvez également migrer un service existant vers Windows Communication Foundation (WCF) mais préserver le format de fil.</span><span class="sxs-lookup"><span data-stu-id="2b695-105">You may also want to migrate an existing service to Windows Communication Foundation (WCF) but preserve the wire format.</span></span> <span data-ttu-id="2b695-106">De plus, les contrats duplex requièrent que les appelants implémentent également un contrat de rappel.</span><span class="sxs-lookup"><span data-stu-id="2b695-106">In addition, duplex contracts require callers to implement a callback contract as well.</span></span>  
  
 <span data-ttu-id="2b695-107">Dans ces cas, vous devez utiliser [l’outil utilitaire De métadonnées De ServiceModel (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) (ou un outil équivalent) pour générer une interface de contrat de service dans un langage géré que vous pouvez mettre en œuvre pour répondre aux exigences du contrat.</span><span class="sxs-lookup"><span data-stu-id="2b695-107">In these cases, you must use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) (or an equivalent tool) to generate a service contract interface in a managed language that you can implement to fulfill the requirements of the contract.</span></span> <span data-ttu-id="2b695-108">En règle générale, [l’outil utilitaire De métadonnées de ServiceModel (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) est utilisé pour acquérir un contrat de service qui est utilisé avec une usine de canal ou un type de client WCF ainsi qu’avec un fichier de configuration client qui définit la liaison et l’adresse correctes.</span><span class="sxs-lookup"><span data-stu-id="2b695-108">Typically the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) is used to acquire a service contract that is used with a channel factory or a WCF client type as well as with a client configuration file that sets up the correct binding and address.</span></span> <span data-ttu-id="2b695-109">Pour utiliser le fichier de configuration généré, vous devez le remplacer par un fichier de configuration de service.</span><span class="sxs-lookup"><span data-stu-id="2b695-109">To use the generated configuration file, you must change it into a service configuration file.</span></span> <span data-ttu-id="2b695-110">Vous devrez peut-être aussi modifier le contrat de service.</span><span class="sxs-lookup"><span data-stu-id="2b695-110">You may also need to modify the service contract.</span></span>  
  
### <a name="to-retrieve-data-and-implement-a-compliant-service"></a><span data-ttu-id="2b695-111">Pour récupérer des données et implémenter un service conforme</span><span class="sxs-lookup"><span data-stu-id="2b695-111">To retrieve data and implement a compliant service</span></span>  
  
1. <span data-ttu-id="2b695-112">Utilisez [l’outil utilitaire De métadonnées de ServiceModel (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) contre des fichiers de métadonnées ou un point de terminaison de métadonnées pour générer un fichier de code.</span><span class="sxs-lookup"><span data-stu-id="2b695-112">Use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against metadata files or a metadata endpoint to generate a code file.</span></span>  
  
2. <span data-ttu-id="2b695-113">Recherchez la portion du fichier de code de sortie qui contient l'interface souhaitée (s'il y en a plusieurs) marquée avec l'attribut <xref:System.ServiceModel.ServiceContractAttribute?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2b695-113">Search for the portion of the output code file that contains the interface of interest (in case there is more than one) that is marked with the <xref:System.ServiceModel.ServiceContractAttribute?displayProperty=nameWithType> attribute.</span></span> <span data-ttu-id="2b695-114">L’exemple de code suivant montre les deux interfaces générées par [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="2b695-114">The following code example shows the two interfaces generated by [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="2b695-115">La première (`ISampleService`) est l'interface de contrat de service que vous implémentez pour créer un service conforme.</span><span class="sxs-lookup"><span data-stu-id="2b695-115">The first (`ISampleService`) is the service contract interface that you implement to create a compliant service.</span></span> <span data-ttu-id="2b695-116">La seconde (`ISampleServiceChannel`) est une interface d'assistance destinée au client qui étend à la fois l'interface de contrat de service et <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType>, et qui est utilisée dans une application cliente.</span><span class="sxs-lookup"><span data-stu-id="2b695-116">The second (`ISampleServiceChannel`) is a helper interface for client use that extends both the service contract interface and <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> and is for use in a client application.</span></span>  
  
     [!code-csharp[ClientProxyCodeSample#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/proxycode.cs#2)]  
  
3. <span data-ttu-id="2b695-117">Si WSDL ne spécifie pas d'action de réponse pour toutes les opérations, les contrats d'opération générés peuvent avoir la propriété <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> définie avec le caractère générique (\*).</span><span class="sxs-lookup"><span data-stu-id="2b695-117">If the WSDL does not specify a reply action for all of the operations, the generated operation contracts may have the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property set to the wildcard character (\*).</span></span> <span data-ttu-id="2b695-118">Supprimez ce paramètre de propriété.</span><span class="sxs-lookup"><span data-stu-id="2b695-118">Remove this property setting.</span></span> <span data-ttu-id="2b695-119">Sinon, lorsque vous implémentez les métadonnées de contrat de service, celles-ci ne peuvent pas être exportées pour ces opérations.</span><span class="sxs-lookup"><span data-stu-id="2b695-119">Otherwise, when you implement the service contract metadata, the metadata cannot be exported for those operations.</span></span>  
  
4. <span data-ttu-id="2b695-120">Implémentez l'interface sur une classe et hébergez le service.</span><span class="sxs-lookup"><span data-stu-id="2b695-120">Implement the interface on a class and host the service.</span></span> <span data-ttu-id="2b695-121">Par exemple, voir [comment : Mettre en œuvre un contrat de service,](../../../../docs/framework/wcf/how-to-implement-a-wcf-contract.md)ou voir une mise en œuvre simple ci-dessous dans la section Exemple.</span><span class="sxs-lookup"><span data-stu-id="2b695-121">For an example, see [How to: Implement a Service Contract](../../../../docs/framework/wcf/how-to-implement-a-wcf-contract.md), or see a simple implementation below in the Example section.</span></span>  
  
5. <span data-ttu-id="2b695-122">Dans le fichier de configuration client généré par [l’outil utilitaire De métadonnées (Svcutil.exe) de ServiceModel,](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) modifiez la [ \<](../../../../docs/framework/configure-apps/file-schema/wcf/client.md) section de configuration>client en une [ \<](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) section de configuration>services.</span><span class="sxs-lookup"><span data-stu-id="2b695-122">In the client configuration file that the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) generates, change the [\<client>](../../../../docs/framework/configure-apps/file-schema/wcf/client.md) configuration section to a [\<services>](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) configuration section.</span></span> <span data-ttu-id="2b695-123">(Pour obtenir un exemple d'un fichier de configuration d'application cliente généré, consultez la section « Exemple » suivante.)</span><span class="sxs-lookup"><span data-stu-id="2b695-123">(For an example of a generated client application configuration file, see the following "Example" section.)</span></span>  
  
6. <span data-ttu-id="2b695-124">Dans [ \<](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) la section>configuration des `name` services, créez un attribut dans la [ \<](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) section de configuration>des services pour votre implémentation de service.</span><span class="sxs-lookup"><span data-stu-id="2b695-124">Within the [\<services>](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) configuration section, create a `name` attribute in the [\<services>](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) configuration section for your service implementation.</span></span>  
  
7. <span data-ttu-id="2b695-125">Affectez à l'attribut `name` de service le nom de configuration pour votre implémentation de service.</span><span class="sxs-lookup"><span data-stu-id="2b695-125">Set the service `name` attribute to the configuration name for your service implementation.</span></span>  
  
8. <span data-ttu-id="2b695-126">Ajoutez les éléments de configuration de point de terminaison qui utilisent le contrat de service implémenté à la section de configuration du service.</span><span class="sxs-lookup"><span data-stu-id="2b695-126">Add the endpoint configuration elements that use the implemented service contract to the service configuration section.</span></span>  
  
## <a name="example"></a><span data-ttu-id="2b695-127"> Exemple</span><span class="sxs-lookup"><span data-stu-id="2b695-127">Example</span></span>  
 <span data-ttu-id="2b695-128">L’exemple de code suivant montre la majorité d’un fichier de code généré par l’exécution [de l’outil utilitaire De métadonnées De ServiceModel (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) contre les fichiers de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="2b695-128">The following code example shows the majority of a code file generated by running the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against metadata files.</span></span>  
  
 <span data-ttu-id="2b695-129">L'exemple de code suivant montre :</span><span class="sxs-lookup"><span data-stu-id="2b695-129">The following code shows:</span></span>  
  
- <span data-ttu-id="2b695-130">L’interface de contrat de service qui, lorsqu’elle est implémentée, se conforme aux exigences de contrat (`ISampleService`).</span><span class="sxs-lookup"><span data-stu-id="2b695-130">The service contract interface that, when implemented, complies with the contract requirements (`ISampleService`).</span></span>  
  
- <span data-ttu-id="2b695-131">L'interface d'assistance destinée au client qui étend à la fois l'interface de contrat de service et <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType>, et doit être utilisée dans une application cliente `ISampleServiceChannel`.</span><span class="sxs-lookup"><span data-stu-id="2b695-131">The helper interface for client use that extends both the service contract interface and <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> and is for use in a client application (`ISampleServiceChannel`).</span></span>  
  
- <span data-ttu-id="2b695-132">La classe d'assistance qui étend <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType> et doit être utilisée dans une application cliente (`SampleServiceClient`).</span><span class="sxs-lookup"><span data-stu-id="2b695-132">The helper class that extends <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType> and is for use in a client application (`SampleServiceClient`).</span></span>  
  
- <span data-ttu-id="2b695-133">Le fichier de configuration généré à partir du service.</span><span class="sxs-lookup"><span data-stu-id="2b695-133">The configuration file generated from the service.</span></span>  
  
- <span data-ttu-id="2b695-134">L'implémentation d'un service `ISampleService` simple.</span><span class="sxs-lookup"><span data-stu-id="2b695-134">A simple `ISampleService` service implementation.</span></span>  
  
- <span data-ttu-id="2b695-135">Conversion du fichier de configuration côté client vers une version côté service.</span><span class="sxs-lookup"><span data-stu-id="2b695-135">A conversion of the client-side configuration file to a service-side version.</span></span>  
  
[!code-csharp[ClientProxyCodeSample#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/proxycode.cs#1)]

[!code-xml[ClientProxyCodeSample#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/client.exe.config#10)]

[!code-csharp[ClientProxyCodeSample#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/hostapplication.cs#5)]

[!code-xml[ClientProxyCodeSample#20](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/hostapplication.exe.config#20)]
  
## <a name="see-also"></a><span data-ttu-id="2b695-136">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="2b695-136">See also</span></span>

- [<span data-ttu-id="2b695-137">Outil Service Model Metadata Tool (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="2b695-137">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)
