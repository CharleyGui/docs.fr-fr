---
title: Valeurs par défaut des membres de données
description: Découvrez comment omettre un membre de données des données sérialisées lorsqu’il a une valeur .NET Framework par défaut. WCF peut améliorer les performances en ne sérialisant pas de valeur par défaut.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- data members [WCF], default values
- data members [WCF]
ms.assetid: 53a3b505-4b27-444b-b079-0eb84a97cfd8
ms.openlocfilehash: 98b19fdabebeb8a1d43a66a192cb523b82ada618
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96261993"
---
# <a name="data-member-default-values"></a><span data-ttu-id="2fe64-104">Valeurs par défaut des membres de données</span><span class="sxs-lookup"><span data-stu-id="2fe64-104">Data Member Default Values</span></span>

<span data-ttu-id="2fe64-105">Dans le .NET Framework, les types ont un concept de *valeurs par défaut*.</span><span class="sxs-lookup"><span data-stu-id="2fe64-105">In the .NET Framework, types have a concept of *default values*.</span></span> <span data-ttu-id="2fe64-106">Ainsi, la valeur par défaut d'un type référence est `null`, et celle d'un type entier est zéro.</span><span class="sxs-lookup"><span data-stu-id="2fe64-106">For example, for any reference type the default value is `null`, and for an integer type it is zero.</span></span> <span data-ttu-id="2fe64-107">Il est parfois préférable d'omettre un membre de données des données sérialisées lorsqu'il est défini à sa valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="2fe64-107">It is occasionally desirable to omit a data member from serialized data when it is set to its default value.</span></span> <span data-ttu-id="2fe64-108">Le membre ayant une valeur par défaut, il n'est pas nécessaire de sérialiser une valeur réelle ; cela présente un avantage en termes de performance.</span><span class="sxs-lookup"><span data-stu-id="2fe64-108">Because the member has a default value, an actual value need not be serialized; this has a performance advantage.</span></span>  
  
 <span data-ttu-id="2fe64-109">Pour omettre un membre des données sérialisées, affectez <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> à la propriété <xref:System.Runtime.Serialization.DataMemberAttribute> de l'attribut `false` (la valeur par défaut est `true`).</span><span class="sxs-lookup"><span data-stu-id="2fe64-109">To omit a member from serialized data, set the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute to `false` (the default is `true`).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="2fe64-110">Vous devez uniquement affecter la valeur <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> à la propriété `false` en cas de besoin spécifique, par exemple à des fins d'interopérabilité ou pour réduire la taille des données.</span><span class="sxs-lookup"><span data-stu-id="2fe64-110">You should set the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property to `false` if there is a specific need to do so, such as for interoperability or data size reduction.</span></span>  
  
## <a name="example"></a><span data-ttu-id="2fe64-111"> Exemple</span><span class="sxs-lookup"><span data-stu-id="2fe64-111">Example</span></span>  

 <span data-ttu-id="2fe64-112">Le code suivant a plusieurs membres avec <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> défini à `false`.</span><span class="sxs-lookup"><span data-stu-id="2fe64-112">The following code has several members with the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> set to `false`.</span></span>  
  
 [!code-csharp[DataMemberAttribute#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/datamemberattribute/cs/overview.cs#4)]
 [!code-vb[DataMemberAttribute#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/datamemberattribute/vb/overview.vb#4)]  
  
 <span data-ttu-id="2fe64-113">Si une instance de cette classe est sérialisée, le résultat est le suivant : `employeeName` et `employeeID` sont sérialisés.</span><span class="sxs-lookup"><span data-stu-id="2fe64-113">If an instance of this class is serialized, the result is as follows: `employeeName` and `employeeID` is serialized.</span></span> <span data-ttu-id="2fe64-114">La valeur null pour `employeeName` et la valeur zéro pour `employeeID` font explicitement partie des données sérialisées.</span><span class="sxs-lookup"><span data-stu-id="2fe64-114">The null value for `employeeName` and the zero value for `employeeID` is explicitly part of the serialized data.</span></span> <span data-ttu-id="2fe64-115">Toutefois, les membres `position`, `salary` et `bonus` ne sont pas sérialisées.</span><span class="sxs-lookup"><span data-stu-id="2fe64-115">However, the `position`, `salary`, and `bonus` members are not serialized.</span></span> <span data-ttu-id="2fe64-116">Enfin, `targetSalary` est sérialisé comme d'habitude, même si la propriété <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> a la valeur `false`, car 57800 ne correspond pas à la valeur .NET par défaut pour un entier, qui est zéro.</span><span class="sxs-lookup"><span data-stu-id="2fe64-116">Finally, `targetSalary` is serialized as usual, even though the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property is set to `false`, because 57800 does not match the .NET default value for an integer, which is zero.</span></span>  
  
### <a name="xml-representation"></a><span data-ttu-id="2fe64-117">Représentation XML</span><span class="sxs-lookup"><span data-stu-id="2fe64-117">XML Representation</span></span>  

 <span data-ttu-id="2fe64-118">Si l'exemple précédent est sérialisé en XML, la représentation est similaire à la suivante.</span><span class="sxs-lookup"><span data-stu-id="2fe64-118">If the previous example is serialized to XML, the representation is similar to the following.</span></span>  
  
```xml  
<Employee>  
   <employeeName xsi:nil="true" />  
   <employeeID>0</employeeID>  
<targetSalary>57800</targetSalary>  
</Employee>  
```  
  
 <span data-ttu-id="2fe64-119">L’attribut `xsi:nil` est un attribut spécial dans l’espace de noms de l’instance WC3 (World Wide Web Consortium ) XML Schema qui offre un moyen interopérable pour représenter explicitement une valeur null.</span><span class="sxs-lookup"><span data-stu-id="2fe64-119">The `xsi:nil` attribute is a special attribute in the World Wide Web Consortium (W3C) XML Schema instance namespace that provides an interoperable way to explicitly represent a null value.</span></span> <span data-ttu-id="2fe64-120">Notez que le XML ne contient aucune information sur le poste, le salaire et les primes des membres de données.</span><span class="sxs-lookup"><span data-stu-id="2fe64-120">Note that there is no information at all in the XML about position, salary, and bonus data members.</span></span> <span data-ttu-id="2fe64-121">L'extrémité de réception peut les interpréter comme `null`, zéro et `null`, respectivement.</span><span class="sxs-lookup"><span data-stu-id="2fe64-121">The receiving end can interpret these as `null`, zero, and `null`, respectively.</span></span> <span data-ttu-id="2fe64-122">Il n'y a aucune garantie qu'un désérialiseur tiers puisse effectuer correctement l'interprétation ; c'est pourquoi ce modèle n'est pas recommandé.</span><span class="sxs-lookup"><span data-stu-id="2fe64-122">There is no guarantee that a third-party deserializer can make the correct interpretation, which is why this pattern is not recommended.</span></span> <span data-ttu-id="2fe64-123">La classe <xref:System.Runtime.Serialization.DataContractSerializer> sélectionne systématiquement l'interprétation correcte pour les valeurs manquantes.</span><span class="sxs-lookup"><span data-stu-id="2fe64-123">The <xref:System.Runtime.Serialization.DataContractSerializer> class always selects the correct interpretation for missing values.</span></span>  
  
### <a name="interaction-with-isrequired"></a><span data-ttu-id="2fe64-124">Interaction avec IsRequired</span><span class="sxs-lookup"><span data-stu-id="2fe64-124">Interaction with IsRequired</span></span>  

 <span data-ttu-id="2fe64-125">Comme indiqué dans contrôle de [version des contrats de données](data-contract-versioning.md), l' <xref:System.Runtime.Serialization.DataMemberAttribute> attribut a une <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> propriété (la valeur par défaut est `false` ).</span><span class="sxs-lookup"><span data-stu-id="2fe64-125">As discussed in [Data Contract Versioning](data-contract-versioning.md), the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute has an <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property (the default is `false`).</span></span> <span data-ttu-id="2fe64-126">La propriété indique si un membre de données spécifique doit ou non être présent dans les données sérialisées lorsqu'il est désérialisé.</span><span class="sxs-lookup"><span data-stu-id="2fe64-126">The property indicates whether a given data member must be present in the serialized data when it is being deserialized.</span></span> <span data-ttu-id="2fe64-127">Si `IsRequired` a la valeur `true` (ce qui indique qu'une valeur doit être présente) et que <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> a la valeur `false` (ce qui indique que la valeur ne doit pas être présente si la valeur indiquée est celle par défaut), les valeurs par défaut de ce membre de données ne peuvent pas être sérialisées car les résultats seraient contradictoires.</span><span class="sxs-lookup"><span data-stu-id="2fe64-127">If `IsRequired` is set to `true`, (which indicates that a value must be present) and <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> is set to `false` (indicating that the value must not be present if it is set to its default value), default values for this data member cannot be serialized because the results would be contradictory.</span></span> <span data-ttu-id="2fe64-128">Si un membre de données de ce type à pour valeur sa valeur par défaut (généralement `null` ou zéro) et qu'une sérialisation est tentée, une exception <xref:System.Runtime.Serialization.SerializationException> est levée.</span><span class="sxs-lookup"><span data-stu-id="2fe64-128">If such a data member is set to its default value (usually `null` or zero) and a serialization is attempted, a <xref:System.Runtime.Serialization.SerializationException> is thrown.</span></span>  
  
### <a name="schema-representation"></a><span data-ttu-id="2fe64-129">Représentation de schéma</span><span class="sxs-lookup"><span data-stu-id="2fe64-129">Schema Representation</span></span>  

 <span data-ttu-id="2fe64-130">Les détails de la représentation du schéma en langage XSD (XML Schema Definition) des membres de données lorsque la `EmitDefaultValue` propriété est définie sur `false` sont décrits dans [Référence du schéma de contrat de données](data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="2fe64-130">The details of the XML Schema definition language (XSD) schema representation of data members when the `EmitDefaultValue` property is set to `false` are discussed in [Data Contract Schema Reference](data-contract-schema-reference.md).</span></span> <span data-ttu-id="2fe64-131">Toutefois, en voici une brève vue d'ensemble :</span><span class="sxs-lookup"><span data-stu-id="2fe64-131">However, the following is a brief overview:</span></span>  
  
- <span data-ttu-id="2fe64-132">Lorsque <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> a la valeur `false` , il est représenté dans le schéma sous la forme d’une annotation spécifique à Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="2fe64-132">When the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> is set to `false`, it is represented in the schema as an annotation specific to Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="2fe64-133">Il n'existe pas de moyen interopérable pour représenter ces informations.</span><span class="sxs-lookup"><span data-stu-id="2fe64-133">There is no interoperable way to represent this information.</span></span> <span data-ttu-id="2fe64-134">En particulier, l'attribut "default" dans le schéma n'est pas utilisé à cette fin, l'attribut `minOccurs` est uniquement affecté par le paramètre <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>, et l'attribut `nillable` est uniquement affecté par le type du membre de données.</span><span class="sxs-lookup"><span data-stu-id="2fe64-134">In particular, the "default" attribute in the schema is not used for this purpose, the `minOccurs` attribute is affected only by the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> setting, and the `nillable` attribute is affected only by the type of the data member.</span></span>  
  
- <span data-ttu-id="2fe64-135">La valeur par défaut réelle à utiliser n'est pas présente dans le schéma.</span><span class="sxs-lookup"><span data-stu-id="2fe64-135">The actual default value to use is not present in the schema.</span></span> <span data-ttu-id="2fe64-136">C'est au point de terminaison de réception d'interpréter correctement un élément manquant.</span><span class="sxs-lookup"><span data-stu-id="2fe64-136">It is up to the receiving endpoint to appropriately interpret a missing element.</span></span>  
  
 <span data-ttu-id="2fe64-137">Dans le cas d’une importation de schéma, la <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> propriété est automatiquement définie à `false` chaque fois que l’annotation WCF spécifique mentionnée précédemment est détectée.</span><span class="sxs-lookup"><span data-stu-id="2fe64-137">On schema import, the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property is automatically set to `false` whenever the WCF-specific annotation mentioned previously is detected.</span></span> <span data-ttu-id="2fe64-138">Elle a également la valeur `false` pour les types référence dont la `nillable` propriété a la valeur `false` pour prendre en charge des scénarios d’interopérabilité spécifiques qui se produisent généralement lors de l’utilisation de services Web ASP.net.</span><span class="sxs-lookup"><span data-stu-id="2fe64-138">It is also set to `false` for reference types that have the `nillable` property set to `false` to support specific interoperability scenarios that commonly occur when consuming ASP.NET Web services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2fe64-139">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="2fe64-139">See also</span></span>

- <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute>
