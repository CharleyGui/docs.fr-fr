---
title: Sélection d'un encodeur de message
ms.date: 03/30/2017
ms.assetid: 2204d82d-d962-4922-a79e-c9a231604f19
ms.openlocfilehash: fd5bc2270f2e4095ef6ad2b1d89af3560fb8d312
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90559369"
---
# <a name="choose-a-message-encoder"></a><span data-ttu-id="040e0-102">Choisir un encodeur de message</span><span class="sxs-lookup"><span data-stu-id="040e0-102">Choose a Message Encoder</span></span>

<span data-ttu-id="040e0-103">Cet article décrit les critères permettant de choisir parmi les encodeurs de message inclus dans Windows Communication Foundation (WCF) : binaire, texte et MTOM (Message Transmission Optimization Mechanism).</span><span class="sxs-lookup"><span data-stu-id="040e0-103">This article discusses criteria for choosing among the message encoders that are included in Windows Communication Foundation (WCF): binary, text, and Message Transmission Optimization Mechanism (MTOM).</span></span>  
  
 <span data-ttu-id="040e0-104">Dans WCF, vous spécifiez comment transférer des données sur un réseau entre des points de terminaison au moyen d’une *liaison*, qui est constituée d’une séquence d' *éléments de liaison*.</span><span class="sxs-lookup"><span data-stu-id="040e0-104">In WCF, you specify how to transfer data across a network between endpoints by means of a *binding*, which is made up of a sequence of *binding elements*.</span></span> <span data-ttu-id="040e0-105">Un encodeur de message est représenté par un élément de liaison d’encodage de message dans la pile de liaison.</span><span class="sxs-lookup"><span data-stu-id="040e0-105">A message encoder is represented by a message encoding binding element in the binding stack.</span></span> <span data-ttu-id="040e0-106">Une liaison inclut des éléments de liaison de protocole facultatifs, tels qu’un élément de liaison de sécurité ou un élément de liaison de messagerie fiable, un élément de liaison d’encodage de message requis, et un élément de liaison de transport requis.</span><span class="sxs-lookup"><span data-stu-id="040e0-106">A binding includes optional protocol binding elements, such as a security binding element or reliable messaging binding element, a required message encoding binding element, and a required transport binding element.</span></span>  
  
 <span data-ttu-id="040e0-107">L'élément de liaison d'encodage de message se trouve au-dessous des éléments de liaison de protocole facultatifs et au-dessus de l'élément de liaison de transport requis.</span><span class="sxs-lookup"><span data-stu-id="040e0-107">The message encoding binding element sits below the optional protocol binding elements and above the required transport binding element.</span></span> <span data-ttu-id="040e0-108">Sur le côté sortant, un encodeur de message sérialise le <xref:System.ServiceModel.Channels.Message> sortant et le transmet au transport.</span><span class="sxs-lookup"><span data-stu-id="040e0-108">On the outgoing side, a message encoder serializes the outgoing <xref:System.ServiceModel.Channels.Message> and passes it to the transport.</span></span> <span data-ttu-id="040e0-109">Sur le côté entrant, un encodeur de message reçoit le formulaire sérialisé d'un <xref:System.ServiceModel.Channels.Message> du transport et le passe à la couche de protocole supérieure, si celle-ci est présente, ou à l'application, dans le cas contraire.</span><span class="sxs-lookup"><span data-stu-id="040e0-109">On the incoming side, a message encoder receives the serialized form of a <xref:System.ServiceModel.Channels.Message> from the transport and passes it to the higher protocol layer, if present, or to the application, if not.</span></span>  
  
 <span data-ttu-id="040e0-110">Lors de la connexion à un client ou serveur préexistant, il se peut que vous n'ayez pas le choix de l'utilisation d'un encodage de message spécifique car vous devez encoder vos messages conformément à ce que l'autre côté attend.</span><span class="sxs-lookup"><span data-stu-id="040e0-110">When connecting to a pre-existing client or server, you may not have a choice about using a particular message encoding since you need to encode your messages in a way that the other side is expecting.</span></span> <span data-ttu-id="040e0-111">Toutefois, si vous écrivez un service WCF, vous pouvez exposer votre service via plusieurs points de terminaison, chacun utilisant un encodage de message différent.</span><span class="sxs-lookup"><span data-stu-id="040e0-111">However, if you are writing a WCF service, you can expose your service through multiple endpoints, each using a different message encoding.</span></span> <span data-ttu-id="040e0-112">Cela permet aux clients de choisir l'encodage le plus approprié pour communiquer avec votre service sur le point de terminaison le plus adapté pour eux, et à vos clients de choisir l'encodage le plus adéquat.</span><span class="sxs-lookup"><span data-stu-id="040e0-112">This allows clients to choose the best encoding for talking to your service over the endpoint that is best for them, as well as giving your clients the flexibility to choose the encoding that is best for them.</span></span> <span data-ttu-id="040e0-113">L’utilisation de plusieurs points de terminaison vous permet également de combiner les avantages d’encodages de message différents avec d’autres éléments de liaison.</span><span class="sxs-lookup"><span data-stu-id="040e0-113">Using multiple endpoints also allows you to combine the advantages of different message encodings with other binding elements.</span></span>  
  
## <a name="system-provided-encoders"></a><span data-ttu-id="040e0-114">Encodeurs fournis par le système</span><span class="sxs-lookup"><span data-stu-id="040e0-114">System-Provided Encoders</span></span>  
 <span data-ttu-id="040e0-115">WCF comprend trois encodeurs de message, représentés par les trois classes suivantes :</span><span class="sxs-lookup"><span data-stu-id="040e0-115">WCF includes three message encoders, which are represented by the following three classes:</span></span>  
  
- <span data-ttu-id="040e0-116">L'encodeur de message texte <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> prend à la fois en charge l'encodage XML brut et l'encodage SOAP.</span><span class="sxs-lookup"><span data-stu-id="040e0-116"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>, the text message encoder, supports both plain XML encoding and SOAP encoding.</span></span> <span data-ttu-id="040e0-117">Le mode d'encodage XML brut de l'encodeur de message texte est appelé POX (Plain Old XML) afin de le distinguer de l'encodage SOAP basé sur le texte.</span><span class="sxs-lookup"><span data-stu-id="040e0-117">The plain XML encoding mode of the text message encoder is called "plain old XML" (POX) to distinguish it from text-based SOAP encoding.</span></span> <span data-ttu-id="040e0-118">Pour activer le mode POX, affectez la valeur <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement.MessageVersion%2A> à la propriété <xref:System.ServiceModel.Channels.MessageVersion.None%2A>.</span><span class="sxs-lookup"><span data-stu-id="040e0-118">To enable POX, set the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement.MessageVersion%2A> property to <xref:System.ServiceModel.Channels.MessageVersion.None%2A>.</span></span> <span data-ttu-id="040e0-119">Utilisez l’encodeur de message texte pour interagir avec des points de terminaison non-WCF.</span><span class="sxs-lookup"><span data-stu-id="040e0-119">Use the text message encoder to interoperate with non-WCF endpoints.</span></span>  
  
- <span data-ttu-id="040e0-120"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, l’encodeur de message binaire, utilise un format binaire compact et est optimisé pour la communication WCF à WCF, et n’est donc pas interopérable.</span><span class="sxs-lookup"><span data-stu-id="040e0-120"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, the binary message encoder, uses a compact binary format and is optimized for WCF to WCF communication, and hence is not interoperable.</span></span> <span data-ttu-id="040e0-121">Il s’agit également de l’encodeur le plus performant de tous les encodeurs fournis par WCF.</span><span class="sxs-lookup"><span data-stu-id="040e0-121">This is also the most performant encoder of all the encoders WCF provides.</span></span>  
  
- <span data-ttu-id="040e0-122">L'élément de liaison <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> spécifie l'encodage de caractères et le contrôle de version des messages encodés avec MTOM.</span><span class="sxs-lookup"><span data-stu-id="040e0-122"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the binding element, specifies the character encoding and message versioning for messages using MTOM encoding.</span></span> <span data-ttu-id="040e0-123">MTOM est une technologie efficace de transmission de données binaires dans les messages WCF.</span><span class="sxs-lookup"><span data-stu-id="040e0-123">MTOM is an efficient technology for transmitting binary data in WCF messages.</span></span> <span data-ttu-id="040e0-124">L'encodeur MTOM tente de créer un équilibre entre rendement et interopérabilité.</span><span class="sxs-lookup"><span data-stu-id="040e0-124">The MTOM encoder attempts to create a balance between efficiency and interoperability.</span></span> <span data-ttu-id="040e0-125">L'encodage MTOM transmet la plupart du XML sous forme textuelle, mais optimise les grands blocs de données binaires en les transmettant tels quels, sans conversion en texte.</span><span class="sxs-lookup"><span data-stu-id="040e0-125">The MTOM encoding transmits most XML in textual form, but optimizes large blocks of binary data by transmitting them as-is, without conversion to text.</span></span> <span data-ttu-id="040e0-126">En termes d’efficacité, parmi les encodeurs fournis par WCF, MTOM est entre du texte (le plus lent) et le binaire (le plus rapide).</span><span class="sxs-lookup"><span data-stu-id="040e0-126">In terms of efficiency, among the encoders WCF provides, MTOM is in-between text (the slowest) and binary (the fastest).</span></span>  
  
## <a name="how-to-choose-a-message-encoder"></a><span data-ttu-id="040e0-127">Comment choisir un encodeur de message</span><span class="sxs-lookup"><span data-stu-id="040e0-127">How to Choose a Message Encoder</span></span>  
 <span data-ttu-id="040e0-128">Le tableau suivant décrit les facteurs courants utilisés pour choisir un encodeur de message.</span><span class="sxs-lookup"><span data-stu-id="040e0-128">The following table describes common factors used to choose a message encoder.</span></span> <span data-ttu-id="040e0-129">Donnez la priorité aux facteurs significatifs pour votre application, puis choisissez les encodeurs de message qui fonctionnent le mieux avec ceux-ci.</span><span class="sxs-lookup"><span data-stu-id="040e0-129">Prioritize the factors that are important for your application, and then choose the message encoders that work best with these factors.</span></span> <span data-ttu-id="040e0-130">Assurez-vous de prendre en compte les facteurs supplémentaires non répertoriés dans ce tableau et les encodeurs de message personnalisés qui peuvent s'avérer nécessaires dans votre application.</span><span class="sxs-lookup"><span data-stu-id="040e0-130">Be sure to consider any additional factors not listed in this table and any custom message encoders that may be required in your application.</span></span>  
  
|<span data-ttu-id="040e0-131">Factor</span><span class="sxs-lookup"><span data-stu-id="040e0-131">Factor</span></span>|<span data-ttu-id="040e0-132">Description</span><span class="sxs-lookup"><span data-stu-id="040e0-132">Description</span></span>|<span data-ttu-id="040e0-133">Encodeurs qui prennent en charge ce facteur</span><span class="sxs-lookup"><span data-stu-id="040e0-133">Encoders that support this factor</span></span>|  
|------------|-----------------|---------------------------------------|  
|<span data-ttu-id="040e0-134">Jeux de caractères pris en charge</span><span class="sxs-lookup"><span data-stu-id="040e0-134">Supported Character Sets</span></span>|<span data-ttu-id="040e0-135"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> et <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> prennent uniquement en charge les encodages Unicode UTF8 et UTF16 (*Big-endian* et *Little endian*).</span><span class="sxs-lookup"><span data-stu-id="040e0-135"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> and <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> support only the UTF8 and UTF16 Unicode (*big-endian* and *little-endian*) encodings.</span></span> <span data-ttu-id="040e0-136">Si d'autres encodages sont requis, tels qu'UTF7 ou ASCII, un encodeur personnalisé doit être utilisé.</span><span class="sxs-lookup"><span data-stu-id="040e0-136">If other encodings are required, such as UTF7 or ASCII, a custom encoder must be used.</span></span> <span data-ttu-id="040e0-137">Pour obtenir un exemple d’encodeur personnalisé, consultez [encodeur de message personnalisé](../samples/custom-message-encoder-custom-text-encoder.md).</span><span class="sxs-lookup"><span data-stu-id="040e0-137">For a sample custom encoder, see [Custom Message Encoder](../samples/custom-message-encoder-custom-text-encoder.md).</span></span>|<span data-ttu-id="040e0-138">Texte</span><span class="sxs-lookup"><span data-stu-id="040e0-138">Text</span></span>|  
|<span data-ttu-id="040e0-139">Inspection</span><span class="sxs-lookup"><span data-stu-id="040e0-139">Inspection</span></span>|<span data-ttu-id="040e0-140">L'inspection désigne la capacité à examiner des messages pendant la transmission.</span><span class="sxs-lookup"><span data-stu-id="040e0-140">Inspection is the ability to examine messages during transmission.</span></span> <span data-ttu-id="040e0-141">Les encodages de texte, avec ou sans l'utilisation de SOAP, autorisent l'inspection et l'analyse des messages par de nombreuses applications sans l'utilisation d'outils spécialisés.</span><span class="sxs-lookup"><span data-stu-id="040e0-141">Text encodings, either with or without the use of SOAP, allow messages to be inspected and analyzed by many applications without the use of specialized tools.</span></span> <span data-ttu-id="040e0-142">L’utilisation de la sécurité de transfert, au niveau du message ou du transport, affecte votre capacité à inspecter les messages.</span><span class="sxs-lookup"><span data-stu-id="040e0-142">The use of transfer security, at either the message or transport level, affects your ability to inspect messages.</span></span> <span data-ttu-id="040e0-143">La confidentialité et l'intégrité empêchent respectivement l'examen et la modification d'un message.</span><span class="sxs-lookup"><span data-stu-id="040e0-143">Confidentiality protects a message from being examined and integrity protects a message from being modified.</span></span>|<span data-ttu-id="040e0-144">Texte</span><span class="sxs-lookup"><span data-stu-id="040e0-144">Text</span></span>|  
|<span data-ttu-id="040e0-145">Fiabilité</span><span class="sxs-lookup"><span data-stu-id="040e0-145">Reliability</span></span>|<span data-ttu-id="040e0-146">La fiabilité désigne la résilience d'un encodeur aux erreurs de transmission.</span><span class="sxs-lookup"><span data-stu-id="040e0-146">Reliability is the resiliency of an encoder to transmission errors.</span></span> <span data-ttu-id="040e0-147">La fiabilité peut également être fournie au niveau du message, du transport ou de la couche d'application.</span><span class="sxs-lookup"><span data-stu-id="040e0-147">Reliability can also be provided at the message, transport, or application layer.</span></span> <span data-ttu-id="040e0-148">Tous les encodeurs WCF standard partent du principe qu’une autre couche assure la fiabilité.</span><span class="sxs-lookup"><span data-stu-id="040e0-148">All of the standard WCF encoders assume that another layer is providing reliability.</span></span> <span data-ttu-id="040e0-149">L'encodeur a peu de possibilité de récupérer d'une erreur de transmission.</span><span class="sxs-lookup"><span data-stu-id="040e0-149">The encoder has little ability to recover from a transmission error.</span></span>|<span data-ttu-id="040e0-150">None</span><span class="sxs-lookup"><span data-stu-id="040e0-150">None</span></span>|  
|<span data-ttu-id="040e0-151">Simplicité</span><span class="sxs-lookup"><span data-stu-id="040e0-151">Simplicity</span></span>|<span data-ttu-id="040e0-152">La simplicité représente la facilité avec laquelle vous pouvez créer des encodeurs et décodeurs pour une spécification d'encodage.</span><span class="sxs-lookup"><span data-stu-id="040e0-152">Simplicity represents the ease with which you can create encoders and decoders for an encoding specification.</span></span> <span data-ttu-id="040e0-153">Les encodages de texte sont particulièrement avantageux en termes de simplicité, et l'encodage de texte POX présente l'avantage supplémentaire de ne requérir aucune prise en charge pour le traitement SOAP.</span><span class="sxs-lookup"><span data-stu-id="040e0-153">Text encodings are particularly advantageous for simplicity, and the POX text encoding has the additional advantage of not requiring support for processing SOAP.</span></span>|<span data-ttu-id="040e0-154">Texte (POX)</span><span class="sxs-lookup"><span data-stu-id="040e0-154">Text (POX)</span></span>|  
|<span data-ttu-id="040e0-155">Taille</span><span class="sxs-lookup"><span data-stu-id="040e0-155">Size</span></span>|<span data-ttu-id="040e0-156">L'encodage détermine la quantité de charge mémoire imposée sur le contenu.</span><span class="sxs-lookup"><span data-stu-id="040e0-156">The encoding determines the amount of overhead imposed on content.</span></span> <span data-ttu-id="040e0-157">La taille des messages encodés est directement associée au débit maximal des opérations de service.</span><span class="sxs-lookup"><span data-stu-id="040e0-157">The size of encoded messages is directly related to the maximum throughput of service operations.</span></span> <span data-ttu-id="040e0-158">Les encodages binaires sont en général plus compacts que les encodages de texte.</span><span class="sxs-lookup"><span data-stu-id="040e0-158">Binary encodings are generally more compact than text encodings.</span></span> <span data-ttu-id="040e0-159">Lorsque la taille de message est importante, compressez également le contenu du message lors de l'encodage.</span><span class="sxs-lookup"><span data-stu-id="040e0-159">When message size is at a premium, consider also compressing the message contents during encoding.</span></span> <span data-ttu-id="040e0-160">Cependant, la compression augmente les coûts de traitement à la fois de l'expéditeur et du récepteur du message.</span><span class="sxs-lookup"><span data-stu-id="040e0-160">However, compression adds processing costs for both the message sender and receiver.</span></span>|<span data-ttu-id="040e0-161">Binary</span><span class="sxs-lookup"><span data-stu-id="040e0-161">Binary</span></span>|  
|<span data-ttu-id="040e0-162">Diffusion en continu</span><span class="sxs-lookup"><span data-stu-id="040e0-162">Streaming</span></span>|<span data-ttu-id="040e0-163">La diffusion en continu permet aux applications de commencer à traiter un message avant qu'il ne soit totalement arrivé.</span><span class="sxs-lookup"><span data-stu-id="040e0-163">Streaming allows applications to begin processing a message before the entire message has arrived.</span></span> <span data-ttu-id="040e0-164">L'utilisation efficace de la diffusion en continu requiert que les données importantes d'un message soient disponibles au début de celui-ci afin que l'application de réception n'ait pas à attendre qu'elles arrivent.</span><span class="sxs-lookup"><span data-stu-id="040e0-164">Effectively using streaming requires that the important data for a message be available at the beginning of the message so that the receiving application is not required to wait for it to arrive.</span></span> <span data-ttu-id="040e0-165">De plus, les applications qui utilisent le transfert en continu doivent organiser les données du message de façon incrémentielle afin que le contenu n'ait pas de dépendances ascendantes.</span><span class="sxs-lookup"><span data-stu-id="040e0-165">Moreover, applications that use streamed transfer must organize data in the message incrementally so that the content does not have forward dependencies.</span></span> <span data-ttu-id="040e0-166">Dans de nombreux cas, vous devez trouver un compromis entre diffuser du contenu en continu et avoir la taille de transfert la plus petite possible pour celui-ci.</span><span class="sxs-lookup"><span data-stu-id="040e0-166">In many cases, you must compromise between streaming content and having the smallest possible transfer size for that content.</span></span>|<span data-ttu-id="040e0-167">None</span><span class="sxs-lookup"><span data-stu-id="040e0-167">None</span></span>|  
|<span data-ttu-id="040e0-168">Prise en charge des outils tiers</span><span class="sxs-lookup"><span data-stu-id="040e0-168">Third-Party Tool Support</span></span>|<span data-ttu-id="040e0-169">La prise en charge d'un encodage inclut le développement et le diagnostic.</span><span class="sxs-lookup"><span data-stu-id="040e0-169">Support areas for an encoding include development and diagnosis.</span></span> <span data-ttu-id="040e0-170">Des développeurs tiers ont fait un investissement substantiel dans les bibliothèques et trousses à outils permettant de gérer les messages encodés au format POX.</span><span class="sxs-lookup"><span data-stu-id="040e0-170">Third-party developers have made a large investment in libraries and toolkits for handling messages encoded in the POX format.</span></span>|<span data-ttu-id="040e0-171">Texte (POX)</span><span class="sxs-lookup"><span data-stu-id="040e0-171">Text (POX)</span></span>|  
|<span data-ttu-id="040e0-172">Interopérabilité</span><span class="sxs-lookup"><span data-stu-id="040e0-172">Interoperability</span></span>|<span data-ttu-id="040e0-173">Ce facteur fait référence à la capacité d’un encodeur WCF à interagir avec les services non-WCF.</span><span class="sxs-lookup"><span data-stu-id="040e0-173">This factor refers to the ability of a WCF encoder to interoperate with non-WCF services.</span></span>|<span data-ttu-id="040e0-174">Texte</span><span class="sxs-lookup"><span data-stu-id="040e0-174">Text</span></span><br /><br /> <span data-ttu-id="040e0-175">MTOM (partiel)</span><span class="sxs-lookup"><span data-stu-id="040e0-175">MTOM (partial)</span></span>|  
  
<span data-ttu-id="040e0-176">Remarque : lors de l'utilisation de l'encodeur binaire, l'utilisation du paramètre IgnoreWhitespace lors de la création d'un XMLReader n'a aucun effet.</span><span class="sxs-lookup"><span data-stu-id="040e0-176">Note: When using the Binary Encoder, using the IgnoreWhitespace setting when creating a XMLReader will have no effect.</span></span>  <span data-ttu-id="040e0-177">Par exemple, si vous procédez comme suit dans une opération de service :</span><span class="sxs-lookup"><span data-stu-id="040e0-177">For example, if you do the following inside a service operation:</span></span>  

```csharp
public void OperationContract(XElement input)
{
    Console.WriteLine("{0}", input.Value);
    int counter = 0;
    var xreader = input.CreateReader();
    var reader = XmlReader.Create(xreader, new XmlReaderSettings() { IgnoreWhitespace = true });
    while (reader.Read())
    {
        counter++;
    }

    Console.WriteLine("Read {0} lines with reader", counter);
}
```  
  
<span data-ttu-id="040e0-178">Le paramètre IgnoreWhitespace est ignoré.</span><span class="sxs-lookup"><span data-stu-id="040e0-178">The IgnoreWhitespace setting is ignored.</span></span>  
  
## <a name="compression-and-the-binary-encoder"></a><span data-ttu-id="040e0-179">Compression et encodeur binaire</span><span class="sxs-lookup"><span data-stu-id="040e0-179">Compression and the Binary Encoder</span></span>

<span data-ttu-id="040e0-180">Depuis WCF 4.5, l'encodeur binaire WCF ajoute la prise en charge de la compression.</span><span class="sxs-lookup"><span data-stu-id="040e0-180">Beginning with WCF 4.5 the WCF binary encoder adds support for compression.</span></span> <span data-ttu-id="040e0-181">Cela vous permet d'utiliser l'algorithme gzip/deflate pour envoyer des messages compressés d'un client WCF et répondre avec les messages compressés d'un service WCF auto-hébergé.</span><span class="sxs-lookup"><span data-stu-id="040e0-181">This enables you to use the gzip/deflate algorithm for sending compressed messages from a WCF client and also respond with compressed messages from a self-hosted WCF service.</span></span> <span data-ttu-id="040e0-182">Cette fonctionnalité permet la compression sur les transports HTTP et TCP.</span><span class="sxs-lookup"><span data-stu-id="040e0-182">This feature enables compression on both the HTTP and TCP transports.</span></span> <span data-ttu-id="040e0-183">Un service WCF hébergé par IIS peut toujours être activé pour envoyer des réponses compressées en configurant le serveur hôte IIS.</span><span class="sxs-lookup"><span data-stu-id="040e0-183">An IIS hosted WCF service can always be enabled for sending compressed responses by configuring the IIS host server.</span></span> <span data-ttu-id="040e0-184">Le type de compression est configuré avec la propriété <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="040e0-184">The type of compression is configured with the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="040e0-185">Cette propriété a l'une des valeurs d'énumération <xref:System.ServiceModel.Channels.CompressionFormat?displayProperty=nameWithType> :</span><span class="sxs-lookup"><span data-stu-id="040e0-185">This property is set to one of the <xref:System.ServiceModel.Channels.CompressionFormat?displayProperty=nameWithType> enum values:</span></span>

- <xref:System.ServiceModel.Channels.CompressionFormat.Deflate>
- <xref:System.ServiceModel.Channels.CompressionFormat.GZip>
- <xref:System.ServiceModel.Channels.CompressionFormat.None>
  
<span data-ttu-id="040e0-186">Étant donné que cette propriété est exposée uniquement sur binaryMessageEncodingBindingElement, vous devez créer une liaison personnalisée comme celle qui suit pour utiliser cette fonctionnalité :</span><span class="sxs-lookup"><span data-stu-id="040e0-186">Since this property is only exposed on the binaryMessageEncodingBindingElement, you will need to create a custom binding like the following to use this feature:</span></span>

 ```xml
 <customBinding>
   <binding name="BinaryCompressionBinding">
     <binaryMessageEncoding compressionFormat ="GZip" />
     <httpTransport />
  </binding>
</customBinding>
 ```

<span data-ttu-id="040e0-187">Le client et le service doivent accepter d’envoyer et de recevoir des messages compressés. par conséquent, la propriété compressionFormat doit être configurée sur l’élément binaryMessageEncoding sur le client et le service.</span><span class="sxs-lookup"><span data-stu-id="040e0-187">Both the client and the service need to agree to send and receive compressed messages and therefore the compressionFormat property must be configured on the binaryMessageEncoding element on both client and service.</span></span> <span data-ttu-id="040e0-188">Une ProtocolException est levée si le service ou le client n’est pas configuré pour la compression, mais l’autre côté est.</span><span class="sxs-lookup"><span data-stu-id="040e0-188">A ProtocolException is thrown if either the service or client is not configured for compression, but the other side is.</span></span> <span data-ttu-id="040e0-189">L’activation de la compression doit être étudiée avec soin.</span><span class="sxs-lookup"><span data-stu-id="040e0-189">Enabling compression should be carefully considered.</span></span> <span data-ttu-id="040e0-190">La compression est essentiellement utile si la bande passante réseau est un goulot d'étranglement.</span><span class="sxs-lookup"><span data-stu-id="040e0-190">Compression is mostly useful if network bandwidth is a bottleneck.</span></span> <span data-ttu-id="040e0-191">Dans le cas où l'UC est un goulot d'étranglement, la compression diminuera le débit.</span><span class="sxs-lookup"><span data-stu-id="040e0-191">In the case where the CPU is the bottleneck, compression will decrease throughput.</span></span> <span data-ttu-id="040e0-192">Le test approprié doit être effectué dans un environnement simulé pour déterminer si cela offre des avantages à l'application</span><span class="sxs-lookup"><span data-stu-id="040e0-192">Appropriate testing must be done in a simulated environment to find out if this benefits the application</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="040e0-193">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="040e0-193">See also</span></span>

- [<span data-ttu-id="040e0-194">Liaisons</span><span class="sxs-lookup"><span data-stu-id="040e0-194">Bindings</span></span>](bindings.md)
