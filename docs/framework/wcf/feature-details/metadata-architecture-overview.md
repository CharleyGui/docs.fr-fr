---
title: Vue d'ensemble de l'architecture de métadonnées
ms.date: 03/30/2017
helpviewer_keywords:
- metadata [WCF], overview
ms.assetid: 1d37645e-086d-4d68-a358-f3c5b6e8205e
ms.openlocfilehash: db601a26eb7a7703403432590e359f51231e3ca1
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96248290"
---
# <a name="metadata-architecture-overview"></a><span data-ttu-id="0f074-102">Vue d'ensemble de l'architecture de métadonnées</span><span class="sxs-lookup"><span data-stu-id="0f074-102">Metadata Architecture Overview</span></span>

<span data-ttu-id="0f074-103">Windows Communication Foundation (WCF) fournit une infrastructure riche pour l’exportation, la publication, la récupération et l’importation des métadonnées de service.</span><span class="sxs-lookup"><span data-stu-id="0f074-103">Windows Communication Foundation (WCF) provides a rich infrastructure for exporting, publishing, retrieving, and importing service metadata.</span></span> <span data-ttu-id="0f074-104">Les services WCF utilisent des métadonnées pour décrire comment interagir avec les points de terminaison du service afin que les outils, tels que Svcutil.exe, puissent générer automatiquement le code client pour accéder au service.</span><span class="sxs-lookup"><span data-stu-id="0f074-104">WCF services use metadata to describe how to interact with the service's endpoints so that tools, such as Svcutil.exe, can automatically generate client code for accessing the service.</span></span>  
  
 <span data-ttu-id="0f074-105">La plupart des types qui composent l’infrastructure de métadonnées WCF résident dans l' <xref:System.ServiceModel.Description> espace de noms.</span><span class="sxs-lookup"><span data-stu-id="0f074-105">Most of the types that make up the WCF metadata infrastructure reside in the <xref:System.ServiceModel.Description> namespace.</span></span>  
  
 <span data-ttu-id="0f074-106">WCF utilise la <xref:System.ServiceModel.Description.ServiceEndpoint> classe pour décrire des points de terminaison dans un service.</span><span class="sxs-lookup"><span data-stu-id="0f074-106">WCF uses the <xref:System.ServiceModel.Description.ServiceEndpoint> class to describe endpoints in a service.</span></span> <span data-ttu-id="0f074-107">Vous pouvez utiliser WCF pour générer des métadonnées pour les points de terminaison de service ou importer les métadonnées de service pour générer des <xref:System.ServiceModel.Description.ServiceEndpoint> instances.</span><span class="sxs-lookup"><span data-stu-id="0f074-107">You can use WCF to generate metadata for service endpoints or import service metadata to generate <xref:System.ServiceModel.Description.ServiceEndpoint> instances.</span></span>  
  
 <span data-ttu-id="0f074-108">WCF représente les métadonnées d’un service en tant qu’instance du <xref:System.ServiceModel.Description.MetadataSet> type, dont la structure est fortement liée au format de sérialisation des métadonnées défini dans WS-MetadataExchange.</span><span class="sxs-lookup"><span data-stu-id="0f074-108">WCF represents the metadata for a service as an instance of the <xref:System.ServiceModel.Description.MetadataSet> type, the structure of which is strongly tied to the metadata serialization format defined in WS-MetadataExchange.</span></span> <span data-ttu-id="0f074-109">Le type <xref:System.ServiceModel.Description.MetadataSet> regroupe les métadonnées de service réelles, telles que les documents WSDL (Web Services Description Language), les documents de schéma XML ou les expressions WS-Policy, sous la forme d'une collection d'instances <xref:System.ServiceModel.Description.MetadataSection>.</span><span class="sxs-lookup"><span data-stu-id="0f074-109">The <xref:System.ServiceModel.Description.MetadataSet> type bundles the actual service metadata, such as Web Services Description Language (WSDL) documents, XML schema documents, or WS-Policy expressions, as a collection of <xref:System.ServiceModel.Description.MetadataSection> instances.</span></span> <span data-ttu-id="0f074-110">Chaque instance <xref:System.ServiceModel.Description.MetadataSection?displayProperty=nameWithType> contient un dialecte de métadonnées spécifique et un identificateur.</span><span class="sxs-lookup"><span data-stu-id="0f074-110">Each <xref:System.ServiceModel.Description.MetadataSection?displayProperty=nameWithType> instance contains a specific metadata dialect and an identifier.</span></span> <span data-ttu-id="0f074-111">Un <xref:System.ServiceModel.Description.MetadataSection?displayProperty=nameWithType> peut contenir les éléments suivants dans sa propriété <xref:System.ServiceModel.Description.MetadataSection.Metadata%2A?displayProperty=nameWithType> :</span><span class="sxs-lookup"><span data-stu-id="0f074-111">A <xref:System.ServiceModel.Description.MetadataSection?displayProperty=nameWithType> can contain the following items in its <xref:System.ServiceModel.Description.MetadataSection.Metadata%2A?displayProperty=nameWithType> property:</span></span>  
  
- <span data-ttu-id="0f074-112">Métadonnées brutes.</span><span class="sxs-lookup"><span data-stu-id="0f074-112">Raw metadata.</span></span>  
  
- <span data-ttu-id="0f074-113">Instance de <xref:System.ServiceModel.Description.MetadataReference>.</span><span class="sxs-lookup"><span data-stu-id="0f074-113">A <xref:System.ServiceModel.Description.MetadataReference> instance.</span></span>  
  
- <span data-ttu-id="0f074-114">Instance de <xref:System.ServiceModel.Description.MetadataLocation>.</span><span class="sxs-lookup"><span data-stu-id="0f074-114">A <xref:System.ServiceModel.Description.MetadataLocation> instance.</span></span>  
  
 <span data-ttu-id="0f074-115">Les instances <xref:System.ServiceModel.Description.MetadataReference?displayProperty=nameWithType> pointent vers un autre point de terminaison d'échanges de métadonnées (MEX) et les instances <xref:System.ServiceModel.Description.MetadataLocation?displayProperty=nameWithType> pointent vers un document de métadonnées à l'aide d'une URL HTTP.</span><span class="sxs-lookup"><span data-stu-id="0f074-115">A <xref:System.ServiceModel.Description.MetadataReference?displayProperty=nameWithType> instances  point to another metadata exchange (MEX) endpoint and <xref:System.ServiceModel.Description.MetadataLocation?displayProperty=nameWithType> instances point to a metadata document using an HTTP URL.</span></span> <span data-ttu-id="0f074-116">WCF prend en charge l’utilisation de documents WSDL pour décrire des points de terminaison de service, des contrats de service, des liaisons, des modèles d’échange de messages, des messages et des messages d’erreur implémentés par un service.</span><span class="sxs-lookup"><span data-stu-id="0f074-116">WCF supports using WSDL documents to describe service endpoints, service contracts, bindings, message exchange patterns, messages and fault messages implemented by a service.</span></span> <span data-ttu-id="0f074-117">Les types de données utilisés par le service sont décrits dans les documents WSDL à l'aide du schéma XML.</span><span class="sxs-lookup"><span data-stu-id="0f074-117">Data types used by the service are described in WSDL documents using XML schema.</span></span> <span data-ttu-id="0f074-118">Pour plus d’informations, consultez [importation et exportation de schémas](schema-import-and-export.md).</span><span class="sxs-lookup"><span data-stu-id="0f074-118">For more information, see [Schema Import and Export](schema-import-and-export.md).</span></span> <span data-ttu-id="0f074-119">Vous pouvez utiliser WCF pour exporter et importer des extensions WSDL pour le comportement de service, les comportements de contrat et les éléments de liaison qui étendent les fonctionnalités d’un service.</span><span class="sxs-lookup"><span data-stu-id="0f074-119">You can use WCF to export and import WSDL extensions for service behavior, contract behaviors, and binding elements that extend the functionality of a service.</span></span> <span data-ttu-id="0f074-120">Pour plus d’informations, consultez [exportation de métadonnées personnalisées pour une extension WCF](../extending/exporting-custom-metadata-for-a-wcf-extension.md).</span><span class="sxs-lookup"><span data-stu-id="0f074-120">For more information, see [Exporting Custom Metadata for a WCF Extension](../extending/exporting-custom-metadata-for-a-wcf-extension.md).</span></span>  
  
## <a name="exporting-service-metadata"></a><span data-ttu-id="0f074-121">Exportation des métadonnées de service</span><span class="sxs-lookup"><span data-stu-id="0f074-121">Exporting Service Metadata</span></span>  

 <span data-ttu-id="0f074-122">Dans WCF, l' *exportation des métadonnées* est le processus qui consiste à décrire des points de terminaison de service et à les projeter dans une représentation parallèle et standardisée que les clients peuvent utiliser pour comprendre comment utiliser le service.</span><span class="sxs-lookup"><span data-stu-id="0f074-122">In WCF, *metadata export* is the process of describing service endpoints and projecting them into a parallel, standardized representation that clients can use to understand how to use the service.</span></span> <span data-ttu-id="0f074-123">Pour exporter des métadonnées à partir des instances <xref:System.ServiceModel.Description.ServiceEndpoint>, utilisez une implémentation de la classe abstraite <xref:System.ServiceModel.Description.MetadataExporter>.</span><span class="sxs-lookup"><span data-stu-id="0f074-123">To export metadata from <xref:System.ServiceModel.Description.ServiceEndpoint> instances, use an implementation of the <xref:System.ServiceModel.Description.MetadataExporter> abstract class.</span></span> <span data-ttu-id="0f074-124">Une implémentation <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> génère des métadonnées encapsulée dans une instance <xref:System.ServiceModel.Description.MetadataSet>.</span><span class="sxs-lookup"><span data-stu-id="0f074-124">A <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> implementation generates metadata that is encapsulated in a <xref:System.ServiceModel.Description.MetadataSet> instance.</span></span>  
  
 <span data-ttu-id="0f074-125">La classe <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> fournit une infrastructure pour générer des expressions de stratégie qui décrivent les fonctions et les spécifications d'une liaison de point de terminaison et ses opérations, messages et erreurs associés.</span><span class="sxs-lookup"><span data-stu-id="0f074-125">The <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> class provides a framework for generating policy expressions that describe the capabilities and requirements of an endpoint binding and its associated operations, messages, and faults.</span></span> <span data-ttu-id="0f074-126">Ces expressions de stratégie sont capturées dans une instance <xref:System.ServiceModel.Description.PolicyConversionContext>.</span><span class="sxs-lookup"><span data-stu-id="0f074-126">These policy expressions are captured in a <xref:System.ServiceModel.Description.PolicyConversionContext> instance.</span></span> <span data-ttu-id="0f074-127">Une implémentation <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> peut ensuite attacher ces expressions de stratégie aux métadonnées qu'elle génère.</span><span class="sxs-lookup"><span data-stu-id="0f074-127">A <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> implementation can then attach these policy expressions to the metadata it generates.</span></span>  
  
 <span data-ttu-id="0f074-128"><xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> appelle chaque <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> qui implémente l'interface <xref:System.ServiceModel.Description.IPolicyExportExtension> dans la liaison d'un <xref:System.ServiceModel.Description.ServiceEndpoint> lors de la génération d'un objet <xref:System.ServiceModel.Description.PolicyConversionContext> devant être utilisé par l'implémentation <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0f074-128">The <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> calls into each <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> that implements the <xref:System.ServiceModel.Description.IPolicyExportExtension> interface in the binding of a <xref:System.ServiceModel.Description.ServiceEndpoint> when generating a <xref:System.ServiceModel.Description.PolicyConversionContext> object for the <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> implementation to use.</span></span> <span data-ttu-id="0f074-129">Vous pouvez exporter de nouvelles assertions de stratégie en implémentant l'interface <xref:System.ServiceModel.Description.IPolicyExportExtension> sur vos implémentations personnalisées du type <xref:System.ServiceModel.Channels.BindingElement>.</span><span class="sxs-lookup"><span data-stu-id="0f074-129">You can export new policy assertions by implementing the <xref:System.ServiceModel.Description.IPolicyExportExtension> interface on your custom implementations of the <xref:System.ServiceModel.Channels.BindingElement> type.</span></span>  
  
 <span data-ttu-id="0f074-130">Le <xref:System.ServiceModel.Description.WsdlExporter> type est l’implémentation de la <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> classe abstraite incluse avec WCF.</span><span class="sxs-lookup"><span data-stu-id="0f074-130">The <xref:System.ServiceModel.Description.WsdlExporter> type is the implementation of the <xref:System.ServiceModel.Description.MetadataExporter?displayProperty=nameWithType> abstract class included with WCF.</span></span> <span data-ttu-id="0f074-131">Le type <xref:System.ServiceModel.Description.WsdlExporter> génère les métadonnées WSDL avec les expressions de stratégie jointes.</span><span class="sxs-lookup"><span data-stu-id="0f074-131">The <xref:System.ServiceModel.Description.WsdlExporter> type generates WSDL metadata with attached policy expressions.</span></span>  
  
 <span data-ttu-id="0f074-132">Pour exporter des métadonnées WSDL ou des extensions WSDL personnalisées pour les comportements de point de terminaison, les comportements de contrat ou les éléments de liaison dans un point de terminaison de service, vous pouvez implémenter l’interface <xref:System.ServiceModel.Description.IWsdlExportExtension>.</span><span class="sxs-lookup"><span data-stu-id="0f074-132">To export custom WSDL metadata or WSDL extensions for endpoint behaviors, contract behaviors, or binding elements in a service endpoint, you can implement the <xref:System.ServiceModel.Description.IWsdlExportExtension> interface.</span></span> <span data-ttu-id="0f074-133">Le <xref:System.ServiceModel.Description.WsdlExporter> recherche dans une instance <xref:System.ServiceModel.Description.ServiceEndpoint> des éléments de liaison, des comportements d'opération, des comportements de contrat et des comportements de point de terminaison qui implémentent l'interface <xref:System.ServiceModel.Description.IWsdlExportExtension> lors de la génération du document WSDL.</span><span class="sxs-lookup"><span data-stu-id="0f074-133">The <xref:System.ServiceModel.Description.WsdlExporter> looks at a <xref:System.ServiceModel.Description.ServiceEndpoint> instance for binding elements, operation behaviors, contract behaviors, and endpoint behaviors that implement the <xref:System.ServiceModel.Description.IWsdlExportExtension> interface when generating the WSDL document.</span></span>  
  
## <a name="publishing-service-metadata"></a><span data-ttu-id="0f074-134">Publication des métadonnées de service</span><span class="sxs-lookup"><span data-stu-id="0f074-134">Publishing Service Metadata</span></span>  

 <span data-ttu-id="0f074-135">Les services WCF publient les métadonnées en exposant un ou plusieurs points de terminaison de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="0f074-135">WCF services publish metadata by exposing one or more metadata endpoints.</span></span> <span data-ttu-id="0f074-136">La publication des métadonnées de service rend les métadonnées de service disponibles à l'aide de protocoles standardisés, tels que les demandes MEX et HTTP/GET.</span><span class="sxs-lookup"><span data-stu-id="0f074-136">Publishing service metadata makes service metadata available using standardized protocols, such as MEX and HTTP/GET requests.</span></span> <span data-ttu-id="0f074-137">Les points de terminaison de métadonnées sont semblables à d’autres points de terminaison de service en ce sens qu’ils ont une adresse, une liaison et un contrat.</span><span class="sxs-lookup"><span data-stu-id="0f074-137">Metadata endpoints are similar to other service endpoints in that they have an address, a binding, and a contract.</span></span> <span data-ttu-id="0f074-138">Vous pouvez ajouter des points de terminaison de métadonnées à un hôte de service dans la configuration ou dans le code.</span><span class="sxs-lookup"><span data-stu-id="0f074-138">You can add metadata endpoints to a service host in configuration or in code.</span></span>  
  
 <span data-ttu-id="0f074-139">Pour publier des points de terminaison de métadonnées pour un service WCF, vous devez d’abord ajouter une instance du <xref:System.ServiceModel.Description.ServiceMetadataBehavior> comportement de service au service.</span><span class="sxs-lookup"><span data-stu-id="0f074-139">To publish metadata endpoints for a WCF service, you must first add an instance of the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> service behavior to the service.</span></span> <span data-ttu-id="0f074-140">L'ajout d'une instance <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType> à votre service augmente votre service en rendant possible la publication des métadonnées en exposant un ou plusieurs points de terminaison de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="0f074-140">Adding a <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType> instance to your service augments your service with the ability to publish metadata by exposing one or more metadata endpoints.</span></span> <span data-ttu-id="0f074-141">Après avoir ajouté le comportement de service <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType>, vous pouvez ensuite exposer les points de terminaison de métadonnées qui prennent en charge le protocole MEX ou les points de terminaison de métadonnées qui répondent aux demandes HTTP/GET.</span><span class="sxs-lookup"><span data-stu-id="0f074-141">Once you add the <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType> service behavior you can then expose metadata endpoints that support the MEX protocol or metadata endpoints that respond to HTTP/GET requests.</span></span>  
  
 <span data-ttu-id="0f074-142">Pour ajouter des points de terminaison de métadonnées qui utilisent le protocole MEX, ajoutez des points de terminaison de service à votre hôte de service qui utilisent le contrat de service nommé IMetadataExchange. WCF définit l' <xref:System.ServiceModel.Description.IMetadataExchange> interface qui possède ce nom de contrat de service.</span><span class="sxs-lookup"><span data-stu-id="0f074-142">To add metadata endpoints that use the MEX protocol, add service endpoints to your service host that use the service contract named IMetadataExchange.WCF defines the <xref:System.ServiceModel.Description.IMetadataExchange> interface that has this service contract name.</span></span> <span data-ttu-id="0f074-143">WS-MetadataExchange points de terminaison, ou points de terminaison MEX, peuvent utiliser l’une des quatre liaisons par défaut exposées par les méthodes de fabrique statiques sur la <xref:System.ServiceModel.Description.MetadataExchangeBindings> classe pour qu’elles correspondent aux liaisons par défaut utilisées par les outils WCF, comme Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="0f074-143">WS-MetadataExchange endpoints, or MEX endpoints, can use one of the four default bindings exposed by the static factory methods on the <xref:System.ServiceModel.Description.MetadataExchangeBindings> class to match the default bindings used by WCF tools, such as Svcutil.exe.</span></span> <span data-ttu-id="0f074-144">Vous pouvez également configurer des points de terminaison de métadonnées MEX à l’aide d’une liaison personnalisée.</span><span class="sxs-lookup"><span data-stu-id="0f074-144">You can also configure MEX metadata endpoints using a custom binding.</span></span>  
  
 <span data-ttu-id="0f074-145"><xref:System.ServiceModel.Description.ServiceMetadataBehavior> utilise <xref:System.ServiceModel.Description.WsdlExporter?displayProperty=nameWithType> pour exporter les métadonnées de tous les points de terminaison de service de votre service.</span><span class="sxs-lookup"><span data-stu-id="0f074-145">The <xref:System.ServiceModel.Description.ServiceMetadataBehavior> uses a <xref:System.ServiceModel.Description.WsdlExporter?displayProperty=nameWithType> to export metadata for all service endpoints in your service.</span></span> <span data-ttu-id="0f074-146">Pour plus d’informations sur l’exportation des métadonnées à partir d’un service, consultez [exportation et importation de métadonnées](exporting-and-importing-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="0f074-146">For more information about exporting metadata from a service, see [Exporting and Importing Metadata](exporting-and-importing-metadata.md).</span></span>  
  
 <span data-ttu-id="0f074-147">Le <xref:System.ServiceModel.Description.ServiceMetadataBehavior> augmente votre hôte de service en ajoutant une instance <xref:System.ServiceModel.Description.ServiceMetadataExtension> sous la forme d'une extension à votre hôte de service.</span><span class="sxs-lookup"><span data-stu-id="0f074-147">The <xref:System.ServiceModel.Description.ServiceMetadataBehavior> augments your service host by adding a <xref:System.ServiceModel.Description.ServiceMetadataExtension> instance as an extension to your service host.</span></span> <span data-ttu-id="0f074-148"><xref:System.ServiceModel.Description.ServiceMetadataExtension?displayProperty=nameWithType> fournit l'implémentation pour les protocoles de publication de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="0f074-148">The <xref:System.ServiceModel.Description.ServiceMetadataExtension?displayProperty=nameWithType> provides the implementation for the metadata publishing protocols.</span></span> <span data-ttu-id="0f074-149">Vous pouvez également utiliser <xref:System.ServiceModel.Description.ServiceMetadataExtension?displayProperty=nameWithType> pour obtenir les métadonnées de service au moment de l'exécution en accédant à la propriété <xref:System.ServiceModel.Description.ServiceMetadataExtension.Metadata%2A>.</span><span class="sxs-lookup"><span data-stu-id="0f074-149">You can also use the <xref:System.ServiceModel.Description.ServiceMetadataExtension?displayProperty=nameWithType> to get the service's metadata at runtime by accessing the <xref:System.ServiceModel.Description.ServiceMetadataExtension.Metadata%2A> property.</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="0f074-150">Si vous ajoutez un point de terminaison MEX dans votre fichier de configuration de l'application, puis tentez d'ajouter <xref:System.ServiceModel.Description.ServiceMetadataBehavior> à votre hôte de service dans le code, vous obtenez l'exception suivante :</span><span class="sxs-lookup"><span data-stu-id="0f074-150">If you add a MEX endpoint in your application configuration file and then attempt to add the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> to your service host in code you get the following exception:</span></span>  
>
> <span data-ttu-id="0f074-151">System.InvalidOperationException : Nom de contrat « IMetadataExchange » introuvable dans la liste des contrats implémentés par le service Service1.</span><span class="sxs-lookup"><span data-stu-id="0f074-151">System.InvalidOperationException: The contract name 'IMetadataExchange' could not be found in the list of contracts implemented by the service Service1.</span></span> <span data-ttu-id="0f074-152">Ajoutez un ServiceMetadataBehavior au fichier de configuration ou directement à ServiceHost pour activer la prise en charge de ce contrat.</span><span class="sxs-lookup"><span data-stu-id="0f074-152">Add a ServiceMetadataBehavior to the configuration file or to the ServiceHost directly to enable support for this contract.</span></span>  
>
> <span data-ttu-id="0f074-153">Vous pouvez remédier à ce problème en ajoutant <xref:System.ServiceModel.Description.ServiceMetadataBehavior> dans le fichier de configuration, ou en ajoutant à la fois le point de terminaison et <xref:System.ServiceModel.Description.ServiceMetadataBehavior> dans le code.</span><span class="sxs-lookup"><span data-stu-id="0f074-153">You can work around this issue by either adding the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> in the configuration file or adding both the endpoint and <xref:System.ServiceModel.Description.ServiceMetadataBehavior> in code.</span></span>  
>
> <span data-ttu-id="0f074-154">Pour obtenir un exemple d’ajout <xref:System.ServiceModel.Description.ServiceMetadataBehavior> dans un fichier de configuration de l’application, consultez la [prise en main](../samples/getting-started-sample.md).</span><span class="sxs-lookup"><span data-stu-id="0f074-154">For an example of adding <xref:System.ServiceModel.Description.ServiceMetadataBehavior> in an application configuration file, see the [Getting Started](../samples/getting-started-sample.md).</span></span> <span data-ttu-id="0f074-155">Pour obtenir un exemple d’ajout <xref:System.ServiceModel.Description.ServiceMetadataBehavior> dans le code, consultez l’exemple [auto-hôte](../samples/self-host.md) .</span><span class="sxs-lookup"><span data-stu-id="0f074-155">For an example of adding <xref:System.ServiceModel.Description.ServiceMetadataBehavior> in code, see the [Self-Host](../samples/self-host.md) sample.</span></span>  

> [!CAUTION]
> <span data-ttu-id="0f074-156">Lors de la publication de métadonnées pour un service qui expose deux contrats de service différents où chacun contient une opération du même nom, une exception est levée.</span><span class="sxs-lookup"><span data-stu-id="0f074-156">When publishing metadata for a service that exposes two different service contracts in which each contain an operation of the same name an exception is thrown.</span></span> <span data-ttu-id="0f074-157">Par exemple, si vous disposez d'un service qui expose un contrat de service appelé ICarService comportant une opération Get(Voiture c) et que le même service expose un contrat de service appelé IBookService comportant une opération Get(Livre b), une exception est levée ou un message d'erreur est affiché lors de la génération des métadonnées du service.</span><span class="sxs-lookup"><span data-stu-id="0f074-157">For example, if you have a service that exposes a service contract called ICarService that has an operation Get(Car c) and the same service exposes a service contract called IBookService that has an operation Get(Book b), an exception is thrown or an error message is displayed when generating the service's metadata.</span></span> <span data-ttu-id="0f074-158">Pour remédier à ce problème, effectuez l'une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="0f074-158">To work around this issue do one of the following:</span></span>  
>
> - <span data-ttu-id="0f074-159">Renommez l'une des opérations.</span><span class="sxs-lookup"><span data-stu-id="0f074-159">Rename one of the operations.</span></span>
> - <span data-ttu-id="0f074-160">Affectez au <xref:System.ServiceModel.OperationContractAttribute.Name%2A> un nom différent.</span><span class="sxs-lookup"><span data-stu-id="0f074-160">Set the <xref:System.ServiceModel.OperationContractAttribute.Name%2A> to a different name.</span></span>  
> - <span data-ttu-id="0f074-161">Affectez à l'un des espaces de noms des opérations un espace de noms différent à l'aide de la propriété <xref:System.ServiceModel.ServiceContractAttribute.Namespace%2A>.</span><span class="sxs-lookup"><span data-stu-id="0f074-161">Set one of the operations' namespaces to a different namespace using the <xref:System.ServiceModel.ServiceContractAttribute.Namespace%2A> property.</span></span>  
  
## <a name="retrieving-service-metadata"></a><span data-ttu-id="0f074-162">Récupération des métadonnées de service</span><span class="sxs-lookup"><span data-stu-id="0f074-162">Retrieving Service Metadata</span></span>  

 <span data-ttu-id="0f074-163">WCF peut récupérer les métadonnées de service à l’aide de protocoles standardisés tels que WS-MetadataExchange et HTTP.</span><span class="sxs-lookup"><span data-stu-id="0f074-163">WCF can retrieve service metadata using standardized protocols such as WS-MetadataExchange and HTTP.</span></span> <span data-ttu-id="0f074-164">Ces deux protocoles sont pris en charge par le type <xref:System.ServiceModel.Description.MetadataExchangeClient>.</span><span class="sxs-lookup"><span data-stu-id="0f074-164">Both of these protocols are supported by the <xref:System.ServiceModel.Description.MetadataExchangeClient> type.</span></span> <span data-ttu-id="0f074-165">Vous récupérez les métadonnées de service à l’aide du type <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> en fournissant une adresse et une liaison facultative.</span><span class="sxs-lookup"><span data-stu-id="0f074-165">You retrieve service metadata using the <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> type by providing an address and an optional binding.</span></span> <span data-ttu-id="0f074-166">La liaison utilisée par une instance <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> peut être l'une des liaisons par défaut de la classe statique <xref:System.ServiceModel.Description.MetadataExchangeBindings>, une liaison fournie par l'utilisateur ou une liaison chargée à partir d'une configuration de point de terminaison pour le contrat `IMetadataExchange`.</span><span class="sxs-lookup"><span data-stu-id="0f074-166">The binding used by a <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> instance can be one of the default bindings from the <xref:System.ServiceModel.Description.MetadataExchangeBindings> static class, a user-supplied binding, or a binding loaded from an endpoint configuration for the `IMetadataExchange` contract.</span></span> <span data-ttu-id="0f074-167"><xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> peut également résoudre des références d'URL HTTP aux métadonnées à l'aide du type <xref:System.Net.HttpWebRequest>.</span><span class="sxs-lookup"><span data-stu-id="0f074-167">The <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> can also resolve HTTP URL references to metadata using the <xref:System.Net.HttpWebRequest> type.</span></span>  
  
 <span data-ttu-id="0f074-168">Par défaut, une instance <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> est attachée à une instance <xref:System.ServiceModel.Channels.ChannelFactoryBase> unique.</span><span class="sxs-lookup"><span data-stu-id="0f074-168">By default, a <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> instance is tied to a single <xref:System.ServiceModel.Channels.ChannelFactoryBase> instance.</span></span> <span data-ttu-id="0f074-169">Vous pouvez modifier ou remplacer l'instance <xref:System.ServiceModel.Channels.ChannelFactoryBase> utilisée par <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> en substituant la méthode virtuelle <xref:System.ServiceModel.Description.MetadataExchangeClient.GetChannelFactory%2A>.</span><span class="sxs-lookup"><span data-stu-id="0f074-169">You can change or replace the <xref:System.ServiceModel.Channels.ChannelFactoryBase> instance used by a <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> by overriding the <xref:System.ServiceModel.Description.MetadataExchangeClient.GetChannelFactory%2A> virtual method.</span></span> <span data-ttu-id="0f074-170">De la même façon, vous pouvez modifier ou remplacer l'instance <xref:System.Net.HttpWebRequest?displayProperty=nameWithType> utilisée par <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> pour effectuer des requêtes HTTP/GET en substituant la méthode virtuelle <xref:System.ServiceModel.Description.MetadataExchangeClient.GetWebRequest%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0f074-170">Similarly, you can change or replace the <xref:System.Net.HttpWebRequest?displayProperty=nameWithType> instance used by a <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> to make HTTP/GET requests by overriding the <xref:System.ServiceModel.Description.MetadataExchangeClient.GetWebRequest%2A?displayProperty=nameWithType> virtual method.</span></span>  
  
 <span data-ttu-id="0f074-171">Vous pouvez récupérer les métadonnées du service à l’aide de WS-MetadataExchange ou de requêtes HTTP/obtenir à l’aide de l’outil Svcutil.exe et en passant le commutateur **/target : Metadata** et une adresse.</span><span class="sxs-lookup"><span data-stu-id="0f074-171">You can retrieve service metadata using WS-MetadataExchange or HTTP/GET requests by using the Svcutil.exe tool and passing the **/target:metadata** switch and an address.</span></span> <span data-ttu-id="0f074-172">Svcutil.exe télécharge les métadonnées à l'adresse spécifiée et enregistre les fichiers sur disque.</span><span class="sxs-lookup"><span data-stu-id="0f074-172">Svcutil.exe downloads the metadata at the specified address and saves the files to disk.</span></span> <span data-ttu-id="0f074-173">Svcutil.exe utilise une instance <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> en interne et charge, à partir du fichier de configuration de l'application, une configuration de point de terminaison MEX dont le nom correspond au schéma de l'adresse passée à Svcutil.exe, s'il en existe une.</span><span class="sxs-lookup"><span data-stu-id="0f074-173">Svcutil.exe uses a <xref:System.ServiceModel.Description.MetadataExchangeClient?displayProperty=nameWithType> instance internally and loads an MEX endpoint configuration (from the application configuration file) whose name matches the scheme of the address passed to Svcutil.exe, if one exists.</span></span> <span data-ttu-id="0f074-174">Sinon, Svcutil.exe utilise par défaut une des liaisons définies par le type de fabrique statique <xref:System.ServiceModel.Description.MetadataExchangeBindings>.</span><span class="sxs-lookup"><span data-stu-id="0f074-174">Otherwise, Svcutil.exe defaults to using one of the bindings defined by the <xref:System.ServiceModel.Description.MetadataExchangeBindings> static factory type.</span></span>  
  
## <a name="importing-service-metadata"></a><span data-ttu-id="0f074-175">Importation des métadonnées de service</span><span class="sxs-lookup"><span data-stu-id="0f074-175">Importing Service Metadata</span></span>  

 <span data-ttu-id="0f074-176">Dans WCF, l’importation de métadonnées est le processus de génération d’une représentation abstraite d’un service ou de ses composants à partir de ses métadonnées.</span><span class="sxs-lookup"><span data-stu-id="0f074-176">In WCF, metadata import is the process of generating an abstract representation of a service or its component parts from its metadata.</span></span> <span data-ttu-id="0f074-177">Par exemple, WCF peut importer des instances, des instances <xref:System.ServiceModel.Description.ServiceEndpoint> <xref:System.ServiceModel.Channels.Binding> ou <xref:System.ServiceModel.Description.ContractDescription> des instances à partir d’un document WSDL pour un service.</span><span class="sxs-lookup"><span data-stu-id="0f074-177">For example, WCF can import <xref:System.ServiceModel.Description.ServiceEndpoint> instances, <xref:System.ServiceModel.Channels.Binding> instances or <xref:System.ServiceModel.Description.ContractDescription> instances from a WSDL document for a service.</span></span> <span data-ttu-id="0f074-178">Pour importer des métadonnées de service dans WCF, utilisez une implémentation de la <xref:System.ServiceModel.Description.MetadataImporter> classe abstraite.</span><span class="sxs-lookup"><span data-stu-id="0f074-178">To import service metadata in WCF, use an implementation of the <xref:System.ServiceModel.Description.MetadataImporter> abstract class.</span></span> <span data-ttu-id="0f074-179">Les types qui dérivent de la <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> classe implémentent la prise en charge de l’importation des formats de métadonnées qui tirent parti de la logique d’importation WS-Policy dans WCF.</span><span class="sxs-lookup"><span data-stu-id="0f074-179">Types that derive from the <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> class implement support for importing metadata formats that take advantage of the WS-Policy import logic in WCF.</span></span>  
  
 <span data-ttu-id="0f074-180">Une implémentation <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> recueille les expressions de stratégie attachées aux métadonnées de service dans un objet <xref:System.ServiceModel.Description.PolicyConversionContext>.</span><span class="sxs-lookup"><span data-stu-id="0f074-180">A <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> implementation collects the policy expressions attached to the service metadata in a <xref:System.ServiceModel.Description.PolicyConversionContext> object.</span></span> <span data-ttu-id="0f074-181">Le <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> traite ensuite les stratégies dans le cadre de l'importation des métadonnées en appelant les implémentations de l'interface <xref:System.ServiceModel.Description.IPolicyImportExtension> dans la propriété <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A>.</span><span class="sxs-lookup"><span data-stu-id="0f074-181">The <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> then processes the policies as part of importing the metadata by calling the implementations of the <xref:System.ServiceModel.Description.IPolicyImportExtension> interface in the <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A> property.</span></span>  
  
 <span data-ttu-id="0f074-182">Vous pouvez ajouter la prise en charge pour importer de nouvelles assertions de stratégie vers un <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> en ajoutant votre propre implémentation de l'interface <xref:System.ServiceModel.Description.IPolicyImportExtension> à la collection <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A> sur une instance <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0f074-182">You can add support for importing new policy assertions to a <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> by adding your own implementation of the <xref:System.ServiceModel.Description.IPolicyImportExtension> interface to the <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A> collection on a <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> instance.</span></span> <span data-ttu-id="0f074-183">Vous pouvez également enregistrer votre extension de l’importation de la stratégie dans votre fichier de configuration de l’application cliente.</span><span class="sxs-lookup"><span data-stu-id="0f074-183">Alternatively, you can register your policy import extension in your client application configuration file.</span></span>  
  
 <span data-ttu-id="0f074-184">Le <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> type est l’implémentation de la <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> classe abstraite incluse avec WCF.</span><span class="sxs-lookup"><span data-stu-id="0f074-184">The <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> type is the implementation of the <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> abstract class included with WCF.</span></span> <span data-ttu-id="0f074-185">Le type <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> importe des métadonnées WSDL avec les stratégies attachées fournies dans un objet <xref:System.ServiceModel.Description.MetadataSet>.</span><span class="sxs-lookup"><span data-stu-id="0f074-185">The <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> type imports WSDL metadata with attached policies that are bundled in a <xref:System.ServiceModel.Description.MetadataSet> object.</span></span>  
  
 <span data-ttu-id="0f074-186">Vous pouvez ajouter la prise en charge pour importer des extensions WSDL en implémentant l’interface <xref:System.ServiceModel.Description.IWsdlImportExtension> et en ajoutant ensuite votre implémentation à la propriété <xref:System.ServiceModel.Description.WsdlImporter.WsdlImportExtensions%2A> sur votre instance <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0f074-186">You can add support for importing WSDL extensions by implementing the <xref:System.ServiceModel.Description.IWsdlImportExtension> interface and then adding your implementation to the <xref:System.ServiceModel.Description.WsdlImporter.WsdlImportExtensions%2A> property on your <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> instance.</span></span> <span data-ttu-id="0f074-187">Le <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> peut également charger des implémentations de l'interface <xref:System.ServiceModel.Description.IWsdlImportExtension?displayProperty=nameWithType> inscrite dans votre fichier de configuration de l'application cliente.</span><span class="sxs-lookup"><span data-stu-id="0f074-187">The <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> can also load implementations of the <xref:System.ServiceModel.Description.IWsdlImportExtension?displayProperty=nameWithType> interface registered in your client application configuration file.</span></span>  
  
## <a name="dynamic-bindings"></a><span data-ttu-id="0f074-188">Liaisons dynamiques</span><span class="sxs-lookup"><span data-stu-id="0f074-188">Dynamic Bindings</span></span>  

 <span data-ttu-id="0f074-189">Vous pouvez mettre à jour dynamiquement la liaison que vous utilisez pour créer un canal vers un point de terminaison de service au cas où la liaison pour le point de terminaison change ou si vous souhaitez créer un canal vers un point de terminaison qui utilise le même contrat mais possède une liaison différente.</span><span class="sxs-lookup"><span data-stu-id="0f074-189">You can dynamically update the binding that you use to create a channel to a service endpoint in the event that the binding for the endpoint changes or you want to create a channel to an endpoint that uses the same contract but has a different binding.</span></span> <span data-ttu-id="0f074-190">Vous pouvez utiliser la classe statique <xref:System.ServiceModel.Description.MetadataResolver> pour récupérer et importer les métadonnées au moment de l'exécution pour les points de terminaison de service qui implémentent un contrat spécifique.</span><span class="sxs-lookup"><span data-stu-id="0f074-190">You can use the <xref:System.ServiceModel.Description.MetadataResolver> static class to retrieve and import metadata at runtime for service endpoints that implement a specific contract.</span></span> <span data-ttu-id="0f074-191">Vous pouvez utiliser ensuite les objets <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> importés pour créer une fabrique de client ou de canaux au point de terminaison souhaité.</span><span class="sxs-lookup"><span data-stu-id="0f074-191">You can then use the imported <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> objects to create a client or channel factory to the desired endpoint.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0f074-192">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="0f074-192">See also</span></span>

- <xref:System.ServiceModel.Description>
- [<span data-ttu-id="0f074-193">Formats de métadonnées</span><span class="sxs-lookup"><span data-stu-id="0f074-193">Metadata Formats</span></span>](metadata-formats.md)
- [<span data-ttu-id="0f074-194">Exportation et importation de métadonnées</span><span class="sxs-lookup"><span data-stu-id="0f074-194">Exporting and Importing Metadata</span></span>](exporting-and-importing-metadata.md)
- [<span data-ttu-id="0f074-195">Publication de métadonnées</span><span class="sxs-lookup"><span data-stu-id="0f074-195">Publishing Metadata</span></span>](publishing-metadata.md)
- [<span data-ttu-id="0f074-196">Récupération de métadonnées</span><span class="sxs-lookup"><span data-stu-id="0f074-196">Retrieving Metadata</span></span>](retrieving-metadata.md)
- [<span data-ttu-id="0f074-197">Utilisation des métadonnées</span><span class="sxs-lookup"><span data-stu-id="0f074-197">Using Metadata</span></span>](using-metadata.md)
- [<span data-ttu-id="0f074-198">Considérations sur la sécurité des métadonnées</span><span class="sxs-lookup"><span data-stu-id="0f074-198">Security Considerations with Metadata</span></span>](security-considerations-with-metadata.md)
- [<span data-ttu-id="0f074-199">Extension du système de métadonnées</span><span class="sxs-lookup"><span data-stu-id="0f074-199">Extending the Metadata System</span></span>](../extending/extending-the-metadata-system.md)
