---
title: Utilisation de contrats de données
description: En savoir plus sur un contrat de données, qui définit, pour chaque paramètre ou type de retour, les données qui sont sérialisées pour être échangées entre un client et un serveur WCF.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- DataContractAttribute class
- WCF, data
- data contracts [WCF]
ms.assetid: a3ae7b21-c15c-4c05-abd8-f483bcbf31af
ms.openlocfilehash: 80ea2a8bd67c627fbe11ee07e640704c1a41ef7b
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/23/2020
ms.locfileid: "85244723"
---
# <a name="using-data-contracts"></a><span data-ttu-id="969d6-103">Utilisation de contrats de données</span><span class="sxs-lookup"><span data-stu-id="969d6-103">Using Data Contracts</span></span>
<span data-ttu-id="969d6-104">Un *contrat de données* est un accord en bonne et due forme entre un service et un client qui décrit de manière abstraite les données à échanger.</span><span class="sxs-lookup"><span data-stu-id="969d6-104">A *data contract* is a formal agreement between a service and a client that abstractly describes the data to be exchanged.</span></span> <span data-ttu-id="969d6-105">Autrement dit, pour communiquer, le client et le service n'ont pas besoin de partager les mêmes types, mais uniquement les mêmes contrats de données.</span><span class="sxs-lookup"><span data-stu-id="969d6-105">That is, to communicate, the client and the service do not have to share the same types, only the same data contracts.</span></span> <span data-ttu-id="969d6-106">Un contrat de données définit précisément, pour chaque type de paramètre ou de retour, les données qui doivent être sérialisées (converties en données XML) pour être échangées.</span><span class="sxs-lookup"><span data-stu-id="969d6-106">A data contract precisely defines, for each parameter or return type, what data is serialized (turned into XML) to be exchanged.</span></span>  
  
## <a name="data-contract-basics"></a><span data-ttu-id="969d6-107">Principes de base des contrats de données</span><span class="sxs-lookup"><span data-stu-id="969d6-107">Data Contract Basics</span></span>  
 <span data-ttu-id="969d6-108">Windows Communication Foundation (WCF) utilise un moteur de sérialisation appelé sérialiseur de contrat de données par défaut pour sérialiser et désérialiser des données (les convertir vers et à partir de XML).</span><span class="sxs-lookup"><span data-stu-id="969d6-108">Windows Communication Foundation (WCF) uses a serialization engine called the Data Contract Serializer by default to serialize and deserialize data (convert it to and from XML).</span></span> <span data-ttu-id="969d6-109">Tous les .NET Framework types primitifs, tels que les entiers et les chaînes, ainsi que certains types traités comme des primitives, tels que <xref:System.DateTime> et <xref:System.Xml.XmlElement> , peuvent être sérialisés sans autre préparation et sont considérés comme ayant des contrats de données par défaut.</span><span class="sxs-lookup"><span data-stu-id="969d6-109">All .NET Framework primitive types, such as integers and strings, as well as certain types treated as primitives, such as <xref:System.DateTime> and <xref:System.Xml.XmlElement>, can be serialized with no other preparation and are considered as having default data contracts.</span></span> <span data-ttu-id="969d6-110">De nombreux types de .NET Framework ont également des contrats de données existants.</span><span class="sxs-lookup"><span data-stu-id="969d6-110">Many .NET Framework types also have existing data contracts.</span></span> <span data-ttu-id="969d6-111">Pour obtenir la liste complète des types sérialisables, consultez [Types Supported by the Data Contract Serializer](types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="969d6-111">For a full list of serializable types, see [Types Supported by the Data Contract Serializer](types-supported-by-the-data-contract-serializer.md).</span></span>  
  
 <span data-ttu-id="969d6-112">Vous devez définir un contrat de données pour les nouveaux types complexes que vous créez afin que ces derniers soient sérialisables.</span><span class="sxs-lookup"><span data-stu-id="969d6-112">New complex types that you create must have a data contract defined for them to be serializable.</span></span> <span data-ttu-id="969d6-113">Par défaut, le <xref:System.Runtime.Serialization.DataContractSerializer> déduit le contrat de données et sérialise tous les types visibles publiquement.</span><span class="sxs-lookup"><span data-stu-id="969d6-113">By default, the <xref:System.Runtime.Serialization.DataContractSerializer> infers the data contract and serializes all publicly visible types.</span></span> <span data-ttu-id="969d6-114">Toutes les propriétés et tous les champs publics en lecture/écriture du type sont sérialisés.</span><span class="sxs-lookup"><span data-stu-id="969d6-114">All public read/write properties and fields of the type are serialized.</span></span> <span data-ttu-id="969d6-115">Vous pouvez supprimer des membres de la sérialisation en utilisant <xref:System.Runtime.Serialization.IgnoreDataMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="969d6-115">You can opt out members from serialization by using the <xref:System.Runtime.Serialization.IgnoreDataMemberAttribute>.</span></span> <span data-ttu-id="969d6-116">Vous pouvez également créer explicitement un contrat de données à l'aide des attributs <xref:System.Runtime.Serialization.DataContractAttribute> et <xref:System.Runtime.Serialization.DataMemberAttribute> .</span><span class="sxs-lookup"><span data-stu-id="969d6-116">You can also explicitly create a data contract by using <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes.</span></span> <span data-ttu-id="969d6-117">Pour cela, il faut normalement appliquer l'attribut <xref:System.Runtime.Serialization.DataContractAttribute> au type.</span><span class="sxs-lookup"><span data-stu-id="969d6-117">This is normally done by applying the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to the type.</span></span> <span data-ttu-id="969d6-118">Cet attribut peut être appliqué à des classes, des structures et des énumérations.</span><span class="sxs-lookup"><span data-stu-id="969d6-118">This attribute can be applied to classes, structures, and enumerations.</span></span> <span data-ttu-id="969d6-119">Puis, l'attribut <xref:System.Runtime.Serialization.DataMemberAttribute> doit être appliqué à chaque membre du type de contrat de données pour indiquer qu'il s'agit d'un *membre de données*, c'est-à-dire qu'il doit être sérialisé.</span><span class="sxs-lookup"><span data-stu-id="969d6-119">The <xref:System.Runtime.Serialization.DataMemberAttribute> attribute must then be applied to each member of the data contract type to indicate that it is a *data member*, that is, it should be serialized.</span></span> <span data-ttu-id="969d6-120">Pour plus d’informations, consultez [types sérialisables](serializable-types.md).</span><span class="sxs-lookup"><span data-stu-id="969d6-120">For more information, see [Serializable Types](serializable-types.md).</span></span>  
  
### <a name="example"></a><span data-ttu-id="969d6-121">Exemple</span><span class="sxs-lookup"><span data-stu-id="969d6-121">Example</span></span>  
 <span data-ttu-id="969d6-122">L'exemple suivant présente un contrat de service (une interface) auquel les attributs <xref:System.ServiceModel.ServiceContractAttribute> et <xref:System.ServiceModel.OperationContractAttribute> ont été explicitement appliqués.</span><span class="sxs-lookup"><span data-stu-id="969d6-122">The following example shows a service contract (an interface) to which the <xref:System.ServiceModel.ServiceContractAttribute> and <xref:System.ServiceModel.OperationContractAttribute> attributes have been explicitly applied.</span></span> <span data-ttu-id="969d6-123">L'exemple montre que les types primitifs ne requièrent pas de contrat de données, contrairement au type complexe.</span><span class="sxs-lookup"><span data-stu-id="969d6-123">The example shows that primitive types do not require a data contract, while a complex type does.</span></span>  
  
 [!code-csharp[C_DataContract#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#1)]
 [!code-vb[C_DataContract#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#1)]  
  
 <span data-ttu-id="969d6-124">L'exemple suivant montre comment créer un contrat de données pour le type `MyTypes.PurchaseOrder` en appliquant les attributs <xref:System.Runtime.Serialization.DataContractAttribute> et <xref:System.Runtime.Serialization.DataMemberAttribute> à la classe et à ses membres.</span><span class="sxs-lookup"><span data-stu-id="969d6-124">The following example shows how a data contract for the `MyTypes.PurchaseOrder` type is created by applying the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes to the class and its members.</span></span>  
  
 [!code-csharp[C_DataContract#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#2)]
 [!code-vb[C_DataContract#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#2)]  
  
### <a name="notes"></a><span data-ttu-id="969d6-125">Notes</span><span class="sxs-lookup"><span data-stu-id="969d6-125">Notes</span></span>  
 <span data-ttu-id="969d6-126">Les remarques suivantes fournissent des éléments à prendre en compte lors de la création de contrats de données :</span><span class="sxs-lookup"><span data-stu-id="969d6-126">The following notes provide items to consider when creating data contracts:</span></span>  
  
- <span data-ttu-id="969d6-127">L'attribut <xref:System.Runtime.Serialization.IgnoreDataMemberAttribute> est honoré uniquement lorsqu'il est utilisé avec des types non marqués.</span><span class="sxs-lookup"><span data-stu-id="969d6-127">The <xref:System.Runtime.Serialization.IgnoreDataMemberAttribute> attribute is only honored when used with unmarked types.</span></span> <span data-ttu-id="969d6-128">Cela inclut les types qui ne sont pas marqués avec l'un des attributs <xref:System.Runtime.Serialization.DataContractAttribute>, <xref:System.SerializableAttribute>, <xref:System.Runtime.Serialization.CollectionDataContractAttribute>ou <xref:System.Runtime.Serialization.EnumMemberAttribute> , ou qui sont marqués comme sérialisables par tout autre moyen (par exemple, objet <xref:System.Xml.Serialization.IXmlSerializable>).</span><span class="sxs-lookup"><span data-stu-id="969d6-128">This includes types that are not marked with one of the <xref:System.Runtime.Serialization.DataContractAttribute>, <xref:System.SerializableAttribute>, <xref:System.Runtime.Serialization.CollectionDataContractAttribute>, or <xref:System.Runtime.Serialization.EnumMemberAttribute> attributes, or marked as serializable by any other means (such as <xref:System.Xml.Serialization.IXmlSerializable>).</span></span>  
  
- <span data-ttu-id="969d6-129">Vous pouvez appliquer l'attribut <xref:System.Runtime.Serialization.DataMemberAttribute> à des champs et à des propriétés.</span><span class="sxs-lookup"><span data-stu-id="969d6-129">You can apply the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute to fields, and properties.</span></span>  
  
- <span data-ttu-id="969d6-130">Les niveaux d'accessibilité des membres (interne, privé, protégé ou public) n'affectent en aucune façon le contrat de données.</span><span class="sxs-lookup"><span data-stu-id="969d6-130">Member accessibility levels (internal, private, protected, or public) do not affect the data contract in any way.</span></span>  
  
- <span data-ttu-id="969d6-131">L'attribut <xref:System.Runtime.Serialization.DataMemberAttribute> est ignoré s'il est appliqué à des membres statiques.</span><span class="sxs-lookup"><span data-stu-id="969d6-131">The <xref:System.Runtime.Serialization.DataMemberAttribute> attribute is ignored if it is applied to static members.</span></span>  
  
- <span data-ttu-id="969d6-132">Pendant la sérialisation, le code de propriété get est appelé pour que les membres de données de propriété obtiennent la valeur des propriétés à sérialiser.</span><span class="sxs-lookup"><span data-stu-id="969d6-132">During serialization, property-get code is called for property data members to get the value of the properties to be serialized.</span></span>  
  
- <span data-ttu-id="969d6-133">Pendant la désérialisation, un objet non initialisé est d'abord créé, sans appeler de constructeur sur le type.</span><span class="sxs-lookup"><span data-stu-id="969d6-133">During deserialization, an uninitialized object is first created, without calling any constructors on the type.</span></span> <span data-ttu-id="969d6-134">Puis, tous les membres de données sont désérialisés.</span><span class="sxs-lookup"><span data-stu-id="969d6-134">Then all data members are deserialized.</span></span>  
  
- <span data-ttu-id="969d6-135">Pendant la désérialisation, le code de propriété set est appelé pour que les membres de données de propriété attribuent aux propriétés la valeur désérialisée.</span><span class="sxs-lookup"><span data-stu-id="969d6-135">During deserialization, property-set code is called for property data members to set the properties to the value being deserialized.</span></span>  
  
- <span data-ttu-id="969d6-136">Pour qu'un contrat de données soit valide, il doit être possible de sérialiser tous ses membres de données.</span><span class="sxs-lookup"><span data-stu-id="969d6-136">For a data contract to be valid, it must be possible to serialize all of its data members.</span></span> <span data-ttu-id="969d6-137">Pour obtenir la liste complète des types sérialisables, consultez [Types Supported by the Data Contract Serializer](types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="969d6-137">For a full list of serializable types, see [Types Supported by the Data Contract Serializer](types-supported-by-the-data-contract-serializer.md).</span></span>  
  
     <span data-ttu-id="969d6-138">Les types génériques sont gérés exactement de la même façon que les types non génériques.</span><span class="sxs-lookup"><span data-stu-id="969d6-138">Generic types are handled in exactly the same way as non-generic types.</span></span> <span data-ttu-id="969d6-139">Les paramètres génériques n'ont pas d'exigences particulières.</span><span class="sxs-lookup"><span data-stu-id="969d6-139">There are no special requirements for generic parameters.</span></span> <span data-ttu-id="969d6-140">Considérons par exemple le type suivant.</span><span class="sxs-lookup"><span data-stu-id="969d6-140">For example, consider the following type.</span></span>  
  
 [!code-csharp[C_DataContract#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#3)]
 [!code-vb[C_DataContract#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#3)]  
  
 <span data-ttu-id="969d6-141">Ce type est sérialisable, que le type utilisé pour le paramètre de type générique (`T`) le soit ou non.</span><span class="sxs-lookup"><span data-stu-id="969d6-141">This type is serializable whether the type used for the generic type parameter (`T`) is serializable or not.</span></span> <span data-ttu-id="969d6-142">Comme il doit être possible de sérialiser tous les membres de données, le type suivant est sérialisable uniquement si le paramètre de type générique l'est également, tel qu'indiqué dans le code suivant.</span><span class="sxs-lookup"><span data-stu-id="969d6-142">Because it must be possible to serialize all data members, the following type is serializable only if the generic type parameter is also serializable, as shown in the following code.</span></span>  
  
 [!code-csharp[C_DataContract#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#4)]
 [!code-vb[C_DataContract#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#4)]  
  
 <span data-ttu-id="969d6-143">Pour obtenir un exemple de code complet d’un service WCF qui définit un contrat de données, consultez l’exemple [Basic Data Contract](../samples/basic-data-contract.md) .</span><span class="sxs-lookup"><span data-stu-id="969d6-143">For a complete code sample of a WCF service that defines a data contract see the [Basic Data Contract](../samples/basic-data-contract.md) sample.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="969d6-144">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="969d6-144">See also</span></span>

- <xref:System.Runtime.Serialization.DataMemberAttribute>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- [<span data-ttu-id="969d6-145">Types sérialisables</span><span class="sxs-lookup"><span data-stu-id="969d6-145">Serializable Types</span></span>](serializable-types.md)
- [<span data-ttu-id="969d6-146">Noms de contrats de données</span><span class="sxs-lookup"><span data-stu-id="969d6-146">Data Contract Names</span></span>](data-contract-names.md)
- [<span data-ttu-id="969d6-147">Data Contract Equivalence</span><span class="sxs-lookup"><span data-stu-id="969d6-147">Data Contract Equivalence</span></span>](data-contract-equivalence.md)
- [<span data-ttu-id="969d6-148">Classement des membres de données</span><span class="sxs-lookup"><span data-stu-id="969d6-148">Data Member Order</span></span>](data-member-order.md)
- [<span data-ttu-id="969d6-149">Types connus de contrats de données</span><span class="sxs-lookup"><span data-stu-id="969d6-149">Data Contract Known Types</span></span>](data-contract-known-types.md)
- [<span data-ttu-id="969d6-150">Contrats de données à compatibilité ascendante</span><span class="sxs-lookup"><span data-stu-id="969d6-150">Forward-Compatible Data Contracts</span></span>](forward-compatible-data-contracts.md)
- [<span data-ttu-id="969d6-151">Contrôle de version des contrats de données</span><span class="sxs-lookup"><span data-stu-id="969d6-151">Data Contract Versioning</span></span>](data-contract-versioning.md)
- [<span data-ttu-id="969d6-152">Rappels de sérialisation avec tolérance de version</span><span class="sxs-lookup"><span data-stu-id="969d6-152">Version-Tolerant Serialization Callbacks</span></span>](version-tolerant-serialization-callbacks.md)
- [<span data-ttu-id="969d6-153">Valeurs par défaut des membres de données</span><span class="sxs-lookup"><span data-stu-id="969d6-153">Data Member Default Values</span></span>](data-member-default-values.md)
- [<span data-ttu-id="969d6-154">Types pris en charge par le sérialiseur de contrat de données</span><span class="sxs-lookup"><span data-stu-id="969d6-154">Types Supported by the Data Contract Serializer</span></span>](types-supported-by-the-data-contract-serializer.md)
- [<span data-ttu-id="969d6-155">Guide pratique pour créer un contrat de données de base destiné à une classe ou une structure</span><span class="sxs-lookup"><span data-stu-id="969d6-155">How to: Create a Basic Data Contract for a Class or Structure</span></span>](how-to-create-a-basic-data-contract-for-a-class-or-structure.md)
