---
title: Importation du schéma pour générer des classes
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, schema import and export
- XsdDataContractImporter class
ms.assetid: b9170583-8c34-43bd-97bb-6c0c8dddeee0
ms.openlocfilehash: 7f7c13cda2dcaeec16ad1ee49ff3dddf369906e5
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96280520"
---
# <a name="importing-schema-to-generate-classes"></a><span data-ttu-id="8dcdf-102">Importation du schéma pour générer des classes</span><span class="sxs-lookup"><span data-stu-id="8dcdf-102">Importing Schema to Generate Classes</span></span>

<span data-ttu-id="8dcdf-103">Pour générer des classes à partir de schémas utilisables avec Windows Communication Foundation (WCF), utilisez la <xref:System.Runtime.Serialization.XsdDataContractImporter> classe.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-103">To generate classes from schemas that are usable with Windows Communication Foundation (WCF), use the <xref:System.Runtime.Serialization.XsdDataContractImporter> class.</span></span> <span data-ttu-id="8dcdf-104">Cette rubrique décrit le processus et les variations.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-104">This topic describes the process and variations.</span></span>  
  
## <a name="the-import-process"></a><span data-ttu-id="8dcdf-105">Processus d'importation</span><span class="sxs-lookup"><span data-stu-id="8dcdf-105">The Import Process</span></span>

 <span data-ttu-id="8dcdf-106">Le processus d'importation du schéma démarre avec un <xref:System.Xml.Schema.XmlSchemaSet> et produit un <xref:System.CodeDom.CodeCompileUnit>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-106">The schema import process starts with an <xref:System.Xml.Schema.XmlSchemaSet> and produces a <xref:System.CodeDom.CodeCompileUnit>.</span></span>  
  
 <span data-ttu-id="8dcdf-107">Le `XmlSchemaSet` fait partie du modèle d’objet de schéma (SOM) de .NET Framework qui représente un jeu de documents de schéma en langage XSD (XML Schema Definition).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-107">The `XmlSchemaSet` is a part of the .NET Framework’s Schema Object Model (SOM) that represents a set of XML Schema definition language (XSD) schema documents.</span></span> <span data-ttu-id="8dcdf-108">Pour créer un objet `XmlSchemaSet` à partir d'un jeu de documents XSD, désérialisez chaque document dans un objet <xref:System.Xml.Schema.XmlSchema> (à l'aide du <xref:System.Xml.Serialization.XmlSerializer>) et ajoutez ces objets à un nouveau `XmlSchemaSet`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-108">To create an `XmlSchemaSet` object from a set of XSD documents, deserialize each document into an <xref:System.Xml.Schema.XmlSchema> object (using the <xref:System.Xml.Serialization.XmlSerializer>) and add these objects to a new `XmlSchemaSet`.</span></span>  
  
 <span data-ttu-id="8dcdf-109">Le `CodeCompileUnit` fait partie du Code Document Object Model de l' .NET Framework (CodeDom) qui représente .NET Framework code de manière abstraite.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-109">The `CodeCompileUnit` is part of the .NET Framework’s Code Document Object Model (CodeDOM) that represents .NET Framework code in an abstract way.</span></span> <span data-ttu-id="8dcdf-110">Pour générer le code réel à partir d'un `CodeCompileUnit`, utilisez une sous-classe de la classe <xref:System.CodeDom.Compiler.CodeDomProvider>, telle que la classe <xref:Microsoft.CSharp.CSharpCodeProvider> ou <xref:Microsoft.VisualBasic.VBCodeProvider>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-110">To generate the actual code from a `CodeCompileUnit`, use a subclass of the <xref:System.CodeDom.Compiler.CodeDomProvider> class, such as the <xref:Microsoft.CSharp.CSharpCodeProvider> or <xref:Microsoft.VisualBasic.VBCodeProvider> class.</span></span>  
  
### <a name="to-import-a-schema"></a><span data-ttu-id="8dcdf-111">Pour importer un schéma</span><span class="sxs-lookup"><span data-stu-id="8dcdf-111">To import a schema</span></span>  
  
1. <span data-ttu-id="8dcdf-112">Créez une instance de <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-112">Create an instance of the <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span></span>  
  
2. <span data-ttu-id="8dcdf-113">facultatif.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-113">Optional.</span></span> <span data-ttu-id="8dcdf-114">Passez un `CodeCompileUnit` dans le constructeur.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-114">Pass a `CodeCompileUnit` in the constructor.</span></span> <span data-ttu-id="8dcdf-115">Les types générés pendant l'importation de schéma sont ajoutés à cette instance `CodeCompileUnit` au lieu de démarrer avec un `CodeCompileUnit` vide.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-115">The types generated during schema import are added to this `CodeCompileUnit` instance instead of starting with a blank `CodeCompileUnit`.</span></span>  
  
3. <span data-ttu-id="8dcdf-116">facultatif.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-116">Optional.</span></span> <span data-ttu-id="8dcdf-117">Appelez une des méthodes <xref:System.Runtime.Serialization.XsdDataContractImporter.CanImport%2A>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-117">Call one of the <xref:System.Runtime.Serialization.XsdDataContractImporter.CanImport%2A> methods.</span></span> <span data-ttu-id="8dcdf-118">La méthode détermine si le schéma donné est un schéma de contrat de données valide et peut être importé.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-118">The method determines whether the given schema is a valid data contract schema and can be imported.</span></span> <span data-ttu-id="8dcdf-119">La méthode `CanImport` a les mêmes surcharges que `Import` (étape suivante).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-119">The `CanImport` method has the same overloads as `Import` (the next step).</span></span>  
  
4. <span data-ttu-id="8dcdf-120">Appelez l'une des méthodes `Import` surchargées, par exemple, la méthode <xref:System.Runtime.Serialization.XsdDataContractImporter.Import%28System.Xml.Schema.XmlSchemaSet%29>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-120">Call one of the overloaded `Import` methods, for example, the <xref:System.Runtime.Serialization.XsdDataContractImporter.Import%28System.Xml.Schema.XmlSchemaSet%29> method.</span></span>  
  
     <span data-ttu-id="8dcdf-121">La surcharge la plus simple prend un `XmlSchemaSet` et importe tous les types, y compris les types anonymes figurant dans ce jeu de schémas.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-121">The simplest overload takes an `XmlSchemaSet` and imports all types, including anonymous types, found in that schema set.</span></span> <span data-ttu-id="8dcdf-122">D'autres surcharges vous permettent de spécifier le type XSD ou une liste de types à importer (sous la forme d'un <xref:System.Xml.XmlQualifiedName> ou d'une collection d'objets `XmlQualifiedName`).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-122">Other overloads allow you to specify the XSD type or a list of types to import (in the form of an <xref:System.Xml.XmlQualifiedName> or a collection of `XmlQualifiedName` objects).</span></span> <span data-ttu-id="8dcdf-123">Dans ce cas, seuls les types spécifiés sont importés.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-123">In this case, only the specified types are imported.</span></span> <span data-ttu-id="8dcdf-124">Une surcharge prend un <xref:System.Xml.Schema.XmlSchemaElement> qui importe un élément particulier hors du `XmlSchemaSet`, ainsi que son type associé (qu'il soit anonyme ou non).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-124">An overload takes an <xref:System.Xml.Schema.XmlSchemaElement> that imports a particular element out of the `XmlSchemaSet`, as well as its associated type (whether it is anonymous or not).</span></span> <span data-ttu-id="8dcdf-125">Cette surcharge retourne un `XmlQualifiedName` qui représente le nom de contrat de données du type généré pour cet élément.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-125">This overload returns an `XmlQualifiedName`, which represents the data contract name of the type generated for this element.</span></span>  
  
     <span data-ttu-id="8dcdf-126">Plusieurs appels de la méthode `Import` entraînent l'ajout de plusieurs éléments au même `CodeCompileUnit`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-126">Multiple calls of the `Import` method result in multiple items being added to the same `CodeCompileUnit`.</span></span> <span data-ttu-id="8dcdf-127">Un type n'est pas généré dans le `CodeCompileUnit` s'il est déjà présent.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-127">A type is not generated into the `CodeCompileUnit` if it already exists there.</span></span> <span data-ttu-id="8dcdf-128">Appelez plusieurs fois `Import` sur le même `XsdDataContractImporter` au lieu d'utiliser plusieurs objets `XsdDataContractImporter`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-128">Call `Import` multiple times on the same `XsdDataContractImporter` instead of using multiple `XsdDataContractImporter` objects.</span></span> <span data-ttu-id="8dcdf-129">Il s'agit de la méthode recommandée pour éviter de générer des types en double.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-129">This is the recommended way to avoid duplicate types being generated.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="8dcdf-130">En cas de défaillance pendant l'importation, le `CodeCompileUnit` sera dans un état imprévisible.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-130">If there is a failure during import, the `CodeCompileUnit` will be in an unpredictable state.</span></span> <span data-ttu-id="8dcdf-131">L'utilisation d'un `CodeCompileUnit` issu d'une importation ayant échoué pourrait vous exposer à des failles de sécurité.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-131">Using a `CodeCompileUnit` resulting from a failed import could expose you to security vulnerabilities.</span></span>  
  
5. <span data-ttu-id="8dcdf-132">Accédez à `CodeCompileUnit` à l'aide de la propriété <xref:System.Runtime.Serialization.XsdDataContractImporter.CodeCompileUnit%2A> .</span><span class="sxs-lookup"><span data-stu-id="8dcdf-132">Access the `CodeCompileUnit` through the <xref:System.Runtime.Serialization.XsdDataContractImporter.CodeCompileUnit%2A> property.</span></span>  
  
### <a name="import-options-customizing-the-generated-types"></a><span data-ttu-id="8dcdf-133">Option d'importation : personnalisation des types générés</span><span class="sxs-lookup"><span data-stu-id="8dcdf-133">Import Options: Customizing the Generated Types</span></span>  

 <span data-ttu-id="8dcdf-134">Vous pouvez définir la propriété <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> de <xref:System.Runtime.Serialization.XsdDataContractImporter> avec une instance de la classe <xref:System.Runtime.Serialization.ImportOptions> pour contrôler divers aspect du processus d'importation.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-134">You can set the <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> property of the <xref:System.Runtime.Serialization.XsdDataContractImporter> to an instance of the <xref:System.Runtime.Serialization.ImportOptions> class to control various aspects of the import process.</span></span> <span data-ttu-id="8dcdf-135">Plusieurs options influencent directement les types générés.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-135">A number of options directly influence the types that are generated.</span></span>  
  
#### <a name="controlling-the-access-level-generateinternal-or-the-internal-switch"></a><span data-ttu-id="8dcdf-136">Contrôle du niveau d'accès (GenerateInternal ou le commutateur /internal)</span><span class="sxs-lookup"><span data-stu-id="8dcdf-136">Controlling the Access Level (GenerateInternal or the /internal switch)</span></span>  

 <span data-ttu-id="8dcdf-137">Cela correspond au commutateur **/Internal** sur l' [outil ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-137">This corresponds to the **/internal** switch on the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span>  
  
 <span data-ttu-id="8dcdf-138">Normalement, les types publics sont générés à partir d'un schéma, avec les champs privés et les propriétés de membres de données publiques correspondantes.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-138">Normally, public types are generated from schema, with private fields and matching public data member properties.</span></span> <span data-ttu-id="8dcdf-139">Pour générer des types internes à la place, affectez à la propriété <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> la valeur `true`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-139">To generate internal types instead, set the <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> property to `true`.</span></span>  
  
 <span data-ttu-id="8dcdf-140">L'exemple suivant affiche un schéma transformé en une classe interne lorsque la propriété <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> a la valeur `true.`</span><span class="sxs-lookup"><span data-stu-id="8dcdf-140">The following example shows a schema transformed into an internal class when the <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> property is set to `true.`</span></span>  
  
 [!code-csharp[c_SchemaImportExport#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#2)]
 [!code-vb[c_SchemaImportExport#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#2)]  
  
#### <a name="controlling-namespaces-namespaces-or-the-namespace-switch"></a><span data-ttu-id="8dcdf-141">Contrôle des espaces de noms (espaces de noms ou le commutateur /namespace)</span><span class="sxs-lookup"><span data-stu-id="8dcdf-141">Controlling Namespaces (Namespaces or the /namespace switch)</span></span>  

 <span data-ttu-id="8dcdf-142">Cela correspond au commutateur **/namespace** sur l' `Svcutil.exe` outil.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-142">This corresponds to the **/namespace** switch on the `Svcutil.exe` tool.</span></span>  
  
 <span data-ttu-id="8dcdf-143">Normalement, les types générés à partir du schéma sont générés dans des espaces de noms .NET Framework, chaque espace de noms XSD correspondant à un espace de noms .NET Framework spécifique selon un mappage décrit dans [référence de schéma de contrat de données](data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-143">Normally, types generated from schema are generated into .NET Framework namespaces, with each XSD namespace corresponding to a particular .NET Framework namespace according to a mapping described in [Data Contract Schema Reference](data-contract-schema-reference.md).</span></span> <span data-ttu-id="8dcdf-144">Vous pouvez personnaliser ce mappage par la propriété <xref:System.Runtime.Serialization.ImportOptions.Namespaces%2A> à un <xref:System.Collections.Generic.Dictionary%602>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-144">You can customize this mapping by the <xref:System.Runtime.Serialization.ImportOptions.Namespaces%2A> property to a <xref:System.Collections.Generic.Dictionary%602>.</span></span> <span data-ttu-id="8dcdf-145">Si un espace de noms XSD donné est trouvé dans le dictionnaire, l’espace de noms .NET Framework correspondant est également extrait de votre dictionnaire.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-145">If a given XSD namespace is found in the dictionary, the matching .NET Framework namespace is also taken from your dictionary.</span></span>  
  
 <span data-ttu-id="8dcdf-146">Par exemple, considérons le schéma suivant.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-146">For example, consider the following schema.</span></span>  
  
 [!code-xml[c_SchemaImportExport#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#10)]  
  
 <span data-ttu-id="8dcdf-147">L’exemple suivant utilise la `Namespaces` propriété pour mapper l' `http://schemas.contoso.com/carSchema` espace de noms à « contoso. Cars ».</span><span class="sxs-lookup"><span data-stu-id="8dcdf-147">The following example uses the `Namespaces` property to map the `http://schemas.contoso.com/carSchema` namespace to "Contoso.Cars".</span></span>  
  
 [!code-csharp[c_SchemaImportExport#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#8)]
 [!code-vb[c_SchemaImportExport#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#8)]  
  
#### <a name="adding-the-serializableattribute-generateserializable-or-the-serializable-switch"></a><span data-ttu-id="8dcdf-148">Ajout de SerializableAttribute (GenerateSerializable ou le commutateur /serializable)</span><span class="sxs-lookup"><span data-stu-id="8dcdf-148">Adding the SerializableAttribute (GenerateSerializable or the /serializable switch)</span></span>  

 <span data-ttu-id="8dcdf-149">Cela correspond au commutateur **/Serializable** sur l' `Svcutil.exe` outil.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-149">This corresponds to the **/serializable** switch on the `Svcutil.exe` tool.</span></span>  
  
 <span data-ttu-id="8dcdf-150">Parfois, il est important que les types générés à partir du schéma soient utilisables avec .NET Framework moteurs de sérialisation du Runtime (par exemple, les <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter?displayProperty=nameWithType> <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> classes et).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-150">Sometimes it is important for the types generated from the schema to be usable with .NET Framework runtime serialization engines (for example, the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter?displayProperty=nameWithType> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> classes).</span></span> <span data-ttu-id="8dcdf-151">Cela est utile lors de l’utilisation de types pour la communication à distance .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-151">This is useful when using types for .NET Framework remoting.</span></span> <span data-ttu-id="8dcdf-152">Pour ce faire, vous devez appliquer l'attribut <xref:System.SerializableAttribute> aux types générés en plus de l'attribut <xref:System.Runtime.Serialization.DataContractAttribute> standard.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-152">To enable this, you must apply the <xref:System.SerializableAttribute> attribute to the generated types in addition to the regular <xref:System.Runtime.Serialization.DataContractAttribute> attribute.</span></span> <span data-ttu-id="8dcdf-153">L'attribut est généré automatiquement si l'option d'importation `GenerateSerializable` a la valeur `true`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-153">The attribute is generated automatically if the `GenerateSerializable` import option is set to `true`.</span></span>  
  
 <span data-ttu-id="8dcdf-154">L'exemple suivant affiche la classe `Vehicle` générée lorsque l'option d'importation `GenerateSerializable` a la valeur `true`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-154">The following example shows the `Vehicle` class generated with the `GenerateSerializable` import option set to `true`.</span></span>  
  
 [!code-csharp[c_SchemaImportExport#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#4)]
 [!code-vb[c_SchemaImportExport#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#4)]  
  
#### <a name="adding-data-binding-support-enabledatabinding-or-the-enabledatabinding-switch"></a><span data-ttu-id="8dcdf-155">Ajout de la prise en charge de la liaisons de données (EnableDataBinding ou le commutateur /enableDataBinding)</span><span class="sxs-lookup"><span data-stu-id="8dcdf-155">Adding Data Binding Support (EnableDataBinding or the /enableDataBinding switch)</span></span>  

 <span data-ttu-id="8dcdf-156">Cela correspond au commutateur **/enableDataBinding** sur l’outil Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-156">This corresponds to the **/enableDataBinding** switch on the Svcutil.exe tool.</span></span>  
  
 <span data-ttu-id="8dcdf-157">Il est parfois utile de lier les types générés à partir du schéma à des composants d'interface utilisateur graphique afin que toute mise à jour des instances de ces types mette à jour automatiquement l'interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-157">Sometimes, you may want to bind the types generated from the schema to graphical user interface components so that any update to instances of these types will automatically update the UI.</span></span> <span data-ttu-id="8dcdf-158">`XsdDataContractImporter` peut générer des types qui implémentent l'interface <xref:System.ComponentModel.INotifyPropertyChanged> afin que toute modification de propriété déclenche un événement.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-158">The `XsdDataContractImporter` can generate types that implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface in such a way that any property change triggers an event.</span></span> <span data-ttu-id="8dcdf-159">Si vous générez des types à utiliser avec un environnement de programmation d’interface utilisateur client qui prend en charge cette interface (par exemple, Windows Presentation Foundation WPF), affectez à la propriété la valeur <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> `true` pour activer cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-159">If you are generating types for use with a client UI programming environment that supports this interface (such as Windows Presentation Foundation (WPF)), set the <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> property to `true` to enable this feature.</span></span>  
  
 <span data-ttu-id="8dcdf-160">L'exemple suivant affiche la classe `Vehicle` générée lorsque <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> a la valeur `true`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-160">The following example shows the `Vehicle` class generated with the <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> set to `true`.</span></span>  
  
 [!code-csharp[C_SchemaImportExport#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#5)]
 [!code-vb[C_SchemaImportExport#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#5)]  
  
### <a name="import-options-choosing-collection-types"></a><span data-ttu-id="8dcdf-161">Options d’importation : choix des types de collection</span><span class="sxs-lookup"><span data-stu-id="8dcdf-161">Import Options: Choosing Collection Types</span></span>  

 <span data-ttu-id="8dcdf-162">Deux modèles spéciaux au format XML représentent des collections d’éléments : les listes d’éléments et les associations entre un élément et un autre.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-162">Two special patterns in XML represent collections of items: lists of items and associations between one item and another.</span></span> <span data-ttu-id="8dcdf-163">Les éléments suivants sont un exemple d'une liste de chaînes.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-163">The following is an example of a list of strings.</span></span>  
  
 [!code-xml[C_SchemaImportExport#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#11)]  
  
 <span data-ttu-id="8dcdf-164">Les éléments suivants sont un exemple d'une association entre une chaîne et un entier (`city name` et `population`).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-164">The following is an example of an association between a string and an integer (`city name` and `population`).</span></span>  
  
 [!code-xml[C_SchemaImportExport#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#12)]  
  
> [!NOTE]
> <span data-ttu-id="8dcdf-165">Toute association peut aussi être considérée comme une liste.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-165">Any association could also be considered a list.</span></span> <span data-ttu-id="8dcdf-166">Par exemple, vous pouvez considérer l'association précédente comme une liste d'objets `city` complexes qui contiennent deux champs (un champ de chaîne et un champ d'entier).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-166">For example, you can view the preceding association as a list of complex `city` objects that happen to have two fields (a string field and an integer field).</span></span> <span data-ttu-id="8dcdf-167">Les deux modèles sont représentés dans le schéma XSD.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-167">Both patterns have a representation in the XSD Schema.</span></span> <span data-ttu-id="8dcdf-168">Il n’existe aucun moyen de faire la différence entre une liste et une association. de ce fait, ces modèles sont toujours traités comme des listes, sauf si une annotation spéciale spécifique à WCF est présente dans le schéma.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-168">There is no way to differentiate between a list and an association, so such patterns are always treated as lists unless a special annotation specific to WCF is present in the schema.</span></span> <span data-ttu-id="8dcdf-169">L’annotation indique qu’un modèle donné représente une association.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-169">The annotation indicates that a given pattern represents an association.</span></span> <span data-ttu-id="8dcdf-170">Pour plus d’informations, consultez [Référence du schéma de contrat de données](data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-170">For more information, see [Data Contract Schema Reference](data-contract-schema-reference.md).</span></span>  
  
 <span data-ttu-id="8dcdf-171">Normalement, une liste est importée sous la forme d’un contrat de données de collection qui dérive d’une liste générique ou d’un tableau de .NET Framework, selon que le schéma respecte ou non le modèle d’affectation de noms standard pour les collections.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-171">Normally, a list is imported as a collection data contract that derives from a Generic List or as a .NET Framework array, depending on whether or not the schema follows the standard naming pattern for collections.</span></span> <span data-ttu-id="8dcdf-172">Cela est décrit plus en détail dans les [types de collections dans les contrats de données](collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-172">This is described in more detail in [Collection Types in Data Contracts](collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="8dcdf-173">Les associations sont importées normalement comme <xref:System.Collections.Generic.Dictionary%602> ou comme un contrat de données de collection qui dérive de l'objet dictionnaire.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-173">Associations are normally imported as either a <xref:System.Collections.Generic.Dictionary%602> or a collection data contract that derives from the dictionary object.</span></span> <span data-ttu-id="8dcdf-174">Par exemple, considérons le schéma suivant.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-174">For example, consider the following schema.</span></span>  
  
 [!code-xml[c_SchemaImportExport#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#13)]  
  
 <span data-ttu-id="8dcdf-175">Celui-ci serait importé comme suit (les champs sont montrés au lieu des propriétés à des fin de lisibilité).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-175">This would be imported as follows (fields are shown instead of properties for readability).</span></span>  
  
 [!code-csharp[c_SchemaImportExport#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#6)]
 [!code-vb[c_SchemaImportExport#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#6)]  
  
 <span data-ttu-id="8dcdf-176">Il est possible de personnaliser les types de collection générés pour ces modèles de schéma.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-176">It is possible to customize the collection types that are generated for such schema patterns.</span></span> <span data-ttu-id="8dcdf-177">Par exemple, vous pouvez générer des collections qui dérivent de <xref:System.ComponentModel.BindingList%601> au lieu de la classe <xref:System.Collections.Generic.List%601> afin de lier le type à une zone de liste et qu'il soit mis à jour automatiquement si le contenu de la collection est modifié.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-177">For example, you may want to generate collections deriving from the <xref:System.ComponentModel.BindingList%601> instead of the <xref:System.Collections.Generic.List%601> class in order to bind the type to a list box and have it be automatically updated when the contents of the collection change.</span></span> <span data-ttu-id="8dcdf-178">Pour cela, affectez à la propriété <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> de la classe <xref:System.Runtime.Serialization.ImportOptions> une liste de types de collection à utiliser (définis ci-dessous comme les types référencés).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-178">To do this, set the <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> property of the <xref:System.Runtime.Serialization.ImportOptions> class to a list of collection types to be used (hereafter known as the referenced types).</span></span> <span data-ttu-id="8dcdf-179">Lors de l’importation d’une collection, cette liste de types de collection référencés est analysée et la collection qui correspond le mieux est utilisée, s’il en existe une.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-179">When importing any collection, this list of referenced collection types is scanned and the best-matching collection is used if one is found.</span></span> <span data-ttu-id="8dcdf-180">Les associations sont mappées uniquement aux types qui implémentent l'interface générique ou non générique <xref:System.Collections.IDictionary>, tandis que les listes sont mappées à tout type de collection pris en charge.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-180">Associations are matched only against types that implement either the generic or the nongeneric <xref:System.Collections.IDictionary> interface, while lists are matched against any supported collection type.</span></span>  
  
 <span data-ttu-id="8dcdf-181">Par exemple, si la propriété <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> a la valeur d'un <xref:System.ComponentModel.BindingList%601>, le type `people` dans l'exemple précédent est généré comme suit.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-181">For example, if the <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> property is set to a <xref:System.ComponentModel.BindingList%601>, the `people` type in the preceding example is generated as follows.</span></span>  
  
 [!code-csharp[C_SchemaImportExport#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#7)]
 [!code-vb[C_SchemaImportExport#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#7)]  
  
 <span data-ttu-id="8dcdf-182">Un type générique fermé est considéré comme la meilleure correspondance.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-182">A closed generic is considered the best match.</span></span> <span data-ttu-id="8dcdf-183">Par exemple, si les types `BindingList(Of Integer)` et <xref:System.Collections.ArrayList> sont passés à la collection de types référencés, toutes les listes d'entiers présentes dans le schéma sont importées comme `BindingList(Of Integer)`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-183">For example, if the types `BindingList(Of Integer)` and <xref:System.Collections.ArrayList> are passed to the collection of referenced types, any lists of integers found in schema are imported as a `BindingList(Of Integer)`.</span></span> <span data-ttu-id="8dcdf-184">Toutes les autres listes, par exemple `List(Of String)`, sont importées comme `ArrayList`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-184">Any other lists, for example, a `List(Of String)`, are imported as an `ArrayList`.</span></span>  
  
 <span data-ttu-id="8dcdf-185">Si un type qui implémente l'interface `IDictionary` générique est ajouté à la collection de types référencés, ses paramètres de type doivent être complètement ouverts ou complètement fermés.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-185">If a type that implements the generic `IDictionary` interface is added to the collection of referenced types, its type parameters must either be fully open or fully closed.</span></span>  
  
 <span data-ttu-id="8dcdf-186">Les doublons ne sont pas autorisés.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-186">Duplicates are not allowed.</span></span> <span data-ttu-id="8dcdf-187">Par exemple, vous ne pouvez pas ajouter à la fois `List(Of Integer)` et `Collection(Of Integer)` aux types référencés.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-187">For example, you cannot add both a `List(Of Integer)` and a `Collection(Of Integer)` to the referenced types.</span></span> <span data-ttu-id="8dcdf-188">Il serait alors impossible de déterminer lequel doit être utilisé lorsqu'une liste d'entiers est présente dans le schéma.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-188">That would make it impossible to determine which should be used when a list of integers is found in schema.</span></span> <span data-ttu-id="8dcdf-189">Les doublons sont détectés uniquement si un type présent dans le schéma expose le problème des doublons.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-189">Duplicates will be detected only if there is a type in schema that exposes the duplicates problem.</span></span> <span data-ttu-id="8dcdf-190">Par exemple, si le schéma importé ne contient pas de listes d’entiers, il est possible que la collection de types référencés contiennent à la fois `List(Of Integer)` et `Collection(Of Integer)`, mais aucun n’aura d’effet.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-190">For example, if the imported schema does not contain lists of integers, it is allowed to have both the `List(Of Integer)` and the `Collection(Of Integer)` in the referenced types collection, but neither will have any effect.</span></span>  
  
 <span data-ttu-id="8dcdf-191">Le mécanisme des types de collection référencés fonctionne également bien pour les collections de types complexes (y compris les collections d’autres collections), et pas seulement pour les collections de primitives.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-191">The referenced collection types mechanism works equally well for collections of complex types (including collections of other collections), and not just for collections of primitives.</span></span>  
  
 <span data-ttu-id="8dcdf-192">La `ReferencedCollectionTypes` propriété correspond au commutateur **/CollectionType** sur l’outil SvcUtil.exe.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-192">The `ReferencedCollectionTypes` property corresponds to the **/collectionType** switch on the SvcUtil.exe tool.</span></span> <span data-ttu-id="8dcdf-193">Notez que pour référencer plusieurs types de collection, le commutateur **/CollectionType** doit être spécifié plusieurs fois.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-193">Note that to reference multiple collection types, the **/collectionType** switch must be specified multiple times.</span></span> <span data-ttu-id="8dcdf-194">Si le type n’est pas dans le MsCorLib.dll, son assembly doit également être référencé à l’aide du commutateur **/Reference** .</span><span class="sxs-lookup"><span data-stu-id="8dcdf-194">If the type is not in the MsCorLib.dll, its assembly must also be referenced using the **/reference** switch.</span></span>  
  
#### <a name="import-options-referencing-existing-types"></a><span data-ttu-id="8dcdf-195">Options d'importation : référencement de types existants</span><span class="sxs-lookup"><span data-stu-id="8dcdf-195">Import Options: Referencing Existing Types</span></span>  

 <span data-ttu-id="8dcdf-196">Parfois, les types dans le schéma correspondent à des types de .NET Framework existants, et il n’est pas nécessaire de générer ces types à partir de zéro.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-196">Occasionally, types in schema correspond to existing .NET Framework types, and there is no need to generate these types from scratch.</span></span> <span data-ttu-id="8dcdf-197">(Cette section s'applique uniquement aux types qui ne sont pas des collections.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-197">(This section applies only to noncollection types.</span></span> <span data-ttu-id="8dcdf-198">Pour les types de collection, consultez la section précédente.)</span><span class="sxs-lookup"><span data-stu-id="8dcdf-198">For collection types, see the preceding section.)</span></span>  
  
 <span data-ttu-id="8dcdf-199">Par exemple, vous avez peut-être un type standard de contrat de données « Person » dans l'entreprise que vous souhaitez toujours utiliser pour représenter une personne.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-199">For example, you may have a standard company-wide "Person" data contract type that you always want used when representing a person.</span></span> <span data-ttu-id="8dcdf-200">Chaque fois que certains services font appel à ce type, et que son schéma apparaît dans les métadonnées de service, vous pouvez réutiliser le type `Person` existant lorsque vous importez ce schéma au lieu d'en générer un nouveau pour chaque service.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-200">Whenever some service makes use of this type, and its schema appears in the service metadata, you may want to reuse the existing `Person` type when importing this schema instead of generating a new one for every service.</span></span>  
  
 <span data-ttu-id="8dcdf-201">Pour ce faire, transmettez une liste de types de .NET Framework que vous souhaitez réutiliser dans la collection que la <xref:System.Runtime.Serialization.ImportOptions.ReferencedTypes%2A> propriété retourne sur la <xref:System.Runtime.Serialization.ImportOptions> classe.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-201">To do this, pass a list of .NET Framework types that you want to reuse into the collection the <xref:System.Runtime.Serialization.ImportOptions.ReferencedTypes%2A> property returns on the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span> <span data-ttu-id="8dcdf-202">Si chacun de ces types a un nom et un espace de noms de contrat de données qui correspondent au nom et à l'espace de noms d'un type de schéma, une comparaison structurelle est effectuée.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-202">If any of these types have a data contract name and namespace that matches the name and namespace of a schema type, a structural comparison is performed.</span></span> <span data-ttu-id="8dcdf-203">S’il est déterminé que les types ont à la fois des noms correspondants et des structures correspondantes, le type de .NET Framework existant est réutilisé au lieu d’en générer un nouveau.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-203">If it is determined that the types have both matching names and matching structures, the existing .NET Framework type is reused instead of generating a new one.</span></span> <span data-ttu-id="8dcdf-204">Si seul le nom correspond mais pas la structure, une exception est levée.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-204">If only the name matches but not the structure, an exception is thrown.</span></span> <span data-ttu-id="8dcdf-205">Notez qu'il n'y a aucune ressource pour le suivi des versions lors du référencement des types (par exemple, si vous ajoutez des membres de données facultatifs).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-205">Note that there is no allowance for versioning when referencing types (for example, adding new optional data members).</span></span> <span data-ttu-id="8dcdf-206">Les structures doivent correspondre exactement.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-206">The structures must match exactly.</span></span>  
  
 <span data-ttu-id="8dcdf-207">Il est permis d’ajouter plusieurs types avec le même nom et espace de noms de contrat de données à la collection de types référencée, tant qu’aucun type de schéma n’est importé avec ce nom et cet espace de noms.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-207">It is legal to add multiple types with the same data contract name and namespace to the referenced types collection, as long as no schema types are imported with that name and namespace.</span></span> <span data-ttu-id="8dcdf-208">Vous pouvez ainsi ajouter facilement tous les types dans un assembly à la collection sans tenir compte des doublons pour les types qui n’apparaissent pas réellement dans le schéma.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-208">This allows you to easily add all the types in an assembly to the collection without worrying about duplicates for types that do not actually occur in schema.</span></span>  
  
 <span data-ttu-id="8dcdf-209">La `ReferencedTypes` propriété correspond au commutateur **/Reference** dans certains modes de fonctionnement de l’outil Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-209">The `ReferencedTypes` property corresponds to the **/reference** switch in certain modes of operation of the Svcutil.exe tool.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8dcdf-210">Lorsque vous utilisez la Svcutil.exe ou (dans Visual Studio) les outils de **Ajouter une référence de service** , tous les types dans MsCorLib.dll sont automatiquement référencés.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-210">When using the Svcutil.exe or (in Visual Studio) the **Add Service Reference** tools, all of the types in MsCorLib.dll are automatically referenced.</span></span>  
  
#### <a name="import-options-importing-non-datacontract-schema-as-ixmlserializable-types"></a><span data-ttu-id="8dcdf-211">Options d'importation : importer le schéma non DataContract comme types IXmlSerializable</span><span class="sxs-lookup"><span data-stu-id="8dcdf-211">Import Options: Importing Non-DataContract Schema as IXmlSerializable types</span></span>  

 <span data-ttu-id="8dcdf-212"><xref:System.Runtime.Serialization.XsdDataContractImporter> prend en charge un sous-ensemble limité du schéma.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-212">The <xref:System.Runtime.Serialization.XsdDataContractImporter> supports a limited subset of the schema.</span></span> <span data-ttu-id="8dcdf-213">Si des constructions de schéma non prises en charge sont présentes (par exemple, les attributs XML), la tentative d'importation échoue et génère une exception.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-213">If unsupported schema constructs are present (for example, XML attributes), the import attempt fails with an exception.</span></span> <span data-ttu-id="8dcdf-214">Cependant, affecter à la propriété <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> la valeur `true` étend la plage de schéma prise en charge.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-214">However, setting the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> property to `true` extends the range of schema supported.</span></span> <span data-ttu-id="8dcdf-215">Une fois qu'elle a la valeur `true`, la propriété <xref:System.Runtime.Serialization.XsdDataContractImporter> génère des types qui implémentent l'interface <xref:System.Xml.Serialization.IXmlSerializable>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-215">When set to `true`, the <xref:System.Runtime.Serialization.XsdDataContractImporter> generates types that implement the <xref:System.Xml.Serialization.IXmlSerializable> interface.</span></span> <span data-ttu-id="8dcdf-216">Cette opération permet d'accéder directement à la représentation XML de ces types.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-216">This enables direct access to the XML representation of these types.</span></span>  
  
##### <a name="design-considerations"></a><span data-ttu-id="8dcdf-217">Remarques sur la conception</span><span class="sxs-lookup"><span data-stu-id="8dcdf-217">Design Considerations</span></span>  
  
- <span data-ttu-id="8dcdf-218">Il peut s'avérer difficile d'utiliser directement la représentation XML faiblement typée.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-218">It may be difficult to work with the weakly typed XML representation directly.</span></span> <span data-ttu-id="8dcdf-219">Vous pouvez faire appel à un moteur de sérialisation différent, tel que <xref:System.Xml.Serialization.XmlSerializer>, pour utiliser d'une manière fortement typée un schéma incompatible avec les contrats de données.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-219">Consider using an alternative serialization engine, such as the <xref:System.Xml.Serialization.XmlSerializer>, to work with schema not compatible with data contracts in a strongly typed way.</span></span> <span data-ttu-id="8dcdf-220">Pour plus d’informations, consultez [utilisation de la classe XmlSerializer](using-the-xmlserializer-class.md).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-220">For more information, see [Using the XmlSerializer Class](using-the-xmlserializer-class.md).</span></span>  
  
- <span data-ttu-id="8dcdf-221">Certaines constructions de schéma ne peuvent pas être importées par <xref:System.Runtime.Serialization.XsdDataContractImporter> même lorsque la propriété <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> a la valeur `true`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-221">Some schema constructs cannot be imported by the <xref:System.Runtime.Serialization.XsdDataContractImporter> even when the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> property is set to `true`.</span></span> <span data-ttu-id="8dcdf-222">Là encore, utilisez <xref:System.Xml.Serialization.XmlSerializer> pour ces cas.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-222">Again, consider using the <xref:System.Xml.Serialization.XmlSerializer> for such cases.</span></span>  
  
- <span data-ttu-id="8dcdf-223">Les constructions de schéma exactes qui sont prises en charge lorsque <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> est `true` ou `false` sont décrites dans [référence de schéma de contrat de données](data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-223">The exact schema constructs that are supported both when <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> is `true` or `false` are described in [Data Contract Schema Reference](data-contract-schema-reference.md).</span></span>  
  
- <span data-ttu-id="8dcdf-224">Le schéma pour les types <xref:System.Xml.Serialization.IXmlSerializable> générés ne conservent pas le respect lors de l'importation ou de l'exportation.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-224">Schema for generated <xref:System.Xml.Serialization.IXmlSerializable> types do not retain fidelity when imported and exported.</span></span> <span data-ttu-id="8dcdf-225">Autrement dit, l'exportation du schéma à partir des types générés et son importation sous la forme de classes ne retournent pas le schéma d'origine.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-225">That is, exporting the schema from the generated types and importing as classes does not return the original schema.</span></span>  
  
 <span data-ttu-id="8dcdf-226">Il est possible d'associer l'option <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> à l'option <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> décrite précédemment.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-226">It is possible to combine the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option with the <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> option previously described.</span></span> <span data-ttu-id="8dcdf-227">Pour les types qui doivent être générés comme des implémentations <xref:System.Xml.Serialization.IXmlSerializable>, le contrôle structurel est ignoré lors de l'utilisation de la fonctionnalité <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-227">For types that have to be generated as <xref:System.Xml.Serialization.IXmlSerializable> implementations, the structural check is skipped when using the <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> feature.</span></span>  
  
 <span data-ttu-id="8dcdf-228">L' <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option correspond au commutateur **/importXmlTypes** sur l’outil Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-228">The <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option corresponds to the **/importXmlTypes** switch on the Svcutil.exe tool.</span></span>  
  
##### <a name="working-with-generated-ixmlserializable-types"></a><span data-ttu-id="8dcdf-229">Utilisation des types IXmlSerializable générés</span><span class="sxs-lookup"><span data-stu-id="8dcdf-229">Working with Generated IXmlSerializable Types</span></span>  

 <span data-ttu-id="8dcdf-230">Les types `IXmlSerializable` générés contiennent un champ privé, nommé « nodesField », qui retourne un tableau d'objets <xref:System.Xml.XmlNode>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-230">The generated `IXmlSerializable` types contain a private field, named "nodesField," that returns an array of <xref:System.Xml.XmlNode> objects.</span></span> <span data-ttu-id="8dcdf-231">Lorsque vous désérialisez une instance de ce type, vous pouvez accéder directement aux données XML par l'intermédiaire de ce champ en utilisant le modèle objet de document XML.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-231">When deserializing an instance of such a type, you can access the XML data directly through this field by using the XML Document Object Model.</span></span> <span data-ttu-id="8dcdf-232">Lorsque vous sérialisez une instance de ce type, vous pouvez affecter à ce champ les données XML souhaitées pour qu'il soit sérialisé.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-232">When serializing an instance of this type, you can set this field to the desired XML data and it will be serialized.</span></span>  
  
 <span data-ttu-id="8dcdf-233">Cette opération est possible grâce à l'implémentation `IXmlSerializable`.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-233">This is accomplished through the `IXmlSerializable` implementation.</span></span> <span data-ttu-id="8dcdf-234">Dans le type `IXmlSerializable` généré, l'implémentation <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> appelle la méthode <xref:System.Runtime.Serialization.XmlSerializableServices.ReadNodes%2A> de la classe <xref:System.Runtime.Serialization.XmlSerializableServices>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-234">In the generated `IXmlSerializable` type, the <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> implementation calls the <xref:System.Runtime.Serialization.XmlSerializableServices.ReadNodes%2A> method of the <xref:System.Runtime.Serialization.XmlSerializableServices> class.</span></span> <span data-ttu-id="8dcdf-235">La méthode est une méthode d'assistance qui convertit le code XML fournie par <xref:System.Xml.XmlReader> sous la forme d'un tableau d'objets <xref:System.Xml.XmlNode>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-235">The method is a helper method that converts XML provided through an <xref:System.Xml.XmlReader> to an array of <xref:System.Xml.XmlNode> objects.</span></span> <span data-ttu-id="8dcdf-236">L'implémentation <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A> effectue l'opération inverse et convertit le tableau d'objets `XmlNode` sous la forme d'une séquence d'appels <xref:System.Xml.XmlWriter>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-236">The <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A> implementation does the opposite and converts the array of `XmlNode` objects to a sequence of <xref:System.Xml.XmlWriter> calls.</span></span> <span data-ttu-id="8dcdf-237">Cette opération est possible grâce à la méthode <xref:System.Runtime.Serialization.XmlSerializableServices.WriteNodes%2A>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-237">This is accomplished using the <xref:System.Runtime.Serialization.XmlSerializableServices.WriteNodes%2A> method.</span></span>  
  
 <span data-ttu-id="8dcdf-238">Il est possible d'exécuter le processus d'exportation de schéma sur les classes `IXmlSerializable` générées.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-238">It is possible to run the schema export process on the generated `IXmlSerializable` classes.</span></span> <span data-ttu-id="8dcdf-239">Comme indiqué précédemment, le schéma d'origine n'est pas récupéré.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-239">As previously stated, you will not get the original schema back.</span></span> <span data-ttu-id="8dcdf-240">Au lieu de cela, vous obtiendrez le type XSD standard « anyType », qui est un caractère générique pour tout type XSD.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-240">Instead, you will get the "anyType" standard XSD type, which is a wildcard for any XSD type.</span></span>  
  
 <span data-ttu-id="8dcdf-241">Pour ce faire, <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> vous devez appliquer l’attribut aux `IXmlSerializable` classes générées et spécifier une méthode qui appelle la <xref:System.Runtime.Serialization.XmlSerializableServices.AddDefaultSchema%2A> méthode afin de générer le type « anyType ».</span><span class="sxs-lookup"><span data-stu-id="8dcdf-241">This is accomplished by applying the <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> attribute to the generated `IXmlSerializable` classes and specifying a method that calls the <xref:System.Runtime.Serialization.XmlSerializableServices.AddDefaultSchema%2A> method to generate the "anyType" type.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8dcdf-242">Le type <xref:System.Runtime.Serialization.XmlSerializableServices> est destiné uniquement à la prise en charge de cette fonctionnalité particulière.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-242">The <xref:System.Runtime.Serialization.XmlSerializableServices> type exists solely to support this particular feature.</span></span> <span data-ttu-id="8dcdf-243">Il n'est pas recommandé de l'utiliser à d'autres fins.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-243">It is not recommended for use for any other purpose.</span></span>  
  
#### <a name="import-options-advanced-options"></a><span data-ttu-id="8dcdf-244">Options d'importation : options avancées</span><span class="sxs-lookup"><span data-stu-id="8dcdf-244">Import Options: Advanced Options</span></span>  

 <span data-ttu-id="8dcdf-245">Les éléments suivants représentent les options d'importation avancées :</span><span class="sxs-lookup"><span data-stu-id="8dcdf-245">The following are advanced import options:</span></span>  
  
- <span data-ttu-id="8dcdf-246">Propriété <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-246"><xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> property.</span></span> <span data-ttu-id="8dcdf-247">Spécifiez la <xref:System.CodeDom.Compiler.CodeDomProvider> à utiliser pour générer le code destiné aux classes générées.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-247">Specify the <xref:System.CodeDom.Compiler.CodeDomProvider> to use to generate the code for the generated classes.</span></span> <span data-ttu-id="8dcdf-248">Le mécanisme d’importation cherche à éviter les fonctionnalités que la <xref:System.CodeDom.Compiler.CodeDomProvider> ne prend pas en charge.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-248">The import mechanism attempts to avoid features that the <xref:System.CodeDom.Compiler.CodeDomProvider> does not support.</span></span> <span data-ttu-id="8dcdf-249">Si le <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> n’est pas défini, l’ensemble complet des fonctionnalités de .NET Framework est utilisé sans aucune restriction.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-249">If the <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> is not set, the full set of .NET Framework features is used with no restrictions.</span></span>  
  
- <span data-ttu-id="8dcdf-250">Propriété <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A>.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-250"><xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> property.</span></span> <span data-ttu-id="8dcdf-251">Une implémentation <xref:System.Runtime.Serialization.IDataContractSurrogate> peut être spécifiée avec cette propriété.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-251">An <xref:System.Runtime.Serialization.IDataContractSurrogate> implementation can be specified with this property.</span></span> <span data-ttu-id="8dcdf-252"><xref:System.Runtime.Serialization.IDataContractSurrogate> personnalise le processus d'importation.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-252">The <xref:System.Runtime.Serialization.IDataContractSurrogate> customizes the import process.</span></span> <span data-ttu-id="8dcdf-253">Pour plus d’informations, consultez [substituts de contrat de données](../extending/data-contract-surrogates.md).</span><span class="sxs-lookup"><span data-stu-id="8dcdf-253">For more information, see [Data Contract Surrogates](../extending/data-contract-surrogates.md).</span></span> <span data-ttu-id="8dcdf-254">Par défaut, aucun substitut n'est utilisé.</span><span class="sxs-lookup"><span data-stu-id="8dcdf-254">By default, no surrogate is used.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8dcdf-255">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8dcdf-255">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractSerializer>
- <xref:System.Runtime.Serialization.XsdDataContractImporter>
- <xref:System.Runtime.Serialization.XsdDataContractExporter>
- <xref:System.Runtime.Serialization.ImportOptions>
- [<span data-ttu-id="8dcdf-256">Référence des schémas de contrats de données</span><span class="sxs-lookup"><span data-stu-id="8dcdf-256">Data Contract Schema Reference</span></span>](data-contract-schema-reference.md)
- [<span data-ttu-id="8dcdf-257">Substituts de contrats de données</span><span class="sxs-lookup"><span data-stu-id="8dcdf-257">Data Contract Surrogates</span></span>](../extending/data-contract-surrogates.md)
- [<span data-ttu-id="8dcdf-258">Importation et exportation de schémas</span><span class="sxs-lookup"><span data-stu-id="8dcdf-258">Schema Import and Export</span></span>](schema-import-and-export.md)
- [<span data-ttu-id="8dcdf-259">Exportation de schémas à partir de classes</span><span class="sxs-lookup"><span data-stu-id="8dcdf-259">Exporting Schemas from Classes</span></span>](exporting-schemas-from-classes.md)
- [<span data-ttu-id="8dcdf-260">Référence des schémas de contrats de données</span><span class="sxs-lookup"><span data-stu-id="8dcdf-260">Data Contract Schema Reference</span></span>](data-contract-schema-reference.md)
