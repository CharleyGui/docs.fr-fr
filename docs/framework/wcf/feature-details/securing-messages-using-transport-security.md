---
title: Sécurisation des messages à l'aide de la sécurité de transport
ms.date: 03/30/2017
ms.assetid: 9029771a-097e-448a-a13a-55d2878330b8
ms.openlocfilehash: a8a7e9422679927636ae2dc9b6a2ab34202ee74c
ms.sourcegitcommit: 09d699aca28ae9723399bbd9d3d44aa0cbd3848d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/19/2019
ms.locfileid: "68331518"
---
# <a name="securing-messages-using-transport-security"></a><span data-ttu-id="469a2-102">Sécurisation des messages à l'aide de la sécurité de transport</span><span class="sxs-lookup"><span data-stu-id="469a2-102">Securing Messages Using Transport Security</span></span>
<span data-ttu-id="469a2-103">Cette section traite de la sécurité de transport Message Queuing (MSMQ) que vous pouvez utiliser pour sécuriser des messages envoyés vers une file d'attente.</span><span class="sxs-lookup"><span data-stu-id="469a2-103">This section discusses Message Queuing (MSMQ) transport security that you can use to secure messages sent to a queue.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="469a2-104">Avant de lire cette rubrique, il est recommandé de lire [concepts de sécurité](../../../../docs/framework/wcf/feature-details/security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="469a2-104">Before reading through this topic, it is recommended that you read [Security Concepts](../../../../docs/framework/wcf/feature-details/security-concepts.md).</span></span>  
  
 <span data-ttu-id="469a2-105">L’illustration suivante fournit un modèle conceptuel de communication en file d’attente à l’aide de Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="469a2-105">The following illustration provides a conceptual model of queued communication using Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="469a2-106">Cette illustration et la terminologie sont utilisées pour expliquer les concepts de sécurité de transport.</span><span class="sxs-lookup"><span data-stu-id="469a2-106">This illustration and terminology is used to explain transport security concepts.</span></span>  
  
 <span data-ttu-id="469a2-107">![Diagramme d’application en file d’attente](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "File d’attente distribuée-figure")</span><span class="sxs-lookup"><span data-stu-id="469a2-107">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="469a2-108">Lors de l’envoi de messages en file <xref:System.ServiceModel.NetMsmqBinding>d’attente à l’aide de WCF avec, le message WCF est joint en tant que corps du message MSMQ.</span><span class="sxs-lookup"><span data-stu-id="469a2-108">When sending queued messages using WCF with <xref:System.ServiceModel.NetMsmqBinding>, the WCF message is attached as a body of the MSMQ message.</span></span> <span data-ttu-id="469a2-109">La sécurité de transport sécurise le message MSMQ entier (en-têtes de message ou propriétés MSMQ et le corps du message).</span><span class="sxs-lookup"><span data-stu-id="469a2-109">Transport security secures the entire MSMQ message (MSMQ message headers or properties and the message body).</span></span> <span data-ttu-id="469a2-110">Étant donné qu’il s’agit du corps du message MSMQ, l’utilisation de la sécurité de transport sécurise également le message WCF.</span><span class="sxs-lookup"><span data-stu-id="469a2-110">Because it is the body of the MSMQ message, using transport security also secures the WCF message.</span></span>  
  
 <span data-ttu-id="469a2-111">Le concept clé de la sécurité de transport est que le client doit satisfaire certaines conditions de sécurité pour envoyer le message dans la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="469a2-111">The key concept behind transport security is that the client has to meet security requirements to get the message to the target queue.</span></span> <span data-ttu-id="469a2-112">Cela diffère de la sécurité de message, où le message est sécurisé pour l'application qui reçoit le message.</span><span class="sxs-lookup"><span data-stu-id="469a2-112">This is unlike Message security, where the message is secured for the application that receives the message.</span></span>  
  
 <span data-ttu-id="469a2-113">La sécurité de transport à l'aide de <xref:System.ServiceModel.NetMsmqBinding> et <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> a un impact sur la manière dont les messages MSMQ sont sécurisés en transit entre la file d'attente de transmission et la file d'attente cible, où le terme « sécurisé » implique les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="469a2-113">Transport security using <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacts how MSMQ messages are secured in-transit between the transmission queue and the target queue where secured implies:</span></span>  
  
- <span data-ttu-id="469a2-114">Signature du message afin de s'assurer qu'il n'est pas falsifié.</span><span class="sxs-lookup"><span data-stu-id="469a2-114">Signing the message to ensure it is not tampered with.</span></span>  
  
- <span data-ttu-id="469a2-115">Chiffrement du message afin de s'assurer qu'il ne peut pas être vu ou falsifié.</span><span class="sxs-lookup"><span data-stu-id="469a2-115">Encrypting the message to ensure that it cannot be seen or tampered with.</span></span> <span data-ttu-id="469a2-116">Cela est recommandé mais facultatif.</span><span class="sxs-lookup"><span data-stu-id="469a2-116">This is recommended but optional.</span></span>  
  
- <span data-ttu-id="469a2-117">Le gestionnaire de files d'attente cibles qui identifie l'expéditeur du message pour le non-rejet.</span><span class="sxs-lookup"><span data-stu-id="469a2-117">The target queue manager that identifies the sender of the message for non-repudiation.</span></span>  
  
 <span data-ttu-id="469a2-118">Dans MSMQ, quelle que soit l'authentification, la file d'attente cible possède une liste de contrôle d'accès (ACL, Access Control List) afin de vérifier si le client est autorisé à envoyer le message à la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="469a2-118">In MSMQ, independent of authentication, the target queue has an access control list (ACL) to check whether the client has permission to send the message to the target queue.</span></span> <span data-ttu-id="469a2-119">Il est également vérifié si l'application réceptrice est autorisée à recevoir le message depuis la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="469a2-119">The receiving application is also checked for permission to receive the message from the target queue.</span></span>  
  
## <a name="wcf-msmq-transport-security-properties"></a><span data-ttu-id="469a2-120">Propriétés de la sécurité de transport MSMQ WCF</span><span class="sxs-lookup"><span data-stu-id="469a2-120">WCF MSMQ Transport Security Properties</span></span>  
 <span data-ttu-id="469a2-121">MSMQ utilise la sécurité Windows pour l'authentification.</span><span class="sxs-lookup"><span data-stu-id="469a2-121">MSMQ uses Windows security for authentication.</span></span> <span data-ttu-id="469a2-122">Il utilise l'identificateur de sécurité Windows (SID) pour identifier le client et utilise le service d'annuaire Active Directory comme autorité de certification lors de l'authentification du client.</span><span class="sxs-lookup"><span data-stu-id="469a2-122">It uses the Windows security identifier (SID) to identify the client and uses Active Directory directory service as the certificate authority when authenticating the client.</span></span> <span data-ttu-id="469a2-123">Cela requiert que MSMQ soit installé avec l'intégration Active Directory.</span><span class="sxs-lookup"><span data-stu-id="469a2-123">This requires MSMQ to be installed with Active Directory integration.</span></span> <span data-ttu-id="469a2-124">Le SID de domaine Windows étant utilisé pour identifier le client, cette option de sécurité est explicite uniquement lorsque le client et le service font partie du même domaine Windows.</span><span class="sxs-lookup"><span data-stu-id="469a2-124">Because the Windows domain SID is used to identify the client, this security option is only meaningful when both the client and service are part of the same Windows domain.</span></span>  
  
 <span data-ttu-id="469a2-125">MSMQ permet également de joindre un certificat au message qui n'est pas inscrit auprès d'Active Directory.</span><span class="sxs-lookup"><span data-stu-id="469a2-125">MSMQ also provides the ability to attach a certificate with the message that is not registered with Active Directory.</span></span> <span data-ttu-id="469a2-126">Dans ce cas, il s'assure que le message a été signé à l'aide du certificat joint.</span><span class="sxs-lookup"><span data-stu-id="469a2-126">In this case, it ensures that the message was signed using the attached certificate.</span></span>  
  
 <span data-ttu-id="469a2-127">WCF fournit ces deux options dans le cadre de la sécurité du transport MSMQ et il s’agit du pivot clé pour la sécurité du transport.</span><span class="sxs-lookup"><span data-stu-id="469a2-127">WCF provides both these options as part of MSMQ transport security and they are the key pivot for transport security.</span></span>  
  
 <span data-ttu-id="469a2-128">Par défaut, la sécurité de transport est activée.</span><span class="sxs-lookup"><span data-stu-id="469a2-128">By default, transport security is turned on.</span></span>  
  
 <span data-ttu-id="469a2-129">Étant donné ces principes de base, les sections suivantes détaillent les propriétés de sécurité de transport fournies avec <xref:System.ServiceModel.NetMsmqBinding> et <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="469a2-129">Given these basics, the following sections detail transport security properties bundled with <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span>  
  
#### <a name="msmq-authentication-mode"></a><span data-ttu-id="469a2-130">Mode d'authentification MSMQ</span><span class="sxs-lookup"><span data-stu-id="469a2-130">MSMQ Authentication Mode</span></span>  
 <span data-ttu-id="469a2-131">Le <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> indique s'il faut utiliser la sécurité de domaine Windows ou une sécurité externe basée sur certificat pour sécuriser le message.</span><span class="sxs-lookup"><span data-stu-id="469a2-131">The <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> dictates whether to use the Windows domain security or an external certificate-based security to secure the message.</span></span> <span data-ttu-id="469a2-132">Dans les deux modes d’authentification, le canal de transport de mise `CertificateValidationMode` en file d’attente WCF utilise le spécifié dans la configuration du service.</span><span class="sxs-lookup"><span data-stu-id="469a2-132">In both authentication modes, the WCF queued transport channel uses the `CertificateValidationMode` specified in the service configuration.</span></span> <span data-ttu-id="469a2-133">Le mode de validation de certificat spécifie le mécanisme utilisé pour vérifier la validation du certificat.</span><span class="sxs-lookup"><span data-stu-id="469a2-133">The certificate validation mode specifies the mechanism used to check the validity of the certificate.</span></span>  
  
 <span data-ttu-id="469a2-134">Lorsque la sécurité de transport est activée, le paramètre par défaut est <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="469a2-134">When transport security is turned on, the default setting is <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="windows-domain-authentication-mode"></a><span data-ttu-id="469a2-135">Mode d'authentification de domaine Windows</span><span class="sxs-lookup"><span data-stu-id="469a2-135">Windows Domain Authentication Mode</span></span>  
 <span data-ttu-id="469a2-136">L'utilisation de la sécurité Windows requiert l'intégration Active Directory.</span><span class="sxs-lookup"><span data-stu-id="469a2-136">The choice of using Windows security requires Active Directory integration.</span></span> <span data-ttu-id="469a2-137">Le mode de sécurité du transport par défaut utilisé est <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="469a2-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> is the default transport security mode.</span></span> <span data-ttu-id="469a2-138">Lorsque cette valeur est définie, le canal WCF joint le SID Windows au message MSMQ et utilise son certificat interne obtenu à partir de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="469a2-138">When this is set, the WCF channel attaches the Windows SID to the MSMQ message and uses its internal certificate obtained from Active Directory.</span></span> <span data-ttu-id="469a2-139">MSMQ utilise ce certificat interne pour sécuriser le message.</span><span class="sxs-lookup"><span data-stu-id="469a2-139">MSMQ uses this internal certificate to secure the message.</span></span> <span data-ttu-id="469a2-140">Le gestionnaire de files d'attente de réception utilise Active Directory pour rechercher un certificat correspondant afin d'authentifier le client et vérifie que le SID correspond également à celui du client.</span><span class="sxs-lookup"><span data-stu-id="469a2-140">The receiving queue manager uses Active Directory to search and find a matching certificate to authenticate the client and checks that the SID also matches that of the client.</span></span> <span data-ttu-id="469a2-141">Cette étape d'authentification est exécutée si un certificat, généré en interne en mode d'authentification `WindowsDomain` ou généré de manière externe en mode d'authentification `Certificate`, est joint au message même si la file d'attente cible n'est pas marquée comme nécessitant l'authentification.</span><span class="sxs-lookup"><span data-stu-id="469a2-141">This authentication step is executed if a certificate, either internally generated in the case of `WindowsDomain` authentication mode or externally generated in the case of `Certificate` authentication mode, is attached to the message even if the target queue is not marked as requiring authentication.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="469a2-142">Lorsque vous créez une file d'attente, vous pouvez marquer la file d'attente comme file d'attente authentifiée pour indiquer que la file d'attente nécessite l'authentification des clients envoyant des messages à la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="469a2-142">When creating a queue, you can mark the queue as an authenticated queue to indicate that the queue requires authentication of the client sending messages to the queue.</span></span> <span data-ttu-id="469a2-143">Cela garantit qu'aucun message non authentifié n'est accepté dans la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="469a2-143">This ensures that no unauthenticated messages are accepted in the queue.</span></span>  
  
 <span data-ttu-id="469a2-144">Le système vérifie également si le SID joint au message figure dans la liste ACL de la file d'attente cible afin de s'assurer que le client est autorisé à envoyer des messages à la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="469a2-144">The SID attached with the message is also used to check against the target queue's ACL to ensure that the client has the authority to send messages to the queue.</span></span>  
  
#### <a name="certificate-authentication-mode"></a><span data-ttu-id="469a2-145">Mode d'authentification de certificat</span><span class="sxs-lookup"><span data-stu-id="469a2-145">Certificate Authentication Mode</span></span>  
 <span data-ttu-id="469a2-146">L'utilisation du mode d'authentification de certificat ne requiert pas l'intégration Active Directory.</span><span class="sxs-lookup"><span data-stu-id="469a2-146">The choice of using certificate authentication mode does not require Active Directory integration.</span></span> <span data-ttu-id="469a2-147">En fait, dans certains cas, par exemple lorsque MSMQ est installé en mode de groupe de travail (sans intégration Active Directory) ou lors de l'utilisation du protocole de transfert SRMP (SOAP Reliable Messaging Protocol) pour envoyer des messages à la file d'attente, seul <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> fonctionne.</span><span class="sxs-lookup"><span data-stu-id="469a2-147">In fact, in some cases, such as when MSMQ is installed in workgroup mode (without Active Directory integration) or when using the SOAP Reliable Messaging Protocol (SRMP) transfer protocol to send messages to the queue, only <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> works.</span></span>  
  
 <span data-ttu-id="469a2-148">Lors de l’envoi d’un <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>message WCF avec, le canal WCF n’attache pas de SID Windows au message MSMQ.</span><span class="sxs-lookup"><span data-stu-id="469a2-148">When sending a WCF message with <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, the WCF channel does not attach a Windows SID to the MSMQ message.</span></span> <span data-ttu-id="469a2-149">La liste ACL de file d'attente cible doit autoriser l'accès utilisateur `Anonymous` pour l'envoi vers la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="469a2-149">As such, the target queue ACL must allow for `Anonymous` user access to send to the queue.</span></span> <span data-ttu-id="469a2-150">Le gestionnaire de files d'attente de réception vérifie si le message MSMQ a été signé avec le certificat mais n'exécute pas d'authentification.</span><span class="sxs-lookup"><span data-stu-id="469a2-150">The receiving queue manager checks whether the MSMQ message was signed with the certificate but does not perform any authentication.</span></span>  
  
 <span data-ttu-id="469a2-151">Le certificat avec ses informations de revendications et d’identité est rempli <xref:System.ServiceModel.ServiceSecurityContext> par le canal de transport en file d’attente WCF.</span><span class="sxs-lookup"><span data-stu-id="469a2-151">The certificate with its claims and identity information is populated in the <xref:System.ServiceModel.ServiceSecurityContext> by the WCF queued transport channel.</span></span> <span data-ttu-id="469a2-152">Le service peut utiliser ces informations pour exécuter sa propre authentification de l'expéditeur.</span><span class="sxs-lookup"><span data-stu-id="469a2-152">The service can use this information to perform its own authentication of the sender.</span></span>  
  
### <a name="msmq-protection-level"></a><span data-ttu-id="469a2-153">Niveau de protection MSMQ</span><span class="sxs-lookup"><span data-stu-id="469a2-153">MSMQ Protection Level</span></span>  
 <span data-ttu-id="469a2-154">Le niveau de protection spécifie comment protéger le message MSMQ afin de s'assurer qu'il n'est pas falsifié.</span><span class="sxs-lookup"><span data-stu-id="469a2-154">The protection level dictates how to protect the MSMQ message to ensure that it is not tampered with.</span></span> <span data-ttu-id="469a2-155">Il est spécifié dans la propriété <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A>.</span><span class="sxs-lookup"><span data-stu-id="469a2-155">It is specified in the <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> property.</span></span> <span data-ttu-id="469a2-156">La valeur par défaut est <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="469a2-156">The default value is <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span>  
  
#### <a name="sign-protection-level"></a><span data-ttu-id="469a2-157">Niveau de protection « Signature »</span><span class="sxs-lookup"><span data-stu-id="469a2-157">Sign Protection Level</span></span>  
 <span data-ttu-id="469a2-158">Le message MSMQ est signé à l'aide du certificat généré en interne lors de l'utilisation du mode d'authentification `WindowsDomain` ou d'un certificat généré en externe lors de l'utilisation du mode d'authentification `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="469a2-158">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or an externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
#### <a name="sign-and-encrypt-protection-level"></a><span data-ttu-id="469a2-159">Niveau de protection « Signature et chiffrement »</span><span class="sxs-lookup"><span data-stu-id="469a2-159">Sign and Encrypt Protection Level</span></span>  
 <span data-ttu-id="469a2-160">Le message MSMQ est signé à l'aide du certificat généré en interne lors de l'utilisation du mode d'authentification `WindowsDomain` ou d'un certificat généré en externe lors de l'utilisation du mode d'authentification `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="469a2-160">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
 <span data-ttu-id="469a2-161">Outre la signature du message, le message MSMQ est chiffré à l'aide de la clé publique du certificat obtenue à partir d'Active Directory qui appartient au gestionnaire de files d'attente de réception qui héberge la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="469a2-161">In addition to signing the message, the MSMQ message is encrypted using the public key of the certificate obtained from Active Directory that belongs to the receiving queue manager that hosts the target queue.</span></span> <span data-ttu-id="469a2-162">Le gestionnaire de files d'attente d'émission garantit que le message MSMQ est chiffré en transit.</span><span class="sxs-lookup"><span data-stu-id="469a2-162">The sending queue manager ensures that the MSMQ message is encrypted in transit.</span></span> <span data-ttu-id="469a2-163">Le gestionnaire de files d'attente de réception déchiffre le message MSMQ à l'aide de la clé privée de son certificat interne et stocke le message dans la file d'attente (s'il est authentifié et autorisé) en texte clair.</span><span class="sxs-lookup"><span data-stu-id="469a2-163">The receiving queue manager decrypts the MSMQ message using the private key of its internal certificate and stores the message in the queue (if authenticated and authorized) in clear text.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="469a2-164">Pour chiffrer le message, l'accès Active Directory est requis (la propriété`UseActiveDirectory` de <xref:System.ServiceModel.NetMsmqBinding> doit avoir la valeur `true`) et peut être utilisé avec <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> et <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="469a2-164">To encrypt the message, Active Directory access is required (`UseActiveDirectory` property of <xref:System.ServiceModel.NetMsmqBinding> must be set to `true`) and can be used with both <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="none-protection-level"></a><span data-ttu-id="469a2-165">Niveau de protection « Aucun »</span><span class="sxs-lookup"><span data-stu-id="469a2-165">None Protection Level</span></span>  
 <span data-ttu-id="469a2-166">Ce niveau est utilisé lorsque <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> a la valeur <xref:System.Net.Security.ProtectionLevel.None>.</span><span class="sxs-lookup"><span data-stu-id="469a2-166">This is implied when <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.None>.</span></span> <span data-ttu-id="469a2-167">Cela ne peut pas être une valeur valide pour d'autres modes d'authentification.</span><span class="sxs-lookup"><span data-stu-id="469a2-167">This cannot be a valid value for any other authentication modes.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="469a2-168">Si le message MSMQ est signé, MSMQ vérifie si le message est signé avec le certificat joint (interne ou externe) quel que soit l'état de la file d'attente, autrement dit file d'attente authentifiée ou non.</span><span class="sxs-lookup"><span data-stu-id="469a2-168">If the MSMQ message is signed, MSMQ checks whether the message is signed with the attached certificate (internal or external) independent of the state of the queue, that is, authenticated queue or not.</span></span>  
  
### <a name="msmq-encryption-algorithm"></a><span data-ttu-id="469a2-169">Algorithme de chiffrement MSMQ</span><span class="sxs-lookup"><span data-stu-id="469a2-169">MSMQ Encryption Algorithm</span></span>  
 <span data-ttu-id="469a2-170">L'algorithme de chiffrement spécifie l'algorithme à utiliser pour chiffrer le message MSMQ sur le câble.</span><span class="sxs-lookup"><span data-stu-id="469a2-170">The encryption algorithm specifies the algorithm to use to encrypt the MSMQ message on the wire.</span></span> <span data-ttu-id="469a2-171">Cette propriété est utilisée uniquement si <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> a la valeur <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span><span class="sxs-lookup"><span data-stu-id="469a2-171">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="469a2-172">Les algorithmes pris en charge sont `RC4Stream` et `AES` et la valeur par défaut est `RC4Stream`.</span><span class="sxs-lookup"><span data-stu-id="469a2-172">The supported algorithms are `RC4Stream` and `AES` and the default is `RC4Stream`.</span></span>  
  
 <span data-ttu-id="469a2-173">Vous pouvez utiliser l'algorithme `AES` uniquement si MSMQ 4.0 est installé sur l'expéditeur.</span><span class="sxs-lookup"><span data-stu-id="469a2-173">You can use the `AES` algorithm only if the sender has MSMQ 4.0 installed.</span></span> <span data-ttu-id="469a2-174">De plus, la file d'attente cible doit également être hébergée sur MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="469a2-174">In addition, the target queue must also be hosted on MSMQ 4.0.</span></span>  
  
### <a name="msmq-hash-algorithm"></a><span data-ttu-id="469a2-175">Algorithme de hachage MSMQ</span><span class="sxs-lookup"><span data-stu-id="469a2-175">MSMQ Hash Algorithm</span></span>  
 <span data-ttu-id="469a2-176">L'algorithme de hachage spécifie l'algorithme utilisé pour créer une signature numérique du message MSMQ.</span><span class="sxs-lookup"><span data-stu-id="469a2-176">The hash algorithm specifies the algorithm used to create a digital signature of the MSMQ message.</span></span> <span data-ttu-id="469a2-177">Le gestionnaire de files d'attente de réception utilise ce même algorithme pour authentifier le message MSMQ.</span><span class="sxs-lookup"><span data-stu-id="469a2-177">The receiving queue manager uses this same algorithm to authenticate the MSMQ message.</span></span> <span data-ttu-id="469a2-178">Cette propriété est utilisée uniquement si <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> a la valeur <xref:System.Net.Security.ProtectionLevel.Sign> ou <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span><span class="sxs-lookup"><span data-stu-id="469a2-178">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.Sign> or <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="469a2-179">Les algorithmes pris en charge sont `MD5`, `SHA1`, `SHA256` et `SHA512`.</span><span class="sxs-lookup"><span data-stu-id="469a2-179">The supported algorithms are `MD5`, `SHA1`, `SHA256`, and `SHA512`.</span></span> <span data-ttu-id="469a2-180">Par défaut, il s’agit de `SHA1`.</span><span class="sxs-lookup"><span data-stu-id="469a2-180">The default is `SHA1`.</span></span>

 <span data-ttu-id="469a2-181">En raison de problèmes de collision avec MD5/SHA1, Microsoft recommande SHA256 ou une meilleure solution.</span><span class="sxs-lookup"><span data-stu-id="469a2-181">Due to collision problems with MD5/SHA1, Microsoft recommends SHA256 or better.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="469a2-182">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="469a2-182">See also</span></span>

- [<span data-ttu-id="469a2-183">Vue d’ensemble des files d’attente</span><span class="sxs-lookup"><span data-stu-id="469a2-183">Queues Overview</span></span>](queues-overview.md)
- [<span data-ttu-id="469a2-184">Concepts relatifs à la sécurité</span><span class="sxs-lookup"><span data-stu-id="469a2-184">Security Concepts</span></span>](../../../../docs/framework/wcf/feature-details/security-concepts.md)
- [<span data-ttu-id="469a2-185">Sécurisation des services et des clients</span><span class="sxs-lookup"><span data-stu-id="469a2-185">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
