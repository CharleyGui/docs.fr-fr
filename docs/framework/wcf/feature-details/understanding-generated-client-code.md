---
title: Fonctionnement du code client généré
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: c3f6e4b0-1131-4c94-aa39-a197c5c2f2ca
ms.openlocfilehash: 22cb7a7b4cd6712d509586cb2ae7699d233eff2a
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96281623"
---
# <a name="understanding-generated-client-code"></a><span data-ttu-id="75946-102">Fonctionnement du code client généré</span><span class="sxs-lookup"><span data-stu-id="75946-102">Understanding Generated Client Code</span></span>

<span data-ttu-id="75946-103">L' [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) génère du code client et un fichier de configuration d'application cliente à des fins de création d’applications clientes.</span><span class="sxs-lookup"><span data-stu-id="75946-103">The [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) generates client code and a client application configuration file for use in building client applications.</span></span> <span data-ttu-id="75946-104">Cette rubrique présente des exemples de code généré pour des scénarios de contrat de service standard.</span><span class="sxs-lookup"><span data-stu-id="75946-104">This topic provides a tour of generated code examples for standard service contract scenarios.</span></span> <span data-ttu-id="75946-105">Pour plus d’informations sur la création d’une application cliente à l’aide du code généré, consultez [vue d’ensemble du client WCF](../wcf-client-overview.md).</span><span class="sxs-lookup"><span data-stu-id="75946-105">For more information about building a client application using the generated code, see [WCF Client Overview](../wcf-client-overview.md).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="75946-106">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="75946-106">Overview</span></span>  

 <span data-ttu-id="75946-107">Si vous utilisez Visual Studio pour générer des types de clients Windows Communication Foundation (WCF) pour votre projet, vous n’avez généralement pas besoin d’examiner le code client généré.</span><span class="sxs-lookup"><span data-stu-id="75946-107">If you use Visual Studio to generate Windows Communication Foundation (WCF) client types for your project, you typically do not need to examine the generated client code.</span></span> <span data-ttu-id="75946-108">Si vous n'utilisez pas un environnement de développement qui exécute les mêmes services pour vous, vous pouvez utiliser un outil tel que Svcutil.exe pour générer le code client, puis utiliser ce code pour développer votre application cliente.</span><span class="sxs-lookup"><span data-stu-id="75946-108">If you are not using a development environment that performs the same services for you, you can use a tool such as Svcutil.exe to generate client code and then use that code to develop your client application.</span></span>  
  
 <span data-ttu-id="75946-109">Svcutil.exe disposant de plusieurs options qui modifient les informations de type générées, cette rubrique ne traite pas de tous les scénarios.</span><span class="sxs-lookup"><span data-stu-id="75946-109">Because Svcutil.exe has a number of options that modify the generated type information, this topic does not discuss all scenarios.</span></span> <span data-ttu-id="75946-110">Toutefois, les tâches standard suivantes impliquent la localisation de code généré :</span><span class="sxs-lookup"><span data-stu-id="75946-110">However, the following standard tasks involve locating generated code:</span></span>  
  
- <span data-ttu-id="75946-111">Identification d'interfaces de contrat de service.</span><span class="sxs-lookup"><span data-stu-id="75946-111">Identifying service contract interfaces.</span></span>  
  
- <span data-ttu-id="75946-112">Identification de la classe de client WCF.</span><span class="sxs-lookup"><span data-stu-id="75946-112">Identifying the WCF client class.</span></span>  
  
- <span data-ttu-id="75946-113">Identification des types de données.</span><span class="sxs-lookup"><span data-stu-id="75946-113">Identifying data types.</span></span>  
  
- <span data-ttu-id="75946-114">Identification des contrats de rappel pour les services duplex.</span><span class="sxs-lookup"><span data-stu-id="75946-114">Identifying callback contracts for duplex services.</span></span>  
  
- <span data-ttu-id="75946-115">Identification de l'interface de canal de contrat de service d'assistance.</span><span class="sxs-lookup"><span data-stu-id="75946-115">Identifying the helper service contract channel interface.</span></span>  
  
### <a name="finding-service-contract-interfaces"></a><span data-ttu-id="75946-116">Recherche d'interfaces de contrat de service</span><span class="sxs-lookup"><span data-stu-id="75946-116">Finding Service Contract Interfaces</span></span>  

 <span data-ttu-id="75946-117">Pour trouver les interfaces qui modèlent des contrats de service, recherchez les interfaces marquées avec l'attribut <xref:System.ServiceModel.ServiceContractAttribute?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="75946-117">To locate the interfaces that model service contracts, search for interfaces that are marked with the <xref:System.ServiceModel.ServiceContractAttribute?displayProperty=nameWithType> attribute.</span></span> <span data-ttu-id="75946-118">Cet attribut est souvent difficile à trouver avec une lecture rapide en raison de la présence d'autres attributs et des propriétés explicites définies sur l'attribut lui-même.</span><span class="sxs-lookup"><span data-stu-id="75946-118">Often this attribute can be difficult to locate with a quick read due to the presence of other attributes and the explicit properties set on the attribute itself.</span></span> <span data-ttu-id="75946-119">N'oubliez pas que l'interface de contrat de service et l'interface de contrat client sont deux types différents.</span><span class="sxs-lookup"><span data-stu-id="75946-119">Remember that the service contract interface and the client contract interface are two different types.</span></span> <span data-ttu-id="75946-120">L'exemple de code suivant illustre le contrat de service d'origine.</span><span class="sxs-lookup"><span data-stu-id="75946-120">The following code example shows the original service contract.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#22](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#22)]  
  
 <span data-ttu-id="75946-121">L'exemple de code suivant illustre le même contrat de service, tel que généré par Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="75946-121">The following code example shows the same service contract as generated by Svcutil.exe.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#12)]  
  
 <span data-ttu-id="75946-122">Vous pouvez utiliser l’interface de contrat de service générée avec la <xref:System.ServiceModel.ChannelFactory?displayProperty=nameWithType> classe pour créer un objet de canal WCF avec lequel appeler des opérations de service.</span><span class="sxs-lookup"><span data-stu-id="75946-122">You can use the generated service contract interface along with the <xref:System.ServiceModel.ChannelFactory?displayProperty=nameWithType> class to create a WCF channel object with which to invoke service operations.</span></span> <span data-ttu-id="75946-123">Pour plus d’informations, consultez [Comment : utiliser ChannelFactory](how-to-use-the-channelfactory.md).</span><span class="sxs-lookup"><span data-stu-id="75946-123">For more information, see [How to: Use the ChannelFactory](how-to-use-the-channelfactory.md).</span></span>  
  
### <a name="finding-wcf-client-classes"></a><span data-ttu-id="75946-124">Recherche de classes de client WCF</span><span class="sxs-lookup"><span data-stu-id="75946-124">Finding WCF Client Classes</span></span>  

 <span data-ttu-id="75946-125">Pour rechercher la classe de client WCF qui implémente le contrat de service que vous souhaitez utiliser, recherchez une extension de <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType> , où le paramètre de type est l’interface de contrat de service que vous avez localisée précédemment et qui étend cette interface.</span><span class="sxs-lookup"><span data-stu-id="75946-125">To locate the WCF client class that implements the service contract you want to use, search for an extension of <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>, where the type parameter is the service contract interface that you previously located and that extends that interface.</span></span> <span data-ttu-id="75946-126">L'exemple de code suivant illustre la classe <xref:System.ServiceModel.ClientBase%601> de type `ISampleService`.</span><span class="sxs-lookup"><span data-stu-id="75946-126">The following code example shows the <xref:System.ServiceModel.ClientBase%601> class of type `ISampleService`.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#14](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#14)]  
  
 <span data-ttu-id="75946-127">Vous pouvez utiliser cette classe de client WCF en créant une nouvelle instance de celle-ci et en appelant les méthodes qu’elle implémente.</span><span class="sxs-lookup"><span data-stu-id="75946-127">You can use this WCF client class by creating a new instance of it and calling the methods it implements.</span></span> <span data-ttu-id="75946-128">Ces méthodes appellent l'opération de service avec laquelle elle est conçue et configurée pour interagir.</span><span class="sxs-lookup"><span data-stu-id="75946-128">Those methods invoke the service operation with which it is designed and configured to interact.</span></span> <span data-ttu-id="75946-129">Pour plus d’informations, consultez [vue d’ensemble du client WCF](../wcf-client-overview.md).</span><span class="sxs-lookup"><span data-stu-id="75946-129">For more information, see [WCF Client Overview](../wcf-client-overview.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="75946-130">Lorsque SvcUtil.exe génère une classe de client WCF, il ajoute un <xref:System.Diagnostics.DebuggerStepThroughAttribute> à la classe de client qui empêche les débogueurs de parcourir pas à pas la classe de client WCF.</span><span class="sxs-lookup"><span data-stu-id="75946-130">When SvcUtil.exe generates a WCF client class, it adds a <xref:System.Diagnostics.DebuggerStepThroughAttribute> to the client class that prevents debuggers from stepping through the WCF client class.</span></span>  
  
### <a name="finding-data-types"></a><span data-ttu-id="75946-131">Recherche de types de données</span><span class="sxs-lookup"><span data-stu-id="75946-131">Finding Data Types</span></span>  

 <span data-ttu-id="75946-132">Pour trouver des types de données dans le code généré, le mécanisme le plus simple consiste à identifier le nom de type spécifié dans un contrat et à rechercher le code pour cette déclaration de type.</span><span class="sxs-lookup"><span data-stu-id="75946-132">To locate data types in the generated code, the most basic mechanism is to identify the type name specified in a contract and search the code for that type declaration.</span></span> <span data-ttu-id="75946-133">Par exemple, le contrat suivant spécifie que le `SampleMethod` peut retourner une erreur SOAP de type `microsoft.wcf.documentation.SampleFault`.</span><span class="sxs-lookup"><span data-stu-id="75946-133">For example, the following contract specifies that the `SampleMethod` can return a SOAP fault of type `microsoft.wcf.documentation.SampleFault`.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#11)]  
  
 <span data-ttu-id="75946-134">La recherche de `SampleFault` localise la déclaration de type suivante.</span><span class="sxs-lookup"><span data-stu-id="75946-134">Searching for `SampleFault` locates the following type declaration.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#30](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#30)]  
  
 <span data-ttu-id="75946-135">Dans ce cas, le type de données est le type de détail levé par une exception spécifique sur le client, un <xref:System.ServiceModel.FaultException%601> où le paramètre de type de détail est `microsoft.wcf.documentation.SampleFault`.</span><span class="sxs-lookup"><span data-stu-id="75946-135">In this case the data type is the detail type thrown by a specific exception on the client, a <xref:System.ServiceModel.FaultException%601> where the detail type parameter is `microsoft.wcf.documentation.SampleFault`.</span></span> <span data-ttu-id="75946-136">Pour plus d’informations sur les types de données, consultez [spécification de transfert de données dans les contrats de service](specifying-data-transfer-in-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="75946-136">For more information about data types, see [Specifying Data Transfer in Service Contracts](specifying-data-transfer-in-service-contracts.md).</span></span> <span data-ttu-id="75946-137">Pour plus d’informations sur la gestion des exceptions dans les clients, consultez [envoi et réception d’erreurs](../sending-and-receiving-faults.md).</span><span class="sxs-lookup"><span data-stu-id="75946-137">For more information about handling exceptions in clients, see [Sending and Receiving Faults](../sending-and-receiving-faults.md).</span></span>  
  
### <a name="finding-callback-contracts-for-duplex-services"></a><span data-ttu-id="75946-138">Recherche de contrats de rappel pour les services duplex</span><span class="sxs-lookup"><span data-stu-id="75946-138">Finding Callback Contracts for Duplex Services</span></span>  

 <span data-ttu-id="75946-139">Si vous trouvez un contrat de service pour lequel l'interface de contrat spécifie une valeur pour la propriété <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A?displayProperty=nameWithType> , ce contrat spécifie un contrat duplex.</span><span class="sxs-lookup"><span data-stu-id="75946-139">If you locate a service contract for which the contract interface specifies a value for the <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A?displayProperty=nameWithType> property, then that contract specifies a duplex contract.</span></span> <span data-ttu-id="75946-140">Les contrats duplex requièrent que l'application cliente crée une classe de rappel qui implémente le contrat de rappel et passe une instance de cette classe au <xref:System.ServiceModel.DuplexClientBase%601?displayProperty=nameWithType> ou <xref:System.ServiceModel.DuplexChannelFactory%601?displayProperty=nameWithType> utilisé pour communiquer avec le service.</span><span class="sxs-lookup"><span data-stu-id="75946-140">Duplex contracts require the client application to create a callback class that implements the callback contract and pass an instance of that class to the <xref:System.ServiceModel.DuplexClientBase%601?displayProperty=nameWithType> or <xref:System.ServiceModel.DuplexChannelFactory%601?displayProperty=nameWithType> used to communicate with the service.</span></span> <span data-ttu-id="75946-141">Pour plus d’informations sur les clients duplex, consultez [Comment : accéder aux services avec un contrat duplex](how-to-access-services-with-a-duplex-contract.md).</span><span class="sxs-lookup"><span data-stu-id="75946-141">For more information about duplex clients, see [How to: Access Services with a Duplex Contract](how-to-access-services-with-a-duplex-contract.md).</span></span>  
  
 <span data-ttu-id="75946-142">Le contrat suivant spécifie un contrat de rappel de type `SampleDuplexHelloCallback`.</span><span class="sxs-lookup"><span data-stu-id="75946-142">The following contract specifies a callback contract of type `SampleDuplexHelloCallback`.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/duplexproxycode.cs#2)]
 [!code-vb[C_GeneratedCodeFiles#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_generatedcodefiles/vb/duplexproxycode.vb#2)]  
  
 <span data-ttu-id="75946-143">La recherche de ce contrat de rappel localise l'interface suivante que l'application cliente doit implémenter.</span><span class="sxs-lookup"><span data-stu-id="75946-143">Searching for that callback contract locates the following interface that the client application must implement.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/duplexproxycode.cs#4)]
 [!code-vb[C_GeneratedCodeFiles#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_generatedcodefiles/vb/duplexproxycode.vb#4)]  
  
### <a name="finding-service-contract-channel-interfaces"></a><span data-ttu-id="75946-144">Recherche d'interfaces de canal de contrat de service</span><span class="sxs-lookup"><span data-stu-id="75946-144">Finding Service Contract Channel Interfaces</span></span>  

 <span data-ttu-id="75946-145">Lorsque vous utilisez la classe <xref:System.ServiceModel.ChannelFactory> avec une interface de contrat de service, vous devez effectuer une conversion de type dans l'interface <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> pour ouvrir, fermer ou abandonner le canal de manière explicite.</span><span class="sxs-lookup"><span data-stu-id="75946-145">When using the <xref:System.ServiceModel.ChannelFactory> class with a service contract interface, you must cast to the <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> interface to explicitly open, close, or abort the channel.</span></span> <span data-ttu-id="75946-146">Pour faciliter son utilisation, l'outil Svcutil.exe génère également une interface d'assistance qui implémente à la fois l'interface de contrat de service et <xref:System.ServiceModel.IClientChannel> afin de vous permettre d'interagir avec l'infrastructure de canal client sans devoir convertir de type.</span><span class="sxs-lookup"><span data-stu-id="75946-146">To make it easier to work with, the Svcutil.exe tool also generates a helper interface that implements both the service contract interface and <xref:System.ServiceModel.IClientChannel> to enable you to interact with the client channel infrastructure without having to cast.</span></span> <span data-ttu-id="75946-147">Le code suivant illustre la définition d'un canal client d'assistance qui implémente le contrat de service précédent.</span><span class="sxs-lookup"><span data-stu-id="75946-147">The following code shows the definition of a helper client channel that implements the preceding service contract.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#13)]  
  
## <a name="see-also"></a><span data-ttu-id="75946-148">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="75946-148">See also</span></span>

- [<span data-ttu-id="75946-149">Vue d'ensemble d'un client WCF</span><span class="sxs-lookup"><span data-stu-id="75946-149">WCF Client Overview</span></span>](../wcf-client-overview.md)
