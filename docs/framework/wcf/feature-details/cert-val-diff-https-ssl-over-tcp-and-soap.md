---
title: Différences de validation des certificats entre HTTPS, SSL sur TCP et la sécurité SOAP
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- certificates [WCF], validation differences
ms.assetid: 953a219f-4745-4019-9894-c70704f352e6
ms.openlocfilehash: dcde7bb4cc193d18737d26facbbd69ccd597d66b
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84599332"
---
# <a name="certificate-validation-differences-between-https-ssl-over-tcp-and-soap-security"></a><span data-ttu-id="d3230-102">Différences de validation des certificats entre HTTPS, SSL sur TCP et la sécurité SOAP</span><span class="sxs-lookup"><span data-stu-id="d3230-102">Certificate Validation Differences Between HTTPS, SSL over TCP, and SOAP Security</span></span>
<span data-ttu-id="d3230-103">Vous pouvez utiliser des certificats dans Windows Communication Foundation (WCF) avec la sécurité de la couche de message (SOAP) en plus de la sécurité de la couche de transport (TLS) sur HTTP (HTTPs) ou TCP.</span><span class="sxs-lookup"><span data-stu-id="d3230-103">You can use certificates in Windows Communication Foundation (WCF) with message-layer (SOAP) security in addition to transport-layer security (TLS) over HTTP (HTTPS) or TCP.</span></span> <span data-ttu-id="d3230-104">Cette rubrique décrit les différences dans la façon dont ces certificats sont validés.</span><span class="sxs-lookup"><span data-stu-id="d3230-104">This topic describes differences in the way such certificates are validated.</span></span>  
  
## <a name="validation-of-https-client-certificates"></a><span data-ttu-id="d3230-105">Validation des certificats clients HTTPS</span><span class="sxs-lookup"><span data-stu-id="d3230-105">Validation of HTTPS Client Certificates</span></span>  
 <span data-ttu-id="d3230-106">Lors de l'utilisation du protocole HTTPS pour communiquer entre un client et un service, le certificat que le client utilise pour s'authentifier auprès du service doit prendre en charge l'approbation de chaîne.</span><span class="sxs-lookup"><span data-stu-id="d3230-106">When using HTTPS to communicate between a client and a service, the certificate that the client uses to authenticate to the service must support chain trust.</span></span> <span data-ttu-id="d3230-107">Autrement dit, il doit être chaîné à une autorité de certification racine approuvée.</span><span class="sxs-lookup"><span data-stu-id="d3230-107">That is, it must chain to a trusted root certificate authority.</span></span> <span data-ttu-id="d3230-108">Dans le cas contraire, la couche HTTP lève une exception <xref:System.Net.WebException> avec le message "Le serveur distant a retourné une erreur : (403) Interdit".</span><span class="sxs-lookup"><span data-stu-id="d3230-108">If not, the HTTP layer raises a <xref:System.Net.WebException> with the message "The remote server returned an error: (403) Forbidden."</span></span> <span data-ttu-id="d3230-109">WCF couvre cette exception en tant que <xref:System.ServiceModel.Security.MessageSecurityException> .</span><span class="sxs-lookup"><span data-stu-id="d3230-109">WCF surfaces this exception as a <xref:System.ServiceModel.Security.MessageSecurityException>.</span></span>  
  
## <a name="validation-of-https-service-certificates"></a><span data-ttu-id="d3230-110">Validation des certificats de service HTTPS</span><span class="sxs-lookup"><span data-stu-id="d3230-110">Validation of HTTPS Service Certificates</span></span>  
 <span data-ttu-id="d3230-111">Lors de l'utilisation du protocole HTTPS pour communiquer entre un client et un service, le certificat avec lequel le serveur effectue l'authentification doit prendre en charge l'approbation de chaîne par défaut.</span><span class="sxs-lookup"><span data-stu-id="d3230-111">When using HTTPS to communicate between a client and a service, the certificate that the server authenticates with must support chain trust by default.</span></span> <span data-ttu-id="d3230-112">Autrement dit, il doit être chaîné à une autorité de certification racine approuvée.</span><span class="sxs-lookup"><span data-stu-id="d3230-112">That is, it must chain to a trusted root certificate authority.</span></span> <span data-ttu-id="d3230-113">Aucun contrôle en ligne n'est effectué pour voir si le certificat a été révoqué.</span><span class="sxs-lookup"><span data-stu-id="d3230-113">No online check is performed to see whether the certificate has been revoked.</span></span> <span data-ttu-id="d3230-114">Vous pouvez compenser ce comportement en enregistrant un rappel <xref:System.Net.Security.RemoteCertificateValidationCallback>, comme illustré dans le code ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="d3230-114">You can override this behavior by registering a <xref:System.Net.Security.RemoteCertificateValidationCallback> callback, as shown in the following code.</span></span>  
  
 [!code-csharp[c_CertificateValidationDifferences#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#1)]
 [!code-vb[c_CertificateValidationDifferences#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#1)]  
  
 <span data-ttu-id="d3230-115">où la signature pour `ValidateServerCertificate` est comme suit :</span><span class="sxs-lookup"><span data-stu-id="d3230-115">where the signature for `ValidateServerCertificate` is as follows:</span></span>  
  
 [!code-csharp[c_CertificateValidationDifferences#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#2)]
 [!code-vb[c_CertificateValidationDifferences#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#2)]  
  
 <span data-ttu-id="d3230-116">L'implémentation de `ValidateServerCertificate` peut effectuer toutes les vérifications que le développeur d'une application cliente juge nécessaires pour valider le certificat de service.</span><span class="sxs-lookup"><span data-stu-id="d3230-116">Implementing `ValidateServerCertificate` can perform any checks that the client application developer deems necessary to validate the service certificate.</span></span>  
  
## <a name="validation-of-client-certificates-in-ssl-over-tcp-or-soap-security"></a><span data-ttu-id="d3230-117">Validation de certificats clients dans SSL sur TCP ou la sécurité SOAP</span><span class="sxs-lookup"><span data-stu-id="d3230-117">Validation of Client Certificates in SSL over TCP or SOAP Security</span></span>  
 <span data-ttu-id="d3230-118">Lors de l'utilisation du protocole SSL (Secure Sockets Layer) sur TCP ou de la sécurité (SOAP) de message, les certificats clients sont validés en fonction de la valeur de propriété <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A> de la classe <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>.</span><span class="sxs-lookup"><span data-stu-id="d3230-118">When using Secure Sockets Layer (SSL) over TCP or message (SOAP) security, client certificates are validated according to the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class.</span></span> <span data-ttu-id="d3230-119">La propriété a l'une des valeurs <xref:System.ServiceModel.Security.X509CertificateValidationMode>.</span><span class="sxs-lookup"><span data-stu-id="d3230-119">The property is set to one of the <xref:System.ServiceModel.Security.X509CertificateValidationMode> values.</span></span> <span data-ttu-id="d3230-120">La vérification de la révocation est effectuée en fonction des valeurs de la valeur de propriété <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.RevocationMode%2A> de la classe <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>.</span><span class="sxs-lookup"><span data-stu-id="d3230-120">Revocation checking is performed according to the values of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.RevocationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class.</span></span> <span data-ttu-id="d3230-121">La propriété a l'une des valeurs <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode>.</span><span class="sxs-lookup"><span data-stu-id="d3230-121">The property is set to one of the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> values.</span></span>  
  
 [!code-csharp[c_CertificateValidationDifferences#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#3)]
 [!code-vb[c_CertificateValidationDifferences#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#3)]  
  
## <a name="validation-of-service-certificate-in-ssl-over-tcp-and-soap-security"></a><span data-ttu-id="d3230-122">Validation d’un certificat de service dans SSL sur TCP et la sécurité SOAP</span><span class="sxs-lookup"><span data-stu-id="d3230-122">Validation of Service Certificate in SSL over TCP and SOAP Security</span></span>  
 <span data-ttu-id="d3230-123">Lors de l'utilisation du protocole SSL sur TCP ou de la sécurité de message (SOAP), les certificats de service sont validés en fonction de la valeur de propriété <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A> de la classe <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication>.</span><span class="sxs-lookup"><span data-stu-id="d3230-123">When using SSL over TCP or (SOAP) message security, service certificates are validated according to the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication> class.</span></span> <span data-ttu-id="d3230-124">La propriété a l'une des valeurs <xref:System.ServiceModel.Security.X509CertificateValidationMode>.</span><span class="sxs-lookup"><span data-stu-id="d3230-124">The property is set to one of the <xref:System.ServiceModel.Security.X509CertificateValidationMode> values.</span></span>  
  
 <span data-ttu-id="d3230-125">La vérification de la révocation est effectuée en fonction des valeurs de la valeur de propriété <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.RevocationMode%2A> de la classe <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication>.</span><span class="sxs-lookup"><span data-stu-id="d3230-125">Revocation checking is performed according to the values of the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.RevocationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication> class.</span></span> <span data-ttu-id="d3230-126">La propriété a l'une des valeurs <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode>.</span><span class="sxs-lookup"><span data-stu-id="d3230-126">The property is set to one of the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> values.</span></span>  
  
 [!code-csharp[c_CertificateValidationDifferences#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#4)]
 [!code-vb[c_CertificateValidationDifferences#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#4)]  
  
## <a name="see-also"></a><span data-ttu-id="d3230-127">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d3230-127">See also</span></span>

- <xref:System.Net.Security.RemoteCertificateValidationCallback>
- [<span data-ttu-id="d3230-128">Working with Certificates</span><span class="sxs-lookup"><span data-stu-id="d3230-128">Working with Certificates</span></span>](working-with-certificates.md)
