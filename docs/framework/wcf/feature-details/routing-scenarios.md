---
title: Scénarios de routage
ms.date: 03/30/2017
helpviewer_keywords:
- routing [WCF], scenarios
ms.assetid: ec22f308-665a-413e-9f94-7267cb665dab
ms.openlocfilehash: 334e9fe7ca6931f87c75023f3322638b36001b6a
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/22/2019
ms.locfileid: "69923068"
---
# <a name="routing-scenarios"></a><span data-ttu-id="ee24b-102">Scénarios de routage</span><span class="sxs-lookup"><span data-stu-id="ee24b-102">Routing Scenarios</span></span>
<span data-ttu-id="ee24b-103">Bien que le service de routage soit entièrement personnalisable, concevoir une logique de routage efficace lors de la création d'une configuration à partir de zéro peut s'avérer difficile.</span><span class="sxs-lookup"><span data-stu-id="ee24b-103">While the Routing Service is highly customizable, it can be a challenge to design efficient routing logic when creating a new configuration from scratch.</span></span>  <span data-ttu-id="ee24b-104">Toutefois, il existe plusieurs scénarios courants que suivent la plupart des configurations de service de routage.</span><span class="sxs-lookup"><span data-stu-id="ee24b-104">However, there are several common scenarios that most Routing Service configurations follow.</span></span> <span data-ttu-id="ee24b-105">Bien que ces scénarios puissent ne pas s'appliquer directement à votre configuration spécifique, comprendre comment configurer le service de routage en vue de gérer ces scénarios vous permet de mieux maîtriser le fonctionnement du service de routage.</span><span class="sxs-lookup"><span data-stu-id="ee24b-105">While these scenarios may not apply directly to your specific configuration, understanding how the Routing Service can be configured to handle these scenarios will aid you in understanding the Routing Service.</span></span>  
  
## <a name="common-scenarios"></a><span data-ttu-id="ee24b-106">Scénarios courants</span><span class="sxs-lookup"><span data-stu-id="ee24b-106">Common Scenarios</span></span>  
 <span data-ttu-id="ee24b-107">L'utilisation de base du service de routage consiste à agréger plusieurs points de terminaison de destination de façon à réduire le nombre de points de terminaison exposés aux applications clientes, puis à utiliser des filtres de message pour router chaque message vers sa destination appropriée.</span><span class="sxs-lookup"><span data-stu-id="ee24b-107">The most basic use of the Routing Service is to aggregate multiple destination endpoints to reduce the number of endpoints exposed to the client applications, and then use message filters to route each message to the correct destination.</span></span> <span data-ttu-id="ee24b-108">Les messages peuvent être routés en fonction d’exigences de traitement logique ou physique, par exemple un type de message doit être traité par un service spécifique, ou en fonction d’exigences professionnelles arbitraires, comme offrir un traitement prioritaire aux messages provenant d’une source spécifique.</span><span class="sxs-lookup"><span data-stu-id="ee24b-108">Messages may be routed based on logical or physical processing requirements, such as a message type that must be processed by a specific service, or based on arbitrary business needs such as providing priority processing of messages from a specific source.</span></span> <span data-ttu-id="ee24b-109">Le tableau suivant répertorie des scénarios courants et indique dans quels cas les utiliser :</span><span class="sxs-lookup"><span data-stu-id="ee24b-109">The following table lists some of the common scenarios and when they are encountered:</span></span>  
  
|<span data-ttu-id="ee24b-110">Scénario</span><span class="sxs-lookup"><span data-stu-id="ee24b-110">Scenario</span></span>|<span data-ttu-id="ee24b-111">Cas d'utilisation</span><span class="sxs-lookup"><span data-stu-id="ee24b-111">Use when</span></span>|  
|--------------|--------------|  
|<span data-ttu-id="ee24b-112">Contrôle des versions du service</span><span class="sxs-lookup"><span data-stu-id="ee24b-112">Service versioning</span></span>|<span data-ttu-id="ee24b-113">Vous devez prendre en charge plusieurs versions d'un service ou envisagez de déployer à l'avenir une mise à jour du service.</span><span class="sxs-lookup"><span data-stu-id="ee24b-113">You need to support multiple versions of a service or may deploy an updated service in the future</span></span>|  
|<span data-ttu-id="ee24b-114">Partitionnement des données du service</span><span class="sxs-lookup"><span data-stu-id="ee24b-114">Service data partitioning</span></span>|<span data-ttu-id="ee24b-115">Vous devez partitionner un service entre plusieurs hôtes</span><span class="sxs-lookup"><span data-stu-id="ee24b-115">You must partition a service across multiple hosts</span></span>|  
|<span data-ttu-id="ee24b-116">Mise à jour dynamique</span><span class="sxs-lookup"><span data-stu-id="ee24b-116">Dynamic update</span></span>|<span data-ttu-id="ee24b-117">Vous devez reconfigurer la logique de routage de manière dynamique au moment de l'exécution pour gérer les modifications des déploiements de service.</span><span class="sxs-lookup"><span data-stu-id="ee24b-117">You must dynamically reconfigure routing logic at runtime to handle changing service deployments</span></span>|  
|<span data-ttu-id="ee24b-118">Multidiffusion</span><span class="sxs-lookup"><span data-stu-id="ee24b-118">Multicast</span></span>|<span data-ttu-id="ee24b-119">Vous devez envoyer un message à plusieurs points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="ee24b-119">You must send one message to multiple endpoints</span></span>|  
|<span data-ttu-id="ee24b-120">Pontage de protocoles</span><span class="sxs-lookup"><span data-stu-id="ee24b-120">Protocol bridging</span></span>|<span data-ttu-id="ee24b-121">Vous recevez des messages sur un protocole de transport, mais le point de terminaison de destination utilise un autre protocole.</span><span class="sxs-lookup"><span data-stu-id="ee24b-121">You receive messages over one transport protocol, and the destination endpoint uses a different protocol</span></span>|  
|<span data-ttu-id="ee24b-122">Gestion des erreurs</span><span class="sxs-lookup"><span data-stu-id="ee24b-122">Error Handling</span></span>|<span data-ttu-id="ee24b-123">Vous devez assurer une tolérance aux pannes réseau et aux défaillances de communication.</span><span class="sxs-lookup"><span data-stu-id="ee24b-123">You need to provide resilience to network outages and communication failures</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="ee24b-124">Bien que de nombreux scénarios présentés répondent à des besoins professionnels ou de traitement particuliers, prendre en charge les mises à jour dynamiques et utiliser la gestion des erreurs sont des pratiques souvent conseillées. Elles vous permettent de modifier la logique de routage au moment de l'exécution et de récupérer suite à des défaillances provisoires du réseau et de la communication.</span><span class="sxs-lookup"><span data-stu-id="ee24b-124">While many of the scenarios presented are specific to certain business needs or processing requirements, planning to support dynamic updates and utilizing error handling can often be considered as best practices as they allow you to modify routing logic at runtime and recover from transient network and communication failures.</span></span>  
  
### <a name="service-versioning"></a><span data-ttu-id="ee24b-125">Contrôle des versions du service</span><span class="sxs-lookup"><span data-stu-id="ee24b-125">Service Versioning</span></span>  
 <span data-ttu-id="ee24b-126">Lorsque vous introduisez une nouvelle version d'un service, vous devez souvent maintenir la version précédente jusqu'à ce que tous les clients aient basculé sur le nouveau service.</span><span class="sxs-lookup"><span data-stu-id="ee24b-126">When introducing a new version of a service, you must often maintain the previous version until all clients have transitioned to the new service.</span></span> <span data-ttu-id="ee24b-127">Cela pose un problème particulièrement critique si le service est un processus de longue durée d'exécution qui prend des jours, des semaines, voire des mois pour s'effectuer.</span><span class="sxs-lookup"><span data-stu-id="ee24b-127">This is especially critical if the service is a long-running process that takes days, weeks, or even months to complete.</span></span> <span data-ttu-id="ee24b-128">Habituellement cela requiert l'implémentation d'une nouvelle adresse de point de terminaison pour le nouveau service, tout en maintenant le point de terminaison d'origine pour la version précédente.</span><span class="sxs-lookup"><span data-stu-id="ee24b-128">Usually this requires implementing a new endpoint address for the new service while maintaining the original endpoint for the previous version.</span></span>  
  
 <span data-ttu-id="ee24b-129">En utilisant le service de routage, vous pouvez exposer un point de terminaison pour recevoir les messages d'applications clientes, puis router chaque message vers la version appropriée du service, en fonction du contenu du message.</span><span class="sxs-lookup"><span data-stu-id="ee24b-129">By using the Routing Service, you can expose one endpoint to receive messages from client applications and then route each message to the correct service version based on the message content.</span></span> <span data-ttu-id="ee24b-130">L'implémentation de base implique d'ajouter au message un en-tête personnalisé, indiquant la version du service qui doit traiter le message.</span><span class="sxs-lookup"><span data-stu-id="ee24b-130">The most basic implementation involves adding a custom header to the message that indicates the version of the service that the message is to be processed by.</span></span> <span data-ttu-id="ee24b-131">Le service de routage peut utiliser le XPathMessageFilter pour vérifier si un en-tête personnalisé est présent dans chaque message et router le message vers le point de terminaison de destination approprié.</span><span class="sxs-lookup"><span data-stu-id="ee24b-131">The Routing Service can use the XPathMessageFilter to inspect each message for the presence of the custom header and route the message to the appropriate destination endpoint.</span></span>  
  
 <span data-ttu-id="ee24b-132">Pour connaître les étapes à suivre pour créer une configuration de contrôle de [version de service, consultez Procédure: Contrôle de version](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md)du service.</span><span class="sxs-lookup"><span data-stu-id="ee24b-132">For the steps used to create a service versioning configuration, see [How To: Service Versioning](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md).</span></span>
  
### <a name="service-data-partitioning"></a><span data-ttu-id="ee24b-133">Partitionnement des données du service</span><span class="sxs-lookup"><span data-stu-id="ee24b-133">Service Data Partitioning</span></span>  
 <span data-ttu-id="ee24b-134">Lors de la conception d'un environnement distribué, il est souvent préférable de répartir la charge de traitement entre plusieurs ordinateurs, afin d'assurer un haut niveau de disponibilité, de diminuer la charge de traitement sur les ordinateurs individuels, ou de fournir des ressources dédiées à un sous-ensemble spécifique de messages.</span><span class="sxs-lookup"><span data-stu-id="ee24b-134">When designing a distributed environment, it is often desirable to spread processing load across multiple computers in order to provide high availability, decrease processing load on individual computers, or to provide dedicated resources for a specific subset of messages.</span></span> <span data-ttu-id="ee24b-135">Bien que le service de routage ne remplace pas une solution d'équilibrage de charge dédiée, sa capacité à effectuer des routages basés sur le contenu peut être utilisée pour router vers des destinations spécifiques des messages qui par ailleurs sont semblables.</span><span class="sxs-lookup"><span data-stu-id="ee24b-135">While the Routing Service does not replace a dedicated load balancing solution, its ability to perform content based routing can be used to route otherwise similar messages to specific destinations.</span></span> <span data-ttu-id="ee24b-136">Par exemple, vous pouvez avoir besoin de traiter les messages d'un client spécifique séparément de ceux d'autres clients.</span><span class="sxs-lookup"><span data-stu-id="ee24b-136">For example, you may have a requirement to process messages from a specific client separately from messages received from other clients.</span></span>  
  
 <span data-ttu-id="ee24b-137">Pour connaître les étapes permettant de créer une configuration de partitionnement des données [du service, consultez Procédure: Partitionnement des données](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md)du service.</span><span class="sxs-lookup"><span data-stu-id="ee24b-137">For the steps used to create a service data partitioning configuration, see [How To: Service Data Partitioning](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md).</span></span>  
  
### <a name="dynamic-routing"></a><span data-ttu-id="ee24b-138">Routage dynamique</span><span class="sxs-lookup"><span data-stu-id="ee24b-138">Dynamic Routing</span></span>  
 <span data-ttu-id="ee24b-139">Il est souvent préférable de modifier la configuration du routage pour satisfaire l'évolution des besoins professionnels : par exemple ajouter un itinéraire à la nouvelle version d'un service, modifier les critères de routage, ou modifier le point de terminaison de destination vers lequel le filtre route un message particulier.</span><span class="sxs-lookup"><span data-stu-id="ee24b-139">Often it is desirable to modify the routing configuration to satisfy changing business needs, such as adding a route to a newer version of a service, changing routing criteria, or changing the destination endpoint a specific message that the filter routes to.</span></span> <span data-ttu-id="ee24b-140">Le service de routage permet d'effectuer ces modifications via l'objet <xref:System.ServiceModel.Routing.RoutingExtension>, qui fournit une nouvelle RoutingConfiguration au moment de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="ee24b-140">The Routing Service allows you to do this through the <xref:System.ServiceModel.Routing.RoutingExtension>, which allows you to provide a new RoutingConfiguration during run time.</span></span> <span data-ttu-id="ee24b-141">La nouvelle configuration entre immédiatement en vigueur, mais n'affecte que les nouvelles sessions traitées par le service de routage.</span><span class="sxs-lookup"><span data-stu-id="ee24b-141">The new configuration takes effect immediately, but only affects any new sessions processed by the Routing Service.</span></span>  
  
 <span data-ttu-id="ee24b-142">Pour connaître les étapes à suivre pour implémenter le [routage dynamique, consultez Procédure: Mise à](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md)jour dynamique.</span><span class="sxs-lookup"><span data-stu-id="ee24b-142">For the steps used to implement dynamic routing, see [How To: Dynamic Update](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md).</span></span>
  
### <a name="multicast"></a><span data-ttu-id="ee24b-143">Multidiffusion</span><span class="sxs-lookup"><span data-stu-id="ee24b-143">Multicast</span></span>  
 <span data-ttu-id="ee24b-144">Lors du routage de messages, vous routez habituellement chaque message vers un point de terminaison de destination spécifique.</span><span class="sxs-lookup"><span data-stu-id="ee24b-144">When routing messages, usually you routing each message to one specific destination endpoint.</span></span>  <span data-ttu-id="ee24b-145">Toutefois, vous pouvez avoir besoin occasionnellement de router une copie du message vers plusieurs points de terminaison de destination.</span><span class="sxs-lookup"><span data-stu-id="ee24b-145">However, you may occasionally need to route a copy of the message to multiple destination endpoints.</span></span> <span data-ttu-id="ee24b-146">Pour effectuer un routage en multidiffusion, les conditions suivantes doivent être remplies :</span><span class="sxs-lookup"><span data-stu-id="ee24b-146">To perform multicast routing, the following conditions must be true:</span></span>  
  
- <span data-ttu-id="ee24b-147">La forme du canal ne doit pas être de type demande-réponse (bien qu'elle puisse être monodirectionnelle ou duplex), car cette forme exige que l'application cliente ne reçoive qu'une seule réponse en réponse à la demande.</span><span class="sxs-lookup"><span data-stu-id="ee24b-147">The channel shape must not be request-reply (though it may be one-way or duplex,) because request-reply mandates that only one reply can be received by the client application in response to the request.</span></span>  
  
- <span data-ttu-id="ee24b-148">Plusieurs filtres doivent retourner la **valeur true** lors de l’évaluation du message.</span><span class="sxs-lookup"><span data-stu-id="ee24b-148">Multiple filters must return **true** when evaluating the message.</span></span>  
  
 <span data-ttu-id="ee24b-149">Si ces conditions sont réunies, chaque point de terminaison de destination associé à un filtre qui retourne true recevra une copie du message.</span><span class="sxs-lookup"><span data-stu-id="ee24b-149">If these conditions are met, each destination endpoint that is associated with a filter that returns true will receive a copy of the message.</span></span>  
  
### <a name="protocol-bridging"></a><span data-ttu-id="ee24b-150">Pontage de protocoles</span><span class="sxs-lookup"><span data-stu-id="ee24b-150">Protocol Bridging</span></span>  
 <span data-ttu-id="ee24b-151">En cas de routage de messages entre des protocoles SOAP dissemblables, le service de routage utilise des API WCF pour convertir le message dans un autre protocole.</span><span class="sxs-lookup"><span data-stu-id="ee24b-151">When routing messages between dissimilar SOAP protocols, the Routing Service uses WCF APIs to convert the message from one protocol to the other.</span></span> <span data-ttu-id="ee24b-152">Cela se produit automatiquement lorsque le ou les points de terminaison de service exposés par le service de routage utilisent un protocole différent du ou des points de terminaison clients vers lesquels les messages sont routés.</span><span class="sxs-lookup"><span data-stu-id="ee24b-152">This occurs automatically when the service endpoint(s) exposed by the Routing Service use a different protocol than the client endpoint(s) that messages are routed to.</span></span> <span data-ttu-id="ee24b-153">Il est possible de désactiver ce comportement si les protocoles utilisés ne sont pas standard ; mais vous devez alors fournir votre propre code de pontage.</span><span class="sxs-lookup"><span data-stu-id="ee24b-153">It is possible to disable this behavior if the protocols in use are not standard; however, you must then provide your own bridging code.</span></span>
  
### <a name="error-handling"></a><span data-ttu-id="ee24b-154">Gestion des erreurs</span><span class="sxs-lookup"><span data-stu-id="ee24b-154">Error Handling</span></span>  
 <span data-ttu-id="ee24b-155">Dans un environnement distribué, il n'est pas rare de rencontrer des défaillances temporaires du réseau ou de la communication.</span><span class="sxs-lookup"><span data-stu-id="ee24b-155">In a distributed environment, it is not uncommon to encounter transient network or communication failures.</span></span> <span data-ttu-id="ee24b-156">Sans un service intermédiaire tel que le service de routage, la charge de gérer ces défaillances incomberait à l'application cliente.</span><span class="sxs-lookup"><span data-stu-id="ee24b-156">Without an intermediary service such as the Routing Service, the burden of handling such failures falls on the client application.</span></span> <span data-ttu-id="ee24b-157">Si l'application cliente n'inclut aucune logique spécifique pour refaire une tentative en cas de panne réseau ou de défaillance de communication, et ne connaît aucun autre emplacement, l'utilisateur peut être confronté à une situation où il faut soumettre un message plusieurs fois avant que le service de destination réussisse à le traiter.</span><span class="sxs-lookup"><span data-stu-id="ee24b-157">If the client application does not include specific logic to retry in the event of network or communication failures and knowledge of alternate locations, the user may encounter scenarios where a message must be submitted multiple times before it is successfully processed by the destination service.</span></span> <span data-ttu-id="ee24b-158">Le client risque de ne pas être satisfait de l'application et de la considérer comme peu fiable.</span><span class="sxs-lookup"><span data-stu-id="ee24b-158">This can lead to customer dissatisfaction with the application, as it may be perceived as unreliable.</span></span>  
  
 <span data-ttu-id="ee24b-159">Le service de routage tente de remédier à ce problème en fournissant de robustes fonctions de gestion des erreurs pour les messages confrontés à des pannes réseau ou des défaillances de communication.</span><span class="sxs-lookup"><span data-stu-id="ee24b-159">The Routing Service attempts to remedy this scenario by providing robust error handling capabilities for messages that encounter network or communication-related failures.</span></span> <span data-ttu-id="ee24b-160">En créant une liste de points de terminaison de destination possibles et en associant cette liste à chaque filtre de messages, vous évitez le point de défaillance unique dû au fait de n'avoir qu'une seule destination possible.</span><span class="sxs-lookup"><span data-stu-id="ee24b-160">By creating a list of possible destination endpoints and associating this list with each message filter, you remove the single point of failure incurred by having only one possible destination.</span></span> <span data-ttu-id="ee24b-161">En cas de panne, le service de routage essaie de remettre le message au prochain point de terminaison de la liste, jusqu'à ce que le message soit remis, qu'une défaillance non liée à la communication se produise ou que tous les points de terminaison soient épuisés.</span><span class="sxs-lookup"><span data-stu-id="ee24b-161">In the event of a failure, the Routing Service will attempt to deliver the message to the next endpoint in the list until the message has been delivered, a non-communication failure occurs, or all endpoints have been exhausted.</span></span>  
  
 <span data-ttu-id="ee24b-162">Pour connaître les étapes permettant de configurer la gestion des [erreurs, consultez Procédure: Gestion des](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md)erreurs.</span><span class="sxs-lookup"><span data-stu-id="ee24b-162">For the steps used to configure error handling, see [How To: Error Handling](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md).</span></span>
  
### <a name="in-this-section"></a><span data-ttu-id="ee24b-163">Dans cette section</span><span class="sxs-lookup"><span data-stu-id="ee24b-163">In This Section</span></span>  
 [<span data-ttu-id="ee24b-164">Guide pratique pour Contrôle de version de service</span><span class="sxs-lookup"><span data-stu-id="ee24b-164">How To: Service Versioning</span></span>](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md)  
  
 [<span data-ttu-id="ee24b-165">Guide pratique pour Partitionnement des données du service</span><span class="sxs-lookup"><span data-stu-id="ee24b-165">How To: Service Data Partitioning</span></span>](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md)  
  
 [<span data-ttu-id="ee24b-166">Guide pratique pour Mise à jour dynamique</span><span class="sxs-lookup"><span data-stu-id="ee24b-166">How To: Dynamic Update</span></span>](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md)  
  
 [<span data-ttu-id="ee24b-167">Guide pratique pour Gestion des erreurs</span><span class="sxs-lookup"><span data-stu-id="ee24b-167">How To: Error Handling</span></span>](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md)  
  
## <a name="see-also"></a><span data-ttu-id="ee24b-168">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ee24b-168">See also</span></span>

- [<span data-ttu-id="ee24b-169">Introduction au routage</span><span class="sxs-lookup"><span data-stu-id="ee24b-169">Routing Introduction</span></span>](../../../../docs/framework/wcf/feature-details/routing-introduction.md)
