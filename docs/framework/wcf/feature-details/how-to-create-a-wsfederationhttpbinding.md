---
title: 'Comment : créer une liaison WSFederationHttpBinding'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, federation
- federation
ms.assetid: e54897d7-aa6c-46ec-a278-b2430c8c2e10
ms.openlocfilehash: ccc28c46e8be0b835cf08d372ef85b8a66e989ef
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84595438"
---
# <a name="how-to-create-a-wsfederationhttpbinding"></a><span data-ttu-id="2d640-102">Comment : créer une liaison WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="2d640-102">How to: Create a WSFederationHttpBinding</span></span>

<span data-ttu-id="2d640-103">Dans Windows Communication Foundation (WCF), la <xref:System.ServiceModel.WSFederationHttpBinding> classe ( [\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) dans la configuration) fournit un mécanisme pour exposer un service fédéré.</span><span class="sxs-lookup"><span data-stu-id="2d640-103">In Windows Communication Foundation (WCF), the <xref:System.ServiceModel.WSFederationHttpBinding> class ([\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) in configuration) provides a mechanism for exposing a federated service.</span></span> <span data-ttu-id="2d640-104">autrement dit, un service qui oblige les clients à s'authentifier à l'aide d'un jeton de sécurité émis par un service de jeton de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-104">That is, a service that requires clients to authenticate using a security token issued by a security token service.</span></span> <span data-ttu-id="2d640-105">Cette rubrique montre comment installer <xref:System.ServiceModel.WSFederationHttpBinding> dans le code et la configuration.</span><span class="sxs-lookup"><span data-stu-id="2d640-105">This topic shows how to set up a <xref:System.ServiceModel.WSFederationHttpBinding> in both code and configuration.</span></span> <span data-ttu-id="2d640-106">Une fois la liaison créée, vous pouvez installer un point de terminaison pour utiliser cette liaison.</span><span class="sxs-lookup"><span data-stu-id="2d640-106">Once the binding is created, you can set up an endpoint to use that binding.</span></span>

 <span data-ttu-id="2d640-107">Les étapes de base sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="2d640-107">The basic steps are outlined as follows:</span></span>

1. <span data-ttu-id="2d640-108">Sélectionnez un mode de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-108">Select a security mode.</span></span> <span data-ttu-id="2d640-109"><xref:System.ServiceModel.WSFederationHttpBinding> prend en charge `Message`, qui fournit la sécurité de bout en bout au niveau du message, même avec plusieurs sauts, et `TransportWithMessageCredential`, qui fournit les meilleures performances dans les cas où le client et le service peuvent établir une connexion directe sur HTTPS.</span><span class="sxs-lookup"><span data-stu-id="2d640-109">The <xref:System.ServiceModel.WSFederationHttpBinding> supports `Message`, which provides end-to-end security at the message level, even across multiple hops, and `TransportWithMessageCredential`, which provides better performance in cases where the client and the service can make a direct connection over HTTPS.</span></span>

    > [!NOTE]
    > <span data-ttu-id="2d640-110"><xref:System.ServiceModel.WSFederationHttpBinding> prend également en charge `None` comme mode de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-110">The <xref:System.ServiceModel.WSFederationHttpBinding> also supports `None` as a security mode.</span></span> <span data-ttu-id="2d640-111">Ce mode, non sécurisé, est fourni à des fins de débogage uniquement.</span><span class="sxs-lookup"><span data-stu-id="2d640-111">This mode is not secure and is provided for debugging purposes only.</span></span> <span data-ttu-id="2d640-112">Si un point de terminaison de service est déployé avec <xref:System.ServiceModel.WSFederationHttpBinding> avec le mode de sécurité défini sur `None` , la liaison cliente résultante (générée par l' [outil ServiceModel Metadata Utility Tool (Svcutil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md)) est un <xref:System.ServiceModel.WSHttpBinding> avec le mode de sécurité `None` .</span><span class="sxs-lookup"><span data-stu-id="2d640-112">If a service endpoint is deployed with a <xref:System.ServiceModel.WSFederationHttpBinding> with its security mode set to `None`, the resulting client binding (generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md)) is a <xref:System.ServiceModel.WSHttpBinding> with a security mode of `None`.</span></span>

     <span data-ttu-id="2d640-113">Contrairement à d'autres liaisons fournies par le système, il n'est pas nécessaire de sélectionner un type d'informations d'identification du client lors de l'utilisation de `WSFederationHttpBinding`.</span><span class="sxs-lookup"><span data-stu-id="2d640-113">Unlike other system-provided bindings, it is not necessary to select a client credential type when using the `WSFederationHttpBinding`.</span></span> <span data-ttu-id="2d640-114">Cela est dû au fait que le type d'informations d'identification du client est toujours un jeton émis.</span><span class="sxs-lookup"><span data-stu-id="2d640-114">This is because the client credential type is always an issued token.</span></span> <span data-ttu-id="2d640-115">WCF acquiert un jeton à partir d’un émetteur spécifié et présente ce jeton au service pour authentifier le client.</span><span class="sxs-lookup"><span data-stu-id="2d640-115">WCF acquires a token from a specified issuer and presents that token to the service to authenticate the client.</span></span>

2. <span data-ttu-id="2d640-116">Sur les clients fédérés, affectez à la propriété <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> l'URL du service de jeton de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-116">On federated clients, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property to the URL of the security token service.</span></span> <span data-ttu-id="2d640-117">Affectez au <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> la liaison à utiliser pour communiquer avec le service de jeton de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-117">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> to the binding to use to communicate with the security token service.</span></span>

3. <span data-ttu-id="2d640-118">facultatif.</span><span class="sxs-lookup"><span data-stu-id="2d640-118">Optional.</span></span> <span data-ttu-id="2d640-119">Affectez à la propriété <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> l'URI (Uniform Resource Identifier) d'un type de jeton.</span><span class="sxs-lookup"><span data-stu-id="2d640-119">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the Uniform Resource Identifier (URI) of a token type.</span></span> <span data-ttu-id="2d640-120">Sur les services fédérés, spécifiez le type de jeton que le service attend.</span><span class="sxs-lookup"><span data-stu-id="2d640-120">On federated services, specify the token type that the service expects.</span></span> <span data-ttu-id="2d640-121">Sur les clients fédérés, spécifiez le type de jeton que le client demande au service de jeton de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-121">On federated clients, specify the token type the client requests from the security token service.</span></span>

     <span data-ttu-id="2d640-122">Si aucun type de jeton n'est spécifié, les clients génèrent des jetons RST (Request Security Token) WS-Trust sans l'URI d'un type de jeton, et les services attendent l'authentification du client à l'aide d'un jeton SAML (Security Assertions Markup Language) 1.1 par défaut.</span><span class="sxs-lookup"><span data-stu-id="2d640-122">If no token type is specified, clients generate WS-Trust Request Security Tokens (RSTs) without a token type URI, and services expect client authentication using a Security Assertions Markup Language (SAML) 1.1 token by default.</span></span>

     <span data-ttu-id="2d640-123">L’URI d’un jeton SAML 1,1 est `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1` .</span><span class="sxs-lookup"><span data-stu-id="2d640-123">The URI for a SAML 1.1 token is `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`.</span></span>

4. <span data-ttu-id="2d640-124">facultatif.</span><span class="sxs-lookup"><span data-stu-id="2d640-124">Optional.</span></span> <span data-ttu-id="2d640-125">Sur les services fédérés, affectez à la propriété <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> l'URL de métadonnées d'un service de jeton de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-125">On federated services, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> property to the metadata URL of a security token service.</span></span> <span data-ttu-id="2d640-126">Le point de terminaison de métadonnées permet aux clients du service de sélectionner une paire liaison/point de terminaison appropriée, si le service est configuré pour publier des métadonnées.</span><span class="sxs-lookup"><span data-stu-id="2d640-126">The metadata endpoint enables clients of the service to select an appropriate binding/endpoint pair, if the service is configured to publish metadata.</span></span> <span data-ttu-id="2d640-127">Pour plus d’informations sur la publication de métadonnées, consultez [publication de métadonnées](publishing-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="2d640-127">For more information about publishing metadata, see [Publishing Metadata](publishing-metadata.md).</span></span>

 <span data-ttu-id="2d640-128">Vous pouvez également définir d'autres propriétés, y compris le type de clé utilisé comme clé de vérification dans le jeton émis, la suite algorithmique à utiliser entre le client et le service, l'option de négocier ou de spécifier explicitement les informations d'identification du service, toutes les revendications spécifiques que le service s'attend à trouver dans le jeton émis et tous les éléments XML supplémentaires qui doivent être ajoutés à la demande que le client envoie au service de jeton de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-128">You can also set other properties, including the type of key used as a proof key in the issued token, the algorithm suite to use between the client and the service, whether to negotiate or explicitly specify the service credential, any specific claims the service expects the issued token to contain, and any additional XML elements that must be added to the request the client sends to the security token service.</span></span>

> [!NOTE]
> <span data-ttu-id="2d640-129">La propriété `NegotiateServiceCredential` n'est pertinente que si `SecurityMode` a la valeur `Message`.</span><span class="sxs-lookup"><span data-stu-id="2d640-129">The `NegotiateServiceCredential` property is only relevant when the `SecurityMode` is set to `Message`.</span></span> <span data-ttu-id="2d640-130">Si `SecurityMode` a la valeur `TransportWithMessageCredential`, alors la propriété `NegotiateServiceCredential` est ignorée.</span><span class="sxs-lookup"><span data-stu-id="2d640-130">If `SecurityMode` is set to `TransportWithMessageCredential`, then the `NegotiateServiceCredential` property is ignored.</span></span>

## <a name="to-configure-a-wsfederationhttpbinding-in-code"></a><span data-ttu-id="2d640-131">Pour configurer une liaison WSFederationHttpBinding dans le code</span><span class="sxs-lookup"><span data-stu-id="2d640-131">To configure a WSFederationHttpBinding in code</span></span>

1. <span data-ttu-id="2d640-132">Créez une instance de <xref:System.ServiceModel.WSFederationHttpBinding>.</span><span class="sxs-lookup"><span data-stu-id="2d640-132">Create an instance of the <xref:System.ServiceModel.WSFederationHttpBinding>.</span></span>

2. <span data-ttu-id="2d640-133">Affectez à la propriété <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> la valeur <xref:System.ServiceModel.WSFederationHttpSecurityMode> ou <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> selon le cas.</span><span class="sxs-lookup"><span data-stu-id="2d640-133">Set the <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> property to <xref:System.ServiceModel.WSFederationHttpSecurityMode> or <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> as required.</span></span> <span data-ttu-id="2d640-134">Si une suite d’algorithmes autre que <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> est requise, affectez <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> à la propriété une valeur extraite de <xref:System.ServiceModel.Security.SecurityAlgorithmSuite> .</span><span class="sxs-lookup"><span data-stu-id="2d640-134">If an algorithm suite other than <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> is required, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> property to a value taken from <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>.</span></span>

3. <span data-ttu-id="2d640-135">Définissez la propriété <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> comme il convient.</span><span class="sxs-lookup"><span data-stu-id="2d640-135">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> property as appropriate.</span></span>

4. <span data-ttu-id="2d640-136">Affectez <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> à la propriété la valeur <xref:System.IdentityModel.Tokens.SecurityKeyType> `SymmetricKey` ou.`AsymmetricKey`</span><span class="sxs-lookup"><span data-stu-id="2d640-136">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> property to <xref:System.IdentityModel.Tokens.SecurityKeyType>`SymmetricKey` or .`AsymmetricKey`</span></span> <span data-ttu-id="2d640-137">Si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="2d640-137">as required.</span></span>

5. <span data-ttu-id="2d640-138">Affectez la valeur appropriée à la propriété <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A>.</span><span class="sxs-lookup"><span data-stu-id="2d640-138">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the appropriate value.</span></span> <span data-ttu-id="2d640-139">Si aucune valeur n’est définie, WCF prend par défaut `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1` la valeur, qui indique les jetons SAML 1,1.</span><span class="sxs-lookup"><span data-stu-id="2d640-139">If no value is set, WCF defaults to `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`, which indicates SAML 1.1 tokens.</span></span>

6. <span data-ttu-id="2d640-140">Requis sur le client si aucun émetteur local n'est spécifié ; facultatif sur le service.</span><span class="sxs-lookup"><span data-stu-id="2d640-140">Required on the client if no local issuer is specified; optional on the service.</span></span> <span data-ttu-id="2d640-141">Créez un <xref:System.ServiceModel.EndpointAddress> qui contient les informations d'adresse et d'identité du service de jeton de sécurité et assignez l'instance <xref:System.ServiceModel.EndpointAddress> à la propriété <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A>.</span><span class="sxs-lookup"><span data-stu-id="2d640-141">Create an <xref:System.ServiceModel.EndpointAddress> that contains the address and identity information of the security token service and assign the <xref:System.ServiceModel.EndpointAddress> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property.</span></span>

7. <span data-ttu-id="2d640-142">Requis sur le client si aucun émetteur local n'est spécifié ; non utilisé sur le service.</span><span class="sxs-lookup"><span data-stu-id="2d640-142">Required on the client if no local issuer is specified; not used on the service.</span></span> <span data-ttu-id="2d640-143">Créez un <xref:System.ServiceModel.Channels.Binding> pour le `SecurityTokenService` et assignez l' <xref:System.ServiceModel.Channels.Binding> instance à la <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> propriété.</span><span class="sxs-lookup"><span data-stu-id="2d640-143">Create a <xref:System.ServiceModel.Channels.Binding> for the `SecurityTokenService` and assign the <xref:System.ServiceModel.Channels.Binding> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> property.</span></span>

8. <span data-ttu-id="2d640-144">Non utilisé sur le client ; facultatif sur le service.</span><span class="sxs-lookup"><span data-stu-id="2d640-144">Not used on the client; optional on the service.</span></span> <span data-ttu-id="2d640-145">Créez une instance <xref:System.ServiceModel.EndpointAddress> pour les métadonnées du service de jeton de sécurité et assignez-la à la propriété `IssuerMetadataAddress`.</span><span class="sxs-lookup"><span data-stu-id="2d640-145">Create an <xref:System.ServiceModel.EndpointAddress> instance for the metadata of the security token service and assign it to the `IssuerMetadataAddress` property.</span></span>

9. <span data-ttu-id="2d640-146">Facultatif sur le client et le service.</span><span class="sxs-lookup"><span data-stu-id="2d640-146">Optional on both the client and the service.</span></span> <span data-ttu-id="2d640-147">Créez et ajoutez une ou plusieurs instances <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> à la collection retournée par la propriété <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A>.</span><span class="sxs-lookup"><span data-stu-id="2d640-147">Create and add one or more <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A> property.</span></span>

10. <span data-ttu-id="2d640-148">Facultatif sur le client et le service.</span><span class="sxs-lookup"><span data-stu-id="2d640-148">Optional on both the client and the service.</span></span> <span data-ttu-id="2d640-149">Créez et ajoutez une ou plusieurs instances <xref:System.Xml.XmlElement> à la collection retournée par la propriété <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A>.</span><span class="sxs-lookup"><span data-stu-id="2d640-149">Create and add one or more <xref:System.Xml.XmlElement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A> property.</span></span>

## <a name="to-create-a-federated-endpoint-in-configuration"></a><span data-ttu-id="2d640-150">Pour créer un point de terminaison fédéré dans la configuration</span><span class="sxs-lookup"><span data-stu-id="2d640-150">To create a federated endpoint in configuration</span></span>

1. <span data-ttu-id="2d640-151">Créez un [\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) en tant qu’enfant de l' [\<bindings>](../../configure-apps/file-schema/wcf/bindings.md) élément dans le fichier de configuration de l’application.</span><span class="sxs-lookup"><span data-stu-id="2d640-151">Create a [\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) as a child of the [\<bindings>](../../configure-apps/file-schema/wcf/bindings.md) element in the application configuration file.</span></span>

2. <span data-ttu-id="2d640-152">Créez un [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) élément en tant qu’enfant de [\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) et affectez `name` à l’attribut une valeur appropriée.</span><span class="sxs-lookup"><span data-stu-id="2d640-152">Create a [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) element as a child of [\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) and set the `name` attribute to an appropriate value.</span></span>

3. <span data-ttu-id="2d640-153">Créez un `<security>` élément en tant qu’enfant de l' [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) élément.</span><span class="sxs-lookup"><span data-stu-id="2d640-153">Create a `<security>` element as a child of the [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) element.</span></span>

4. <span data-ttu-id="2d640-154">Affectez à l'attribut `mode` sur l'élément `<security>` une valeur de `Message` ou de `TransportWithMessageCredential`, selon le cas.</span><span class="sxs-lookup"><span data-stu-id="2d640-154">Set the `mode` attribute on the `<security>` element to a value of `Message` or `TransportWithMessageCredential`, as required.</span></span>

5. <span data-ttu-id="2d640-155">Créez un élément `<message>` en tant qu'enfant de l'élément `<security>`.</span><span class="sxs-lookup"><span data-stu-id="2d640-155">Create a `<message>` element as a child of the `<security>` element.</span></span>

6. <span data-ttu-id="2d640-156">facultatif.</span><span class="sxs-lookup"><span data-stu-id="2d640-156">Optional.</span></span> <span data-ttu-id="2d640-157">Affectez une valeur appropriée à l'attribut `algorithmSuite` sur l'élément `<message>`.</span><span class="sxs-lookup"><span data-stu-id="2d640-157">Set the `algorithmSuite` attribute on the `<message>` element with an appropriate value.</span></span> <span data-ttu-id="2d640-158">Par défaut, il s’agit de `Basic256`.</span><span class="sxs-lookup"><span data-stu-id="2d640-158">The default is `Basic256`.</span></span>

7. <span data-ttu-id="2d640-159">facultatif.</span><span class="sxs-lookup"><span data-stu-id="2d640-159">Optional.</span></span> <span data-ttu-id="2d640-160">Si une clé de vérification asymétrique est requise, affectez à l'attribut `issuedKeyType` de l'élément `<message>` la valeur `AsymmetricKey`.</span><span class="sxs-lookup"><span data-stu-id="2d640-160">If an asymmetric proof key is required, set the `issuedKeyType` attribute of the `<message>` element to `AsymmetricKey`.</span></span> <span data-ttu-id="2d640-161">Par défaut, il s’agit de `SymmetricKey`.</span><span class="sxs-lookup"><span data-stu-id="2d640-161">The default is `SymmetricKey`.</span></span>

8. <span data-ttu-id="2d640-162">facultatif.</span><span class="sxs-lookup"><span data-stu-id="2d640-162">Optional.</span></span> <span data-ttu-id="2d640-163">Définissez l'attribut `issuedTokenType` sur l'élément `<message>`.</span><span class="sxs-lookup"><span data-stu-id="2d640-163">Set the `issuedTokenType` attribute on the `<message>` element.</span></span>

9. <span data-ttu-id="2d640-164">Requis sur le client si aucun émetteur local n'est spécifié ; facultatif sur le service.</span><span class="sxs-lookup"><span data-stu-id="2d640-164">Required on the client if no local issuer is specified; optional on the service.</span></span> <span data-ttu-id="2d640-165">Créez un élément `<issuer>` en tant qu'enfant de l'élément `<message>`.</span><span class="sxs-lookup"><span data-stu-id="2d640-165">Create an `<issuer>` element as a child of the `<message>` element.</span></span>

10. <span data-ttu-id="2d640-166">Affectez l'attribut `address` à l'élément `<issuer>` et spécifiez l'adresse à laquelle le service de jeton de sécurité accepte des demandes de jeton.</span><span class="sxs-lookup"><span data-stu-id="2d640-166">Set the `address` attribute to the `<issuer>` element and specify the address at which the security token service accepts token requests.</span></span>

11. <span data-ttu-id="2d640-167">facultatif.</span><span class="sxs-lookup"><span data-stu-id="2d640-167">Optional.</span></span> <span data-ttu-id="2d640-168">Ajoutez un élément enfant `<identity>` et spécifiez l'identité du service de jeton de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-168">Add an `<identity>` child element and specify the identity of the security token service</span></span>

12. <span data-ttu-id="2d640-169">Pour plus d’informations, consultez [identité du service et authentification](service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="2d640-169">For more information, see [Service Identity and Authentication](service-identity-and-authentication.md).</span></span>

13. <span data-ttu-id="2d640-170">Requis sur le client si aucun émetteur local n'est spécifié ; non utilisé sur le service.</span><span class="sxs-lookup"><span data-stu-id="2d640-170">Required on the client if no local issuer is specified; not used on the service.</span></span> <span data-ttu-id="2d640-171">Créez un [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) élément dans la section liaisons qui peut être utilisée pour communiquer avec le service d’accès aux jetons de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-171">Create a [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) element in the bindings section that can be used to communicate with the security token service.</span></span> <span data-ttu-id="2d640-172">Pour plus d’informations sur la création d’une liaison, consultez [Comment : spécifier une liaison de service dans la configuration](../how-to-specify-a-service-binding-in-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="2d640-172">For more information about creating a binding, see [How to: Specify a Service Binding in Configuration](../how-to-specify-a-service-binding-in-configuration.md).</span></span>

14. <span data-ttu-id="2d640-173">Spécifiez la liaison créée à l’étape précédente en définissant les attributs `binding` et `bindingConfiguration` de l’élément `<issuer>`.</span><span class="sxs-lookup"><span data-stu-id="2d640-173">Specify the binding created in the previous step by setting the `binding` and `bindingConfiguration` attributes of the `<issuer>` element.</span></span>

15. <span data-ttu-id="2d640-174">Non utilisé sur le client ; facultatif sur le service.</span><span class="sxs-lookup"><span data-stu-id="2d640-174">Not used on the client; optional on the service.</span></span> <span data-ttu-id="2d640-175">Créez un `<issuerMetadata>` élément en tant qu’enfant de l' `message` élément <>.</span><span class="sxs-lookup"><span data-stu-id="2d640-175">Create an `<issuerMetadata>` element as a child of the <`message`> element.</span></span> <span data-ttu-id="2d640-176">Puis, dans un attribut `address` sur l'élément `<issuerMetadata>`, spécifiez l'adresse à laquelle le service de jeton de sécurité doit publier ses métadonnées.</span><span class="sxs-lookup"><span data-stu-id="2d640-176">Then, in an `address` attribute on the `<issuerMetadata>` element, specify the address at which the security token service is to publish its metadata.</span></span> <span data-ttu-id="2d640-177">Éventuellement, ajoutez un élément enfant `<identity>` et spécifiez l'identité du service de jeton de sécurité.</span><span class="sxs-lookup"><span data-stu-id="2d640-177">Optionally, add an `<identity>` child element and specify the identity of the security token service.</span></span>

16. <span data-ttu-id="2d640-178">Facultatif sur le client et le service.</span><span class="sxs-lookup"><span data-stu-id="2d640-178">Optional on both the client and the service.</span></span> <span data-ttu-id="2d640-179">Ajoutez un élément `<claimTypeRequirements>` en tant qu'enfant de l'élément `<message>`.</span><span class="sxs-lookup"><span data-stu-id="2d640-179">Add a `<claimTypeRequirements>` element as a child of the `<message>` element.</span></span> <span data-ttu-id="2d640-180">Spécifiez les revendications obligatoires et facultatives sur lesquelles repose le service en ajoutant des [\<add>](../../configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) éléments à l' `<claimTypeRequirements>` élément et en spécifiant le type de revendication avec l' `claimType` attribut.</span><span class="sxs-lookup"><span data-stu-id="2d640-180">Specify required and optional claims that the service relies on by adding [\<add>](../../configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) elements to the `<claimTypeRequirements>` element and specifying the claim type with the `claimType` attribute.</span></span> <span data-ttu-id="2d640-181">Spécifiez si une revendication donnée est requise ou facultative en définissant l'attribut `isOptional`.</span><span class="sxs-lookup"><span data-stu-id="2d640-181">Specify whether a given claim is required or optional by setting the `isOptional` attribute.</span></span>

## <a name="example"></a><span data-ttu-id="2d640-182">Exemple</span><span class="sxs-lookup"><span data-stu-id="2d640-182">Example</span></span>

<span data-ttu-id="2d640-183">L'exemple de code suivant montre comment installer `WSFederationHttpBinding` de façon impérative.</span><span class="sxs-lookup"><span data-stu-id="2d640-183">The following code sample shows code for setting up a `WSFederationHttpBinding` imperatively.</span></span>

[!code-csharp[c_FederationBinding#2](~/samples/snippets/csharp/VS_Snippets_CFX/c_federationbinding/cs/source.cs#2)]
[!code-vb[c_FederationBinding#2](~/samples/snippets/visualbasic/VS_Snippets_CFX/c_federationbinding/vb/source.vb#2)]

## <a name="see-also"></a><span data-ttu-id="2d640-184">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="2d640-184">See also</span></span>

- [<span data-ttu-id="2d640-185">Fédération</span><span class="sxs-lookup"><span data-stu-id="2d640-185">Federation</span></span>](federation.md)
- [<span data-ttu-id="2d640-186">Federation, exemple</span><span class="sxs-lookup"><span data-stu-id="2d640-186">Federation Sample</span></span>](../samples/federation-sample.md)
- [<span data-ttu-id="2d640-187">Comment : désactiver des sessions sécurisées sur une classe WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="2d640-187">How to: Disable Secure Sessions on a WSFederationHttpBinding</span></span>](how-to-disable-secure-sessions-on-a-wsfederationhttpbinding.md)
