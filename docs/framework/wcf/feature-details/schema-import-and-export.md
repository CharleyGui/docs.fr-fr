---
title: Importation et exportation de schémas
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, schema import and export
- XsdDataContractExporter class
- XsdDataContractImporter class
ms.assetid: 0da32b50-ccd9-463a-844c-7fe803d3bf44
ms.openlocfilehash: 942ade69d92d8a213f65a3a2e463b6924e2f986e
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84590213"
---
# <a name="schema-import-and-export"></a><span data-ttu-id="8ad47-102">Importation et exportation de schémas</span><span class="sxs-lookup"><span data-stu-id="8ad47-102">Schema Import and Export</span></span>
<span data-ttu-id="8ad47-103">Windows Communication Foundation (WCF) comprend un nouveau moteur de sérialisation, le <xref:System.Runtime.Serialization.DataContractSerializer> .</span><span class="sxs-lookup"><span data-stu-id="8ad47-103">Windows Communication Foundation (WCF) includes a new serialization engine, the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span> <span data-ttu-id="8ad47-104">Le `DataContractSerializer` traduit entre les objets .NET Framework et XML (dans les deux sens).</span><span class="sxs-lookup"><span data-stu-id="8ad47-104">The `DataContractSerializer` translates between .NET Framework objects and XML (in both directions).</span></span> <span data-ttu-id="8ad47-105">En plus du sérialiseur lui-même, WCF comprend des mécanismes d’importation et d’exportation de schémas associés.</span><span class="sxs-lookup"><span data-stu-id="8ad47-105">In addition to the serializer itself, WCF includes associated schema import and schema export mechanisms.</span></span> <span data-ttu-id="8ad47-106">Le *schéma* est une description formelle, précise et explicite de la forme du code XML que le sérialiseur produit ou auquel le désérialiseur peut accéder.</span><span class="sxs-lookup"><span data-stu-id="8ad47-106">*Schema* is a formal, precise, and machine-readable description of the shape of XML that the serializer produces or that the deserializer can access.</span></span> <span data-ttu-id="8ad47-107">WCF utilise le langage XSD (XML Schema Definition Language) World Wide Web Consortium (W3C) comme représentation de schéma, qui est largement interopérable avec de nombreuses plateformes tierces.</span><span class="sxs-lookup"><span data-stu-id="8ad47-107">WCF uses the World Wide Web Consortium (W3C) XML Schema definition language (XSD) as its schema representation, which is widely interoperable with numerous third-party platforms.</span></span>  
  
 <span data-ttu-id="8ad47-108">Le composant d’importation de schéma, <xref:System.Runtime.Serialization.XsdDataContractImporter> , prend un document de schéma XSD et génère des classes .NET Framework (normalement les classes de contrat de données) de telle sorte que les formulaires sérialisés correspondent au schéma donné.</span><span class="sxs-lookup"><span data-stu-id="8ad47-108">The schema import component, <xref:System.Runtime.Serialization.XsdDataContractImporter>, takes an XSD schema document and generates .NET Framework classes (normally data contract classes) such that the serialized forms correspond to the given schema.</span></span>  
  
 <span data-ttu-id="8ad47-109">Par exemple, le fragment de schéma suivant :</span><span class="sxs-lookup"><span data-stu-id="8ad47-109">For example, the following schema fragment:</span></span>  
  
 [!code-csharp[c_SchemaImportExport#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#8)]
 [!code-vb[c_SchemaImportExport#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#8)]  
  
 <span data-ttu-id="8ad47-110">génère le type suivant (légèrement simplifié pour permettre une meilleure compréhension).</span><span class="sxs-lookup"><span data-stu-id="8ad47-110">generates the following type (simplified slightly for better readability).</span></span>  
  
 [!code-csharp[c_SchemaImportExport#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#1)]
 [!code-vb[c_SchemaImportExport#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#1)]  
  
 <span data-ttu-id="8ad47-111">Notez que le type généré suit plusieurs pratiques recommandées relatives aux contrats de données (disponibles dans [meilleures pratiques :](../best-practices-data-contract-versioning.md)contrôle de version des contrats de données) :</span><span class="sxs-lookup"><span data-stu-id="8ad47-111">Note that the generated type follows several data contract best practices (found in [Best Practices: Data Contract Versioning](../best-practices-data-contract-versioning.md)):</span></span>  
  
- <span data-ttu-id="8ad47-112">Ce type implémente l'interface <xref:System.Runtime.Serialization.IExtensibleDataObject>.</span><span class="sxs-lookup"><span data-stu-id="8ad47-112">The type implements the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span></span> <span data-ttu-id="8ad47-113">Pour plus d’informations, consultez [Contrats de données compatibles avec des versions ultérieures](forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="8ad47-113">For more information, see [Forward-Compatible Data Contracts](forward-compatible-data-contracts.md).</span></span>  
  
- <span data-ttu-id="8ad47-114">Les membres de données sont implémentés sous forme de propriétés publiques qui encapsulent des champs privés.</span><span class="sxs-lookup"><span data-stu-id="8ad47-114">Data members are implemented as public properties that wrap private fields.</span></span>  
  
- <span data-ttu-id="8ad47-115">La classe est une classe partielle et des éléments peuvent y être ajoutés sans modifier le code généré.</span><span class="sxs-lookup"><span data-stu-id="8ad47-115">The class is a partial class, and additions can be made without modifying generated code.</span></span>  
  
 <span data-ttu-id="8ad47-116">L'exportateur <xref:System.Runtime.Serialization.XsdDataContractExporter> vous permet d'effectuer l'opération inverse, c'est-à-dire de prendre des types pouvant être sérialisés à l'aide de `DataContractSerializer`, puis de générer un document de schéma XSD.</span><span class="sxs-lookup"><span data-stu-id="8ad47-116">The <xref:System.Runtime.Serialization.XsdDataContractExporter> enables you to do the reverse—take types that are serializable with the `DataContractSerializer` and generate an XSD Schema document.</span></span>  
  
## <a name="fidelity-is-not-guaranteed"></a><span data-ttu-id="8ad47-117">Fidélité non garantie</span><span class="sxs-lookup"><span data-stu-id="8ad47-117">Fidelity Is Not Guaranteed</span></span>  
 <span data-ttu-id="8ad47-118">Lors de la conversion, puis reconversion des schémas ou types, la stricte fidélité des informations converties n'est pas garantie.</span><span class="sxs-lookup"><span data-stu-id="8ad47-118">It is not guaranteed that schema or types make a round trip with total fidelity.</span></span> <span data-ttu-id="8ad47-119">(Un aller- *retour* signifie que vous importez un schéma pour créer un ensemble de classes et que vous exportez le résultat pour créer à nouveau un schéma.) Le même schéma ne peut pas être retourné.</span><span class="sxs-lookup"><span data-stu-id="8ad47-119">(A *round trip* means to import a schema to create a set of classes, and export the result to create a schema again.) The same schema may not be returned.</span></span> <span data-ttu-id="8ad47-120">Effectuer à nouveau le processus dans le sens inverse ne garantit pas en effet la fidélité aux informations d'origine.</span><span class="sxs-lookup"><span data-stu-id="8ad47-120">Reversing the process is also not guaranteed to preserve fidelity.</span></span> <span data-ttu-id="8ad47-121">(Exportez un type pour générer son schéma, puis réimportez le type.</span><span class="sxs-lookup"><span data-stu-id="8ad47-121">(Export a type to generate its schema, and then import the type back.</span></span> <span data-ttu-id="8ad47-122">Il est improbable que le même type soit retourné.)</span><span class="sxs-lookup"><span data-stu-id="8ad47-122">It is unlikely the same type is returned.)</span></span>  
  
## <a name="supported-types"></a><span data-ttu-id="8ad47-123">Types pris en charge</span><span class="sxs-lookup"><span data-stu-id="8ad47-123">Supported Types</span></span>  
 <span data-ttu-id="8ad47-124">Le modèle de contrat de données prend uniquement en charge un sous-ensemble limité de schémas WC3.</span><span class="sxs-lookup"><span data-stu-id="8ad47-124">The data contract model supports only a limited subset of the WC3 schema.</span></span> <span data-ttu-id="8ad47-125">Tout schéma ne se conformant pas à ce sous-ensemble provoquera la levée d'une exception lors de l'importation.</span><span class="sxs-lookup"><span data-stu-id="8ad47-125">Any schema that does not conform to this subset will cause an exception during the import process.</span></span> <span data-ttu-id="8ad47-126">Par exemple, il n'est pas possible d'indiquer qu'un membre de données d'un contrat de données doit être sérialisé sous forme d'attribut XML.</span><span class="sxs-lookup"><span data-stu-id="8ad47-126">For example, there is no way to specify that a data member of a data contract should be serialized as an XML attribute.</span></span> <span data-ttu-id="8ad47-127">Les schémas nécessitant l'utilisation d'attributs XML ne sont donc pas pris en charge et provoqueront la levée d'exceptions lors de l'importation, le contrat de données ne pouvant être généré à l'aide des attributs XML appropriés.</span><span class="sxs-lookup"><span data-stu-id="8ad47-127">Thus, schemas that require the use of XML attributes are not supported and will cause exceptions during import, because it is impossible to generate a data contract with the correct XML projection.</span></span>  
  
 <span data-ttu-id="8ad47-128">Par exemple, il est impossible d'importer le fragment de schéma suivant à l'aide des paramètres d'importation par défaut.</span><span class="sxs-lookup"><span data-stu-id="8ad47-128">For example, the following schema fragment cannot be imported using the default import settings.</span></span>  
  
 [!code-xml[c_SchemaImportExport#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#9)]  
  
 <span data-ttu-id="8ad47-129">Pour plus d’informations, consultez [Référence du schéma de contrat de données](data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="8ad47-129">For more information, see [Data Contract Schema Reference](data-contract-schema-reference.md).</span></span> <span data-ttu-id="8ad47-130">Lorsqu'un schéma ne se conforme pas aux règles des contrats de données, utilisez un autre moteur de sérialisation.</span><span class="sxs-lookup"><span data-stu-id="8ad47-130">If a schema does not conform to the data contract rules, use a different serialization engine.</span></span> <span data-ttu-id="8ad47-131">Le moteur de sérialisation <xref:System.Xml.Serialization.XmlSerializer> utilise, par exemple, son propre mécanisme d'importation de schéma.</span><span class="sxs-lookup"><span data-stu-id="8ad47-131">For example, the <xref:System.Xml.Serialization.XmlSerializer> uses its own separate schema import mechanism.</span></span> <span data-ttu-id="8ad47-132">De plus, il existe un mode spécial d'importation dans lequel la plage du schéma pris en charge est développée.</span><span class="sxs-lookup"><span data-stu-id="8ad47-132">Also, there is a special import mode in which the range of supported schema is expanded.</span></span> <span data-ttu-id="8ad47-133">Pour plus d’informations, consultez la section relative à la génération <xref:System.Xml.Serialization.IXmlSerializable> de types dans [importation de schéma pour générer des classes](importing-schema-to-generate-classes.md).</span><span class="sxs-lookup"><span data-stu-id="8ad47-133">For more information, see the section about generating <xref:System.Xml.Serialization.IXmlSerializable> types in [Importing Schema to Generate Classes](importing-schema-to-generate-classes.md).</span></span>  
  
 <span data-ttu-id="8ad47-134">`XsdDataContractExporter`Prend en charge tous les types de .NET Framework qui peuvent être sérialisés avec le `DataContractSerializer` .</span><span class="sxs-lookup"><span data-stu-id="8ad47-134">The `XsdDataContractExporter` supports any .NET Framework types that can be serialized with the `DataContractSerializer`.</span></span> <span data-ttu-id="8ad47-135">Pour plus d’informations, consultez [types pris en charge par le sérialiseur de contrat de données](types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="8ad47-135">For more information, see [Types Supported by the Data Contract Serializer](types-supported-by-the-data-contract-serializer.md).</span></span> <span data-ttu-id="8ad47-136">Remarque : le schéma généré à l'aide de `XsdDataContractExporter` contient en principe des données utilisables par l'importateur `XsdDataContractImporter`, sauf si <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> est utilisé afin de personnaliser ce schéma).</span><span class="sxs-lookup"><span data-stu-id="8ad47-136">Note that schema generated using the `XsdDataContractExporter` is normally valid data that the `XsdDataContractImporter` can use (unless the <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> is used to customize the schema).</span></span>  
  
 <span data-ttu-id="8ad47-137">Pour plus d’informations sur l’utilisation de <xref:System.Runtime.Serialization.XsdDataContractImporter> , consultez [importation de schéma pour générer des classes](importing-schema-to-generate-classes.md).</span><span class="sxs-lookup"><span data-stu-id="8ad47-137">For more information about using the <xref:System.Runtime.Serialization.XsdDataContractImporter>, see [Importing Schema to Generate Classes](importing-schema-to-generate-classes.md).</span></span>  
  
 <span data-ttu-id="8ad47-138">Pour plus d’informations sur l’utilisation de <xref:System.Runtime.Serialization.XsdDataContractExporter> , consultez [exportation de schémas à partir de classes](exporting-schemas-from-classes.md).</span><span class="sxs-lookup"><span data-stu-id="8ad47-138">For more information about using the <xref:System.Runtime.Serialization.XsdDataContractExporter>, see [Exporting Schemas from Classes](exporting-schemas-from-classes.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8ad47-139">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8ad47-139">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractSerializer>
- <xref:System.Runtime.Serialization.XsdDataContractImporter>
- <xref:System.Runtime.Serialization.XsdDataContractExporter>
- [<span data-ttu-id="8ad47-140">Importation du schéma pour générer des classes</span><span class="sxs-lookup"><span data-stu-id="8ad47-140">Importing Schema to Generate Classes</span></span>](importing-schema-to-generate-classes.md)
- [<span data-ttu-id="8ad47-141">Exportation de schémas à partir de classes</span><span class="sxs-lookup"><span data-stu-id="8ad47-141">Exporting Schemas from Classes</span></span>](exporting-schemas-from-classes.md)
