---
title: Sélection d'un type d'informations d'identification
ms.date: 03/30/2017
ms.assetid: bf707063-3f30-4304-ab53-0e63413728a8
ms.openlocfilehash: 20c070e9351219a649735ac404231cf6f265d814
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64586127"
---
# <a name="selecting-a-credential-type"></a><span data-ttu-id="fb0ab-102">Sélection d'un type d'informations d'identification</span><span class="sxs-lookup"><span data-stu-id="fb0ab-102">Selecting a Credential Type</span></span>
<span data-ttu-id="fb0ab-103">*Informations d’identification* sont les données de Windows Communication Foundation (WCF) utilise pour établir une identité déclarée ou des fonctions.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-103">*Credentials* are the data Windows Communication Foundation (WCF) uses to establish either a claimed identity or capabilities.</span></span> <span data-ttu-id="fb0ab-104">Par exemple, un passeport est une information d'identification émise par un gouvernement pour établir la citoyenneté dans un pays ou une région.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-104">For example, a passport is a credential a government issues to prove citizenship in a country or region.</span></span> <span data-ttu-id="fb0ab-105">Dans WCF, les informations d’identification peuvent prendre différentes formes, telles que les jetons de nom d’utilisateur et les certificats X.509.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-105">In WCF, credentials can take many forms, such as user name tokens and X.509 certificates.</span></span> <span data-ttu-id="fb0ab-106">Cette rubrique traite des informations d’identification, comment ils sont utilisés dans WCF et comment sélectionner les informations d’identification appropriées pour votre application.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-106">This topic discusses credentials, how they are used in WCF, and how to select the right credential for your application.</span></span>  
  
 <span data-ttu-id="fb0ab-107">Dans de nombreux pays et régions, un permis de conduire est un exemple d'informations d'identification.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-107">In many countries and regions, a driver’s license is an example of a credential.</span></span> <span data-ttu-id="fb0ab-108">Un permis contient des données qui représentent l'identité d'une personne et ses fonctions.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-108">A license contains data that represents a person's identity and capabilities.</span></span> <span data-ttu-id="fb0ab-109">Elle contient la preuve de propriété sous la forme de la photographie du propriétaire.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-109">It contains proof of possession in the form of the possessor's picture.</span></span> <span data-ttu-id="fb0ab-110">Le permis est délivré par une autorité approuvée, habituellement un service public chargé d'accorder des permis.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-110">The license is issued by a trusted authority, usually a governmental department of licensing.</span></span> <span data-ttu-id="fb0ab-111">Le permis est scellé et peut contenir un hologramme qui indique qu'il n'a pas été falsifié.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-111">The license is sealed, and can contain a hologram, showing that it has not been tampered with or counterfeited.</span></span>  
  
 <span data-ttu-id="fb0ab-112">La présentation d'informations d'identification implique la présentation à la fois des données et la preuve de la propriété de ces données.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-112">Presenting a credential involves presenting both the data and proof of possession of the data.</span></span> <span data-ttu-id="fb0ab-113">WCF prend en charge divers types d’informations d’identification au niveau de sécurité du transport et message.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-113">WCF supports a variety of credential types at both the transport and message security levels.</span></span> <span data-ttu-id="fb0ab-114">Par exemple, considérez les deux types d’informations d’identification pris en charge dans WCF : informations d’identification de certificat (X.509) et nom d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-114">For example, consider two types of credentials supported in WCF: user name and (X.509) certificate credentials.</span></span>  
  
 <span data-ttu-id="fb0ab-115">Pour les informations d'identification de nom d'utilisateur, le nom d'utilisateur représente l'identité déclarée et le mot de passe fournit la preuve de la propriété.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-115">For the user name credential, the user name represents the claimed identity and the password provides proof of possession.</span></span> <span data-ttu-id="fb0ab-116">L'autorité approuvée dans ce cas est le système qui valide le nom d'utilisateur et le mot de passe.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-116">The trusted authority in this case is the system that validates the user name and password.</span></span>  
  
 <span data-ttu-id="fb0ab-117">Avec une information d’identification du certificat X.509, nom d’objet, autre nom du sujet ou des champs spécifiques inclus dans le certificat peuvent être utilisés en tant que revendications d’identité, tandis que d’autres champs, tels que le `Valid From` et `Valid To` champs, spécifient la validité de la certificat.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-117">With an X.509 certificate credential, the subject name, subject alternative name or specific fields within the certificate can be used as claims of identity, while other fields, such as the `Valid From` and `Valid To` fields, specify the validity of the certificate.</span></span>  
  
## <a name="transport-credential-types"></a><span data-ttu-id="fb0ab-118">Types d'informations d'identification</span><span class="sxs-lookup"><span data-stu-id="fb0ab-118">Transport Credential Types</span></span>  
 <span data-ttu-id="fb0ab-119">Le tableau suivant affiche les types possibles d’informations d’identification du client qui peuvent être utilisés par une liaison en mode de sécurité de transport.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-119">The following table shows the possible types of client credentials that can be used by a binding in transport security mode.</span></span> <span data-ttu-id="fb0ab-120">Lorsque vous créez un service, affectez à la propriété `ClientCredentialType` une de ces valeurs pour spécifier le type d'information d'identification que le client doit fournir pour communiquer avec votre service.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-120">When creating a service, set the `ClientCredentialType` property to one of these values to specify the type of credential that the client must supply to communicate with your service.</span></span> <span data-ttu-id="fb0ab-121">Vous pouvez définir les types dans les fichiers de code ou de configuration.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-121">You can set the types in either code or configuration files.</span></span>  
  
|<span data-ttu-id="fb0ab-122">Paramètre</span><span class="sxs-lookup"><span data-stu-id="fb0ab-122">Setting</span></span>|<span data-ttu-id="fb0ab-123">Description</span><span class="sxs-lookup"><span data-stu-id="fb0ab-123">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="fb0ab-124">None</span><span class="sxs-lookup"><span data-stu-id="fb0ab-124">None</span></span>|<span data-ttu-id="fb0ab-125">Spécifie que le client n'a pas besoin de présenter d'informations d'identification.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-125">Specifies that the client does not need to present any credential.</span></span> <span data-ttu-id="fb0ab-126">Cela se traduit en un client anonyme.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-126">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="fb0ab-127">Basic</span><span class="sxs-lookup"><span data-stu-id="fb0ab-127">Basic</span></span>|<span data-ttu-id="fb0ab-128">Spécifie l'authentification de base pour le client.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-128">Specifies basic authentication for the client.</span></span> <span data-ttu-id="fb0ab-129">Pour plus d’informations, consultez RFC2617 —[l’authentification HTTP : Authentification de base et authentification Digest](https://go.microsoft.com/fwlink/?LinkID=88313).</span><span class="sxs-lookup"><span data-stu-id="fb0ab-129">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](https://go.microsoft.com/fwlink/?LinkID=88313).</span></span>|  
|<span data-ttu-id="fb0ab-130">Digest</span><span class="sxs-lookup"><span data-stu-id="fb0ab-130">Digest</span></span>|<span data-ttu-id="fb0ab-131">Spécifie l’authentification Digest pour le client.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-131">Specifies digest authentication for the client.</span></span> <span data-ttu-id="fb0ab-132">Pour plus d’informations, consultez RFC2617 —[l’authentification HTTP : Authentification de base et authentification Digest](https://go.microsoft.com/fwlink/?LinkID=88313).</span><span class="sxs-lookup"><span data-stu-id="fb0ab-132">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](https://go.microsoft.com/fwlink/?LinkID=88313).</span></span>|  
|<span data-ttu-id="fb0ab-133">Ntlm</span><span class="sxs-lookup"><span data-stu-id="fb0ab-133">Ntlm</span></span>|<span data-ttu-id="fb0ab-134">Spécifie l'authentification NTLM (NT LAN Manager).</span><span class="sxs-lookup"><span data-stu-id="fb0ab-134">Specifies NT LAN Manager (NTLM) authentication.</span></span> <span data-ttu-id="fb0ab-135">S'utilise si pour une raison quelconque vous ne pouvez pas utiliser l'authentification Kerberos.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-135">This is used when you cannot use Kerberos authentication for some reason.</span></span> <span data-ttu-id="fb0ab-136">Vous pouvez également désactiver son utilisation comme solution de secours en définissant le <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> propriété `false`, ce qui entraîne de WCF rendre un meilleur effort pour lever une exception si NTLM est utilisé.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-136">You can also disable its use as a fallback by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`, which causes WCF to make a best-effort to throw an exception if NTLM is used.</span></span> <span data-ttu-id="fb0ab-137">Notez que l'affectation de la valeur `false` à cette propriété peut ne pas empêcher la transmission des informations d'identification NTLM.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-137">Note that setting this property to `false` may not prevent NTLM credentials from being sent over the wire.</span></span>|  
|<span data-ttu-id="fb0ab-138">Windows</span><span class="sxs-lookup"><span data-stu-id="fb0ab-138">Windows</span></span>|<span data-ttu-id="fb0ab-139">Spécifie l'authentification Windows.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-139">Specifies Windows authentication.</span></span> <span data-ttu-id="fb0ab-140">Pour spécifier uniquement le protocole Kerberos sur un domaine Windows, affectez à la propriété <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> la valeur `false` (la valeur par défaut est `true`).</span><span class="sxs-lookup"><span data-stu-id="fb0ab-140">To specify only the Kerberos protocol on a Windows domain, set the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false` (the default is `true`).</span></span>|  
|<span data-ttu-id="fb0ab-141">Certificat</span><span class="sxs-lookup"><span data-stu-id="fb0ab-141">Certificate</span></span>|<span data-ttu-id="fb0ab-142">Effectue l'authentification du client à l'aide d'un certificat X.509.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-142">Performs client authentication using an X.509 certificate.</span></span>|  
|<span data-ttu-id="fb0ab-143">Mot de passe</span><span class="sxs-lookup"><span data-stu-id="fb0ab-143">Password</span></span>|<span data-ttu-id="fb0ab-144">L'utilisateur doit fournir un nom d'utilisateur et un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-144">User must supply a user name and password.</span></span> <span data-ttu-id="fb0ab-145">Validez la paire nom d'utilisateur/mot de passe à l'aide de l'authentification Windows ou d'une autre solution personnalisée.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-145">Validate the user name/password pair using Windows authentication or another custom solution.</span></span>|  
  
### <a name="message-client-credential-types"></a><span data-ttu-id="fb0ab-146">Types d'informations d'identification du client de message</span><span class="sxs-lookup"><span data-stu-id="fb0ab-146">Message Client Credential Types</span></span>  
 <span data-ttu-id="fb0ab-147">Le tableau suivant illustre les types d'informations d'identification possibles que vous pouvez utiliser lors de la création d'une application qui utilise la sécurité de message.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-147">The following table shows the possible credential types that you can use when creating an application that uses message security.</span></span> <span data-ttu-id="fb0ab-148">Vous pouvez utiliser ces valeurs dans les fichiers de code ou de configuration.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-148">You can use these values in either code or configuration files.</span></span>  
  
|<span data-ttu-id="fb0ab-149">Paramètre</span><span class="sxs-lookup"><span data-stu-id="fb0ab-149">Setting</span></span>|<span data-ttu-id="fb0ab-150">Description</span><span class="sxs-lookup"><span data-stu-id="fb0ab-150">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="fb0ab-151">None</span><span class="sxs-lookup"><span data-stu-id="fb0ab-151">None</span></span>|<span data-ttu-id="fb0ab-152">Spécifie que le client n'a pas besoin de présenter d'informations d'identification.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-152">Specifies that the client does not need to present a credential.</span></span> <span data-ttu-id="fb0ab-153">Cela se traduit en un client anonyme.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-153">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="fb0ab-154">Windows</span><span class="sxs-lookup"><span data-stu-id="fb0ab-154">Windows</span></span>|<span data-ttu-id="fb0ab-155">Permet les échanges de messages SOAP dans le contexte de sécurité établi avec des informations d'identification Windows.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-155">Allows SOAP message exchanges to occur under the security context established with a Windows credential.</span></span>|  
|<span data-ttu-id="fb0ab-156">Utilisateur</span><span class="sxs-lookup"><span data-stu-id="fb0ab-156">Username</span></span>|<span data-ttu-id="fb0ab-157">Autorise le service à exiger que le client soit authentifié avec des informations d'identification de nom d'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-157">Allows the service to require that the client be authenticated with a user name credential.</span></span> <span data-ttu-id="fb0ab-158">Notez que WCF n’autorise pas les opérations de chiffrement avec les noms d’utilisateur, telles que la génération d’une signature ou chiffrement des données.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-158">Note that WCF does not allow any cryptographic operations with user names, such as generating a signature or encrypting data.</span></span> <span data-ttu-id="fb0ab-159">WCF permet de s’assurer que le transport est sécurisé lors de l’utilisation des informations d’identification utilisateur.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-159">WCF ensures that the transport is secured when using user name credentials.</span></span>|  
|<span data-ttu-id="fb0ab-160">Certificat</span><span class="sxs-lookup"><span data-stu-id="fb0ab-160">Certificate</span></span>|<span data-ttu-id="fb0ab-161">Autorise le service à exiger que le client soit authentifié à l'aide d'un certificat X.509.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-161">Allows the service to require that the client be authenticated using an X.509 certificate.</span></span>|  
|<span data-ttu-id="fb0ab-162">Jeton émis</span><span class="sxs-lookup"><span data-stu-id="fb0ab-162">Issued Token</span></span>|<span data-ttu-id="fb0ab-163">Type de jeton personnalisé configuré en fonction d'une stratégie de sécurité.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-163">A custom token type configured according to a security policy.</span></span> <span data-ttu-id="fb0ab-164">Le type de jeton par défaut est le jeton SAML (Security Assertions Markup Language).</span><span class="sxs-lookup"><span data-stu-id="fb0ab-164">The default token type is Security Assertions Markup Language (SAML).</span></span> <span data-ttu-id="fb0ab-165">Le jeton est émis par un service de jetons sécurisé.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-165">The token is issued by a secure token service.</span></span> <span data-ttu-id="fb0ab-166">Pour plus d’informations, consultez [fédération et jetons émis](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="fb0ab-166">For more information, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span>|  
  
### <a name="negotiation-model-of-service-credentials"></a><span data-ttu-id="fb0ab-167">Modèle de négociation des informations d'identification du service</span><span class="sxs-lookup"><span data-stu-id="fb0ab-167">Negotiation Model of Service Credentials</span></span>  
 <span data-ttu-id="fb0ab-168">*Négociation* consiste à établir une approbation entre un client et un service en échangeant des informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-168">*Negotiation* is the process of establishing trust between a client and a service by exchanging credentials.</span></span> <span data-ttu-id="fb0ab-169">Le processus est exécuté de manière itérative entre le client et le service afin de divulguer uniquement les informations nécessaires pour l'étape suivante dans le processus de négociation.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-169">The process is performed iteratively between the client and the service, so as to disclose only the information necessary for the next step in the negotiation process.</span></span> <span data-ttu-id="fb0ab-170">En pratique, le résultat final consiste à remettre les informations d'identification d'un service au client pour qu'elles soient utilisées dans des opérations ultérieures.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-170">In practice, the end result is the delivery of a service's credential to the client to be used in subsequent operations.</span></span>  
  
 <span data-ttu-id="fb0ab-171">Avec une exception, par défaut les liaisons fournies par le système dans WCF négocient les informations d’identification du service automatiquement lorsque vous utilisez la sécurité au niveau du message.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-171">With one exception, by default the system-provided bindings in WCF negotiate the service credential automatically when using message-level security.</span></span> <span data-ttu-id="fb0ab-172">(L'exception est <xref:System.ServiceModel.BasicHttpBinding> qui n'active pas la sécurité par défaut). Pour désactiver ce comportement, consultez les propriétés <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> et <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A>.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-172">(The exception is the <xref:System.ServiceModel.BasicHttpBinding>, which does not enable security by default.) To disable this behavior, see the <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> and <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> properties.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="fb0ab-173">Lors de la sécurité SSL est utilisée avec .NET Framework 3.5 et versions ultérieures, un client WCF utilise les certificats intermédiaires dans son magasin de certificats et les certificats intermédiaires reçus au cours de la négociation SSL pour effectuer la validation de chaîne de certificats sur le service certificat.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-173">When SSL security is used with .NET Framework 3.5 and later, a WCF client uses both the intermediate certificates in its certificate store and the intermediate certificates received during SSL negotiation to perform certificate chain validation on the service's certificate.</span></span> <span data-ttu-id="fb0ab-174">.NET Framework 3.0 n'utilise que les certificats intermédiaires installés dans le magasin de certificats local.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-174">.NET Framework 3.0 only uses the intermediate certificates installed in the local certificate store.</span></span>  
  
#### <a name="out-of-band-negotiation"></a><span data-ttu-id="fb0ab-175">Négociation hors bande</span><span class="sxs-lookup"><span data-stu-id="fb0ab-175">Out-of-Band Negotiation</span></span>  
 <span data-ttu-id="fb0ab-176">Si la négociation automatique est désactivée, les informations d'identification du service doivent être configurées au niveau du client avant l'envoi de messages au service.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-176">If automatic negotiation is disabled, the service credential must be provisioned at the client prior to sending any messages to the service.</span></span> <span data-ttu-id="fb0ab-177">Cela est également appelé un *hors-bande* d’approvisionnement.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-177">This is also known as an *out-of-band* provisioning.</span></span> <span data-ttu-id="fb0ab-178">Par exemple, si le type d'informations d'identification spécifié est un certificat et que la négociation automatique est désactivée, le client doit contacter le propriétaire de service pour recevoir et installer le certificat sur l'ordinateur qui exécute l'application cliente.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-178">For example, if the specified credential type is a certificate, and automatic negotiation is disabled, the client must contact the service owner to receive and install the certificate on the computer running the client application.</span></span> <span data-ttu-id="fb0ab-179">Cette opération peut avoir lieu, par exemple, lorsque vous souhaitez contrôler de manière stricte les clients pouvant accéder à un service dans un scénario interentreprises.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-179">This can be done, for example, when you want to strictly control which clients can access a service in a business-to-business scenario.</span></span> <span data-ttu-id="fb0ab-180">Cette hors de-bande-la négociation est possible par courrier électronique, et le certificat X.509 est stocké dans le magasin de certificats Windows, à l’aide d’un outil tel que le composant logiciel enfichable Certificats de Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="fb0ab-180">This out-of-band-negotiation can be done in email, and the X.509 certificate is stored in Windows certificate store, using a tool such as the Microsoft Management Console (MMC) Certificates snap-in.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="fb0ab-181">La propriété <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> est utilisée pour fournir au service un certificat obtenu dans le cadre d'une négociation hors bande.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-181">The <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property is used to provide the service with a certificate that was attained through out-of-band negotiation.</span></span> <span data-ttu-id="fb0ab-182">Celui-ci est nécessaire pour utiliser la classe <xref:System.ServiceModel.BasicHttpBinding> parce que la liaison n'autorise pas de négociation automatisée.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-182">This is necessary when using the <xref:System.ServiceModel.BasicHttpBinding> class because the binding does not allow automated negotiation.</span></span> <span data-ttu-id="fb0ab-183">La propriété est également utilisée dans un scénario duplex non corrélé.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-183">The property is also used in an uncorrelated duplex scenario.</span></span> <span data-ttu-id="fb0ab-184">Dans ce scénario, un serveur envoie un message au client sans exiger que le client envoie en premier une demande au serveur.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-184">This is a scenario where a server sends a message to the client without requiring the client to send a request to the server first.</span></span> <span data-ttu-id="fb0ab-185">Comme le serveur ne reçoit pas de demande du client, il doit utiliser le certificat du client pour chiffrer le message au client.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-185">Because the server does not have a request from the client, it must use the client's certificate to encrypt the message to the client.</span></span>  
  
## <a name="setting-credential-values"></a><span data-ttu-id="fb0ab-186">Définition des valeurs d'informations d'identification</span><span class="sxs-lookup"><span data-stu-id="fb0ab-186">Setting Credential Values</span></span>  
 <span data-ttu-id="fb0ab-187">Une fois que vous sélectionnez un mode de sécurité, vous devez spécifier les informations d'identification à proprement dites.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-187">Once you select a security mode, you must specify the actual credentials.</span></span> <span data-ttu-id="fb0ab-188">Par exemple, si le type d'informations d'identification a pour valeur « certificate », vous devez associer une information d'identification spécifique (tel qu'un certificat X.509 spécifique) au service ou au client.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-188">For example, if the credential type is set to "certificate," then you must associate a specific credential (such as a specific X.509 certificate) with the service or client.</span></span>  
  
 <span data-ttu-id="fb0ab-189">Selon que vous programmez un service ou un client, la méthode pour définir la valeur des informations d'identification diffère légèrement.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-189">Depending on whether you are programming a service or a client, the method for setting the credential value differs slightly.</span></span>  
  
### <a name="setting-service-credentials"></a><span data-ttu-id="fb0ab-190">Définition des informations d'identification de service</span><span class="sxs-lookup"><span data-stu-id="fb0ab-190">Setting Service Credentials</span></span>  
 <span data-ttu-id="fb0ab-191">Si vous utilisez le mode de transport et que vous utilisez le protocole HTTP comme transport, vous devez utiliser les services Internet (IIS) ou configurer le port avec un certificat.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-191">If you are using transport mode, and you are using HTTP as the transport, you must use either Internet Information Services (IIS) or configure the port with a certificate.</span></span> <span data-ttu-id="fb0ab-192">Pour plus d’informations, consultez [vue d’ensemble de sécurité de Transport](../../../../docs/framework/wcf/feature-details/transport-security-overview.md) et [sécurité du Transport HTTP](../../../../docs/framework/wcf/feature-details/http-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="fb0ab-192">For more information, see [Transport Security Overview](../../../../docs/framework/wcf/feature-details/transport-security-overview.md) and [HTTP Transport Security](../../../../docs/framework/wcf/feature-details/http-transport-security.md).</span></span>  
  
 <span data-ttu-id="fb0ab-193">Pour configurer un service avec les informations d'identification dans le code, créez une instance de la classe <xref:System.ServiceModel.ServiceHost> et spécifiez les informations d'identification appropriées à l'aide de la classe <xref:System.ServiceModel.Description.ServiceCredentials>, accessible par la propriété <xref:System.ServiceModel.ServiceHostBase.Credentials%2A>.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-193">To provision a service with credentials in code, create an instance of the <xref:System.ServiceModel.ServiceHost> class and specify the appropriate credential using the <xref:System.ServiceModel.Description.ServiceCredentials> class, accessed through the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="fb0ab-194">Définition d'un certificat</span><span class="sxs-lookup"><span data-stu-id="fb0ab-194">Setting a Certificate</span></span>  
 <span data-ttu-id="fb0ab-195">Pour configurer un service avec un certificat X.509 à utiliser pour authentifier le service auprès des clients, utilisez la méthode <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> de la classe <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential>.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-195">To provision a service with an X.509 certificate to be used to authenticate the service to clients, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class.</span></span>  
  
 <span data-ttu-id="fb0ab-196">Pour configurer un service avec un certificat client, utilisez la méthode <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> de la classe <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential>.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-196">To provision a service with a client certificate, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> class.</span></span>  
  
#### <a name="setting-windows-credentials"></a><span data-ttu-id="fb0ab-197">Définition des informations d'identification Windows</span><span class="sxs-lookup"><span data-stu-id="fb0ab-197">Setting Windows Credentials</span></span>  
 <span data-ttu-id="fb0ab-198">Si le client spécifie un nom d'utilisateur et un mot de passe valides, ces informations d'identification sont utilisées pour authentifier le client.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-198">If the client specifies a valid user name and password, that credential is used to authenticate the client.</span></span> <span data-ttu-id="fb0ab-199">Sinon, les informations d'identification de l'utilisateur actuellement connecté sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-199">Otherwise, the current logged-on user's credentials are used.</span></span>  
  
### <a name="setting-client-credentials"></a><span data-ttu-id="fb0ab-200">Définition des informations d'identification du client</span><span class="sxs-lookup"><span data-stu-id="fb0ab-200">Setting Client Credentials</span></span>  
 <span data-ttu-id="fb0ab-201">Dans WCF, les applications clientes utilisent un client WCF pour se connecter aux services.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-201">In WCF, client applications use a WCF client to connect to services.</span></span> <span data-ttu-id="fb0ab-202">Chaque client dérive de la classe <xref:System.ServiceModel.ClientBase%601> et la propriété <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> sur le client autorise la spécification de différentes valeurs d'informations d'identification du client.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-202">Every client derives from the <xref:System.ServiceModel.ClientBase%601> class, and the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property on the client allows the specification of various values of client credentials.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="fb0ab-203">Définition d'un certificat</span><span class="sxs-lookup"><span data-stu-id="fb0ab-203">Setting a Certificate</span></span>  
 <span data-ttu-id="fb0ab-204">Pour configurer un service avec un certificat X.509 qui est utilisé pour authentifier le client auprès d'un service, utilisez la méthode <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> de la classe <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential>.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-204">To provision a service with an X.509 certificate that is used to authenticate the client to a service, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> class.</span></span>  
  
## <a name="how-client-credentials-are-used-to-authenticate-a-client-to-the-service"></a><span data-ttu-id="fb0ab-205">Comment sont utilisées les informations d'identification du client pour authentifier un client auprès du service</span><span class="sxs-lookup"><span data-stu-id="fb0ab-205">How Client Credentials Are Used to Authenticate a Client to the Service</span></span>  
 <span data-ttu-id="fb0ab-206">Les informations d'identification du client requises pour communiquer avec un service sont fournies à l'aide de la propriété <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> ou de la propriété <xref:System.ServiceModel.ChannelFactory.Credentials%2A>.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-206">Client credential information required to communicate with a service is provided using either the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property or the <xref:System.ServiceModel.ChannelFactory.Credentials%2A> property.</span></span> <span data-ttu-id="fb0ab-207">Le canal de sécurité utilise ces informations pour authentifier le client auprès du service.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-207">The security channel uses this information to authenticate the client to the service.</span></span> <span data-ttu-id="fb0ab-208">L'authentification est accomplie par l'intermédiaire d'un des deux modes :</span><span class="sxs-lookup"><span data-stu-id="fb0ab-208">Authentication is accomplished through one of two modes:</span></span>  
  
- <span data-ttu-id="fb0ab-209">Les informations d’identification du client sont utilisées qu’une seule fois avant le premier message est envoyé, à l’aide de l’instance du client WCF pour établir un contexte de sécurité.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-209">The client credentials are used once before the first message is sent, using the WCF client instance to establish a security context.</span></span> <span data-ttu-id="fb0ab-210">Tous les messages d'application sont ensuite sécurisés par l'intermédiaire du contexte de sécurité.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-210">All application messages are then secured through the security context.</span></span>  
  
- <span data-ttu-id="fb0ab-211">Les informations d'identification du client sont utilisées pour authentifier chaque message d'application envoyé au service.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-211">The client credentials are used to authenticate every application message sent to the service.</span></span> <span data-ttu-id="fb0ab-212">Dans ce cas, aucun contexte n'est établi entre le client et le service.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-212">In this case, no context is established between the client and the service.</span></span>  
  
### <a name="established-identities-cannot-be-changed"></a><span data-ttu-id="fb0ab-213">Les identités établies ne peuvent pas être modifiées</span><span class="sxs-lookup"><span data-stu-id="fb0ab-213">Established Identities Cannot Be Changed</span></span>  
 <span data-ttu-id="fb0ab-214">Lorsque la première méthode est utilisée, le contexte établi est associé définitivement à l'identité du client.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-214">When the first method is used, the established context is permanently associated with the client identity.</span></span> <span data-ttu-id="fb0ab-215">Autrement dit, une fois le contexte de sécurité établi, l'identité associée au client ne peut pas être modifiée.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-215">That is, once the security context has been established, the identity associated with the client cannot be changed.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="fb0ab-216">Il existe un cas où l'identité ne peut pas être établie (autrement dit, lorsque le contexte de sécurité établi est activé, ce qui est le comportement par défaut).</span><span class="sxs-lookup"><span data-stu-id="fb0ab-216">There is a situation to be aware of when the identity cannot be switched (that is, when establish security context is on, the default behavior).</span></span> <span data-ttu-id="fb0ab-217">Si vous créez un service qui communique avec un deuxième service, l’identité utilisée pour ouvrir le client WCF au deuxième service ne peut pas être modifiée.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-217">If you create a service that communicates with a second service, the identity used to open the WCF client to the second service cannot be changed.</span></span> <span data-ttu-id="fb0ab-218">Cela devient problématique si plusieurs clients sont autorisés à utiliser le premier service et que le service emprunte l'identité des clients lors de l'accès au deuxième service.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-218">This becomes a problem if multiple clients are allowed to use the first service and the service impersonates the clients when accessing the second service.</span></span> <span data-ttu-id="fb0ab-219">Si le service réutilise le même client pour tous les appelants, tous les appels au deuxième service sont effectués sous l'identité du premier appelant ayant été utilisé pour ouvrir le client au deuxième service.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-219">If the service reuses the same client for all callers, all calls to the second service are done under the identity of the first caller that was used to open the client to the second service.</span></span> <span data-ttu-id="fb0ab-220">En d'autres termes, le service utilise l'identité du premier client pour tous ses clients afin de communiquer avec le deuxième service.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-220">In other words, the service uses the identity of the first client for all its clients to communicate with the second service.</span></span> <span data-ttu-id="fb0ab-221">Cette situation peut entraîner l'élévation des privilèges.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-221">This can lead to the elevation of privilege.</span></span> <span data-ttu-id="fb0ab-222">Si ce comportement n'est pas souhaité pour votre service, vous devez suivre chaque appelant et créer un client au deuxième service pour chaque appelant et veiller à ce que le service utilise uniquement le bon client pour le bon appelant en vue de communiquer avec le deuxième service.</span><span class="sxs-lookup"><span data-stu-id="fb0ab-222">If this is not the desired behavior of your service, you must track each caller and create a new client to the second service for every distinct caller, and ensure that the service uses only the right client for the right caller to communicate with the second service.</span></span>  
  
 <span data-ttu-id="fb0ab-223">Pour plus d’informations sur les informations d’identification et des sessions sécurisées, consultez [considérations de sécurité pour les Sessions sécurisées](../../../../docs/framework/wcf/feature-details/security-considerations-for-secure-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="fb0ab-223">For more information about credentials and secure sessions, see [Security Considerations for Secure Sessions](../../../../docs/framework/wcf/feature-details/security-considerations-for-secure-sessions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fb0ab-224">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="fb0ab-224">See also</span></span>

- <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>
- <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Description.ClientCredentials.ClientCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.BasicHttpMessageSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverMsmq.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A?displayProperty=nameWithType>
- [<span data-ttu-id="fb0ab-225">Concepts relatifs à la sécurité</span><span class="sxs-lookup"><span data-stu-id="fb0ab-225">Security Concepts</span></span>](../../../../docs/framework/wcf/feature-details/security-concepts.md)
- [<span data-ttu-id="fb0ab-226">Sécurisation des services et des clients</span><span class="sxs-lookup"><span data-stu-id="fb0ab-226">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
- [<span data-ttu-id="fb0ab-227">Programmation de la sécurité dans WCF</span><span class="sxs-lookup"><span data-stu-id="fb0ab-227">Programming WCF Security</span></span>](../../../../docs/framework/wcf/feature-details/programming-wcf-security.md)
- [<span data-ttu-id="fb0ab-228">Sécurité de transport HTTP</span><span class="sxs-lookup"><span data-stu-id="fb0ab-228">HTTP Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/http-transport-security.md)
