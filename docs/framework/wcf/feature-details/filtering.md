---
title: Filtrage
ms.date: 03/30/2017
ms.assetid: 4002946c-e34a-4356-8cfb-e25912a4be63
ms.openlocfilehash: cc95852a5eb191befe7e3cd563939c340ef16e06
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96268480"
---
# <a name="filtering"></a><span data-ttu-id="0311b-102">Filtrage</span><span class="sxs-lookup"><span data-stu-id="0311b-102">Filtering</span></span>

<span data-ttu-id="0311b-103">Le système de filtrage Windows Communication Foundation (WCF) peut utiliser des filtres déclaratifs pour faire correspondre des messages et prendre des décisions opérationnelles.</span><span class="sxs-lookup"><span data-stu-id="0311b-103">The Windows Communication Foundation (WCF) filtering system can use declarative filters to match messages and make operational decisions.</span></span> <span data-ttu-id="0311b-104">Vous pouvez utiliser des filtres pour déterminer ce qu'il faut faire d'un message en examinant une partie du message.</span><span class="sxs-lookup"><span data-stu-id="0311b-104">You can use filters to determine what to do with a message by examining part of the message.</span></span> <span data-ttu-id="0311b-105">Par exemple, un processus de mise en file d’attente peut utiliser une requête XPath 1.0 pour vérifier l’élément prioritaire d’un en-tête connu afin de déterminer s’il faut déplacer un message au début de la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="0311b-105">A queuing process, for example, can use an XPath 1.0 query to check the priority element of a known header to determine whether to move a message to the front of the queue.</span></span>  
  
 <span data-ttu-id="0311b-106">Le système de filtrage est constitué d’un ensemble de classes qui permettent de déterminer efficacement le jeu de filtres `true` pour un message WCF particulier.</span><span class="sxs-lookup"><span data-stu-id="0311b-106">The filtering system is composed of a set of classes that can efficiently determine which of a set of filters are `true` for a particular WCF message.</span></span>  
  
 <span data-ttu-id="0311b-107">Le système de filtrage est un composant principal de la messagerie WCF. Il est conçu pour être extrêmement rapide.</span><span class="sxs-lookup"><span data-stu-id="0311b-107">The filtering system is a core component of WCF messaging; it is designed to be extremely fast.</span></span> <span data-ttu-id="0311b-108">Chaque implémentation de filtre a été optimisée pour un type particulier de correspondance avec les messages WCF.</span><span class="sxs-lookup"><span data-stu-id="0311b-108">Each filter implementation has been optimized for a particular kind of matching against WCF messages.</span></span>  
  
 <span data-ttu-id="0311b-109">Le système de filtrage n'est pas thread-safe.</span><span class="sxs-lookup"><span data-stu-id="0311b-109">The filtering system is not thread safe.</span></span> <span data-ttu-id="0311b-110">L'application doit gérer toute sémantique de verrouillage.</span><span class="sxs-lookup"><span data-stu-id="0311b-110">The application must handle any locking semantics.</span></span> <span data-ttu-id="0311b-111">Toutefois, elle prend en charge les sémantiques writer unique/lecteurs multiples.</span><span class="sxs-lookup"><span data-stu-id="0311b-111">It does, however, support a multi-reader, single writer.</span></span>  
  
## <a name="where-filtering-fits"></a><span data-ttu-id="0311b-112">Cas dans lesquels le filtrage est applicable</span><span class="sxs-lookup"><span data-stu-id="0311b-112">Where Filtering Fits</span></span>  

 <span data-ttu-id="0311b-113">Le filtrage est exécuté après qu'un message a été reçu et fait partie du processus de la distribution du message au composant d'application qui convient.</span><span class="sxs-lookup"><span data-stu-id="0311b-113">Filtering is performed after a message is received and is part of the process of dispatching the message to the proper application component.</span></span> <span data-ttu-id="0311b-114">La conception du système de filtrage répond aux besoins de plusieurs sous-systèmes WCF, y compris la messagerie, le routage, la sécurité, la gestion des événements et la gestion du système.</span><span class="sxs-lookup"><span data-stu-id="0311b-114">The design of the filtering system addresses the requirements of several WCF subsystems, including messaging, routing, security, event handling, and system management.</span></span>  
  
## <a name="filters"></a><span data-ttu-id="0311b-115">Filtres</span><span class="sxs-lookup"><span data-stu-id="0311b-115">Filters</span></span>  

 <span data-ttu-id="0311b-116">Le moteur de filtre comporte deux composants principaux, les filtres et les tables de filtres.</span><span class="sxs-lookup"><span data-stu-id="0311b-116">The filter engine has two primary components, filters and filter tables.</span></span> <span data-ttu-id="0311b-117">Un filtre prend des décisions booléennes à propos d'un message selon des conditions logiques spécifiées par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0311b-117">A filter makes Boolean decisions about a message based on user-specified logical conditions.</span></span> <span data-ttu-id="0311b-118">Les filtres implémentent la classe <xref:System.ServiceModel.Dispatcher.MessageFilter>.</span><span class="sxs-lookup"><span data-stu-id="0311b-118">Filters implement the <xref:System.ServiceModel.Dispatcher.MessageFilter> class.</span></span>  
  
 <span data-ttu-id="0311b-119">Les méthodes <xref:System.ServiceModel.Dispatcher.MessageFilter.Match%2A> sont utilisées pour déterminer si un message correspond à un filtre.</span><span class="sxs-lookup"><span data-stu-id="0311b-119">The <xref:System.ServiceModel.Dispatcher.MessageFilter.Match%2A> methods are used to determine if a message satisfies a filter.</span></span> <span data-ttu-id="0311b-120">L'une des méthodes teste l'en-tête du message, mais ne peut pas inspecter le corps du message.</span><span class="sxs-lookup"><span data-stu-id="0311b-120">One of the methods tests the message's header, but cannot inspect the message body.</span></span> <span data-ttu-id="0311b-121">L’autre méthode prend un *tampon de messages* comme paramètre d’entrée et peut inspecter le corps du message.</span><span class="sxs-lookup"><span data-stu-id="0311b-121">The other method takes a *message buffer* as an input parameter and can inspect the message body.</span></span>  
  
 <span data-ttu-id="0311b-122">Les filtres ne sont généralement pas testés individuellement mais en tant que parties d'une table de filtres, c'est-à-dire une classe générique créée par la méthode <xref:System.ServiceModel.Dispatcher.MessageFilterTable%601.CreateFilterTable%2A>.</span><span class="sxs-lookup"><span data-stu-id="0311b-122">Filters are not usually tested individually, but as part of a filter table, which is a generic class that the <xref:System.ServiceModel.Dispatcher.MessageFilterTable%601.CreateFilterTable%2A> method creates.</span></span>  
  
 <span data-ttu-id="0311b-123">Chaque type de filtre correspond à un type particulier de condition booléenne.</span><span class="sxs-lookup"><span data-stu-id="0311b-123">The several kinds of filters each specialize in matching on a particular kind of Boolean condition.</span></span> <span data-ttu-id="0311b-124">Une fois un filtre construit, vous ne pouvez pas modifier les critères qu'il utilise ; pour modifier les critère d'un filtre, construisez-en un nouveau et supprimez le filtre existant.</span><span class="sxs-lookup"><span data-stu-id="0311b-124">Once you construct a filter, you cannot change the criteria that a filter uses; to modify a filter's criteria, construct a new one and delete the existing filter.</span></span>  
  
### <a name="action-filters"></a><span data-ttu-id="0311b-125">Filtres d'action</span><span class="sxs-lookup"><span data-stu-id="0311b-125">Action Filters</span></span>  

 <span data-ttu-id="0311b-126">Le <xref:System.ServiceModel.Dispatcher.ActionMessageFilter> contient une liste de chaînes d'action.</span><span class="sxs-lookup"><span data-stu-id="0311b-126">The <xref:System.ServiceModel.Dispatcher.ActionMessageFilter> contains a list of action strings.</span></span> <span data-ttu-id="0311b-127">Si l'une des actions dans la liste du filtre correspond à l'en-tête Action dans le message ou le tampon de messages, la méthode `Match` retourne la valeur `true`.</span><span class="sxs-lookup"><span data-stu-id="0311b-127">If any of the actions in the filter’s list matches the Action header in the message or message buffer, the `Match` method returns `true`.</span></span> <span data-ttu-id="0311b-128">Si la liste est vide, le filtre est considéré un filtre de correspondance totale et tous les messages ou tampons de messages correspondent, et `Match` retourne la valeur `true`.</span><span class="sxs-lookup"><span data-stu-id="0311b-128">If the list is empty, the filter is considered a match-all filter and any message or message buffer matches and `Match` returns `true`.</span></span> <span data-ttu-id="0311b-129">Si aucune des actions dans la liste du filtre ne correspond à l'en-tête Action dans le message ou le tampon de messages, la méthode `Match` retourne la valeur `false`.</span><span class="sxs-lookup"><span data-stu-id="0311b-129">If none of the actions in the filter’s list matches the Action header in the message or message buffer, `Match` returns `false`.</span></span> <span data-ttu-id="0311b-130">S'il n'y a aucune action dans le message et si la liste du filtre n'est pas vide, alors `Match` retourne la valeur `false`.</span><span class="sxs-lookup"><span data-stu-id="0311b-130">If there is no action in the message and the filter’s list is non-empty, then `Match` returns `false`.</span></span>  
  
### <a name="endpoint-address-filters"></a><span data-ttu-id="0311b-131">Filtres de l'adresse du point de terminaison</span><span class="sxs-lookup"><span data-stu-id="0311b-131">Endpoint Address Filters</span></span>  

 <span data-ttu-id="0311b-132">Le <xref:System.ServiceModel.Dispatcher.EndpointAddressMessageFilter> filtre les messages et les tampons de messages en fonction d'une adresse de point de terminaison, telle que représentée dans leur collection d'en-têtes.</span><span class="sxs-lookup"><span data-stu-id="0311b-132">The <xref:System.ServiceModel.Dispatcher.EndpointAddressMessageFilter> filters messages and message buffers based on an endpoint address, as represented in their header collection.</span></span> <span data-ttu-id="0311b-133">Pour qu'un message passe un tel filtre, les conditions suivantes doivent être remplies :</span><span class="sxs-lookup"><span data-stu-id="0311b-133">For a message to pass such a filter, the following conditions must be met:</span></span>  
  
- <span data-ttu-id="0311b-134">L'URI de l'adresse du filtre doit être le même que celui de l'en-tête To du message.</span><span class="sxs-lookup"><span data-stu-id="0311b-134">The filter’s address Uniform Resource Identifier (URI) must be the same as the one in the message To header.</span></span>  
  
- <span data-ttu-id="0311b-135">Chaque paramètre de point de terminaison dans l'adresse du filtre (collection `address.Headers` ) doit trouver un en-tête dans le message à mapper.</span><span class="sxs-lookup"><span data-stu-id="0311b-135">Each endpoint parameter in the address of the filter (`address.Headers` collection) must find a header in the message to map on.</span></span> <span data-ttu-id="0311b-136">Des en-tête supplémentaires dans le message ou le tampon de messages sont acceptables pour que la correspondance reste `true`.</span><span class="sxs-lookup"><span data-stu-id="0311b-136">Extra headers in the message or message buffer are acceptable for the match to remain `true`.</span></span>  
  
### <a name="prefix-endpoint-address-filters"></a><span data-ttu-id="0311b-137">Filtres du préfixe de l'adresse du point de terminaison</span><span class="sxs-lookup"><span data-stu-id="0311b-137">Prefix Endpoint Address Filters</span></span>  
  
1. <span data-ttu-id="0311b-138">Le <xref:System.ServiceModel.Dispatcher.PrefixEndpointAddressMessageFilter> fonctionne comme le filtre <xref:System.ServiceModel.Dispatcher.EndpointAddressMessageFilter>, mais la correspondance peut se faire avec le préfixe de l'URI du message.</span><span class="sxs-lookup"><span data-stu-id="0311b-138">The <xref:System.ServiceModel.Dispatcher.PrefixEndpointAddressMessageFilter> functions just like the <xref:System.ServiceModel.Dispatcher.EndpointAddressMessageFilter> filter, except that the match can be on a prefix of the message URI.</span></span> <span data-ttu-id="0311b-139">Par exemple, un filtre spécifiant l’adresse `http://www.adatum.com` correspond aux messages adressés à `http://www.adatum.com/userA` .</span><span class="sxs-lookup"><span data-stu-id="0311b-139">For example, a filter specifying the address `http://www.adatum.com` matches messages addressed to `http://www.adatum.com/userA`.</span></span>  
  
### <a name="xpath-message-filters"></a><span data-ttu-id="0311b-140">Filtres de message XPath</span><span class="sxs-lookup"><span data-stu-id="0311b-140">XPath Message Filters</span></span>  

 <span data-ttu-id="0311b-141">Un <xref:System.ServiceModel.Dispatcher.XPathMessageFilter> utilise une expression XPath pour déterminer si un document XML contient des éléments, des attributs, du texte ou d'autre constructions syntaxiques XML spécifiques.</span><span class="sxs-lookup"><span data-stu-id="0311b-141">An <xref:System.ServiceModel.Dispatcher.XPathMessageFilter> uses an XPath expression to determine whether an XML document contains specific elements, attributes, text, or other XML syntactic constructs.</span></span> <span data-ttu-id="0311b-142">Le filtre se révèle extrêmement efficace pour les sous-ensembles stricts de XPath.</span><span class="sxs-lookup"><span data-stu-id="0311b-142">The filter is optimized to be extremely efficient for a strict subset of XPath.</span></span> <span data-ttu-id="0311b-143">Le langage XML Path est décrit dans la [spécification W3C XML Path language 1,0](https://www.w3.org/TR/xpath/all/).</span><span class="sxs-lookup"><span data-stu-id="0311b-143">The XML Path Language is described in the [W3C XML Path Language 1.0 specification](https://www.w3.org/TR/xpath/all/).</span></span>  
  
 <span data-ttu-id="0311b-144">En général, une application utilise un <xref:System.ServiceModel.Dispatcher.XPathMessageFilter> à un point de terminaison pour interroger le contenu d'un message SOAP puis prend la mesure appropriée en fonction des résultats de cette requête.</span><span class="sxs-lookup"><span data-stu-id="0311b-144">Typically, an application uses an <xref:System.ServiceModel.Dispatcher.XPathMessageFilter> at an endpoint to query the contents of a SOAP message and then takes the appropriate action based on the results of that query.</span></span> <span data-ttu-id="0311b-145">Par exemple, un processus de mise en file d’attente peut utiliser une requête XPath pour inspecter l’élément de priorité d’un en-tête connu afin de décider s’il faut déplacer un message en haut de la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="0311b-145">A queuing process, for example, may use an XPath query to inspect the priority element of a known header to decide whether to move a message to the front of the queue.</span></span>  
  
## <a name="filter-tables"></a><span data-ttu-id="0311b-146">Tables de filtres</span><span class="sxs-lookup"><span data-stu-id="0311b-146">Filter Tables</span></span>  

 <span data-ttu-id="0311b-147">Les tables de filtres sont utilisées pour stocker des paires clé-valeur, où la clé est un filtre et certaines données associées sont la valeur.</span><span class="sxs-lookup"><span data-stu-id="0311b-147">Filter tables are used to store key-value pairs, where a filter is the key and some associated data is the value.</span></span> <span data-ttu-id="0311b-148">Les données du filtre peuvent être utilisées pour indiquer quelles actions doivent être effectuées si un message correspond au filtre et si le type des données du filtre correspond au paramètre générique pour la classe de la table de filtres.</span><span class="sxs-lookup"><span data-stu-id="0311b-148">The filter data can be used to indicate what actions to take if a message matches the filter and the type of the filter data is the generic parameter for the filter table class.</span></span> <span data-ttu-id="0311b-149">Les données de filtre peuvent se composer de règles de routage, de l'état de la sécurité de la session, d'écouteurs sur un canal, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="0311b-149">The filter data can consist of routing rules, session security state, listeners on a channel, and so on.</span></span> <span data-ttu-id="0311b-150">Les données peuvent être utilisées là où le contrôle du flux de données est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="0311b-150">The data can be used where data flow control is necessary.</span></span>  
  
 <span data-ttu-id="0311b-151">Les tables de filtres implémentent l'interface générique <xref:System.ServiceModel.Dispatcher.IMessageFilterTable%601>.</span><span class="sxs-lookup"><span data-stu-id="0311b-151">Filter tables implement the generic interface <xref:System.ServiceModel.Dispatcher.IMessageFilterTable%601>.</span></span>  
  
 <span data-ttu-id="0311b-152">Les tables de filtres comprennent plusieurs méthodes qui font correspondre un message à tous les filtres de la table et retournent une collection non ordonnée de filtres ou de données correspondants.</span><span class="sxs-lookup"><span data-stu-id="0311b-152">Filter tables have several methods that match a message against all the filters in the table and return an unordered collection of matching filters or data.</span></span> <span data-ttu-id="0311b-153">Certaines des méthodes de correspondance acceptent plusieurs correspondances et retournent tous les éléments correspondants.</span><span class="sxs-lookup"><span data-stu-id="0311b-153">Some of the match methods are multiple-match and return all matching items.</span></span> <span data-ttu-id="0311b-154">D'autres n'acceptent qu'une correspondance unique, ne retournent qu'un seul élément et lèvent une <xref:System.ServiceModel.Dispatcher.MultipleFilterMatchesException> si plusieurs filtres correspondent.</span><span class="sxs-lookup"><span data-stu-id="0311b-154">Others are single-match, returning only one item, and throw a <xref:System.ServiceModel.Dispatcher.MultipleFilterMatchesException> if more than one filter matches.</span></span>  
  
### <a name="message-filter-table"></a><span data-ttu-id="0311b-155">Table de filtres de messages</span><span class="sxs-lookup"><span data-stu-id="0311b-155">Message Filter Table</span></span>  

 <span data-ttu-id="0311b-156">La <xref:System.ServiceModel.Dispatcher.MessageFilterTable%601> est l'implémentation la plus générale de <xref:System.ServiceModel.Dispatcher.IMessageFilterTable%601>.</span><span class="sxs-lookup"><span data-stu-id="0311b-156">The <xref:System.ServiceModel.Dispatcher.MessageFilterTable%601> is the most general implementation of <xref:System.ServiceModel.Dispatcher.IMessageFilterTable%601>.</span></span> <span data-ttu-id="0311b-157">Vous pouvez stocker des filtres de tous les types dans la table.</span><span class="sxs-lookup"><span data-stu-id="0311b-157">You can store filters of all types in the table.</span></span>  
  
 <span data-ttu-id="0311b-158">Vous pouvez assigner des priorités numériques aux filtres, où la priorité plus élevée est signifiée par le nombre plus élevé.</span><span class="sxs-lookup"><span data-stu-id="0311b-158">You can assign numeric priorities to filters, where the highest priority is signified by the highest number.</span></span> <span data-ttu-id="0311b-159">Plusieurs types de filtres peuvent avoir la même priorité.</span><span class="sxs-lookup"><span data-stu-id="0311b-159">Multiple types of filters can have the same priority.</span></span> <span data-ttu-id="0311b-160">Un type particulier de filtre peut apparaître dans plusieurs niveaux de priorité.</span><span class="sxs-lookup"><span data-stu-id="0311b-160">A particular type of filter can appear in more than one priority level.</span></span>  
  
 <span data-ttu-id="0311b-161">La correspondance s'effectue en commençant par la priorité la plus élevée, et une fois que les filtres correspondant à une priorité donnée sont trouvés, aucun filtre avec une priorité plus faible n'est examiné.</span><span class="sxs-lookup"><span data-stu-id="0311b-161">Matching is done starting with the highest priority, and once matching filters are found with a given priority, no filters with lower priorities are examined.</span></span> <span data-ttu-id="0311b-162">Par conséquent, si vous utilisez une méthode de correspondance à filtre unique, et si plusieurs filtres correspondent à un message, mais que chaque filtre correspondant a une priorité différente, alors aucune exception n'est levée et le filtre avec la priorité la plus élevée est retourné.</span><span class="sxs-lookup"><span data-stu-id="0311b-162">Therefore, if you are using a single-filter match method, and more than one filter matches a message, but each matching filter has a different priority, then no exception is thrown and the filter with the highest priority is returned.</span></span> <span data-ttu-id="0311b-163">De la même façon, une méthode de correspondance à filtres multiples retourne uniquement les filtres correspondants avec la priorité la plus élevée.</span><span class="sxs-lookup"><span data-stu-id="0311b-163">Similarly, a multiple-filter match method returns only those matching filters with the highest priority.</span></span>  
  
### <a name="xpath-message-filter-table"></a><span data-ttu-id="0311b-164">Table de filtres de messages XPath</span><span class="sxs-lookup"><span data-stu-id="0311b-164">XPath Message Filter Table</span></span>  

 <span data-ttu-id="0311b-165">La <xref:System.ServiceModel.Dispatcher.XPathMessageFilterTable%601> est optimisée pour les filtres XPath déclaratifs ; la clé de la table est donc un <xref:System.ServiceModel.Dispatcher.XPathMessageFilter>.</span><span class="sxs-lookup"><span data-stu-id="0311b-165">The <xref:System.ServiceModel.Dispatcher.XPathMessageFilterTable%601> is optimized for declarative XPath filters, so the table key is a <xref:System.ServiceModel.Dispatcher.XPathMessageFilter>.</span></span>  
  
 <span data-ttu-id="0311b-166">La classe <xref:System.ServiceModel.Dispatcher.XPathMessageFilterTable%601> optimise la correspondance pour un sous-ensemble de XPath qui couvre la plupart des scénarios de messagerie et prend également en charge la grammaire XPath 1.0 complète.</span><span class="sxs-lookup"><span data-stu-id="0311b-166">The <xref:System.ServiceModel.Dispatcher.XPathMessageFilterTable%601> class optimizes matching for a subset of XPath that covers most of the messaging scenarios and also supports the full XPath 1.0 grammar.</span></span> <span data-ttu-id="0311b-167">Elle comprend des algorithmes optimisés pour une correspondance parallèle efficace.</span><span class="sxs-lookup"><span data-stu-id="0311b-167">It has optimized algorithms for efficient parallel matching.</span></span>  
  
 <span data-ttu-id="0311b-168">Cette table a plusieurs méthodes `Match` spécialisées qui fonctionnent sur un <xref:System.Xml.XPath.XPathNavigator> et un <xref:System.ServiceModel.Dispatcher.SeekableXPathNavigator>.</span><span class="sxs-lookup"><span data-stu-id="0311b-168">This table has several specialized `Match` methods that operate over an <xref:System.Xml.XPath.XPathNavigator> and a <xref:System.ServiceModel.Dispatcher.SeekableXPathNavigator>.</span></span> <span data-ttu-id="0311b-169">Un <xref:System.ServiceModel.Dispatcher.SeekableXPathNavigator> étend la classe <xref:System.Xml.XPath.XPathNavigator> en ajoutant une propriété <xref:System.ServiceModel.Dispatcher.SeekableXPathNavigator.CurrentPosition%2A>.</span><span class="sxs-lookup"><span data-stu-id="0311b-169">A <xref:System.ServiceModel.Dispatcher.SeekableXPathNavigator> extends the <xref:System.Xml.XPath.XPathNavigator> class by adding a <xref:System.ServiceModel.Dispatcher.SeekableXPathNavigator.CurrentPosition%2A> property.</span></span> <span data-ttu-id="0311b-170">Cette propriété permet d'enregistrer et de charger rapidement des positions dans le document XML sans devoir cloner le navigateur, ce qui représente une allocation de mémoire importante requise par le <xref:System.Xml.XPath.XPathNavigator> pour une telle opération.</span><span class="sxs-lookup"><span data-stu-id="0311b-170">This property allows positions within the XML document to be saved and loaded quickly without having to clone the navigator, an expensive memory allocation that the <xref:System.Xml.XPath.XPathNavigator> requires for such an operation.</span></span> <span data-ttu-id="0311b-171">Le moteur XPath WCF doit fréquemment enregistrer la position du curseur au cours de l’exécution de requêtes sur des documents XML, de sorte que le <xref:System.ServiceModel.Dispatcher.SeekableXPathNavigator> fournit une optimisation importante pour le traitement des messages.</span><span class="sxs-lookup"><span data-stu-id="0311b-171">The WCF XPath engine must frequently record the position of the cursor in the course of executing queries on XML documents, so the <xref:System.ServiceModel.Dispatcher.SeekableXPathNavigator> provides an important optimization for message processing.</span></span>  
  
## <a name="customer-scenarios"></a><span data-ttu-id="0311b-172">Scénarios de client</span><span class="sxs-lookup"><span data-stu-id="0311b-172">Customer Scenarios</span></span>  

 <span data-ttu-id="0311b-173">Vous pouvez utiliser le filtrage à chaque fois que vous souhaitez envoyer un message à différents modules de traitement en fonction des données contenues dans le message.</span><span class="sxs-lookup"><span data-stu-id="0311b-173">You can use filtering any time you want to send a message to different processing modules depending on data contained in the message.</span></span> <span data-ttu-id="0311b-174">Deux scénarios typiques transmettent un message en fonction de son code d'action et démultiplexent un flux de messages en fonction de l'adresse de point de terminaison des messages.</span><span class="sxs-lookup"><span data-stu-id="0311b-174">Two typical scenarios are routing a message based on its action code and de-multiplexing a stream of messages based on the messages' endpoint address.</span></span>  
  
### <a name="routing"></a><span data-ttu-id="0311b-175">Routage</span><span class="sxs-lookup"><span data-stu-id="0311b-175">Routing</span></span>  

 <span data-ttu-id="0311b-176">L'écouteur d'un point de terminaison écoute les messages qui présentent un ou plusieurs codes d'action dans l'en-tête SOAP du message.</span><span class="sxs-lookup"><span data-stu-id="0311b-176">The listener of an endpoint listens for messages that have one or more action codes in the message's SOAP header.</span></span> <span data-ttu-id="0311b-177">Implémentez ceci en créant un <xref:System.ServiceModel.Dispatcher.ActionMessageFilter> en passant un tableau qui contient les codes d'action à son constructeur.</span><span class="sxs-lookup"><span data-stu-id="0311b-177">You implement this by creating an <xref:System.ServiceModel.Dispatcher.ActionMessageFilter> by passing an array that contains the action codes to its constructor.</span></span> <span data-ttu-id="0311b-178">Il utilise ce filtre pour s'enregistrer dans `ListenerFactory`, donc seuls les messages dont l'action correspond à l'une des actions du filtre arrivent à ce point de terminaison particulier.</span><span class="sxs-lookup"><span data-stu-id="0311b-178">It uses that filter to register with the `ListenerFactory`, so only messages whose action matches one of those in the filter get to that particular endpoint.</span></span>  
  
### <a name="de-multiplexing"></a><span data-ttu-id="0311b-179">Démultiplexage</span><span class="sxs-lookup"><span data-stu-id="0311b-179">De-multiplexing</span></span>  

 <span data-ttu-id="0311b-180">Lorsque plusieurs points de terminaison se déploient du même `ServiceListener` provenant du câble, la seule manière de démultiplexer les messages et de savoir s'ils appartiennent à une certaine adresse de point de terminaison est d'utiliser des <xref:System.ServiceModel.Dispatcher.EndpointAddressMessageFilter>, qui sélectionnent les messages vers les points de terminaison enregistrés en exécutant une recherche sur les informations stockées dans les en-têtes.</span><span class="sxs-lookup"><span data-stu-id="0311b-180">When multiple endpoints fan out from the same `ServiceListener` off the wire, the only way to de-multiplex messages and know whether they belong to a certain endpoint address, is to use <xref:System.ServiceModel.Dispatcher.EndpointAddressMessageFilter>s, which select messages toward the registered endpoints by performing a lookup on the information stored in the headers.</span></span> <span data-ttu-id="0311b-181">Dans ces filtres, les seuls messages qui passent sont ceux qui ont tous les en-têtes correspondants à la fois à :</span><span class="sxs-lookup"><span data-stu-id="0311b-181">In these filters, only those messages that pass have all necessary headers that correspond to both:</span></span>  
  
- <span data-ttu-id="0311b-182">L'URI de l'`EndpointAddress`.</span><span class="sxs-lookup"><span data-stu-id="0311b-182">The URI in the `EndpointAddress`.</span></span>  
  
- <span data-ttu-id="0311b-183">Le reste des paramètres de point de terminaison dans l'`EndpointAddress` comme spécifié dans le <xref:System.ServiceModel.Dispatcher.EndpointAddressMessageFilter>.</span><span class="sxs-lookup"><span data-stu-id="0311b-183">The rest of the endpoint parameters in the `EndpointAddress` as specified in the <xref:System.ServiceModel.Dispatcher.EndpointAddressMessageFilter>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0311b-184">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="0311b-184">See also</span></span>

- [<span data-ttu-id="0311b-185">Transfert de données et sérialisation</span><span class="sxs-lookup"><span data-stu-id="0311b-185">Data Transfer and Serialization</span></span>](data-transfer-and-serialization.md)
