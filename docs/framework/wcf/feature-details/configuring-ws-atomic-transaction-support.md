---
title: Configuration de la prise en charge WS-Atomic Transaction
ms.date: 03/30/2017
helpviewer_keywords:
- WS-AT protocol [WCF], configuring WS-Atomic Transaction
ms.assetid: cb9f1c9c-1439-4172-b9bc-b01c3e09ac48
ms.openlocfilehash: 04e9cc831ae520e0929818e6dc16c57b03a1d0f0
ms.sourcegitcommit: 581ab03291e91983459e56e40ea8d97b5189227e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/27/2019
ms.locfileid: "70045995"
---
# <a name="configuring-ws-atomic-transaction-support"></a><span data-ttu-id="70ff7-102">Configuration de la prise en charge WS-Atomic Transaction</span><span class="sxs-lookup"><span data-stu-id="70ff7-102">Configuring WS-Atomic Transaction Support</span></span>

<span data-ttu-id="70ff7-103">Cette rubrique décrit comment configurer la prise en charge WS-AtomicTransaction (WS-AT) à l'aide de l'utilitaire de configuration WS-AT.</span><span class="sxs-lookup"><span data-stu-id="70ff7-103">This topic describes how you can configure WS-AtomicTransaction (WS-AT) support by using the WS-AT Configuration Utility.</span></span>

## <a name="using-the-ws-at-configuration-utility"></a><span data-ttu-id="70ff7-104">Utilisation de l'utilitaire de configuration WS-AT</span><span class="sxs-lookup"><span data-stu-id="70ff7-104">Using the WS-AT Configuration Utility</span></span>

<span data-ttu-id="70ff7-105">L'utilitaire de configuration WS-AT (wsatConfig.exe) permet de configurer les paramètres WS-AT.</span><span class="sxs-lookup"><span data-stu-id="70ff7-105">The WS-AT Configuration Utility (wsatConfig.exe) is used to configure WS-AT settings.</span></span> <span data-ttu-id="70ff7-106">Pour activer le service de protocole WS-AT, vous devez utiliser l'utilitaire de configuration pour configurer le port HTTPS pour WS-AT, lier un certificat X.509 au port HTTPS et configurer des certificats de partenaire autorisés en spécifiant des noms de sujet de certificat ou des empreintes numériques.</span><span class="sxs-lookup"><span data-stu-id="70ff7-106">In order to enable the WS-AT protocol service, you must use the configuration utility to configure the HTTPS port for WS-AT, bind an X.509 certificate to the HTTPS port, and configure authorized partner certificates by specifying certificate subject names or thumbprints.</span></span> <span data-ttu-id="70ff7-107">L’utilitaire de configuration vous permet également de sélectionner le mode de suivi et de définir les délais d’attente de transaction sortants et entrants maximaux par défaut.</span><span class="sxs-lookup"><span data-stu-id="70ff7-107">The configuration utility also allows you to select the tracing mode and set default outgoing and maximum incoming transaction timeouts.</span></span>

<span data-ttu-id="70ff7-108">Vous pouvez accéder aux fonctionnalités de cet outil à l'aide d'un composant logiciel enfichable de page de propriétés MMC (Microsoft Management Console) dans la console de gestion Services de composants, ou à partir d'une fenêtre de ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="70ff7-108">You can access this tool's functionality by using a Microsoft Management Console (MMC) property page snap-in in the Component Services management console, or from a command-line window.</span></span> <span data-ttu-id="70ff7-109">Configurez la prise en charge WS-AT sur l'ordinateur local par le biais de la fenêtre de ligne de commande ; configurez les paramètres sur les ordinateurs locaux et distants à l'aide du composant logiciel enfichable MMC.</span><span class="sxs-lookup"><span data-stu-id="70ff7-109">Configure WS-AT support on the local machine through the command-line window; configure settings on both local and remote machines by using the MMC snap-in.</span></span>

<span data-ttu-id="70ff7-110">La fenêtre de ligne de commande est accessible à l'emplacement d'installation du Kit de développement logiciel (SDK) Windows « %WINDIR%\Microsoft.NET\Framework\v3.0\Windows Communication Foundation ».</span><span class="sxs-lookup"><span data-stu-id="70ff7-110">The command-line window can be accessed in the Windows SDK installation location "%WINDIR%\Microsoft.NET\Framework\v3.0\Windows Communication Foundation".</span></span>

<span data-ttu-id="70ff7-111">Pour plus d’informations sur l’outil en ligne de commande, consultez [utilitaire de configuration WS-AtomicTransaction (WsatConfig. exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md).</span><span class="sxs-lookup"><span data-stu-id="70ff7-111">For more information about the command-line tool, see [WS-AtomicTransaction Configuration Utility (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md).</span></span>

<span data-ttu-id="70ff7-112">Si [!INCLUDE[wxp](../../../../includes/wxp-md.md)] vous exécutez ou [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], vous pouvez accéder au composant logiciel enfichable MMC en accédant à **panneau de configuration/outils d’administration/Services de composants**, en cliquant avec le bouton droit sur **poste de travail**, puis en sélectionnant **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="70ff7-112">If you are running [!INCLUDE[wxp](../../../../includes/wxp-md.md)] or [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], you can access the MMC snap-in by navigating to **Control Panel/Administrative Tools/Component Services**, right-clicking **My Computer**, and selecting **Properties**.</span></span> <span data-ttu-id="70ff7-113">Il s'agit du même emplacement que celui où vous pouvez configurer Microsoft Distributed Transaction Coordinator (MSDTC).</span><span class="sxs-lookup"><span data-stu-id="70ff7-113">This is the same location where you can configure the Microsoft Distributed Transaction Coordinator (MSDTC).</span></span> <span data-ttu-id="70ff7-114">Les options disponibles pour la configuration sont regroupées sous l’onglet **WS-AT** . Si vous exécutez Windows Vista [!INCLUDE[lserver](../../../../includes/lserver-md.md)]ou, le composant logiciel enfichable MMC est accessible en cliquant sur le bouton **Démarrer** et en entrant `dcomcnfg.exe` dans la zone de **recherche** .</span><span class="sxs-lookup"><span data-stu-id="70ff7-114">Options available for configuration are grouped under the **WS-AT** tab. If you are running Windows Vista or [!INCLUDE[lserver](../../../../includes/lserver-md.md)], the MMC snap-in can be found by clicking the **Start** button, and entering `dcomcnfg.exe` in the **Search** box.</span></span> <span data-ttu-id="70ff7-115">À l’ouverture de la console MMC, accédez au nœud **My Travail\distributed transaction COORDINATOR\LOCAL DTC** , cliquez avec le bouton droit et sélectionnez **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="70ff7-115">When the MMC is opened, navigate to the **My Computer\Distributed Transaction Coordinator\Local DTC** node, right click and select **Properties**.</span></span> <span data-ttu-id="70ff7-116">Les options disponibles pour la configuration sont regroupées sous l’onglet **WS-AT** .</span><span class="sxs-lookup"><span data-stu-id="70ff7-116">Options available for configuration are grouped under the **WS-AT** tab.</span></span>

<span data-ttu-id="70ff7-117">Pour plus d’informations sur le composant logiciel enfichable, consultez le [composant logiciel enfichable MMC configuration de WS-AtomicTransaction](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md).</span><span class="sxs-lookup"><span data-stu-id="70ff7-117">For more information about the snap-in, see the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md).</span></span>

<span data-ttu-id="70ff7-118">Pour activer l’interface utilisateur de l’outil, vous devez tout d’abord inscrire le fichier WsatUI.dll, qui se trouve à l’emplacement suivant</span><span class="sxs-lookup"><span data-stu-id="70ff7-118">To enable the tool's user interface, you must first register the WsatUI.dll file, located at the following path</span></span>

<span data-ttu-id="70ff7-119">%PROGRAMFILES%\Microsoft SDKs\Windows\v6.0\Bin</span><span class="sxs-lookup"><span data-stu-id="70ff7-119">%PROGRAMFILES%\Microsoft SDKs\Windows\v6.0\Bin</span></span>

<span data-ttu-id="70ff7-120">Pour inscrire le produit, exécutez la commande suivante depuis une fenêtre d'invite de commandes :</span><span class="sxs-lookup"><span data-stu-id="70ff7-120">To register the product, execute the following command from a Command Prompt window:</span></span>

`regasm.exe /codebase WsatUI.dll`

## <a name="enabling-ws-at"></a><span data-ttu-id="70ff7-121">Activation de WS-AT</span><span class="sxs-lookup"><span data-stu-id="70ff7-121">Enabling WS-AT</span></span>

<span data-ttu-id="70ff7-122">Pour activer le service de protocole WS-AT à l'intérieur de MSDTC à l'aide du port 443 et d'un certificat X.509 avec une clé privée installée dans le magasin de l'ordinateur local, utilisez l'outil wsatConfig.exe avec la commande suivante.</span><span class="sxs-lookup"><span data-stu-id="70ff7-122">To enable the WS-AT protocol service inside MSDTC using port 443 and an X.509 certificate with a private key that has been installed in the local machine store, use the wsatConfig.exe tool with the following command.</span></span>

`WsatConfig.exe –network:enable –port:8443 –endpointCert:<machine|"Issuer\SubjectName"> -accountsCerts:<thumbprint|"Issuer\SubjectName"> -restart`

<span data-ttu-id="70ff7-123">Remplacez les paramètres respectifs par des valeurs adaptées à votre environnement.</span><span class="sxs-lookup"><span data-stu-id="70ff7-123">Substitute the respective parameters with values relevant to your environment.</span></span>

<span data-ttu-id="70ff7-124">Pour désactiver le service de protocole WS-AT à l'intérieur de MSDTC, utilisez l'outil wsatConfig.exe avec la commande suivante.</span><span class="sxs-lookup"><span data-stu-id="70ff7-124">To disable the WS-AT protocol service inside MSDTC, use the wsatConfig.exe tool with the following command.</span></span>

`WsatConfig.exe –network:disable -restart`

## <a name="configuring-trust-between-two-machines"></a><span data-ttu-id="70ff7-125">Configuration de la confiance entre deux ordinateurs</span><span class="sxs-lookup"><span data-stu-id="70ff7-125">Configuring Trust Between Two Machines</span></span>

<span data-ttu-id="70ff7-126">Le service de protocole WS-AT requiert que l’administrateur autorise explicitement les différents comptes à participer aux transactions distribuées.</span><span class="sxs-lookup"><span data-stu-id="70ff7-126">The WS-AT protocol service requires the administrator to explicitly authorize individual accounts to participate in distributed transactions.</span></span> <span data-ttu-id="70ff7-127">Si vous êtes administrateur de deux ordinateurs, vous pouvez configurer les deux ordinateurs de façon à établir une relation de confiance mutuelle en échangeant l'ensemble correct de certificats entre les ordinateurs, en les installant dans les magasins de certificats appropriés et en utilisant l'outil wsatConfig.exe pour ajouter le certificat de chaque ordinateur à la liste de certificats de participants autorisés de l'autre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="70ff7-127">If you are an administrator for two machines, you can configure both machines to establish a mutual trust relationship by exchanging the right set of certificates between the machines, installing them into the appropriate certificate stores, and using the wsatConfig.exe tool to add each machine's certificate to the other's list of authorized participant certificates.</span></span> <span data-ttu-id="70ff7-128">Cette étape est nécessaire pour exécuter des transactions distribuées entre deux ordinateurs à l'aide de WS-AT.</span><span class="sxs-lookup"><span data-stu-id="70ff7-128">This step is necessary to perform distributed transactions between two machines using WS-AT.</span></span>

<span data-ttu-id="70ff7-129">L'exemple suivant illustre les étapes requises pour établir la confiance entre deux ordinateurs, A et B.</span><span class="sxs-lookup"><span data-stu-id="70ff7-129">In the following example outlines the steps to establish trust between two machines, A and B.</span></span>

### <a name="creating-and-exporting-certificates"></a><span data-ttu-id="70ff7-130">Création et exportation de certificats</span><span class="sxs-lookup"><span data-stu-id="70ff7-130">Creating and Exporting Certificates</span></span>

<span data-ttu-id="70ff7-131">Cette procédure requiert le composant logiciel enfichable MMC Certificats.</span><span class="sxs-lookup"><span data-stu-id="70ff7-131">This procedure requires the MMC Certificates snap-in.</span></span> <span data-ttu-id="70ff7-132">Ce composant logiciel enfichable est accessible en ouvrant le menu Démarrer/Exécuter, en tapant « mmc » dans la zone d'entrée et en appuyant sur OK.</span><span class="sxs-lookup"><span data-stu-id="70ff7-132">The snap-in can be accessed by opening the Start/Run menu, typing "mmc" in the input box and pressing OK.</span></span> <span data-ttu-id="70ff7-133">Ensuite, dans la fenêtre **Console1** , accédez au composant logiciel enfichable **fichier/ajouter-supprimer** , cliquez sur Ajouter, puis choisissez **certificats** dans la liste **composants logiciels enfichables autonome disponible** .</span><span class="sxs-lookup"><span data-stu-id="70ff7-133">Then, in the **Console1** window, navigate to **the File/Add-Remove** Snap-in, click Add, and choose **Certificates** from the **Available Standalone Snapins** list.</span></span> <span data-ttu-id="70ff7-134">Enfin, sélectionnez le **compte d’ordinateur** à gérer, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="70ff7-134">Finally, select **Computer Account** to manage and click **OK**.</span></span> <span data-ttu-id="70ff7-135">Le nœud **certificats** apparaît dans la console du composant logiciel enfichable.</span><span class="sxs-lookup"><span data-stu-id="70ff7-135">The **Certificates** node appears in the snap-in console.</span></span>

<span data-ttu-id="70ff7-136">Vous devez déjà posséder les certificats requis pour établir la confiance.</span><span class="sxs-lookup"><span data-stu-id="70ff7-136">You must already possess the required certificates to establish trust.</span></span> <span data-ttu-id="70ff7-137">Pour savoir comment créer et installer de nouveaux certificats avant les étapes suivantes, consultez [procédure: Créer et installer des certificats clients temporaires dans WCF pendant](https://go.microsoft.com/fwlink/?LinkId=158925)le développement.</span><span class="sxs-lookup"><span data-stu-id="70ff7-137">To learn how to create and install new certificates prior to the following steps, see [How to: Create and Install Temporary Client Certificates in WCF During Development](https://go.microsoft.com/fwlink/?LinkId=158925).</span></span>

1. <span data-ttu-id="70ff7-138">Sur l'ordinateur A, à l'aide du composant logiciel enfichable MMC Certificats, importez le certificat existant (certA) dans les magasins LocalMachine\MY (Nœud personnel) et LocalMachine\ROOT (nœud de l'Autorité de certification racine de confiance).</span><span class="sxs-lookup"><span data-stu-id="70ff7-138">On machine A, using the MMC Certificates snap-in, import the existing certificate (certA) into the LocalMachine\MY (Personal Node) and LocalMachine\ROOT store (trusted root certification authority node).</span></span> <span data-ttu-id="70ff7-139">Pour importer un certificat vers un nœud spécifique, cliquez avec le bouton droit sur le nœud et choisissez **toutes les tâches/importer**.</span><span class="sxs-lookup"><span data-stu-id="70ff7-139">To import a certificate to a specific node, right-click the node and choose **All Tasks/Import**.</span></span>

2. <span data-ttu-id="70ff7-140">Sur l'ordinateur B, à l'aide du composant logiciel enfichable MMC Certificats, créez ou obtenez un certificat certB avec une clé privée et importez-le dans les magasins LocalMachine\MY (Nœud personnel) et LocalMachine\ROOT (nœud de l'Autorité de certification racine de confiance).</span><span class="sxs-lookup"><span data-stu-id="70ff7-140">On machine B, using the MMC Certificates snap-in, create or obtain a certificate certB with a private key and import it into the LocalMachine\MY (Personal Node) and LocalMachine\ROOT store (trusted root certification authority node).</span></span>

3. <span data-ttu-id="70ff7-141">Exportez la clé publique de certA dans un fichier si cela n'a pas déjà été fait.</span><span class="sxs-lookup"><span data-stu-id="70ff7-141">Export certA's public key to a file if this has not been done already.</span></span>

4. <span data-ttu-id="70ff7-142">Exportez la clé publique de certB dans un fichier si cela n'a pas déjà été fait.</span><span class="sxs-lookup"><span data-stu-id="70ff7-142">Export certB's public key to a file if this has not been done already.</span></span>

### <a name="establishing-mutual-trust-between-machines"></a><span data-ttu-id="70ff7-143">Établissement de la confiance mutuelle entre des ordinateurs</span><span class="sxs-lookup"><span data-stu-id="70ff7-143">Establishing Mutual Trust Between Machines</span></span>

1. <span data-ttu-id="70ff7-144">Sur l'ordinateur A, importez la représentation de fichier de certB dans les magasins LocalMachine\MY et LocalMachine\ROOT.</span><span class="sxs-lookup"><span data-stu-id="70ff7-144">On machine A, import the file representation of certB into the LocalMachine\MY and LocalMachine\ROOT stores.</span></span> <span data-ttu-id="70ff7-145">Cela déclare que l'ordinateur A approuve certB pour toute communication.</span><span class="sxs-lookup"><span data-stu-id="70ff7-145">This declares that machine A trusts certB to communicate with it.</span></span>

2. <span data-ttu-id="70ff7-146">Sur l'ordinateur B, importez le fichier certA dans les magasins LocalMachine\MY et LocalMachine\ROOT.</span><span class="sxs-lookup"><span data-stu-id="70ff7-146">On machine B, import certA’s file into the LocalMachine\MY and LocalMachine\ROOT stores.</span></span> <span data-ttu-id="70ff7-147">Cela implique que l'ordinateur B approuve certA pour toute communication.</span><span class="sxs-lookup"><span data-stu-id="70ff7-147">This implies that machine B trusts certA to communicate with it.</span></span>

<span data-ttu-id="70ff7-148">Après avoir effectué ces étapes, la confiance est établie entre les deux ordinateurs et ils peuvent être configurés pour communiquer l'un avec l'autre à l'aide de WS-AT.</span><span class="sxs-lookup"><span data-stu-id="70ff7-148">After completing these steps, trust is established between the two machines, and they can be configured to communicate with each other using WS-AT.</span></span>

### <a name="configuring-msdtc-to-use-certificates"></a><span data-ttu-id="70ff7-149">Configuration de MSDTC pour utiliser des certificats</span><span class="sxs-lookup"><span data-stu-id="70ff7-149">Configuring MSDTC to Use Certificates</span></span>

<span data-ttu-id="70ff7-150">Le service de protocole WS-AT agissant à la fois comme client et comme serveur, il doit à la fois écouter les connexions entrantes et initier les connexions sortantes.</span><span class="sxs-lookup"><span data-stu-id="70ff7-150">Since the WS-AT protocol service acts as both a client and a server, it must both listen for incoming connections and initiate outgoing connections.</span></span> <span data-ttu-id="70ff7-151">Par conséquent, vous devez configurer MSDTC de sorte qu'il sache quel certificat utiliser lors des communications avec les correspondants externes, et quels certificats autoriser lors de l'acceptation des communications entrantes.</span><span class="sxs-lookup"><span data-stu-id="70ff7-151">Therefore, you need to configure MSDTC so that it knows which certificate to use when communicating with external parties, and which certificates to authorize when accepting incoming communication.</span></span>

<span data-ttu-id="70ff7-152">Vous pouvez configurer cela à l'aide du composant logiciel enfichable MMC WS-AT.</span><span class="sxs-lookup"><span data-stu-id="70ff7-152">You can configure this by using the MMC WS-AT snap-in.</span></span> <span data-ttu-id="70ff7-153">Pour plus d’informations sur cet outil, consultez la rubrique [composant logiciel enfichable MMC configuration de WS-AtomicTransaction](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) .</span><span class="sxs-lookup"><span data-stu-id="70ff7-153">For more information about this tool, see the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) topic.</span></span> <span data-ttu-id="70ff7-154">Les étapes suivantes décrivent comment établir la confiance entre deux ordinateurs qui exécutent MSDTC.</span><span class="sxs-lookup"><span data-stu-id="70ff7-154">The following steps describe how to establish trust between two computers running MSDTC.</span></span>

1. <span data-ttu-id="70ff7-155">Configurez les paramètres de l'ordinateur A.</span><span class="sxs-lookup"><span data-stu-id="70ff7-155">Configure machine A's settings.</span></span> <span data-ttu-id="70ff7-156">Pour «certificat de point de terminaison», sélectionnez certa.</span><span class="sxs-lookup"><span data-stu-id="70ff7-156">For "Endpoint Certificate", select certA.</span></span> <span data-ttu-id="70ff7-157">Pour «certificats autorisés», sélectionnez certB.</span><span class="sxs-lookup"><span data-stu-id="70ff7-157">For "Authorized Certificates", select the certB.</span></span>

2. <span data-ttu-id="70ff7-158">Configurez les paramètres de l'ordinateur B.</span><span class="sxs-lookup"><span data-stu-id="70ff7-158">Configure machine B's settings.</span></span> <span data-ttu-id="70ff7-159">Pour «certificat de point de terminaison», sélectionnez certB.</span><span class="sxs-lookup"><span data-stu-id="70ff7-159">For "Endpoint Certificate", select certB.</span></span> <span data-ttu-id="70ff7-160">Pour «certificats autorisés», sélectionnez le certificat certa.</span><span class="sxs-lookup"><span data-stu-id="70ff7-160">For "Authorized Certificates", select the certA.</span></span>

> [!NOTE]
> <span data-ttu-id="70ff7-161">Lorsqu'un ordinateur envoie un message à l'autre ordinateur, l'expéditeur essaie de vérifier que le nom du sujet du certificat du destinataire et le nom d'ordinateur du destinataire correspondent.</span><span class="sxs-lookup"><span data-stu-id="70ff7-161">When one machine sends a message to the other machine, the sender attempts to verify that the subject name of the recipient’s certificate and the name of the recipient’s machine match.</span></span> <span data-ttu-id="70ff7-162">S'ils ne correspondent pas, la vérification de certificat échoue et les deux ordinateurs ne peuvent pas communiquer.</span><span class="sxs-lookup"><span data-stu-id="70ff7-162">If they do not match, certificate verification fails and the two machines cannot communicate.</span></span>
>
> <span data-ttu-id="70ff7-163">Pour un ordinateur joint à un domaine, le nom est le nom de domaine complet.</span><span class="sxs-lookup"><span data-stu-id="70ff7-163">For a machine joined to a domain, the name is the fully qualified domain name.</span></span> <span data-ttu-id="70ff7-164">Par défaut, le nom d'un ordinateur sur un groupe de travail est le nom NetBIOS de l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="70ff7-164">By default, the name of a machine on a workgroup is the machine’s NetBIOS name.</span></span> <span data-ttu-id="70ff7-165">Toutefois, le nom peut également inclure un suffixe DNS (Domain Name System) s'il y en a un présent pour la connexion utilisée entre les deux ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="70ff7-165">However, the name can also include a Domain Name System (DNS) suffix if one is present for the connection being used between the two machines.</span></span>
>
> <span data-ttu-id="70ff7-166">Si le nom de l'ordinateur change, par exemple lorsqu'un ordinateur de groupe de travail rejoint un domaine, vous devez rééditer les certificats ou configurer manuellement les suffixes DNS.</span><span class="sxs-lookup"><span data-stu-id="70ff7-166">If the name of the machine changes, for example, when a workgroup machine joins a domain, you must reissue certificates or manually configure DNS suffixes.</span></span>

## <a name="security"></a><span data-ttu-id="70ff7-167">Sécurité</span><span class="sxs-lookup"><span data-stu-id="70ff7-167">Security</span></span>

<span data-ttu-id="70ff7-168">Étant donné que certains des paramètres liés à MSDTC et WS-AT sont stockés dans le Registre, respectivement aux emplacements HKLM\Software\Microsoft\MSDTC et HKLM\Software\Microsoft\WSAT, assurez-vous que ces clés de Registre sont sécurisées afin que seuls les administrateurs puissent y écrire.</span><span class="sxs-lookup"><span data-stu-id="70ff7-168">Since some of the settings related to MSDTC and WS-AT are stored in the registry at HKLM\Software\Microsoft\MSDTC and at HKLM\Software\Microsoft\WSAT, respectively, ensure that these registry keys are secured so that only administrators can write to them.</span></span> <span data-ttu-id="70ff7-169">Dans l’outil Éditeur du Registre, cliquez avec le bouton droit sur la clé que vous souhaitez sécuriser, puis sélectionnez **autorisation** pour définir le contrôle d’accès approprié.</span><span class="sxs-lookup"><span data-stu-id="70ff7-169">In the Registry Editor tool, right-click the key you want to secure and select **Permission** to set the appropriate access control.</span></span> <span data-ttu-id="70ff7-170">Il est essentiel pour la sécurité et l'intégrité du système que les clés importantes soient en lecture seule pour les utilisateurs à faible privilège.</span><span class="sxs-lookup"><span data-stu-id="70ff7-170">It is crucial to the security and integrity of the system that important keys are read-only for low-privileged users.</span></span>

<span data-ttu-id="70ff7-171">Lors du déploiement de MSDTC, l'administrateur doit s'assurer que tout échange de données MSDTC est sécurisé.</span><span class="sxs-lookup"><span data-stu-id="70ff7-171">When deploying MSDTC, the administrator must ensure that any MSDTC data interchange is secure.</span></span> <span data-ttu-id="70ff7-172">Dans un déploiement de groupe de travail, isolez l'infrastructure transactionnelle des utilisateurs malveillants ; dans un déploiement de cluster, sécurisez le Registre de cluster.</span><span class="sxs-lookup"><span data-stu-id="70ff7-172">In a workgroup deployment, isolate the transactional infrastructure from malicious users; in a cluster deployment, secure the cluster registry.</span></span>

## <a name="tracing"></a><span data-ttu-id="70ff7-173">Traçage</span><span class="sxs-lookup"><span data-stu-id="70ff7-173">Tracing</span></span>

<span data-ttu-id="70ff7-174">Le service de protocole WS-AT prend en charge le suivi intégré des transactions, qui peut être activé et géré par le biais de l’outil de [composant logiciel enfichable MMC configuration de WS-AtomicTransaction](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) .</span><span class="sxs-lookup"><span data-stu-id="70ff7-174">The WS-AT protocol service supports integrated, transaction specific tracing that can be enabled and managed through the use of the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) tool.</span></span>  <span data-ttu-id="70ff7-175">Les suivis peuvent inclure des données qui indiquent l'heure d'une inscription pour une transaction spécifique, l'heure à laquelle une transaction atteint son état terminal, le résultat que chaque inscription de transaction a reçu.</span><span class="sxs-lookup"><span data-stu-id="70ff7-175">Traces can include data indicating the time an enlistment is made for a specific transaction, the time a transaction reaches its terminal state, the outcome each transaction enlistment has received.</span></span> <span data-ttu-id="70ff7-176">Toutes les traces peuvent être affichées à l’aide de l’outil [Service Trace Viewer Tool (SvcTraceViewer. exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) .</span><span class="sxs-lookup"><span data-stu-id="70ff7-176">All traces can be viewed using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) tool.</span></span>

<span data-ttu-id="70ff7-177">Le service de protocole WS-AT prend en charge également le suivi ServiceModel intégré sur l'ensemble de la session de suivi ETW.</span><span class="sxs-lookup"><span data-stu-id="70ff7-177">The WS-AT protocol service also supports integrated ServiceModel tracing through the ETW trace session.</span></span> <span data-ttu-id="70ff7-178">Cela procure des suivis plus détaillés et spécifiques à la communication, en plus des suivis de transaction existants.</span><span class="sxs-lookup"><span data-stu-id="70ff7-178">This provides more detailed, communication-specific traces in addition to the existing transaction traces.</span></span>  <span data-ttu-id="70ff7-179">Pour activer ces suivis supplémentaires, procédez comme suit</span><span class="sxs-lookup"><span data-stu-id="70ff7-179">To enable these additional traces, follow these steps</span></span>

1. <span data-ttu-id="70ff7-180">Ouvrez le menu **Démarrer/Exécuter** , tapez «regedit» dans la zone d’entrée, puis sélectionnez **OK**.</span><span class="sxs-lookup"><span data-stu-id="70ff7-180">Open the **Start/Run** menu, type "regedit" in the input box and select **OK**.</span></span>

2. <span data-ttu-id="70ff7-181">Dans l' **éditeur du Registre**, accédez au dossier suivant dans le volet gauche, Hkey_Local_Machine\SOFTWARE\Microsoft\WSAT\3.0</span><span class="sxs-lookup"><span data-stu-id="70ff7-181">In the **Registry Editor**, navigate to the following folder on the left pane, Hkey_Local_Machine\SOFTWARE\Microsoft\WSAT\3.0</span></span>\

3. <span data-ttu-id="70ff7-182">Cliquez avec le `ServiceModelDiagnosticTracing` bouton droit sur la valeur dans le volet droit, puis sélectionnez **modifier**.</span><span class="sxs-lookup"><span data-stu-id="70ff7-182">Right click the `ServiceModelDiagnosticTracing` value in the right pane and select **Modify**.</span></span>

4. <span data-ttu-id="70ff7-183">Dans la zone entrée de données de la **valeur** , entrez l’une des valeurs valides suivantes pour spécifier le niveau de suivi que vous souhaitez activer.</span><span class="sxs-lookup"><span data-stu-id="70ff7-183">In the **Value data** input box, enter one of the following valid values to specify the trace level you want to enable.</span></span>

- <span data-ttu-id="70ff7-184">0 : désactivé</span><span class="sxs-lookup"><span data-stu-id="70ff7-184">0: off</span></span>

- <span data-ttu-id="70ff7-185">1 : critique</span><span class="sxs-lookup"><span data-stu-id="70ff7-185">1: critical</span></span>

- <span data-ttu-id="70ff7-186">3 : erreur.</span><span class="sxs-lookup"><span data-stu-id="70ff7-186">3: error.</span></span> <span data-ttu-id="70ff7-187">Il s'agit de la valeur par défaut</span><span class="sxs-lookup"><span data-stu-id="70ff7-187">This is the default value</span></span>

- <span data-ttu-id="70ff7-188">7 : avertissement</span><span class="sxs-lookup"><span data-stu-id="70ff7-188">7: warning</span></span>

- <span data-ttu-id="70ff7-189">15 : informations</span><span class="sxs-lookup"><span data-stu-id="70ff7-189">15: information</span></span>

- <span data-ttu-id="70ff7-190">31 : en clair</span><span class="sxs-lookup"><span data-stu-id="70ff7-190">31: verbose</span></span>

## <a name="see-also"></a><span data-ttu-id="70ff7-191">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="70ff7-191">See also</span></span>

- [<span data-ttu-id="70ff7-192">Utilitaire de configuration WS-AtomicTransaction (wsatConfig.exe)</span><span class="sxs-lookup"><span data-stu-id="70ff7-192">WS-AtomicTransaction Configuration Utility (wsatConfig.exe)</span></span>](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)
- [<span data-ttu-id="70ff7-193">Composant logiciel enfichable MMC Configuration WS-AtomicTransaction</span><span class="sxs-lookup"><span data-stu-id="70ff7-193">WS-AtomicTransaction Configuration MMC Snap-in</span></span>](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md)
