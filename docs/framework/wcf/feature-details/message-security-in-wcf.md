---
title: Sécurité des messages dans WCF
description: En savoir plus sur TransportWithMessageCredential, un type de sécurité de message WCF qui utilise une combinaison de modes de sécurité de transport et de message.
ms.date: 03/30/2017
ms.assetid: a80efb59-591a-4a37-bb3c-8fffa6ca0b7d
ms.openlocfilehash: 315a12c73929bfe71340e42f122ae542d4fddc07
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/23/2020
ms.locfileid: "85245022"
---
# <a name="message-security-in-wcf"></a><span data-ttu-id="562d1-103">Sécurité des messages dans WCF</span><span class="sxs-lookup"><span data-stu-id="562d1-103">Message Security in WCF</span></span>

<span data-ttu-id="562d1-104">Windows Communication Foundation (WCF) a deux modes principaux pour fournir la sécurité ( `Transport` et `Message` ) et un troisième mode ( `TransportWithMessageCredential` ) qui combine les deux.</span><span class="sxs-lookup"><span data-stu-id="562d1-104">Windows Communication Foundation (WCF) has two major modes for providing security (`Transport` and `Message`) and a third mode (`TransportWithMessageCredential`) that combines the two.</span></span> <span data-ttu-id="562d1-105">Cette rubrique présente la sécurité des messages et les raisons de l'employer.</span><span class="sxs-lookup"><span data-stu-id="562d1-105">This topic discusses message security and the reasons to use it.</span></span>

## <a name="what-is-message-security"></a><span data-ttu-id="562d1-106">Qu'est ce que la sécurité des messages ?</span><span class="sxs-lookup"><span data-stu-id="562d1-106">What Is Message Security?</span></span>

<span data-ttu-id="562d1-107">La sécurité des messages utilise la spécification WS-Security pour sécuriser les messages.</span><span class="sxs-lookup"><span data-stu-id="562d1-107">Message security uses the WS-Security specification to secure messages.</span></span> <span data-ttu-id="562d1-108">La spécification WS-Security décrit les améliorations apportées à la messagerie SOAP afin de garantir la confidentialité, l’intégrité et l’authentification au niveau du message SOAP (plutôt qu’au niveau du transport).</span><span class="sxs-lookup"><span data-stu-id="562d1-108">The WS-Security specification describes enhancements to SOAP messaging to ensure confidentiality, integrity, and authentication at the SOAP message level (instead of the transport level).</span></span>

<span data-ttu-id="562d1-109">En bref, la sécurité des messages diffère de la sécurité du transport en encapsulant les informations d'identification de sécurité et les revendications avec chaque message accompagné de toute protection des messages (signature ou chiffrement).</span><span class="sxs-lookup"><span data-stu-id="562d1-109">In brief, message security differs from transport security by encapsulating the security credentials and claims with every message along with any message protection (signing or encryption).</span></span> <span data-ttu-id="562d1-110">L'application directe de la sécurité au message en modifiant son contenu permet au message sécurisé d'être autonome en ce qui concerne les aspects de la sécurité.</span><span class="sxs-lookup"><span data-stu-id="562d1-110">Applying the security directly to the message by modifying its content allows the secured message to be self-containing with respect to the security aspects.</span></span> <span data-ttu-id="562d1-111">Cela permet quelques scénarios qui ne sont pas possibles lorsque la sécurité du transport est utilisée.</span><span class="sxs-lookup"><span data-stu-id="562d1-111">This enables some scenarios that are not possible when transport security is used.</span></span>

## <a name="reasons-to-use-message-security"></a><span data-ttu-id="562d1-112">Raisons d'utiliser la sécurité des messages</span><span class="sxs-lookup"><span data-stu-id="562d1-112">Reasons to Use Message Security</span></span>

<span data-ttu-id="562d1-113">Dans la sécurité au niveau du message, toutes les informations de sécurité sont encapsulées dans le message.</span><span class="sxs-lookup"><span data-stu-id="562d1-113">In message-level security, all of the security information is encapsulated in the message.</span></span> <span data-ttu-id="562d1-114">La sécurisation du message avec une sécurité au niveau du message au lieu d'une sécurité au niveau du transport présente les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="562d1-114">Securing the message with message-level security instead of transport-level security has the following advantages:</span></span>

- <span data-ttu-id="562d1-115">Sécurité de bout en bout.</span><span class="sxs-lookup"><span data-stu-id="562d1-115">End-to-end security.</span></span> <span data-ttu-id="562d1-116">La sécurité du transport, telle que le protocole SSL (Secure Sockets Layer), ne sécurise les messages que lorsqu'il s'agit d'une communication point à point.</span><span class="sxs-lookup"><span data-stu-id="562d1-116">Transport security, such as Secure Sockets Layer (SSL) only secures messages when the communication is point-to-point.</span></span> <span data-ttu-id="562d1-117">Si le message est routé vers un ou plusieurs intermédiaires SOAP (par exemple, un routeur) avant d'atteindre le dernier destinataire, il n'est lui-même pas protégé une fois qu'un intermédiaire l'a lu depuis le câble.</span><span class="sxs-lookup"><span data-stu-id="562d1-117">If the message is routed to one or more SOAP intermediaries (for example a router) before reaching the ultimate receiver, the message itself is not protected once an intermediary reads it from the wire.</span></span> <span data-ttu-id="562d1-118">En outre, les informations d'authentification du client sont uniquement disponibles pour le premier intermédiaire et doivent être retransmises au dernier destinataire de manière hors bande, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="562d1-118">Additionally, the client authentication information is available only to the first intermediary and must be re-transmitted to the ultimate receiver in out-of-band fashion, if necessary.</span></span> <span data-ttu-id="562d1-119">Cela s'applique même si l'itinéraire entier utilise la sécurité SSL entre des sauts individuels.</span><span class="sxs-lookup"><span data-stu-id="562d1-119">This applies even if the entire route uses SSL security between individual hops.</span></span> <span data-ttu-id="562d1-120">Étant donné que la sécurité des messages fonctionne directement avec le message et sécurise le XML qu'il contient, la sécurité reste avec le message indépendamment du nombre d'intermédiaires impliqué avec le message avant qu'il n'atteigne le dernier destinataire.</span><span class="sxs-lookup"><span data-stu-id="562d1-120">Because message security works directly with the message and secures the XML in it, the security stays with the message regardless of how many intermediaries are involved before it reaches the ultimate receiver.</span></span> <span data-ttu-id="562d1-121">Il s'agit donc d'un vrai scénario de sécurité de bout en bout.</span><span class="sxs-lookup"><span data-stu-id="562d1-121">This enables a true end-to-end security scenario.</span></span>

- <span data-ttu-id="562d1-122">Flexibilité augmentée.</span><span class="sxs-lookup"><span data-stu-id="562d1-122">Increased flexibility.</span></span> <span data-ttu-id="562d1-123">Vous pouvez signer ou chiffrer des parties du message, au lieu du message entier.</span><span class="sxs-lookup"><span data-stu-id="562d1-123">Parts of the message, instead of the entire message, can be signed or encrypted.</span></span> <span data-ttu-id="562d1-124">Cela signifie que les intermédiaires peuvent consulter les parties du message qui leur sont destinées.</span><span class="sxs-lookup"><span data-stu-id="562d1-124">This means that intermediaries can view the parts of the message that are intended for them.</span></span> <span data-ttu-id="562d1-125">Si l'expéditeur a besoin de rendre une partie des informations du message visible aux intermédiaires mais qu'il souhaite empêcher sa falsification, il peut juste la signer et la laisser déchiffrée.</span><span class="sxs-lookup"><span data-stu-id="562d1-125">If the sender needs to make part of the information in the message visible to the intermediaries but wants to ensure that it is not tampered with, it can just sign it but leave it unencrypted.</span></span> <span data-ttu-id="562d1-126">Puisque la signature fait partie du message, le dernier destinataire peut vérifier que les informations du message ont été reçues intactes.</span><span class="sxs-lookup"><span data-stu-id="562d1-126">Since the signature is part of the message, the ultimate receiver can verify that the information in the message was received intact.</span></span> <span data-ttu-id="562d1-127">Un autre scénario peut impliquer un service d'intermédiaire SOAP qui route un message en fonction de la valeur d'en-tête Action.</span><span class="sxs-lookup"><span data-stu-id="562d1-127">One scenario might have a SOAP intermediary service that routes message according the Action header value.</span></span> <span data-ttu-id="562d1-128">Par défaut, WCF ne chiffre pas la valeur d’action, mais le signe si la sécurité de message est utilisée.</span><span class="sxs-lookup"><span data-stu-id="562d1-128">By default, WCF does not encrypt the Action value but signs it if message security is used.</span></span> <span data-ttu-id="562d1-129">Par conséquent, ces informations sont disponibles à tous les intermédiaires, mais personne ne peut les modifier.</span><span class="sxs-lookup"><span data-stu-id="562d1-129">Therefore, this information is available to all intermediaries, but no one can change it.</span></span>

- <span data-ttu-id="562d1-130">Prise en charge de plusieurs transports.</span><span class="sxs-lookup"><span data-stu-id="562d1-130">Support for multiple transports.</span></span> <span data-ttu-id="562d1-131">Vous pouvez envoyer des messages sécurisés sur de nombreux transports différents, tels que les canaux nommés et le protocole TCP, sans devoir compter sur le protocole pour la sécurité.</span><span class="sxs-lookup"><span data-stu-id="562d1-131">You can send secured messages over many different transports, such as named pipes and TCP, without having to rely on the protocol for security.</span></span> <span data-ttu-id="562d1-132">Avec la sécurité au niveau du transport, toutes les informations de sécurité sont étendues à une connexion de transport particulière unique et elles ne sont pas disponibles à partir du contenu du message lui-même.</span><span class="sxs-lookup"><span data-stu-id="562d1-132">With transport-level security, all the security information is scoped to a single particular transport connection and is not available from the message content itself.</span></span> <span data-ttu-id="562d1-133">La sécurité des messages sécurise le message indépendamment du transport utilisé pour transmettre le message et le contexte de sécurité est directement incorporé à l'intérieur du message.</span><span class="sxs-lookup"><span data-stu-id="562d1-133">Message security makes the message secure regardless of what transport you use to transmit the message, and the security context is directly embedded inside the message.</span></span>

- <span data-ttu-id="562d1-134">Prise en charge d'un large jeu d'informations d'identification et de revendications.</span><span class="sxs-lookup"><span data-stu-id="562d1-134">Support for a wide set of credentials and claims.</span></span> <span data-ttu-id="562d1-135">La sécurité des messages se base sur la spécification WS-Security, qui fournit un cadre extensible capable de transmettre tout type de revendication à l'intérieur du message SOAP.</span><span class="sxs-lookup"><span data-stu-id="562d1-135">The message security is based on the WS-Security specification, which provides an extensible framework capable of transmitting any type of claim inside the SOAP message.</span></span> <span data-ttu-id="562d1-136">Contrairement à la sécurité du transport, le jeu de mécanismes d'authentification, ou les revendications, que vous pouvez utiliser ne sont pas limités par les fonctions de transport.</span><span class="sxs-lookup"><span data-stu-id="562d1-136">Unlike transport security, the set of authentication mechanisms, or claims, that you can use is not limited by the transport capabilities.</span></span> <span data-ttu-id="562d1-137">La sécurité des messages WCF comprend plusieurs types d’authentification et de transmission de revendications et peut être étendue pour prendre en charge des types supplémentaires selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="562d1-137">WCF message security includes multiple types of authentication and claim transmission and can be extended to support additional types as necessary.</span></span> <span data-ttu-id="562d1-138">Pour ces raisons, par exemple, un scénario d'informations d'identification fédérées n'est pas possible sans la sécurité des messages.</span><span class="sxs-lookup"><span data-stu-id="562d1-138">For those reasons, for example, a federated credentials scenario is not possible without message security.</span></span> <span data-ttu-id="562d1-139">Pour plus d’informations sur les scénarios de Fédération pris en charge par WCF, consultez [Fédération et jetons émis](federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="562d1-139">For more information about federation scenarios WCF supports, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>

## <a name="how-message-and-transport-security-compare"></a><span data-ttu-id="562d1-140">Comparaison de la sécurité des messages et du transport</span><span class="sxs-lookup"><span data-stu-id="562d1-140">How Message and Transport Security Compare</span></span>

### <a name="pros-and-cons-of-transport-level-security"></a><span data-ttu-id="562d1-141">Avantages et inconvénients de la sécurité au niveau du transport</span><span class="sxs-lookup"><span data-stu-id="562d1-141">Pros and Cons of Transport-Level Security</span></span>

<span data-ttu-id="562d1-142">La sécurité du transport présente les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="562d1-142">Transport security has the following advantages:</span></span>

- <span data-ttu-id="562d1-143">Ne requiert pas que les parties qui communiquent comprennent des concepts de sécurité au niveau du XML.</span><span class="sxs-lookup"><span data-stu-id="562d1-143">Does not require that the communicating parties understand XML-level security concepts.</span></span> <span data-ttu-id="562d1-144">Par exemple, cet avantage peut améliorer l'interopérabilité lorsque HTTPS est utilisé pour sécuriser la communication.</span><span class="sxs-lookup"><span data-stu-id="562d1-144">This can improve the interoperability, for example, when HTTPS is used to secure the communication.</span></span>

- <span data-ttu-id="562d1-145">Performance globale améliorée.</span><span class="sxs-lookup"><span data-stu-id="562d1-145">Generally improved performance.</span></span>

- <span data-ttu-id="562d1-146">Les accélérateurs de matériel sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="562d1-146">Hardware accelerators are available.</span></span>

- <span data-ttu-id="562d1-147">La diffusion en continu est possible.</span><span class="sxs-lookup"><span data-stu-id="562d1-147">Streaming is possible.</span></span>

 <span data-ttu-id="562d1-148">La sécurité du transport présente les inconvénients suivants :</span><span class="sxs-lookup"><span data-stu-id="562d1-148">Transport security has the following disadvantages:</span></span>

- <span data-ttu-id="562d1-149">Saut à saut uniquement.</span><span class="sxs-lookup"><span data-stu-id="562d1-149">Hop-to-hop only.</span></span>

- <span data-ttu-id="562d1-150">Jeu d'informations d'identification limité et non extensible.</span><span class="sxs-lookup"><span data-stu-id="562d1-150">Limited and inextensible set of credentials.</span></span>

- <span data-ttu-id="562d1-151">Dépendance vis-à-vis du transport.</span><span class="sxs-lookup"><span data-stu-id="562d1-151">Transport-dependent.</span></span>

### <a name="disadvantages-of-message-level-security"></a><span data-ttu-id="562d1-152">Inconvénients de la sécurité au niveau du message</span><span class="sxs-lookup"><span data-stu-id="562d1-152">Disadvantages of Message-Level Security</span></span>

<span data-ttu-id="562d1-153">La sécurité des messages présente les inconvénients suivants :</span><span class="sxs-lookup"><span data-stu-id="562d1-153">Message security has the following disadvantages:</span></span>

- <span data-ttu-id="562d1-154">Performances</span><span class="sxs-lookup"><span data-stu-id="562d1-154">Performance</span></span>

- <span data-ttu-id="562d1-155">Impossible d'utiliser la diffusion en continu de messages.</span><span class="sxs-lookup"><span data-stu-id="562d1-155">Cannot use message streaming.</span></span>

- <span data-ttu-id="562d1-156">Requiert l'implémentation de mécanismes de sécurité au niveau du XML et la prise en charge de la spécification WS-Security.</span><span class="sxs-lookup"><span data-stu-id="562d1-156">Requires implementation of XML-level security mechanisms and support for WS-Security specification.</span></span> <span data-ttu-id="562d1-157">L'interopérabilité peut en être affectée.</span><span class="sxs-lookup"><span data-stu-id="562d1-157">This might affect the interoperability.</span></span>

## <a name="see-also"></a><span data-ttu-id="562d1-158">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="562d1-158">See also</span></span>

- [<span data-ttu-id="562d1-159">Securing Services and Clients</span><span class="sxs-lookup"><span data-stu-id="562d1-159">Securing Services and Clients</span></span>](securing-services-and-clients.md)
- [<span data-ttu-id="562d1-160">Sécurité de transport</span><span class="sxs-lookup"><span data-stu-id="562d1-160">Transport Security</span></span>](transport-security.md)
- [<span data-ttu-id="562d1-161">Comment : utiliser des informations d'identification de sécurité de transport et de message</span><span class="sxs-lookup"><span data-stu-id="562d1-161">How to: Use Transport Security and Message Credentials</span></span>](how-to-use-transport-security-and-message-credentials.md)
- <span data-ttu-id="562d1-162">[Microsoft Patterns and Practices, Chapitre 3 : Implémentation de la sécurité sur les couches de transport et de sécurité](https://docs.microsoft.com/previous-versions/msp-n-p/ff647370(v=pandp.10))</span><span class="sxs-lookup"><span data-stu-id="562d1-162">[Microsoft Patterns and Practices, Chapter 3: Implementing Transport and Message Layer Security](https://docs.microsoft.com/previous-versions/msp-n-p/ff647370(v=pandp.10))</span></span>
