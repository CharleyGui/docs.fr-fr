---
title: Publication du service WCF
ms.date: 03/30/2017
ms.assetid: c806b253-cd47-4b96-b831-e73cbf08808f
ms.openlocfilehash: 90d2a841fa5ce14b1ad5295b3bb6493df0350339
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/15/2019
ms.locfileid: "72321239"
---
# <a name="wcf-service-publishing"></a><span data-ttu-id="ef68c-102">Publication du service WCF</span><span class="sxs-lookup"><span data-stu-id="ef68c-102">WCF Service Publishing</span></span>

<span data-ttu-id="ef68c-103">La publication de service Windows Communication Foundation (WCF) vous aide à progresser de l’environnement de développement anticipé fourni par l’hôte de service WCF et le client test WCF pour déployer l’application dans un environnement de production à des fins de test.</span><span class="sxs-lookup"><span data-stu-id="ef68c-103">Windows Communication Foundation (WCF) Service Publishing assists you in progressing from the early development environment provided by WCF Service Host and WCF Test Client to actually deploying the application to a production environment for testing purposes.</span></span> <span data-ttu-id="ef68c-104">Avant de vous engager dans un plan de déploiement final, vous pouvez utiliser la publication de service Windows Communication Foundation (WCF) pour vérifier que votre service WCF fonctionne correctement et qu’il est prêt à être publié.</span><span class="sxs-lookup"><span data-stu-id="ef68c-104">Before you commit to a final deployment plan, you can use Windows Communication Foundation (WCF) Service Publishing to verify that your WCF service performs correctly and is ready to be published.</span></span> <span data-ttu-id="ef68c-105">Vous pouvez également choisir de déployer vos bibliothèques de service WCF dans différents emplacements cibles à des fins de test.</span><span class="sxs-lookup"><span data-stu-id="ef68c-105">You can also choose to deploy your WCF service libraries to various target locations for testing.</span></span>

## <a name="supported-services-and-target-locations"></a><span data-ttu-id="ef68c-106">Services pris en charge et emplacements cibles</span><span class="sxs-lookup"><span data-stu-id="ef68c-106">Supported Services and Target Locations</span></span>

<span data-ttu-id="ef68c-107">La publication de service WCF prend en charge la publication de services WCF créés à partir de l’ensemble de modèles de la bibliothèque de services WCF, ainsi que les modèles d’éléments correspondants, qui incluent les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="ef68c-107">WCF Service Publishing supports publishing WCF services created from the set of WCF service library templates, and their corresponding item templates, which include the following:</span></span>

- <span data-ttu-id="ef68c-108">Modèle de bibliothèque du service WCF avec modèle d’élément.</span><span class="sxs-lookup"><span data-stu-id="ef68c-108">WCF Service Library template with item template.</span></span>

- <span data-ttu-id="ef68c-109">Bibliothèque du service de syndication.</span><span class="sxs-lookup"><span data-stu-id="ef68c-109">Syndication Service Library.</span></span>

<span data-ttu-id="ef68c-110">Vous pouvez trouver ces modèles de service en choisissant **fichier** > **nouveau projet** > [**Visual Basic** ou **visuel C#** ] > **WCF**.</span><span class="sxs-lookup"><span data-stu-id="ef68c-110">You can find these service templates by choosing **File** > **New Project** > [**Visual Basic** or **Visual C#**] > **WCF**.</span></span> <span data-ttu-id="ef68c-111">Pour les autres modèles WCF à cet emplacement (y compris l’application de service de flux de travail WCF et l’application de service WCF), vous pouvez publier à l’aide [de la publication en un clic pour les applications Web](https://docs.microsoft.com/previous-versions/aspnet/dd465337(v=vs.110)).</span><span class="sxs-lookup"><span data-stu-id="ef68c-111">For other WCF templates in this location (including WCF Workflow Service Application and WCF Service Application), you can publish using [One-Click publishing for web applications](https://docs.microsoft.com/previous-versions/aspnet/dd465337(v=vs.110)).</span></span>

<span data-ttu-id="ef68c-112">Le service peut être publié aux emplacements cibles suivants.</span><span class="sxs-lookup"><span data-stu-id="ef68c-112">The service can be published to the following target locations.</span></span>

- <span data-ttu-id="ef68c-113">IIS local</span><span class="sxs-lookup"><span data-stu-id="ef68c-113">Local IIS.</span></span>

- <span data-ttu-id="ef68c-114">Système de fichiers</span><span class="sxs-lookup"><span data-stu-id="ef68c-114">File System.</span></span>

- <span data-ttu-id="ef68c-115">Site FTP</span><span class="sxs-lookup"><span data-stu-id="ef68c-115">FTP Site.</span></span>

## <a name="using-wcf-service-publishing"></a><span data-ttu-id="ef68c-116">Utilisation de la publication de service WCF</span><span class="sxs-lookup"><span data-stu-id="ef68c-116">Using WCF Service Publishing</span></span>

<span data-ttu-id="ef68c-117">Pour déployer une implémentation de service, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="ef68c-117">Perform the following steps to deploy a service implementation:</span></span>

1. <span data-ttu-id="ef68c-118">Ouvrez Visual Studio avec des privilèges élevés (cliquez avec le bouton droit sur le fichier exécutable et choisissez **exécuter en tant qu’administrateur** pour l’ouvrir).</span><span class="sxs-lookup"><span data-stu-id="ef68c-118">Open Visual Studio with elevated privileges (right-click the executable and choose **Run as administrator** to open it).</span></span>  <span data-ttu-id="ef68c-119">Si vous utilisez IIS 7,0 ou une version ultérieure, assurez-vous que vous avez installé le composant « compatibilité avec la métabase IIS et la configuration IIS6 » à l’aide de « activer ou désactiver des fonctionnalités Windows » dans le panneau de configuration.</span><span class="sxs-lookup"><span data-stu-id="ef68c-119">If you are using IIS 7.0 or later, ensure that you have installed the "IIS Metabase and IIS6 Configuration Compatibility" component using "Turn Windows features on or off" in Control Panel.</span></span>

2. <span data-ttu-id="ef68c-120">Ouvrez un projet de service, sélectionnez **générer** > **publier \<nom du projet >** dans le menu principal, ou cliquez avec le bouton droit sur le projet dans **Explorateur de solutions** , puis cliquez sur **publier**.</span><span class="sxs-lookup"><span data-stu-id="ef68c-120">Open a service project, select **Build** > **Publish \<Project Name>** from the main menu, or right-click the project in **Solution Explorer** and click **Publish**.</span></span>

3. <span data-ttu-id="ef68c-121">La fenêtre **publier** s’affiche.</span><span class="sxs-lookup"><span data-stu-id="ef68c-121">The **Publish** window appears.</span></span> <span data-ttu-id="ef68c-122">Cliquez sur **...** .</span><span class="sxs-lookup"><span data-stu-id="ef68c-122">Click the **…**.</span></span> <span data-ttu-id="ef68c-123">pour spécifier l'emplacement cible où doit être déployé le service.</span><span class="sxs-lookup"><span data-stu-id="ef68c-123">button to specify the target location that the service should be deployed to.</span></span> <span data-ttu-id="ef68c-124">Vous pouvez choisir de déployer l’application sur un site IIS local, un système de fichiers ou un site FTP.</span><span class="sxs-lookup"><span data-stu-id="ef68c-124">You can select to deploy the application to local IIS, File System, or FTP Site.</span></span> <span data-ttu-id="ef68c-125">Si vous déployez l’application sur un serveur IIS local, vous pouvez sélectionner votre site Web et créer votre application Web sous celui-ci en cliquant sur l’icône **créer une application Web** dans l’angle supérieur droit.</span><span class="sxs-lookup"><span data-stu-id="ef68c-125">If deploying the application to local IIS, you can select your website and create your web application under it, by clicking the **Create New Web Application** icon at the top right corner.</span></span>

4. <span data-ttu-id="ef68c-126">Après avoir cliqué sur **publier** dans la fenêtre principale, Visual Studio déploie l’application à l’emplacement cible spécifié et copie les fichiers Web. config,. svc et assembly dans le répertoire cible.</span><span class="sxs-lookup"><span data-stu-id="ef68c-126">After you click **Publish** in the main window, Visual Studio deploys the application to the specified target location and copies the Web.config, .svc, and assembly files to the target directory.</span></span> <span data-ttu-id="ef68c-127">.</span><span class="sxs-lookup"><span data-stu-id="ef68c-127">.</span></span> <span data-ttu-id="ef68c-128">Le nom de. svc sera « ProjectName. ServiceName. svc ».</span><span class="sxs-lookup"><span data-stu-id="ef68c-128">The name of .svc will be "ProjectName.ServiceName.svc".</span></span> <span data-ttu-id="ef68c-129">Une fois que le service a été publié avec succès, vous pouvez trouver un lien hypertexte dans la fenêtre sortie de Visual Studio, qui ressemble à « connexion à `http://localhost/WebApplicationFolderName...`».</span><span class="sxs-lookup"><span data-stu-id="ef68c-129">After the service is published successfully, you can find a hotlink in the Visual Studio Output window, which looks similar to "Connecting to `http://localhost/WebApplicationFolderName...`".</span></span> <span data-ttu-id="ef68c-130">Vous pouvez appuyer sur Ctrl et cliquer sur le lien pour ouvrir une page du navigateur dans Visual Studio afin d'afficher la structure des répertoires du service.</span><span class="sxs-lookup"><span data-stu-id="ef68c-130">You can press CTRL and click the link to open a browser page inside Visual Studio to view the service directory structure.</span></span>

     <span data-ttu-id="ef68c-131">S'il est impossible de visiter le site, l'explorateur de répertoires n'est peut-être pas activé dans IIS.</span><span class="sxs-lookup"><span data-stu-id="ef68c-131">If you cannot browse to the site, it may because directory browser is not enabled in IIS.</span></span> <span data-ttu-id="ef68c-132">Suivez les conseils de la section « choses que vous pouvez essayer » pour l’activer.</span><span class="sxs-lookup"><span data-stu-id="ef68c-132">Please follow the tips in the "Things you can try" section to enable it.</span></span> <span data-ttu-id="ef68c-133">Vous pouvez également taper directement `http://localhost/WebApplicationFolderName/ProjectName.ServiceName.svc` pour afficher votre page de service.</span><span class="sxs-lookup"><span data-stu-id="ef68c-133">Alternatively, you can directly type `http://localhost/WebApplicationFolderName/ProjectName.ServiceName.svc` to view your service page.</span></span>

<span data-ttu-id="ef68c-134">Vous pouvez utiliser **publier** pour spécifier si vous souhaitez copier l’assembly, la configuration et le fichier. svc pour tous les services définis dans le projet vers l’emplacement cible, et remplacer les fichiers existants à la destination.</span><span class="sxs-lookup"><span data-stu-id="ef68c-134">You can use **Publish** to specify if you want to copy the assembly, configuration, and .svc file for all services defined in the project to the target location, and overwrite existing files at the destination.</span></span>

<span data-ttu-id="ef68c-135">Si vous choisissez de déployer votre application sur le serveur IIS local, vous pouvez rencontrer des erreurs liées à l'installation d'IIS.</span><span class="sxs-lookup"><span data-stu-id="ef68c-135">If you choose to deploy your application to local IIS, you may encounter errors related to IIS setup.</span></span> <span data-ttu-id="ef68c-136">Vérifiez que IIS est installé correctement.</span><span class="sxs-lookup"><span data-stu-id="ef68c-136">Please ensure that IIS is installed properly.</span></span> <span data-ttu-id="ef68c-137">Vous pouvez entrer `http://localhost` dans la barre d’adresse de votre navigateur et vérifier si la page IIS par défaut s’affiche.</span><span class="sxs-lookup"><span data-stu-id="ef68c-137">You can enter `http://localhost` in your browser's address bar and check whether the IIS default page displays.</span></span> <span data-ttu-id="ef68c-138">Dans certains cas, les problèmes peuvent également être dus à une inscription incorrecte de ASP.NET ou WCF dans IIS.</span><span class="sxs-lookup"><span data-stu-id="ef68c-138">In some cases, the issues may also be caused by improper registration of ASP.NET or WCF in IIS.</span></span> <span data-ttu-id="ef68c-139">Vous pouvez ouvrir le Invite de commandes développeur pour Visual Studio et exécuter la commande `aspnet_regiis.exe -ir` pour résoudre les problèmes d’inscription ASP.NET ou exécuter la commande `ServiceModelReg.exe –ia` pour résoudre les problèmes d’inscription WCF.</span><span class="sxs-lookup"><span data-stu-id="ef68c-139">You can open the Developer Command Prompt for Visual Studio and run the command `aspnet_regiis.exe -ir` to fix ASP.NET registration issues, or run command `ServiceModelReg.exe –ia` to fix WCF registration issues.</span></span>

## <a name="files-generated-for-publishing"></a><span data-ttu-id="ef68c-140">Fichiers générés en vue de leur publication</span><span class="sxs-lookup"><span data-stu-id="ef68c-140">Files Generated for Publishing</span></span>
 <span data-ttu-id="ef68c-141">Pour qu’une bibliothèque de services WCF puisse être hébergée sur le Web, les fichiers suivants sont générés par l’outil : fichiers d’assembly, fichier Web. config et fichier. svc.</span><span class="sxs-lookup"><span data-stu-id="ef68c-141">Before a WCF service library can be Web-hosted, the following files are generated by the tool: assembly files, Web.config file, and .svc file.</span></span> <span data-ttu-id="ef68c-142">Tous les fichiers sont copiés à l'emplacement cible.</span><span class="sxs-lookup"><span data-stu-id="ef68c-142">All the files are copied to the target location.</span></span> <span data-ttu-id="ef68c-143">Le service est ensuite publié.</span><span class="sxs-lookup"><span data-stu-id="ef68c-143">The service is then published.</span></span>

### <a name="assembly-files"></a><span data-ttu-id="ef68c-144">Fichiers d'assembly</span><span class="sxs-lookup"><span data-stu-id="ef68c-144">Assembly files</span></span>
 <span data-ttu-id="ef68c-145">Lorsque vous publiez un service WCF à l’aide de cet outil, le service est automatiquement créé en premier et les fichiers d’assembly sont générés dans le projet de service après la génération.</span><span class="sxs-lookup"><span data-stu-id="ef68c-145">When you publish a WCF service using this tool, the service is automatically built first and the assembly files are generated in the service project after building.</span></span>

### <a name="svc-file"></a><span data-ttu-id="ef68c-146">Fichier .SVC</span><span class="sxs-lookup"><span data-stu-id="ef68c-146">.SVC File</span></span>
 <span data-ttu-id="ef68c-147">L’opération de publication génère un fichier \*. svc pour chaque service WCF, que le fichier existe ou non, pour garantir la validité de la version.</span><span class="sxs-lookup"><span data-stu-id="ef68c-147">The publishing operation generates a \*.svc file for each WCF service, whether the file exists or not, to ensure version validity.</span></span> <span data-ttu-id="ef68c-148">Il existe deux types différents de fichiers svc : un pour la bibliothèque de services WCF et la bibliothèque du service de syndication, et un autre pour la bibliothèque de service de workflow d’ordinateur séquentiel et d’État.</span><span class="sxs-lookup"><span data-stu-id="ef68c-148">There are two different kinds of svc files: one for WCF Service Library and Syndication Service Library, and another one for Sequential and State Machine Workflow Service Library.</span></span> <span data-ttu-id="ef68c-149">Le fichier \*. svc généré est copié dans le dossier racine de l’emplacement cible.</span><span class="sxs-lookup"><span data-stu-id="ef68c-149">The generated \*.svc file is copied to the root folder in the target location.</span></span>

### <a name="webconfig-file"></a><span data-ttu-id="ef68c-150">Fichier Web.config</span><span class="sxs-lookup"><span data-stu-id="ef68c-150">Web.config File</span></span>
 <span data-ttu-id="ef68c-151">Chaque fois qu'un projet de service est publié à un emplacement cible spécifique, un fichier Web.config est créé.</span><span class="sxs-lookup"><span data-stu-id="ef68c-151">Each time a service project is published to a specific target location, a Web.config file is created.</span></span>

 <span data-ttu-id="ef68c-152">Le fichier Web. config généré comprend des sections Web utiles pour l’hébergement Web, ainsi que le contenu du fichier app. config pour la bibliothèque de services WCF avec les modifications suivantes :</span><span class="sxs-lookup"><span data-stu-id="ef68c-152">The generated Web.config file includes Web sections that are useful for Web hosting, and the content of App.config for the WCF service library with the following changes:</span></span>

- <span data-ttu-id="ef68c-153">L'adresse de base est exclue.</span><span class="sxs-lookup"><span data-stu-id="ef68c-153">The base address is excluded.</span></span>

- <span data-ttu-id="ef68c-154">Les paramètres dans l'élément `<diagnostics>` sont exclus pour préserver les paramètres de suivi de la plateforme cible.</span><span class="sxs-lookup"><span data-stu-id="ef68c-154">Settings in the `<diagnostics>` element are excluded to preserve the tracing settings of the target platform.</span></span>

## <a name="publishing-wcf-services-with-non-http-bindings-to-iis"></a><span data-ttu-id="ef68c-155">Publication sur IIS de services WCF avec des liaisons non-HTTP</span><span class="sxs-lookup"><span data-stu-id="ef68c-155">Publishing WCF services with non-HTTP Bindings to IIS</span></span>
 <span data-ttu-id="ef68c-156">Si vous utilisez IIS 7.0 ou version ultérieure, vous pouvez publier des services WCF avec des liaisons non-HTTP vers IIS.</span><span class="sxs-lookup"><span data-stu-id="ef68c-156">If you are using IIS7.0 or later, you can publish WCF services with non-HTTP bindings to IIS.</span></span> <span data-ttu-id="ef68c-157">Vous devez effectuer plusieurs tâches de préconfiguration.</span><span class="sxs-lookup"><span data-stu-id="ef68c-157">You need to do some pre-configurations.</span></span> <span data-ttu-id="ef68c-158">Pour plus d’informations, consultez les rubriques consacrées à l' [hébergement dans le service d’activation des processus Windows](./feature-details/hosting-in-windows-process-activation-service.md).</span><span class="sxs-lookup"><span data-stu-id="ef68c-158">For more information, please see the topics at  [Hosting in Windows Process Activation Service](./feature-details/hosting-in-windows-process-activation-service.md).</span></span>

## <a name="security"></a><span data-ttu-id="ef68c-159">Sécurité</span><span class="sxs-lookup"><span data-stu-id="ef68c-159">Security</span></span>
 <span data-ttu-id="ef68c-160">La publication sur le serveur IIS local requiert des privilèges d'administrateur car IIS doit être exécuté sous un compte Administrateur.</span><span class="sxs-lookup"><span data-stu-id="ef68c-160">Publishing to local IIS requires administrator privilege, because IIS requires running in Administrator account.</span></span> <span data-ttu-id="ef68c-161">Si un utilisateur sans privilège d’administrateur ouvre la publication de service WCF, IIS n’est pas disponible en tant qu’emplacement cible.</span><span class="sxs-lookup"><span data-stu-id="ef68c-161">If a user without administrator privilege opens WCF Service Publishing, IIS is not available as a target location.</span></span> <span data-ttu-id="ef68c-162">La publication dans le système de fichiers ou le site FTP fonctionne sans privilège d’administrateur.</span><span class="sxs-lookup"><span data-stu-id="ef68c-162">Publishing to File System, or FTP Site works without administrator privilege.</span></span>

## <a name="see-also"></a><span data-ttu-id="ef68c-163">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ef68c-163">See also</span></span>

- [<span data-ttu-id="ef68c-164">Modèles Visual Studio WCF</span><span class="sxs-lookup"><span data-stu-id="ef68c-164">WCF Visual Studio Templates</span></span>](wcf-vs-templates.md)
- [<span data-ttu-id="ef68c-165">WCF Service Host (WcfSvcHost.exe)</span><span class="sxs-lookup"><span data-stu-id="ef68c-165">WCF Service Host (WcfSvcHost.exe)</span></span>](wcf-service-host-wcfsvchost-exe.md)
- [<span data-ttu-id="ef68c-166">Client test WCF (WcfTestClient.exe)</span><span class="sxs-lookup"><span data-stu-id="ef68c-166">WCF Test Client (WcfTestClient.exe)</span></span>](wcf-test-client-wcftestclient-exe.md)
