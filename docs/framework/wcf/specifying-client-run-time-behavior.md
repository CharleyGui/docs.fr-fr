---
title: Spécification du comportement du client au moment de l'exécution
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- behaviors [WCF], system-provided client
ms.assetid: d16d3405-be70-4edb-8f62-b5f614ddeca5
ms.openlocfilehash: f9c22d25bedc36b3515538a8785b488aaa547990
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79143237"
---
# <a name="specifying-client-run-time-behavior"></a><span data-ttu-id="e8aa9-102">Spécification du comportement du client au moment de l'exécution</span><span class="sxs-lookup"><span data-stu-id="e8aa9-102">Specifying Client Run-Time Behavior</span></span>
<span data-ttu-id="e8aa9-103">Les clients de la Windows Communication Foundation (WCF), comme les services de la Windows Communication Foundation (WCF), peuvent être configurés pour modifier le comportement en temps de course en fonction de l’application client.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-103">Windows Communication Foundation (WCF) clients, like Windows Communication Foundation (WCF) services, can be configured to modify the run-time behavior to suit the client application.</span></span> <span data-ttu-id="e8aa9-104">Trois attributs sont disponibles pour spécifier le comportement du client au moment de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-104">Three attributes are available for specifying client run-time behavior.</span></span> <span data-ttu-id="e8aa9-105">Les objets de rappel de client duplex peuvent utiliser les attributs <xref:System.ServiceModel.CallbackBehaviorAttribute> et <xref:System.ServiceModel.Description.CallbackDebugBehavior> pour modifier leur comportement à l'exécution.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-105">Duplex client callback objects can use the <xref:System.ServiceModel.CallbackBehaviorAttribute> and <xref:System.ServiceModel.Description.CallbackDebugBehavior> attributes to modify their run-time behavior.</span></span> <span data-ttu-id="e8aa9-106">L'autre attribut, <xref:System.ServiceModel.Description.ClientViaBehavior>, peut être utilisé pour séparer la destination logique de la destination réseau immédiate.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-106">The other attribute, <xref:System.ServiceModel.Description.ClientViaBehavior>, can be used to separate the logical destination from the immediate network destination.</span></span> <span data-ttu-id="e8aa9-107">De plus, les types de rappel de client duplex peuvent utiliser certains des comportements du côté service.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-107">In addition, duplex client callback types can use some of the service-side behaviors.</span></span> <span data-ttu-id="e8aa9-108">Pour plus d’informations, voir [Specifying Service Run-Time Behavior](specifying-service-run-time-behavior.md).</span><span class="sxs-lookup"><span data-stu-id="e8aa9-108">For more information, see [Specifying Service Run-Time Behavior](specifying-service-run-time-behavior.md).</span></span>  
  
## <a name="using-the-callbackbehaviorattribute"></a><span data-ttu-id="e8aa9-109">Utilisation de CallbackBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="e8aa9-109">Using the CallbackBehaviorAttribute</span></span>  
 <span data-ttu-id="e8aa9-110">Vous pouvez configurer ou étendre le comportement d'exécution d'une implémentation de contrat de rappel dans une application cliente en utilisant la classe <xref:System.ServiceModel.CallbackBehaviorAttribute>.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-110">You can configure or extend the execution behavior of a callback contract implementation in a client application by using the <xref:System.ServiceModel.CallbackBehaviorAttribute> class.</span></span> <span data-ttu-id="e8aa9-111">Cet attribut exécute pour la classe de rappel une fonction semblable à la classe <xref:System.ServiceModel.ServiceBehaviorAttribute>, à l'exception du comportement d'instanciation et des paramètres de transaction.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-111">This attribute performs a similar function for the callback class as the <xref:System.ServiceModel.ServiceBehaviorAttribute> class, with the exception of instancing behavior and transaction settings.</span></span>  
  
 <span data-ttu-id="e8aa9-112">La classe <xref:System.ServiceModel.CallbackBehaviorAttribute> doit être appliquée à la classe qui implémente le contrat de rappel.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-112">The <xref:System.ServiceModel.CallbackBehaviorAttribute> class must be applied to the class that implements the callback contract.</span></span> <span data-ttu-id="e8aa9-113">En cas d'application à une implémentation de contrat non-duplex, une exception <xref:System.InvalidOperationException> est levée au moment de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-113">If applied to a nonduplex contract implementation, an <xref:System.InvalidOperationException> exception is thrown at run time.</span></span> <span data-ttu-id="e8aa9-114">L’exemple de code suivant illustre une classe <xref:System.ServiceModel.CallbackBehaviorAttribute> sur un objet de rappel qui utilise l’objet <xref:System.Threading.SynchronizationContext> pour déterminer le thread à marshaler, la propriété <xref:System.ServiceModel.CallbackBehaviorAttribute.ValidateMustUnderstand%2A> pour appliquer la validation de message et la propriété <xref:System.ServiceModel.CallbackBehaviorAttribute.IncludeExceptionDetailInFaults%2A> pour retourner des exceptions comme objets <xref:System.ServiceModel.FaultException> au service à des fins de débogage.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-114">The following code example shows a <xref:System.ServiceModel.CallbackBehaviorAttribute> class on a callback object that uses the <xref:System.Threading.SynchronizationContext> object to determine the thread to marshal to, the <xref:System.ServiceModel.CallbackBehaviorAttribute.ValidateMustUnderstand%2A> property to enforce message validation, and the <xref:System.ServiceModel.CallbackBehaviorAttribute.IncludeExceptionDetailInFaults%2A> property to return exceptions as <xref:System.ServiceModel.FaultException> objects to the service for debugging purposes.</span></span>  
  
 [!code-csharp[CallbackBehaviorAttribute#3](../../../samples/snippets/csharp/VS_Snippets_CFX/callbackbehaviorattribute/cs/client.cs#3)]
 [!code-vb[CallbackBehaviorAttribute#3](../../../samples/snippets/visualbasic/VS_Snippets_CFX/callbackbehaviorattribute/vb/client.vb#3)]  
  
## <a name="using-callbackdebugbehavior-to-enable-the-flow-of-managed-exception-information"></a><span data-ttu-id="e8aa9-115">Utilisation de CallbackDebugBehavior pour activer le flux d'informations d'exceptions managées</span><span class="sxs-lookup"><span data-stu-id="e8aa9-115">Using CallbackDebugBehavior to Enable the Flow of Managed Exception Information</span></span>  
 <span data-ttu-id="e8aa9-116">Vous pouvez activer le flux d'informations d'exceptions managées dans un objet de rappel client au service à des fins de débogage en affectant à la propriété <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> la valeur `true` par programme ou à partir d'un fichier de configuration d'application.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-116">You can enable the flow of managed exception information in a client callback object back to the service for debugging purposes by setting the <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> property to `true` either programmatically or from an application configuration file.</span></span>  
  
 <span data-ttu-id="e8aa9-117">Le retour d'informations sur les exceptions managées aux services peut constituer un problème de sécurité car les détails d'exception exposent des informations relatives à l'implémentation cliente interne que des services non autorisés pourraient utiliser.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-117">Returning managed exception information to services can be a security risk because exception details expose information about the internal client implementation that  unauthorized services could use.</span></span> <span data-ttu-id="e8aa9-118">De plus, bien que les propriétés <xref:System.ServiceModel.Description.CallbackDebugBehavior> puissent également être définies par programme, il peut être facile d'oublier de désactiver <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> lors du déploiement.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-118">In addition, although the <xref:System.ServiceModel.Description.CallbackDebugBehavior> properties can also be set programmatically, it can be easy to forget to disable <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> when deploying.</span></span>  
  
 <span data-ttu-id="e8aa9-119">Étant donné les problèmes de sécurité impliqués, il est vivement recommandé :</span><span class="sxs-lookup"><span data-stu-id="e8aa9-119">Because of the security issues involved, it is strongly recommended that:</span></span>  
  
- <span data-ttu-id="e8aa9-120">d'utiliser un fichier de configuration d'application pour affecter à la propriété <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> la valeur `true` ;</span><span class="sxs-lookup"><span data-stu-id="e8aa9-120">You use an application configuration file to set the value of the <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> property to `true`.</span></span>  
  
- <span data-ttu-id="e8aa9-121">de ne procéder ainsi que dans des scénarios de débogage contrôlés.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-121">You do so only in controlled debugging scenarios.</span></span>  
  
 <span data-ttu-id="e8aa9-122">L’exemple de code suivant montre un fichier de configuration client qui demande à WCF de retourner les informations d’exception gérées à partir d’un objet de rappel client dans les messages SOAP.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-122">The following code example shows a client configuration file that instructs WCF to return managed exception information from a client callback object in SOAP messages.</span></span>  
  
 [!code-xml[SCA.CallbackContract#4](../../../samples/snippets/csharp/VS_Snippets_CFX/sca.callbackcontract/cs/client.exe.config#4)]  

## <a name="using-the-clientviabehavior-behavior"></a><span data-ttu-id="e8aa9-123">Utilisation du comportement ClientViaBehavior</span><span class="sxs-lookup"><span data-stu-id="e8aa9-123">Using the ClientViaBehavior Behavior</span></span>  
 <span data-ttu-id="e8aa9-124">Vous pouvez utiliser le comportement <xref:System.ServiceModel.Description.ClientViaBehavior> pour spécifier l'URI pour lequel le canal de transport doit être créé.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-124">You can use the <xref:System.ServiceModel.Description.ClientViaBehavior> behavior to specify the Uniform Resource Identifier for which the transport channel should be created.</span></span> <span data-ttu-id="e8aa9-125">Utilisez ce comportement lorsque la destination réseau immédiate n'est pas le processeur prévu du message.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-125">Use this behavior when the immediate network destination is not the intended processor of the message.</span></span> <span data-ttu-id="e8aa9-126">Cela autorise les conversations à sauts multiples lorsque l'application appelante ne connaît pas nécessairement la destination ultime ou lorsque l'en-tête `Via` de destination n'est pas une adresse.</span><span class="sxs-lookup"><span data-stu-id="e8aa9-126">This enables multiple-hop conversations when the calling application does not necessarily know the ultimate destination or when the destination `Via` header is not an address.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e8aa9-127">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="e8aa9-127">See also</span></span>

- [<span data-ttu-id="e8aa9-128">Spécification du comportement du service au moment de l’exécution</span><span class="sxs-lookup"><span data-stu-id="e8aa9-128">Specifying Service Run-Time Behavior</span></span>](specifying-service-run-time-behavior.md)
