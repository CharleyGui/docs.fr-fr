---
title: Fonctionnalités de simplification de WCF
ms.date: 03/30/2017
ms.assetid: 4535a511-6064-4da0-b361-80262a891663
ms.openlocfilehash: dd944ad2963e29fd3aa9254f3a37f2c2b98ce70d
ms.sourcegitcommit: 32a575bf4adccc901f00e264f92b759ced633379
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/04/2019
ms.locfileid: "74802386"
---
# <a name="wcf-simplification-features"></a><span data-ttu-id="3e7b9-102">Fonctionnalités de simplification de WCF</span><span class="sxs-lookup"><span data-stu-id="3e7b9-102">WCF Simplification Features</span></span>

<span data-ttu-id="3e7b9-103">Cette rubrique décrit les nouvelles fonctionnalités qui facilitent l’écriture d’applications WCF.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-103">This topic discusses new features that make writing WCF applications simpler.</span></span>

## <a name="simplified-generated-configuration-files"></a><span data-ttu-id="3e7b9-104">Fichiers de configuration générés simplifiés</span><span class="sxs-lookup"><span data-stu-id="3e7b9-104">Simplified Generated Configuration Files</span></span>

<span data-ttu-id="3e7b9-105">Lorsque vous ajoutez une référence de service dans Visual Studio ou utilisez l'outil SvcUtil.exe, un fichier de configuration client est généré.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-105">When you add a service reference in Visual Studio or use the SvcUtil.exe tool a client configuration file is generated.</span></span> <span data-ttu-id="3e7b9-106">Dans les versions antérieures de WCF, ces fichiers de configuration contenaient la valeur de chaque propriété de liaison et ce, même si sa valeur était la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-106">In previous versions of WCF these configuration files contained the value of every binding property even if its value is the default value.</span></span> <span data-ttu-id="3e7b9-107">Dans WCF 4.5, les fichiers de configuration générés contiennent uniquement les propriétés de liaison qui ont une valeur non définie par défaut.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-107">In WCF 4.5 the generated configuration files contain only those binding properties that are set to a non-default value.</span></span>

<span data-ttu-id="3e7b9-108">L'exemple suivant est un fichier de configuration généré par WCF 3.0.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-108">The following is an example of a configuration file generated by WCF 3.0.</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService1" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false"
                    hostNameComparisonMode="StrongWildcard" maxBufferSize="65536"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192"
                        maxArrayLength="16384" maxBytesPerRead="4096"
                        maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:36906/Service1.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService1" contract="IService1"
                name="BasicHttpBinding_IService1" />
        </client>
    </system.serviceModel>
</configuration>
```

<span data-ttu-id="3e7b9-109">L'exemple suivant est un fichier de configuration généré par WCF 4.5.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-109">The following is an example of the same configuration file generated by WCF 4.5.</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService1" />
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:36906/Service1.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService1" contract="IService1"
                name="BasicHttpBinding_IService1" />
        </client>
    </system.serviceModel>
</configuration>
```

## <a name="contract-first-development"></a><span data-ttu-id="3e7b9-110">Développement Contrat en premier</span><span class="sxs-lookup"><span data-stu-id="3e7b9-110">Contract-First Development</span></span>

<span data-ttu-id="3e7b9-111">WCF prend désormais en charge le développement Contrat en premier.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-111">WCF now has support for contract-first development.</span></span> <span data-ttu-id="3e7b9-112">L’outil Svcutil. exe possède un commutateur/serviceContract qui vous permet de générer des contrats de service et de données à partir d’un document WSDL.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-112">The svcutil.exe tool has a /serviceContract switch which allows you to generate service and data contracts from a WSDL document.</span></span>

## <a name="add-service-reference-from-a-portable-subset-project"></a><span data-ttu-id="3e7b9-113">Ajouter une référence de service d'un projet de sous-ensemble portable</span><span class="sxs-lookup"><span data-stu-id="3e7b9-113">Add Service Reference From a Portable Subset Project</span></span>

<span data-ttu-id="3e7b9-114">Les projets de sous-ensemble portables permettent aux programmeurs d’assembly .NET de maintenir une arborescence source unique et le système de génération tout en prenant en charge plusieurs implémentations .NET (Desktop, Silverlight, Windows Phone et XBOX).</span><span class="sxs-lookup"><span data-stu-id="3e7b9-114">Portable subset projects enable .NET assembly programmers to maintain a single source tree and build system while still supporting multiple .NET implementations (desktop, Silverlight, Windows Phone, and XBOX).</span></span> <span data-ttu-id="3e7b9-115">Les projets de sous-ensemble portables référencent uniquement les bibliothèques portables .NET qui sont un assembly .NET Framework qui peut être utilisé sur n’importe quelle implémentation .NET.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-115">Portable subset projects only reference .NET portable libraries which are a .NET framework assembly that can be used on any .NET implementation.</span></span> <span data-ttu-id="3e7b9-116">L'expérience du développeur est identique à celle de l'ajout d'une référence de service dans une autre application cliente WCF.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-116">The developer experience is the same as adding a service reference within any other WCF client application.</span></span> <span data-ttu-id="3e7b9-117">Pour plus d’informations, consultez [Ajouter une référence de service dans un projet de sous-ensemble portable](add-service-reference-in-a-portable-subset-project.md).</span><span class="sxs-lookup"><span data-stu-id="3e7b9-117">For more information, see [Add Service Reference in a Portable Subset Project](add-service-reference-in-a-portable-subset-project.md).</span></span>

## <a name="aspnet-compatibility-mode-default-changed"></a><span data-ttu-id="3e7b9-118">Modification de la valeur par défaut pour le mode de compatibilité ASP.NET</span><span class="sxs-lookup"><span data-stu-id="3e7b9-118">ASP.NET Compatibility Mode Default Changed</span></span>

<span data-ttu-id="3e7b9-119">WCF fournit le mode de compatibilité ASP.NET pour accorder aux développeurs l'accès total aux fonctionnalités dans le pipeline HTTP ASP.NET lors de l'écriture des services WCF.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-119">WCF provides ASP.NET compatibility mode to grant developers full access to the features in the ASP.NET HTTP pipeline when writing WCF services.</span></span> <span data-ttu-id="3e7b9-120">Pour utiliser ce mode, vous devez affecter la valeur true à l’attribut `aspNetCompatibilityEnabled` dans la section [\<serviceHostingEnvironment >](../configure-apps/file-schema/wcf/servicehostingenvironment.md) de Web. config. En outre, tout service de cet appDomain doit avoir la propriété `RequirementsMode` sur son <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> défini sur <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> ou <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-120">To use this mode, you must set the `aspNetCompatibilityEnabled` attribute to true in the [\<serviceHostingEnvironment>](../configure-apps/file-schema/wcf/servicehostingenvironment.md) section of web.config. Additionally, any service in this appDomain needs to have the `RequirementsMode` property on its <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> set to <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> or <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>.</span></span> <span data-ttu-id="3e7b9-121">Par défaut <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> a maintenant la valeur <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> et le modèle d’application de service WCF par défaut définit l’attribut `aspNetCompatibilityEnabled` sur `true`.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-121">By default <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> is now set to <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> and the default WCF service application template sets the `aspNetCompatibilityEnabled` attribute to `true`.</span></span> <span data-ttu-id="3e7b9-122">Pour plus d’informations, consultez [What’s New in Windows Communication Foundation 4,5](whats-new.md) and [WCF services and ASP.net](./feature-details/wcf-services-and-aspnet.md).</span><span class="sxs-lookup"><span data-stu-id="3e7b9-122">For more information, see [What's New in Windows Communication Foundation 4.5](whats-new.md) and [WCF Services and ASP.NET](./feature-details/wcf-services-and-aspnet.md).</span></span>

## <a name="streaming-improvements"></a><span data-ttu-id="3e7b9-123">Améliorations de la diffusion en continu</span><span class="sxs-lookup"><span data-stu-id="3e7b9-123">Streaming Improvements</span></span>

- <span data-ttu-id="3e7b9-124">La prise en charge de la diffusion en continu asynchrone a été ajoutée à WCF.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-124">New support for asynchronous streaming has been added to WCF.</span></span> <span data-ttu-id="3e7b9-125">Pour activer la diffusion en continu asynchrone, ajoutez le comportement de point de terminaison <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> à l'hôte de service et affectez à sa propriété <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> la valeur `true`.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-125">To enable asynchronous streaming, add the  <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> endpoint behavior to the service host and set its <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> property to `true`.</span></span> <span data-ttu-id="3e7b9-126">L'extensibilité peut en tirer parti lorsqu'un service envoie des messages transmis en continu à plusieurs clients qui les lisent lentement.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-126">This can benefit scalability when a service is sending streamed messages to multiple clients which are reading slowly.</span></span> <span data-ttu-id="3e7b9-127">WCF ne bloque plus un thread par client et libère le thread pour prendre en charge un autre client.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-127">WCF does not block one thread per client anymore and will free up the thread to service another client.</span></span>

- <span data-ttu-id="3e7b9-128">Limitations supprimées concernant la mise en mémoire tampon des messages lorsqu'un service est hébergé par IIS.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-128">Removed limitations around buffering of messages when a service is IIS hosted.</span></span> <span data-ttu-id="3e7b9-129">Dans les versions antérieures de WCF, lors de la réception d'un message pour un service hébergé par IIS qui utilisait le transfert de message en continu, ASP.NET plaçait le message entier en mémoire tampon avant de l'envoyer à WCF.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-129">In previous versions of WCF when receiving a message for an IIS-hosted service that used streaming message transfer, ASP.NET would buffer the entire message before sending it to WCF.</span></span> <span data-ttu-id="3e7b9-130">Cela entraînait une grande consommation de mémoire.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-130">This would cause large memory consumption.</span></span> <span data-ttu-id="3e7b9-131">Cette mise en mémoire tampon a été supprimée dans .NET 4.5 et désormais les services WCF hébergés par IIS peuvent traiter le flux entrant avant que le message entier n'ait été reçu, ce qui permet une réelle diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-131">This buffering has been removed in .NET 4.5 and now IIS-hosted WCF services can start processing the incoming stream before the entire message has been received, thereby enabling true streaming.</span></span> <span data-ttu-id="3e7b9-132">Cela permet à WCF de répondre immédiatement aux messages et améliore les performances.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-132">This allows WCF to respond immediately to messages and allows improved performance.</span></span> <span data-ttu-id="3e7b9-133">En outre, vous n'avez plus besoin de spécifier une valeur pour `maxRequestLength`, la limite de taille ASP.NET sur les requêtes entrantes.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-133">In addition, you no longer have to specify a value for `maxRequestLength`, the ASP.NET size limit on incoming requests.</span></span> <span data-ttu-id="3e7b9-134">Si cette propriété est définie, elle est ignorée.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-134">If this property is set, it is ignored.</span></span> <span data-ttu-id="3e7b9-135">Pour plus d’informations sur `maxRequestLength` consultez [\<httpRuntime > élément de configuration](https://docs.microsoft.com/previous-versions/dotnet/netframework-1.1/e1f13641(v=vs.71)).</span><span class="sxs-lookup"><span data-stu-id="3e7b9-135">For more information about `maxRequestLength` see [\<httpRuntime> configuration element](https://docs.microsoft.com/previous-versions/dotnet/netframework-1.1/e1f13641(v=vs.71)).</span></span> <span data-ttu-id="3e7b9-136">Vous devrez toujours configurer le maxAllowedContentLength. pour plus d’informations, consultez [limites des demandes IIS](https://docs.microsoft.com/previous-versions/iis/settings-schema/ms689462(v=vs.90)).</span><span class="sxs-lookup"><span data-stu-id="3e7b9-136">You will still need to configure the maxAllowedContentLength, For more information, see [IIS Request Limits](https://docs.microsoft.com/previous-versions/iis/settings-schema/ms689462(v=vs.90)).</span></span>

## <a name="new-transport-default-values"></a><span data-ttu-id="3e7b9-137">Valeurs par défaut pour le nouveau transport</span><span class="sxs-lookup"><span data-stu-id="3e7b9-137">New Transport Default Values</span></span>

<span data-ttu-id="3e7b9-138">Le tableau suivant décrit les paramètres qui ont changé et où trouver des informations supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-138">The following table describes the settings that have changed and where to find additional information.</span></span>

|<span data-ttu-id="3e7b9-139">Property</span><span class="sxs-lookup"><span data-stu-id="3e7b9-139">Property</span></span>|<span data-ttu-id="3e7b9-140">On</span><span class="sxs-lookup"><span data-stu-id="3e7b9-140">On</span></span>|<span data-ttu-id="3e7b9-141">Nouvelle valeur par défaut</span><span class="sxs-lookup"><span data-stu-id="3e7b9-141">New Default</span></span>|<span data-ttu-id="3e7b9-142">Plus d’informations</span><span class="sxs-lookup"><span data-stu-id="3e7b9-142">More Information</span></span>|
|--------------|--------|-----------------|----------------------|
|<span data-ttu-id="3e7b9-143">channelInitializationTimeout</span><span class="sxs-lookup"><span data-stu-id="3e7b9-143">channelInitializationTimeout</span></span>|<xref:System.ServiceModel.NetTcpBinding>|<span data-ttu-id="3e7b9-144">30 secondes</span><span class="sxs-lookup"><span data-stu-id="3e7b9-144">30 seconds</span></span>|<span data-ttu-id="3e7b9-145">Cette propriété détermine la durée pendant laquelle une connexion TCP peut s’authentifier à l’aide du protocole de tramage .NET.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-145">This property determines how long a TCP connection can take to authenticate itself using the .NET Framing protocol.</span></span> <span data-ttu-id="3e7b9-146">Un client doit envoyer des données initiales avant que le serveur dispose de suffisamment d'informations pour exécuter l'authentification.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-146">A client needs to send some initial data before the server has enough information to perform authentication.</span></span> <span data-ttu-id="3e7b9-147">Ce délai d'attente est volontairement plus petit que le ReceiveTimeout (10 minutes) afin que les clients non authentifiés malveillants ne conservent pas longtemps les connexions occupées au serveur.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-147">This timeout is intentionally made smaller than the ReceiveTimeout (10 min) so that malicious unauthenticated clients do not keep the connections tied up to the server for long.</span></span> <span data-ttu-id="3e7b9-148">La valeur par défaut correspond à 30 secondes.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-148">The default value is 30 seconds.</span></span> <span data-ttu-id="3e7b9-149">Pour plus d’informations sur <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.ChannelInitializationTimeout%2A></span><span class="sxs-lookup"><span data-stu-id="3e7b9-149">For more information about <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.ChannelInitializationTimeout%2A></span></span>|
|<span data-ttu-id="3e7b9-150">listenBacklog</span><span class="sxs-lookup"><span data-stu-id="3e7b9-150">listenBacklog</span></span>|<xref:System.ServiceModel.NetTcpBinding>|<span data-ttu-id="3e7b9-151">16 \* nombre de processeurs</span><span class="sxs-lookup"><span data-stu-id="3e7b9-151">16 \* number of processors</span></span>|<span data-ttu-id="3e7b9-152">Cette propriété de niveau socket décrit le nombre de demandes en "attente d'acceptation" à mettre en file d'attente.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-152">This socket-level property describes the number of "pending accept" requests to be queued.</span></span> <span data-ttu-id="3e7b9-153">Si la file d’attente du backlog d’écoute est remplie, les nouvelles demandes de socket sont rejetées.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-153">If the listen backlog queue fills up, new socket requests will be rejected.</span></span> <span data-ttu-id="3e7b9-154">Pour plus d’informations sur <xref:System.ServiceModel.NetTcpBinding.ListenBacklog%2A></span><span class="sxs-lookup"><span data-stu-id="3e7b9-154">For more information about <xref:System.ServiceModel.NetTcpBinding.ListenBacklog%2A></span></span>|
|<span data-ttu-id="3e7b9-155">maxPendingAccepts</span><span class="sxs-lookup"><span data-stu-id="3e7b9-155">maxPendingAccepts</span></span>|<span data-ttu-id="3e7b9-156">ConnectionOrientedTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="3e7b9-156">ConnectionOrientedTransportBindingElement</span></span><br /><br /> <span data-ttu-id="3e7b9-157">SMSvcHost.exe</span><span class="sxs-lookup"><span data-stu-id="3e7b9-157">SMSvcHost.exe</span></span>|<span data-ttu-id="3e7b9-158">2 \* nombre de processeurs pour le transport</span><span class="sxs-lookup"><span data-stu-id="3e7b9-158">2 \* number of processors for transport</span></span><br /><br /> <span data-ttu-id="3e7b9-159">4 \* nombre de processeurs pour SMSvcHost. exe</span><span class="sxs-lookup"><span data-stu-id="3e7b9-159">4 \* number of processors for SMSvcHost.exe</span></span>|<span data-ttu-id="3e7b9-160">Cette propriété limite le nombre de canaux que le serveur peut avoir en attente sur un écouteur.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-160">This property limits the number of channels that the server can have waiting on a listener.</span></span> <span data-ttu-id="3e7b9-161">Lorsque MaxPendingAccepts est trop bas, il y a un petit intervalle de temps pendant lequel tous les canaux en attente démarrent les connexions de service, mais aucun nouveau canal ne démarre d'écoute.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-161">When MaxPendingAccepts is too low, there will be a small interval of time in which all of the waiting channels have started servicing connections, but no new channels have begun listening.</span></span> <span data-ttu-id="3e7b9-162">Une connexion peut se produire pendant cet intervalle et échouera, car aucun élément ne l'attend sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-162">A connection can arrive during this interval and will fail because nothing is waiting for it on the server.</span></span> <span data-ttu-id="3e7b9-163">Cette propriété peut être configurée en affectant un plus grand nombre à la propriété <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A>.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-163">This property can be configured by setting the <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A> property to a larger number.</span></span> <span data-ttu-id="3e7b9-164">Pour plus d’informations, consultez <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingAccepts%2A> et [configuration du service de partage de ports net. TCP.](./feature-details/configuring-the-net-tcp-port-sharing-service.md)</span><span class="sxs-lookup"><span data-stu-id="3e7b9-164">For more information, see <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingAccepts%2A> and [Configuring the Net.TCP Port Sharing Service](./feature-details/configuring-the-net-tcp-port-sharing-service.md)</span></span>|
|<span data-ttu-id="3e7b9-165">maxPendingConnections</span><span class="sxs-lookup"><span data-stu-id="3e7b9-165">maxPendingConnections</span></span>|<span data-ttu-id="3e7b9-166">ConnectionOrientedTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="3e7b9-166">ConnectionOrientedTransportBindingElement</span></span>|<span data-ttu-id="3e7b9-167">12 \* nombre de processeurs</span><span class="sxs-lookup"><span data-stu-id="3e7b9-167">12 \* number of processors</span></span>|<span data-ttu-id="3e7b9-168">Cette propriété détermine le nombre de connexions acceptées par un transport, mais non choisies par le répartiteur ServiceModel.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-168">This property controls how many connections a transport has accepted but have not been picked up by the ServiceModel Dispatcher.</span></span> <span data-ttu-id="3e7b9-169">Pour définir cette valeur, utilisez `MaxConnections` sur la liaison ou `maxOutboundConnectionsPerEndpoint` sur l'élément de liaison.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-169">To set this value, use `MaxConnections` on the binding or `maxOutboundConnectionsPerEndpoint` on the binding element.</span></span> <span data-ttu-id="3e7b9-170">Pour plus d’informations sur <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A></span><span class="sxs-lookup"><span data-stu-id="3e7b9-170">For more information about <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A></span></span>|
|<span data-ttu-id="3e7b9-171">receiveTimeout</span><span class="sxs-lookup"><span data-stu-id="3e7b9-171">receiveTimeout</span></span>|<span data-ttu-id="3e7b9-172">SMSvcHost.exe</span><span class="sxs-lookup"><span data-stu-id="3e7b9-172">SMSvcHost.exe</span></span>|<span data-ttu-id="3e7b9-173">30 secondes</span><span class="sxs-lookup"><span data-stu-id="3e7b9-173">30 seconds</span></span>|<span data-ttu-id="3e7b9-174">Cette propriété spécifie le délai d'attente pour lire les données d'encadrement TCP et effectuer la distribution de la connexion à partir des connexions sous-jacentes.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-174">This property specifies the timeout for reading the TCP framing data and performing connection dispatching from the underlying connections.</span></span> <span data-ttu-id="3e7b9-175">Elle permet de limiter la durée pendant laquelle le service SMSvcHost.exe prend part à la lecture des données de préambule d'une connexion entrante.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-175">This exists to put a cap on the amount of time SMSvcHost.exe service is kept engaged to read the preamble data from an incoming connection.</span></span> <span data-ttu-id="3e7b9-176">Pour plus d’informations, consultez [configuration du service de partage de ports net. TCP](./feature-details/configuring-the-net-tcp-port-sharing-service.md).</span><span class="sxs-lookup"><span data-stu-id="3e7b9-176">For more information, see [Configuring the Net.TCP Port Sharing Service](./feature-details/configuring-the-net-tcp-port-sharing-service.md).</span></span>|

> [!NOTE]
> <span data-ttu-id="3e7b9-177">Ces nouvelles valeurs par défaut sont utilisées uniquement si vous déployez le service WCF sur un ordinateur avec le .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-177">These new defaults are used only if you deploy the WCF service on a machine with .NET Framework 4.5.</span></span> <span data-ttu-id="3e7b9-178">Si vous déployez le même service sur un ordinateur avec le .NET Framework 4.0, les valeurs par défaut du .NET Framework 4.0 sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-178">If you deploy the same service on a machine with .NET Framework 4.0, then the .NET Framework 4.0 defaults are used.</span></span> <span data-ttu-id="3e7b9-179">Dans ce cas, il est recommandé de configurer ces paramètres explicitement.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-179">In such cases it is recommended to configure these settings explicitly.</span></span>

## <a name="xmldictionaryreaderquotas"></a><span data-ttu-id="3e7b9-180">XmlDictionaryReaderQuotas</span><span class="sxs-lookup"><span data-stu-id="3e7b9-180">XmlDictionaryReaderQuotas</span></span>

<span data-ttu-id="3e7b9-181"><xref:System.Xml.XmlDictionaryReaderQuotas> contient des valeurs de quota configurables pour les lecteurs du dictionnaire XML qui limitent la quantité de mémoire utilisée par un encodeur lors de la création d'un message.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-181"><xref:System.Xml.XmlDictionaryReaderQuotas> contains configurable quota values for XML dictionary readers which limit the amount of memory utilized by an encoder while creating a message.</span></span> <span data-ttu-id="3e7b9-182">Bien que ces quotas soient configurables, les valeurs par défaut ont changé pour réduire le risque qu'un développeur doivent les définir explicitement.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-182">While these quotas are configurable, the default values have changed to lessen the possibility that a developer will need to set them explicitly.</span></span> <span data-ttu-id="3e7b9-183">Le quota `MaxReceivedMessageSize` n'a pas été modifié afin qu'il puisse toujours limiter la consommation de mémoire, ce qui vous évite d'avoir à gérer la complexité de <xref:System.Xml.XmlDictionaryReaderQuotas>.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-183">`MaxReceivedMessageSize` quota has not been changed so that it can still limit memory consumption preventing the need for you to deal with the complexity of the <xref:System.Xml.XmlDictionaryReaderQuotas>.</span></span> <span data-ttu-id="3e7b9-184">Le tableau suivant contient les quotas, leurs nouvelles valeurs par défaut et une brève explication de leur utilisation.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-184">The following table shows the quotas, their new default values and a brief explanation of what each quota is used for.</span></span>

|<span data-ttu-id="3e7b9-185">Nom du quota</span><span class="sxs-lookup"><span data-stu-id="3e7b9-185">Quota Name</span></span>|<span data-ttu-id="3e7b9-186">Valeur par défaut</span><span class="sxs-lookup"><span data-stu-id="3e7b9-186">Default Value</span></span>|<span data-ttu-id="3e7b9-187">Description</span><span class="sxs-lookup"><span data-stu-id="3e7b9-187">Description</span></span>|
|----------------|-------------------|-----------------|
|<xref:System.Xml.XmlDictionaryReaderQuotas.MaxArrayLength%2A>|<span data-ttu-id="3e7b9-188">Int32.MaxValue</span><span class="sxs-lookup"><span data-stu-id="3e7b9-188">Int32.MaxValue</span></span>|<span data-ttu-id="3e7b9-189">Obtient et définit la longueur maximale de tableau autorisée.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-189">Gets and sets the maximum allowed array length.</span></span> <span data-ttu-id="3e7b9-190">Ce quota limite la taille maximale d'un tableau de primitives que le lecteur XML renvoie, notamment un tableau d'octets.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-190">This quota limits the maximum size of an array of primitives that the XML reader returns, including byte arrays.</span></span> <span data-ttu-id="3e7b9-191">Ce quota ne limite pas la consommation de mémoire dans le lecteur XML lui-même, mais dans le composant qui utilise le lecteur.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-191">This quota does not limit memory consumption in the XML reader itself, but in whatever component that is using the reader.</span></span> <span data-ttu-id="3e7b9-192">Par exemple, lorsque <xref:System.Runtime.Serialization.DataContractSerializer> utilise un lecteur sécurisé avec <xref:System.Xml.XmlDictionaryReaderQuotas.MaxArrayLength%2A>, il ne désérialise pas les tableaux d'octets supérieurs à ce quota.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-192">For example, when the <xref:System.Runtime.Serialization.DataContractSerializer> uses a reader secured with <xref:System.Xml.XmlDictionaryReaderQuotas.MaxArrayLength%2A>, it does not deserialize byte arrays larger than this quota.</span></span>|
|<xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A>|<span data-ttu-id="3e7b9-193">Int32.MaxValue</span><span class="sxs-lookup"><span data-stu-id="3e7b9-193">Int32.MaxValue</span></span>|<span data-ttu-id="3e7b9-194">Obtient et définit le nombre maximal d'octets autorisés retournés pour chaque lecture.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-194">Gets and sets the maximum allowed bytes returned for each read.</span></span> <span data-ttu-id="3e7b9-195">Ce quota limite le nombre d’octets lus dans une seule opération de lecture lors de la lecture de l’étiquette de début d’élément et ses attributs.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-195">This quota limits the number of bytes that are read in a single Read operation when reading the element start tag and its attributes.</span></span> <span data-ttu-id="3e7b9-196">(Dans les cas non diffusés en continu, le nom de l'élément lui-même n'est pas compté dans le quota.)</span><span class="sxs-lookup"><span data-stu-id="3e7b9-196">(In non-streamed cases, the element name itself is not counted against the quota).</span></span> <span data-ttu-id="3e7b9-197">Un nombre trop élevé d'attributs XML risque d'utiliser un temps de traitement disproportionné parce que le caractère unique des noms d'attributs doit être vérifié.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-197">Having too many XML attributes may use up disproportionate processing time because attribute names have to be checked for uniqueness.</span></span> <span data-ttu-id="3e7b9-198"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A> atténue cette menace.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-198"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A> mitigates this threat.</span></span>|
|<xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A>|<span data-ttu-id="3e7b9-199">128 nœuds</span><span class="sxs-lookup"><span data-stu-id="3e7b9-199">128 nodes deep</span></span>|<span data-ttu-id="3e7b9-200">Ce quota limite la profondeur d'imbrication maximale des éléments XML.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-200">This quota limits the maximum nesting depth of XML elements.</span></span> <span data-ttu-id="3e7b9-201"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A> interagit avec <xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A>: le lecteur conserve toujours des données en mémoire pour l'élément actuel et tous ses ancêtres, donc la consommation de mémoire maximale du lecteur est proportionnelle au produit de ces deux paramètres.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-201"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A> interacts with <xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A>: the reader always keeps data in memory for the current element and all of its ancestors, so the maximum memory consumption of the reader is proportional to the product of these two settings.</span></span> <span data-ttu-id="3e7b9-202">Lors de la désérialisation d'un graphique d'objets très imbriqué, le désérialiseur est obligé d'accéder à la pile entière et de lever une exception <xref:System.StackOverflowException>irrécupérable.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-202">When deserializing a deeply-nested object graph, the deserializer is forced to access the entire stack and throw an unrecoverable <xref:System.StackOverflowException>.</span></span> <span data-ttu-id="3e7b9-203">Une corrélation directe existe entre l'imbrication XML et l'imbrication d'objets pour <xref:System.Runtime.Serialization.DataContractSerializer> et <xref:System.Xml.Serialization.XmlSerializer>.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-203">A direct correlation exists between XML nesting and object nesting for both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer>.</span></span> <span data-ttu-id="3e7b9-204"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A> permet d'atténuer cette menace.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-204"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A> is used to mitigate this threat.</span></span>|
|<xref:System.Xml.XmlDictionaryReaderQuotas.MaxNameTableCharCount%2A>|<span data-ttu-id="3e7b9-205">Int32.MaxValue</span><span class="sxs-lookup"><span data-stu-id="3e7b9-205">Int32.MaxValue</span></span>|<span data-ttu-id="3e7b9-206">Ce quota limite le nombre maximal de caractères autorisés dans un nametable.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-206">This quota limits the maximum number of characters allowed in a nametable.</span></span> <span data-ttu-id="3e7b9-207">Le nametable contient certaines chaînes (telles que des espaces de noms et des préfixes) rencontrées lors du traitement d'un document XML.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-207">The nametable contains certain strings (such as namespaces and prefixes) that are encountered when processing an XML document.</span></span> <span data-ttu-id="3e7b9-208">Étant donné que ces chaînes sont mises en mémoire tampon, ce quota permet d'empêcher une mise en mémoire tampon excessive lorsqu'une diffusion en continu est prévue.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-208">As these strings are buffered in memory, this quota is used to prevent excessive buffering when streaming is expected.</span></span>|
|<xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>|<span data-ttu-id="3e7b9-209">Int32.MaxValue</span><span class="sxs-lookup"><span data-stu-id="3e7b9-209">Int32.MaxValue</span></span>|<span data-ttu-id="3e7b9-210">Ce quota limite la taille maximale de la chaîne que le lecteur XML renvoie.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-210">This quota limits the maximum string size that the XML reader returns.</span></span> <span data-ttu-id="3e7b9-211">Ce quota ne limite pas la consommation de mémoire dans le lecteur XML lui-même, mais dans le composant qui utilise le lecteur.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-211">This quota does not limit memory consumption in the XML reader itself, but in the component that is using the reader.</span></span> <span data-ttu-id="3e7b9-212">Par exemple, lorsque <xref:System.Runtime.Serialization.DataContractSerializer> utilise un lecteur sécurisé avec <xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>, il ne désérialise pas les chaînes supérieures à ce quota.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-212">For example, when the <xref:System.Runtime.Serialization.DataContractSerializer> uses a reader secured with <xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>, it does not deserialize strings larger than this quota.</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="3e7b9-213">Pour plus d’informations sur la sécurisation de vos données, consultez « Utilisation de XML en toute sécurité » sous [considérations de sécurité pour les données](./feature-details/security-considerations-for-data.md) .</span><span class="sxs-lookup"><span data-stu-id="3e7b9-213">Refer to "Using XML Safely" under [Security Considerations for Data](./feature-details/security-considerations-for-data.md) for more information about securing your data.</span></span>

> [!NOTE]
> <span data-ttu-id="3e7b9-214">Ces nouvelles valeurs par défaut sont utilisées uniquement si vous déployez le service WCF sur un ordinateur avec le .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-214">These new defaults are used only if you deploy the WCF service on a machine with .NET Framework 4.5.</span></span> <span data-ttu-id="3e7b9-215">Si vous déployez le même service sur un ordinateur avec le .NET Framework 4.0, les valeurs par défaut du .NET Framework 4.0 sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-215">If you deploy the same service on a machine with .NET Framework 4.0, then the .NET Framework 4.0 defaults are used.</span></span> <span data-ttu-id="3e7b9-216">Dans ce cas, il est recommandé de configurer ces paramètres explicitement.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-216">In such cases it is recommended to configure these settings explicitly.</span></span>

## <a name="wcf-configuration-validation"></a><span data-ttu-id="3e7b9-217">Validation de configuration WCF</span><span class="sxs-lookup"><span data-stu-id="3e7b9-217">WCF Configuration Validation</span></span>

<span data-ttu-id="3e7b9-218">Dans le cadre du processus de génération dans Visual Studio, les fichiers de configuration WCF sont maintenant validés.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-218">As part of the build process within Visual Studio, WCF configuration files are now validated.</span></span> <span data-ttu-id="3e7b9-219">Une liste d’erreurs ou d’avertissements de validation s’affiche dans Visual Studio si la validation échoue.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-219">A list of validation errors or warnings are displayed in Visual Studio if the validation fails.</span></span>

## <a name="xml-editor-tooltips"></a><span data-ttu-id="3e7b9-220">Info-bulles de l'éditeur XML</span><span class="sxs-lookup"><span data-stu-id="3e7b9-220">XML Editor Tooltips</span></span>

<span data-ttu-id="3e7b9-221">Pour aider les développeurs de services WCF nouveaux et existants à configurer leurs services, l'Éditeur XML de Visual Studio fournit maintenant des info-bulles pour chaque élément de configuration et ses propriétés qui fait partie du fichier de configuration du service.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-221">In order to help new and existing WCF service developers to configure their services, the Visual Studio XML editor now provides tooltips for every configuration element and its properties that is part of the service configuration file.</span></span>

## <a name="basichttpbinding-improvements"></a><span data-ttu-id="3e7b9-222">Améliorations de BasicHttpBinding</span><span class="sxs-lookup"><span data-stu-id="3e7b9-222">BasicHttpBinding Improvements</span></span>

1. <span data-ttu-id="3e7b9-223">Permet à un seul point de terminaison WCF de répondre à différents modes d'authentification.</span><span class="sxs-lookup"><span data-stu-id="3e7b9-223">Enables a single WCF endpoint to respond to different authentication modes.</span></span>

2. <span data-ttu-id="3e7b9-224">Permet aux paramètres de sécurité d'un service WCF d'être contrôlés par IIS</span><span class="sxs-lookup"><span data-stu-id="3e7b9-224">Enables a WCF service’s security settings to be controlled by IIS</span></span>
