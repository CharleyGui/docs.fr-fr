---
title: Création de liaisons définies par l’utilisateur
ms.date: 03/30/2017
helpviewer_keywords:
- user-defined bindings [WCF]
ms.assetid: c4960675-d701-4bc9-b400-36a752fdd08b
ms.openlocfilehash: 34100569dc5cd5a340abca66fedca40ba21c1e0b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79185642"
---
# <a name="creating-user-defined-bindings"></a><span data-ttu-id="0ff2b-102">Création de liaisons définies par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="0ff2b-102">Creating User-Defined Bindings</span></span>
<span data-ttu-id="0ff2b-103">Il existe plusieurs méthodes pour créer des liaisons non fournies par le système :</span><span class="sxs-lookup"><span data-stu-id="0ff2b-103">There are several ways to create bindings not provided by the system:</span></span>  
  
- <span data-ttu-id="0ff2b-104">Créez une liaison personnalisée basés sur la classe <xref:System.ServiceModel.Channels.CustomBinding> qui est un conteneur que vous remplissez avec les éléments de liaison.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-104">Create a custom binding, based on the <xref:System.ServiceModel.Channels.CustomBinding> class, which is a container that you fill with binding elements.</span></span> <span data-ttu-id="0ff2b-105">La liaison personnalisée est ensuite ajoutée à un point de terminaison de service.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-105">The custom binding is then added to a service endpoint.</span></span> <span data-ttu-id="0ff2b-106">Vous pouvez créer la liaison personnalisée soit par programmation soit dans un fichier de configuration d’application.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-106">You can create the custom binding either programmatically or in an application configuration file.</span></span> <span data-ttu-id="0ff2b-107">Pour utiliser un élément de liaison d’un fichier de configuration d’application, l’élément doit étendre les liaisons personnalisées <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-107">To use a binding element from an application configuration file, the binding element must extend <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span></span> <span data-ttu-id="0ff2b-108">Pour plus d’informations sur les fixations personnalisées, voir [liaisons personnalisées](custom-bindings.md) et <xref:System.ServiceModel.Channels.CustomBinding>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-108">For more information about custom bindings, see [Custom Bindings](custom-bindings.md) and <xref:System.ServiceModel.Channels.CustomBinding>.</span></span>  
  
- <span data-ttu-id="0ff2b-109">Vous pouvez créer une classe qui dérive d’une liaison standard.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-109">You can create a class that derives from a standard binding.</span></span> <span data-ttu-id="0ff2b-110">Par exemple, vous pouvez dériver une classe de <xref:System.ServiceModel.WSHttpBinding> et remplacer la méthode <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> pour obtenir les éléments de liaison et insérer un élément de liaison personnalisé ou établir une valeur particulière pour la sécurité.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-110">For example, you can derive a class from <xref:System.ServiceModel.WSHttpBinding> and override <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> method to obtain the binding elements and insert a custom binding element or establish a particular value for security.</span></span>  
  
- <span data-ttu-id="0ff2b-111">Vous pouvez créer un nouveau type <xref:System.ServiceModel.Channels.Binding> pour contrôler complètement l’ensemble de l’implémentation de la liaison.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-111">You can create a new <xref:System.ServiceModel.Channels.Binding> type to completely control the entire binding implementation.</span></span>  
  
## <a name="the-order-of-binding-elements"></a><span data-ttu-id="0ff2b-112">Ordre des éléments de liaison</span><span class="sxs-lookup"><span data-stu-id="0ff2b-112">The Order of Binding Elements</span></span>  
 <span data-ttu-id="0ff2b-113">Chaque élément de liaison représente une étape de traitement lors de l’envoi ou de la réception des messages.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-113">Each binding element represents a processing step when sending or receiving messages.</span></span> <span data-ttu-id="0ff2b-114">Pendant l’exécution, les éléments de liaison créent les canaux et les écouteurs nécessaires pour générer des piles de canaux entrants et sortants.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-114">At runtime, binding elements create the channels and listeners necessary to build outgoing and incoming channel stacks.</span></span>  
  
 <span data-ttu-id="0ff2b-115">Il y a trois types principaux d'éléments de liaison : les éléments de liaison de protocole, les éléments de liaison d'encodage et les éléments de liaison de transport.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-115">There are three main types of binding elements: Protocol Binding Elements, Encoding Binding Elements and Transport Binding Elements.</span></span>  
  
 <span data-ttu-id="0ff2b-116">Éléments de liaison de protocole – Ces éléments représentent des étapes de traitement de niveau supérieur qui agissent sur les messages.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-116">Protocol Binding Elements – These elements represent higher-level processing steps that act on messages.</span></span> <span data-ttu-id="0ff2b-117">Les canaux et les écouteurs créés par ces éléments de liaison peuvent ajouter, supprimer ou modifier le contenu du message.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-117">Channels and listeners created by these binding elements can add, remove, or modify the message content.</span></span> <span data-ttu-id="0ff2b-118">Une liaison donnée peut avoir un nombre arbitraire d’éléments de liaison de protocole, chacun héritant d’un objet <xref:System.ServiceModel.Channels.BindingElement>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-118">A given binding may have an arbitrary number of protocol binding elements, each inheriting from <xref:System.ServiceModel.Channels.BindingElement>.</span></span> <span data-ttu-id="0ff2b-119">Windows Communication Foundation (WCF) comprend plusieurs <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> éléments <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>contraignants de protocole, y compris le .</span><span class="sxs-lookup"><span data-stu-id="0ff2b-119">Windows Communication Foundation (WCF) includes several protocol binding elements, including the <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> and the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span></span>  
  
 <span data-ttu-id="0ff2b-120">Élément de liaison d’encodage – Ces éléments représentent des transformations entre un message et un encodage prêt pour la transmission sur le fil.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-120">Encoding Binding Element – These elements represent transformations between a message and an encoding ready for transmission on the wire.</span></span> <span data-ttu-id="0ff2b-121">Les fixations WCF typiques comprennent exactement un élément de liaison codage.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-121">Typical WCF bindings include exactly one encoding binding element.</span></span> <span data-ttu-id="0ff2b-122">Des exemples d’éléments de liaison d’encodage incluent <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement> et <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-122">Examples of encoding binding elements include the <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, and the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span></span> <span data-ttu-id="0ff2b-123">Si un élément de liaison d'encodage n'est pas spécifié pour une liaison, un encodage par défaut est utilisé.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-123">If an encoding binding element is not specified for a binding, a default encoding is used.</span></span> <span data-ttu-id="0ff2b-124">La valeur par défaut est Text lorsque le transport est HTTP, sinon la valeur est Binary.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-124">The default is text when the transport is HTTP and binary otherwise.</span></span>  
  
 <span data-ttu-id="0ff2b-125">Élément de liaison de transport – Ces éléments représentent la transmission d’un message d’encodage sur un protocole de transport.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-125">Transport Binding Element – These elements represent the transmission of an encoding message on a transport protocol.</span></span> <span data-ttu-id="0ff2b-126">Les fixations typiques de WCF incluent exactement <xref:System.ServiceModel.Channels.TransportBindingElement>un élément de liaison de transport, qui hérite de .</span><span class="sxs-lookup"><span data-stu-id="0ff2b-126">Typical WCF bindings include exactly one transport binding element, which inherits from <xref:System.ServiceModel.Channels.TransportBindingElement>.</span></span> <span data-ttu-id="0ff2b-127">Des exemples d’éléments de liaison de transport incluent <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, <xref:System.ServiceModel.Channels.HttpTransportBindingElement> et <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-127">Examples of transport binding elements include the <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, the <xref:System.ServiceModel.Channels.HttpTransportBindingElement>, and the <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span></span>  
  
 <span data-ttu-id="0ff2b-128">Lors de la création de nouvelles liaisons, l’ordre des éléments de liaison ajoutés est important.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-128">When creating new bindings, the order of the added binding elements is important.</span></span> <span data-ttu-id="0ff2b-129">Ajoutez toujours les éléments de liaison dans l'ordre suivant :</span><span class="sxs-lookup"><span data-stu-id="0ff2b-129">Always add binding elements in the following order:</span></span>  
  
|<span data-ttu-id="0ff2b-130">Couche</span><span class="sxs-lookup"><span data-stu-id="0ff2b-130">Layer</span></span>|<span data-ttu-id="0ff2b-131">Options</span><span class="sxs-lookup"><span data-stu-id="0ff2b-131">Options</span></span>|<span data-ttu-id="0ff2b-132">Obligatoire</span><span class="sxs-lookup"><span data-stu-id="0ff2b-132">Required</span></span>|  
|-----------|-------------|--------------|  
|<span data-ttu-id="0ff2b-133">Flux de transaction</span><span class="sxs-lookup"><span data-stu-id="0ff2b-133">Transaction Flow</span></span>|<xref:System.ServiceModel.Channels.TransactionFlowBindingElement?displayProperty=nameWithType>|<span data-ttu-id="0ff2b-134">Non </span><span class="sxs-lookup"><span data-stu-id="0ff2b-134">No</span></span>|  
|<span data-ttu-id="0ff2b-135">Fiabilité</span><span class="sxs-lookup"><span data-stu-id="0ff2b-135">Reliability</span></span>|<xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType>|<span data-ttu-id="0ff2b-136">Non </span><span class="sxs-lookup"><span data-stu-id="0ff2b-136">No</span></span>|  
|<span data-ttu-id="0ff2b-137">Sécurité</span><span class="sxs-lookup"><span data-stu-id="0ff2b-137">Security</span></span>|<xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType>|<span data-ttu-id="0ff2b-138">Non </span><span class="sxs-lookup"><span data-stu-id="0ff2b-138">No</span></span>|  
|<span data-ttu-id="0ff2b-139">Duplex composite</span><span class="sxs-lookup"><span data-stu-id="0ff2b-139">Composite Duplex</span></span>|<xref:System.ServiceModel.Channels.CompositeDuplexBindingElement?displayProperty=nameWithType>|<span data-ttu-id="0ff2b-140">Non </span><span class="sxs-lookup"><span data-stu-id="0ff2b-140">No</span></span>|  
|<span data-ttu-id="0ff2b-141">Encodage</span><span class="sxs-lookup"><span data-stu-id="0ff2b-141">Encoding</span></span>|<span data-ttu-id="0ff2b-142">Text, Binary, MTOM, Custom</span><span class="sxs-lookup"><span data-stu-id="0ff2b-142">Text, Binary, MTOM, Custom</span></span>|<span data-ttu-id="0ff2b-143">Oui\*</span><span class="sxs-lookup"><span data-stu-id="0ff2b-143">Yes\*</span></span>|  
|<span data-ttu-id="0ff2b-144">Transport</span><span class="sxs-lookup"><span data-stu-id="0ff2b-144">Transport</span></span>|<span data-ttu-id="0ff2b-145">TCP, Named Pipes, HTTP, HTTPS, MSMQ, Custom</span><span class="sxs-lookup"><span data-stu-id="0ff2b-145">TCP, Named Pipes, HTTP, HTTPS, MSMQ, Custom</span></span>|<span data-ttu-id="0ff2b-146">Oui</span><span class="sxs-lookup"><span data-stu-id="0ff2b-146">Yes</span></span>|  
  
<span data-ttu-id="0ff2b-147">\*Étant donné qu’un codage est nécessaire pour chaque liaison, si un codage n’est pas spécifié, WCF ajoute un codage par défaut pour vous.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-147">\*Because an encoding is required for each binding, if an encoding is not specified, WCF adds a default encoding for you.</span></span> <span data-ttu-id="0ff2b-148">La valeur par défaut est Text/XML pour les transports HTTP et HTTPS, et Binary pour les autres transports.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-148">The default is Text/XML for the HTTP and HTTPS transports, and Binary otherwise.</span></span>  
  
## <a name="creating-a-new-binding-element"></a><span data-ttu-id="0ff2b-149">Création d’un nouvel élément de liaison</span><span class="sxs-lookup"><span data-stu-id="0ff2b-149">Creating a new Binding Element</span></span>  
 <span data-ttu-id="0ff2b-150">En plus des types <xref:System.ServiceModel.Channels.BindingElement> dérivés de celui qui sont fournis par WCF, vous pouvez créer vos propres éléments de liaison.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-150">In addition to the types derived from <xref:System.ServiceModel.Channels.BindingElement> that are provided by WCF, you can create your own binding elements.</span></span> <span data-ttu-id="0ff2b-151">Vous pouvez personnaliser la façon dont la pile des liaisons est créée et les composants qu'elle inclut en créant votre propre <xref:System.ServiceModel.Channels.BindingElement> qui peut être composé dans la pile avec les autres types fournis par le système.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-151">This lets you customize the way the stack of bindings is created and the components that go in it by creating your own <xref:System.ServiceModel.Channels.BindingElement> that can be composed with the other system-provided types in the stack.</span></span>  
  
 <span data-ttu-id="0ff2b-152">Par exemple, si vous implémentez un `LoggingBindingElement` qui fournit la capacité d'enregistrer le message dans une base de données, vous devez le placer au-dessus d'un canal de transport dans la pile des canaux.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-152">For example, if you implement a `LoggingBindingElement` that provides the ability to log the message to a database, you must place it above a transport channel in the channel stack.</span></span> <span data-ttu-id="0ff2b-153">Dans ce cas, l'application crée une liaison personnalisée qui compose le `LoggingBindingElement` avec `TcpTransportBindingElement`, comme dans l'exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-153">In this case, the application creates a custom binding that composed the `LoggingBindingElement` with `TcpTransportBindingElement`, as in the following example.</span></span>  
  
```csharp  
Binding customBinding = new CustomBinding(  
  new LoggingBindingElement(),
  new TcpTransportBindingElement()  
);  
```  
  
 <span data-ttu-id="0ff2b-154">La façon dont vous écrivez votre nouvel élément de liaison dépend de ses fonctionnalités exactes.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-154">How you write your new binding element depends on its exact functionality.</span></span> <span data-ttu-id="0ff2b-155">L’un des échantillons, [Transport: UDP](../samples/transport-udp.md), fournit une description détaillée de la façon de mettre en œuvre un type d’élément contraignant.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-155">One of the samples, [Transport: UDP](../samples/transport-udp.md), provides a detailed description of how to implement one kind of binding element.</span></span>  
  
## <a name="creating-a-new-binding"></a><span data-ttu-id="0ff2b-156">Création d’une nouvelle liaison</span><span class="sxs-lookup"><span data-stu-id="0ff2b-156">Creating a New Binding</span></span>  
 <span data-ttu-id="0ff2b-157">Un élément de liaison créé par l’utilisateur peut être utilisé de deux façons.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-157">A user-created binding element can be used in two ways.</span></span> <span data-ttu-id="0ff2b-158">La section précédente illustre la première méthode : via une liaison personnalisée.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-158">The previous section illustrates the first way: through a custom binding.</span></span> <span data-ttu-id="0ff2b-159">Une liaison personnalisée permet à l’utilisateur de créer sa propre la liaison basée sur un jeu arbitraire d’éléments de liaison, y compris ceux créés par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-159">A custom binding allows the user to create their own binding based on an arbitrary set of binding elements, including user-created ones.</span></span>  
  
 <span data-ttu-id="0ff2b-160">Si vous utilisez la liaison dans plusieurs applications, créez votre propre liaison et étendez <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-160">If you use the binding in more than one application, create your own binding and extend the <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="0ff2b-161">Cela évite de créer manuellement une liaison personnalisée à chaque fois que vous souhaitez l’utiliser.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-161">This avoids manually creating a custom binding every time you want to use it.</span></span> <span data-ttu-id="0ff2b-162">Une liaison définie par l’utilisateur vous permet de définir le comportement de la liaison et d’inclure des éléments de liaison définis par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-162">A user-defined binding allows you to define the binding’s behavior and include user-defined binding elements.</span></span> <span data-ttu-id="0ff2b-163">Et il est *pré-emballé*: vous n’avez pas à reconstruire la liaison chaque fois que vous l’utilisez.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-163">And it is *pre-packaged*: you do not have to rebuild the binding every time you use it.</span></span>  
  
 <span data-ttu-id="0ff2b-164">Au minimum, une liaison définie par l’utilisateur doit implémenter la méthode <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> et la propriété <xref:System.ServiceModel.Channels.Binding.Scheme%2A>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-164">At a minimum, a user-defined binding must implement the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
 <span data-ttu-id="0ff2b-165">La méthode <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> retourne un nouveau <xref:System.ServiceModel.Channels.BindingElementCollection> qui contient les éléments de liaison pour la liaison.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-165">The <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method returns a new <xref:System.ServiceModel.Channels.BindingElementCollection> that contains the binding elements for the binding.</span></span> <span data-ttu-id="0ff2b-166">La collection est ordonnée et doit contenir en premier les éléments de liaison de protocole, suivis par l'élément de liaison d'encodage, suivi par l'élément de liaison de transport.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-166">The collection is ordered, and should contain the protocol binding elements first, followed by the encoding binding element, followed by the transport binding element.</span></span> <span data-ttu-id="0ff2b-167">Lorsque vous utilisez les éléments contraignants fournis par le système WCF, vous devez suivre les règles de commande d’éléments contraignants spécifiées dans [les liaisons personnalisées](custom-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="0ff2b-167">When using the WCF system-provided binding elements, you must follow the binding element ordering rules specified in [Custom Bindings](custom-bindings.md).</span></span> <span data-ttu-id="0ff2b-168">Cette collection ne doit jamais référencer des objets référencés dans la classe de liaison définie par l’utilisateur ; par conséquent, les auteurs de la liaison doivent retourner un `Clone()` de <xref:System.ServiceModel.Channels.BindingElementCollection> sur chaque appel à <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-168">This collection should never reference objects referenced within the user-defined binding class; consequently, binding authors must return a `Clone()` of the <xref:System.ServiceModel.Channels.BindingElementCollection> on each call to <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span></span>  
  
 <span data-ttu-id="0ff2b-169">La propriété <xref:System.ServiceModel.Channels.Binding.Scheme%2A> représente le modèle URI pour le protocole de transport utilisé sur la liaison.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-169">The <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property represents the URI scheme for the transport protocol in use on the binding.</span></span> <span data-ttu-id="0ff2b-170">Par exemple, le *WSHttpBinding* et le *netTcpBinding* retour "http" et <xref:System.ServiceModel.Channels.Binding.Scheme%2A> "net.tcp" de leurs propriétés respectives.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-170">For example, the *WSHttpBinding* and the *NetTcpBinding* return "http" and "net.tcp" from their respective <xref:System.ServiceModel.Channels.Binding.Scheme%2A> properties.</span></span>  
  
 <span data-ttu-id="0ff2b-171">Pour une liste exhaustive des méthodes et des propriétés optionnelles relatives aux liaisons définies par l'utilisateur, consultez <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-171">For a complete list of optional methods and properties for user-defined bindings, see <xref:System.ServiceModel.Channels.Binding>.</span></span>  
  
### <a name="example"></a><span data-ttu-id="0ff2b-172"> Exemple</span><span class="sxs-lookup"><span data-stu-id="0ff2b-172">Example</span></span>  
 <span data-ttu-id="0ff2b-173">Cet exemple implémente la liaison de profil dans `SampleProfileUdpBinding`, lequel dérive de <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-173">This example implements profile binding in `SampleProfileUdpBinding`, which derives from <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="0ff2b-174">Le `SampleProfileUdpBinding` contient jusqu’à quatre éléments contraignants `UdpTransportBindingElement`en son sein: un utilisateur créé; et trois système `TextMessageEncodingBindingElement`fournis: `CompositeDuplexBindingElement` `ReliableSessionBindingElement`, , et .</span><span class="sxs-lookup"><span data-stu-id="0ff2b-174">The `SampleProfileUdpBinding` contains up to four binding elements within it: one user-created `UdpTransportBindingElement`; and three system-provided: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`, and `ReliableSessionBindingElement`.</span></span>  
  
```csharp
public override BindingElementCollection CreateBindingElements()  
{
    BindingElementCollection bindingElements = new BindingElementCollection();  
    if (ReliableSessionEnabled)  
    {  
        bindingElements.Add(session);  
        bindingElements.Add(compositeDuplex);  
    }  
    bindingElements.Add(encoding);  
    bindingElements.Add(transport);  
    return bindingElements.Clone();  
}  
```  
  
## <a name="security-restrictions-with-duplex-contracts"></a><span data-ttu-id="0ff2b-175">Restrictions de sécurité avec les contrats duplex</span><span class="sxs-lookup"><span data-stu-id="0ff2b-175">Security Restrictions with Duplex Contracts</span></span>  
 <span data-ttu-id="0ff2b-176">Tous les éléments de liaison ne sont pas compatibles les uns avec les autres.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-176">Not all binding elements are compatible with each other.</span></span> <span data-ttu-id="0ff2b-177">Notamment, il existe des restrictions concernant les éléments de liaison de sécurité en cas d'utilisation avec les contrats duplex.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-177">In particular, there are some restrictions on security binding elements when used with duplex contracts.</span></span>  
  
### <a name="one-shot-security"></a><span data-ttu-id="0ff2b-178">Sécurité « one-shot »</span><span class="sxs-lookup"><span data-stu-id="0ff2b-178">One-Shot Security</span></span>  
 <span data-ttu-id="0ff2b-179">Vous pouvez implémenter la sécurité « one-shot », où toutes les `negotiateServiceCredential` informations \<de sécurité nécessaires sont `false`envoyées dans un seul message, en définissant l’attribut du message> élément de configuration à .</span><span class="sxs-lookup"><span data-stu-id="0ff2b-179">You can implement "one-shot" security, where all the necessary security credentials are sent in a single message, by setting the `negotiateServiceCredential` attribute of the \<message> configuration element to `false`.</span></span>  
  
 <span data-ttu-id="0ff2b-180">L'authentification « one-shot » ne fonctionne pas avec les contrats duplex.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-180">One-shot authentication does not work with duplex contracts.</span></span>  
  
 <span data-ttu-id="0ff2b-181">Pour les contrats de demande-réponse, l’authentification « one-shot » fonctionne uniquement si la pile des liaisons au-dessous de l’élément de liaison de sécurité prend en charge la création d’instances <xref:System.ServiceModel.Channels.IRequestChannel> ou <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-181">For Request-Reply contracts, one-shot authentication works only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="0ff2b-182">Pour les contrats unidirectionnels, l’authentification « one-shot » fonctionne si la pile des liaisons au-dessous de l’élément de liaison de sécurité prend en charge la création d’instances <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> ou <xref:System.ServiceModel.Channels.IOutputSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-182">For one-way contracts, one-shot authentication works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> or <xref:System.ServiceModel.Channels.IOutputSessionChannel> instances.</span></span>  
  
### <a name="cookie-mode-security-context-tokens"></a><span data-ttu-id="0ff2b-183">Jetons de contexte de sécurité en mode Cookie</span><span class="sxs-lookup"><span data-stu-id="0ff2b-183">Cookie-mode Security Context Tokens</span></span>  
 <span data-ttu-id="0ff2b-184">Les jetons de contexte de sécurité en mode Cookie ne peuvent pas être utilisés avec les contrats duplex.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-184">Cookie mode security context tokens cannot be used with duplex contracts.</span></span>  
  
 <span data-ttu-id="0ff2b-185">Pour les contrats de demande-réponse, les jetons de contexte de sécurité en mode Cookie fonctionnent uniquement si la pile des liaisons au-dessous de l'élément de liaison de sécurité prend en charge la création d'instances <xref:System.ServiceModel.Channels.IRequestChannel> ou <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-185">For Request-Reply contracts, cookie-mode security context tokens work only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="0ff2b-186">Pour les contrats unidirectionnels, les jetons de contexte de sécurité en mode Cookie fonctionnent si la pile des liaisons au-dessous de l'élément de liaison de sécurité prend en charge la création d'instances <xref:System.ServiceModel.Channels.IRequestChannel> ou <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-186">For one-way contracts, cookie-mode security context tokens works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
### <a name="session-mode-security-context-tokens"></a><span data-ttu-id="0ff2b-187">Jetons de contexte de sécurité en mode session</span><span class="sxs-lookup"><span data-stu-id="0ff2b-187">Session-mode Security Context Tokens</span></span>  
 <span data-ttu-id="0ff2b-188">Le jeton de contexte de sécurité en mode session fonctionne pour les contrats duplex si la pile des liaisons au-dessous de l’élément de liaison de sécurité prend en charge la création d’instances <xref:System.ServiceModel.Channels.IDuplexChannel> ou <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-188">Session mode SCT works for duplex contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel> or <xref:System.ServiceModel.Channels.IDuplexSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="0ff2b-189">Le jeton de contexte de sécurité en mode session fonctionne pour les contrats de demande-réponse si la pile des liaisons au-dessous de l'élément de liaison de sécurité prend en charge la création d'instances <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> ou <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-189">Session mode SCT works for Request-Reply contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel>, instances.</span></span>  
  
 <span data-ttu-id="0ff2b-190">Le jeton de contexte de sécurité en mode session fonctionne pour les contrats unidirectionnels si la pile des liaisons au-dessous de l’élément de liaison de sécurité prend en charge la création d’instances <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> ou <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-190">Session mode SCT works for 1-way contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
## <a name="deriving-from-a-standard-binding"></a><span data-ttu-id="0ff2b-191">Dérivation à partir d’une liaison standard</span><span class="sxs-lookup"><span data-stu-id="0ff2b-191">Deriving from a Standard Binding</span></span>  
 <span data-ttu-id="0ff2b-192">Au lieu de créer une classe de liaison totalement nouvelle, il est possible d’étendre l’une des liaisons fournies par le système existantes.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-192">Instead of creating an entirely new binding class, it may be possible for you to extend one of the existing system-provided bindings.</span></span> <span data-ttu-id="0ff2b-193">Comme dans le cas précédent, vous devez substituer la méthode <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> et la propriété <xref:System.ServiceModel.Channels.Binding.Scheme%2A>.</span><span class="sxs-lookup"><span data-stu-id="0ff2b-193">Much like the preceding case, you must override the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0ff2b-194">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="0ff2b-194">See also</span></span>

- <xref:System.ServiceModel.Channels.Binding>
- [<span data-ttu-id="0ff2b-195">Liaisons personnalisées</span><span class="sxs-lookup"><span data-stu-id="0ff2b-195">Custom Bindings</span></span>](custom-bindings.md)
