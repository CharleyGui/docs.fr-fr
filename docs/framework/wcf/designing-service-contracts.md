---
title: Conception de contrats de service
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- service contracts [WCF]
ms.assetid: 8e89cbb9-ac84-4f0d-85ef-0eb6be0022fd
ms.openlocfilehash: 27f867bbf079c2e202d93425ddb951fc0df7784a
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/15/2019
ms.locfileid: "72318381"
---
# <a name="designing-service-contracts"></a><span data-ttu-id="a9029-102">Conception de contrats de service</span><span class="sxs-lookup"><span data-stu-id="a9029-102">Designing Service Contracts</span></span>
<span data-ttu-id="a9029-103">Cette rubrique explique ce que sont les contrats de service, comment ils sont définis, quelles opérations sont disponibles (et les implications des échanges de messages sous-jacents), quels types de données sont utilisés et d'autres aspects qui vous aident à concevoir des opérations qui répondent aux spécifications de votre scénario.</span><span class="sxs-lookup"><span data-stu-id="a9029-103">This topic describes what service contracts are, how they are defined, what operations are available (and the implications for the underlying message exchanges), what data types are used, and other issues that help you design operations that satisfy the requirements of your scenario.</span></span>  
  
## <a name="creating-a-service-contract"></a><span data-ttu-id="a9029-104">Création d'un contrat de service</span><span class="sxs-lookup"><span data-stu-id="a9029-104">Creating a Service Contract</span></span>  
 <span data-ttu-id="a9029-105">Les services exposent un certain nombre d'opérations.</span><span class="sxs-lookup"><span data-stu-id="a9029-105">Services expose a number of operations.</span></span> <span data-ttu-id="a9029-106">Dans les applications Windows Communication Foundation (WCF), définissez les opérations en créant une méthode et en la marquant avec l’attribut <xref:System.ServiceModel.OperationContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="a9029-106">In Windows Communication Foundation (WCF) applications, define the operations by creating a method and marking it with the <xref:System.ServiceModel.OperationContractAttribute> attribute.</span></span> <span data-ttu-id="a9029-107">Ensuite, pour créer un contrat de service, groupez vos opérations en les déclarant dans une interface marquée avec l'attribut <xref:System.ServiceModel.ServiceContractAttribute> ou en les définissant dans une classe marquée avec le même attribut.</span><span class="sxs-lookup"><span data-stu-id="a9029-107">Then, to create a service contract, group together your operations, either by declaring them within an interface marked with the <xref:System.ServiceModel.ServiceContractAttribute> attribute, or by defining them in a class marked with the same attribute.</span></span> <span data-ttu-id="a9029-108">(Pour obtenir un exemple de base, consultez [procédure : définition d’un contrat de service](how-to-define-a-wcf-service-contract.md).)</span><span class="sxs-lookup"><span data-stu-id="a9029-108">(For a basic example, see [How to: Define a Service Contract](how-to-define-a-wcf-service-contract.md).)</span></span>  
  
 <span data-ttu-id="a9029-109">Toutes les méthodes qui n’ont pas d’attribut <xref:System.ServiceModel.OperationContractAttribute> ne sont pas des opérations de service et ne sont pas exposées par les services WCF.</span><span class="sxs-lookup"><span data-stu-id="a9029-109">Any methods that do not have a <xref:System.ServiceModel.OperationContractAttribute> attribute are not service operations and are not exposed by WCF services.</span></span>  
  
 <span data-ttu-id="a9029-110">Cette rubrique décrit les points de décision suivants lors de la conception d'un contrat de service :</span><span class="sxs-lookup"><span data-stu-id="a9029-110">This topic describes the following decision points when designing a service contract:</span></span>  
  
- <span data-ttu-id="a9029-111">S'il faut utiliser des classes ou des interfaces.</span><span class="sxs-lookup"><span data-stu-id="a9029-111">Whether to use classes or interfaces.</span></span>  
  
- <span data-ttu-id="a9029-112">Comment spécifier les types de données que vous souhaitez échanger.</span><span class="sxs-lookup"><span data-stu-id="a9029-112">How to specify the data types you want to exchange.</span></span>  
  
- <span data-ttu-id="a9029-113">Les types de modèles d’échange que vous pouvez utiliser.</span><span class="sxs-lookup"><span data-stu-id="a9029-113">The types of exchange patterns you can use.</span></span>  
  
- <span data-ttu-id="a9029-114">Si vous pouvez inclure des exigences de sécurité explicites dans le contrat.</span><span class="sxs-lookup"><span data-stu-id="a9029-114">Whether you can make explicit security requirements part of the contract.</span></span>  
  
- <span data-ttu-id="a9029-115">Les restrictions d'entrée et de sortie d'opération.</span><span class="sxs-lookup"><span data-stu-id="a9029-115">The restrictions for operation inputs and outputs.</span></span>  
  
## <a name="classes-or-interfaces"></a><span data-ttu-id="a9029-116">Classes ou interfaces</span><span class="sxs-lookup"><span data-stu-id="a9029-116">Classes or Interfaces</span></span>  
 <span data-ttu-id="a9029-117">Les classes et les interfaces représentent un regroupement de fonctionnalités et, par conséquent, peuvent être utilisées pour définir un contrat de service WCF.</span><span class="sxs-lookup"><span data-stu-id="a9029-117">Both classes and interfaces represent a grouping of functionality and, therefore, both can be used to define a WCF service contract.</span></span> <span data-ttu-id="a9029-118">Toutefois, il est recommandé d'utiliser des interfaces car elles modèlent directement des contrats de service.</span><span class="sxs-lookup"><span data-stu-id="a9029-118">However, it is recommended that you use interfaces because they directly model service contracts.</span></span> <span data-ttu-id="a9029-119">Sans implémentation, les interfaces ne font que définir un groupement de méthodes avec certaines signatures.</span><span class="sxs-lookup"><span data-stu-id="a9029-119">Without an implementation, interfaces do no more than define a grouping of methods with certain signatures.</span></span> <span data-ttu-id="a9029-120">Implémentez une interface de contrat de service et vous avez implémenté un service WCF.</span><span class="sxs-lookup"><span data-stu-id="a9029-120">Implement a service contract interface and you have implemented a WCF service.</span></span>  
  
 <span data-ttu-id="a9029-121">Tous les avantages liées aux interfaces managées s'appliquent aux interfaces de contrat de service :</span><span class="sxs-lookup"><span data-stu-id="a9029-121">All the benefits of managed interfaces apply to service contract interfaces:</span></span>  
  
- <span data-ttu-id="a9029-122">Les interfaces de contrat de service peuvent étendre une quantité quelconque d'autres interfaces de contrat de service.</span><span class="sxs-lookup"><span data-stu-id="a9029-122">Service contract interfaces can extend any number of other service contract interfaces.</span></span>  
  
- <span data-ttu-id="a9029-123">Une classe unique peut implémenter une quantité quelconque de contrats de service en implémentant ces interfaces de contrat de service.</span><span class="sxs-lookup"><span data-stu-id="a9029-123">A single class can implement any number of service contracts by implementing those service contract interfaces.</span></span>  
  
- <span data-ttu-id="a9029-124">Vous pouvez modifier l'implémentation d'un contrat de service en modifiant l'implémentation d'interface, tandis que le contrat de service reste le même.</span><span class="sxs-lookup"><span data-stu-id="a9029-124">You can modify the implementation of a service contract by changing the interface implementation, while the service contract remains the same.</span></span>  
  
- <span data-ttu-id="a9029-125">Vous pouvez affecter une version à votre service en implémentant l'ancienne interface et la nouvelle.</span><span class="sxs-lookup"><span data-stu-id="a9029-125">You can version your service by implementing the old interface and the new one.</span></span> <span data-ttu-id="a9029-126">Les clients anciens se connectent à la version d'origine, tandis que les nouveaux clients peuvent se connecter à la version plus récente.</span><span class="sxs-lookup"><span data-stu-id="a9029-126">Old clients connect to the original version, while newer clients can connect to the newer version.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a9029-127">Lorsque vous héritez d'autres interfaces de contrat de service, vous ne pouvez pas substituer de propriétés d'opération, telles que le nom ou l'espace de noms.</span><span class="sxs-lookup"><span data-stu-id="a9029-127">When inheriting from other service contract interfaces, you cannot override operation properties, such as the name or namespace.</span></span> <span data-ttu-id="a9029-128">Si vous essayez, vous créez une nouvelle opération dans le contrat de service actuel.</span><span class="sxs-lookup"><span data-stu-id="a9029-128">If you attempt to do so, you create a new operation in the current service contract.</span></span>  
  
 <span data-ttu-id="a9029-129">Pour obtenir un exemple d’utilisation d’une interface pour créer un contrat de service, consultez [Comment : créer un service avec une interface de contrat](./feature-details/how-to-create-a-service-with-a-contract-interface.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-129">For an example of using an interface to create a service contract, see [How to: Create a Service with a Contract Interface](./feature-details/how-to-create-a-service-with-a-contract-interface.md).</span></span>  
  
 <span data-ttu-id="a9029-130">Toutefois, vous pouvez utiliser une classe pour définir un contrat de service et implémenter ce contrat en même temps.</span><span class="sxs-lookup"><span data-stu-id="a9029-130">You can, however, use a class to define a service contract and implement that contract at the same time.</span></span> <span data-ttu-id="a9029-131">Les avantages liés à la création de vos services en appliquant <xref:System.ServiceModel.ServiceContractAttribute> et <xref:System.ServiceModel.OperationContractAttribute> directement à la classe et aux méthodes sur la classe, respectivement, sont la vitesse et la simplicité.</span><span class="sxs-lookup"><span data-stu-id="a9029-131">The advantage of creating your services by applying <xref:System.ServiceModel.ServiceContractAttribute> and <xref:System.ServiceModel.OperationContractAttribute> directly to the class and the methods on the class, respectively, is speed and simplicity.</span></span> <span data-ttu-id="a9029-132">Les inconvénients sont que les classes managées ne prennent pas en charge l'héritage multiple ; en conséquence, elles peuvent implémenter un seul contrat de service à la fois.</span><span class="sxs-lookup"><span data-stu-id="a9029-132">The disadvantages are that managed classes do not support multiple inheritance, and as a result they can only implement one service contract at a time.</span></span> <span data-ttu-id="a9029-133">De plus, toute modification de la classe ou des signatures de méthode modifie le contrat public pour ce service, ce qui peut empêcher les clients non modifiés d'utiliser votre service.</span><span class="sxs-lookup"><span data-stu-id="a9029-133">In addition, any modification to the class or method signatures modifies the public contract for that service, which can prevent unmodified clients from using your service.</span></span> <span data-ttu-id="a9029-134">Pour plus d’informations, consultez [implémentation de contrats de service](implementing-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-134">For more information, see [Implementing Service Contracts](implementing-service-contracts.md).</span></span>  
  
 <span data-ttu-id="a9029-135">Pour obtenir un exemple qui utilise une classe pour créer un contrat de service et l’implémente en même temps, consultez [Comment : créer un service avec une classe de contrat](./feature-details/how-to-create-a-wcf-contract-with-a-class.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-135">For an example that uses a class to create a service contract and implements it at the same time, see [How to: Create a Service with a Contract Class](./feature-details/how-to-create-a-wcf-contract-with-a-class.md).</span></span>  
  
 <span data-ttu-id="a9029-136">À ce stade, vous devez comprendre la différence entre le fait de définir votre contrat de service en utilisant une interface et en utilisant une classe.</span><span class="sxs-lookup"><span data-stu-id="a9029-136">At this point, you should understand the difference between defining your service contract by using an interface and by using a class.</span></span> <span data-ttu-id="a9029-137">L'étape suivante consiste à déterminer les données qui peuvent être passées entre un service et ses clients.</span><span class="sxs-lookup"><span data-stu-id="a9029-137">The next step is deciding what data can be passed back and forth between a service and its clients.</span></span>  
  
## <a name="parameters-and-return-values"></a><span data-ttu-id="a9029-138">Paramètres et valeurs de retour</span><span class="sxs-lookup"><span data-stu-id="a9029-138">Parameters and Return Values</span></span>  
 <span data-ttu-id="a9029-139">Chaque opération a une valeur de retour et un paramètre, même s'il s'agit de `void`.</span><span class="sxs-lookup"><span data-stu-id="a9029-139">Each operation has a return value and a parameter, even if these are `void`.</span></span> <span data-ttu-id="a9029-140">Toutefois, contrairement à une méthode locale, dans laquelle vous pouvez passer des références à des objets d'un objet à un autre, les opérations de service ne passent pas de références à des objets.</span><span class="sxs-lookup"><span data-stu-id="a9029-140">However, unlike a local method, in which you can pass references to objects from one object to another, service operations do not pass references to objects.</span></span> <span data-ttu-id="a9029-141">Au lieu de cela, elles passent des copies des objets.</span><span class="sxs-lookup"><span data-stu-id="a9029-141">Instead, they pass copies of the objects.</span></span>  
  
 <span data-ttu-id="a9029-142">Cette différence est significative car chaque type utilisé dans un paramètre ou une valeur de retour doit être sérialisable ; autrement dit, il doit être possible de convertir un objet de ce type en un flux d'octets et d'un flux d'octets en un objet.</span><span class="sxs-lookup"><span data-stu-id="a9029-142">This is significant because each type used in a parameter or return value must be serializable; that is, it must be possible to convert an object of that type into a stream of bytes and from a stream of bytes into an object.</span></span>  
  
 <span data-ttu-id="a9029-143">Les types primitifs sont sérialisables par défaut, comme le sont de nombreux types dans le .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a9029-143">Primitive types are serializable by default, as are many types in the .NET Framework.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a9029-144">La valeur des noms de paramètres dans la signature de l'opération fait partie du contrat et respecte la casse.</span><span class="sxs-lookup"><span data-stu-id="a9029-144">The value of the parameter names in the operation signature are part of the contract and are case sensitive.</span></span> <span data-ttu-id="a9029-145">Si vous souhaitez utiliser le même nom de paramètre localement mais modifier le nom dans les métadonnées publiées, consultez <xref:System.ServiceModel.MessageParameterAttribute?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a9029-145">If you want to use the same parameter name locally but modify the name in the published metadata, see the <xref:System.ServiceModel.MessageParameterAttribute?displayProperty=nameWithType>.</span></span>  
  
#### <a name="data-contracts"></a><span data-ttu-id="a9029-146">Contrats de données</span><span class="sxs-lookup"><span data-stu-id="a9029-146">Data Contracts</span></span>  
 <span data-ttu-id="a9029-147">Les applications orientées service telles que les applications Windows Communication Foundation (WCF) sont conçues pour interagir avec le plus grand nombre possible d’applications clientes sur les plateformes Microsoft et non-Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a9029-147">Service-oriented applications like Windows Communication Foundation (WCF) applications are designed to interoperate with the widest possible number of client applications on both Microsoft and non-Microsoft platforms.</span></span> <span data-ttu-id="a9029-148">Pour l'interopérabilité la plus large possible, il est recommandé de marquer vos types avec les attributs <xref:System.Runtime.Serialization.DataContractAttribute> et <xref:System.Runtime.Serialization.DataMemberAttribute> afin de créer un contrat de données, qui est la partie du contrat de service qui décrit les données échangées par vos opérations de service.</span><span class="sxs-lookup"><span data-stu-id="a9029-148">For the widest possible interoperability, it is recommended that you mark your types with the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes to create a data contract, which is the portion of the service contract that describes the data that your service operations exchange.</span></span>  
  
 <span data-ttu-id="a9029-149">Les contrats de données sont des contrats de style abonnement : aucun membre de données ou de type n'est sérialisé, à moins que vous n'appliquiez l'attribut de contrat de données explicitement.</span><span class="sxs-lookup"><span data-stu-id="a9029-149">Data contracts are opt-in style contracts: No type or data member is serialized unless you explicitly apply the data contract attribute.</span></span> <span data-ttu-id="a9029-150">Les contrats de données ne sont pas liés à la portée d'accès du code managé : les membres de données privés peuvent être sérialisés et envoyés ailleurs afin d'être accessibles publiquement.</span><span class="sxs-lookup"><span data-stu-id="a9029-150">Data contracts are unrelated to the access scope of the managed code: Private data members can be serialized and sent elsewhere to be accessed publicly.</span></span> <span data-ttu-id="a9029-151">(Pour obtenir un exemple de base d’un contrat de données, consultez [Comment : créer un contrat de données de base pour une classe ou une structure](./feature-details/how-to-create-a-basic-data-contract-for-a-class-or-structure.md).) WCF gère la définition des messages SOAP sous-jacents qui activent les fonctionnalités de l’opération ainsi que la sérialisation de vos types de données dans et hors du corps des messages.</span><span class="sxs-lookup"><span data-stu-id="a9029-151">(For a basic example of a data contract, see [How to: Create a Basic Data Contract for a Class or Structure](./feature-details/how-to-create-a-basic-data-contract-for-a-class-or-structure.md).) WCF handles the definition of the underlying SOAP messages that enable the operation's functionality as well as the serialization of your data types into and out of the body of the messages.</span></span> <span data-ttu-id="a9029-152">Tant que vos types de données sont sérialisables, vous n'avez pas à vous soucier de l'infrastructure d'échange de messages sous-jacente lors de la conception de vos opérations.</span><span class="sxs-lookup"><span data-stu-id="a9029-152">As long as your data types are serializable, you do not need to think about the underlying message exchange infrastructure when designing your operations.</span></span>  
  
 <span data-ttu-id="a9029-153">Bien que l’application WCF typique utilise les attributs <xref:System.Runtime.Serialization.DataContractAttribute> et <xref:System.Runtime.Serialization.DataMemberAttribute> pour créer des contrats de données pour les opérations, vous pouvez utiliser d’autres mécanismes de sérialisation.</span><span class="sxs-lookup"><span data-stu-id="a9029-153">Although the typical WCF application uses the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes to create data contracts for operations, you can use other serialization mechanisms.</span></span> <span data-ttu-id="a9029-154">Les mécanismes <xref:System.Runtime.Serialization.ISerializable>, <xref:System.SerializableAttribute> et <xref:System.Xml.Serialization.IXmlSerializable> standard gèrent tous la sérialisation de vos types de données dans les messages SOAP sous-jacents qui les transportent d'une application à une autre.</span><span class="sxs-lookup"><span data-stu-id="a9029-154">The standard <xref:System.Runtime.Serialization.ISerializable>, <xref:System.SerializableAttribute> and <xref:System.Xml.Serialization.IXmlSerializable> mechanisms all work to handle the serialization of your data types into the underlying SOAP messages that carry them from one application to another.</span></span> <span data-ttu-id="a9029-155">Vous pouvez employer davantage de stratégies de sérialisation si vos types de données requièrent une prise en charge spéciale.</span><span class="sxs-lookup"><span data-stu-id="a9029-155">You can employ more serialization strategies if your data types require special support.</span></span> <span data-ttu-id="a9029-156">Pour plus d’informations sur les choix de sérialisation des types de données dans les applications WCF, consultez [spécification de transfert de données dans les contrats de service](./feature-details/specifying-data-transfer-in-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-156">For more information about the choices for serialization of data types in WCF applications, see [Specifying Data Transfer in Service Contracts](./feature-details/specifying-data-transfer-in-service-contracts.md).</span></span>  
  
#### <a name="mapping-parameters-and-return-values-to-message-exchanges"></a><span data-ttu-id="a9029-157">Mappage des paramètres et des valeurs de retour aux échanges de messages</span><span class="sxs-lookup"><span data-stu-id="a9029-157">Mapping Parameters and Return Values to Message Exchanges</span></span>  
 <span data-ttu-id="a9029-158">Les opérations de service sont prises en charge par un échange sous-jacent de messages SOAP qui transfèrent les données d'application, en plus des données requises par l'application pour prendre en charge certaines fonctionnalités standard liées à la sécurité, aux transaction et aux sessions.</span><span class="sxs-lookup"><span data-stu-id="a9029-158">Service operations are supported by an underlying exchange of SOAP messages that transfer application data back and forth, in addition to the data required by the application to support certain standard security, transaction, and session-related features.</span></span> <span data-ttu-id="a9029-159">Comme c’est le cas, la signature d’une opération de service dicte un certain *modèle d’échange de messages* sous-jacent (MEP) qui peut prendre en charge le transfert de données et les fonctionnalités requises par une opération.</span><span class="sxs-lookup"><span data-stu-id="a9029-159">Because this is the case, the signature of a service operation dictates a certain underlying *message exchange pattern* (MEP) that can support the data transfer and the features an operation requires.</span></span> <span data-ttu-id="a9029-160">Vous pouvez spécifier trois modèles dans le modèle de programmation WCF : modèles de message demande/réponse, unidirectionnel et duplex.</span><span class="sxs-lookup"><span data-stu-id="a9029-160">You can specify three patterns in the WCF programming model: request/reply, one-way, and duplex message patterns.</span></span>  
  
##### <a name="requestreply"></a><span data-ttu-id="a9029-161">Demande/réponse</span><span class="sxs-lookup"><span data-stu-id="a9029-161">Request/Reply</span></span>  
 <span data-ttu-id="a9029-162">Un modèle de demande/réponse est un modèle dans lequel un expéditeur de demande (une application cliente) reçoit une réponse avec laquelle la demande est mise en corrélation.</span><span class="sxs-lookup"><span data-stu-id="a9029-162">A request/reply pattern is one in which a request sender (a client application) receives a reply with which the request is correlated.</span></span> <span data-ttu-id="a9029-163">Il s'agit du modèle d'échange de messages par défaut, car il prend en charge une opération dans laquelle un ou plusieurs paramètres sont passés à l'opération et une valeur de retour est repassée à l'appelant.</span><span class="sxs-lookup"><span data-stu-id="a9029-163">This is the default MEP because it supports an operation in which one or more parameters are passed to the operation and a return value is passed back to the caller.</span></span> <span data-ttu-id="a9029-164">Par exemple, l'extrait de code C# suivant illustre une opération de service simple qui prend une chaîne et retourne une chaîne.</span><span class="sxs-lookup"><span data-stu-id="a9029-164">For example, the following C# code example shows a basic service operation that takes one string and returns a string.</span></span>  
  
```csharp  
[OperationContractAttribute]  
string Hello(string greeting);  
```  
  
 <span data-ttu-id="a9029-165">L'exemple suivant illustre le code Visual Basic équivalent.</span><span class="sxs-lookup"><span data-stu-id="a9029-165">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute()>  
Function Hello (ByVal greeting As String) As String  
```  
  
 <span data-ttu-id="a9029-166">Cette signature d'opération dicte la forme de l'échange de messages sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="a9029-166">This operation signature dictates the form of underlying message exchange.</span></span> <span data-ttu-id="a9029-167">Si aucune corrélation n’existait, WCF ne peut pas déterminer pour quelle opération la valeur de retour est prévue.</span><span class="sxs-lookup"><span data-stu-id="a9029-167">If no correlation existed, WCF cannot determine for which operation the return value is intended.</span></span>  
  
 <span data-ttu-id="a9029-168">Notez que, sauf si vous spécifiez un modèle de message sous-jacent différent, même les opérations de service qui retournent `void` (`Nothing` dans Visual Basic) sont des échanges de messages de demande/réponse.</span><span class="sxs-lookup"><span data-stu-id="a9029-168">Note that unless you specify a different underlying message pattern, even service operations that return `void` (`Nothing` in Visual Basic) are request/reply message exchanges.</span></span> <span data-ttu-id="a9029-169">Le résultat de votre opération est qu'à moins qu'un client n'appelle l'opération de façon asynchrone, le client cesse le traitement jusqu'à ce que le message de retour soit reçu, bien que ce message soit vide dans le cas normal.</span><span class="sxs-lookup"><span data-stu-id="a9029-169">The result for your operation is that unless a client invokes the operation asynchronously, the client stops processing until the return message is received, even though that message is empty in the normal case.</span></span> <span data-ttu-id="a9029-170">L'exemple de code C# suivant illustre une opération qui n'est retournée que lorsque le client a reçu un message vide dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="a9029-170">The following C# code example shows an operation that does not return until the client has received an empty message in response.</span></span>  
  
```csharp  
[OperationContractAttribute]  
void Hello(string greeting);  
```  
  
 <span data-ttu-id="a9029-171">L'exemple suivant illustre le code Visual Basic équivalent.</span><span class="sxs-lookup"><span data-stu-id="a9029-171">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute()>  
Sub Hello (ByVal greeting As String)  
```  
  
 <span data-ttu-id="a9029-172">L'exemple précédent peut ralentir les performances et la réactivité du client si l'exécution de l'opération prend beaucoup de temps, mais les opérations demande/réponse présentent des avantages même lorsqu'elles retournent `void`.</span><span class="sxs-lookup"><span data-stu-id="a9029-172">The preceding example can slow client performance and responsiveness if the operation takes a long time to perform, but there are advantages to request/reply operations even when they return `void`.</span></span> <span data-ttu-id="a9029-173">Le plus évident est que des erreurs SOAP peuvent être retournées dans le message de réponse, ce qui indique qu'une certaine condition d'erreur liée au service s'est produite, lors de la communication ou lors du traitement.</span><span class="sxs-lookup"><span data-stu-id="a9029-173">The most obvious one is that SOAP faults can be returned in the response message, which indicates that some service-related error condition has occurred, whether in communication or processing.</span></span> <span data-ttu-id="a9029-174">Les erreurs SOAP spécifiées dans un contrat de service sont passées à l'application cliente en tant qu'objets <xref:System.ServiceModel.FaultException%601>, où le paramètre de type est le type spécifié dans le contrat de service.</span><span class="sxs-lookup"><span data-stu-id="a9029-174">SOAP faults that are specified in a service contract are passed to the client application as a <xref:System.ServiceModel.FaultException%601> object, where the type parameter is the type specified in the service contract.</span></span> <span data-ttu-id="a9029-175">Cela facilite la notification des clients concernant les conditions d’erreur dans les services WCF.</span><span class="sxs-lookup"><span data-stu-id="a9029-175">This makes notifying clients about error conditions in WCF services easy.</span></span> <span data-ttu-id="a9029-176">Pour plus d’informations sur les exceptions, les erreurs SOAP et la gestion des erreurs, consultez [spécification et gestion des erreurs dans les contrats et les services](specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-176">For more information about exceptions, SOAP faults, and error handling, see [Specifying and Handling Faults in Contracts and Services](specifying-and-handling-faults-in-contracts-and-services.md).</span></span> <span data-ttu-id="a9029-177">Pour voir un exemple de service de demande/réponse et de client, consultez [Comment : créer un contrat de demande-réponse](./feature-details/how-to-create-a-request-reply-contract.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-177">To see an example of a request/reply service and client, see [How to: Create a Request-Reply Contract](./feature-details/how-to-create-a-request-reply-contract.md).</span></span> <span data-ttu-id="a9029-178">Pour plus d’informations sur les problèmes liés au modèle demande-réponse, consultez [services demande-réponse](./feature-details/request-reply-services.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-178">For more information about issues with the request-reply pattern, see [Request-Reply Services](./feature-details/request-reply-services.md).</span></span>  
  
##### <a name="one-way"></a><span data-ttu-id="a9029-179">Unidirectionnel</span><span class="sxs-lookup"><span data-stu-id="a9029-179">One-way</span></span>  
 <span data-ttu-id="a9029-180">Si le client d’une application de service WCF ne doit pas attendre que l’opération se termine et qu’il ne traite pas les erreurs SOAP, l’opération peut spécifier un modèle de message unidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="a9029-180">If the client of a WCF service application should not wait for the operation to complete and does not process SOAP faults, the operation can specify a one-way message pattern.</span></span> <span data-ttu-id="a9029-181">Une opération unidirectionnelle est une opération dans laquelle un client appelle une opération et poursuit le traitement après que WCF a écrit le message sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="a9029-181">A one-way operation is one in which a client invokes an operation and continues processing after WCF writes the message to the network.</span></span> <span data-ttu-id="a9029-182">En général, cela signifie qu’à moins que le volume des données envoyées dans le message sortant ne soit extrêmement important, le client continue de s’exécuter presque immédiatement (à moins qu’une erreur ne soit survenue pendant l’envoi des données).</span><span class="sxs-lookup"><span data-stu-id="a9029-182">Typically this means that unless the data being sent in the outbound message is extremely large the client continues running almost immediately (unless there is an error sending the data).</span></span> <span data-ttu-id="a9029-183">Ce type de modèle d'échange de messages prend en charge un comportement semblable aux événements d'un client à une application de service.</span><span class="sxs-lookup"><span data-stu-id="a9029-183">This type of message exchange pattern supports event-like behavior from a client to a service application.</span></span>  
  
 <span data-ttu-id="a9029-184">Un échange de messages dans lequel un message est envoyé et aucun message n'est reçu ne peut pas prendre en charge une opération de service qui spécifie une valeur de retour autre que `void` ; dans ce cas, une exception <xref:System.InvalidOperationException> est levée.</span><span class="sxs-lookup"><span data-stu-id="a9029-184">A message exchange in which one message is sent and none are received cannot support a service operation that specifies a return value other than `void`; in this case an <xref:System.InvalidOperationException> exception is thrown.</span></span>  
  
 <span data-ttu-id="a9029-185">L'absence de message de retour signifie également qu'il ne peut y avoir aucune erreur SOAP retournée pour signaler une erreur lors du traitement ou de la communication.</span><span class="sxs-lookup"><span data-stu-id="a9029-185">No return message also means that there can be no SOAP fault returned to indicate any errors in processing or communication.</span></span> <span data-ttu-id="a9029-186">(La communication d’informations sur les erreurs lorsque les opérations sont unidirectionnelles requiert un modèle d’échange de messages duplex.)</span><span class="sxs-lookup"><span data-stu-id="a9029-186">(Communicating error information when operations are one-way operations requires a duplex message exchange pattern.)</span></span>  
  
 <span data-ttu-id="a9029-187">Pour spécifier un échange de messages unidirectionnel pour une opération qui retourne `void`, affectez à la propriété <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> la valeur `true`, comme dans l'exemple de code C# suivant.</span><span class="sxs-lookup"><span data-stu-id="a9029-187">To specify a one-way message exchange for an operation that returns `void`, set the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true`, as in the following C# code example.</span></span>  
  
```csharp  
[OperationContractAttribute(IsOneWay=true)]  
void Hello(string greeting);  
```  
  
 <span data-ttu-id="a9029-188">L'exemple suivant illustre le code Visual Basic équivalent.</span><span class="sxs-lookup"><span data-stu-id="a9029-188">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute(IsOneWay := True)>  
Sub Hello (ByVal greeting As String)  
```  
  
 <span data-ttu-id="a9029-189">Cette méthode est identique à l'exemple de demande/réponse précédent, mais le fait d'affecter à la propriété <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> la valeur `true` signifie que bien que la méthode soit identique, l'opération de service n'envoie pas de message de retour et les clients retournent immédiatement une fois le message sortant transmis à la couche du canal.</span><span class="sxs-lookup"><span data-stu-id="a9029-189">This method is identical to the preceding request/reply example, but setting the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true` means that although the method is identical, the service operation does not send a return message and clients return immediately once the outbound message has been handed to the channel layer.</span></span> <span data-ttu-id="a9029-190">Pour obtenir un exemple, consultez Guide [pratique pour créer un contrat unidirectionnel](./feature-details/how-to-create-a-one-way-contract.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-190">For an example, see [How to: Create a One-Way Contract](./feature-details/how-to-create-a-one-way-contract.md).</span></span> <span data-ttu-id="a9029-191">Pour plus d’informations sur le modèle unidirectionnel, consultez [services à sens](./feature-details/one-way-services.md)unique.</span><span class="sxs-lookup"><span data-stu-id="a9029-191">For more information about the one-way pattern, see [One-Way Services](./feature-details/one-way-services.md).</span></span>  
  
##### <a name="duplex"></a><span data-ttu-id="a9029-192">Duplex</span><span class="sxs-lookup"><span data-stu-id="a9029-192">Duplex</span></span>  
 <span data-ttu-id="a9029-193">Un modèle duplex se caractérise par la capacité qu’ont le service et le client à s’envoyer des messages l’un à l’autre, que le mode de messagerie utilisé soit unidirectionnel ou demande/réponse.</span><span class="sxs-lookup"><span data-stu-id="a9029-193">A duplex pattern is characterized by the ability of both the service and the client to send messages to each other independently whether using one-way or request/reply messaging.</span></span> <span data-ttu-id="a9029-194">Cette forme de communication bidirectionnelle est utile pour les services qui doivent communiquer directement avec le client ou pour fournir une expérience asynchrone à l'un des côtés d'un échange de messages, y compris un comportement semblables aux événements.</span><span class="sxs-lookup"><span data-stu-id="a9029-194">This form of two-way communication is useful for services that must communicate directly to the client or for providing an asynchronous experience to either side of a message exchange, including event-like behavior.</span></span>  
  
 <span data-ttu-id="a9029-195">Le modèle duplex est légèrement plus complexe que le modèle demande/réponse ou unidirectionnel à cause du mécanisme supplémentaire nécessaire pour la communication avec le client.</span><span class="sxs-lookup"><span data-stu-id="a9029-195">The duplex pattern is slightly more complex than the request/reply or one-way patterns because of the additional mechanism for communicating with the client.</span></span>  
  
 <span data-ttu-id="a9029-196">Pour concevoir un contrat duplex, vous devez également concevoir un contrat de rappel et assigner le type de ce contrat de rappel à la propriété <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A> de l'attribut <xref:System.ServiceModel.ServiceContractAttribute> qui marque votre contrat de service.</span><span class="sxs-lookup"><span data-stu-id="a9029-196">To design a duplex contract, you must also design a callback contract and assign the type of that callback contract to the <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A> property of the <xref:System.ServiceModel.ServiceContractAttribute> attribute that marks your service contract.</span></span>  
  
 <span data-ttu-id="a9029-197">Pour implémenter un modèle duplex, vous devez créer une deuxième interface qui contient les déclarations de méthode appelées sur le client.</span><span class="sxs-lookup"><span data-stu-id="a9029-197">To implement a duplex pattern, you must create a second interface that contains the method declarations that are called on the client.</span></span>  
  
 <span data-ttu-id="a9029-198">Pour obtenir un exemple de création d’un service et d’un client qui accède à ce service, consultez [Comment : créer un contrat duplex](./feature-details/how-to-create-a-duplex-contract.md) et [Comment : accéder aux services avec un contrat duplex](./feature-details/how-to-access-services-with-a-duplex-contract.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-198">For an example of creating a service, and a client that accesses that service, see [How to: Create a Duplex Contract](./feature-details/how-to-create-a-duplex-contract.md) and [How to: Access Services with a Duplex Contract](./feature-details/how-to-access-services-with-a-duplex-contract.md).</span></span> <span data-ttu-id="a9029-199">Pour obtenir un exemple fonctionnel, consultez [duplex](./samples/duplex.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-199">For a working sample, see [Duplex](./samples/duplex.md).</span></span> <span data-ttu-id="a9029-200">Pour plus d’informations sur les problèmes liés à l’utilisation de contrats duplex, consultez [services duplex](./feature-details/duplex-services.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-200">For more information about issues using duplex contracts, see [Duplex Services](./feature-details/duplex-services.md).</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="a9029-201">Lorsqu'un service reçoit un message duplex, il consultez l'élément `ReplyTo` dans ce message entrant afin de déterminer où envoyer la réponse.</span><span class="sxs-lookup"><span data-stu-id="a9029-201">When a service receives a duplex message, it looks at the `ReplyTo` element in that incoming message to determine where to send the reply.</span></span> <span data-ttu-id="a9029-202">Si le canal utilisé pour recevoir le message n'est pas sécurisé, un client non fiable peut envoyer un message malveillant avec l'élément `ReplyTo` d'un ordinateur cible, ce qui peut provoquer un déni de service de cet ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="a9029-202">If the channel that is used to receive the message is not secured, then an untrusted client could send a malicious message with a target machine's `ReplyTo`, leading to a denial of service (DOS) of that target machine.</span></span>  
  
##### <a name="out-and-ref-parameters"></a><span data-ttu-id="a9029-203">Paramètres Out et Ref</span><span class="sxs-lookup"><span data-stu-id="a9029-203">Out and Ref Parameters</span></span>  
 <span data-ttu-id="a9029-204">Dans la plupart des cas, vous pouvez utiliser des paramètres `in` (`ByVal` dans Visual Basic) et des paramètres `out` et `ref` (`ByRef` dans Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="a9029-204">In most cases, you can use `in` parameters (`ByVal` in Visual Basic) and `out` and `ref` parameters (`ByRef` in Visual Basic).</span></span> <span data-ttu-id="a9029-205">Les paramètres `out` et `ref` indiquant tous deux que les données sont retournées à partir d'une opération, une signature d'opération telle que la suivante spécifie qu'une opération demande/réponse est requise bien que la signature d'opération retourne `void`.</span><span class="sxs-lookup"><span data-stu-id="a9029-205">Because both `out` and `ref` parameters indicate that data is returned from an operation, an operation signature such as the following specifies that a request/reply operation is required even though the operation signature returns `void`.</span></span>  
  
```csharp  
[ServiceContractAttribute]  
public interface IMyContract  
{  
  [OperationContractAttribute]  
  public void PopulateData(ref CustomDataType data);  
}  
```  
  
 <span data-ttu-id="a9029-206">L'exemple suivant illustre le code Visual Basic équivalent.</span><span class="sxs-lookup"><span data-stu-id="a9029-206">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContractAttribute()> _  
Public Interface IMyContract  
  <OperationContractAttribute()> _  
  Public Sub PopulateData(ByRef data As CustomDataType)  
End Interface  
```  
  
 <span data-ttu-id="a9029-207">Les seules exceptions sont les cas dans lesquels votre signature a une structure particulière.</span><span class="sxs-lookup"><span data-stu-id="a9029-207">The only exceptions are those cases in which your signature has a particular structure.</span></span> <span data-ttu-id="a9029-208">Par exemple, vous pouvez utiliser la liaison <xref:System.ServiceModel.NetMsmqBinding> pour communiquer avec les clients uniquement si la méthode utilisée pour déclarer une opération retourne `void` ; il ne peut y avoir aucune valeur de sortie, qu’il s’agisse d’une valeur de retour ou d’un paramètre `ref` ou `out`.</span><span class="sxs-lookup"><span data-stu-id="a9029-208">For example, you can use the <xref:System.ServiceModel.NetMsmqBinding> binding to communicate with clients only if the method used to declare an operation returns `void`; there can be no output value, whether it is a return value, `ref`, or `out` parameter.</span></span>  
  
 <span data-ttu-id="a9029-209">De plus, l'utilisation de paramètres `out` ou `ref` requiert que l'opération contienne un message de réponse sous-jacent afin de retourner l'objet modifié.</span><span class="sxs-lookup"><span data-stu-id="a9029-209">In addition, using `out` or `ref` parameters requires that the operation have an underlying response message to carry back the modified object.</span></span> <span data-ttu-id="a9029-210">Si votre opération est unidirectionnelle, une exception <xref:System.InvalidOperationException> est levée au moment de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="a9029-210">If your operation is a one-way operation, an <xref:System.InvalidOperationException> exception is thrown at runtime.</span></span>  
  
### <a name="specify-message-protection-level-on-the-contract"></a><span data-ttu-id="a9029-211">Spécifier le niveau de protection des messages sur le contrat</span><span class="sxs-lookup"><span data-stu-id="a9029-211">Specify Message Protection Level on the Contract</span></span>  
 <span data-ttu-id="a9029-212">Lorsque vous concevez votre contrat, vous devez également décider du niveau de protection des messages des services qui implémentent votre contrat.</span><span class="sxs-lookup"><span data-stu-id="a9029-212">When designing your contract, you must also decide the message protection level of services that implement your contract.</span></span> <span data-ttu-id="a9029-213">Cela est nécessaire uniquement si la sécurité de message est appliquée à la liaison dans le point de terminaison du contrat.</span><span class="sxs-lookup"><span data-stu-id="a9029-213">This is necessary only if message security is applied to the binding in the contract's endpoint.</span></span> <span data-ttu-id="a9029-214">Si la sécurité est désactivée pour la liaison (autrement dit, si la liaison fournie par le système affecte au <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> la valeur <xref:System.ServiceModel.SecurityMode.None?displayProperty=nameWithType>), vous n’avez pas à choisir le niveau de protection des messages pour le contrat.</span><span class="sxs-lookup"><span data-stu-id="a9029-214">If the binding has security turned off (that is, if the system-provided binding sets the <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> to the value <xref:System.ServiceModel.SecurityMode.None?displayProperty=nameWithType>) then you do not have to decide on the message protection level for the contract.</span></span> <span data-ttu-id="a9029-215">Dans la plupart des cas, les liaisons fournies par le système avec la sécurité au niveau du message appliquée fournissent un niveau de protection suffisant et il n’est pas nécessaire de considérer le niveau de protection sur la base de chaque opération ou de chaque message.</span><span class="sxs-lookup"><span data-stu-id="a9029-215">In most cases, system-provided bindings with message-level security applied provide a sufficient protection level and you do not have to consider the protection level for each operation or for each message.</span></span>  
  
 <span data-ttu-id="a9029-216">Le niveau de protection est une valeur qui spécifie si les messages (ou parties de messages) qui prennent en charge un service sont signés, signés et chiffrés, ou envoyés sans signature ou chiffrement.</span><span class="sxs-lookup"><span data-stu-id="a9029-216">The protection level is a value that specifies whether the messages (or message parts) that support a service are signed, signed and encrypted, or sent without signatures or encryption.</span></span> <span data-ttu-id="a9029-217">Le niveau de protection peut être défini à différentes portées : au niveau du service, pour une opération particulière, pour un message dans cette opération, ou pour une partie de message.</span><span class="sxs-lookup"><span data-stu-id="a9029-217">The protection level can be set at various scopes: At the service level, for a particular operation, for a message within that operation, or a message part.</span></span> <span data-ttu-id="a9029-218">Les valeurs définies à une portée deviennent la valeur par défaut pour les plus petites portées, sauf substitution explicite.</span><span class="sxs-lookup"><span data-stu-id="a9029-218">Values set at one scope become the default value for smaller scopes unless explicitly overridden.</span></span> <span data-ttu-id="a9029-219">Si une configuration de liaison est incapable de fournir le niveau de protection minimum requis pour le contrat, une exception est levée.</span><span class="sxs-lookup"><span data-stu-id="a9029-219">If a binding configuration cannot provide the required minimum protection level for the contract, an exception is thrown.</span></span> <span data-ttu-id="a9029-220">Et lorsque aucune valeur de niveau de protection n’est définie explicitement sur le contrat, la configuration de liaison contrôle le niveau de protection pour tous les messages si la liaison a la sécurité de message.</span><span class="sxs-lookup"><span data-stu-id="a9029-220">And when no protection level values are explicitly set on the contract, the binding configuration controls the protection level for all messages if the binding has message security.</span></span> <span data-ttu-id="a9029-221">Il s'agit du comportement par défaut.</span><span class="sxs-lookup"><span data-stu-id="a9029-221">This is the default behavior.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="a9029-222">L'affectation explicite à plusieurs portées d'un contrat un niveau de protection inférieur au niveau complet de <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType> est en général une décision qui implique un compromis entre le degré de sécurité et les performances.</span><span class="sxs-lookup"><span data-stu-id="a9029-222">Deciding whether to explicitly set various scopes of a contract to less than the full protection level of <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType> is generally a decision that trades some degree of security for increased performance.</span></span> <span data-ttu-id="a9029-223">Dans ces cas-là, vos décisions doivent dépendre de vos opérations et de la valeur des données qu'elles échangent.</span><span class="sxs-lookup"><span data-stu-id="a9029-223">In these cases, your decisions must revolve around your operations and the value of the data they exchange.</span></span> <span data-ttu-id="a9029-224">Pour plus d’informations, consultez [sécurisation des services](securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-224">For more information, see [Securing Services](securing-services.md).</span></span>  
  
 <span data-ttu-id="a9029-225">Par exemple, l'exemple de code suivant ne définit pas la propriété <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> ou <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> sur le contrat.</span><span class="sxs-lookup"><span data-stu-id="a9029-225">For example, the following code example does not set either the <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> or the <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> property on the contract.</span></span>  
  
```csharp  
[ServiceContract]  
public interface ISampleService  
{  
  [OperationContractAttribute]  
  public string GetString();  
  
  [OperationContractAttribute]  
  public int GetInt();    
}  
```  
  
 <span data-ttu-id="a9029-226">L'exemple suivant illustre le code Visual Basic équivalent.</span><span class="sxs-lookup"><span data-stu-id="a9029-226">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContractAttribute()> _  
Public Interface ISampleService  
  
  <OperationContractAttribute()> _  
  Public Function GetString()As String  
  
  <OperationContractAttribute()> _  
  Public Function GetData() As Integer  
  
End Interface  
```  
  
 <span data-ttu-id="a9029-227">Lors de l'interaction avec une implémentation `ISampleService` dans un point de terminaison avec un <xref:System.ServiceModel.WSHttpBinding> par défaut (le <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>par défaut, qui est <xref:System.ServiceModel.SecurityMode.Message>), tous les messages sont chiffrés et signés puisqu'il s'agit du niveau de protection par défaut.</span><span class="sxs-lookup"><span data-stu-id="a9029-227">When interacting with an `ISampleService` implementation in an endpoint with a default <xref:System.ServiceModel.WSHttpBinding> (the default <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>, which is <xref:System.ServiceModel.SecurityMode.Message>), all messages are encrypted and signed because this is the default protection level.</span></span> <span data-ttu-id="a9029-228">Toutefois, lorsqu’un service `ISampleService` est utilisé avec un <xref:System.ServiceModel.BasicHttpBinding> par défaut (le <xref:System.ServiceModel.SecurityMode>par défaut, qui est <xref:System.ServiceModel.SecurityMode.None>), tous les messages sont envoyés comme du texte puisqu’il n’y a aucune sécurité pour cette liaison, et le niveau de protection est donc ignoré (autrement dit, les messages ne sont ni chiffrés ni signés).</span><span class="sxs-lookup"><span data-stu-id="a9029-228">However, when an `ISampleService` service is used with a default <xref:System.ServiceModel.BasicHttpBinding> (the default <xref:System.ServiceModel.SecurityMode>, which is <xref:System.ServiceModel.SecurityMode.None>), all messages are sent as text because there is no security for this binding and so the protection level is ignored (that is, the messages are neither encrypted nor signed).</span></span> <span data-ttu-id="a9029-229">Si le <xref:System.ServiceModel.SecurityMode> était changé en <xref:System.ServiceModel.SecurityMode.Message>, ces messages seraient chiffrés et signés (car ce serait maintenant le niveau de protection par défaut de la liaison).</span><span class="sxs-lookup"><span data-stu-id="a9029-229">If the <xref:System.ServiceModel.SecurityMode> was changed to <xref:System.ServiceModel.SecurityMode.Message>, then these messages would be encrypted and signed (because that would now be the binding's default protection level).</span></span>  
  
 <span data-ttu-id="a9029-230">Si vous souhaitez spécifier ou ajuster explicitement les exigences en matière de protection pour votre contrat, affectez à la propriété <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> (ou à l’une des propriétés `ProtectionLevel` à une plus petite portée) le niveau requis par votre contrat de service.</span><span class="sxs-lookup"><span data-stu-id="a9029-230">If you want to explicitly specify or adjust the protection requirements for your contract, set the <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> property (or any of the `ProtectionLevel` properties at a smaller scope) to the level your service contract requires.</span></span> <span data-ttu-id="a9029-231">Dans ce cas, l’utilisation d’un paramètre explicite requiert que la liaison prenne en charge ce paramètre au minimum pour la portée utilisée.</span><span class="sxs-lookup"><span data-stu-id="a9029-231">In this case, using an explicit setting requires the binding to support that setting at a minimum for the scope used.</span></span> <span data-ttu-id="a9029-232">Par exemple, l'exemple de code suivant spécifie explicitement une valeur <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A>, pour l'opération `GetGuid`.</span><span class="sxs-lookup"><span data-stu-id="a9029-232">For example, the following code example specifies one <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> value explicitly, for the `GetGuid` operation.</span></span>  
  
```csharp  
[ServiceContract]  
public interface IExplicitProtectionLevelSampleService  
{  
  [OperationContractAttribute]  
  public string GetString();  
  
  [OperationContractAttribute(ProtectionLevel=ProtectionLevel.None)]  
  public int GetInt();    
  [OperationContractAttribute(ProtectionLevel=ProtectionLevel.EncryptAndSign)]  
  public int GetGuid();    
}  
```  
  
 <span data-ttu-id="a9029-233">L'exemple suivant illustre le code Visual Basic équivalent.</span><span class="sxs-lookup"><span data-stu-id="a9029-233">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContract()> _   
Public Interface IExplicitProtectionLevelSampleService   
    <OperationContract()> _   
    Public Function GetString() As String   
    End Function   
  
    <OperationContract(ProtectionLevel := ProtectionLevel.None)> _   
    Public Function GetInt() As Integer   
    End Function   
  
    <OperationContractAttribute(ProtectionLevel := ProtectionLevel.EncryptAndSign)> _   
    Public Function GetGuid() As Integer   
    End Function   
  
End Interface  
```  
  
 <span data-ttu-id="a9029-234">Un service qui implémente ce contrat `IExplicitProtectionLevelSampleService` et qui a un point de terminaison qui utilise le <xref:System.ServiceModel.WSHttpBinding> par défaut (le <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>par défaut, qui est <xref:System.ServiceModel.SecurityMode.Message>) a le comportement suivant :</span><span class="sxs-lookup"><span data-stu-id="a9029-234">A service that implements this `IExplicitProtectionLevelSampleService` contract and has an endpoint that uses the default <xref:System.ServiceModel.WSHttpBinding> (the default <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>, which is <xref:System.ServiceModel.SecurityMode.Message>) has the following behavior:</span></span>  
  
- <span data-ttu-id="a9029-235">Les messages d'opération `GetString` sont chiffrés et signés.</span><span class="sxs-lookup"><span data-stu-id="a9029-235">The `GetString` operation messages are encrypted and signed.</span></span>  
  
- <span data-ttu-id="a9029-236">Les messages d'opération `GetInt` sont envoyés comme texte non chiffré et non signé (autrement dit, en texte clair).</span><span class="sxs-lookup"><span data-stu-id="a9029-236">The `GetInt` operation messages are sent as unencrypted and unsigned (that is, plain) text.</span></span>  
  
- <span data-ttu-id="a9029-237">L'opération `GetGuid`<xref:System.Guid?displayProperty=nameWithType> est retournée dans un message qui est chiffré et signé.</span><span class="sxs-lookup"><span data-stu-id="a9029-237">The `GetGuid` operation <xref:System.Guid?displayProperty=nameWithType> is returned in a message that is encrypted and signed.</span></span>  
  
 <span data-ttu-id="a9029-238">Pour plus d’informations sur les niveaux de protection et leur utilisation, consultez [Présentation du niveau de protection](understanding-protection-level.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-238">For more information about protection levels and how to use them, see [Understanding Protection Level](understanding-protection-level.md).</span></span> <span data-ttu-id="a9029-239">Pour plus d’informations sur la sécurité, consultez [sécurisation des services](securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-239">For more information about security, see [Securing Services](securing-services.md).</span></span>  
  
##### <a name="other-operation-signature-requirements"></a><span data-ttu-id="a9029-240">Autres exigences de signature d’opération</span><span class="sxs-lookup"><span data-stu-id="a9029-240">Other Operation Signature Requirements</span></span>  
 <span data-ttu-id="a9029-241">Certaines fonctionnalités d’application requièrent un type particulier de signature d’opération.</span><span class="sxs-lookup"><span data-stu-id="a9029-241">Some application features require a particular kind of operation signature.</span></span> <span data-ttu-id="a9029-242">Par exemple, la liaison <xref:System.ServiceModel.NetMsmqBinding> prend en charge les services et clients fiables, dans lesquels une application peut redémarrer au milieu de la communication et reprendre là où elle s’est interrompue sans entraîner la perte de messages.</span><span class="sxs-lookup"><span data-stu-id="a9029-242">For example, the <xref:System.ServiceModel.NetMsmqBinding> binding supports durable services and clients, in which an application can restart in the middle of communication and pick up where it left off without missing any messages.</span></span> <span data-ttu-id="a9029-243">(Pour plus d’informations, consultez [files d’attente dans WCF](./feature-details/queues-in-wcf.md).) Toutefois, les opérations durables doivent prendre un seul paramètre `in` et n’avoir aucune valeur de retour.</span><span class="sxs-lookup"><span data-stu-id="a9029-243">(For more information, see [Queues in WCF](./feature-details/queues-in-wcf.md).) However, durable operations must take only one `in` parameter and have no return value.</span></span>  
  
 <span data-ttu-id="a9029-244">Un autre exemple est l'utilisation de types <xref:System.IO.Stream> dans les opérations.</span><span class="sxs-lookup"><span data-stu-id="a9029-244">Another example is the use of <xref:System.IO.Stream> types in operations.</span></span> <span data-ttu-id="a9029-245">Étant donné que le paramètre <xref:System.IO.Stream> inclut le corps du message entier, si une entrée ou une sortie (autrement dit, un paramètre `ref`, un paramètre `out` ou une valeur de retour) est de type <xref:System.IO.Stream>, il doit s'agir de la seule entrée ou sortie spécifiée dans votre opération.</span><span class="sxs-lookup"><span data-stu-id="a9029-245">Because the <xref:System.IO.Stream> parameter includes the entire message body, if an input or an output (that is, `ref` parameter, `out` parameter, or return value) is of type <xref:System.IO.Stream>, then it must be the only input or output specified in your operation.</span></span> <span data-ttu-id="a9029-246">De plus, le paramètre ou type de retour doit être <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> ou <xref:System.Xml.Serialization.IXmlSerializable?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a9029-246">In addition, the parameter or return type must be either <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType>, or <xref:System.Xml.Serialization.IXmlSerializable?displayProperty=nameWithType>.</span></span> <span data-ttu-id="a9029-247">Pour plus d’informations sur les flux, consultez [données volumineuses et diffusion en continu](./feature-details/large-data-and-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="a9029-247">For more information about streams, see [Large Data and Streaming](./feature-details/large-data-and-streaming.md).</span></span>  
  
##### <a name="names-namespaces-and-obfuscation"></a><span data-ttu-id="a9029-248">Noms, espaces de noms et obscurcissement</span><span class="sxs-lookup"><span data-stu-id="a9029-248">Names, Namespaces, and Obfuscation</span></span>  
 <span data-ttu-id="a9029-249">Les noms et les espaces de noms des types .NET dans la définition de contrats et les opérations sont significatifs lorsque les contrats sont convertis en WSDL et lorsque les messages de contrat sont créés et envoyés.</span><span class="sxs-lookup"><span data-stu-id="a9029-249">The names and namespaces of the .NET types in the definition of contracts and operations are significant when contracts are converted into WSDL and when contract messages are created and sent.</span></span> <span data-ttu-id="a9029-250">Par conséquent, il est vivement recommandé que les noms et les espaces de noms du contrat de service soient définis explicitement à l'aide des propriétés `Name` et `Namespace` de tous les attributs de contrat de prise en charge tels que <xref:System.ServiceModel.ServiceContractAttribute>, <xref:System.ServiceModel.OperationContractAttribute>, <xref:System.Runtime.Serialization.DataContractAttribute>,  <xref:System.Runtime.Serialization.DataMemberAttribute> et d'autres attributs de contrat.</span><span class="sxs-lookup"><span data-stu-id="a9029-250">Therefore, it is strongly recommended that service contract names and namespaces are explicitly set using the `Name` and `Namespace` properties of all supporting contract attributes such as the <xref:System.ServiceModel.ServiceContractAttribute>, <xref:System.ServiceModel.OperationContractAttribute>, <xref:System.Runtime.Serialization.DataContractAttribute>,  <xref:System.Runtime.Serialization.DataMemberAttribute>, and other contract attributes.</span></span>  
  
 <span data-ttu-id="a9029-251">Il en résulte notamment que si les noms et les espaces de noms ne sont pas définis explicitement, l’utilisation de l’obfuscation IL sur l’assembly altère les noms et les espaces de noms des types de contrat, WSDL est modifié et les échanges sur le câble échouent généralement.</span><span class="sxs-lookup"><span data-stu-id="a9029-251">One result of this is that if the names and namespaces are not explicitly set, the use of IL obfuscation on the assembly alters the contract type names and namespaces and results in modified WSDL and wire exchanges that typically fail.</span></span> <span data-ttu-id="a9029-252">Si vous ne définissez pas explicitement les noms et les espaces de noms des contrats mais prévoyez d’utiliser l’obfuscation, utilisez les attributs <xref:System.Reflection.ObfuscationAttribute> et <xref:System.Reflection.ObfuscateAssemblyAttribute> pour empêcher la modification des noms et des espaces de noms des types de contrat.</span><span class="sxs-lookup"><span data-stu-id="a9029-252">If you do not set the contract names and namespaces explicitly but do intend to use obfuscation, use the <xref:System.Reflection.ObfuscationAttribute> and <xref:System.Reflection.ObfuscateAssemblyAttribute> attributes to prevent the modification of the contract type names and namespaces.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a9029-253">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a9029-253">See also</span></span>

- [<span data-ttu-id="a9029-254">Guide pratique pour créer un contrat demande-réponse</span><span class="sxs-lookup"><span data-stu-id="a9029-254">How to: Create a Request-Reply Contract</span></span>](./feature-details/how-to-create-a-request-reply-contract.md)
- [<span data-ttu-id="a9029-255">Guide pratique pour créer un contrat unidirectionnel</span><span class="sxs-lookup"><span data-stu-id="a9029-255">How to: Create a One-Way Contract</span></span>](./feature-details/how-to-create-a-one-way-contract.md)
- [<span data-ttu-id="a9029-256">Guide pratique pour créer un contrat duplex</span><span class="sxs-lookup"><span data-stu-id="a9029-256">How to: Create a Duplex Contract</span></span>](./feature-details/how-to-create-a-duplex-contract.md)
- [<span data-ttu-id="a9029-257">Spécification du transfert de données dans des contrats de service</span><span class="sxs-lookup"><span data-stu-id="a9029-257">Specifying Data Transfer in Service Contracts</span></span>](./feature-details/specifying-data-transfer-in-service-contracts.md)
- [<span data-ttu-id="a9029-258">Spécification et gestion des erreurs dans les contrats et les services</span><span class="sxs-lookup"><span data-stu-id="a9029-258">Specifying and Handling Faults in Contracts and Services</span></span>](specifying-and-handling-faults-in-contracts-and-services.md)
- [<span data-ttu-id="a9029-259">Utilisation de sessions</span><span class="sxs-lookup"><span data-stu-id="a9029-259">Using Sessions</span></span>](using-sessions.md)
- [<span data-ttu-id="a9029-260">Opérations synchrones et asynchrones</span><span class="sxs-lookup"><span data-stu-id="a9029-260">Synchronous and Asynchronous Operations</span></span>](synchronous-and-asynchronous-operations.md)
- [<span data-ttu-id="a9029-261">Services fiables</span><span class="sxs-lookup"><span data-stu-id="a9029-261">Reliable Services</span></span>](reliable-services.md)
- [<span data-ttu-id="a9029-262">Services et transactions</span><span class="sxs-lookup"><span data-stu-id="a9029-262">Services and Transactions</span></span>](services-and-transactions.md)
