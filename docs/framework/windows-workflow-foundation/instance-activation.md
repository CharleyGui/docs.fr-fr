---
title: Activation d'instance
ms.date: 03/30/2017
ms.assetid: 134c3f70-5d4e-46d0-9d49-469a6643edd8
ms.openlocfilehash: 088722ba19a1f38e8a341e34a8344963021f1113
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64584919"
---
# <a name="instance-activation"></a><span data-ttu-id="1ff21-102">Activation d'instance</span><span class="sxs-lookup"><span data-stu-id="1ff21-102">Instance Activation</span></span>
<span data-ttu-id="1ff21-103">Le magasin d’instances de workflow SQL exécute une tâche interne qui se réveille régulièrement et détecte les instances de workflow exécutables ou activables dans la base de données de persistance.</span><span class="sxs-lookup"><span data-stu-id="1ff21-103">The SQL Workflow Instance Store runs an internal task that periodically wakes up and detects runnable or activatable workflow instances in the persistence database.</span></span> <span data-ttu-id="1ff21-104">En cas de détection d'une instance de workflow exécutable, il avertit l'hôte de workflow capable d'activer l'instance.</span><span class="sxs-lookup"><span data-stu-id="1ff21-104">If it finds a runnable workflow instance, it notifies the workflow host that is capable of activating the instance.</span></span> <span data-ttu-id="1ff21-105">En cas de détection d'une instance de workflow activable, il avertit un hôte générique qui active un hôte de workflow qui, à son tour, exécute l'instance de workflow.</span><span class="sxs-lookup"><span data-stu-id="1ff21-105">If the instance store finds an activatable workflow instance, it notifies a generic host that activates a workflow host, which in turn runs the workflow instance.</span></span> <span data-ttu-id="1ff21-106">Les sections suivantes de cette rubrique décrivent en détail le processus d'activation d'instance.</span><span class="sxs-lookup"><span data-stu-id="1ff21-106">The following sections in this topic explain the instance activation process in detail.</span></span>  
  
## <a name="RunnableSection"></a> <span data-ttu-id="1ff21-107">Détection et activation d’Instances de Workflow exécutables</span><span class="sxs-lookup"><span data-stu-id="1ff21-107">Detecting and Activating Runnable Workflow Instances</span></span>  
 <span data-ttu-id="1ff21-108">Le Store d’Instance de Workflow SQL considère comme une instance de workflow *exécutable* si l’instance n’est pas dans l’état suspendu ou l’état terminé et satisfait les conditions suivantes :</span><span class="sxs-lookup"><span data-stu-id="1ff21-108">The SQL Workflow Instance Store considers a workflow instance *runnable* if the instance is not in the suspended state or the completed state and satisfies the following conditions:</span></span>  
  
- <span data-ttu-id="1ff21-109">L'instance est déverrouillée et a un minuteur en attente qui a expiré.</span><span class="sxs-lookup"><span data-stu-id="1ff21-109">The instance is unlocked and has a pending timer that has expired.</span></span>  
  
- <span data-ttu-id="1ff21-110">L'instance a un verrou périmé.</span><span class="sxs-lookup"><span data-stu-id="1ff21-110">The instance has an expired lock on it.</span></span>  
  
- <span data-ttu-id="1ff21-111">L’instance est déverrouillée et son état est **lors de l’exécution**.</span><span class="sxs-lookup"><span data-stu-id="1ff21-111">The instance is unlocked and its status is **Executing**.</span></span>  
  
 <span data-ttu-id="1ff21-112">Lorsqu'il détecte une instance exécutable, le magasin d'instances de workflow SQL déclenche l'objet <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent>.</span><span class="sxs-lookup"><span data-stu-id="1ff21-112">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> when it finds a runnable instance.</span></span> <span data-ttu-id="1ff21-113">Ensuite, le SqlWorkflowInstanceStore cesse de surveiller jusqu'à ce que l'objet <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> soit appelé une fois sur le magasin.</span><span class="sxs-lookup"><span data-stu-id="1ff21-113">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="1ff21-114">Un hôte de workflow qui s'est abonné à l'objet <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> et capable de charger l'instance exécute l'objet <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> par rapport au magasin d'instances pour charger l'instance en mémoire.</span><span class="sxs-lookup"><span data-stu-id="1ff21-114">A workflow host that has subscribed for the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> and capable of loading the instance executes the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> against the instance store to load the instance into memory.</span></span> <span data-ttu-id="1ff21-115">Un hôte de workflow est considéré comme capable de charger une instance de workflow si l’hôte et l’instance ont les propriétés de métadonnées **WorkflowServiceType** défini sur la même valeur.</span><span class="sxs-lookup"><span data-stu-id="1ff21-115">A workflow host is considered capable of loading a workflow instance if the host and the instance have metadata property **WorkflowServiceType** set to the same value.</span></span>  
  
## <a name="detecting-and-activating-activatable-workflow-instances"></a><span data-ttu-id="1ff21-116">Détection et activation d'instances de workflow activables</span><span class="sxs-lookup"><span data-stu-id="1ff21-116">Detecting and Activating Activatable Workflow Instances</span></span>  
 <span data-ttu-id="1ff21-117">Une instance de workflow est considérée comme *activable* si l’instance est exécutable et qu’aucun hôte de flux de travail qui est capable de charger l’instance n’est en cours d’exécution sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="1ff21-117">A workflow instance is considered *activatable* if the instance is runnable and there is no workflow host that is capable of loading the instance is running on the computer.</span></span> <span data-ttu-id="1ff21-118">Consultez « Détection et activation d'instances de workflow exécutables », ci-dessus, pour obtenir la définition d'une instance de workflow exécutable.</span><span class="sxs-lookup"><span data-stu-id="1ff21-118">See Detecting and Activating Runnable Workflow Instances above for the definition of a runnable workflow instance.</span></span>  
  
 <span data-ttu-id="1ff21-119">Lorsque le magasin d'instances de workflow SQL détecte une instance de workflow activable dans la base de données, il déclenche l'objet <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent>.</span><span class="sxs-lookup"><span data-stu-id="1ff21-119">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> when it finds an activatable workflow instance in the database.</span></span> <span data-ttu-id="1ff21-120">Ensuite, le SqlWorkflowInstanceStore cesse de surveiller jusqu'à ce que l'objet <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> soit appelé une fois sur le magasin.</span><span class="sxs-lookup"><span data-stu-id="1ff21-120">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="1ff21-121">Lorsqu'un hôte générique qui s'est abonné à l'objet <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> reçoit l'événement, il exécute l'objet <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> par rapport au magasin d'instances pour obtenir des paramètres d'activation nécessaires à la création d'un hôte de workflow.</span><span class="sxs-lookup"><span data-stu-id="1ff21-121">When a generic host that has subscribed for the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> receives the event, it executes the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> against the instance store to obtain activation parameters required to create a workflow host.</span></span> <span data-ttu-id="1ff21-122">L'hôte générique utilise ces paramètres d'activation pour créer un hôte de workflow qui, à son tour, charge et exécute l'instance de service exécutable.</span><span class="sxs-lookup"><span data-stu-id="1ff21-122">The generic host uses these activation parameters to create a workflow host, which in turn loads and runs the runnable service instance.</span></span>  
  
## <a name="generic-hosts"></a><span data-ttu-id="1ff21-123">Hôtes génériques</span><span class="sxs-lookup"><span data-stu-id="1ff21-123">Generic Hosts</span></span>  
 <span data-ttu-id="1ff21-124">Un hôte générique est un ordinateur hôte avec la valeur de la propriété de métadonnées **WorkflowServiceType** pour les hôtes génériques est définie sur **WorkflowServiceType.Any** pour indiquer qu’il peut gérer n’importe quel type de flux de travail.</span><span class="sxs-lookup"><span data-stu-id="1ff21-124">A generic host is a host with the value of the metadata property **WorkflowServiceType** for generic hosts is set to **WorkflowServiceType.Any** to indicate that it can handle any workflow type.</span></span> <span data-ttu-id="1ff21-125">Un hôte générique a un paramètre XName nommé **ActivationType**.</span><span class="sxs-lookup"><span data-stu-id="1ff21-125">A generic host has an XName parameter named **ActivationType**.</span></span>  
  
 <span data-ttu-id="1ff21-126">Actuellement, le Store d’Instance de Workflow SQL prend en charge les hôtes génériques ayant la valeur du paramètre ActivationType définie sur **WAS**.</span><span class="sxs-lookup"><span data-stu-id="1ff21-126">Currently, the SQL Workflow Instance Store supports generic hosts with value of the ActivationType parameter set to **WAS**.</span></span> <span data-ttu-id="1ff21-127">Si le paramètre ActivationType n'est pas défini sur WAS, le magasin d'instances de workflow SQL lève un objet <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span><span class="sxs-lookup"><span data-stu-id="1ff21-127">If the ActivationType is not set to WAS, the SQL Workflow Instance Store throws an <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span></span> <span data-ttu-id="1ff21-128">Le Service de gestion de flux de travail qui est fourni avec le [!INCLUDE[dublin](../../../includes/dublin-md.md)] est un hôte générique dont le type d’activation **WAS**.</span><span class="sxs-lookup"><span data-stu-id="1ff21-128">The Workflow Management Service that ships with the [!INCLUDE[dublin](../../../includes/dublin-md.md)] is a generic host that has the activation type set to **WAS**.</span></span>  
  
 <span data-ttu-id="1ff21-129">Pour l'activation WAS, un hôte générique requiert un jeu de paramètres d'activation pour dériver l'adresse de point de terminaison à laquelle les nouveaux hôtes peuvent être activés.</span><span class="sxs-lookup"><span data-stu-id="1ff21-129">For WAS activation, a generic host requires a set of activation parameters to derive the endpoint address at which new hosts can be activated.</span></span> <span data-ttu-id="1ff21-130">Les paramètres d’activation pour l’activation WAS sont : nom du site, chemin d’accès vers l’application relatif au site et chemin d’accès vers le service relatif à l’application.</span><span class="sxs-lookup"><span data-stu-id="1ff21-130">The activation parameters for WAS activation are name of the site, path to the application relative to the site, and path to the service relative to the application.</span></span> <span data-ttu-id="1ff21-131">Lors de l'exécution de l'objet <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>, le magasin d'instances de workflow SQL stocke ces paramètres d'activation.</span><span class="sxs-lookup"><span data-stu-id="1ff21-131">The SQL Workflow Instance Store stores these activation parameters during the execution of the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span></span>  
  
## <a name="runnable-instances-detection-period"></a><span data-ttu-id="1ff21-132">Période de détection des instances activables</span><span class="sxs-lookup"><span data-stu-id="1ff21-132">Runnable Instances Detection Period</span></span>  
 <span data-ttu-id="1ff21-133">Le **période de détection des Instances exécutables** propriété du Store d’Instance de Workflow SQL spécifie la période de temps après lequel le Store d’Instance de Workflow SQL exécute une tâche de détection pour détecter tout workflow exécutable ou activable instances dans la base de données de persistance issue du cycle de détection précédent.</span><span class="sxs-lookup"><span data-stu-id="1ff21-133">The **Runnable Instances Detection Period** property of the SQL Workflow Instance Store specifies the time period after which the SQL Workflow Instance Store runs a detection task to detect any runnable or activatable workflow instances in the persistence database after the previous detection cycle.</span></span> <span data-ttu-id="1ff21-134">Consultez [période de détection des Instances exécutables](runnable-instances-detection-period.md) pour plus d’informations sur cette propriété.</span><span class="sxs-lookup"><span data-stu-id="1ff21-134">See [Runnable Instances Detection Period](runnable-instances-detection-period.md) for more details on this property.</span></span>
