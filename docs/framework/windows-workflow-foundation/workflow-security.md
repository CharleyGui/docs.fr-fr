---
title: Sécurité de workflow
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], workflow security
ms.assetid: d712a566-f435-44c0-b8c0-49298e84b114
ms.openlocfilehash: b14dd600526612b6af8b9fad15f65a748eb0b368
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/15/2019
ms.locfileid: "65637536"
---
# <a name="workflow-security"></a><span data-ttu-id="f6bc8-102">Sécurité de workflow</span><span class="sxs-lookup"><span data-stu-id="f6bc8-102">Workflow Security</span></span>
<span data-ttu-id="f6bc8-103">Windows Workflow Foundation (WF) est intégré à plusieurs technologies différentes, telles que Microsoft SQL Server et Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="f6bc8-103">Windows Workflow Foundation (WF) is integrated with several different technologies, such as Microsoft SQL Server and Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="f6bc8-104">L'interaction avec ces technologies peut poser des problèmes de sécurité dans votre workflow si elle est effectuée de façon incorrecte.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-104">Interacting with these technologies may introduce security issues into your workflow if done improperly.</span></span>

## <a name="persistence-security-concerns"></a><span data-ttu-id="f6bc8-105">Problèmes de sécurité de la persistance</span><span class="sxs-lookup"><span data-stu-id="f6bc8-105">Persistence Security Concerns</span></span>

1. <span data-ttu-id="f6bc8-106">Les flux de travail qui utilisent une activité <xref:System.Activities.Statements.Delay> et la persistance doivent être réactivés par un service.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-106">Workflows that use a <xref:System.Activities.Statements.Delay> activity and persistence need to be reactivated by a service.</span></span> <span data-ttu-id="f6bc8-107">Windows AppFabric utilise le service de gestion de flux de travail (WMS) pour réactiver les flux de travail dont les minuteurs ont expiré.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-107">Windows AppFabric uses the Workflow Management Service (WMS) to reactivate workflows with expired timers.</span></span> <span data-ttu-id="f6bc8-108">WMS crée un <xref:System.ServiceModel.WorkflowServiceHost> pour héberger le flux de travail réactivé.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-108">WMS creates a <xref:System.ServiceModel.WorkflowServiceHost> to host the reactivated workflow.</span></span> <span data-ttu-id="f6bc8-109">Si le service WMS est arrêté, les workflows persistants ne seront pas réactivés à l'expiration de leurs minuteurs.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-109">If the WMS service is stopped, persisted workflows will not be reactivated when their timers expire.</span></span>

2. <span data-ttu-id="f6bc8-110">L'accès à l'instanciation durable doit être protégé contre les entités malveillantes externes au domaine d'application.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-110">Access to durable instancing should be protected against malicious entities external to the application domain.</span></span> <span data-ttu-id="f6bc8-111">En outre, les développeurs doivent veiller à ce qu'il soit impossible d'exécuter du code malveillant dans le même domaine d'application que celui du code d'instanciation durable.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-111">In addition, developers should ensure that malicious code can't be executed in the same application domain as the durable instancing code.</span></span>

3. <span data-ttu-id="f6bc8-112">L'instanciation durable ne doit pas être exécutée avec des autorisations élevées (administrateur).</span><span class="sxs-lookup"><span data-stu-id="f6bc8-112">Durable instancing should not be run with elevated (Administrator) permissions.</span></span>

4. <span data-ttu-id="f6bc8-113">Les données traitées en dehors du domaine d'application doivent être protégées.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-113">Data being processed outside the application domain should be protected.</span></span>

5. <span data-ttu-id="f6bc8-114">Les applications qui requièrent l'isolation de sécurité ne doivent pas partager la même instance d'abstraction de schéma.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-114">Applications that require security isolation should not share the same instance of the schema abstraction.</span></span> <span data-ttu-id="f6bc8-115">De telles applications doivent utiliser des fournisseurs de magasins différents, ou enregistrer les fournisseurs configurés pour utiliser des instanciations différentes du magasin.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-115">Such applications should use different store providers, or store providers configured to use different store instantiations.</span></span>

## <a name="sql-server-security-concerns"></a><span data-ttu-id="f6bc8-116">Problèmes de sécurité SQL Server</span><span class="sxs-lookup"><span data-stu-id="f6bc8-116">SQL Server Security Concerns</span></span>

- <span data-ttu-id="f6bc8-117">Lors de l'utilisation d'un grand nombre d'activités enfants, d'emplacements, de signets, d'extensions hôtes ou d'étendues, ou de signets avec des charges utiles très importantes, la mémoire peut être épuisée ou des quantités inutiles d'espace de base de données peuvent être allouées pendant la persistance.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-117">When large numbers of child activities, locations, bookmarks, host extensions, or scopes are used, or when bookmarks with very large payloads are used, memory can be exhausted, or undue amounts of database space can be allocated during persistence.</span></span> <span data-ttu-id="f6bc8-118">Cette situation peut être atténuée en utilisant la sécurité aux niveaux objet et base de données.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-118">This can be mitigated by using object-level and database-level security.</span></span>

- <span data-ttu-id="f6bc8-119">Lors de l'utilisation de <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, le magasin d'instances doit être sécurisé.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-119">When using <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, the instance store must be secured.</span></span> <span data-ttu-id="f6bc8-120">Pour plus d’informations, consultez [meilleures pratiques SQL Server](https://go.microsoft.com/fwlink/?LinkId=164972).</span><span class="sxs-lookup"><span data-stu-id="f6bc8-120">For more information, see [SQL Server Best Practices](https://go.microsoft.com/fwlink/?LinkId=164972).</span></span>

- <span data-ttu-id="f6bc8-121">Les données sensibles dans le magasin d'instances doivent être chiffrées.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-121">Sensitive data in the instance store should be encrypted.</span></span> <span data-ttu-id="f6bc8-122">Pour plus d’informations, consultez [chiffrement SQL](https://go.microsoft.com/fwlink/?LinkId=164976).</span><span class="sxs-lookup"><span data-stu-id="f6bc8-122">For more information, see [SQL Security Encryption](https://go.microsoft.com/fwlink/?LinkId=164976).</span></span>

- <span data-ttu-id="f6bc8-123">Étant donné que la chaîne de connexion à une base de données est souvent incluse dans un fichier de configuration, la sécurité au niveau fenêtre (ACL) doit être utilisée pour vérifier que le fichier de configuration (Web.Config généralement) est sécurisé, et que les informations de connexion et de mot de passe ne sont pas incluses dans la chaîne de connexion.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-123">Since the database connection string is often included in a configuration file, windows-level security (ACL) should be used to ensure that the configuration file (Web.Config usually) is secure, and that login and password information are not included in the connection string.</span></span> <span data-ttu-id="f6bc8-124">L'authentification Windows doit être utilisée entre la base de données et le serveur Web à la place.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-124">Windows authentication should be used between the database and the web server instead.</span></span>

## <a name="considerations-for-workflowservicehost"></a><span data-ttu-id="f6bc8-125">Considérations sur WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="f6bc8-125">Considerations for WorkflowServiceHost</span></span>

- <span data-ttu-id="f6bc8-126">Points de terminaison Windows Communication Foundation (WCF) utilisés dans les workflows doivent être sécurisés.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-126">Windows Communication Foundation (WCF) endpoints used in workflows should be secured.</span></span> <span data-ttu-id="f6bc8-127">Pour plus d’informations, consultez [vue d’ensemble de la sécurité WCF](https://go.microsoft.com/fwlink/?LinkID=164975).</span><span class="sxs-lookup"><span data-stu-id="f6bc8-127">For more information, see [WCF Security Overview](https://go.microsoft.com/fwlink/?LinkID=164975).</span></span>

- <span data-ttu-id="f6bc8-128">L'autorisation au niveau hôte peut être implémentée à l'aide de <xref:System.ServiceModel.ServiceAuthorizationManager>.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-128">Host-level authorization can be implemented by using <xref:System.ServiceModel.ServiceAuthorizationManager>.</span></span> <span data-ttu-id="f6bc8-129">Consultez [Comment : Créer un gestionnaire d’autorisation personnalisé pour un Service](https://go.microsoft.com/fwlink/?LinkId=192228) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-129">See [How To: Create a Custom Authorization Manager for a Service](https://go.microsoft.com/fwlink/?LinkId=192228) for details.</span></span>

- <span data-ttu-id="f6bc8-130">Le ServiceSecurityContext pour le message entrant est également disponible dans le workflow en accédant à OperationContext.</span><span class="sxs-lookup"><span data-stu-id="f6bc8-130">The ServiceSecurityContext for the incoming message is also available from within workflow by accessing OperationContext.</span></span>

## <a name="wf-security-pack-ctp"></a><span data-ttu-id="f6bc8-131">WF Security Pack CTP</span><span class="sxs-lookup"><span data-stu-id="f6bc8-131">WF Security Pack CTP</span></span>
 <span data-ttu-id="f6bc8-132">Microsoft WF Security Pack CTP 1 est la première version community technology preview (CTP) d’un ensemble d’activités et de leur implémentation basée sur [Windows Workflow Foundation](index.md) dans [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF (4) et [Windows Identity Foundation (WIF)](../security/index.md).</span><span class="sxs-lookup"><span data-stu-id="f6bc8-132">The Microsoft WF Security Pack CTP 1 is the first community technology preview (CTP) release of a set of activities and their implementation based on [Windows Workflow Foundation](index.md) in [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) and the [Windows Identity Foundation (WIF)](../security/index.md).</span></span>  <span data-ttu-id="f6bc8-133">Microsoft WF Security Pack CTP 1 contient les deux activités et leurs concepteurs qui expliquent comment vérifier facilement plusieurs scénarios liés à la sécurité en utilisant un workflow, notamment :</span><span class="sxs-lookup"><span data-stu-id="f6bc8-133">The Microsoft WF Security Pack CTP 1 contains both activities and their designers which illustrate how to easily enable various security-related scenarios using workflow, including:</span></span>

1. <span data-ttu-id="f6bc8-134">Emprunter l'identité d'un client dans le workflow</span><span class="sxs-lookup"><span data-stu-id="f6bc8-134">Impersonating a client identity in the workflow</span></span>

2. <span data-ttu-id="f6bc8-135">Autorisation dans-le workflow, telle que PrincipalPermission et validation des revendications</span><span class="sxs-lookup"><span data-stu-id="f6bc8-135">In-workflow authorization, such as PrincipalPermission and validation of Claims</span></span>

3. <span data-ttu-id="f6bc8-136">Messagerie authentifiée en utilisant les ClientCredentials spécifiés dans le workflow, tels que le nom d'utilisateur/mot de passe ou un jeton extrait d'un service d'émission de jeton de sécurité (STS)</span><span class="sxs-lookup"><span data-stu-id="f6bc8-136">Authenticated messaging using ClientCredentials specified in the workflow, such as username/password or a token retrieved from a Security Token Service (STS)</span></span>

4. <span data-ttu-id="f6bc8-137">Transfert d'un jeton de sécurité client vers un service principal (délégation basée sur les revendications) à l'aide de WS-Trust ActAs</span><span class="sxs-lookup"><span data-stu-id="f6bc8-137">Flowing a client security token to a back-end service (claims-based delegation) using WS-Trust ActAs</span></span>

<span data-ttu-id="f6bc8-138">Pour plus d’informations et pour télécharger WF Security Pack CTP, consultez : [WF Security Pack CTP](https://archive.codeplex.com/?p=wf)</span><span class="sxs-lookup"><span data-stu-id="f6bc8-138">For more information and to download the WF Security Pack CTP, see: [WF Security Pack CTP](https://archive.codeplex.com/?p=wf)</span></span>
