---
title: Utilisation de la portée d'édition
ms.date: 03/30/2017
ms.assetid: 79306f9e-318b-4687-9863-8b93d1841716
ms.openlocfilehash: 13f23289f0b764b80f971d3e514f3b12acfbfffc
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79142652"
---
# <a name="using-editing-scope"></a><span data-ttu-id="ecae2-102">Utilisation de la portée d'édition</span><span class="sxs-lookup"><span data-stu-id="ecae2-102">Using Editing Scope</span></span>
<span data-ttu-id="ecae2-103">Cet exemple montre comment traiter par lot un ensemble de modifications afin qu'elles puissent être annulées dans une unité atomique unique.</span><span class="sxs-lookup"><span data-stu-id="ecae2-103">This sample demonstrates how to batch a set of changes so that they can be undone in a single atomic unit.</span></span> <span data-ttu-id="ecae2-104">Par défaut, les actions effectuées par un auteur de concepteur d'activités sont automatiquement intégrées dans le système d'annulation/de rétablissement.</span><span class="sxs-lookup"><span data-stu-id="ecae2-104">By default, the actions taken by an activity designer author are automatically integrated into the Undo/Redo system.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="ecae2-105">Illustre le</span><span class="sxs-lookup"><span data-stu-id="ecae2-105">Demonstrates</span></span>  
 <span data-ttu-id="ecae2-106">Portée d'édition et annulation/rétablissement.</span><span class="sxs-lookup"><span data-stu-id="ecae2-106">Editing scope and Undo and Redo.</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="ecae2-107">Discussions</span><span class="sxs-lookup"><span data-stu-id="ecae2-107">Discussion</span></span>  
 <span data-ttu-id="ecae2-108">Cet exemple montre comment traiter par lot un ensemble de modifications apportées à l'arborescence <xref:System.Activities.Presentation.Model.ModelItem> dans une unité de travail unique.</span><span class="sxs-lookup"><span data-stu-id="ecae2-108">This sample demonstrates how to batch a set of changes to the <xref:System.Activities.Presentation.Model.ModelItem> tree within a single unit of work.</span></span> <span data-ttu-id="ecae2-109">Notez que, lors de la liaison à des valeurs <xref:System.Activities.Presentation.Model.ModelItem> directement à partir d'un concepteur WPF, les modifications sont appliquées automatiquement.</span><span class="sxs-lookup"><span data-stu-id="ecae2-109">Note that when binding to <xref:System.Activities.Presentation.Model.ModelItem> values directly from a WPF designer, changes are applied automatically.</span></span> <span data-ttu-id="ecae2-110">Cet exemple montre ce qui doit être fait lorsque plusieurs modifications qui doivent être traitées par lot sont apportées via du code impératif, plutôt que par une modification unique.</span><span class="sxs-lookup"><span data-stu-id="ecae2-110">This sample demonstrates what must be done when multiple changes to be batched are being made through imperative code, rather than a single change.</span></span>  
  
 <span data-ttu-id="ecae2-111">Dans cet exemple, trois activités sont ajoutées.</span><span class="sxs-lookup"><span data-stu-id="ecae2-111">In this sample, three activities are added.</span></span> <span data-ttu-id="ecae2-112">Lorsque la modification commence, <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> est appelé sur une instance de <xref:System.Activities.Presentation.Model.ModelItem>.</span><span class="sxs-lookup"><span data-stu-id="ecae2-112">When editing begins, <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> is called on an instance of <xref:System.Activities.Presentation.Model.ModelItem>.</span></span> <span data-ttu-id="ecae2-113">Les modifications apportées à l'arborescence <xref:System.Activities.Presentation.Model.ModelItem> dans cette portée d'édition sont traitées par lot.</span><span class="sxs-lookup"><span data-stu-id="ecae2-113">Changes made to the <xref:System.Activities.Presentation.Model.ModelItem> tree within this editing scope are batched.</span></span> <span data-ttu-id="ecae2-114">La commande <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> retourne un <xref:System.Activities.Presentation.Model.EditingScope>, qui peut être utilisé pour contrôler cette instance.</span><span class="sxs-lookup"><span data-stu-id="ecae2-114">The <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> command returns an <xref:System.Activities.Presentation.Model.EditingScope>, which can be used to control this instance.</span></span> <span data-ttu-id="ecae2-115"><xref:System.Activities.Presentation.Model.EditingScope.OnComplete%2A> ou <xref:System.Activities.Presentation.Model.EditingScope.OnRevert%2A> peut être appelé pour valider ou rétablir la portée d'édition.</span><span class="sxs-lookup"><span data-stu-id="ecae2-115">Either <xref:System.Activities.Presentation.Model.EditingScope.OnComplete%2A> or <xref:System.Activities.Presentation.Model.EditingScope.OnRevert%2A> can be called to either commit or revert the editing scope.</span></span>  
  
 <span data-ttu-id="ecae2-116">Vous pouvez également imbriquer des objets <xref:System.Activities.Presentation.Model.EditingScope>, ce qui permet de suivre de plusieurs ensembles de modifications dans le cadre d'une plus grande portée d'édition et de les contrôler individuellement.</span><span class="sxs-lookup"><span data-stu-id="ecae2-116">You can also nest <xref:System.Activities.Presentation.Model.EditingScope> objects, which allows for multiple sets of changes to be tracked as part of a larger editing scope and can be controlled individually.</span></span> <span data-ttu-id="ecae2-117">Un scénario qui peut utiliser cette fonctionnalité consisterait en des modifications apportées dans plusieurs boîtes de dialogue qui doivent être validées ou rétablies séparément, avec toutes les modifications traitées en tant qu'opération atomique unique.</span><span class="sxs-lookup"><span data-stu-id="ecae2-117">A scenario that may use this feature would be when changes from multiple dialogs must be committed or reverted separately, with all changes being treated as a single atomic operation.</span></span> <span data-ttu-id="ecae2-118">Dans cet exemple, les portées d'édition sont empilées à l'aide d'un <xref:System.Collections.ObjectModel.ObservableCollection%601> de type <xref:System.Activities.Presentation.Model.ModelEditingScope>.</span><span class="sxs-lookup"><span data-stu-id="ecae2-118">In this sample, the editing scopes are stacked using an <xref:System.Collections.ObjectModel.ObservableCollection%601> of type <xref:System.Activities.Presentation.Model.ModelEditingScope>.</span></span> <span data-ttu-id="ecae2-119"><xref:System.Collections.ObjectModel.ObservableCollection%601> est utilisé afin que la profondeur de l'imbrication puisse être observée sur l'aire du concepteur.</span><span class="sxs-lookup"><span data-stu-id="ecae2-119">The <xref:System.Collections.ObjectModel.ObservableCollection%601> is used so that the depth of the nesting can be observed on the designer surface.</span></span>  
  
## <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="ecae2-120">Pour configurer, générer et exécuter l'exemple</span><span class="sxs-lookup"><span data-stu-id="ecae2-120">To set up, build, and run the sample</span></span>  
  
1. <span data-ttu-id="ecae2-121">Générez et exécutez l'exemple, puis utilisez les boutons situés à gauche pour modifier le workflow.</span><span class="sxs-lookup"><span data-stu-id="ecae2-121">Build and run the sample, and then use the buttons on the left to modify the workflow.</span></span>  
  
2. <span data-ttu-id="ecae2-122">Cliquez **sur Open Editing Scope**.</span><span class="sxs-lookup"><span data-stu-id="ecae2-122">Click **Open Editing Scope**.</span></span>  
  
    1. <span data-ttu-id="ecae2-123">Cette commande appelle <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> qui crée une portée d'édition et le place sur la pile d'édition.</span><span class="sxs-lookup"><span data-stu-id="ecae2-123">This command calls <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> that creates an editing scope and pushes it onto the editing stack.</span></span>  
  
    2. <span data-ttu-id="ecae2-124">Trois activités sont ensuite ajoutées au <xref:System.Activities.Presentation.Model.ModelItem> sélectionné.</span><span class="sxs-lookup"><span data-stu-id="ecae2-124">Three activities are then added to the selected <xref:System.Activities.Presentation.Model.ModelItem>.</span></span> <span data-ttu-id="ecae2-125">Notez que si la portée d'édition n'avait pas été ouverte avec <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A>, trois nouvelles activités apparaitraient sur la zone de conception.</span><span class="sxs-lookup"><span data-stu-id="ecae2-125">Note that if the editing scope had not been opened with <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A>, three new activities would appear on the designer canvas.</span></span> <span data-ttu-id="ecae2-126">Étant donné que cette opération est toujours en attente dans <xref:System.Activities.Presentation.Model.EditingScope>, le concepteur n'est pas encore mis à jour.</span><span class="sxs-lookup"><span data-stu-id="ecae2-126">Because this operation is still pending within the <xref:System.Activities.Presentation.Model.EditingScope>, the designer is not yet updated.</span></span>  
  
3. <span data-ttu-id="ecae2-127">Press **Close Editing Scope** pour engager la portée de montage.</span><span class="sxs-lookup"><span data-stu-id="ecae2-127">Press **Close Editing Scope** to commit the editing scope.</span></span> <span data-ttu-id="ecae2-128">Trois activités apparaissent dans le concepteur.</span><span class="sxs-lookup"><span data-stu-id="ecae2-128">Three activities appear in the designer.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="ecae2-129">Les exemples peuvent déjà être installés sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="ecae2-129">The samples may already be installed on your machine.</span></span> <span data-ttu-id="ecae2-130">Recherchez le répertoire (par défaut) suivant avant de continuer.</span><span class="sxs-lookup"><span data-stu-id="ecae2-130">Check for the following (default) directory before continuing.</span></span>  
>
> `<InstallDrive>:\WF_WCF_Samples`  
>
> <span data-ttu-id="ecae2-131">Si ce répertoire n’existe pas, rendez-vous sur [Windows Communication Foundation (WCF) et Windows Workflow Foundation (WF) Samples pour .NET Framework 4 pour](https://www.microsoft.com/download/details.aspx?id=21459) télécharger tous les Windows Communication Foundation (WCF) et [!INCLUDE[wf1](../../../../includes/wf1-md.md)] des échantillons.</span><span class="sxs-lookup"><span data-stu-id="ecae2-131">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="ecae2-132">Cet exemple se trouve dans le répertoire suivant.</span><span class="sxs-lookup"><span data-stu-id="ecae2-132">This sample is located in the following directory.</span></span>  
>
> `<InstallDrive>:\WF_WCF_Samples\WF\Basic\CustomActivities\CustomActivityDesigners\UsingEditingScope`
