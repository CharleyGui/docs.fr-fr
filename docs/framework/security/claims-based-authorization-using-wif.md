---
title: Autorisation basée sur les revendications utilisant WIF
ms.date: 03/30/2017
ms.assetid: e24000a3-8fd8-4c0e-bdf0-39882cc0f6d8
author: BrucePerlerMS
ms.openlocfilehash: 0c99053610c8df9b6825c773a09cb1330d1e22f4
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64650447"
---
# <a name="claims-based-authorization-using-wif"></a><span data-ttu-id="26efe-102">Autorisation basée sur les revendications utilisant WIF</span><span class="sxs-lookup"><span data-stu-id="26efe-102">Claims Based Authorization Using WIF</span></span>
<span data-ttu-id="26efe-103">Dans une application de partie de confiance, une autorisation détermine les ressources auxquelles une identité authentifié est autorisé à accéder et les opérations qu'elle est autorisée à exécuter sur ces ressources.</span><span class="sxs-lookup"><span data-stu-id="26efe-103">In a relying party application, authorization determines what resources an authenticated identity is allowed to access and what operations it is allowed to perform on those resources.</span></span> <span data-ttu-id="26efe-104">Une autorisation incorrecte ou faible entraîne la divulgation d'informations et la falsification de données.</span><span class="sxs-lookup"><span data-stu-id="26efe-104">Improper or weak authorization leads to information disclosure and data tampering.</span></span> <span data-ttu-id="26efe-105">Cette rubrique présente les méthodes disponibles pour implémenter une autorisation pour les applications Web ASP.NET qui prennent en charge les revendications et les services qui utilisent Windows Identity Foundation (WIF) et le service d'émission de jetons de sécurité (STS), par exemple, le service de contrôle d'accès (ACS) Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="26efe-105">This topic outlines the available approaches to implementing authorization for claims-aware ASP.NET web applications and services using Windows Identity Foundation (WIF) and a Security Token Service (STS), for example, the Windows Azure Access Control Service (ACS).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="26efe-106">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="26efe-106">Overview</span></span>  
 <span data-ttu-id="26efe-107">Depuis sa version initiale, .NET Framework propose un mécanisme flexible pour implémenter une autorisation.</span><span class="sxs-lookup"><span data-stu-id="26efe-107">Since its first version, the .NET Framework has offered a flexible mechanism for implementing authorization.</span></span> <span data-ttu-id="26efe-108">Ce mécanisme est basé sur deux interfaces simples : **IPrincipal** et **IIdentity**.</span><span class="sxs-lookup"><span data-stu-id="26efe-108">This mechanism is based on two simple interfaces—**IPrincipal** and **IIdentity**.</span></span> <span data-ttu-id="26efe-109">Les implémentations concrètes d’**IIdentity** représentent un utilisateur authentifié.</span><span class="sxs-lookup"><span data-stu-id="26efe-109">Concrete implementations of **IIdentity** represent an authenticated user.</span></span> <span data-ttu-id="26efe-110">Par exemple, l’implémentation de **WindowsIdentity** représente un utilisateur qui est authentifié par Active Directory et **GenericIdentity** représente un utilisateur dont l’identité est vérifiée par le biais d’une procédure d’authentification personnalisée.</span><span class="sxs-lookup"><span data-stu-id="26efe-110">For example, the **WindowsIdentity** implementation represents a user who is authenticated by Active Directory, and **GenericIdentity** represents a user whose identity is verified via a custom authentication process.</span></span> <span data-ttu-id="26efe-111">Les implémentations concrètes d’**IPrincipal** aident à vérifier les autorisations à l’aide des rôles en fonction du magasin de rôles.</span><span class="sxs-lookup"><span data-stu-id="26efe-111">Concrete implementations of **IPrincipal** help to check permissions using roles depending on the role store.</span></span> <span data-ttu-id="26efe-112">Par exemple, **WindowsPrincipal** vérifie si **WindowsIdentity** est membre des groupes Active Directory.</span><span class="sxs-lookup"><span data-stu-id="26efe-112">For example, **WindowsPrincipal** checks **WindowsIdentity** for membership in Active Directory groups.</span></span> <span data-ttu-id="26efe-113">Cette vérification est effectuée en appelant la méthode **IsInRole** sur l’interface **IPrincipal**.</span><span class="sxs-lookup"><span data-stu-id="26efe-113">This check is performed by calling the **IsInRole** method on the **IPrincipal** interface.</span></span> <span data-ttu-id="26efe-114">La vérification de l'accès basé sur les rôles s'appelle le Contrôle d'accès basé sur des rôles (RBAC).</span><span class="sxs-lookup"><span data-stu-id="26efe-114">Checking access based on roles is called Role-Based Access Control (RBAC).</span></span> <span data-ttu-id="26efe-115">Pour plus d’informations, consultez [Contrôle d’accès en fonction du rôle](../../../docs/framework/security/claims-based-authorization-using-wif.md#BKMK_1).</span><span class="sxs-lookup"><span data-stu-id="26efe-115">For more information, see [Role-Based Access Control](../../../docs/framework/security/claims-based-authorization-using-wif.md#BKMK_1).</span></span>  <span data-ttu-id="26efe-116">Les revendications peuvent être utilisées pour distribuer des informations sur les rôles pour prendre en charge des mécanismes d'autorisation familiers, basés sur les rôles.</span><span class="sxs-lookup"><span data-stu-id="26efe-116">Claims can be used to carry information about roles to support familiar, role-based authorization mechanisms.</span></span>  
  
 <span data-ttu-id="26efe-117">Les revendications peuvent également être utilisées pour activer des décisions d'autorisation plus compliquées au-delà des rôles.</span><span class="sxs-lookup"><span data-stu-id="26efe-117">Claims can also be used to enable more complicated authorization decisions beyond roles.</span></span> <span data-ttu-id="26efe-118">Les revendications peuvent être basées sur quasiment n’importe quelle information relative à l’utilisateur : âge, code postal, pointure, etc. Un mécanisme de contrôle d’accès basé sur des revendications arbitraires est appelé « autorisation basée sur les revendications ».</span><span class="sxs-lookup"><span data-stu-id="26efe-118">Claims can be based on virtually any information about the user - age, zip code, shoe size, etc. An access control mechanism that is based on arbitrary claims is called claims-based authorization.</span></span> <span data-ttu-id="26efe-119">Pour plus d’informations, consultez [Autorisation basée sur les revendications](../../../docs/framework/security/claims-based-authorization-using-wif.md#BKMK_2).</span><span class="sxs-lookup"><span data-stu-id="26efe-119">For more information, see [Claims-based Authorization](../../../docs/framework/security/claims-based-authorization-using-wif.md#BKMK_2).</span></span>  
  
<a name="BKMK_1"></a>   
## <a name="role-based-access-control"></a><span data-ttu-id="26efe-120">Contrôle d'accès basé sur des rôles</span><span class="sxs-lookup"><span data-stu-id="26efe-120">Role-Based Access Control</span></span>  
 <span data-ttu-id="26efe-121">RBAC est une méthode d'autorisation dans laquelle les autorisations utilisateur sont gérées et appliquées par une application basée sur les rôles d'utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="26efe-121">RBAC is an authorization approach in which user permissions are managed and enforced by an application based on user roles.</span></span> <span data-ttu-id="26efe-122">Si un utilisateur a un rôle requis pour exécuter une action, l'accès est autorisé ; sinon, il est refusé.</span><span class="sxs-lookup"><span data-stu-id="26efe-122">If a user has a role that is required to perform an action, the access is granted; otherwise, access is denied.</span></span>  
  
### <a name="iprincipalisinrole-method"></a><span data-ttu-id="26efe-123">Méthode IPrincipal.IsInRole</span><span class="sxs-lookup"><span data-stu-id="26efe-123">IPrincipal.IsInRole Method</span></span>  
 <span data-ttu-id="26efe-124">Pour implémenter la méthode RBAC dans les applications prenant en charge les revendications, utilisez la méthode **IsInRole()** dans l’interface **IPrinicpal**, comme vous le feriez dans des applications qui ne prennent pas en charge les revendications.</span><span class="sxs-lookup"><span data-stu-id="26efe-124">To implement the RBAC approach in claims-aware applications, use the **IsInRole()** method in the **IPrinicpal** interface, just as you would in non-claims-aware applications.</span></span> <span data-ttu-id="26efe-125">Il existe plusieurs façons d’utiliser la méthode **IsInRole()**  :</span><span class="sxs-lookup"><span data-stu-id="26efe-125">There are several ways of using the **IsInRole()** method:</span></span>  
  
- <span data-ttu-id="26efe-126">En appelant explicitement **IPrincipal.IsInRole("Administrator")**.</span><span class="sxs-lookup"><span data-stu-id="26efe-126">Explicitly calling on **IPrincipal.IsInRole("Administrator")**.</span></span> <span data-ttu-id="26efe-127">Dans cette approche, les résultats sont une valeur booléenne.</span><span class="sxs-lookup"><span data-stu-id="26efe-127">In this approach, the outcome is a Boolean.</span></span> <span data-ttu-id="26efe-128">Utilisez-les dans vos instructions conditionnelles.</span><span class="sxs-lookup"><span data-stu-id="26efe-128">Use it in your conditional statements.</span></span> <span data-ttu-id="26efe-129">Ils peuvent être utilisés arbitrairement n'importe où dans votre code.</span><span class="sxs-lookup"><span data-stu-id="26efe-129">It can be used arbitrarily any place in your code.</span></span>  
  
- <span data-ttu-id="26efe-130">En utilisant la demande de sécurité **PrincipalPermission.Demand()**.</span><span class="sxs-lookup"><span data-stu-id="26efe-130">Using the security demand **PrincipalPermission.Demand()**.</span></span> <span data-ttu-id="26efe-131">Dans cette approche, le résultat est une exception si jamais la demande n'est pas satisfaite.</span><span class="sxs-lookup"><span data-stu-id="26efe-131">In this approach, the outcome is an exception in case the demand is not satisfied.</span></span> <span data-ttu-id="26efe-132">Cela doit répondre à votre stratégie de gestion des exceptions.</span><span class="sxs-lookup"><span data-stu-id="26efe-132">This should fit your exception handling strategy.</span></span> <span data-ttu-id="26efe-133">La levée d’exceptions est beaucoup plus coûteuse du point de vue des performances que le retour de valeurs booléennes.</span><span class="sxs-lookup"><span data-stu-id="26efe-133">Throwing exceptions is much more expensive from a performance perspective compared to returning Boolean.</span></span> <span data-ttu-id="26efe-134">Elle peut être utilisée n'importe où dans votre code.</span><span class="sxs-lookup"><span data-stu-id="26efe-134">This can be used any place in your code.</span></span>  
  
- <span data-ttu-id="26efe-135">En utilisant les attributs déclaratifs **[PrincipalPermission(SecurityAction.Demand, Role = "Administrator")]**.</span><span class="sxs-lookup"><span data-stu-id="26efe-135">Using the declarative attributes **[PrincipalPermission(SecurityAction.Demand, Role = "Administrator")]**.</span></span> <span data-ttu-id="26efe-136">Cette approche est appelée déclarative parce qu'elle est utilisée pour décorer les méthodes.</span><span class="sxs-lookup"><span data-stu-id="26efe-136">This approach is called declarative, because it is used to decorate methods.</span></span> <span data-ttu-id="26efe-137">Elle ne peut pas être utilisée dans les blocs de code dans les implémentations de la méthode.</span><span class="sxs-lookup"><span data-stu-id="26efe-137">It cannot be used in code blocks inside the method’s implementations.</span></span> <span data-ttu-id="26efe-138">Le résultat est une exception si jamais la demande n'est pas satisfaite.</span><span class="sxs-lookup"><span data-stu-id="26efe-138">The outcome is an exception in case the demand is not satisfied.</span></span> <span data-ttu-id="26efe-139">Vous devez vous assurer qu'elle répond à votre stratégie de gestion des exceptions.</span><span class="sxs-lookup"><span data-stu-id="26efe-139">You should make sure that it fits your exception-handling strategy.</span></span>  
  
- <span data-ttu-id="26efe-140">En utilisant l’autorisation d’URL, à l’aide de la section **\<authorization>** dans **web.config**. Cette approche convient lorsque vous gérez une autorisation au niveau d'une URL.</span><span class="sxs-lookup"><span data-stu-id="26efe-140">Using URL authorization, using the **\<authorization>** section in **web.config**. This approach is suitable when you are managing authorization on a URL level.</span></span> <span data-ttu-id="26efe-141">Il s'agit du niveau le plus simple parmi ceux précédemment mentionnés.</span><span class="sxs-lookup"><span data-stu-id="26efe-141">This is the most coarse level among those previously mentioned.</span></span> <span data-ttu-id="26efe-142">L'avantage de cette méthode est que des modifications sont apportées au fichier de configuration, ce qui signifie que le code ne doit pas être compilé pour tirer parti de la modification.</span><span class="sxs-lookup"><span data-stu-id="26efe-142">The advantage of this approach is that changes are made in the configuration file, which means that the code should not be compiled to take advantage of the change.</span></span>  
  
### <a name="expressing-roles-as-claims"></a><span data-ttu-id="26efe-143">Expression de rôles comme revendications</span><span class="sxs-lookup"><span data-stu-id="26efe-143">Expressing Roles as Claims</span></span>  
 <span data-ttu-id="26efe-144">Quand la méthode **IsInRole()** est appelée, un contrôle est effectué pour déterminer si l’utilisateur actif détient ce rôle.</span><span class="sxs-lookup"><span data-stu-id="26efe-144">When the **IsInRole()** method is called, there is a check made to see if the current user has that role.</span></span> <span data-ttu-id="26efe-145">Dans les applications qui prennent en charge les revendications, le rôle est exprimé par un rôle de revendication qui doit être disponible dans le jeton.</span><span class="sxs-lookup"><span data-stu-id="26efe-145">In claims-aware applications, the role is expressed by a role claim type that should be available in the token.</span></span> <span data-ttu-id="26efe-146">Le type de revendication du rôle est exprimé à l'aide de l'URI suivante :</span><span class="sxs-lookup"><span data-stu-id="26efe-146">The role claim type is expressed using the following URI:</span></span>  
  
 `http://schemas.microsoft.com/ws/2008/06/identity/claims/role`
  
 <span data-ttu-id="26efe-147">Il existe plusieurs façons d'enrichir un jeton avec un type de revendication du rôle :</span><span class="sxs-lookup"><span data-stu-id="26efe-147">There are several ways to enrich a token with a role claim type:</span></span>  
  
- <span data-ttu-id="26efe-148">**Lors de l’émission de jeton**.</span><span class="sxs-lookup"><span data-stu-id="26efe-148">**During token issuance**.</span></span> <span data-ttu-id="26efe-149">Quand un utilisateur est authentifié, la revendication de rôle peut être émise par le STS du fournisseur d’identité ou par un fournisseur de fédération tel que le service de contrôle d’accès (ACS) Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="26efe-149">When a user is authenticated the role claim can be issued by the identity provider STS or by a federation provider such as the Windows Azure Access Control Service (ACS).</span></span>  
  
- <span data-ttu-id="26efe-150">**Transformation des revendications aléatoires en type de rôle de revendications à l’aide de ClaimsAuthenticationManager**.</span><span class="sxs-lookup"><span data-stu-id="26efe-150">**Transforming arbitrary claims into of claims role type using ClaimsAuthenticationManager**.</span></span> <span data-ttu-id="26efe-151">ClaimsAuthorizationManager est un composant qui fournit une partie du WIF.</span><span class="sxs-lookup"><span data-stu-id="26efe-151">The ClaimsAuthenticationManager is a component that ships as part of WIF.</span></span> <span data-ttu-id="26efe-152">Il permet aux demandes d'être interceptées lorsqu'elles lancent une application, en inspectant des jetons et en les transformant par l'ajout, la modification, ou la suppression de revendications.</span><span class="sxs-lookup"><span data-stu-id="26efe-152">It allows requests to be intercepted when they launch an application, inspecting tokens and transforming them by adding, changing, or removing claims.</span></span> <span data-ttu-id="26efe-153">Pour plus d’informations sur l’utilisation de ClaimsAuthenticationManager pour transformer les revendications, consultez [How To : Contrôle d’accès (RBAC) en fonction du rôle de l’implémenter dans une Application ASP.NET prenant en charge de revendications à l’aide de WIF et ACS](https://go.microsoft.com/fwlink/?LinkID=247445).</span><span class="sxs-lookup"><span data-stu-id="26efe-153">For more information about how to use ClaimsAuthenticationManager for transforming claims, see [How To: Implement Role Based Access Control (RBAC) in a Claims Aware ASP.NET Application Using WIF and ACS](https://go.microsoft.com/fwlink/?LinkID=247445).</span></span>  
  
- <span data-ttu-id="26efe-154">**Mappage des revendications arbitraires à un type de rôle à l’aide de la section de configuration samlSecurityTokenRequirement** : une approche déclarative dans laquelle la transformation des revendications est effectuée à l’aide de la configuration et aucun codage n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="26efe-154">**Mapping arbitrary claims to a role type using the samlSecurityTokenRequirement configuration section**—A declarative approach where the claims transformation is done using only the configuration and no coding is required.</span></span>  
  
<a name="BKMK_2"></a>   
## <a name="claims-based-authorization"></a><span data-ttu-id="26efe-155">Autorisation basée sur des revendications</span><span class="sxs-lookup"><span data-stu-id="26efe-155">Claims-based Authorization</span></span>  
 <span data-ttu-id="26efe-156">L'autorisation basée sur des revendications est une approche dans laquelle la décision d'accorder ou de refuser l'accès est basée sur la logique arbitraire qui utilise des données disponibles dans les revendications pour permettre la prise de décision.</span><span class="sxs-lookup"><span data-stu-id="26efe-156">Claims-based authorization is an approach where the authorization decision to grant or deny access is based on arbitrary logic that uses data available in claims to make the decision.</span></span> <span data-ttu-id="26efe-157">N'oubliez pas que dans le cas de RBAC, la seule revendication utilisée était la revendication du type de rôle.</span><span class="sxs-lookup"><span data-stu-id="26efe-157">Recall that in the case of RBAC, the only claim used was role type claim.</span></span> <span data-ttu-id="26efe-158">Une revendication du type de rôle a été utilisée pour vérifier si l'utilisateur appartient au rôle spécifique ou non.</span><span class="sxs-lookup"><span data-stu-id="26efe-158">A role type claim was used to check if the user belongs to specific role or not.</span></span> <span data-ttu-id="26efe-159">Pour illustrer le processus de prise de décision à propos des autorisations à l'aide de l'approche basée sur les revendications, tenez-compte des étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="26efe-159">To illustrate the process of making the authorization decisions using claims-based authorization approach, consider the following steps:</span></span>  
  
1. <span data-ttu-id="26efe-160">L'application reçoit une demande qui requiert que l'utilisateur soit authentifié.</span><span class="sxs-lookup"><span data-stu-id="26efe-160">The application receives a request that requires the user is authenticated.</span></span>  
  
2. <span data-ttu-id="26efe-161">WIF redirige l'utilisateur vers son fournisseur d'identité, une fois qu'il est authentifié, la demande d'application est effectuée avec un jeton de sécurité associé qui représente l'utilisateur contenant les revendications associées.</span><span class="sxs-lookup"><span data-stu-id="26efe-161">WIF redirects the user to their identity provider, after they are authenticated the application request is made with an associated security token representing the user containing claims about them.</span></span> <span data-ttu-id="26efe-162">WIF associe ces revendications avec l'entité qui représente l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="26efe-162">WIF associates those claims with the principal that represents the user.</span></span>  
  
3. <span data-ttu-id="26efe-163">L'application transmet les revendications au mécanisme de logique de décision.</span><span class="sxs-lookup"><span data-stu-id="26efe-163">The application passes the claims to the decision logic mechanism.</span></span> <span data-ttu-id="26efe-164">Il peut s'agir d'un code en mémoire, d'un appel à un service Web, d'une requête à une base de données, d'un moteur de règles complexe ou de l'utilisation de ClaimsAuthorizationManager.</span><span class="sxs-lookup"><span data-stu-id="26efe-164">It can be in-memory code, a call to a web service, a query to a database, a sophisticated rules engine, or using the ClaimsAuthorizationManager.</span></span>  
  
4. <span data-ttu-id="26efe-165">Le mécanisme de décision calcule les résultats en fonction des revendications.</span><span class="sxs-lookup"><span data-stu-id="26efe-165">The decision mechanism calculates the outcome based on the claims.</span></span>  
  
5. <span data-ttu-id="26efe-166">L'accès est accordé si la valeur des résultats est true et refusé si la valeur est false.</span><span class="sxs-lookup"><span data-stu-id="26efe-166">Access is granted if the outcome is true and denied if it is false.</span></span> <span data-ttu-id="26efe-167">Par exemple, la règle peut indiquer que l'utilisateur est âgé de plus de 21 ans et habite dans l'état de Washington.</span><span class="sxs-lookup"><span data-stu-id="26efe-167">For example, the rule might be that the user is of age 21 or above and lives in Washington State.</span></span>  
  
 <span data-ttu-id="26efe-168"><xref:System.Security.Claims.ClaimsAuthorizationManager> est utile pour extérioriser la logique de décision pour l'autorisation basée sur les revendications dans vos applications.</span><span class="sxs-lookup"><span data-stu-id="26efe-168"><xref:System.Security.Claims.ClaimsAuthorizationManager> is useful for externalizing the decision logic for  claims-based authorization in your applications.</span></span> <span data-ttu-id="26efe-169">ClaimsAuthorizationManager est un composant WIF fourni dans le cadre de .NET 4.5.</span><span class="sxs-lookup"><span data-stu-id="26efe-169">ClaimsAuthorizationManager is a WIF component that ships as part of .NET 4.5.</span></span> <span data-ttu-id="26efe-170">ClaimsAuthorizationManager vous permet d'intercepter des requêtes entrantes et d'implémenter toute logique de votre choix pour prendre des décisions d'autorisation basées sur les revendications entrantes.</span><span class="sxs-lookup"><span data-stu-id="26efe-170">ClaimsAuthorizationManager allows you to intercept incoming requests and implement any logic of your choice to make authorization decisions based on the incoming claims.</span></span> <span data-ttu-id="26efe-171">Cela devient important lorsque la logique d'autorisation doit être modifiée.</span><span class="sxs-lookup"><span data-stu-id="26efe-171">This becomes important when authorization logic needs to be changed.</span></span> <span data-ttu-id="26efe-172">Dans ce cas, l'utilisation de ClaimsAuthorizationManager n'affecte pas l'intégrité de l'application, réduisant ainsi la probabilité d'une erreur d'application suite à la modification.</span><span class="sxs-lookup"><span data-stu-id="26efe-172">In that case, using ClaimsAuthorizationManager will not affect the application’s integrity, thereby reducing the likelihood of an application error as a result of the change.</span></span> <span data-ttu-id="26efe-173">Pour en savoir plus sur l’utilisation de ClaimsAuthorizationManager pour implémenter le contrôle d’accès basé sur les revendications, consultez [How To : Implémentez des revendications d’autorisation dans une Application ASP.NET prenant en charge de revendications à l’aide de WIF et ACS](https://go.microsoft.com/fwlink/?LinkID=247446).</span><span class="sxs-lookup"><span data-stu-id="26efe-173">To learn more about how to use ClaimsAuthorizationManager to implement claims-based access control, see [How To: Implement Claims Authorization in a Claims Aware ASP.NET Application Using WIF and ACS](https://go.microsoft.com/fwlink/?LinkID=247446).</span></span>
