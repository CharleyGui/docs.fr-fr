---
title: <sqlWorkflowInstanceStore>
ms.date: 03/30/2017
ms.topic: reference
ms.assetid: 8a4e4214-fc51-4f4d-b968-0427c37a9520
ms.openlocfilehash: 581da860a490c95d5d621194c7f6643fc15118fe
ms.sourcegitcommit: 093571de904fc7979e85ef3c048547d0accb1d8a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/06/2019
ms.locfileid: "70398685"
---
# <a name="sqlworkflowinstancestore"></a><span data-ttu-id="58cbe-101">\<sqlWorkflowInstanceStore></span><span class="sxs-lookup"><span data-stu-id="58cbe-101">\<sqlWorkflowInstanceStore></span></span>
<span data-ttu-id="58cbe-102">Comportement de service qui vous permet de configurer la <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> fonctionnalité, qui prend en charge la persistance des informations d’État pour les instances de service de workflow dans une base de données SQL Server 2005 ou SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="58cbe-102">A service behavior that allows you to configure the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> feature, which supports persisting state information for workflow service instances into an SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="58cbe-103">Pour plus d’informations sur cette fonctionnalité, consultez [magasin d’instances de workflow SQL](../../../windows-workflow-foundation/sql-workflow-instance-store.md).</span><span class="sxs-lookup"><span data-stu-id="58cbe-103">For more information on this feature, see [SQL Workflow Instance Store](../../../windows-workflow-foundation/sql-workflow-instance-store.md).</span></span>  
  
<span data-ttu-id="58cbe-104">[ **\<configuration>** ](../configuration-element.md)</span><span class="sxs-lookup"><span data-stu-id="58cbe-104">[**\<configuration>**](../configuration-element.md)</span></span>\
<span data-ttu-id="58cbe-105">&nbsp;&nbsp;[ **\<requise. > ServiceModel**](system-servicemodel-of-workflow.md)</span><span class="sxs-lookup"><span data-stu-id="58cbe-105">&nbsp;&nbsp;[**\<system.ServiceModel>**](system-servicemodel-of-workflow.md)</span></span>\
<span data-ttu-id="58cbe-106">&nbsp;&nbsp;&nbsp;&nbsp;[ **\<comportements >** ](behaviors-of-workflow.md)</span><span class="sxs-lookup"><span data-stu-id="58cbe-106">&nbsp;&nbsp;&nbsp;&nbsp;[**\<behaviors>**](behaviors-of-workflow.md)</span></span>\
<span data-ttu-id="58cbe-107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ **\<serviceBehaviors >** ](servicebehaviors-of-workflow.md)</span><span class="sxs-lookup"><span data-stu-id="58cbe-107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[**\<serviceBehaviors>**](servicebehaviors-of-workflow.md)</span></span>\
<span data-ttu-id="58cbe-108">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ **\<> de comportement**](behavior-of-servicebehaviors-of-workflow.md)</span><span class="sxs-lookup"><span data-stu-id="58cbe-108">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[**\<behavior>**](behavior-of-servicebehaviors-of-workflow.md)</span></span>\
<span data-ttu-id="58cbe-109">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; **\<sqlWorkflowInstanceStore >**</span><span class="sxs-lookup"><span data-stu-id="58cbe-109">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**\<sqlWorkflowInstanceStore>**</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="58cbe-110">Syntaxe</span><span class="sxs-lookup"><span data-stu-id="58cbe-110">Syntax</span></span>  
  
```xml  
<behaviors>
  <serviceBehaviors>
    <behavior name="String">
      <sqlWorkflowInstanceStore connectionStringName="String" 
                                hostLockRenewalPeriod="TimeSpan" 
                                instanceCompletionAction="DeleteNothing/DeleteAll" 
                                instanceEncodingAction="None/GZip" 
                                instanceLockedExceptionAction="NoRetry/BasicRetry/AggressiveRetry" 
                                runnableInstancesDetectionPeriod="TimeSpan" />
    </behavior>
  </serviceBehaviors>
</behaviors>  
```  
  
## <a name="attributes-and-elements"></a><span data-ttu-id="58cbe-111">Attributs et éléments</span><span class="sxs-lookup"><span data-stu-id="58cbe-111">Attributes and Elements</span></span>  
 <span data-ttu-id="58cbe-112">Les sections suivantes décrivent des attributs, des éléments enfants et des éléments parents.</span><span class="sxs-lookup"><span data-stu-id="58cbe-112">The following sections describe attributes, child elements, and parent elements.</span></span>  
  
### <a name="attributes"></a><span data-ttu-id="58cbe-113">Attributs</span><span class="sxs-lookup"><span data-stu-id="58cbe-113">Attributes</span></span>  
  
|<span data-ttu-id="58cbe-114">Attribut</span><span class="sxs-lookup"><span data-stu-id="58cbe-114">Attribute</span></span>|<span data-ttu-id="58cbe-115">Description</span><span class="sxs-lookup"><span data-stu-id="58cbe-115">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="58cbe-116">connectionString</span><span class="sxs-lookup"><span data-stu-id="58cbe-116">connectionString</span></span>|<span data-ttu-id="58cbe-117">Chaîne qui contient une chaîne de connexion utilisée pour se connecter à une base de données de persistance sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="58cbe-117">A string that contains a connection string used to connect to an underlying persistence database.</span></span>|  
|<span data-ttu-id="58cbe-118">connectionStringName</span><span class="sxs-lookup"><span data-stu-id="58cbe-118">connectionStringName</span></span>|<span data-ttu-id="58cbe-119">Chaîne qui contient une chaîne de connexion nommée au serveur de base de données.</span><span class="sxs-lookup"><span data-stu-id="58cbe-119">A string that contains a named connection string to the database server.</span></span> <span data-ttu-id="58cbe-120">« DefaultConnectionString » est un exemple de chaîne de connexion nommée.</span><span class="sxs-lookup"><span data-stu-id="58cbe-120">An example of a named connection string is "DefaultConnectionString".</span></span>|  
|<span data-ttu-id="58cbe-121">hostLockRenewalPeriod</span><span class="sxs-lookup"><span data-stu-id="58cbe-121">hostLockRenewalPeriod</span></span>|<span data-ttu-id="58cbe-122">Valeur Timespan qui spécifie la période pendant laquelle l'hôte doit renouveler le verrou sur une instance.</span><span class="sxs-lookup"><span data-stu-id="58cbe-122">A Timespan value that specifies the time period in which the host must renew the lock on an instance.</span></span> <span data-ttu-id="58cbe-123">Si l'hôte ne renouvelle pas le verrou pendant la période spécifiée, l'instance est déverrouillée et peut être choisie par un autre hôte.</span><span class="sxs-lookup"><span data-stu-id="58cbe-123">If the host does not renew the lock in the specified time period, the instance is unlocked and may be picked up by another host.</span></span><br /><br /> <span data-ttu-id="58cbe-124">Le déchargement d'un flux de travail implique qu'il soit également rendu persistant.</span><span class="sxs-lookup"><span data-stu-id="58cbe-124">Unloading a workflow implies that it is also persisted.</span></span> <span data-ttu-id="58cbe-125">Si cet attribut a la valeur zéro, l’instance de workflow est persistante et déchargée immédiatement après que le flux de travail devient inactif.</span><span class="sxs-lookup"><span data-stu-id="58cbe-125">If this attribute is set to zero the workflow instance is persisted and unloaded immediately after the workflow becomes idle.</span></span> <span data-ttu-id="58cbe-126">L’affectation de la valeur TimeSpan. MaxValue à cet attribut désactive efficacement l’opération de déchargement.</span><span class="sxs-lookup"><span data-stu-id="58cbe-126">Setting this attribute to TimeSpan.MaxValue effectively disables the unload operation.</span></span> <span data-ttu-id="58cbe-127">Les instances de flux de travail inactives ne sont jamais déchargées.</span><span class="sxs-lookup"><span data-stu-id="58cbe-127">Idle workflow instances are never unloaded.</span></span>|  
|<span data-ttu-id="58cbe-128">instanceCompletionAction</span><span class="sxs-lookup"><span data-stu-id="58cbe-128">instanceCompletionAction</span></span>|<span data-ttu-id="58cbe-129">Valeur indiquant si les données de l'instance du flux de travail sont conservées dans le magasin de persistance une fois l'instance du flux de travail terminée ou si elles sont supprimées à ce stade.</span><span class="sxs-lookup"><span data-stu-id="58cbe-129">A value that specifies whether workflow instance data is kept in the persistence store after the workflow instance completes or if it is deleted at that point.</span></span> <span data-ttu-id="58cbe-130">Cette valeur est de type <xref:System.Activities.DurableInstancing.InstanceCompletionAction>.</span><span class="sxs-lookup"><span data-stu-id="58cbe-130">This value is of type <xref:System.Activities.DurableInstancing.InstanceCompletionAction>.</span></span><br /><br /> <span data-ttu-id="58cbe-131">Les actions énumérées consistent en la suppression ou la non-suppression des données de l'instance du magasin de persistance, lorsque l'instance a terminé son opération.</span><span class="sxs-lookup"><span data-stu-id="58cbe-131">The enumerated actions consist of deleting the instance data from the persistence store or not deleting the instance data from the persistence store, when the instance has completed its operation.</span></span><br /><br /> <span data-ttu-id="58cbe-132">La conservation des instances après leur achèvement engendre une croissance rapide de la base de données de persistance, ce qui en affecte les performances.</span><span class="sxs-lookup"><span data-stu-id="58cbe-132">Keeping instances after completion causes the persistence database to grow rapidly and this affects the performance of the database.</span></span> <span data-ttu-id="58cbe-133">Vous devez configurer une stratégie de vidage de la base de données pour supprimer régulièrement ces enregistrements afin de veiller à ce que les performances de la base de données soient à un niveau satisfaisant pour vos besoins.</span><span class="sxs-lookup"><span data-stu-id="58cbe-133">You should configure a database purge policy to delete these records periodically to ensure that the performance of the database is at the level that satisfy your performance requirements.</span></span>|  
|<span data-ttu-id="58cbe-134">instanceEncodingOption</span><span class="sxs-lookup"><span data-stu-id="58cbe-134">instanceEncodingOption</span></span>|<span data-ttu-id="58cbe-135">Valeur facultative qui indique si les informations d'état de l'instance sont compressées à l'aide de l'algorithme Gzip avant l'enregistrement des informations dans le magasin de persistance.</span><span class="sxs-lookup"><span data-stu-id="58cbe-135">An optional value that specifies  whether the instance state information is compressed using the GZip algorithm before the information is saved in the persistence store..</span></span> <span data-ttu-id="58cbe-136">Cette valeur est de type <xref:System.Activities.DurableInstancing.InstanceEncodingOption>.</span><span class="sxs-lookup"><span data-stu-id="58cbe-136">This value is of type <xref:System.Activities.DurableInstancing.InstanceEncodingOption>.</span></span> <span data-ttu-id="58cbe-137">Les valeurs possibles de cette propriété <xref:System.Activities.DurableInstancing.InstanceEncodingOption.None>sont, qui ne spécifient aucune <xref:System.Activities.DurableInstancing.InstanceEncodingOption.GZip>compression, et, qui spécifie que les données d’instance sont compressées et utilise l’algorithme gzip.</span><span class="sxs-lookup"><span data-stu-id="58cbe-137">Possible values for this property are <xref:System.Activities.DurableInstancing.InstanceEncodingOption.None>, which specifies no compression, and <xref:System.Activities.DurableInstancing.InstanceEncodingOption.GZip>, which specifies that instance data is compressed and uses the gzip algorithm.</span></span>|  
|<span data-ttu-id="58cbe-138">instanceLockedExceptionAction</span><span class="sxs-lookup"><span data-stu-id="58cbe-138">instanceLockedExceptionAction</span></span>|<span data-ttu-id="58cbe-139">Valeur qui spécifie l'action qui se produit en réponse à une exception levée lorsque l'hôte essaie de verrouiller une instance déjà verrouillée par un autre hôte.</span><span class="sxs-lookup"><span data-stu-id="58cbe-139">A value that specifies the action that occurs in response to an exception that is thrown when the host tries to lock an instance because the instance is currently locked by another host.</span></span> <span data-ttu-id="58cbe-140">Cette valeur est de type <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction>.</span><span class="sxs-lookup"><span data-stu-id="58cbe-140">This value is of type <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction>.</span></span><br /><br /> <span data-ttu-id="58cbe-141">Les options autorisées pour ce champ sont les suivantes : Aucune, nouvelle tentative de base et nouvelle tentative agressive.</span><span class="sxs-lookup"><span data-stu-id="58cbe-141">The options allowed for this field are: None, Basic Retry, and Aggressive Retry.</span></span> <span data-ttu-id="58cbe-142">La valeur par défaut est Aucun.</span><span class="sxs-lookup"><span data-stu-id="58cbe-142">The default value is None.</span></span> <span data-ttu-id="58cbe-143">La liste suivante fournit les descriptions de ces trois options :</span><span class="sxs-lookup"><span data-stu-id="58cbe-143">The following list provides you with the descriptions for these three options:</span></span><br /><br /> <span data-ttu-id="58cbe-144">- Aucun.</span><span class="sxs-lookup"><span data-stu-id="58cbe-144">-   None.</span></span> <span data-ttu-id="58cbe-145">L'hôte de service n'essaie pas de verrouiller l'instance et passe l'objet <xref:System.Runtime.DurableInstancing.InstanceLockedException> à l'appelant.</span><span class="sxs-lookup"><span data-stu-id="58cbe-145">The service host does not attempt to lock the instance and passes the <xref:System.Runtime.DurableInstancing.InstanceLockedException> to the caller.</span></span><br /><span data-ttu-id="58cbe-146">-Nouvelle tentative de base.</span><span class="sxs-lookup"><span data-stu-id="58cbe-146">-   Basic Retry.</span></span> <span data-ttu-id="58cbe-147">L'hôte de service réessaie de verrouiller l'instance avec un intervalle de tentative linéaire et passe l'exception à l'appelant à la fin de la séquence.</span><span class="sxs-lookup"><span data-stu-id="58cbe-147">The service host reattempts to lock the instance with a linear retry interval and passes the exception to the caller at the end of the sequence.</span></span><br /><span data-ttu-id="58cbe-148">-Nouvelle tentative agressive.</span><span class="sxs-lookup"><span data-stu-id="58cbe-148">-   Aggressive Retry.</span></span> <span data-ttu-id="58cbe-149">L'hôte de service réessaie de verrouiller l'instance avec un délai exponentiellement croissant et passe l'objet <xref:System.Runtime.DurableInstancing.InstanceLockedException> à l'appelant à la fin de la séquence.</span><span class="sxs-lookup"><span data-stu-id="58cbe-149">The service host reattempts to lock the instance with an exponentially increasing delay and passes the <xref:System.Runtime.DurableInstancing.InstanceLockedException> to the caller at the end of the sequence.</span></span>|  
|<span data-ttu-id="58cbe-150">runnableInstancesDetectionPeriod</span><span class="sxs-lookup"><span data-stu-id="58cbe-150">runnableInstancesDetectionPeriod</span></span>||  
  
### <a name="child-elements"></a><span data-ttu-id="58cbe-151">Éléments enfants</span><span class="sxs-lookup"><span data-stu-id="58cbe-151">Child Elements</span></span>  
 <span data-ttu-id="58cbe-152">Aucun.</span><span class="sxs-lookup"><span data-stu-id="58cbe-152">None.</span></span>  
  
### <a name="parent-elements"></a><span data-ttu-id="58cbe-153">Éléments parents</span><span class="sxs-lookup"><span data-stu-id="58cbe-153">Parent Elements</span></span>  
  
|<span data-ttu-id="58cbe-154">Élément</span><span class="sxs-lookup"><span data-stu-id="58cbe-154">Element</span></span>|<span data-ttu-id="58cbe-155">Description</span><span class="sxs-lookup"><span data-stu-id="58cbe-155">Description</span></span>|  
|-------------|-----------------|  
|[<span data-ttu-id="58cbe-156">\<> de comportement \<de la > serviceBehaviors</span><span class="sxs-lookup"><span data-stu-id="58cbe-156">\<behavior> of \<serviceBehaviors></span></span>](behavior-of-servicebehaviors-of-workflow.md)|<span data-ttu-id="58cbe-157">Spécifie un élément de comportement.</span><span class="sxs-lookup"><span data-stu-id="58cbe-157">Specifies a behavior element.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="58cbe-158">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="58cbe-158">See also</span></span>

- <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior>
- <xref:System.ServiceModel.Activities.Configuration.SqlWorkflowInstanceStoreElement>
- <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>
- [<span data-ttu-id="58cbe-159">Magasin d’instances de workflow SQL</span><span class="sxs-lookup"><span data-stu-id="58cbe-159">SQL Workflow Instance Store</span></span>](../../../windows-workflow-foundation/sql-workflow-instance-store.md)
