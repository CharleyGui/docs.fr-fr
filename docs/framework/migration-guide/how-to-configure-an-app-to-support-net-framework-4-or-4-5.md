---
title: Comment configurer une application pour prendre en charge .NET Framework 4 ou versions ultérieures
ms.date: 03/30/2017
helpviewer_keywords:
- configuring apps to support .NET Framework
- .NET Framework, configuring apps
ms.assetid: 63c6b9a8-0088-4077-9aa3-521ab7290f79
ms.openlocfilehash: 586f39fc9b50dcd45bb959ebd0063e3c38d9c3ed
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/15/2020
ms.locfileid: "75716248"
---
# <a name="how-to-configure-an-app-to-support-net-framework-4-or-later-versions"></a><span data-ttu-id="19f72-102">Comment : Configurer une application pour prendre en charge .NET Framework 4 ou des versions ultérieures</span><span class="sxs-lookup"><span data-stu-id="19f72-102">How to: Configure an App to Support .NET Framework 4 or later versions</span></span>

<span data-ttu-id="19f72-103">Toutes les applications qui hébergent le Common Langage Runtime (CLR) doivent démarrer, ou *activer*, le CLR afin d'exécuter le code managé.</span><span class="sxs-lookup"><span data-stu-id="19f72-103">All apps that host the common language runtime (CLR) need to start, or *activate*, the CLR in order to run managed code.</span></span> <span data-ttu-id="19f72-104">En général, une application .NET Framework s'exécute sur la version du CLR pour laquelle elle a été générée, mais vous pouvez modifier ce comportement pour les applications de bureau en utilisant un fichier de configuration d'application (parfois appelé fichier app.config).</span><span class="sxs-lookup"><span data-stu-id="19f72-104">Typically, a   .NET Framework app runs on the version of the CLR that it was built on, but you can change this behavior for desktop apps by using an application configuration file (sometimes referred to as an app.config file).</span></span> <span data-ttu-id="19f72-105">Toutefois, vous ne pouvez pas modifier le comportement d'activation par défaut des applications Windows Store ou des applications Windows Phone en utilisant un fichier de configuration d'application.</span><span class="sxs-lookup"><span data-stu-id="19f72-105">However, you cannot change the default activation behavior for Windows Store apps or Windows Phone apps by using an application configuration file.</span></span> <span data-ttu-id="19f72-106">Cet article explique comment permettre à votre application de bureau de s’exécuter sur une autre version du .NET Framework et fournit un exemple de la façon de cibler les versions 4 ou ultérieures.</span><span class="sxs-lookup"><span data-stu-id="19f72-106">This article explains how to enable your desktop app to run on another version of the .NET Framework and provides an example of how to target version 4 or later versions.</span></span>

 <span data-ttu-id="19f72-107">La version du .NET Framework sur laquelle une application s'exécute est déterminée dans l'ordre suivant :</span><span class="sxs-lookup"><span data-stu-id="19f72-107">The version of the .NET Framework that an app runs on is determined in the following order:</span></span>

- <span data-ttu-id="19f72-108">Fichier de configuration</span><span class="sxs-lookup"><span data-stu-id="19f72-108">Configuration file.</span></span>

     <span data-ttu-id="19f72-109">Si le fichier [ \<](../configure-apps/file-schema/startup/supportedruntime-element.md) de configuration d’application inclut les entrées de>prises de position prises en charge qui spécifient une ou plusieurs versions cadres .NET, et que l’une de ces versions est présente sur l’ordinateur de l’utilisateur, l’application s’exécute sur cette version.</span><span class="sxs-lookup"><span data-stu-id="19f72-109">If the application configuration file includes [\<supportedRuntime>](../configure-apps/file-schema/startup/supportedruntime-element.md) entries that specify one or more .NET Framework versions, and one of those versions is present on the user's computer, the app runs on that version.</span></span> <span data-ttu-id="19f72-110">Le fichier [ \<](../configure-apps/file-schema/startup/supportedruntime-element.md) de configuration lit les entrées supportRuntime>dans l’ordre où elles sont répertoriées, et utilise la première version cadre .NET répertoriée qui est présente sur l’ordinateur de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="19f72-110">The configuration file reads [\<supportedRuntime>](../configure-apps/file-schema/startup/supportedruntime-element.md) entries in the order they are listed, and uses the first .NET Framework version listed that is present on the user's computer.</span></span> <span data-ttu-id="19f72-111">(Utilisez [ \<l’élément> deruntime requis](../configure-apps/file-schema/startup/requiredruntime-element.md) pour la version 1.0.)</span><span class="sxs-lookup"><span data-stu-id="19f72-111">(Use the [\<requiredRuntime> element](../configure-apps/file-schema/startup/requiredruntime-element.md) for version 1.0.)</span></span>

- <span data-ttu-id="19f72-112">Version compilée</span><span class="sxs-lookup"><span data-stu-id="19f72-112">Compiled version.</span></span>

     <span data-ttu-id="19f72-113">S'il n'existe aucun fichier de configuration, mais si la version du .NET Framework pour laquelle l'application a été générée est présente sur l'ordinateur de l'utilisateur, l'application s'exécute sur cette version.</span><span class="sxs-lookup"><span data-stu-id="19f72-113">If there is no configuration file, but the version of the .NET Framework that the app was built on is present on the user's computer, the app runs on that version.</span></span>

- <span data-ttu-id="19f72-114">Dernière version installée</span><span class="sxs-lookup"><span data-stu-id="19f72-114">Latest version installed.</span></span>

     <span data-ttu-id="19f72-115">Si la version du cadre .NET sur lequel l’application a été construite n’est pas présente et qu’un fichier de configuration ne spécifie pas une version dans un [ \<élément> supportRuntime,](../configure-apps/file-schema/startup/supportedruntime-element.md)l’application tente de s’exécuter sur la dernière version du cadre .NET qui est présent sur l’ordinateur de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="19f72-115">If the version of the .NET Framework that the app was built on is not present and a configuration file does not specify a version in a [\<supportedRuntime> element](../configure-apps/file-schema/startup/supportedruntime-element.md), the app tries to run on the latest version of the .NET Framework that is present on the user's computer.</span></span>

     <span data-ttu-id="19f72-116">Toutefois, les applications .NET Framework 1.0, 1.1, 2.0, 3.0 et 3.5 ne s'exécutent pas automatiquement sur .NET Framework 4 ou version ultérieure et, dans certains cas, l'utilisateur peut obtenir un message d'erreur et être invité à installer .NET Framework 3.5.</span><span class="sxs-lookup"><span data-stu-id="19f72-116">However, .NET Framework 1.0, 1.1, 2.0, 3.0, and 3.5 apps do not automatically run on the .NET Framework 4 or later, and in some cases, the user may receive an error and may be prompted to install the .NET Framework 3.5.</span></span> <span data-ttu-id="19f72-117">Le comportement d'activation peut également dépendre du système d'exploitation de l'utilisateur, car les différentes versions du système Windows incluent différentes versions du .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="19f72-117">The activation behavior may also depend on the user’s operating system, because  different versions of Windows system include different versions of the .NET Framework.</span></span> <span data-ttu-id="19f72-118">Si votre application prend en charge .NET Framework 3.5 et 4, ou version ultérieure, nous vous recommandons de l'indiquer à l'aide de plusieurs entrées dans le fichier de configuration, afin d'éviter des erreurs d'initialisation du .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="19f72-118">If your app supports both the .NET Framework 3.5 and 4 or later, we recommend that you indicate this with multiple entries in the configuration file to avoid .NET Framework initialization errors.</span></span> <span data-ttu-id="19f72-119">Pour plus d’informations, consultez [Versions et dépendances](versions-and-dependencies.md).</span><span class="sxs-lookup"><span data-stu-id="19f72-119">For more information, see [Versions and Dependencies](versions-and-dependencies.md).</span></span>

 <span data-ttu-id="19f72-120">Vous pouvez également configurer vos applications .NET Framework 3.5 pour qu’elles s’exécutent sur .NET Framework version 4 ou ultérieur, même sur les ordinateurs où .NET Framework 3.5 est installé, afin de tirer parti des améliorations des performances dans les versions 4 et ultérieures.</span><span class="sxs-lookup"><span data-stu-id="19f72-120">You might also want to configure your .NET Framework 3.5 apps to run on the .NET Framework 4 or later versions, even on computers that have the .NET Framework 3.5 installed, to take advantage of the performance improvements in versions 4 and later versions.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="19f72-121">Nous vous recommandons de toujours tester votre application sur chaque version du .NET Framework que vous prenez en charge.</span><span class="sxs-lookup"><span data-stu-id="19f72-121">We recommend that you always test your app on every .NET Framework version that you support.</span></span> <span data-ttu-id="19f72-122">Pour plus d'informations sur la mise à niveau d'une application de manière à prendre en charge des versions ultérieures du .NET Framework, consultez [Compatibilité de versions](version-compatibility.md).</span><span class="sxs-lookup"><span data-stu-id="19f72-122">See [Version Compatibility](version-compatibility.md) for information about upgrading your application to support later .NET Framework versions.</span></span>

 <span data-ttu-id="19f72-123">Pour plus d'informations sur la modification d'applications .NET Framework 1.0 et 1.1 pour prendre en charge Windows 7 et Windows 8, consultez [Migration à partir du .NET Framework 1.1](migrating-from-the-net-framework-1-1.md).</span><span class="sxs-lookup"><span data-stu-id="19f72-123">For information about modifying your .NET Framework 1.0 and 1.1 apps to support Windows 7 and Windows 8, see [Migrating from the .NET Framework 1.1](migrating-from-the-net-framework-1-1.md).</span></span>

## <a name="to-configure-your-app-to-run-on-the-net-framework-4-or-later-versions"></a><span data-ttu-id="19f72-124">Pour configurer votre application afin qu’elle s’exécute sur .NET Framework version 4 ou ultérieur</span><span class="sxs-lookup"><span data-stu-id="19f72-124">To configure your app to run on the .NET Framework 4 or later versions</span></span>

1. <span data-ttu-id="19f72-125">Ajoutez ou recherchez le fichier de configuration pour le projet .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="19f72-125">Add or locate the configuration file for the .NET Framework project.</span></span> <span data-ttu-id="19f72-126">Le fichier de configuration d'une application se trouve dans le même répertoire et porte le même nom que l'application, mais il possède une extension .config.</span><span class="sxs-lookup"><span data-stu-id="19f72-126">The configuration file for an app is in the same directory and has the same name as the app, but has a .config extension.</span></span> <span data-ttu-id="19f72-127">Par exemple, à une application nommée MyExecutable.exe correspond le fichier de configuration de l'application nommé MyExecutable.exe.config.</span><span class="sxs-lookup"><span data-stu-id="19f72-127">For example, for an app named MyExecutable.exe, the application configuration file is named MyExecutable.exe.config.</span></span>

     <span data-ttu-id="19f72-128">Pour ajouter un fichier de configuration, dans la barre de menus de Visual Studio, choisissez **Projet**, **Ajouter un nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="19f72-128">To add a configuration file, on the Visual Studio menu bar, choose **Project**, **Add New Item**.</span></span> <span data-ttu-id="19f72-129">Choisissez **Général** dans le volet gauche, puis choisissez **Fichier de configuration**.</span><span class="sxs-lookup"><span data-stu-id="19f72-129">Choose **General** from the left pane, and then choose **Configuration File**.</span></span> <span data-ttu-id="19f72-130">Nommez l’application de fichier de *configurationName*.exe.config. Ces choix de menu ne sont pas disponibles pour les projets d’applications Windows Store ou Windows phone, car vous ne pouvez pas modifier la politique d’activation sur ces plates-formes.</span><span class="sxs-lookup"><span data-stu-id="19f72-130">Name the configuration file *appName*.exe.config. These menu choices are not available for Windows Store app or Windows phone app projects, because you cannot change the activation policy on those platforms.</span></span>

2. <span data-ttu-id="19f72-131">Ajoutez l’élément [ \<de>supportRuntime](../configure-apps/file-schema/startup/supportedruntime-element.md) comme suit au fichier de configuration d’application :</span><span class="sxs-lookup"><span data-stu-id="19f72-131">Add the [\<supportedRuntime>](../configure-apps/file-schema/startup/supportedruntime-element.md) element as follows to the application configuration file:</span></span>

    ```xml
    <configuration>
      <startup>
        <supportedRuntime version="<version>"/>
      </startup>
    </configuration>
    ```

     <span data-ttu-id="19f72-132">où la \* \<version>\* spécifie la version CLR qui s’aligne avec la version cadre .NET que votre application prend en charge.</span><span class="sxs-lookup"><span data-stu-id="19f72-132">where *\<version>* specifies the CLR version that aligns with the .NET Framework version that your app supports.</span></span> <span data-ttu-id="19f72-133">Utilisez les chaînes suivantes :</span><span class="sxs-lookup"><span data-stu-id="19f72-133">Use the following strings:</span></span>

    - <span data-ttu-id="19f72-134">.NET Framework 1.0 : "v1.0.3705"</span><span class="sxs-lookup"><span data-stu-id="19f72-134">.NET Framework 1.0: "v1.0.3705"</span></span>

    - <span data-ttu-id="19f72-135">.NET Framework 1.1 : "v1.1.4322"</span><span class="sxs-lookup"><span data-stu-id="19f72-135">.NET Framework 1.1: "v1.1.4322"</span></span>

    - <span data-ttu-id="19f72-136">.NET Framework 2.0, 3.0 et 3.5 : "v2.0.50727"</span><span class="sxs-lookup"><span data-stu-id="19f72-136">.NET Framework 2.0, 3.0, and 3.5: "v2.0.50727"</span></span>

    - <span data-ttu-id="19f72-137">.NET Framework version 4 et ultérieur : "v4.0"</span><span class="sxs-lookup"><span data-stu-id="19f72-137">.NET Framework 4 and later versions: "v4.0"</span></span>

     <span data-ttu-id="19f72-138">Vous pouvez ajouter plusieurs [ \<éléments>SupportRuntime,](../configure-apps/file-schema/startup/supportedruntime-element.md) répertoriés par ordre de préférence, pour spécifier la prise en charge de plusieurs versions du cadre .NET.</span><span class="sxs-lookup"><span data-stu-id="19f72-138">You can add multiple [\<supportedRuntime>](../configure-apps/file-schema/startup/supportedruntime-element.md) elements, listed in order of preference, to specify support for multiple versions of the .NET Framework.</span></span>

 <span data-ttu-id="19f72-139">Le tableau ci-dessous montre comment les paramètres du fichier de configuration de l'application et les versions du .NET Framework installées sur un ordinateur déterminent la version sur laquelle une application .NET Framework 3.5 s'exécute.</span><span class="sxs-lookup"><span data-stu-id="19f72-139">The following table demonstrates how application configuration file settings and the .NET Framework versions installed on a computer determine the version that a .NET Framework 3.5 app runs on.</span></span> <span data-ttu-id="19f72-140">Les exemples sont spécifiques à une application .NET Framework 3.5, mais vous pouvez utiliser une logique similaire pour cibler des applications générées à l'aide de versions antérieures du .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="19f72-140">The examples are specific to a .NET Framework 3.5 application, but you can use similar logic to target applications built with earlier .NET Framework versions.</span></span> <span data-ttu-id="19f72-141">Notez que le numéro de version de .NET Framework 2.0 (v2.0.50727) est utilisé pour spécifier .NET Framework 3.5 dans le fichier de configuration de l'application.</span><span class="sxs-lookup"><span data-stu-id="19f72-141">Note that the .NET Framework 2.0 version number (v2.0.50727) is used to specify the .NET Framework 3.5 in the application configuration file.</span></span>

|<span data-ttu-id="19f72-142">Paramètre du fichier app.config</span><span class="sxs-lookup"><span data-stu-id="19f72-142">App.config file setting</span></span>|<span data-ttu-id="19f72-143">Sur un ordinateur doté de la version 3.5</span><span class="sxs-lookup"><span data-stu-id="19f72-143">On computer with version 3.5 installed</span></span>|<span data-ttu-id="19f72-144">Sur un ordinateur doté des versions 3.5, 4 ou ultérieures</span><span class="sxs-lookup"><span data-stu-id="19f72-144">On computer with versions 3.5 and 4 or later versions installed</span></span>|<span data-ttu-id="19f72-145">Sur un ordinateur doté des versions 4 ou ultérieures</span><span class="sxs-lookup"><span data-stu-id="19f72-145">On computer with version 4 or later versions installed</span></span>|
|-|-|-|-|
|<span data-ttu-id="19f72-146">None</span><span class="sxs-lookup"><span data-stu-id="19f72-146">None</span></span>|<span data-ttu-id="19f72-147">S'exécute sur 3.5</span><span class="sxs-lookup"><span data-stu-id="19f72-147">Runs on 3.5</span></span>|<span data-ttu-id="19f72-148">S'exécute sur 3.5</span><span class="sxs-lookup"><span data-stu-id="19f72-148">Runs on 3.5</span></span>|<span data-ttu-id="19f72-149">Affiche un message d'erreur qui invite l'utilisateur à installer la version correcte\*</span><span class="sxs-lookup"><span data-stu-id="19f72-149">Displays error message that prompts user to install the correct version\*</span></span>|
|`<supportedRuntime version="v2.0.50727"/>`|<span data-ttu-id="19f72-150">S'exécute sur 3.5</span><span class="sxs-lookup"><span data-stu-id="19f72-150">Runs on 3.5</span></span>|<span data-ttu-id="19f72-151">S'exécute sur 3.5</span><span class="sxs-lookup"><span data-stu-id="19f72-151">Runs on 3.5</span></span>|<span data-ttu-id="19f72-152">Affiche un message d'erreur qui invite l'utilisateur à installer la version correcte\*</span><span class="sxs-lookup"><span data-stu-id="19f72-152">Displays error message that prompts user to install the correct version\*</span></span>|
|`<supportedRuntime version="v2.0.50727"/>` <br /> `<supportedRuntime version="v4.0"/>`|<span data-ttu-id="19f72-153">S'exécute sur 3.5</span><span class="sxs-lookup"><span data-stu-id="19f72-153">Runs on 3.5</span></span>|<span data-ttu-id="19f72-154">S'exécute sur 3.5</span><span class="sxs-lookup"><span data-stu-id="19f72-154">Runs on 3.5</span></span>|<span data-ttu-id="19f72-155">S’exécute sur la version 4 ou ultérieur</span><span class="sxs-lookup"><span data-stu-id="19f72-155">Runs on 4 or later versions</span></span>|
|`<supportedRuntime version="v4.0"/>` <br /> `<supportedRuntime version="v2.0.50727"/>`|<span data-ttu-id="19f72-156">S'exécute sur 3.5</span><span class="sxs-lookup"><span data-stu-id="19f72-156">Runs on 3.5</span></span>|<span data-ttu-id="19f72-157">S’exécute sur la version 4 ou ultérieur</span><span class="sxs-lookup"><span data-stu-id="19f72-157">Runs on 4 or later versions</span></span>|<span data-ttu-id="19f72-158">S’exécute sur la version 4 ou ultérieur</span><span class="sxs-lookup"><span data-stu-id="19f72-158">Runs on 4 or later versions</span></span>|
|`<supportedRuntime version="v4.0"/>`|<span data-ttu-id="19f72-159">Affiche un message d'erreur qui invite l'utilisateur à installer la version correcte\*</span><span class="sxs-lookup"><span data-stu-id="19f72-159">Displays error message that prompts user to install the correct version\*</span></span>|<span data-ttu-id="19f72-160">S’exécute sur la version 4 ou ultérieur</span><span class="sxs-lookup"><span data-stu-id="19f72-160">Runs on 4 or later versions</span></span>|<span data-ttu-id="19f72-161">S’exécute sur la version 4 ou ultérieur</span><span class="sxs-lookup"><span data-stu-id="19f72-161">Runs on 4 or later versions</span></span>|

 <span data-ttu-id="19f72-162">\*Pour plus d'informations sur ce message d'erreur et les moyens de l'éviter, consultez [Erreurs d'initialisation de .NET Framework : gérer l'expérience utilisateur](../deployment/initialization-errors-managing-the-user-experience.md).</span><span class="sxs-lookup"><span data-stu-id="19f72-162">\* For more information about this error message and ways to avoid it, see [.NET Framework Initialization Errors: Managing the User Experience](../deployment/initialization-errors-managing-the-user-experience.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="19f72-163">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="19f72-163">See also</span></span>

- [<span data-ttu-id="19f72-164">Migration à partir du .NET Framework 1.1</span><span class="sxs-lookup"><span data-stu-id="19f72-164">Migrating from the .NET Framework 1.1</span></span>](migrating-from-the-net-framework-1-1.md)
- [<span data-ttu-id="19f72-165">Migration Guide</span><span class="sxs-lookup"><span data-stu-id="19f72-165">Migration Guide</span></span>](index.md)
