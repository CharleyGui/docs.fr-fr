---
title: Améliorations des performances de socket dans la version 3.5
ms.date: 03/30/2017
ms.assetid: 225aa5f9-c54b-4620-ab64-5cd100cfd54c
ms.openlocfilehash: 577c033fc5639f9d9f50e413fd2cb55a75d48f2c
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/15/2020
ms.locfileid: "71047240"
---
# <a name="socket-performance-enhancements-in-version-35"></a><span data-ttu-id="e0c25-102">Améliorations des performances de socket dans la version 3.5</span><span class="sxs-lookup"><span data-stu-id="e0c25-102">Socket Performance Enhancements in Version 3.5</span></span>
<span data-ttu-id="e0c25-103">La classe <xref:System.Net.Sockets.Socket?displayProperty=nameWithType> a été améliorée dans la version 3.5 pour les applications qui utilisent des E/S réseau asynchrones pour optimiser les performances.</span><span class="sxs-lookup"><span data-stu-id="e0c25-103">The <xref:System.Net.Sockets.Socket?displayProperty=nameWithType> class has been enhanced in Version 3.5 for use by applications that use asynchronous network I/O to achieve the highest performance.</span></span> <span data-ttu-id="e0c25-104">Dans le cadre d’un ensemble d’améliorations apportées à la classe <xref:System.Net.Sockets.Socket>, plusieurs nouvelles classes ont été ajoutées pour fournir un autre modèle asynchrone pouvant être utilisé par les applications de socket hautes performances spécialisées.</span><span class="sxs-lookup"><span data-stu-id="e0c25-104">A series of new classes have been added as part of a set of enhancements to the <xref:System.Net.Sockets.Socket> class that provide an alternative asynchronous pattern that can be used by specialized high-performance socket applications.</span></span> <span data-ttu-id="e0c25-105">Ces améliorations ont été spécialement conçues pour les applications serveur réseau qui nécessitent un niveau de performance élevé.</span><span class="sxs-lookup"><span data-stu-id="e0c25-105">These enhancements were specifically designed for network server applications that require high performance.</span></span> <span data-ttu-id="e0c25-106">Une application peut utiliser exclusivement le modèle asynchrone amélioré, ou l’utiliser seulement dans des zones ciblées de l’application (lors de la réception de grandes quantités de données, par exemple).</span><span class="sxs-lookup"><span data-stu-id="e0c25-106">An application can use the enhanced asynchronous pattern exclusively, or only in targeted hot areas of their application (when receiving large amounts of data, for example).</span></span>  
  
## <a name="class-enhancements"></a><span data-ttu-id="e0c25-107">Améliorations de la classe</span><span class="sxs-lookup"><span data-stu-id="e0c25-107">Class Enhancements</span></span>  
 <span data-ttu-id="e0c25-108">L’objectif principal de ces améliorations est d’éviter la répétition des opérations d’allocation et de synchronisation d’objets durant les processus impliquant de nombreuses entrées/sorties de socket asynchrones.</span><span class="sxs-lookup"><span data-stu-id="e0c25-108">The main feature of these enhancements is the avoidance of the repeated allocation and synchronization of objects during high-volume asynchronous socket I/O.</span></span> <span data-ttu-id="e0c25-109">Le modèle de conception Begin/End actuellement implémenté par la classe <xref:System.Net.Sockets.Socket> pour les entrées/sorties asynchrones nécessite l’allocation d’un objet <xref:System.IAsyncResult?displayProperty=nameWithType> pour chaque opération de socket asynchrone.</span><span class="sxs-lookup"><span data-stu-id="e0c25-109">The Begin/End design pattern currently implemented by the <xref:System.Net.Sockets.Socket> class for asynchronous socket I/O requires a <xref:System.IAsyncResult?displayProperty=nameWithType> object be allocated for each asynchronous socket operation.</span></span>  
  
 <span data-ttu-id="e0c25-110">Dans la classe <xref:System.Net.Sockets.Socket> améliorée, les opérations de socket asynchrones sont décrites par des objets de la classe <xref:System.Net.Sockets.SocketAsyncEventArgs?displayProperty=nameWithType> réutilisables qui sont alloués et gérés par l’application.</span><span class="sxs-lookup"><span data-stu-id="e0c25-110">In the new <xref:System.Net.Sockets.Socket> class enhancements, asynchronous socket operations are described by reusable <xref:System.Net.Sockets.SocketAsyncEventArgs?displayProperty=nameWithType> class objects allocated and maintained by the application.</span></span> <span data-ttu-id="e0c25-111">Les applications de socket à hautes performances peuvent ainsi mieux évaluer le nombre d’opérations de socket superposées à conserver.</span><span class="sxs-lookup"><span data-stu-id="e0c25-111">High-performance socket applications know best the amount of overlapped socket operations that must be sustained.</span></span> <span data-ttu-id="e0c25-112">L’application peut créer autant d’objets <xref:System.Net.Sockets.SocketAsyncEventArgs> qu’elle a besoin.</span><span class="sxs-lookup"><span data-stu-id="e0c25-112">The application can create as many of the <xref:System.Net.Sockets.SocketAsyncEventArgs> objects that it needs.</span></span> <span data-ttu-id="e0c25-113">Par exemple, si une application serveur doit toujours avoir 15 opérations d’acceptation de socket en attente pour prendre en charge toutes les connexions client entrantes, elle peut préalablement allouer 15 objets <xref:System.Net.Sockets.SocketAsyncEventArgs> réutilisables à cette fin.</span><span class="sxs-lookup"><span data-stu-id="e0c25-113">For example, if a server application needs to have 15 socket accept operations outstanding at all times to support incoming client connection rates, it can allocate 15 reusable <xref:System.Net.Sockets.SocketAsyncEventArgs> objects in advance for that purpose.</span></span>  
  
 <span data-ttu-id="e0c25-114">Le modèle pour effectuer une opération de socket asynchrone avec cette classe comprend les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="e0c25-114">The pattern for performing an asynchronous socket operation with this class consists of the following steps:</span></span>  
  
1. <span data-ttu-id="e0c25-115">Allouer un nouvel objet de contexte <xref:System.Net.Sockets.SocketAsyncEventArgs>, ou en obtenir un gratuitement à partir d’un pool d’applications.</span><span class="sxs-lookup"><span data-stu-id="e0c25-115">Allocate a new <xref:System.Net.Sockets.SocketAsyncEventArgs> context object, or get a free one from an application pool.</span></span>  
  
2. <span data-ttu-id="e0c25-116">Définir les propriétés de l’objet de contexte pour l’opération à effectuer (la méthode déléguée de rappel et le tampon de données, par exemple).</span><span class="sxs-lookup"><span data-stu-id="e0c25-116">Set properties on the context object to the operation about to be performed (the callback delegate method and data buffer, for example).</span></span>  
  
3. <span data-ttu-id="e0c25-117">Appeler la méthode de socket appropriée (xxxAsync) pour lancer l’opération asynchrone.</span><span class="sxs-lookup"><span data-stu-id="e0c25-117">Call the appropriate socket method (xxxAsync) to initiate the asynchronous operation.</span></span>  
  
4. <span data-ttu-id="e0c25-118">Si la méthode de socket asynchrone (xxxAsync) retourne la valeur true dans le rappel, obtenir les propriétés de contexte pour connaître l’état de complétion.</span><span class="sxs-lookup"><span data-stu-id="e0c25-118">If the asynchronous socket method (xxxAsync) returns true in the callback, query the context properties for completion status.</span></span>  
  
5. <span data-ttu-id="e0c25-119">Si la méthode de socket asynchrone (xxxAsync) retourne la valeur false dans le rappel, l’opération a été effectuée de façon synchrone.</span><span class="sxs-lookup"><span data-stu-id="e0c25-119">If the asynchronous socket method (xxxAsync) returns false in the callback, the operation completed synchronously.</span></span> <span data-ttu-id="e0c25-120">L’obtention des propriétés de contexte peut être nécessaire pour le résultat de l’opération.</span><span class="sxs-lookup"><span data-stu-id="e0c25-120">The context properties may be queried for the operation result.</span></span>  
  
6. <span data-ttu-id="e0c25-121">Réutiliser le contexte pour une autre opération, le replacer dans le pool ou le supprimer.</span><span class="sxs-lookup"><span data-stu-id="e0c25-121">Reuse the context for another operation, put it back in the pool, or discard it.</span></span>  
  
 <span data-ttu-id="e0c25-122">La durée de vie du nouvel objet de contexte de l’opération de socket asynchrone est déterminée par les références dans le code d’application et par les références aux E/S asynchrones.</span><span class="sxs-lookup"><span data-stu-id="e0c25-122">The lifetime of the new asynchronous socket operation context object is determined by references in the application code and asynchronous I/O references.</span></span> <span data-ttu-id="e0c25-123">L’application n’a pas besoin de conserver de référence à un objet de contexte de l’opération de socket asynchrone une fois qu’elle a été transmise comme paramètre à l’une des méthodes de l’opération de socket asynchrone.</span><span class="sxs-lookup"><span data-stu-id="e0c25-123">It is not necessary for the application to retain a reference to an asynchronous socket operation context object after it is submitted as a parameter to one of the asynchronous socket operation methods.</span></span> <span data-ttu-id="e0c25-124">La référence est conservée jusqu’au retour du rappel d’achèvement.</span><span class="sxs-lookup"><span data-stu-id="e0c25-124">It will remain referenced until the completion callback returns.</span></span> <span data-ttu-id="e0c25-125">Toutefois, l’application peut conserver la référence à l’objet de contexte pour la réutiliser lors d’une opération de socket asynchrone ultérieure.</span><span class="sxs-lookup"><span data-stu-id="e0c25-125">However it is advantageous for the application to retain the reference to the context object so that it can be reused for a future asynchronous socket operation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e0c25-126">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="e0c25-126">See also</span></span>

- <xref:System.Net.Sockets.Socket?displayProperty=nameWithType>
- <xref:System.Net.Sockets.SendPacketsElement?displayProperty=nameWithType>
- <xref:System.Net.Sockets.SocketAsyncEventArgs?displayProperty=nameWithType>
- <xref:System.Net.Sockets.SocketAsyncOperation?displayProperty=nameWithType>
- [<span data-ttu-id="e0c25-127">Exemples de programmation réseau</span><span class="sxs-lookup"><span data-stu-id="e0c25-127">Network Programming Samples</span></span>](network-programming-samples.md)
- [<span data-ttu-id="e0c25-128">Exemples de code de socket</span><span class="sxs-lookup"><span data-stu-id="e0c25-128">Socket Code Examples</span></span>](socket-code-examples.md)
