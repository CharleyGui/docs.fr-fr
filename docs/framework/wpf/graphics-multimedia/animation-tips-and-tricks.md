---
title: Conseils et astuces sur les animations
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- troubleshooting [WPF], animation
- animations [WPF], FillBehavior property
- troubleshooting animation [WPF]
- animating objects [WPF], troubleshooting
- animation tips and tricks [WPF]
- tips and tricks [WPF], animation
- performance troubleshooting [WPF], animation
- animations [WPF], use of system resources
ms.assetid: e467796b-d5d4-45a6-a108-8c5d7ff69a0f
ms.openlocfilehash: 6b540448599c1e1083ed367a312ef60fceacd0d5
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79187652"
---
# <a name="animation-tips-and-tricks"></a><span data-ttu-id="534c0-102">Conseils et astuces sur les animations</span><span class="sxs-lookup"><span data-stu-id="534c0-102">Animation Tips and Tricks</span></span>
<span data-ttu-id="534c0-103">Lorsque vous travaillez avec des animations dans WPF, il ya un certain nombre de trucs et astuces qui peuvent rendre vos animations plus performantes et vous faire économiser de la frustration.</span><span class="sxs-lookup"><span data-stu-id="534c0-103">When working with animations in WPF, there are a number of tips and tricks that can make your animations perform better and save you frustration.</span></span>  
  
<a name="generalissuessection"></a>
## <a name="general-issues"></a><span data-ttu-id="534c0-104">Problèmes généraux</span><span class="sxs-lookup"><span data-stu-id="534c0-104">General Issues</span></span>  
  
### <a name="animating-the-position-of-a-scroll-bar-or-slider-freezes-it"></a><span data-ttu-id="534c0-105">L’animation de la position d’une barre de défilement ou d’un curseur bloque cet élément</span><span class="sxs-lookup"><span data-stu-id="534c0-105">Animating the Position of a Scroll Bar or Slider Freezes It</span></span>  
 <span data-ttu-id="534c0-106">Si vous animez la position d’une barre de défilement ou d’un curseur à l’aide d’une animation qui a une <xref:System.Windows.Media.Animation.FillBehavior> (valeur par défaut), l’utilisateur ne sera plus en mesure de <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd> déplacer la barre de défilement ou le curseur.</span><span class="sxs-lookup"><span data-stu-id="534c0-106">If you animate the position of a scroll bar or slider using an animation that has a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd> (the default value), the user will no longer be able to move the scroll bar or slider.</span></span> <span data-ttu-id="534c0-107">Cela survient car l’animation, même si elle est terminée, remplace toujours la valeur de base de la propriété cible.</span><span class="sxs-lookup"><span data-stu-id="534c0-107">That's because, even though the animation ended, it's still overriding the target property's base value.</span></span> <span data-ttu-id="534c0-108">Pour empêcher l’animation de dépasser la valeur actuelle de la <xref:System.Windows.Media.Animation.FillBehavior> propriété, l’enlever, ou lui donner un de <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span><span class="sxs-lookup"><span data-stu-id="534c0-108">To stop the animation from overriding the property's current value, remove it, or give it a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span></span> <span data-ttu-id="534c0-109">Pour plus d’informations et un exemple, voir [Set a Property After Animating It with a Storyboard](how-to-set-a-property-after-animating-it-with-a-storyboard.md).</span><span class="sxs-lookup"><span data-stu-id="534c0-109">For more information and an example, see [Set a Property After Animating It with a Storyboard](how-to-set-a-property-after-animating-it-with-a-storyboard.md).</span></span>  
  
### <a name="animating-the-output-of-an-animation-has-no-effect"></a><span data-ttu-id="534c0-110">L’animation de la sortie d’une animation n’a aucun effet</span><span class="sxs-lookup"><span data-stu-id="534c0-110">Animating the Output of an Animation Has No Effect</span></span>  
 <span data-ttu-id="534c0-111">Vous ne pouvez pas animer un objet qui est le résultat d’une autre animation.</span><span class="sxs-lookup"><span data-stu-id="534c0-111">You can't animate an object that is the output of another animation.</span></span> <span data-ttu-id="534c0-112">Par exemple, si <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> vous utilisez un <xref:System.Windows.Shapes.Shape.Fill%2A> pour <xref:System.Windows.Shapes.Rectangle> animer le <xref:System.Windows.Media.RadialGradientBrush> d’un à un <xref:System.Windows.Media.SolidColorBrush>, <xref:System.Windows.Media.RadialGradientBrush> vous <xref:System.Windows.Media.SolidColorBrush>ne pouvez pas animer les propriétés de la ou .</span><span class="sxs-lookup"><span data-stu-id="534c0-112">For example, if you use an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> to animate the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle> from a <xref:System.Windows.Media.RadialGradientBrush> to a <xref:System.Windows.Media.SolidColorBrush>, you can't animate any properties of the <xref:System.Windows.Media.RadialGradientBrush> or <xref:System.Windows.Media.SolidColorBrush>.</span></span>  
  
### <a name="cant-change-the-value-of-a-property-after-animating-it"></a><span data-ttu-id="534c0-113">Impossible de modifier la valeur d’une propriété après l’avoir animée</span><span class="sxs-lookup"><span data-stu-id="534c0-113">Can't Change the Value of a Property after Animating it</span></span>  
 <span data-ttu-id="534c0-114">Dans certains cas, il peut sembler que vous ne pouvez pas modifier la valeur d’une propriété une fois qu’elle a été animée, même une fois l’animation terminée.</span><span class="sxs-lookup"><span data-stu-id="534c0-114">In some cases, it might appear that you can't change the value of a property after it's been animated, even after the animation has ended.</span></span> <span data-ttu-id="534c0-115">Cela survient car l’animation, même si elle est terminée, remplace toujours la valeur de base de la propriété.</span><span class="sxs-lookup"><span data-stu-id="534c0-115">That's because, even though the animation ended, it's still overriding the property's base value.</span></span> <span data-ttu-id="534c0-116">Pour empêcher l’animation de dépasser la valeur actuelle de la <xref:System.Windows.Media.Animation.FillBehavior> propriété, l’enlever, ou lui donner un de <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span><span class="sxs-lookup"><span data-stu-id="534c0-116">To stop the animation from overriding the property's current value, remove it, or give it a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span></span> <span data-ttu-id="534c0-117">Pour plus d’informations et un exemple, voir [Set a Property After Animating It with a Storyboard](how-to-set-a-property-after-animating-it-with-a-storyboard.md).</span><span class="sxs-lookup"><span data-stu-id="534c0-117">For more information and an example, see [Set a Property After Animating It with a Storyboard](how-to-set-a-property-after-animating-it-with-a-storyboard.md).</span></span>  
  
### <a name="changing-a-timeline-has-no-effect"></a><span data-ttu-id="534c0-118">La modification d’une chronologie n’a aucun effet</span><span class="sxs-lookup"><span data-stu-id="534c0-118">Changing a Timeline Has No Effect</span></span>  
 <span data-ttu-id="534c0-119">Bien <xref:System.Windows.Media.Animation.Timeline> que la plupart des propriétés soient animatables <xref:System.Windows.Media.Animation.Timeline> et puissent être liées aux données, changer la valeur de propriété d’un actif semble n’avoir aucun effet.</span><span class="sxs-lookup"><span data-stu-id="534c0-119">Although most <xref:System.Windows.Media.Animation.Timeline> properties are animatable and can be data bound, changing the property values of an active <xref:System.Windows.Media.Animation.Timeline> seems to have no effect.</span></span> <span data-ttu-id="534c0-120">C’est parce que, quand un <xref:System.Windows.Media.Animation.Timeline> est commencé, <xref:System.Windows.Media.Animation.Timeline> le système de <xref:System.Windows.Media.Animation.Clock> synchronisation fait une copie de la et l’utilise pour créer un objet.</span><span class="sxs-lookup"><span data-stu-id="534c0-120">That's because, when a <xref:System.Windows.Media.Animation.Timeline> is begun, the timing system makes a copy of the <xref:System.Windows.Media.Animation.Timeline> and uses it to create a <xref:System.Windows.Media.Animation.Clock> object.</span></span> <span data-ttu-id="534c0-121">La modification de l’original n’a aucun effet sur la copie du système.</span><span class="sxs-lookup"><span data-stu-id="534c0-121">Modifying the original has no effect on the system's copy.</span></span>  
  
 <span data-ttu-id="534c0-122">Pour <xref:System.Windows.Media.Animation.Timeline> qu’un à refléter les changements, son horloge doit être régénérée et utilisée pour remplacer l’horloge précédemment créée.</span><span class="sxs-lookup"><span data-stu-id="534c0-122">For a <xref:System.Windows.Media.Animation.Timeline> to reflect changes, its clock must be regenerated and used to replace the previously created clock.</span></span> <span data-ttu-id="534c0-123">Les horloges ne sont pas régénérées automatiquement pour vous.</span><span class="sxs-lookup"><span data-stu-id="534c0-123">Clocks are not regenerated for you automatically.</span></span> <span data-ttu-id="534c0-124">Voici plusieurs façons d’appliquer des modifications de chronologie :</span><span class="sxs-lookup"><span data-stu-id="534c0-124">The following are several ways to apply timeline changes:</span></span>  
  
- <span data-ttu-id="534c0-125">Si la chronologie est <xref:System.Windows.Media.Animation.Storyboard>ou appartient à un , vous pouvez le faire <xref:System.Windows.Media.Animation.BeginStoryboard> refléter <xref:System.Windows.Media.Animation.Storyboard.Begin%2A> les modifications en réappliquer son storyboard en utilisant un ou la méthode.</span><span class="sxs-lookup"><span data-stu-id="534c0-125">If the timeline is or belongs to a <xref:System.Windows.Media.Animation.Storyboard>, you can make it reflect changes by reapplying its storyboard using a <xref:System.Windows.Media.Animation.BeginStoryboard> or the <xref:System.Windows.Media.Animation.Storyboard.Begin%2A> method.</span></span> <span data-ttu-id="534c0-126">Cela a pour effet secondaire de redémarrer également l’animation.</span><span class="sxs-lookup"><span data-stu-id="534c0-126">This has the side effect of also restarting the animation.</span></span> <span data-ttu-id="534c0-127">Dans le code, <xref:System.Windows.Media.Animation.Storyboard.Seek%2A> vous pouvez utiliser la méthode pour faire avancer le storyboard de retour à sa position précédente.</span><span class="sxs-lookup"><span data-stu-id="534c0-127">In code, you can use the <xref:System.Windows.Media.Animation.Storyboard.Seek%2A> method to advance the storyboard back to its previous position.</span></span>  
  
- <span data-ttu-id="534c0-128">Si vous avez appliqué une animation <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> directement sur <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> une propriété en utilisant la méthode, appelez la méthode à nouveau et passez-la l’animation qui a été modifiée.</span><span class="sxs-lookup"><span data-stu-id="534c0-128">If you applied an animation directly to a property using the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method, call the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method again and pass it the animation that has been modified.</span></span>  
  
- <span data-ttu-id="534c0-129">Si vous travaillez directement au niveau de l’horloge, créez et appliquez un nouveau jeu d’horloges et utilisez-le pour remplacer le précédent jeu d’horloges généré.</span><span class="sxs-lookup"><span data-stu-id="534c0-129">If you are working directly at the clock level, create and apply a new set of clocks and use them to replace the previous set of generated clocks.</span></span>  
  
 <span data-ttu-id="534c0-130">Pour plus d’informations sur les chronologies et les horloges, voir [Animation et Timing System Overview](animation-and-timing-system-overview.md).</span><span class="sxs-lookup"><span data-stu-id="534c0-130">For more information about timelines and clocks, see [Animation and Timing System Overview](animation-and-timing-system-overview.md).</span></span>  
  
### <a name="fillbehaviorstop-doesnt-work-as-expected"></a><span data-ttu-id="534c0-131">FillBehavior.Stop ne fonctionne pas comme prévu</span><span class="sxs-lookup"><span data-stu-id="534c0-131">FillBehavior.Stop Doesn't Work as Expected</span></span>  
 <span data-ttu-id="534c0-132">Il ya des <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> moments <xref:System.Windows.Media.Animation.FillBehavior.Stop> où la mise en place de la propriété semble n’avoir aucun effet, comme quand une animation "mains off" à l’autre parce qu’il a un <xref:System.Windows.Media.Animation.BeginStoryboard.HandoffBehavior%2A> réglage de <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace>.</span><span class="sxs-lookup"><span data-stu-id="534c0-132">There are times when setting the <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property to <xref:System.Windows.Media.Animation.FillBehavior.Stop> seems to have no effect, such as when one animation "hands off" to another because it has a <xref:System.Windows.Media.Animation.BeginStoryboard.HandoffBehavior%2A> setting of <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace>.</span></span>  
  
 <span data-ttu-id="534c0-133">L’exemple suivant <xref:System.Windows.Controls.Canvas>crée <xref:System.Windows.Shapes.Rectangle> un <xref:System.Windows.Media.TranslateTransform>, a et a .</span><span class="sxs-lookup"><span data-stu-id="534c0-133">The following example creates a <xref:System.Windows.Controls.Canvas>, a <xref:System.Windows.Shapes.Rectangle> and a <xref:System.Windows.Media.TranslateTransform>.</span></span> <span data-ttu-id="534c0-134">Le <xref:System.Windows.Media.TranslateTransform> sera animé pour <xref:System.Windows.Shapes.Rectangle> déplacer <xref:System.Windows.Controls.Canvas>le autour de la .</span><span class="sxs-lookup"><span data-stu-id="534c0-134">The <xref:System.Windows.Media.TranslateTransform> will be animated to move the <xref:System.Windows.Shapes.Rectangle> around the <xref:System.Windows.Controls.Canvas>.</span></span>  
  
 [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipAnimatedObject](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipanimatedobject)]  
  
 <span data-ttu-id="534c0-135">Les exemples de cette section utilisent les <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> objets précédents pour démontrer plusieurs cas où la propriété ne se comporte pas comme vous pouvez vous y attendre.</span><span class="sxs-lookup"><span data-stu-id="534c0-135">The examples in this section use the preceding objects to demonstrate several cases where the <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property doesn't behave as you might expect it to.</span></span>  
  
#### <a name="fillbehaviorstop-and-handoffbehavior-with-multiple-animations"></a><span data-ttu-id="534c0-136">FillBehavior="Stop" et HandoffBehavior avec plusieurs animations</span><span class="sxs-lookup"><span data-stu-id="534c0-136">FillBehavior="Stop" and HandoffBehavior with Multiple Animations</span></span>  
 <span data-ttu-id="534c0-137">Parfois, il semble qu’une <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> animation ignore sa propriété quand elle est remplacée par une deuxième animation.</span><span class="sxs-lookup"><span data-stu-id="534c0-137">Sometimes it seems as though an animation ignores its <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property when it is replaced by a second animation.</span></span> <span data-ttu-id="534c0-138">Prenons l’exemple suivant, <xref:System.Windows.Media.Animation.Storyboard> qui crée deux objets et <xref:System.Windows.Media.TranslateTransform> les utilise pour animer le même indiqué dans l’exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="534c0-138">Take the following example, which creates two <xref:System.Windows.Media.Animation.Storyboard> objects and uses them to animate the same <xref:System.Windows.Media.TranslateTransform> shown in the preceding example.</span></span>  
  
 <span data-ttu-id="534c0-139">Le <xref:System.Windows.Media.Animation.Storyboard>premier `B1`, anime <xref:System.Windows.Media.TranslateTransform.X%2A> la propriété <xref:System.Windows.Media.TranslateTransform> de la de 0 à 350, qui déplace le rectangle 350 pixels vers la droite.</span><span class="sxs-lookup"><span data-stu-id="534c0-139">The first <xref:System.Windows.Media.Animation.Storyboard>, `B1`, animates the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> from 0 to 350, which moves the rectangle 350 pixels to the right.</span></span> <span data-ttu-id="534c0-140">Lorsque l’animation atteint la fin de <xref:System.Windows.Media.TranslateTransform.X%2A> sa durée et cesse de jouer, la propriété revient à sa valeur d’origine, 0.</span><span class="sxs-lookup"><span data-stu-id="534c0-140">When the animation reaches the end of its duration and stops playing, the <xref:System.Windows.Media.TranslateTransform.X%2A> property reverts to its original value, 0.</span></span> <span data-ttu-id="534c0-141">Par conséquent, le rectangle se déplace vers la droite de 350 pixels puis revient à sa position d’origine.</span><span class="sxs-lookup"><span data-stu-id="534c0-141">As a result, the rectangle moves to the right 350 pixels and then jumps back to its original position.</span></span>  
  
 [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardB1Button](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipstoryboardb1button)]  
  
 <span data-ttu-id="534c0-142">Le <xref:System.Windows.Media.Animation.Storyboard>second `B2`, , anime <xref:System.Windows.Media.TranslateTransform.X%2A> également la <xref:System.Windows.Media.TranslateTransform>propriété de la même .</span><span class="sxs-lookup"><span data-stu-id="534c0-142">The second <xref:System.Windows.Media.Animation.Storyboard>, `B2`, also animates the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the same <xref:System.Windows.Media.TranslateTransform>.</span></span> <span data-ttu-id="534c0-143">Parce que <xref:System.Windows.Media.Animation.DoubleAnimation.To%2A> seule la propriété <xref:System.Windows.Media.Animation.Storyboard> de l’animation dans cet ensemble, l’animation utilise la valeur actuelle de la propriété qu’elle anime comme valeur de départ.</span><span class="sxs-lookup"><span data-stu-id="534c0-143">Because only the <xref:System.Windows.Media.Animation.DoubleAnimation.To%2A> property of the animation in this <xref:System.Windows.Media.Animation.Storyboard> is set, the animation uses the current value of the property it animates as its starting value.</span></span>  
  
 [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardB2Button](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipstoryboardb2button)]  
  
 <span data-ttu-id="534c0-144">Si vous cliquez sur le <xref:System.Windows.Media.Animation.Storyboard> deuxième bouton pendant que le premier joue, vous pouvez vous attendre au comportement suivant :</span><span class="sxs-lookup"><span data-stu-id="534c0-144">If you click the second button while the first <xref:System.Windows.Media.Animation.Storyboard> is playing, you might expect the following behavior:</span></span>  
  
1. <span data-ttu-id="534c0-145">Le premier storyboard se termine et renvoie le rectangle <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> à <xref:System.Windows.Media.Animation.FillBehavior.Stop>sa position d’origine, parce que l’animation a un de .</span><span class="sxs-lookup"><span data-stu-id="534c0-145">The first storyboard ends and sends the rectangle back to its original position, because the animation has a <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span></span>  
  
2. <span data-ttu-id="534c0-146">Le deuxième storyboard est appliqué et s’anime à partir de la position actuelle, qui est désormais 0, jusqu'à 500.</span><span class="sxs-lookup"><span data-stu-id="534c0-146">The second storyboard takes effect and animates from the current position, which is now 0, to 500.</span></span>  
  
 <span data-ttu-id="534c0-147">**Mais ce n’est pas ce qui se produit.**</span><span class="sxs-lookup"><span data-stu-id="534c0-147">**But that's not what happens.**</span></span> <span data-ttu-id="534c0-148">Au lieu de cela, le rectangle ne revient pas. Il continue à se déplacer vers la droite.</span><span class="sxs-lookup"><span data-stu-id="534c0-148">Instead, the rectangle does not jump back; it continues moving to the right.</span></span> <span data-ttu-id="534c0-149">Cela se produit car la deuxième animation utilise la valeur actuelle de la première animation comme valeur de départ, et anime à partir de cette valeur à 500.</span><span class="sxs-lookup"><span data-stu-id="534c0-149">That's because the second animation uses the current value of the first animation as its starting value and animates from that value to 500.</span></span> <span data-ttu-id="534c0-150">Lorsque la deuxième animation remplace <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace> <xref:System.Windows.Media.Animation.HandoffBehavior> la première <xref:System.Windows.Media.Animation.FillBehavior> parce que la est utilisée, la première animation n’a pas d’importance.</span><span class="sxs-lookup"><span data-stu-id="534c0-150">When the second animation replaces the first because the <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace><xref:System.Windows.Media.Animation.HandoffBehavior> is used, the <xref:System.Windows.Media.Animation.FillBehavior> of the first animation does not matter.</span></span>  
  
#### <a name="fillbehavior-and-the-completed-event"></a><span data-ttu-id="534c0-151">FillBehavior et l’événement terminé</span><span class="sxs-lookup"><span data-stu-id="534c0-151">FillBehavior and the Completed Event</span></span>  
 <span data-ttu-id="534c0-152">Les exemples suivants démontrent <xref:System.Windows.Media.Animation.FillBehavior.Stop> <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> un autre scénario dans lequel le semble n’avoir aucun effet.</span><span class="sxs-lookup"><span data-stu-id="534c0-152">The next examples demonstrate another scenario in which the <xref:System.Windows.Media.Animation.FillBehavior.Stop><xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> seems to have no effect.</span></span> <span data-ttu-id="534c0-153">Encore une fois, l’exemple utilise <xref:System.Windows.Media.TranslateTransform.X%2A> un Storyboard pour animer la propriété de la <xref:System.Windows.Media.TranslateTransform> de 0 à 350.</span><span class="sxs-lookup"><span data-stu-id="534c0-153">Again, the example uses a Storyboard to animate the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> from 0 to 350.</span></span> <span data-ttu-id="534c0-154">Cependant, cette fois, l’exemple s’inscrit à l’événement. <xref:System.Windows.Media.Animation.Timeline.Completed></span><span class="sxs-lookup"><span data-stu-id="534c0-154">However, this time the example registers for the <xref:System.Windows.Media.Animation.Timeline.Completed> event.</span></span>  
  
 [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardCButton](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipstoryboardcbutton)]  
  
 <span data-ttu-id="534c0-155">Le <xref:System.Windows.Media.Animation.Timeline.Completed> gestionnaire d’événements commence un autre <xref:System.Windows.Media.Animation.Storyboard> qui anime la même propriété de sa valeur actuelle à 500.</span><span class="sxs-lookup"><span data-stu-id="534c0-155">The <xref:System.Windows.Media.Animation.Timeline.Completed> event handler starts another <xref:System.Windows.Media.Animation.Storyboard> that animates the same property from its current value to 500.</span></span>  
  
 [!code-csharp[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardC1CompletedHandler](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml.cs#fillbehaviortipstoryboardc1completedhandler)]
 [!code-vb[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardC1CompletedHandler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/VisualBasic/FillBehaviorTip.xaml.vb#fillbehaviortipstoryboardc1completedhandler)]  
  
 <span data-ttu-id="534c0-156">Ce qui suit est la majoration qui définit la seconde <xref:System.Windows.Media.Animation.Storyboard> comme une ressource.</span><span class="sxs-lookup"><span data-stu-id="534c0-156">The following is the markup that defines the second <xref:System.Windows.Media.Animation.Storyboard> as a resource.</span></span>  
  
 [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipResources](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipresources)]  
  
 <span data-ttu-id="534c0-157">Lorsque vous <xref:System.Windows.Media.Animation.Storyboard>exécutez le <xref:System.Windows.Media.TranslateTransform.X%2A> , vous <xref:System.Windows.Media.TranslateTransform> pouvez vous attendre à la propriété de la à animer de 0 <xref:System.Windows.Media.Animation.FillBehavior> à <xref:System.Windows.Media.Animation.FillBehavior.Stop>350, puis revenir à 0 après qu’il se termine (parce qu’il a un réglage de ), puis animer de 0 à 500.</span><span class="sxs-lookup"><span data-stu-id="534c0-157">When you run the <xref:System.Windows.Media.Animation.Storyboard>, you might expect the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> to animate from 0 to 350, then revert to 0 after it completes (because it has a <xref:System.Windows.Media.Animation.FillBehavior> setting of <xref:System.Windows.Media.Animation.FillBehavior.Stop>), and then animate from 0 to 500.</span></span> <span data-ttu-id="534c0-158">Au lieu <xref:System.Windows.Media.TranslateTransform> de cela, les animations de 0 à 350, puis à 500.</span><span class="sxs-lookup"><span data-stu-id="534c0-158">Instead, the <xref:System.Windows.Media.TranslateTransform> animates from 0 to 350 and then to 500.</span></span>  
  
 <span data-ttu-id="534c0-159">C’est à cause de l’ordre dans lequel WPF soulève des événements et parce que la valeur des propriétés sont mises en cache et ne sont pas recalculées à moins que la propriété est invalidée.</span><span class="sxs-lookup"><span data-stu-id="534c0-159">That's because of the order in which WPF raises events and because property values are cached and are not recalculated unless the property is invalidated.</span></span> <span data-ttu-id="534c0-160">L’événement <xref:System.Windows.Media.Animation.Timeline.Completed> est traité d’abord parce qu’il a été déclenché par la chronologie des racines (le premier <xref:System.Windows.Media.Animation.Storyboard>).</span><span class="sxs-lookup"><span data-stu-id="534c0-160">The <xref:System.Windows.Media.Animation.Timeline.Completed> event is processed first because it was triggered by the root timeline (the first <xref:System.Windows.Media.Animation.Storyboard>).</span></span> <span data-ttu-id="534c0-161">Pour l’instant, la <xref:System.Windows.Media.TranslateTransform.X%2A> propriété retourne toujours sa valeur animée parce qu’elle n’a pas encore été invalidée.</span><span class="sxs-lookup"><span data-stu-id="534c0-161">At this time, the <xref:System.Windows.Media.TranslateTransform.X%2A> property still returns its animated value because it hasn't been invalidated yet.</span></span> <span data-ttu-id="534c0-162">Le <xref:System.Windows.Media.Animation.Storyboard> second utilise la valeur mise en cache comme valeur de départ et commence à animer.</span><span class="sxs-lookup"><span data-stu-id="534c0-162">The second <xref:System.Windows.Media.Animation.Storyboard> uses the cached value as its starting value and begins animating.</span></span>  
  
<a name="performancesection"></a>
## <a name="performance"></a><span data-ttu-id="534c0-163">Performances</span><span class="sxs-lookup"><span data-stu-id="534c0-163">Performance</span></span>  
  
### <a name="animations-continue-to-run-after-navigating-away-from-a-page"></a><span data-ttu-id="534c0-164">Les animations continuent à s’exécuter après avoir quitté une page</span><span class="sxs-lookup"><span data-stu-id="534c0-164">Animations Continue to Run After Navigating Away from a Page</span></span>  
 <span data-ttu-id="534c0-165">Lorsque vous naviguez <xref:System.Windows.Controls.Page> loin d’un qui contient des animations <xref:System.Windows.Controls.Page> en cours d’exécution, ces animations continueront à jouer jusqu’à ce que les ordures recueillies.</span><span class="sxs-lookup"><span data-stu-id="534c0-165">When you navigate away from a <xref:System.Windows.Controls.Page> that contains running animations, those animations will continue to play until the <xref:System.Windows.Controls.Page> is garbage collected.</span></span> <span data-ttu-id="534c0-166">Selon le système de navigation vous utilisez, une page que vous quittez peut rester en mémoire pendant une durée indéterminée tout en consommant des ressources avec ses animations.</span><span class="sxs-lookup"><span data-stu-id="534c0-166">Depending on the navigation system you're using, a page that you navigate away from might stay in memory for an indefinite amount of time, all the while consuming resources with its animations.</span></span> <span data-ttu-id="534c0-167">Cela est particulièrement visible lorsqu’une page contient des animations en exécution constante (« ambiantes »).</span><span class="sxs-lookup"><span data-stu-id="534c0-167">This is most noticeable when a page contains constantly running ("ambient") animations.</span></span>  
  
 <span data-ttu-id="534c0-168">Pour cette raison, c’est une <xref:System.Windows.FrameworkElement.Unloaded> bonne idée d’utiliser l’événement pour supprimer les animations lorsque vous naviguez loin d’une page.</span><span class="sxs-lookup"><span data-stu-id="534c0-168">For this reason, it's a good idea to use the <xref:System.Windows.FrameworkElement.Unloaded> event to remove animations when you navigate away from a page.</span></span>  
  
 <span data-ttu-id="534c0-169">Il existe différentes manières de supprimer une animation.</span><span class="sxs-lookup"><span data-stu-id="534c0-169">There are different ways to remove an animation.</span></span> <span data-ttu-id="534c0-170">Les techniques suivantes peuvent être utilisées pour <xref:System.Windows.Media.Animation.Storyboard>supprimer les animations qui appartiennent à un .</span><span class="sxs-lookup"><span data-stu-id="534c0-170">The following techniques can be used to remove animations that belong to a <xref:System.Windows.Media.Animation.Storyboard>.</span></span>  
  
- <span data-ttu-id="534c0-171">Pour supprimer <xref:System.Windows.Media.Animation.Storyboard> un vous avez commencé avec un déclencheur d’événement, voir [comment: Supprimer un storyboard](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms749412(v=vs.90)).</span><span class="sxs-lookup"><span data-stu-id="534c0-171">To remove a <xref:System.Windows.Media.Animation.Storyboard> you started with an event trigger, see [How to: Remove a Storyboard](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms749412(v=vs.90)).</span></span>  
  
- <span data-ttu-id="534c0-172">Pour utiliser le <xref:System.Windows.Media.Animation.Storyboard>code pour <xref:System.Windows.Media.Animation.Storyboard.Remove%2A> supprimer un , voir la méthode.</span><span class="sxs-lookup"><span data-stu-id="534c0-172">To use code to remove a <xref:System.Windows.Media.Animation.Storyboard>, see the <xref:System.Windows.Media.Animation.Storyboard.Remove%2A> method.</span></span>  
  
 <span data-ttu-id="534c0-173">La technique suivante peut être utilisée, quelle que soit la façon dont l’animation a été démarrée.</span><span class="sxs-lookup"><span data-stu-id="534c0-173">The next technique may be used regardless of how the animation was started.</span></span>  
  
- <span data-ttu-id="534c0-174">Pour supprimer les animations d’une propriété spécifique, utilisez la <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> méthode.</span><span class="sxs-lookup"><span data-stu-id="534c0-174">To remove animations from a specific property, use the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> method.</span></span> <span data-ttu-id="534c0-175">Spécifiez la propriété étant `null` animée comme le premier paramètre, et comme le second.</span><span class="sxs-lookup"><span data-stu-id="534c0-175">Specify the property being animated as the first parameter, and `null` as the second.</span></span> <span data-ttu-id="534c0-176">Cela supprimera toutes les horloges d’animation de la propriété.</span><span class="sxs-lookup"><span data-stu-id="534c0-176">This will remove all animation clocks from the property.</span></span>  
  
 <span data-ttu-id="534c0-177">Pour plus d’informations sur les différentes façons d’animer les propriétés, voir [Property Animation Techniques Aperçu](property-animation-techniques-overview.md).</span><span class="sxs-lookup"><span data-stu-id="534c0-177">For more information about the different ways to animate properties, see [Property Animation Techniques Overview](property-animation-techniques-overview.md).</span></span>  
  
### <a name="using-the-compose-handoffbehavior-consumes-system-resources"></a><span data-ttu-id="534c0-178">L’utilisation de la composition HandoffBehavior consomme des ressources système</span><span class="sxs-lookup"><span data-stu-id="534c0-178">Using the Compose HandoffBehavior Consumes System Resources</span></span>  
 <span data-ttu-id="534c0-179">Lorsque vous <xref:System.Windows.Media.Animation.Storyboard>appliquez un , <xref:System.Windows.Media.Animation.AnimationTimeline>, <xref:System.Windows.Media.Animation.HandoffBehavior.Compose> <xref:System.Windows.Media.Animation.HandoffBehavior>ou <xref:System.Windows.Media.Animation.Clock> <xref:System.Windows.Media.Animation.AnimationClock> à une propriété en utilisant le , tous les objets précédemment associés à cette propriété continuent à consommer des ressources système; le système de chronométrage ne supprimera pas automatiquement ces horloges.</span><span class="sxs-lookup"><span data-stu-id="534c0-179">When you apply a <xref:System.Windows.Media.Animation.Storyboard>, <xref:System.Windows.Media.Animation.AnimationTimeline>, or <xref:System.Windows.Media.Animation.AnimationClock> to a property using the <xref:System.Windows.Media.Animation.HandoffBehavior.Compose><xref:System.Windows.Media.Animation.HandoffBehavior>, any <xref:System.Windows.Media.Animation.Clock> objects previously associated with that property continue to consume system resources; the timing system will not remove these clocks automatically.</span></span>  
  
 <span data-ttu-id="534c0-180">Pour éviter les problèmes de performance lorsque <xref:System.Windows.Media.Animation.HandoffBehavior.Compose>vous appliquez un grand nombre d’horloges à l’aide, vous devez supprimer les horloges de composition de la propriété animée après qu’ils ont terminé.</span><span class="sxs-lookup"><span data-stu-id="534c0-180">To avoid performance issues when you apply a large number of clocks using <xref:System.Windows.Media.Animation.HandoffBehavior.Compose>, you should remove composing clocks from the animated property after they complete.</span></span> <span data-ttu-id="534c0-181">Il existe plusieurs manières de supprimer une horloge.</span><span class="sxs-lookup"><span data-stu-id="534c0-181">There are several ways to remove a clock.</span></span>  
  
- <span data-ttu-id="534c0-182">Pour supprimer toutes les horloges <xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationClock%29> d’une propriété, utilisez l’objet animé ou <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> la méthode.</span><span class="sxs-lookup"><span data-stu-id="534c0-182">To remove all clocks from a property, use the <xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationClock%29> or <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> method of the animated object.</span></span> <span data-ttu-id="534c0-183">Spécifiez la propriété étant `null` animée comme le premier paramètre, et comme le second.</span><span class="sxs-lookup"><span data-stu-id="534c0-183">Specify the property being animated as the first parameter, and `null` as the second.</span></span> <span data-ttu-id="534c0-184">Cela supprimera toutes les horloges d’animation de la propriété.</span><span class="sxs-lookup"><span data-stu-id="534c0-184">This will remove all animation clocks from the property.</span></span>  
  
- <span data-ttu-id="534c0-185">Pour supprimer <xref:System.Windows.Media.Animation.AnimationClock> un spécifique d’une liste <xref:System.Windows.Media.Animation.Clock.Controller%2A> d’horloges, <xref:System.Windows.Media.Animation.ClockController>utilisez la <xref:System.Windows.Media.Animation.ClockController.Remove%2A> propriété <xref:System.Windows.Media.Animation.ClockController>de la <xref:System.Windows.Media.Animation.AnimationClock> pour récupérer un , puis appelez la méthode de la .</span><span class="sxs-lookup"><span data-stu-id="534c0-185">To remove a specific <xref:System.Windows.Media.Animation.AnimationClock> from a list of clocks, use the <xref:System.Windows.Media.Animation.Clock.Controller%2A> property of the <xref:System.Windows.Media.Animation.AnimationClock> to retrieve a <xref:System.Windows.Media.Animation.ClockController>, then call the <xref:System.Windows.Media.Animation.ClockController.Remove%2A> method of the <xref:System.Windows.Media.Animation.ClockController>.</span></span> <span data-ttu-id="534c0-186">Cela se fait <xref:System.Windows.Media.Animation.Clock.Completed> généralement dans le gestionnaire d’événements pour une horloge.</span><span class="sxs-lookup"><span data-stu-id="534c0-186">This is typically done in the <xref:System.Windows.Media.Animation.Clock.Completed> event handler for a clock.</span></span> <span data-ttu-id="534c0-187">Notez que seules les horloges <xref:System.Windows.Media.Animation.ClockController>à racines peuvent être contrôlées par un ; la <xref:System.Windows.Media.Animation.Clock.Controller%2A> propriété d’une `null`horloge enfant reviendra .</span><span class="sxs-lookup"><span data-stu-id="534c0-187">Note that only root clocks can be controlled by a <xref:System.Windows.Media.Animation.ClockController>; the <xref:System.Windows.Media.Animation.Clock.Controller%2A> property of a child clock will return `null`.</span></span> <span data-ttu-id="534c0-188">Notez également <xref:System.Windows.Media.Animation.Clock.Completed> que l’événement ne sera pas appelé si la durée effective de l’horloge est pour toujours.</span><span class="sxs-lookup"><span data-stu-id="534c0-188">Note also that the <xref:System.Windows.Media.Animation.Clock.Completed> event will not be called if the effective duration of the clock is forever.</span></span>  <span data-ttu-id="534c0-189">Dans ce cas, l’utilisateur devra <xref:System.Windows.Media.Animation.ClockController.Remove%2A>déterminer quand appeler .</span><span class="sxs-lookup"><span data-stu-id="534c0-189">In that case, the user will need to determine when to call <xref:System.Windows.Media.Animation.ClockController.Remove%2A>.</span></span>  
  
 <span data-ttu-id="534c0-190">Il s’agit principalement d’un problème pour les animations sur des objets qui ont une durée de vie longue.</span><span class="sxs-lookup"><span data-stu-id="534c0-190">This is primarily an issue for animations on objects that have a long lifetime.</span></span>  <span data-ttu-id="534c0-191">Lorsqu’un objet est récupéré par le garbage collector, ses horloges sont également déconnectées et récupérées.</span><span class="sxs-lookup"><span data-stu-id="534c0-191">When an object is garbage collected, its clocks will also be disconnected and garbage collected.</span></span>  
  
 <span data-ttu-id="534c0-192">Pour plus d’informations sur les objets de l’horloge, voir [Animation et Timing System Overview](animation-and-timing-system-overview.md).</span><span class="sxs-lookup"><span data-stu-id="534c0-192">For more information about clock objects, see [Animation and Timing System Overview](animation-and-timing-system-overview.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="534c0-193">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="534c0-193">See also</span></span>

- [<span data-ttu-id="534c0-194">Vue d’ensemble de l’animation</span><span class="sxs-lookup"><span data-stu-id="534c0-194">Animation Overview</span></span>](animation-overview.md)
