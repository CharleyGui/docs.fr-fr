---
title: Optimiser les performances 3D de WPF
ms.date: 03/30/2017
helpviewer_keywords:
- 3-D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: e1a90406423e36dd10b8b108e076fe73f99947f0
ms.sourcegitcommit: 77e33b682db39955e331b8e8eda4ef1925a24e78
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2019
ms.locfileid: "70133849"
---
# <a name="maximize-wpf-3d-performance"></a>Optimiser les performances 3D de WPF
Lorsque vous utilisez pour [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] générer des contrôles 3D et inclure des scènes 3D dans vos applications, il est important d’envisager l’optimisation des performances. Cette rubrique fournit une liste des classes et des propriétés 3D qui ont une incidence sur les performances de votre application, ainsi que des recommandations pour optimiser les performances lorsque vous les utilisez.  
  
 Cette rubrique suppose une compréhension approfondie des [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] fonctionnalités 3D. Les suggestions de ce document s’appliquent au «niveau de rendu 2», à peu près définie en tant que matériel prenant en charge le nuanceur de pixels version 2,0 et le nuanceur de sommets version 2,0. Pour plus d’informations, consultez [couches de rendu graphiques](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Impact sur les performances: Élevé  
  
|Propriété|Recommandation|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Vitesse du pinceau (plus rapide à la plus lente):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush>mis en cache<br /><br /> <xref:System.Windows.Media.VisualBrush>mis en cache<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush>mise hors cache<br /><br /> <xref:System.Windows.Media.VisualBrush>mise hors cache|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Affectez `Viewport3D.ClipToBounds` la valeur false chaque fois que vous [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] n’avez pas besoin de découper explicitement le contenu d’un <xref:System.Windows.Controls.Viewport3D> dans le rectangle Viewport3D’s. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]`ClipToBounds` le<xref:System.Windows.Controls.Viewport3D>découpage avec anticrénelage peut être très lent, et est activé par défaut (lent).|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Affectez `Viewport3D.IsHitTestVisible` la valeur false à chaque [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] fois que vous n’avez pas <xref:System.Windows.Controls.Viewport3D> besoin de prendre en compte le contenu d’un lors du test de positionnement de la souris.  Le contenu 3D de test de positionnement est effectué dans un logiciel et peut être lent avec des mailles de grande taille. <xref:System.Windows.UIElement.IsHitTestVisible%2A>est activé (lent) par défaut sur <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Créez des modèles différents uniquement lorsqu’ils requièrent des matériaux ou des transformations différents.  Dans le cas contraire, essayez <xref:System.Windows.Media.Media3D.GeometryModel3D> de fusionner de nombreuses instances avec les mêmes matériaux et de les <xref:System.Windows.Media.Media3D.GeometryModel3D> transformer <xref:System.Windows.Media.Media3D.MeshGeometry3D> en quelques instances et plus volumineuses.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|L’animation de maillage (en modifiant les vertex individuels d’une maille sur une base par image) n’est pas [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]toujours efficace dans.  Pour réduire l’impact sur les performances des notifications de modifications lorsque chaque vertex est modifié, détachez le maillage de l’arborescence d’éléments visuels avant d’effectuer une modification par vertex.  Une fois que le maillage a été modifié, rattachez-le à l’arborescence d’éléments visuels.  Essayez également de réduire la taille des mailles qui seront animées de cette manière.|  
|anticrénelage 3D|Pour augmenter la vitesse de rendu, désactivez <xref:System.Windows.Controls.Viewport3D> l’échantillonnage multiple sur un <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> en `Aliased`affectant à la propriété jointe la valeur.  Par défaut, l’anticrénelage 3D est activé sur Windows avec 4 échantillons par pixel.|  
|Text|Le texte dynamique dans une scène 3D (en direct, car il <xref:System.Windows.Media.DrawingBrush> se <xref:System.Windows.Media.VisualBrush>trouve dans un ou) peut être lent. Essayez d’utiliser des images du texte à la place <xref:System.Windows.Media.Imaging.RenderTargetBitmap>(via) à moins que le texte ne change.|  
|<xref:System.Windows.Media.TileBrush>|Si vous devez utiliser un <xref:System.Windows.Media.VisualBrush> ou un <xref:System.Windows.Media.DrawingBrush> dans une scène 3D parce que le contenu du pinceau n’est pas statique, essayez de mettre en cache le pinceau <xref:System.Windows.Media.RenderOptions.CachingHint%2A> ( `Cache`en affectant à la propriété jointe la valeur).  Définissez les seuils d’invalidation minimal et maximal de l’échelle (avec les <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> propriétés <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>jointes et) afin que les pinceaux mis en cache ne soient pas régénérés trop fréquemment, tout en maintenant le niveau de qualité souhaité.  Par défaut, <xref:System.Windows.Media.DrawingBrush> et <xref:System.Windows.Media.VisualBrush> ne sont pas mis en cache, ce qui signifie que chaque fois que l’un des éléments peints avec le pinceau doit être restitué à nouveau, le contenu entier du pinceau doit d’abord être restitué à nouveau sur une surface intermédiaire.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect>force le rendu de tout le contenu affecté sans accélération matérielle.  Pour des performances optimales, n' <xref:System.Windows.Media.Effects.BitmapEffect>utilisez pas.|  
  
## <a name="performance-impact-medium"></a>Impact sur les performances: Moyenne  
  
|Propriété|Recommandation|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Lorsqu’un maillage est défini en tant que triangles contigus avec des vertex partagés et que ces sommets ont les mêmes position, normale et coordonnées de texture, définissez chaque vertex partagé une seule fois, puis définissez vos <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>triangles par index avec.|  
|<xref:System.Windows.Media.ImageBrush>|Essayez de réduire les tailles de texture lorsque vous avez un contrôle explicite sur la taille (lorsque vous <xref:System.Windows.Media.Imaging.RenderTargetBitmap> utilisez un et/ <xref:System.Windows.Media.ImageBrush>ou un).  Notez que les textures de résolution inférieure peuvent réduire la qualité visuelle, donc essayez de trouver le bon équilibre entre qualité et performances.|  
|Opacité|Lors du rendu de contenu 3D translucide (comme les réflexions), utilisez les propriétés d’opacité sur des <xref:System.Windows.Media.Brush.Opacity%2A> pinceaux ou des matériaux (via ou <xref:System.Windows.Controls.Viewport3D> <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>) au `Viewport3D.Opacity` lieu de créer une translucide distincte en affectant à une valeur inférieure à 1.|  
|<xref:System.Windows.Controls.Viewport3D>|Réduisez le nombre <xref:System.Windows.Controls.Viewport3D> d’objets que vous utilisez dans une scène.  Placez de nombreux modèles 3D dans le même Viewport3D plutôt que de créer des instances Viewport3D distinctes pour chaque modèle.|  
|<xref:System.Windows.Freezable>|En général, il est bénéfique <xref:System.Windows.Media.Media3D.MeshGeometry3D>à <xref:System.Windows.Media.Media3D.GeometryModel3D>la réutilisation,, aux pinceaux et aux matériaux.  Tous sont multiparentes puisqu’ils sont dérivés `Freezable`de.|  
|<xref:System.Windows.Freezable>|Appelez la <xref:System.Windows.Freezable.Freeze%2A> méthode sur Freezables lorsque leurs propriétés restent inchangées dans votre application.  La congélation peut réduire la plage de travail et augmenter la vitesse.|  
|<xref:System.Windows.Media.Brush>|Utilisez <xref:System.Windows.Media.ImageBrush> à la <xref:System.Windows.Media.VisualBrush> place <xref:System.Windows.Media.DrawingBrush> de ou lorsque le contenu du pinceau ne change pas.  le contenu 2D peut être converti en <xref:System.Windows.Controls.Image> un <xref:System.Windows.Media.Imaging.RenderTargetBitmap> via, puis utilisé dans <xref:System.Windows.Media.ImageBrush>un.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|N’utilisez <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> pas, sauf si vous avez réellement besoin de voir les <xref:System.Windows.Media.Media3D.GeometryModel3D>faces arrière de votre.|  
|<xref:System.Windows.Media.Media3D.Light>|Vitesse légère (la plus rapide à la plus lente):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Essayez de conserver les tailles de maillage sous ces limites:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20 001 <xref:System.Windows.Media.Media3D.Point3D> instances<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60 003 <xref:System.Int32> instances|  
|<xref:System.Windows.Media.Media3D.Material>|Vitesse du matériel (plus rapide à la plus lente):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]3D n’exclut pas les pinceaux invisibles (pinceaux ambiants noirs, pinceaux clairs, etc.) de manière cohérente.  Envisagez de les omettre à partir de votre scène.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|<xref:System.Windows.Media.Media3D.Material> Chacun<xref:System.Windows.Media.Media3D.MaterialGroup> d’entre eux provoquant une autre passe de rendu. ainsi, si vous incluez de nombreux matériaux, même des matériaux simples, vous risquez d’augmenter considérablement les besoins de remplissage sur votre GPU.  Réduisez le nombre de documents dans <xref:System.Windows.Media.Media3D.MaterialGroup>votre.|  
  
## <a name="performance-impact-low"></a>Impact sur les performances: Faible  
  
|Propriété|Recommandation|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Lorsque vous n’avez pas besoin d’animation ou de liaison de données, au lieu d’utiliser un groupe de transformations <xref:System.Windows.Media.Media3D.MatrixTransform3D>contenant plusieurs transformations, utilisez un seul, en le définissant sur le produit de toutes les transformations qui, autrement, existent indépendamment dans le groupe de transformations.|  
|<xref:System.Windows.Media.Media3D.Light>|Réduisez le nombre de lumières dans votre scène. Un trop grand nombre d’éclairages dans [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] une scène oblige à revenir au rendu logiciel.  Les limites sont approximativement 110 <xref:System.Windows.Media.Media3D.DirectionalLight> objets, 70 <xref:System.Windows.Media.Media3D.PointLight> objets ou 40 <xref:System.Windows.Media.Media3D.SpotLight> objets.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Séparez les objets mobiles des objets statiques en les <xref:System.Windows.Media.Media3D.ModelVisual3D> plaçant dans des instances distinctes.  ModelVisual3D est «plus lourd» que <xref:System.Windows.Media.Media3D.GeometryModel3D> parce qu’il met en cache les limites transformées.  GeometryModel3D est optimisé pour être un modèle. ModelVisual3D est optimisé pour être un nœud de scène.  Utilisez ModelVisual3D pour placer des instances partagées de GeometryModel3D dans la scène.|  
|<xref:System.Windows.Media.Media3D.Light>|Réduisez le nombre de fois que vous modifiez le nombre de lumières dans la scène.  Chaque modification du nombre de lumière force la régénération et la recompilation d’un nuanceur, sauf si cette configuration a existé précédemment (et donc si son nuanceur a été mis en cache).|  
|Clair|Les voyants noirs ne seront pas visibles, mais ils seront ajoutés au temps de rendu. envisagez de les omettre.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Pour réduire le temps de construction des collections volumineuses dans [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], telles qu’un MeshGeometry3D’s <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>et, prédimensionnez les collections avant le remplissage de la valeur. Si possible, transmettez les structures de données préremplies des constructeurs des collections, telles que des tableaux ou des listes.|  
  
## <a name="see-also"></a>Voir aussi

- [Vue d’ensemble des graphiques 3D](3-d-graphics-overview.md)
