---
title: Aperçu de rendu de graphiques
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- graphics [WPF], rendering
- rendering graphics [WPF]
ms.assetid: 6dec9657-4d8c-4e46-8c54-40fb80008265
ms.openlocfilehash: c82b2c4599f14f55b51587407a7d96b3e2be9d5f
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79186604"
---
# <a name="wpf-graphics-rendering-overview"></a><span data-ttu-id="649b7-102">Vue d'ensemble du rendu graphique de WPF</span><span class="sxs-lookup"><span data-stu-id="649b7-102">WPF Graphics Rendering Overview</span></span>
<span data-ttu-id="649b7-103">Cette rubrique offre une vue d’ensemble de la couche visuelle [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="649b7-103">This topic provides an overview of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] visual layer.</span></span> <span data-ttu-id="649b7-104">Il met l’accent <xref:System.Windows.Media.Visual> sur le rôle [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] de la classe pour rendre le soutien dans le modèle.</span><span class="sxs-lookup"><span data-stu-id="649b7-104">It focuses on the role of the <xref:System.Windows.Media.Visual> class for rendering support in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] model.</span></span>  

<a name="role_of_visual_object"></a>
## <a name="role-of-the-visual-object"></a><span data-ttu-id="649b7-105">Rôle de l’objet visuel</span><span class="sxs-lookup"><span data-stu-id="649b7-105">Role of the Visual Object</span></span>  
 <span data-ttu-id="649b7-106">La <xref:System.Windows.Media.Visual> classe est l’abstraction <xref:System.Windows.FrameworkElement> de base dont chaque objet dérive.</span><span class="sxs-lookup"><span data-stu-id="649b7-106">The <xref:System.Windows.Media.Visual> class is the basic abstraction from which every <xref:System.Windows.FrameworkElement> object derives.</span></span> <span data-ttu-id="649b7-107">Elle sert également de point d’entrée pour l’écriture de nouveaux contrôles dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] et peut être considérée de diverses manières comme le handle de fenêtre (HWND) dans le modèle d’application Win32.</span><span class="sxs-lookup"><span data-stu-id="649b7-107">It also serves as the entry point for writing new controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], and in many ways can be thought of as the window handle (HWND) in the Win32 application model.</span></span>  
  
 <span data-ttu-id="649b7-108">L’objet <xref:System.Windows.Media.Visual> est [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] un objet de base, dont le rôle principal est de fournir un support de rendu.</span><span class="sxs-lookup"><span data-stu-id="649b7-108">The <xref:System.Windows.Media.Visual> object is a core [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] object, whose primary role is to provide rendering support.</span></span> <span data-ttu-id="649b7-109">Les contrôles d’interface <xref:System.Windows.Controls.TextBox>utilisateur, <xref:System.Windows.Media.Visual> tels que <xref:System.Windows.Controls.Button> et, dérivent de la classe, et l’utilisent pour persister leurs données de rendu.</span><span class="sxs-lookup"><span data-stu-id="649b7-109">User interface controls, such as <xref:System.Windows.Controls.Button> and <xref:System.Windows.Controls.TextBox>, derive from the <xref:System.Windows.Media.Visual> class, and use it for persisting their rendering data.</span></span> <span data-ttu-id="649b7-110">L’objet <xref:System.Windows.Media.Visual> fournit un support pour :</span><span class="sxs-lookup"><span data-stu-id="649b7-110">The <xref:System.Windows.Media.Visual> object provides support for:</span></span>  
  
- <span data-ttu-id="649b7-111">Affichage de sortie : rendu du contenu de dessin sérialisé persistant d’un objet visuel.</span><span class="sxs-lookup"><span data-stu-id="649b7-111">Output display: Rendering the persisted, serialized drawing content of a visual.</span></span>  
  
- <span data-ttu-id="649b7-112">Transformations : exécution de transformations sur un objet visuel.</span><span class="sxs-lookup"><span data-stu-id="649b7-112">Transformations: Performing transformations on a visual.</span></span>  
  
- <span data-ttu-id="649b7-113">Détourage : prise en charge de la zone de détourage d’un objet visuel.</span><span class="sxs-lookup"><span data-stu-id="649b7-113">Clipping: Providing clipping region support for a visual.</span></span>  
  
- <span data-ttu-id="649b7-114">Test des résultats : détermination si une coordonnée ou une géométrie est contenue dans les limites d’un objet visuel.</span><span class="sxs-lookup"><span data-stu-id="649b7-114">Hit testing: Determining whether a coordinate or geometry is contained within the bounds of a visual.</span></span>  
  
- <span data-ttu-id="649b7-115">Calculs de rectangle englobant : détermination du rectangle englobant d’un objet visuel.</span><span class="sxs-lookup"><span data-stu-id="649b7-115">Bounding box calculations: Determining the bounding rectangle of a visual.</span></span>  
  
 <span data-ttu-id="649b7-116">Toutefois, <xref:System.Windows.Media.Visual> l’objet n’inclut pas de prise en charge des entités non-rendu, telles que :</span><span class="sxs-lookup"><span data-stu-id="649b7-116">However, the <xref:System.Windows.Media.Visual> object does not include support for non-rendering features, such as:</span></span>  
  
- <span data-ttu-id="649b7-117">Gestion des événements</span><span class="sxs-lookup"><span data-stu-id="649b7-117">Event handling</span></span>  
  
- <span data-ttu-id="649b7-118">Disposition</span><span class="sxs-lookup"><span data-stu-id="649b7-118">Layout</span></span>  
  
- <span data-ttu-id="649b7-119">Styles</span><span class="sxs-lookup"><span data-stu-id="649b7-119">Styles</span></span>  
  
- <span data-ttu-id="649b7-120">Liaison de données</span><span class="sxs-lookup"><span data-stu-id="649b7-120">Data binding</span></span>  
  
- <span data-ttu-id="649b7-121">Globalisation</span><span class="sxs-lookup"><span data-stu-id="649b7-121">Globalization</span></span>  
  
 <span data-ttu-id="649b7-122"><xref:System.Windows.Media.Visual>est exposée comme une classe abstraite publique à partir de laquelle les classes d’enfants doivent être dérivées.</span><span class="sxs-lookup"><span data-stu-id="649b7-122"><xref:System.Windows.Media.Visual> is exposed as a public abstract class from which child classes must be derived.</span></span> <span data-ttu-id="649b7-123">L’illustration suivante montre la hiérarchie des objets visuels exposés dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="649b7-123">The following illustration shows the hierarchy of the visual objects that are exposed in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
 ![Diagramme des classes dérivées de l'objet Visual](./media/wpf-graphics-rendering-overview/classes-derived-visual-object.png)
  
### <a name="drawingvisual-class"></a><span data-ttu-id="649b7-125">Classe DrawingVisual</span><span class="sxs-lookup"><span data-stu-id="649b7-125">DrawingVisual Class</span></span>  
 <span data-ttu-id="649b7-126">Il <xref:System.Windows.Media.DrawingVisual> s’agit d’une classe de dessin léger qui est utilisée pour rendre des formes, des images ou du texte.</span><span class="sxs-lookup"><span data-stu-id="649b7-126">The <xref:System.Windows.Media.DrawingVisual> is a lightweight drawing class that is used to render shapes, images, or text.</span></span> <span data-ttu-id="649b7-127">Cette classe est considérée comme légère, car elle n’offre pas de dispositions ni d’options de gestion des événements, ce qui améliore ses performances d’exécution.</span><span class="sxs-lookup"><span data-stu-id="649b7-127">This class is considered lightweight because it does not provide layout or event handling, which improves its runtime performance.</span></span> <span data-ttu-id="649b7-128">C’est pourquoi, les dessins de ce type sont idéaux pour les arrière-plans et les images clipart.</span><span class="sxs-lookup"><span data-stu-id="649b7-128">For this reason, drawings are ideal for backgrounds and clip art.</span></span> <span data-ttu-id="649b7-129">Le <xref:System.Windows.Media.DrawingVisual> peut être utilisé pour créer un objet visuel personnalisé.</span><span class="sxs-lookup"><span data-stu-id="649b7-129">The <xref:System.Windows.Media.DrawingVisual> can be used to create a custom visual object.</span></span> <span data-ttu-id="649b7-130">Pour plus d’informations, consultez [Utilisation d’objets DrawingVisual](using-drawingvisual-objects.md).</span><span class="sxs-lookup"><span data-stu-id="649b7-130">For more information, see [Using DrawingVisual Objects](using-drawingvisual-objects.md).</span></span>  
  
### <a name="viewport3dvisual-class"></a><span data-ttu-id="649b7-131">Classe Viewport3DVisual</span><span class="sxs-lookup"><span data-stu-id="649b7-131">Viewport3DVisual Class</span></span>  
 <span data-ttu-id="649b7-132">Le <xref:System.Windows.Media.Media3D.Viewport3DVisual> fournit un pont <xref:System.Windows.Media.Visual> entre <xref:System.Windows.Media.Media3D.Visual3D> la 2D et les objets.</span><span class="sxs-lookup"><span data-stu-id="649b7-132">The <xref:System.Windows.Media.Media3D.Viewport3DVisual> provides a bridge between 2D <xref:System.Windows.Media.Visual> and <xref:System.Windows.Media.Media3D.Visual3D> objects.</span></span> <span data-ttu-id="649b7-133">La <xref:System.Windows.Media.Media3D.Visual3D> classe est la classe de base pour tous les éléments visuels 3D.</span><span class="sxs-lookup"><span data-stu-id="649b7-133">The <xref:System.Windows.Media.Media3D.Visual3D> class is the base class for all 3D visual elements.</span></span> <span data-ttu-id="649b7-134">L’exige <xref:System.Windows.Media.Media3D.Viewport3DVisual> que <xref:System.Windows.Media.Media3D.Viewport3DVisual.Camera%2A> vous définissiez une valeur et une <xref:System.Windows.Media.Media3D.Viewport3DVisual.Viewport%2A> valeur.</span><span class="sxs-lookup"><span data-stu-id="649b7-134">The <xref:System.Windows.Media.Media3D.Viewport3DVisual> requires that you define a <xref:System.Windows.Media.Media3D.Viewport3DVisual.Camera%2A> value and a <xref:System.Windows.Media.Media3D.Viewport3DVisual.Viewport%2A> value.</span></span> <span data-ttu-id="649b7-135">La caméra vous permet d’afficher la scène.</span><span class="sxs-lookup"><span data-stu-id="649b7-135">The camera allows you to view the scene.</span></span> <span data-ttu-id="649b7-136">La fenêtre d’affichage détermine où la projection est mappée sur la surface 2D.</span><span class="sxs-lookup"><span data-stu-id="649b7-136">The viewport establishes where the projection maps onto the 2D surface.</span></span> <span data-ttu-id="649b7-137">Pour plus d’informations sur la 3D dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], consultez [Vue d’ensemble des graphiques 3D](3-d-graphics-overview.md).</span><span class="sxs-lookup"><span data-stu-id="649b7-137">For more information on 3D in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [3-D Graphics Overview](3-d-graphics-overview.md).</span></span>  
  
### <a name="containervisual-class"></a><span data-ttu-id="649b7-138">Classe ContainerVisual</span><span class="sxs-lookup"><span data-stu-id="649b7-138">ContainerVisual Class</span></span>  
 <span data-ttu-id="649b7-139">La <xref:System.Windows.Media.ContainerVisual> classe est utilisée comme conteneur <xref:System.Windows.Media.Visual> pour une collection d’objets.</span><span class="sxs-lookup"><span data-stu-id="649b7-139">The <xref:System.Windows.Media.ContainerVisual> class is used as a container for a collection of <xref:System.Windows.Media.Visual> objects.</span></span> <span data-ttu-id="649b7-140">La <xref:System.Windows.Media.DrawingVisual> classe dérive <xref:System.Windows.Media.ContainerVisual> de la classe, ce qui lui permet de contenir une collection d’objets visuels.</span><span class="sxs-lookup"><span data-stu-id="649b7-140">The <xref:System.Windows.Media.DrawingVisual> class derives from the <xref:System.Windows.Media.ContainerVisual> class, allowing it to contain a collection of visual objects.</span></span>  
  
### <a name="drawing-content-in-visual-objects"></a><span data-ttu-id="649b7-141">Dessin de contenu dans des objets visuels</span><span class="sxs-lookup"><span data-stu-id="649b7-141">Drawing Content in Visual Objects</span></span>  
 <span data-ttu-id="649b7-142">Un <xref:System.Windows.Media.Visual> objet stocke ses données de rendu comme une **liste d’instructions graphiques vectorielles**.</span><span class="sxs-lookup"><span data-stu-id="649b7-142">A <xref:System.Windows.Media.Visual> object stores its render data as a **vector graphics instruction list**.</span></span> <span data-ttu-id="649b7-143">Chaque élément de la liste d’instructions représente un ensemble de bas niveau de données graphiques et des ressources associées dans un format sérialisé.</span><span class="sxs-lookup"><span data-stu-id="649b7-143">Each item in the instruction list represents a low-level set of graphics data and associated resources in a serialized format.</span></span> <span data-ttu-id="649b7-144">Quatre types de données de rendu différents peuvent du contenu de dessin.</span><span class="sxs-lookup"><span data-stu-id="649b7-144">There are four different types of render data that can contain drawing content.</span></span>  
  
|<span data-ttu-id="649b7-145">Type de contenu de dessin</span><span class="sxs-lookup"><span data-stu-id="649b7-145">Drawing content type</span></span>|<span data-ttu-id="649b7-146">Description</span><span class="sxs-lookup"><span data-stu-id="649b7-146">Description</span></span>|  
|--------------------------|-----------------|  
|<span data-ttu-id="649b7-147">Graphismes vectoriels</span><span class="sxs-lookup"><span data-stu-id="649b7-147">Vector graphics</span></span>|<span data-ttu-id="649b7-148">Représente les données graphiques <xref:System.Windows.Media.Brush> vectorielles, ainsi que toute information et <xref:System.Windows.Media.Pen> information.</span><span class="sxs-lookup"><span data-stu-id="649b7-148">Represents vector graphics data, and any associated <xref:System.Windows.Media.Brush> and <xref:System.Windows.Media.Pen> information.</span></span>|  
|<span data-ttu-id="649b7-149">Image</span><span class="sxs-lookup"><span data-stu-id="649b7-149">Image</span></span>|<span data-ttu-id="649b7-150">Représente une image au sein <xref:System.Windows.Rect>d’une région définie par un .</span><span class="sxs-lookup"><span data-stu-id="649b7-150">Represents an image within a region defined by a <xref:System.Windows.Rect>.</span></span>|  
|<span data-ttu-id="649b7-151">Glyphe</span><span class="sxs-lookup"><span data-stu-id="649b7-151">Glyph</span></span>|<span data-ttu-id="649b7-152">Représente un dessin qui <xref:System.Windows.Media.GlyphRun>rend un , qui est une séquence de glyphes à partir d’une ressource de police spécifiée.</span><span class="sxs-lookup"><span data-stu-id="649b7-152">Represents a drawing that renders a <xref:System.Windows.Media.GlyphRun>, which is a sequence of glyphs from a specified font resource.</span></span> <span data-ttu-id="649b7-153">Il s’agit de la représentation du texte.</span><span class="sxs-lookup"><span data-stu-id="649b7-153">This is how text is represented.</span></span>|  
|<span data-ttu-id="649b7-154">Vidéo</span><span class="sxs-lookup"><span data-stu-id="649b7-154">Video</span></span>|<span data-ttu-id="649b7-155">Représente un dessin qui rend de la vidéo.</span><span class="sxs-lookup"><span data-stu-id="649b7-155">Represents a drawing that renders video.</span></span>|  
  
 <span data-ttu-id="649b7-156">Le <xref:System.Windows.Media.DrawingContext> vous permet de <xref:System.Windows.Media.Visual> remplir un avec du contenu visuel.</span><span class="sxs-lookup"><span data-stu-id="649b7-156">The <xref:System.Windows.Media.DrawingContext> allows you to populate a <xref:System.Windows.Media.Visual> with visual content.</span></span> <span data-ttu-id="649b7-157">Lorsque vous <xref:System.Windows.Media.DrawingContext> utilisez les commandes de tirage d’un objet, vous stockez en fait un ensemble de données de rendu qui seront plus tard utilisées par le système graphique ; vous ne dessinez pas à l’écran en temps réel.</span><span class="sxs-lookup"><span data-stu-id="649b7-157">When you use a <xref:System.Windows.Media.DrawingContext> object's draw commands, you are actually storing a set of render data that will later be used by the graphics system; you are not drawing to the screen in real-time.</span></span>  
  
 <span data-ttu-id="649b7-158">Lorsque vous [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] créez un contrôle, tel qu’un, <xref:System.Windows.Controls.Button>le contrôle génère implicitement des données de rendu pour se dessiner.</span><span class="sxs-lookup"><span data-stu-id="649b7-158">When you create a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] control, such as a <xref:System.Windows.Controls.Button>, the control implicitly generates render data for drawing itself.</span></span> <span data-ttu-id="649b7-159">Par exemple, <xref:System.Windows.Controls.ContentControl.Content%2A> l’établissement <xref:System.Windows.Controls.Button> de la propriété des causes du contrôle pour stocker une représentation de rendu d’un glyphe.</span><span class="sxs-lookup"><span data-stu-id="649b7-159">For example, setting the <xref:System.Windows.Controls.ContentControl.Content%2A> property of the <xref:System.Windows.Controls.Button> causes the control to store a rendering representation of a glyph.</span></span>  
  
 <span data-ttu-id="649b7-160">A <xref:System.Windows.Media.Visual> décrit son contenu comme <xref:System.Windows.Media.Drawing> un ou <xref:System.Windows.Media.DrawingGroup>plusieurs objets contenus dans un .</span><span class="sxs-lookup"><span data-stu-id="649b7-160">A <xref:System.Windows.Media.Visual> describes its content as one or more <xref:System.Windows.Media.Drawing> objects contained within a <xref:System.Windows.Media.DrawingGroup>.</span></span> <span data-ttu-id="649b7-161">A <xref:System.Windows.Media.DrawingGroup> décrit également les masques d’opacité, les transformations, les effets de bitmap et d’autres opérations qui sont appliquées à son contenu.</span><span class="sxs-lookup"><span data-stu-id="649b7-161">A <xref:System.Windows.Media.DrawingGroup> also describes opacity masks, transforms, bitmap effects, and other operations that are applied to its contents.</span></span> <span data-ttu-id="649b7-162"><xref:System.Windows.Media.DrawingGroup>les opérations sont appliquées dans l’ordre <xref:System.Windows.Media.DrawingGroup.BitmapEffect%2A>suivant <xref:System.Windows.Media.DrawingGroup.ClipGeometry%2A> <xref:System.Windows.Media.DrawingGroup.GuidelineSet%2A>lorsque le <xref:System.Windows.Media.DrawingGroup.Transform%2A>contenu est rendu: <xref:System.Windows.Media.DrawingGroup.OpacityMask%2A>, <xref:System.Windows.Media.DrawingGroup.Opacity%2A>, , , , et puis .</span><span class="sxs-lookup"><span data-stu-id="649b7-162"><xref:System.Windows.Media.DrawingGroup> operations are applied in the following order when content is rendered: <xref:System.Windows.Media.DrawingGroup.OpacityMask%2A>, <xref:System.Windows.Media.DrawingGroup.Opacity%2A>, <xref:System.Windows.Media.DrawingGroup.BitmapEffect%2A>, <xref:System.Windows.Media.DrawingGroup.ClipGeometry%2A>, <xref:System.Windows.Media.DrawingGroup.GuidelineSet%2A>, and then <xref:System.Windows.Media.DrawingGroup.Transform%2A>.</span></span>  
  
 <span data-ttu-id="649b7-163">L’illustration suivante montre <xref:System.Windows.Media.DrawingGroup> l’ordre dans lequel les opérations sont appliquées pendant la séquence de rendu.</span><span class="sxs-lookup"><span data-stu-id="649b7-163">The following illustration shows the order in which <xref:System.Windows.Media.DrawingGroup> operations are applied during the rendering sequence.</span></span>  
  
 <span data-ttu-id="649b7-164">![Ordre des opérations DrawingGroup](./media/graphcismm-drawinggroup-order.png "graphcismm_drawinggroup_order")</span><span class="sxs-lookup"><span data-stu-id="649b7-164">![DrawingGroup order of operations](./media/graphcismm-drawinggroup-order.png "graphcismm_drawinggroup_order")</span></span>  
<span data-ttu-id="649b7-165">Ordre des opérations DrawingGroup</span><span class="sxs-lookup"><span data-stu-id="649b7-165">Order of DrawingGroup operations</span></span>  
  
 <span data-ttu-id="649b7-166">Pour plus d’informations, consultez [Vue d’ensemble des objets de dessin](drawing-objects-overview.md).</span><span class="sxs-lookup"><span data-stu-id="649b7-166">For more information, see [Drawing Objects Overview](drawing-objects-overview.md).</span></span>  
  
#### <a name="drawing-content-at-the-visual-layer"></a><span data-ttu-id="649b7-167">Contenu de dessin sur la couche visuelle</span><span class="sxs-lookup"><span data-stu-id="649b7-167">Drawing Content at the Visual Layer</span></span>  
 <span data-ttu-id="649b7-168">Vous n’avez jamais <xref:System.Windows.Media.DrawingContext>directement instantané un ; vous pouvez, cependant, acquérir un contexte de <xref:System.Windows.Media.DrawingGroup.Open%2A?displayProperty=nameWithType> <xref:System.Windows.Media.DrawingVisual.RenderOpen%2A?displayProperty=nameWithType>dessin à partir de certaines méthodes, telles que et .</span><span class="sxs-lookup"><span data-stu-id="649b7-168">You never directly instantiate a <xref:System.Windows.Media.DrawingContext>; you can, however, acquire a drawing context from certain methods, such as <xref:System.Windows.Media.DrawingGroup.Open%2A?displayProperty=nameWithType> and <xref:System.Windows.Media.DrawingVisual.RenderOpen%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="649b7-169">L’exemple suivant <xref:System.Windows.Media.DrawingContext> récupère <xref:System.Windows.Media.DrawingVisual> un d’un et l’utilise pour dessiner un rectangle.</span><span class="sxs-lookup"><span data-stu-id="649b7-169">The following example retrieves a <xref:System.Windows.Media.DrawingContext> from a <xref:System.Windows.Media.DrawingVisual> and uses it to draw a rectangle.</span></span>  
  
 [!code-csharp[drawingvisualsample#101](~/samples/snippets/csharp/VS_Snippets_Wpf/DrawingVisualSample/CSharp/Window1.xaml.cs#101)]
 [!code-vb[drawingvisualsample#101](~/samples/snippets/visualbasic/VS_Snippets_Wpf/DrawingVisualSample/visualbasic/window1.xaml.vb#101)]  
  
#### <a name="enumerating-drawing-content-at-the-visual-layer"></a><span data-ttu-id="649b7-170">Énumération du contenu de dessin sur la couche visuelle</span><span class="sxs-lookup"><span data-stu-id="649b7-170">Enumerating Drawing Content at the Visual Layer</span></span>  
 <span data-ttu-id="649b7-171">En plus de leurs <xref:System.Windows.Media.Drawing> autres utilisations, les objets fournissent également <xref:System.Windows.Media.Visual>un modèle d’objet pour énumérer le contenu d’un .</span><span class="sxs-lookup"><span data-stu-id="649b7-171">In addition to their other uses, <xref:System.Windows.Media.Drawing> objects also provide an object model for enumerating the contents of a <xref:System.Windows.Media.Visual>.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="649b7-172">Lorsque vous énumérez le contenu du visuel, vous <xref:System.Windows.Media.Drawing> récupérez des objets, et non la représentation sous-jacente des données de rendu comme une liste d’instructions graphiques vectorielles.</span><span class="sxs-lookup"><span data-stu-id="649b7-172">When you are enumerating the contents of the visual, you are retrieving <xref:System.Windows.Media.Drawing> objects, and not the underlying representation of the render data as a vector graphics instruction list.</span></span>  
  
 <span data-ttu-id="649b7-173">L’exemple suivant <xref:System.Windows.Media.VisualTreeHelper.GetDrawing%2A> utilise la <xref:System.Windows.Media.DrawingGroup> méthode <xref:System.Windows.Media.Visual> pour récupérer la valeur d’un et l’énumérer.</span><span class="sxs-lookup"><span data-stu-id="649b7-173">The following example uses the <xref:System.Windows.Media.VisualTreeHelper.GetDrawing%2A> method to retrieve the <xref:System.Windows.Media.DrawingGroup> value of a <xref:System.Windows.Media.Visual> and enumerate it.</span></span>  
  
 [!code-csharp[DrawingMiscSnippets_snip#GraphicsMMRetrieveDrawings](~/samples/snippets/csharp/VS_Snippets_Wpf/DrawingMiscSnippets_snip/CSharp/EnumerateDrawingsExample.xaml.cs#graphicsmmretrievedrawings)]  
  
<a name="how_visual_objects_are_used_to_build_controls"></a>
## <a name="how-visual-objects-are-used-to-build-controls"></a><span data-ttu-id="649b7-174">Comment les objets visuels sont utilisés pour générer des contrôles</span><span class="sxs-lookup"><span data-stu-id="649b7-174">How Visual Objects are Used to Build Controls</span></span>  
 <span data-ttu-id="649b7-175">Un grand nombre d’objets dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] sont composés d’autres objets visuels, ce qui signifie qu’ils peuvent contenir différentes hiérarchies d’objets descendants.</span><span class="sxs-lookup"><span data-stu-id="649b7-175">Many of the objects in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] are composed of other visual objects, meaning they can contain varying hierarchies of descendant objects.</span></span> <span data-ttu-id="649b7-176">Un grand nombre d’éléments de l’interface utilisateur dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], tels que les contrôles, sont composés de plusieurs objets visuels représentant différents types d’éléments de rendu.</span><span class="sxs-lookup"><span data-stu-id="649b7-176">Many of the user interface elements in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], such as controls, are composed of multiple visual objects, representing different types of rendering elements.</span></span> <span data-ttu-id="649b7-177">Par exemple, <xref:System.Windows.Controls.Button> le contrôle peut contenir un <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> <xref:System.Windows.Controls.ContentPresenter>certain <xref:System.Windows.Controls.TextBlock>nombre d’autres objets, y compris , , et .</span><span class="sxs-lookup"><span data-stu-id="649b7-177">For example, the <xref:System.Windows.Controls.Button> control can contain a number of other objects, including <xref:Microsoft.Windows.Themes.ClassicBorderDecorator>, <xref:System.Windows.Controls.ContentPresenter>, and <xref:System.Windows.Controls.TextBlock>.</span></span>  
  
 <span data-ttu-id="649b7-178">Le code suivant <xref:System.Windows.Controls.Button> affiche un contrôle défini dans la balisage.</span><span class="sxs-lookup"><span data-stu-id="649b7-178">The following code shows a <xref:System.Windows.Controls.Button> control defined in markup.</span></span>  
  
 [!code-xaml[VisualsOverview#VisualsOverviewSnippet1](~/samples/snippets/csharp/VS_Snippets_Wpf/VisualsOverview/CSharp/Window1.xaml#visualsoverviewsnippet1)]  
  
 <span data-ttu-id="649b7-179">Si vous énumériez les objets visuels qui <xref:System.Windows.Controls.Button> composent le contrôle par défaut, vous trouverez la hiérarchie des objets visuels illustrés ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="649b7-179">If you were to enumerate the visual objects that comprise the default <xref:System.Windows.Controls.Button> control, you would find the hierarchy of visual objects illustrated below:</span></span>  
  
 ![Diagramme de la hiérarchie de l’arborescence d’éléments visuels](./media/wpf-graphics-rendering-overview/visual-object-diagram.gif)
  
 <span data-ttu-id="649b7-181">Le <xref:System.Windows.Controls.Button> contrôle <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> contient un élément, qui <xref:System.Windows.Controls.ContentPresenter> à son tour, contient un élément.</span><span class="sxs-lookup"><span data-stu-id="649b7-181">The <xref:System.Windows.Controls.Button> control contains a <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> element, which in turn, contains a <xref:System.Windows.Controls.ContentPresenter> element.</span></span> <span data-ttu-id="649b7-182">L’élément <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> est responsable de l’établissement <xref:System.Windows.Controls.Button>d’une frontière et d’un arrière-plan pour le .</span><span class="sxs-lookup"><span data-stu-id="649b7-182">The <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> element is responsible for drawing a border and a background for the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="649b7-183">L’élément <xref:System.Windows.Controls.ContentPresenter> est responsable de <xref:System.Windows.Controls.Button>l’affichage du contenu de la .</span><span class="sxs-lookup"><span data-stu-id="649b7-183">The <xref:System.Windows.Controls.ContentPresenter> element is responsible for displaying the contents of the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="649b7-184">Dans ce cas, puisque vous <xref:System.Windows.Controls.ContentPresenter> affichez <xref:System.Windows.Controls.TextBlock> du texte, l’élément contient un élément.</span><span class="sxs-lookup"><span data-stu-id="649b7-184">In this case, since you are displaying text, the <xref:System.Windows.Controls.ContentPresenter> element contains a <xref:System.Windows.Controls.TextBlock> element.</span></span> <span data-ttu-id="649b7-185">Le fait <xref:System.Windows.Controls.Button> que le <xref:System.Windows.Controls.ContentPresenter> contrôle utilise un moyen que le contenu <xref:System.Windows.Controls.Image> pourrait être représenté par d’autres éléments, tels qu’une ou une géométrie, comme un <xref:System.Windows.Media.EllipseGeometry>.</span><span class="sxs-lookup"><span data-stu-id="649b7-185">The fact that the <xref:System.Windows.Controls.Button> control uses a <xref:System.Windows.Controls.ContentPresenter> means that the content could be represented by other elements, such as an <xref:System.Windows.Controls.Image> or a geometry, such as an <xref:System.Windows.Media.EllipseGeometry>.</span></span>  
  
### <a name="control-templates"></a><span data-ttu-id="649b7-186">Modèles de contrôle</span><span class="sxs-lookup"><span data-stu-id="649b7-186">Control Templates</span></span>  
 <span data-ttu-id="649b7-187">La clé de l’expansion d’un contrôle <xref:System.Windows.Controls.ControlTemplate>dans une hiérarchie de contrôles est le .</span><span class="sxs-lookup"><span data-stu-id="649b7-187">The key to the expansion of a control into a hierarchy of controls is the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="649b7-188">Un modèle de contrôle spécifie la hiérarchie d’objets visuels par défaut d’un contrôle.</span><span class="sxs-lookup"><span data-stu-id="649b7-188">A control template specifies the default visual hierarchy for a control.</span></span> <span data-ttu-id="649b7-189">Lorsque vous référencez explicitement un contrôle, vous référencez implicitement sa hiérarchie d’objets visuels.</span><span class="sxs-lookup"><span data-stu-id="649b7-189">When you explicitly reference a control, you implicitly reference its visual hierarchy.</span></span> <span data-ttu-id="649b7-190">Vous pouvez remplacer les valeurs par défaut d’un modèle de contrôle afin de créer une apparence visuelle personnalisée pour un contrôle.</span><span class="sxs-lookup"><span data-stu-id="649b7-190">You can override the default values for a control template to create a customized visual appearance for a control.</span></span> <span data-ttu-id="649b7-191">Par exemple, vous pouvez modifier la <xref:System.Windows.Controls.Button> valeur de couleur de fond du contrôle de sorte qu’il utilise une valeur linéaire de couleur de gradient au lieu d’une valeur de couleur solide.</span><span class="sxs-lookup"><span data-stu-id="649b7-191">For example, you could modify the background color value of the <xref:System.Windows.Controls.Button> control so that it uses a linear gradient color value instead of a solid color value.</span></span> <span data-ttu-id="649b7-192">Pour plus d’informations, consultez [Styles et modèles de bouton](../controls/button-styles-and-templates.md).</span><span class="sxs-lookup"><span data-stu-id="649b7-192">For more information, see [Button Styles and Templates](../controls/button-styles-and-templates.md).</span></span>  
  
 <span data-ttu-id="649b7-193">Un élément d’interface <xref:System.Windows.Controls.Button> utilisateur, tel qu’un contrôle, contient plusieurs listes d’instructions graphiques vectorielles qui décrivent l’ensemble de la définition de rendu d’un contrôle.</span><span class="sxs-lookup"><span data-stu-id="649b7-193">A user interface element, such as a <xref:System.Windows.Controls.Button> control, contains several vector graphics instruction lists that describe the entire rendering definition of a control.</span></span> <span data-ttu-id="649b7-194">Le code suivant <xref:System.Windows.Controls.Button> affiche un contrôle défini dans la balisage.</span><span class="sxs-lookup"><span data-stu-id="649b7-194">The following code shows a <xref:System.Windows.Controls.Button> control defined in markup.</span></span>  
  
 [!code-xaml[VisualsOverview#VisualsOverviewSnippet2](~/samples/snippets/csharp/VS_Snippets_Wpf/VisualsOverview/CSharp/Window1.xaml#visualsoverviewsnippet2)]  
  
 <span data-ttu-id="649b7-195">Si vous énumériez les objets visuels et les listes <xref:System.Windows.Controls.Button> d’instructions graphiques vectorielles qui composent le contrôle, vous trouverez la hiérarchie des objets illustrés ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="649b7-195">If you were to enumerate the visual objects and vector graphics instruction lists that comprise the <xref:System.Windows.Controls.Button> control, you would find the hierarchy of objects illustrated below:</span></span>  
  
 ![Diagramme de l’arborescence d’éléments visuels et des données de rendu](./media/wpf-graphics-rendering-overview/visual-tree-rendering-data.png)  
  
 <span data-ttu-id="649b7-197">Le <xref:System.Windows.Controls.Button> contrôle <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> contient un élément, qui <xref:System.Windows.Controls.ContentPresenter> à son tour, contient un élément.</span><span class="sxs-lookup"><span data-stu-id="649b7-197">The <xref:System.Windows.Controls.Button> control contains a <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> element, which in turn, contains a <xref:System.Windows.Controls.ContentPresenter> element.</span></span> <span data-ttu-id="649b7-198">L’élément <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> est responsable de dessiner tous les éléments graphiques discrets qui composent la bordure et l’arrière-plan d’un bouton.</span><span class="sxs-lookup"><span data-stu-id="649b7-198">The <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> element is responsible for drawing all the discrete graphic elements that make up the border and background of a button.</span></span> <span data-ttu-id="649b7-199">L’élément <xref:System.Windows.Controls.ContentPresenter> est responsable de <xref:System.Windows.Controls.Button>l’affichage du contenu de la .</span><span class="sxs-lookup"><span data-stu-id="649b7-199">The <xref:System.Windows.Controls.ContentPresenter> element is responsible for displaying the contents of the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="649b7-200">Dans ce cas, puisque vous affichez une image, l’élément <xref:System.Windows.Controls.ContentPresenter> contient un <xref:System.Windows.Controls.Image> élément.</span><span class="sxs-lookup"><span data-stu-id="649b7-200">In this case, since you are displaying an image, the <xref:System.Windows.Controls.ContentPresenter> element contains a <xref:System.Windows.Controls.Image> element.</span></span>  
  
 <span data-ttu-id="649b7-201">Prenez note des différents points suivants sur la hiérarchie d’objets visuels et les listes d’instructions de graphismes vectoriels :</span><span class="sxs-lookup"><span data-stu-id="649b7-201">There are a number of points to note about the hierarchy of visual objects and vector graphics instruction lists:</span></span>  
  
- <span data-ttu-id="649b7-202">L’ordre de la hiérarchie représente l’ordre de rendu des informations de dessin.</span><span class="sxs-lookup"><span data-stu-id="649b7-202">The ordering in the hierarchy represents the rendering order of the drawing information.</span></span> <span data-ttu-id="649b7-203">À partir de l’élément visuel racine, les éléments enfants sont parcourus de gauche à droite et de haut en bas.</span><span class="sxs-lookup"><span data-stu-id="649b7-203">From the root visual element, child elements are traversed, left to right, top to bottom.</span></span> <span data-ttu-id="649b7-204">Si un élément comporte des éléments enfants, ils sont parcourus avant les frères de l’élément.</span><span class="sxs-lookup"><span data-stu-id="649b7-204">If an element has visual child elements, they are traversed before the element’s siblings.</span></span>  
  
- <span data-ttu-id="649b7-205">Les éléments de nœuds non-feuilles dans la hiérarchie, tels que, <xref:System.Windows.Controls.ContentPresenter>sont utilisés pour contenir des éléments pour enfants, ils ne contiennent pas de listes d’instructions.</span><span class="sxs-lookup"><span data-stu-id="649b7-205">Non-leaf node elements in the hierarchy, such as <xref:System.Windows.Controls.ContentPresenter>, are used to contain child elements—they do not contain instruction lists.</span></span>  
  
- <span data-ttu-id="649b7-206">Si un élément visuel contient une liste d’instructions de graphismes vectoriels et des enfants visuels, la liste d’instructions de l’élément visuel parent est rendue avant les dessins des objets enfants visuels.</span><span class="sxs-lookup"><span data-stu-id="649b7-206">If a visual element contains both a vector graphics instruction list and visual children, the instruction list in the parent visual element is rendered before drawings in any of the visual child objects.</span></span>  
  
- <span data-ttu-id="649b7-207">Les éléments dans la liste d’instructions de graphismes vectoriels sont rendus de gauche à droite.</span><span class="sxs-lookup"><span data-stu-id="649b7-207">The items in the vector graphics instruction list are rendered left to right.</span></span>  
  
<a name="visual_tree"></a>
## <a name="visual-tree"></a><span data-ttu-id="649b7-208">Arborescence d'éléments visuels</span><span class="sxs-lookup"><span data-stu-id="649b7-208">Visual Tree</span></span>  
 <span data-ttu-id="649b7-209">L’arborescence d’éléments visuels contient tous les éléments visuels utilisés dans l’interface utilisateur d’une application.</span><span class="sxs-lookup"><span data-stu-id="649b7-209">The visual tree contains all visual elements used in an application's user interface.</span></span> <span data-ttu-id="649b7-210">Étant donné qu’un élément visuel contient des informations de dessin persistantes, vous pouvez considérer l’arborescence d’éléments visuels comme un graphique de scène contenant toutes les informations de rendu nécessaires pour composer la sortie vers le périphérique d’affichage.</span><span class="sxs-lookup"><span data-stu-id="649b7-210">Since a visual element contains persisted drawing information, you can think of the visual tree as a scene graph, containing all the rendering information needed to compose the output to the display device.</span></span> <span data-ttu-id="649b7-211">Cette arborescence est l’accumulation de tous les éléments visuels créés directement par l’application, que ce soit dans le code ou dans la balise.</span><span class="sxs-lookup"><span data-stu-id="649b7-211">This tree is the accumulation of all visual elements created directly by the application, whether in code or in markup.</span></span> <span data-ttu-id="649b7-212">L’arborescence d’éléments visuels contient également tous les éléments visuels créés par l’expansion du modèle d’éléments comme les contrôles et les objets de données.</span><span class="sxs-lookup"><span data-stu-id="649b7-212">The visual tree also contains all visual elements created by the template expansion of elements such as controls and data objects.</span></span>  
  
 <span data-ttu-id="649b7-213">Le code suivant <xref:System.Windows.Controls.StackPanel> montre un élément défini dans la balisage.</span><span class="sxs-lookup"><span data-stu-id="649b7-213">The following code shows a <xref:System.Windows.Controls.StackPanel> element defined in markup.</span></span>  
  
 [!code-xaml[VisualsOverview#VisualsOverviewSnippet3](~/samples/snippets/csharp/VS_Snippets_Wpf/VisualsOverview/CSharp/Window1.xaml#visualsoverviewsnippet3)]  
  
 <span data-ttu-id="649b7-214">Si vous énumériez les objets visuels <xref:System.Windows.Controls.StackPanel> qui composent l’élément dans l’exemple de balisage, vous trouverez la hiérarchie des objets visuels illustrés ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="649b7-214">If you were to enumerate the visual objects that comprise the <xref:System.Windows.Controls.StackPanel> element in the markup example, you would find the hierarchy of visual objects illustrated below:</span></span>  
  
 ![Diagramme de la hiérarchie de l’arborescence d’éléments visuels](./media/wpf-graphics-rendering-overview/visual-tree-hierarchy.gif)  
  
### <a name="rendering-order"></a><span data-ttu-id="649b7-216">Ordre de rendu</span><span class="sxs-lookup"><span data-stu-id="649b7-216">Rendering Order</span></span>  
 <span data-ttu-id="649b7-217">L’arborescence d’éléments visuels détermine l’ordre de rendu des objets visuels et de dessin [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="649b7-217">The visual tree determines the rendering order of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] visual and drawing objects.</span></span> <span data-ttu-id="649b7-218">L’ordre de parcours démarre avec l’objet visuel racine qui est le nœud supérieur de l’arborescence d’éléments visuels.</span><span class="sxs-lookup"><span data-stu-id="649b7-218">The order of traversal starts with the root visual, which is the top-most node in the visual tree.</span></span> <span data-ttu-id="649b7-219">Les enfants de l’objet visuel racine sont ensuite parcourus de gauche à droite.</span><span class="sxs-lookup"><span data-stu-id="649b7-219">The root visual’s children are then traversed, left to right.</span></span> <span data-ttu-id="649b7-220">Si un objet visuel comporte des enfants, ses enfants sont parcourus avant les frères de l’objet visuel.</span><span class="sxs-lookup"><span data-stu-id="649b7-220">If a visual has children, its children are traversed before the visual’s siblings.</span></span> <span data-ttu-id="649b7-221">Cela signifie que le contenu d’un objet visuel enfant est rendu avant le contenu de l’objet visuel.</span><span class="sxs-lookup"><span data-stu-id="649b7-221">This means that the content of a child visual is rendered in front of the visual's own content.</span></span>  
  
 ![Diagramme de l’ordre visuel de rendu d’arbre](./media/wpf-graphics-rendering-overview/visual-tree-rendering-order.gif)
  
### <a name="root-visual"></a><span data-ttu-id="649b7-223">Objet visuel racine</span><span class="sxs-lookup"><span data-stu-id="649b7-223">Root Visual</span></span>  
 <span data-ttu-id="649b7-224">L’**objet visuel racine** est le premier élément d’une hiérarchie d’arborescence d’éléments visuels.</span><span class="sxs-lookup"><span data-stu-id="649b7-224">The **root visual** is the top-most element in a visual tree hierarchy.</span></span> <span data-ttu-id="649b7-225">Dans la plupart des applications, la <xref:System.Windows.Window> classe <xref:System.Windows.Navigation.NavigationWindow>de base du visuel racine est soit ou .</span><span class="sxs-lookup"><span data-stu-id="649b7-225">In most applications, the base class of the root visual is either <xref:System.Windows.Window> or <xref:System.Windows.Navigation.NavigationWindow>.</span></span> <span data-ttu-id="649b7-226">Toutefois, si vous hébergiez des objets visuels dans une application Win32, l’objet visuel racine serait le premier objet visuel hébergé dans la fenêtre Win32.</span><span class="sxs-lookup"><span data-stu-id="649b7-226">However, if you were hosting visual objects in a Win32 application, the root visual would be the top-most visual you were hosting in the Win32 window.</span></span> <span data-ttu-id="649b7-227">Pour plus d’informations, consultez [Didacticiel : hébergement d’objets visuels dans une application Win32](tutorial-hosting-visual-objects-in-a-win32-application.md).</span><span class="sxs-lookup"><span data-stu-id="649b7-227">For more information, see [Tutorial: Hosting Visual Objects in a Win32 Application](tutorial-hosting-visual-objects-in-a-win32-application.md).</span></span>  
  
### <a name="relationship-to-the-logical-tree"></a><span data-ttu-id="649b7-228">Relation à l’arborescence logique</span><span class="sxs-lookup"><span data-stu-id="649b7-228">Relationship to the Logical Tree</span></span>  
 <span data-ttu-id="649b7-229">L’arborescence logique dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] représente les éléments d’une application au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="649b7-229">The logical tree in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] represents the elements of an application at run time.</span></span> <span data-ttu-id="649b7-230">Même si vous ne manipulez pas directement cette arborescence, cette vue de l’application est utile pour comprendre l’héritage de propriété et le routage d’événement.</span><span class="sxs-lookup"><span data-stu-id="649b7-230">Although you do not manipulate this tree directly, this view of the application is useful for understanding property inheritance and event routing.</span></span> <span data-ttu-id="649b7-231">Contrairement à l’arbre visuel, l’arbre logique peut <xref:System.Windows.Documents.ListItem>représenter des objets de données non visuels, tels que .</span><span class="sxs-lookup"><span data-stu-id="649b7-231">Unlike the visual tree, the logical tree can represent non-visual data objects, such as <xref:System.Windows.Documents.ListItem>.</span></span> <span data-ttu-id="649b7-232">Dans de nombreux cas, l’arborescence logique est très étroitement liée aux définitions de balise d’une application.</span><span class="sxs-lookup"><span data-stu-id="649b7-232">In many cases, the logical tree maps very closely to an application's markup definitions.</span></span> <span data-ttu-id="649b7-233">Le code suivant <xref:System.Windows.Controls.DockPanel> montre un élément défini dans la balisage.</span><span class="sxs-lookup"><span data-stu-id="649b7-233">The following code shows a <xref:System.Windows.Controls.DockPanel> element defined in markup.</span></span>  
  
 [!code-xaml[VisualsOverview#VisualsOverviewSnippet5](~/samples/snippets/csharp/VS_Snippets_Wpf/VisualsOverview/CSharp/Window1.xaml#visualsoverviewsnippet5)]  
  
 <span data-ttu-id="649b7-234">Si vous énumériez les objets logiques <xref:System.Windows.Controls.DockPanel> qui composent l’élément dans l’exemple de balisage, vous trouverez la hiérarchie des objets logiques illustrés ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="649b7-234">If you were to enumerate the logical objects that comprise the <xref:System.Windows.Controls.DockPanel> element in the markup example, you would find the hierarchy of logical objects illustrated below:</span></span>  
  
 <span data-ttu-id="649b7-235">![Diagramme de l’arborescence](./media/tree1-wcp.gif "Tree1_wcp")</span><span class="sxs-lookup"><span data-stu-id="649b7-235">![Tree diagram](./media/tree1-wcp.gif "Tree1_wcp")</span></span>  
<span data-ttu-id="649b7-236">Diagramme de l’arborescence logique</span><span class="sxs-lookup"><span data-stu-id="649b7-236">Diagram of logical tree</span></span>  
  
 <span data-ttu-id="649b7-237">L’arborescence d’éléments visuels et l’arborescence logique sont synchronisées avec l’ensemble actuel d’éléments d’application, reflétant tout ajout, suppression ou modification d’éléments.</span><span class="sxs-lookup"><span data-stu-id="649b7-237">Both the visual tree and logical tree are synchronized with the current set of application elements, reflecting any addition, deletion, or modification of elements.</span></span> <span data-ttu-id="649b7-238">Toutefois, les arborescences présentent différentes vues de l’application.</span><span class="sxs-lookup"><span data-stu-id="649b7-238">However, the trees present different views of the application.</span></span> <span data-ttu-id="649b7-239">Contrairement à l’arbre visuel, l’arbre <xref:System.Windows.Controls.ContentPresenter> logique n’étend pas l’élément d’un contrôle.</span><span class="sxs-lookup"><span data-stu-id="649b7-239">Unlike the visual tree, the logical tree does not expand a control's <xref:System.Windows.Controls.ContentPresenter> element.</span></span> <span data-ttu-id="649b7-240">Cela signifie qu’il n’existe pas de correspondance directe entre une arborescence logique et une arborescence d’éléments visuels pour le même ensemble d’objets.</span><span class="sxs-lookup"><span data-stu-id="649b7-240">This means there is not a direct one-to-one correspondence between a logical tree and a visual tree for the same set of objects.</span></span> <span data-ttu-id="649b7-241">En fait, invoquer la méthode de <xref:System.Windows.LogicalTreeHelper.GetChildren%2A> l’objet **LogicalTreeHelper** <xref:System.Windows.Media.VisualTreeHelper.GetChild%2A> et la méthode de l’objet **VisualTreeHelper** en utilisant le même élément qu’un paramètre donne des résultats différents.</span><span class="sxs-lookup"><span data-stu-id="649b7-241">In fact, invoking the **LogicalTreeHelper** object's <xref:System.Windows.LogicalTreeHelper.GetChildren%2A> method and the **VisualTreeHelper** object's <xref:System.Windows.Media.VisualTreeHelper.GetChild%2A> method using the same element as a parameter yields differing results.</span></span>  
  
 <span data-ttu-id="649b7-242">Pour plus d’informations sur l’arborescence logique, consultez [Arborescences dans WPF](../advanced/trees-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="649b7-242">For more information on the logical tree, see [Trees in WPF](../advanced/trees-in-wpf.md).</span></span>  
  
### <a name="viewing-the-visual-tree-with-xamlpad"></a><span data-ttu-id="649b7-243">Affichage de l’arborescence d’éléments visuels avec XamlPad</span><span class="sxs-lookup"><span data-stu-id="649b7-243">Viewing the Visual Tree with XamlPad</span></span>  
 <span data-ttu-id="649b7-244">L’outil, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] XamlPad, offre une option pour visualiser et explorer l’arbre visuel qui correspond au contenu XAML actuellement défini.</span><span class="sxs-lookup"><span data-stu-id="649b7-244">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] tool, XamlPad, provides an option for viewing and exploring the visual tree that corresponds to the currently defined XAML content.</span></span> <span data-ttu-id="649b7-245">Cliquez sur le bouton **Show Visual Tree** (Afficher l’arborescence d’éléments visuels) de la barre de menus pour afficher l’arborescence d’éléments visuels.</span><span class="sxs-lookup"><span data-stu-id="649b7-245">Click the **Show Visual Tree** button on the menu bar to display the visual tree.</span></span> <span data-ttu-id="649b7-246">Ce qui suit illustre l’expansion du contenu XAML dans les nœuds d’arbres visuels dans le panneau **Visual Tree Explorer** de XamlPad:</span><span class="sxs-lookup"><span data-stu-id="649b7-246">The following illustrates the expansion of XAML content into visual tree nodes in the **Visual Tree Explorer** panel of XamlPad:</span></span>  
  
 ![Volet Explorateur de l’arborescence d’éléments visuels dans XamlPad](./media/wpf-graphics-rendering-overview/visual-tree-explorer.png)  

 <span data-ttu-id="649b7-248">Remarquez <xref:System.Windows.Controls.Label>comment <xref:System.Windows.Controls.TextBox>le <xref:System.Windows.Controls.Button> , , et contrôle chaque affichage d’une hiérarchie d’objets visuels distincts dans le panneau **Visual Tree Explorer** de XamlPad.</span><span class="sxs-lookup"><span data-stu-id="649b7-248">Notice how the <xref:System.Windows.Controls.Label>, <xref:System.Windows.Controls.TextBox>, and <xref:System.Windows.Controls.Button> controls each display a separate visual object hierarchy in the **Visual Tree Explorer** panel of XamlPad.</span></span> <span data-ttu-id="649b7-249">C’est [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] parce <xref:System.Windows.Controls.ControlTemplate> que les contrôles ont un qui contient l’arbre visuel de ce contrôle.</span><span class="sxs-lookup"><span data-stu-id="649b7-249">This is because [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controls have a <xref:System.Windows.Controls.ControlTemplate> that contains the visual tree of that control.</span></span> <span data-ttu-id="649b7-250">Lorsque vous référencez explicitement un contrôle, vous référencez implicitement sa hiérarchie d’objets visuels.</span><span class="sxs-lookup"><span data-stu-id="649b7-250">When you explicitly reference a control, you implicitly reference its visual hierarchy.</span></span>  
  
### <a name="profiling-visual-performance"></a><span data-ttu-id="649b7-251">Profilage des performances visuelles</span><span class="sxs-lookup"><span data-stu-id="649b7-251">Profiling Visual Performance</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="649b7-252">fournit une suite d’outils de profilage des performances qui vous permettent d’analyser le comportement au moment de l’exécution de votre application et de déterminer les types d’optimisations des performances que vous pouvez appliquer.</span><span class="sxs-lookup"><span data-stu-id="649b7-252">provides a suite of performance profiling tools that allow you to analyze the run-time behavior of your application and determine the types of performance optimizations you can apply.</span></span> <span data-ttu-id="649b7-253">L’outil Profileur Visual fournit une vue graphique détaillée des données de performances en mappant directement à l’arborescence d’éléments visuels de l’application.</span><span class="sxs-lookup"><span data-stu-id="649b7-253">The Visual Profiler tool provides a rich, graphical view of performance data by mapping directly to the application's visual tree.</span></span> <span data-ttu-id="649b7-254">Dans cette capture d’écran, la section **Utilisation du processeur** du Profileur Visual décrit précisément l’utilisation de services [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] de l’objet, tels que le rendu et la disposition.</span><span class="sxs-lookup"><span data-stu-id="649b7-254">In this screenshot, the **CPU Usage** section of the Visual Profiler gives you a precise breakdown of an object's use of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] services, such as rendering and layout.</span></span>  
  
 <span data-ttu-id="649b7-255">![Sortie du Générateur de profils Visual](./media/wpfperf-visualprofiler-04.png "WPFPerf_VisualProfiler_04")</span><span class="sxs-lookup"><span data-stu-id="649b7-255">![Visual Profiler display output](./media/wpfperf-visualprofiler-04.png "WPFPerf_VisualProfiler_04")</span></span>  
<span data-ttu-id="649b7-256">Sortie du Générateur de profils Visual</span><span class="sxs-lookup"><span data-stu-id="649b7-256">Visual Profiler display output</span></span>  
  
<a name="visual_rendering_behavior"></a>
## <a name="visual-rendering-behavior"></a><span data-ttu-id="649b7-257">Comportement de rendu d’objet visuel</span><span class="sxs-lookup"><span data-stu-id="649b7-257">Visual Rendering Behavior</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="649b7-258">introduit plusieurs fonctionnalités qui affectent le comportement de rendu d’objets visuels : graphiques en mode retenu, graphismes vectoriels et graphiques indépendants du périphérique.</span><span class="sxs-lookup"><span data-stu-id="649b7-258">introduces several features that affect the rendering behavior of visual objects: retained mode graphics, vector graphics, and device independent graphics.</span></span>  
  
### <a name="retained-mode-graphics"></a><span data-ttu-id="649b7-259">Graphiques en mode retenu</span><span class="sxs-lookup"><span data-stu-id="649b7-259">Retained Mode Graphics</span></span>  
 <span data-ttu-id="649b7-260">Une des clés pour comprendre le rôle de l’objet visuel est de comprendre la différence entre les systèmes graphiques en **mode exécution** et en **mode retenu**.</span><span class="sxs-lookup"><span data-stu-id="649b7-260">One of the keys to understanding the role of the Visual object is to understand the difference between **immediate mode** and **retained mode** graphics systems.</span></span> <span data-ttu-id="649b7-261">Une application Win32 standard basée sur GDI ou GDI+ utilise un système graphique en mode exécution.</span><span class="sxs-lookup"><span data-stu-id="649b7-261">A standard Win32 application based on GDI or GDI+ uses an immediate mode graphics system.</span></span> <span data-ttu-id="649b7-262">Cela signifie que l’application est responsable de la mise à jour la partie de la zone client qui est invalidée en raison d’une action telle que le redimensionnement d’une fenêtre ou de la modification de l’apparence visuelle d’un objet.</span><span class="sxs-lookup"><span data-stu-id="649b7-262">This means that the application is responsible for repainting the portion of the client area that is invalidated, due to an action such as a window being resized, or an object changing its visual appearance.</span></span>  
  
 ![Diagramme de la séquence de rendu Win32](./media/wpf-graphics-rendering-overview/win32-rendering-squence.png)  
  
 <span data-ttu-id="649b7-264">Au contraire, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] utilise un système en mode retenu.</span><span class="sxs-lookup"><span data-stu-id="649b7-264">In contrast, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] uses a retained mode system.</span></span> <span data-ttu-id="649b7-265">Cela signifie que les objets d’application ayant une apparence visuelle définissent un ensemble de données de dessin sérialisées.</span><span class="sxs-lookup"><span data-stu-id="649b7-265">This means application objects that have a visual appearance define a set of serialized drawing data.</span></span> <span data-ttu-id="649b7-266">Une fois que les données de dessin sont définies, le système est ensuite responsable de répondre à toutes les demandes de mise à jour pour le rendu des objets d’application.</span><span class="sxs-lookup"><span data-stu-id="649b7-266">Once the drawing data is defined, the system is responsible thereafter for responding to all repaint requests for rendering the application objects.</span></span> <span data-ttu-id="649b7-267">Même au moment de l’exécution, vous pouvez modifier ou créer des objets d’application en vous appuyant toujours sur le système pour répondre aux demandes de dessin.</span><span class="sxs-lookup"><span data-stu-id="649b7-267">Even at run time, you can modify or create application objects, and still rely on the system for responding to paint requests.</span></span> <span data-ttu-id="649b7-268">La puissance d’un système graphique en mode retenu est telle que les informations de dessin restent dans un état sérialisé par l’application, mais la responsabilité du rendu est laissée au système.</span><span class="sxs-lookup"><span data-stu-id="649b7-268">The power in a retained mode graphics system is that drawing information is always persisted in a serialized state by the application, but rendering responsibility left to the system.</span></span> <span data-ttu-id="649b7-269">Le diagramme suivant illustre comment l’application s’appuie sur [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] pour répondre aux demandes de dessin.</span><span class="sxs-lookup"><span data-stu-id="649b7-269">The following diagram shows how the application relies on [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] for responding to paint requests.</span></span>  
  
 ![Diagramme de la séquence de rendu WPF](./media/wpf-graphics-rendering-overview/wpf-rendering-sequence.png)  

#### <a name="intelligent-redrawing"></a><span data-ttu-id="649b7-271">Nouveau dessin intelligent</span><span class="sxs-lookup"><span data-stu-id="649b7-271">Intelligent Redrawing</span></span>  
 <span data-ttu-id="649b7-272">L’un des principaux avantages de l’utilisation de graphiques en mode retenu est que [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] peut optimiser efficacement ce qui doit être redessiné dans l’application.</span><span class="sxs-lookup"><span data-stu-id="649b7-272">One of the biggest benefits in using retained mode graphics is that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] can efficiently optimize what needs to be redrawn in the application.</span></span> <span data-ttu-id="649b7-273">Même si vous avez une scène complexe avec différents niveaux d’opacité, vous ne devez généralement pas écrire du code spécial pour optimiser le nouveau dessin.</span><span class="sxs-lookup"><span data-stu-id="649b7-273">Even if you have a complex scene with varying levels of opacity, you generally do not need to write special-purpose code to optimize redrawing.</span></span> <span data-ttu-id="649b7-274">Comparez cela avec la programmation Win32 dans laquelle vous pouvez consacrer beaucoup de temps à optimiser votre application en réduisant la quantité de nouveau dessin dans la région de mise à jour.</span><span class="sxs-lookup"><span data-stu-id="649b7-274">Compare this with Win32 programming in which you can spend a great deal of effort in optimizing your application by minimizing the amount of redrawing in the update region.</span></span> <span data-ttu-id="649b7-275">Consultez [Nouveau dessin dans la région de mise à jour](/windows/desktop/gdi/redrawing-in-the-update-region) pour obtenir un exemple du type de complexité impliquée dans l’optimisation du nouveau dessin dans les applications Win32.</span><span class="sxs-lookup"><span data-stu-id="649b7-275">See [Redrawing in the Update Region](/windows/desktop/gdi/redrawing-in-the-update-region) for an example of the type of complexity involved in optimizing redrawing in Win32 applications.</span></span>  
  
### <a name="vector-graphics"></a><span data-ttu-id="649b7-276">Graphismes vectoriels</span><span class="sxs-lookup"><span data-stu-id="649b7-276">Vector Graphics</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="649b7-277">utilise des **graphismes vectoriels** comme format des données de rendu.</span><span class="sxs-lookup"><span data-stu-id="649b7-277">uses **vector graphics** as its rendering data format.</span></span> <span data-ttu-id="649b7-278">Les graphiques vectoriels, qui incluent les SVG (Scalable Vector Graphics), les métafichiers Windows (.wmf) et les polices TrueType, stockent les données de rendu et les transmettent sous forme de liste d’instructions qui décrivent comment recréer une image à l’aide de primitives graphiques.</span><span class="sxs-lookup"><span data-stu-id="649b7-278">Vector graphics—which include Scalable Vector Graphics (SVG), Windows metafiles (.wmf), and TrueType fonts—store rendering data and transmit it as a list of instructions that describe how to recreate an image using graphics primitives.</span></span> <span data-ttu-id="649b7-279">Par exemple, les polices TrueType sont des polices vectorielles qui décrivent un ensemble de lignes, de courbes et de commandes, plutôt qu’un tableau de pixels.</span><span class="sxs-lookup"><span data-stu-id="649b7-279">For example, TrueType fonts are outline fonts that describe a set of lines, curves, and commands, rather than an array of pixels.</span></span> <span data-ttu-id="649b7-280">L’un des principaux avantages des graphismes vectoriels est la possibilité de mettre à l’échelle à toute taille et résolution.</span><span class="sxs-lookup"><span data-stu-id="649b7-280">One of the key benefits of vector graphics is the ability to scale to any size and resolution.</span></span>  
  
 <span data-ttu-id="649b7-281">Contrairement aux graphismes vectoriels, les graphiques bitmap stockent les données de rendu sous forme de représentation pixel par pixel d’une image, prérendue pour une résolution spécifique.</span><span class="sxs-lookup"><span data-stu-id="649b7-281">Unlike vector graphics, bitmap graphics store rendering data as a pixel-by-pixel representation of an image, pre-rendered for a specific resolution.</span></span> <span data-ttu-id="649b7-282">L’une des principales différences entre les formats de graphiques bitmap et de graphismes vectoriels est la fidélité à l’image source d’origine.</span><span class="sxs-lookup"><span data-stu-id="649b7-282">One of the key differences between bitmap and vector graphic formats is fidelity to the original source image.</span></span> <span data-ttu-id="649b7-283">Par exemple, lorsque la taille d’une image source est modifiée, les systèmes de graphiques bitmap étirent l’image, tandis que les systèmes de graphismes vectoriels mettent l’image à l’échelle, restant ainsi fidèle à l’image.</span><span class="sxs-lookup"><span data-stu-id="649b7-283">For example, when the size of a source image is modified, bitmap graphics systems stretch the image, whereas vector graphics systems scale the image, preserving the image fidelity.</span></span>  
  
 <span data-ttu-id="649b7-284">L’illustration suivante montre une image source qui a été redimensionnée à 300 %.</span><span class="sxs-lookup"><span data-stu-id="649b7-284">The following illustration shows a source image that has been resized by 300%.</span></span> <span data-ttu-id="649b7-285">Remarquez les distorsions qui apparaissent lorsque l’image source est étirée dans une image graphique bitmap plutôt que mise à l’échelle dans une image de graphisme vectoriel.</span><span class="sxs-lookup"><span data-stu-id="649b7-285">Notice the distortions that appear when the source image is stretched as a bitmap graphics image rather than scaled as a vector graphics image.</span></span>  
  
 ![Différences entre graphiques raster et vectoriels](./media/wpf-graphics-rendering-overview/raster-vector-differences.png)  
  
 <span data-ttu-id="649b7-287">La balisage <xref:System.Windows.Shapes.Path> suivante montre deux éléments définis.</span><span class="sxs-lookup"><span data-stu-id="649b7-287">The following markup shows two <xref:System.Windows.Shapes.Path> elements defined.</span></span> <span data-ttu-id="649b7-288">Le deuxième élément <xref:System.Windows.Media.ScaleTransform> utilise un pour resize les instructions de dessin du premier élément par 300%.</span><span class="sxs-lookup"><span data-stu-id="649b7-288">The second element uses a <xref:System.Windows.Media.ScaleTransform> to resize the drawing instructions of the first element by 300%.</span></span> <span data-ttu-id="649b7-289">Notez que les <xref:System.Windows.Shapes.Path> instructions de dessin dans les éléments restent inchangées.</span><span class="sxs-lookup"><span data-stu-id="649b7-289">Notice that the drawing instructions in the <xref:System.Windows.Shapes.Path> elements remain unchanged.</span></span>  
  
 [!code-xaml[VectorGraphicsSnippets#VectorGraphicsSnippet1](~/samples/snippets/csharp/VS_Snippets_Wpf/VectorGraphicsSnippets/CS/PageOne.xaml#vectorgraphicssnippet1)]  
  
### <a name="about-resolution-and-device-independent-graphics"></a><span data-ttu-id="649b7-290">À propos des graphiques indépendants de la résolution et du périphérique</span><span class="sxs-lookup"><span data-stu-id="649b7-290">About Resolution and Device-Independent Graphics</span></span>  
 <span data-ttu-id="649b7-291">Deux facteurs système déterminent la taille du texte et des graphiques sur votre écran : la résolution et les points par pouce (PPP).</span><span class="sxs-lookup"><span data-stu-id="649b7-291">There are two system factors that determine the size of text and graphics on your screen: resolution and DPI.</span></span> <span data-ttu-id="649b7-292">La résolution décrit le nombre de pixels qui apparaissent sur l’écran.</span><span class="sxs-lookup"><span data-stu-id="649b7-292">Resolution describes the number of pixels that appear on the screen.</span></span> <span data-ttu-id="649b7-293">Plus la résolution est élevée, plus les pixels sont petits, générant ainsi des graphiques et du texte plus petits.</span><span class="sxs-lookup"><span data-stu-id="649b7-293">As the resolution gets higher, pixels get smaller, causing graphics and text to appear smaller.</span></span> <span data-ttu-id="649b7-294">Un graphique affiché sur un écran défini sur 1024 x 768 apparaîtra beaucoup plus petit lorsque la résolution est définie sur 1600 x 1200.</span><span class="sxs-lookup"><span data-stu-id="649b7-294">A graphic displayed on a monitor set to 1024 x 768 will appear much smaller when the resolution is changed to 1600 x 1200.</span></span>  
  
 <span data-ttu-id="649b7-295">L’autre paramètre système, PPP, décrit la taille d’un pouce d’écran en pixels.</span><span class="sxs-lookup"><span data-stu-id="649b7-295">The other system setting, DPI, describes the size of a screen inch in pixels.</span></span> <span data-ttu-id="649b7-296">La plupart des systèmes Windows ont un DPI de 96, ce qui signifie qu’un pouce d’écran est de 96 pixels.</span><span class="sxs-lookup"><span data-stu-id="649b7-296">Most Windows systems have a DPI of 96, which means a screen inch is 96 pixels.</span></span> <span data-ttu-id="649b7-297">L’augmentation du paramètre PPP rend le pouce d’écran plus grand ; la réduction du paramètre PPP rend le pouce d’écran plus petit.</span><span class="sxs-lookup"><span data-stu-id="649b7-297">Increasing the DPI setting makes the screen inch larger; decreasing the DPI makes the screen inch smaller.</span></span> <span data-ttu-id="649b7-298">Cela signifie qu’un pouce d’écran n’a pas la même taille qu’un pouce réel ; dans la plupart des systèmes, ceci n’est probablement pas le cas.</span><span class="sxs-lookup"><span data-stu-id="649b7-298">This means that a screen inch isn't the same size as a real-world inch; on most systems, it's probably not.</span></span> <span data-ttu-id="649b7-299">Lorsque vous augmentez le paramètre PPP, les graphiques et le texte reconnaissant la résolution sont plus volumineux car vous avez augmenté la taille du pouce d’écran.</span><span class="sxs-lookup"><span data-stu-id="649b7-299">As you increase the DPI, DPI-aware graphics and text become larger because you've increased the size of the screen inch.</span></span> <span data-ttu-id="649b7-300">L’augmentation du paramètre PPP peut rendre du texte plus facile à lire, notamment à des hautes résolutions.</span><span class="sxs-lookup"><span data-stu-id="649b7-300">Increasing the DPI can make text easier to read, especially at high resolutions.</span></span>  
  
 <span data-ttu-id="649b7-301">Toutes les applications ne reconnaissent pas la résolution : certaines utilisent les pixels matériels comme unité de mesure principale ; la modification du paramètre PPP système n’a aucun effet sur ces applications.</span><span class="sxs-lookup"><span data-stu-id="649b7-301">Not all applications are DPI-aware: some use hardware pixels as the primary unit of measurement; changing the system DPI has no effect on these applications.</span></span> <span data-ttu-id="649b7-302">Beaucoup d’autres applications utilisent des unités reconnaissant la résolution pour décrire les tailles de police, mais utilisent des pixels pour décrire tout le reste.</span><span class="sxs-lookup"><span data-stu-id="649b7-302">Many other applications use DPI-aware units to describe font sizes, but use pixels to describe everything else.</span></span> <span data-ttu-id="649b7-303">La définition du paramètre PPP sur une valeur trop basse ou trop élevée peut entraîner des problèmes de disposition pour ces applications, car le texte des applications évolue avec le paramètre PPP du système, mais pas l’interface utilisateur des applications.</span><span class="sxs-lookup"><span data-stu-id="649b7-303">Making the DPI too small or too large can cause layout problems for these applications, because the applications' text scales with the system's DPI setting, but the applications' UI does not.</span></span> <span data-ttu-id="649b7-304">Ce problème a été résolu pour les applications développées à l’aide de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="649b7-304">This problem has been eliminated for applications developed using [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="649b7-305">prend en charge la mise à l’échelle automatique en utilisant le pixel indépendant du périphérique comme unité de mesure principale au lieu des pixels matériels ; les graphiques et le texte sont correctement mis à l’échelle sans intervention supplémentaire du développeur de l’application.</span><span class="sxs-lookup"><span data-stu-id="649b7-305">supports automatic scaling by using the device independent pixel as its primary unit of measurement, instead of hardware pixels; graphics and text scale properly without any extra work from the application developer.</span></span> <span data-ttu-id="649b7-306">L’illustration suivante montre un exemple d’affichage du texte et des graphiques [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] avec différents paramètres PPP.</span><span class="sxs-lookup"><span data-stu-id="649b7-306">The following illustration shows an example of how [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] text and graphics are appear at different DPI settings.</span></span>  
  
 <span data-ttu-id="649b7-307">![Graphique et texte avec différents paramètres PPP](./media/graphicsmm-dpi-setting-examples.png "graphicsmm_dpi_setting_examples")</span><span class="sxs-lookup"><span data-stu-id="649b7-307">![Graphics and text at different DPI settings](./media/graphicsmm-dpi-setting-examples.png "graphicsmm_dpi_setting_examples")</span></span>  
<span data-ttu-id="649b7-308">Graphique et texte avec différents paramètres PPP</span><span class="sxs-lookup"><span data-stu-id="649b7-308">Graphics and text at different DPI settings</span></span>  
  
<a name="visualtreehelper_class"></a>
## <a name="visualtreehelper-class"></a><span data-ttu-id="649b7-309">Classe VisualTreeHelper</span><span class="sxs-lookup"><span data-stu-id="649b7-309">VisualTreeHelper Class</span></span>  
 <span data-ttu-id="649b7-310">La <xref:System.Windows.Media.VisualTreeHelper> classe est une classe d’aide statique qui fournit des fonctionnalités de bas niveau pour la programmation au niveau de l’objet visuel, ce qui est utile dans des scénarios très spécifiques, tels que le développement de contrôles personnalisés haute performance.</span><span class="sxs-lookup"><span data-stu-id="649b7-310">The <xref:System.Windows.Media.VisualTreeHelper> class is a static helper class that provides low-level functionality for programming at the visual object level, which is useful in very specific scenarios, such as developing high-performance custom controls.</span></span> <span data-ttu-id="649b7-311">Dans la plupart des [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] cas, les <xref:System.Windows.Controls.Canvas> objets-cadres de haut niveau, tels que et, <xref:System.Windows.Controls.TextBlock>offrent une plus grande flexibilité et facilité d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="649b7-311">In most case, the higher-level [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] framework objects, such as <xref:System.Windows.Controls.Canvas> and <xref:System.Windows.Controls.TextBlock>, offer greater flexibility and ease of use.</span></span>  
  
### <a name="hit-testing"></a><span data-ttu-id="649b7-312">Test des résultats</span><span class="sxs-lookup"><span data-stu-id="649b7-312">Hit Testing</span></span>  
 <span data-ttu-id="649b7-313">La <xref:System.Windows.Media.VisualTreeHelper> classe fournit des méthodes pour les tests à succès sur les objets visuels lorsque le support de test par défaut ne répond pas à vos besoins.</span><span class="sxs-lookup"><span data-stu-id="649b7-313">The <xref:System.Windows.Media.VisualTreeHelper> class provides methods for hit testing on visual objects when the default hit test support does not meet your needs.</span></span> <span data-ttu-id="649b7-314">Vous pouvez <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> utiliser les <xref:System.Windows.Media.VisualTreeHelper> méthodes de la classe pour déterminer si une géométrie ou une valeur de coordonnées ponctuelles se trouve à l’intérieur de la limite d’un objet donné, comme un élément de contrôle ou graphique.</span><span class="sxs-lookup"><span data-stu-id="649b7-314">You can use the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> methods in the <xref:System.Windows.Media.VisualTreeHelper> class to determine whether a geometry or point coordinate value is within the boundary of a given object, such as a control or graphic element.</span></span> <span data-ttu-id="649b7-315">Par exemple, vous pouvez utiliser le test des résultats pour déterminer si un clic de souris dans le rectangle englobant d’un objet se trouve dans la géométrie d’un cercle. Vous pouvez également choisir de substituer l’implémentation par défaut du test des résultats pour effectuer vos propres calculs de test des résultats personnalisés.</span><span class="sxs-lookup"><span data-stu-id="649b7-315">For example, you could use hit testing to determine whether a mouse click within the bounding rectangle of an object falls within the geometry of a circle You can also choose to override the default implementation of hit testing to perform your own custom hit test calculations.</span></span>  
  
 <span data-ttu-id="649b7-316">Pour plus d’informations sur le test des résultats, consultez [Test des résultats dans la couche visuelle](hit-testing-in-the-visual-layer.md).</span><span class="sxs-lookup"><span data-stu-id="649b7-316">For more information on hit testing, see [Hit Testing in the Visual Layer](hit-testing-in-the-visual-layer.md).</span></span>  
  
### <a name="enumerating-the-visual-tree"></a><span data-ttu-id="649b7-317">Énumération de l’arborescence d’éléments visuels</span><span class="sxs-lookup"><span data-stu-id="649b7-317">Enumerating the Visual Tree</span></span>  
 <span data-ttu-id="649b7-318">La <xref:System.Windows.Media.VisualTreeHelper> classe offre des fonctionnalités pour énumérer les membres d’un arbre visuel.</span><span class="sxs-lookup"><span data-stu-id="649b7-318">The <xref:System.Windows.Media.VisualTreeHelper> class provides functionality for enumerating the members of a visual tree.</span></span> <span data-ttu-id="649b7-319">Pour récupérer un parent, appelez la <xref:System.Windows.Media.VisualTreeHelper.GetParent%2A> méthode.</span><span class="sxs-lookup"><span data-stu-id="649b7-319">To retrieve a parent, call the <xref:System.Windows.Media.VisualTreeHelper.GetParent%2A> method.</span></span> <span data-ttu-id="649b7-320">Pour récupérer un enfant, ou descendant direct, <xref:System.Windows.Media.VisualTreeHelper.GetChild%2A> d’un objet visuel, appelez la méthode.</span><span class="sxs-lookup"><span data-stu-id="649b7-320">To retrieve a child, or direct descendant, of a visual object, call the <xref:System.Windows.Media.VisualTreeHelper.GetChild%2A> method.</span></span> <span data-ttu-id="649b7-321">Cette méthode renvoie un enfant <xref:System.Windows.Media.Visual> du parent à l’index spécifié.</span><span class="sxs-lookup"><span data-stu-id="649b7-321">This method returns a child <xref:System.Windows.Media.Visual> of the parent at the specified index.</span></span>  
  
 <span data-ttu-id="649b7-322">L’exemple suivant montre comment énumérer tous les descendants d’un objet visuel, qui est une technique utile si vous voulez sérialiser toutes les informations de rendu d’une hiérarchie d’objets visuels.</span><span class="sxs-lookup"><span data-stu-id="649b7-322">The following example shows how to enumerate all the descendants of a visual object, which is a technique you might want to use if you were interested in serializing all the rendering information of a visual object hierarchy.</span></span>  
  
 [!code-csharp[VisualsOverview#101](~/samples/snippets/csharp/VS_Snippets_Wpf/VisualsOverview/CSharp/Window1.xaml.cs#101)]
 [!code-vb[VisualsOverview#101](~/samples/snippets/visualbasic/VS_Snippets_Wpf/VisualsOverview/visualbasic/window1.xaml.vb#101)]  
  
 <span data-ttu-id="649b7-323">Dans la plupart des cas, l’arborescence logique est une représentation plus utile des éléments dans une application [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="649b7-323">In most cases, the logical tree is a more useful representation of the elements in a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application.</span></span> <span data-ttu-id="649b7-324">Même si vous ne modifiez pas directement l’arborescence logique, cette vue de l’application est utile pour comprendre l’héritage de propriété et le routage d’événement.</span><span class="sxs-lookup"><span data-stu-id="649b7-324">Although you do not modify the logical tree directly, this view of the application is useful for understanding property inheritance and event routing.</span></span> <span data-ttu-id="649b7-325">Contrairement à l’arbre visuel, l’arbre logique peut <xref:System.Windows.Documents.ListItem>représenter des objets de données non visuels, tels que .</span><span class="sxs-lookup"><span data-stu-id="649b7-325">Unlike the visual tree, the logical tree can represent non-visual data objects, such as <xref:System.Windows.Documents.ListItem>.</span></span> <span data-ttu-id="649b7-326">Pour plus d’informations sur l’arborescence logique, consultez [Arborescences dans WPF](../advanced/trees-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="649b7-326">For more information on the logical tree, see [Trees in WPF](../advanced/trees-in-wpf.md).</span></span>  
  
 <span data-ttu-id="649b7-327">La <xref:System.Windows.Media.VisualTreeHelper> classe fournit des méthodes pour retourner le rectangle de délimitation des objets visuels.</span><span class="sxs-lookup"><span data-stu-id="649b7-327">The <xref:System.Windows.Media.VisualTreeHelper> class provides methods for returning the bounding rectangle of visual objects.</span></span> <span data-ttu-id="649b7-328">Vous pouvez retourner le rectangle de délimitation d’un objet visuel en appelant <xref:System.Windows.Media.VisualTreeHelper.GetContentBounds%2A>.</span><span class="sxs-lookup"><span data-stu-id="649b7-328">You can return the bounding rectangle of a visual object by calling <xref:System.Windows.Media.VisualTreeHelper.GetContentBounds%2A>.</span></span> <span data-ttu-id="649b7-329">Vous pouvez retourner le rectangle de délimitation de tous les descendants <xref:System.Windows.Media.VisualTreeHelper.GetDescendantBounds%2A>d’un objet visuel, y compris l’objet visuel lui-même, en appelant .</span><span class="sxs-lookup"><span data-stu-id="649b7-329">You can return the bounding rectangle of all the descendants of a visual object, including the visual object itself, by calling <xref:System.Windows.Media.VisualTreeHelper.GetDescendantBounds%2A>.</span></span> <span data-ttu-id="649b7-330">Le code suivant montre comment vous pourriez calculer le rectangle englobant d’un objet visuel et de tous ses descendants.</span><span class="sxs-lookup"><span data-stu-id="649b7-330">The following code shows how you would calculate the bounding rectangle of a visual object and all its descendants.</span></span>  
  
 [!code-csharp[VisualsOverview#102](~/samples/snippets/csharp/VS_Snippets_Wpf/VisualsOverview/CSharp/Window1.xaml.cs#102)]
 [!code-vb[VisualsOverview#102](~/samples/snippets/visualbasic/VS_Snippets_Wpf/VisualsOverview/visualbasic/window1.xaml.vb#102)]  
  
## <a name="see-also"></a><span data-ttu-id="649b7-331">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="649b7-331">See also</span></span>

- <xref:System.Windows.Media.Visual>
- <xref:System.Windows.Media.VisualTreeHelper>
- <xref:System.Windows.Media.DrawingVisual>
- [<span data-ttu-id="649b7-332">Graphisme 2D et acquisition d’images</span><span class="sxs-lookup"><span data-stu-id="649b7-332">2D Graphics and Imaging</span></span>](../advanced/optimizing-performance-2d-graphics-and-imaging.md)
- [<span data-ttu-id="649b7-333">Test de positionnement dans la couche visuelle</span><span class="sxs-lookup"><span data-stu-id="649b7-333">Hit Testing in the Visual Layer</span></span>](hit-testing-in-the-visual-layer.md)
- [<span data-ttu-id="649b7-334">Utilisation d’objets DrawingVisual</span><span class="sxs-lookup"><span data-stu-id="649b7-334">Using DrawingVisual Objects</span></span>](using-drawingvisual-objects.md)
- [<span data-ttu-id="649b7-335">Didacticiel : hébergement d’objets visuels dans une application Win32</span><span class="sxs-lookup"><span data-stu-id="649b7-335">Tutorial: Hosting Visual Objects in a Win32 Application</span></span>](tutorial-hosting-visual-objects-in-a-win32-application.md)
- [<span data-ttu-id="649b7-336">Optimisation des performances des applications WPF</span><span class="sxs-lookup"><span data-stu-id="649b7-336">Optimizing WPF Application Performance</span></span>](../advanced/optimizing-wpf-application-performance.md)
