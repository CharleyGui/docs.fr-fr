---
title: Vue d'ensemble des animations personnalisées
ms.date: 03/30/2017
helpviewer_keywords:
- custom classes [WPF], animation
- key frames [WPF], custom
- custom key frames [WPF]
- animation [WPF], custom classes
- custom animation classes [WPF]
ms.assetid: 9be69d50-3384-4938-886f-08ce00e4a7a6
ms.openlocfilehash: c5f315992e8ae37bc79602e6986d90e7af591fb2
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79186549"
---
# <a name="custom-animations-overview"></a><span data-ttu-id="ca41b-102">Vue d'ensemble des animations personnalisées</span><span class="sxs-lookup"><span data-stu-id="ca41b-102">Custom Animations Overview</span></span>
<span data-ttu-id="ca41b-103">Cette rubrique décrit comment et quand étendre le système d’animation [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] en créant des images clés personnalisées et des classes d’animation, ou à l’aide du rappel image par image pour l’ignorer.</span><span class="sxs-lookup"><span data-stu-id="ca41b-103">This topic describes how and when to extend the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system by creating custom key frames, animation classes, or by using per-frame callback to bypass it.</span></span>  
  
<a name="prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="ca41b-104">Conditions préalables requises</span><span class="sxs-lookup"><span data-stu-id="ca41b-104">Prerequisites</span></span>  
 <span data-ttu-id="ca41b-105">Pour comprendre cette rubrique, vous devez connaître les différents types d’animations offerts par [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ca41b-105">To understand this topic, you should be familiar with the different types of animations provided by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="ca41b-106">Pour plus d’informations, consultez la Vue d’ensemble des animations From/To/By, la [Vue d'ensemble des animations d'image clé](key-frame-animations-overview.md) et la [Vue d'ensemble des animations de tracés](path-animations-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ca41b-106">For more information, see the From/To/By Animations Overview, the [Key-Frame Animations Overview](key-frame-animations-overview.md), and the [Path Animations Overview](path-animations-overview.md).</span></span>  
  
 <span data-ttu-id="ca41b-107">Parce que les classes <xref:System.Windows.Freezable> d’animation héritent de la classe, vous devriez être familier avec <xref:System.Windows.Freezable> les objets et comment hériter de <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="ca41b-107">Because the animation classes inherit from the <xref:System.Windows.Freezable> class, you should be familiar with <xref:System.Windows.Freezable> objects and how to inherit from <xref:System.Windows.Freezable>.</span></span> <span data-ttu-id="ca41b-108">Pour plus d’informations, consultez la [Vue d’ensemble des objets Freezable](../advanced/freezable-objects-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ca41b-108">For more information, see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md).</span></span>  
  
<a name="extendingtheanimationsystem"></a>
## <a name="extending-the-animation-system"></a><span data-ttu-id="ca41b-109">Extension du système d’animation</span><span class="sxs-lookup"><span data-stu-id="ca41b-109">Extending the Animation System</span></span>  
 <span data-ttu-id="ca41b-110">Il existe plusieurs façons d’étendre le système d’animation [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], en fonction du niveau de fonctionnalités intégrées que vous souhaitez utiliser.</span><span class="sxs-lookup"><span data-stu-id="ca41b-110">There are a number of ways to extend the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system, depending on the level of built-in functionality you want to use.</span></span>  <span data-ttu-id="ca41b-111">Il existe trois points d’extensibilité principaux dans le moteur d’animation [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="ca41b-111">There are three primary extensibility points in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine:</span></span>  
  
- <span data-ttu-id="ca41b-112">Créez un objet cadre à clé personnalisé \* \< \*en héritant de l’une <xref:System.Windows.Media.Animation.DoubleKeyFrame>des classes Type>KeyFrame, telles que .</span><span class="sxs-lookup"><span data-stu-id="ca41b-112">Create a custom key frame object by inheriting from one of the *\<Type>* KeyFrame classes, such as <xref:System.Windows.Media.Animation.DoubleKeyFrame>.</span></span> <span data-ttu-id="ca41b-113">Cette approche utilise la plupart des fonctionnalités intégrées dans le moteur d’animation [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ca41b-113">This approach uses most of the built-in functionality of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine.</span></span>  
  
- <span data-ttu-id="ca41b-114">Créez votre propre classe d’animation en héritant de ou de <xref:System.Windows.Media.Animation.AnimationTimeline> l’un \* \< \*des cours Type>AnimationBase.</span><span class="sxs-lookup"><span data-stu-id="ca41b-114">Create your own animation class by inheriting from <xref:System.Windows.Media.Animation.AnimationTimeline> or one of the *\<Type>* AnimationBase classes.</span></span>  
  
- <span data-ttu-id="ca41b-115">Utilisez le rappel image par image pour générer des animations image par image.</span><span class="sxs-lookup"><span data-stu-id="ca41b-115">Use per-frame callback to generate animations on a per-frame basis.</span></span> <span data-ttu-id="ca41b-116">Cette approche ignore entièrement l’animation et le système de minutage.</span><span class="sxs-lookup"><span data-stu-id="ca41b-116">This approach completely bypasses the animation and timing system.</span></span>  
  
 <span data-ttu-id="ca41b-117">Le tableau suivant décrit certains scénarios permettant d’étendre le système d’animation.</span><span class="sxs-lookup"><span data-stu-id="ca41b-117">The following table describes some the scenarios for extending the animation system.</span></span>  
  
|<span data-ttu-id="ca41b-118">Si vous souhaitez...</span><span class="sxs-lookup"><span data-stu-id="ca41b-118">When you want to...</span></span>|<span data-ttu-id="ca41b-119">Utiliser cette approche</span><span class="sxs-lookup"><span data-stu-id="ca41b-119">Use this approach</span></span>|  
|-------------------------|-----------------------|  
|<span data-ttu-id="ca41b-120">Personnaliser l’interpolation entre les valeurs d’un type qui a un \* \<type \*correspondant>AnimationUsingKeyFrames</span><span class="sxs-lookup"><span data-stu-id="ca41b-120">Customize the interpolation between values of a type that has a corresponding *\<Type>* AnimationUsingKeyFrames</span></span>|<span data-ttu-id="ca41b-121">Créez une image clé personnalisée.</span><span class="sxs-lookup"><span data-stu-id="ca41b-121">Create a custom key frame.</span></span> <span data-ttu-id="ca41b-122">Pour plus d’informations, consultez la section [Création d’une image clé personnalisée](#createacustomkeyframe).</span><span class="sxs-lookup"><span data-stu-id="ca41b-122">For more information, see the [Create a Custom Key Frame](#createacustomkeyframe) section.</span></span>|  
|<span data-ttu-id="ca41b-123">Personnalisez plus que l’interpolation entre les valeurs d’un type qui a un \* \<type \*correspondant>Animation.</span><span class="sxs-lookup"><span data-stu-id="ca41b-123">Customize more than just the interpolation between values of a type that has a corresponding *\<Type>* Animation.</span></span>|<span data-ttu-id="ca41b-124">Créez un cours d’animation \* \< \*personnalisé qui hérite de la classe Type>AnimationBase qui correspond au type que vous souhaitez animer.</span><span class="sxs-lookup"><span data-stu-id="ca41b-124">Create a custom animation class that inherits from the *\<Type>* AnimationBase class that corresponds to the type you want to animate.</span></span> <span data-ttu-id="ca41b-125">Pour plus d’informations, consultez la section [Création d’une classe d’animation personnalisée](#createacustomanimationtype).</span><span class="sxs-lookup"><span data-stu-id="ca41b-125">For more information, see the [Create a Custom Animation Class](#createacustomanimationtype) section.</span></span>|  
|<span data-ttu-id="ca41b-126">Animation d’un type qui ne possède aucune animation [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] correspondante</span><span class="sxs-lookup"><span data-stu-id="ca41b-126">Animate a type that has no corresponding [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation</span></span>|<span data-ttu-id="ca41b-127">Utilisez <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> un ou créez une <xref:System.Windows.Media.Animation.AnimationTimeline>classe qui hérite de .</span><span class="sxs-lookup"><span data-stu-id="ca41b-127">Use an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> or create a class that inherits from <xref:System.Windows.Media.Animation.AnimationTimeline>.</span></span> <span data-ttu-id="ca41b-128">Pour plus d’informations, consultez la section [Création d’une classe d’animation personnalisée](#createacustomanimationtype).</span><span class="sxs-lookup"><span data-stu-id="ca41b-128">For more information, see the [Create a Custom Animation Class](#createacustomanimationtype) section.</span></span>|  
|<span data-ttu-id="ca41b-129">Animer plusieurs objets avec des valeurs calculées à chaque frame et basées sur le dernier jeu d’interactions avec les objets</span><span class="sxs-lookup"><span data-stu-id="ca41b-129">Animate multiple objects with values that are computed each frame and are based on the last set of object interactions</span></span>|<span data-ttu-id="ca41b-130">Utilisez un rappel image par image.</span><span class="sxs-lookup"><span data-stu-id="ca41b-130">Use per-frame callback.</span></span> <span data-ttu-id="ca41b-131">Pour plus d’informations, consultez la section [Création d’un rappel image par image](#useperframecallback).</span><span class="sxs-lookup"><span data-stu-id="ca41b-131">For more information, see the [Create a Use Per-Frame Callback](#useperframecallback) section.</span></span>|  
  
<a name="createacustomkeyframe"></a>
## <a name="create-a-custom-key-frame"></a><span data-ttu-id="ca41b-132">Création d’une image clé personnalisée</span><span class="sxs-lookup"><span data-stu-id="ca41b-132">Create a Custom Key Frame</span></span>  
 <span data-ttu-id="ca41b-133">La création d’une classe d’image clé personnalisée est la façon la plus simple d’étendre le système d’animation.</span><span class="sxs-lookup"><span data-stu-id="ca41b-133">Creating a custom key frame class is the simplest way to extend the animation system.</span></span> <span data-ttu-id="ca41b-134">Utilisez cette approche lorsque vous souhaitez une autre méthode d’interpolation pour une animation d’image clé.</span><span class="sxs-lookup"><span data-stu-id="ca41b-134">Use this approach when you want to a different interpolation method for a key-frame animation.</span></span>  <span data-ttu-id="ca41b-135">Comme décrit dans la [Vue d'ensemble des animations d'image clé](key-frame-animations-overview.md), une animation d’image clé utilise des objets d’images clés pour générer ses valeurs de sortie.</span><span class="sxs-lookup"><span data-stu-id="ca41b-135">As described in the [Key-Frame Animations Overview](key-frame-animations-overview.md), a key-frame animation uses key frame objects to generate its output values.</span></span> <span data-ttu-id="ca41b-136">Chaque objet d’image clé remplit trois fonctions :</span><span class="sxs-lookup"><span data-stu-id="ca41b-136">Each key frame object performs three functions:</span></span>  
  
- <span data-ttu-id="ca41b-137">Spécifie une <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> valeur cible à l’aide de sa propriété.</span><span class="sxs-lookup"><span data-stu-id="ca41b-137">Specifies a target value using its <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> property.</span></span>  
  
- <span data-ttu-id="ca41b-138">Précise l’heure à laquelle cette valeur <xref:System.Windows.Media.Animation.IKeyFrame.KeyTime%2A> doit être atteinte à l’aide de sa propriété.</span><span class="sxs-lookup"><span data-stu-id="ca41b-138">Specifies the time at which that value should be reached using its <xref:System.Windows.Media.Animation.IKeyFrame.KeyTime%2A> property.</span></span>  
  
- <span data-ttu-id="ca41b-139">Interpole entre la valeur de l’image clé précédente et sa propre valeur en implémentant la méthode InterpolateValueCore.</span><span class="sxs-lookup"><span data-stu-id="ca41b-139">Interpolates between the value of the previous key frame and its own value by implementing the InterpolateValueCore method.</span></span>  
  
 <span data-ttu-id="ca41b-140">**Instructions d’implémentation**</span><span class="sxs-lookup"><span data-stu-id="ca41b-140">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="ca41b-141">Dérivez \* \< \*de la classe abstraite Type>KeyFrame et implémenter la méthode InterpolateValueCore.</span><span class="sxs-lookup"><span data-stu-id="ca41b-141">Derive from the *\<Type>* KeyFrame abstract class and implement the InterpolateValueCore method.</span></span> <span data-ttu-id="ca41b-142">La méthode InterpolateValueCore retourne la valeur actuelle de l’image clé.</span><span class="sxs-lookup"><span data-stu-id="ca41b-142">The InterpolateValueCore method returns the current value of the key frame.</span></span> <span data-ttu-id="ca41b-143">Elle accepte deux paramètres : la valeur de l’image clé précédente et une valeur de progression comprise entre 0 et 1.</span><span class="sxs-lookup"><span data-stu-id="ca41b-143">It takes two parameters: the value of the previous key frame and a progress value that ranges from 0 to 1.</span></span> <span data-ttu-id="ca41b-144">Un progrès de 0 indique que le cadre clé vient de commencer, et une valeur de 1 indique que le cadre clé vient de terminer et devrait retourner la valeur spécifiée par sa <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> propriété.</span><span class="sxs-lookup"><span data-stu-id="ca41b-144">A progress of 0 indicates the key frame has just started, and a value of 1 indicates that the key frame has just completed and should return the value specified by its <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> property.</span></span>  
  
 <span data-ttu-id="ca41b-145">Étant \* \< \*donné que les classes Type><xref:System.Windows.Freezable> KeyFrame héritent de la classe, vous devez également remplacer <xref:System.Windows.Freezable.CreateInstanceCore%2A> le noyau pour retourner une nouvelle instance de votre classe.</span><span class="sxs-lookup"><span data-stu-id="ca41b-145">Because the *\<Type>* KeyFrame classes inherit from the <xref:System.Windows.Freezable> class, you must also override <xref:System.Windows.Freezable.CreateInstanceCore%2A> core to return a new instance of your class.</span></span> <span data-ttu-id="ca41b-146">Si la classe n’utilise pas de propriétés de dépendance pour stocker ses données ou si elle nécessite une initialisation supplémentaire après la création, vous devrez peut-être substituer d’autres méthodes. Consultez [Vue d'ensemble des objets Freezable](../advanced/freezable-objects-overview.md) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="ca41b-146">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="ca41b-147">Après avoir créé votre animation \* \<Type>\* KeyFrame personnalisée, vous \* \< \*pouvez l’utiliser avec le Type>AnimationUsingKeyFrames pour ce type.</span><span class="sxs-lookup"><span data-stu-id="ca41b-147">After you've created your custom *\<Type>* KeyFrame animation, you can use it with the *\<Type>* AnimationUsingKeyFrames for that type.</span></span>  
  
<a name="createacustomanimationtype"></a>
## <a name="create-a-custom-animation-class"></a><span data-ttu-id="ca41b-148">Création d’une classe d’animation personnalisée</span><span class="sxs-lookup"><span data-stu-id="ca41b-148">Create a Custom Animation Class</span></span>  
 <span data-ttu-id="ca41b-149">La création de votre propre type d’animation vous donne plus de contrôle sur la façon dont objet est animé.</span><span class="sxs-lookup"><span data-stu-id="ca41b-149">Creating your own animation type gives you more control over how an object in animated.</span></span> <span data-ttu-id="ca41b-150">Il existe deux façons recommandées de créer votre <xref:System.Windows.Media.Animation.AnimationTimeline> propre type d’animation : vous pouvez tirer de la classe ou de la \* \< \*classe Type>AnimationBase.</span><span class="sxs-lookup"><span data-stu-id="ca41b-150">There are two recommended ways to create your own animation type: you can derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class or the *\<Type>* AnimationBase class.</span></span> <span data-ttu-id="ca41b-151">Il n’est pas recommandé de déduire des cours \* \<Type>\* Animation ou \* \<Type>\* AnimationUsingKeyFrames.</span><span class="sxs-lookup"><span data-stu-id="ca41b-151">Deriving from the *\<Type>* Animation or *\<Type>* AnimationUsingKeyFrames classes is not recommended.</span></span>  
  
### <a name="derive-from-typeanimationbase"></a><span data-ttu-id="ca41b-152">Dérivation à partir de \<Type > AnimationBase</span><span class="sxs-lookup"><span data-stu-id="ca41b-152">Derive from \<Type>AnimationBase</span></span>  
 <span data-ttu-id="ca41b-153">La sortie d’une \* \< \*classe Type>AnimationBase est le moyen le plus simple de créer un nouveau type d’animation.</span><span class="sxs-lookup"><span data-stu-id="ca41b-153">Deriving from a *\<Type>* AnimationBase class is the simplest way to create a new animation type.</span></span> <span data-ttu-id="ca41b-154">Utilisez cette approche lorsque vous souhaitez créer une nouvelle animation pour le type qui dispose déjà d’une classe \* \<type>\* AnimationBase correspondante.</span><span class="sxs-lookup"><span data-stu-id="ca41b-154">Use this approach when you want to create a new animation for type that already has a corresponding *\<Type>* AnimationBase class.</span></span>  
  
 <span data-ttu-id="ca41b-155">**Instructions d’implémentation**</span><span class="sxs-lookup"><span data-stu-id="ca41b-155">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="ca41b-156">Dérivez \* \< \*d’une classe d’animation Type>et implémentez la méthode GetCurrentValueCore.</span><span class="sxs-lookup"><span data-stu-id="ca41b-156">Derive from a *\<Type>* Animation class and implement the GetCurrentValueCore method.</span></span> <span data-ttu-id="ca41b-157">La méthode GetCurrentValueCore retourne la valeur actuelle de l’animation.</span><span class="sxs-lookup"><span data-stu-id="ca41b-157">The GetCurrentValueCore method returns the current value of the animation.</span></span> <span data-ttu-id="ca41b-158">Il faut trois paramètres: une valeur de départ suggérée, une valeur de fin suggérée, et un <xref:System.Windows.Media.Animation.AnimationClock>, que vous utilisez pour déterminer l’évolution de l’animation.</span><span class="sxs-lookup"><span data-stu-id="ca41b-158">It takes three parameters: a suggested starting value, a suggested ending value, and an <xref:System.Windows.Media.Animation.AnimationClock>, which you use to determine the progress of the animation.</span></span>  
  
 <span data-ttu-id="ca41b-159">Étant \* \< \*donné que les classes Type><xref:System.Windows.Freezable> AnimationBase héritent <xref:System.Windows.Freezable.CreateInstanceCore%2A> de la classe, vous devez également remplacer le noyau pour retourner une nouvelle instance de votre classe.</span><span class="sxs-lookup"><span data-stu-id="ca41b-159">Because the *\<Type>* AnimationBase classes inherit from the <xref:System.Windows.Freezable> class, you must also override <xref:System.Windows.Freezable.CreateInstanceCore%2A> core to return a new instance of your class.</span></span> <span data-ttu-id="ca41b-160">Si la classe n’utilise pas de propriétés de dépendance pour stocker ses données ou si elle nécessite une initialisation supplémentaire après la création, vous devrez peut-être substituer d’autres méthodes. Consultez [Vue d'ensemble des objets Freezable](../advanced/freezable-objects-overview.md) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="ca41b-160">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="ca41b-161">Pour plus d’informations, consultez la documentation de \* \< \*la méthode GetCurrentValueCore pour la classe Type>AnimationBase pour le type que vous souhaitez animer.</span><span class="sxs-lookup"><span data-stu-id="ca41b-161">For more information, see the GetCurrentValueCore method documentation for the *\<Type>* AnimationBase class for the type that you want to animate.</span></span> <span data-ttu-id="ca41b-162">Pour obtenir un exemple, consultez [Exemple d’animation personnalisée](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)</span><span class="sxs-lookup"><span data-stu-id="ca41b-162">For an example, see the [Custom Animation Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)</span></span>  
  
 <span data-ttu-id="ca41b-163">**Approches alternatives**</span><span class="sxs-lookup"><span data-stu-id="ca41b-163">**Alternative Approaches**</span></span>  
  
 <span data-ttu-id="ca41b-164">Si vous voulez simplement changer la façon dont les valeurs d’animation sont interpolées, envisagez de provenmer de l’une \* \< \*des classes Type>KeyFrame.</span><span class="sxs-lookup"><span data-stu-id="ca41b-164">If you simply want to change how animation values are interpolated, considering deriving from one of the *\<Type>* KeyFrame classes.</span></span> <span data-ttu-id="ca41b-165">Le cadre clé que vous créez peut être utilisé avec le \* \<type \* [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]correspondant>AnimationUsingKeyFrames fourni par .</span><span class="sxs-lookup"><span data-stu-id="ca41b-165">The key frame you create can be used with the corresponding *\<Type>* AnimationUsingKeyFrames provided by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
### <a name="derive-from-animationtimeline"></a><span data-ttu-id="ca41b-166">Dérivation à partir de AnimationTimeline</span><span class="sxs-lookup"><span data-stu-id="ca41b-166">Derive from AnimationTimeline</span></span>  
 <span data-ttu-id="ca41b-167">Dérivez <xref:System.Windows.Media.Animation.AnimationTimeline> de la classe lorsque vous voulez créer une animation pour [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] un type qui n’a pas déjà une animation correspondant, ou vous voulez créer une animation qui n’est pas fortement tapé.</span><span class="sxs-lookup"><span data-stu-id="ca41b-167">Derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class when you want to create an animation for a type that doesn't already have a matching [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation, or you want to create an animation that is not strongly typed.</span></span>  
  
 <span data-ttu-id="ca41b-168">**Instructions d’implémentation**</span><span class="sxs-lookup"><span data-stu-id="ca41b-168">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="ca41b-169">Dérivez <xref:System.Windows.Media.Animation.AnimationTimeline> de la classe et remplacez les membres suivants :</span><span class="sxs-lookup"><span data-stu-id="ca41b-169">Derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class and override the following members:</span></span>  
  
- <span data-ttu-id="ca41b-170"><xref:System.Windows.Freezable.CreateInstanceCore%2A>Si votre nouvelle classe est concrète, <xref:System.Windows.Freezable.CreateInstanceCore%2A> vous devez passer outre pour retourner une nouvelle instance de votre classe.</span><span class="sxs-lookup"><span data-stu-id="ca41b-170"><xref:System.Windows.Freezable.CreateInstanceCore%2A> – If your new class is concrete, you must override <xref:System.Windows.Freezable.CreateInstanceCore%2A> to return a new instance of your class.</span></span>  
  
- <span data-ttu-id="ca41b-171"><xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A>Remplacer cette méthode pour retourner la valeur actuelle de votre animation.</span><span class="sxs-lookup"><span data-stu-id="ca41b-171"><xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> – Override this method to return the current value of your animation.</span></span> <span data-ttu-id="ca41b-172">Il faut trois paramètres : une valeur d’origine <xref:System.Windows.Media.Animation.AnimationClock>par défaut, une valeur de destination par défaut et une .</span><span class="sxs-lookup"><span data-stu-id="ca41b-172">It takes three parameters: a default origin value, a default destination value, and an <xref:System.Windows.Media.Animation.AnimationClock>.</span></span> <span data-ttu-id="ca41b-173">Utilisez <xref:System.Windows.Media.Animation.AnimationClock> le pour obtenir l’heure actuelle ou les progrès pour l’animation.</span><span class="sxs-lookup"><span data-stu-id="ca41b-173">Use the <xref:System.Windows.Media.Animation.AnimationClock> to obtain the current time or progress for the animation.</span></span> <span data-ttu-id="ca41b-174">Vous pouvez choisir d’utiliser les valeurs d’origine et de destination par défaut.</span><span class="sxs-lookup"><span data-stu-id="ca41b-174">You can choose whether to use the default origin and destination values.</span></span>  
  
- <span data-ttu-id="ca41b-175"><xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A>- Remplacer cette propriété pour indiquer si votre animation <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> utilise la valeur de destination par défaut spécifiée par la méthode.</span><span class="sxs-lookup"><span data-stu-id="ca41b-175"><xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> – Override this property to indicate whether your animation uses the default destination value specified by the <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> method.</span></span>  
  
- <span data-ttu-id="ca41b-176"><xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A>- Remplacer cette propriété <xref:System.Type> pour indiquer la sortie de votre animation produit.</span><span class="sxs-lookup"><span data-stu-id="ca41b-176"><xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> – Override this property to indicate the <xref:System.Type> of output your animation produces.</span></span>  
  
 <span data-ttu-id="ca41b-177">Si la classe n’utilise pas de propriétés de dépendance pour stocker ses données ou si elle nécessite une initialisation supplémentaire après la création, vous devrez peut-être substituer d’autres méthodes. Consultez [Vue d'ensemble des objets Freezable](../advanced/freezable-objects-overview.md) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="ca41b-177">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="ca41b-178">Le paradigme recommandé (utilisé par les animations [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]) consiste à utiliser deux niveaux d’héritage :</span><span class="sxs-lookup"><span data-stu-id="ca41b-178">The recommended paradigm (used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animations) is to use two inheritance levels:</span></span>  
  
1. <span data-ttu-id="ca41b-179">Créez une classe \* \<abstraite Type>\* AnimationBase <xref:System.Windows.Media.Animation.AnimationTimeline>qui dérive de .</span><span class="sxs-lookup"><span data-stu-id="ca41b-179">Create an abstract *\<Type>* AnimationBase class that derives from <xref:System.Windows.Media.Animation.AnimationTimeline>.</span></span> <span data-ttu-id="ca41b-180">Cette classe devrait <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> passer outre à la méthode.</span><span class="sxs-lookup"><span data-stu-id="ca41b-180">This class should override the <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> method.</span></span> <span data-ttu-id="ca41b-181">Il devrait également introduire une nouvelle méthode abstraite, GetCurrentValueCore, et passer outre <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> afin qu’il valide les types de la valeur d’origine par défaut et les paramètres de valeur de destination par défaut, puis appelle GetCurrentValueCore.</span><span class="sxs-lookup"><span data-stu-id="ca41b-181">It should also introduce a new abstract method, GetCurrentValueCore, and override <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> so that it validates the types of the default origin value and default destination value parameters, then calls GetCurrentValueCore.</span></span>  
  
2. <span data-ttu-id="ca41b-182">Créez une autre classe qui \* \< \*hérite de votre nouveau type><xref:System.Windows.Freezable.CreateInstanceCore%2A> classe AnimationBase et remplace la méthode, la <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> méthode GetCurrentValueCore que vous avez introduite et la propriété.</span><span class="sxs-lookup"><span data-stu-id="ca41b-182">Create another class that inherits from your new *\<Type>* AnimationBase class and overrides the <xref:System.Windows.Freezable.CreateInstanceCore%2A> method, the GetCurrentValueCore method that you introduced, and the <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> property.</span></span>  
  
 <span data-ttu-id="ca41b-183">**Approches alternatives**</span><span class="sxs-lookup"><span data-stu-id="ca41b-183">**Alternative Approaches**</span></span>  
  
 <span data-ttu-id="ca41b-184">Si vous souhaitez animer un type qui n’a pas d’animation ou d’animation à cadre clé correspondant, envisagez d’utiliser un <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames>.</span><span class="sxs-lookup"><span data-stu-id="ca41b-184">If you want to animate a type that has no corresponding From/To/By animation or key-frame animation, consider using an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames>.</span></span> <span data-ttu-id="ca41b-185">Parce qu’il est faiblement dactylographié, un <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> peut animer n’importe quel type de valeur.</span><span class="sxs-lookup"><span data-stu-id="ca41b-185">Because it is weakly typed, an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> can animate any type of value.</span></span> <span data-ttu-id="ca41b-186">L’inconvénient de cette <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> approche est que ne prend en charge que l’interpolation discrète.</span><span class="sxs-lookup"><span data-stu-id="ca41b-186">The drawback to this approach is that <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> only supports discrete interpolation.</span></span>  
  
<a name="useperframecallback"></a>
## <a name="use-per-frame-callback"></a><span data-ttu-id="ca41b-187">Rappel image par image</span><span class="sxs-lookup"><span data-stu-id="ca41b-187">Use Per-Frame Callback</span></span>  
 <span data-ttu-id="ca41b-188">Utilisez cette approche lorsque vous devez ignorer entièrement le système d’animation [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ca41b-188">Use this approach when you need to completely bypass the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system.</span></span> <span data-ttu-id="ca41b-189">Un scénario pour cette approche est l’animation physique, où pour chaque étape animation une nouvelle direction ou position doit être recalculée pour les objets animés en fonction du dernier jeu d’interactions avec les objets.</span><span class="sxs-lookup"><span data-stu-id="ca41b-189">One scenario for this approach is physics animations, where at each animation step a new direction or position of animated objects needs to be recomputed based on the  last set of object interactions.</span></span>  
  
 <span data-ttu-id="ca41b-190">**Instructions d’implémentation**</span><span class="sxs-lookup"><span data-stu-id="ca41b-190">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="ca41b-191">Contrairement aux autres approches décrites dans cette vue d’ensemble, le rappel image par image ne nécessite pas de créer une animation personnalisée ou une classe d’image clé.</span><span class="sxs-lookup"><span data-stu-id="ca41b-191">Unlike the other approaches described in this overview, to use per-frame callback you don't need to create a custom animation or key frame class.</span></span>  
  
 <span data-ttu-id="ca41b-192">Au lieu de <xref:System.Windows.Media.CompositionTarget.Rendering> cela, vous vous inscrivez pour l’événement de l’objet qui contient les objets que vous souhaitez animer.</span><span class="sxs-lookup"><span data-stu-id="ca41b-192">Instead, you register for the <xref:System.Windows.Media.CompositionTarget.Rendering> event of the object that contains the objects you want to animate.</span></span> <span data-ttu-id="ca41b-193">Cette méthode de gestionnaire d’événements est appelée une fois par frame.</span><span class="sxs-lookup"><span data-stu-id="ca41b-193">This event handler method gets called once per frame.</span></span> <span data-ttu-id="ca41b-194">Chaque fois que [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] marshale les données de rendu persistantes dans l’arborescence visuelle sur l’arborescence de composition, votre méthode de gestionnaire d’événements est appelée.</span><span class="sxs-lookup"><span data-stu-id="ca41b-194">Each time that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] marshals the persisted rendering data in the visual tree across to the composition tree, your event handler method is called.</span></span>  
  
 <span data-ttu-id="ca41b-195">Dans votre gestionnaire d’événements, effectuez les calculs nécessaires pour votre effet d’animation et définissez les propriétés des objets à animer avec ces valeurs.</span><span class="sxs-lookup"><span data-stu-id="ca41b-195">In your event handler, perform your whatever calculations necessary for your animation effect and set the properties of the objects you want to animate with these values.</span></span>  
  
 <span data-ttu-id="ca41b-196">Pour obtenir le temps de présentation <xref:System.EventArgs> du cadre actuel, <xref:System.Windows.Media.RenderingEventArgs>l’associé <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> à cet événement peut être moulé comme , qui fournissent une propriété que vous pouvez utiliser pour obtenir le temps de rendu du cadre actuel.</span><span class="sxs-lookup"><span data-stu-id="ca41b-196">To obtain the presentation time of the current frame, the <xref:System.EventArgs> associated with this event can be cast as <xref:System.Windows.Media.RenderingEventArgs>, which provide a <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> property that you can use to obtain the current frame's rendering time.</span></span>  
  
 <span data-ttu-id="ca41b-197">Pour plus d’informations, consultez la <xref:System.Windows.Media.CompositionTarget.Rendering> page.</span><span class="sxs-lookup"><span data-stu-id="ca41b-197">For more information, see the <xref:System.Windows.Media.CompositionTarget.Rendering> page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ca41b-198">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ca41b-198">See also</span></span>

- <xref:System.Windows.Media.Animation.AnimationTimeline>
- <xref:System.Windows.Media.Animation.IKeyFrame>
- [<span data-ttu-id="ca41b-199">Vue d'ensemble des techniques d'animation de propriétés</span><span class="sxs-lookup"><span data-stu-id="ca41b-199">Property Animation Techniques Overview</span></span>](property-animation-techniques-overview.md)
- [<span data-ttu-id="ca41b-200">Vue d’ensemble des objets Freezable</span><span class="sxs-lookup"><span data-stu-id="ca41b-200">Freezable Objects Overview</span></span>](../advanced/freezable-objects-overview.md)
- [<span data-ttu-id="ca41b-201">Vue d'ensemble des animations d'image clé</span><span class="sxs-lookup"><span data-stu-id="ca41b-201">Key-Frame Animations Overview</span></span>](key-frame-animations-overview.md)
- [<span data-ttu-id="ca41b-202">Vue d'ensemble des animations de tracés</span><span class="sxs-lookup"><span data-stu-id="ca41b-202">Path Animations Overview</span></span>](path-animations-overview.md)
- [<span data-ttu-id="ca41b-203">Vue d’ensemble de l’animation</span><span class="sxs-lookup"><span data-stu-id="ca41b-203">Animation Overview</span></span>](animation-overview.md)
- [<span data-ttu-id="ca41b-204">Vue d’ensemble de l'animation et du système de minutage</span><span class="sxs-lookup"><span data-stu-id="ca41b-204">Animation and Timing System Overview</span></span>](animation-and-timing-system-overview.md)
- [<span data-ttu-id="ca41b-205">Exemple d’animation personnalisée</span><span class="sxs-lookup"><span data-stu-id="ca41b-205">Custom Animation Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)
