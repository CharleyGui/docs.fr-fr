---
title: Compiler une application
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WPF application [WPF], building
ms.assetid: a58696fd-bdad-4b55-9759-136dfdf8b91c
ms.openlocfilehash: 00c76dfcdcedc7ceaefaaae785368f8b343457a7
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/24/2020
ms.locfileid: "76744766"
---
# <a name="compile-a-wpf-application"></a><span data-ttu-id="a1f31-102">Compiler une application WPF</span><span class="sxs-lookup"><span data-stu-id="a1f31-102">Compile a WPF Application</span></span>

<span data-ttu-id="a1f31-103">Les applications Windows Presentation Foundation (WPF) peuvent être générées comme des fichiers exécutables .NET Framework (. exe), des bibliothèques (. dll) ou une combinaison des deux types d’assemblys.</span><span class="sxs-lookup"><span data-stu-id="a1f31-103">Windows Presentation Foundation (WPF) applications can be built as .NET Framework executables (.exe), libraries (.dll), or a combination of both types of assemblies.</span></span> <span data-ttu-id="a1f31-104">Cette rubrique explique comment générer des applications WPF et décrit les étapes clés du processus de génération.</span><span class="sxs-lookup"><span data-stu-id="a1f31-104">This topic introduces how to build WPF applications and describes the key steps in the build process.</span></span>

<a name="Building_a_WPF_Application_using_Command_Line"></a>

## <a name="building-a-wpf-application"></a><span data-ttu-id="a1f31-105">Génération d'une application WPF</span><span class="sxs-lookup"><span data-stu-id="a1f31-105">Building a WPF Application</span></span>

<span data-ttu-id="a1f31-106">Une application WPF peut être compilée des façons suivantes :</span><span class="sxs-lookup"><span data-stu-id="a1f31-106">A WPF application can be compiled in the following ways:</span></span>

- <span data-ttu-id="a1f31-107">Ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="a1f31-107">Command-line.</span></span> <span data-ttu-id="a1f31-108">L’application doit contenir uniquement du code (aucun XAML) et un fichier de définition d’application.</span><span class="sxs-lookup"><span data-stu-id="a1f31-108">The application must contain only code (no XAML) and an application definition file.</span></span> <span data-ttu-id="a1f31-109">Pour plus d’informations, consultez [Génération à partir de la ligne de commande avec csc.exe](../../../csharp/language-reference/compiler-options/command-line-building-with-csc-exe.md) ou [Génération à partir de la ligne de commande (Visual Basic)](../../../visual-basic/reference/command-line-compiler/building-from-the-command-line.md).</span><span class="sxs-lookup"><span data-stu-id="a1f31-109">For more information, see [Command-line Building With csc.exe](../../../csharp/language-reference/compiler-options/command-line-building-with-csc-exe.md) or [Building from the Command Line (Visual Basic)](../../../visual-basic/reference/command-line-compiler/building-from-the-command-line.md).</span></span>

- <span data-ttu-id="a1f31-110">Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="a1f31-110">Microsoft Build Engine (MSBuild).</span></span> <span data-ttu-id="a1f31-111">Outre le code et les fichiers XAML, l’application doit contenir un fichier projet MSBuild.</span><span class="sxs-lookup"><span data-stu-id="a1f31-111">In addition to the code and XAML files, the application must contain an MSBuild project file.</span></span> <span data-ttu-id="a1f31-112">Pour plus d’informations, consultez « MSBuild ».</span><span class="sxs-lookup"><span data-stu-id="a1f31-112">For more information, see "MSBuild".</span></span>

- <span data-ttu-id="a1f31-113">Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a1f31-113">Visual Studio.</span></span> <span data-ttu-id="a1f31-114">Visual Studio est un environnement de développement intégré qui compile les applications WPF à l’aide de MSBuild et comprend un concepteur visuel pour créer l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="a1f31-114">Visual Studio is an integrated development environment that compiles WPF applications with MSBuild and includes a visual designer for creating UI.</span></span> <span data-ttu-id="a1f31-115">Pour plus d’informations, consultez [écrire et gérer du code à l’aide de Visual Studio](/visualstudio/ide/index-writing-code) et [concevoir du code XAML dans Visual Studio](/visualstudio/xaml-tools/designing-xaml-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="a1f31-115">For more information, see [Write and manage code using Visual Studio](/visualstudio/ide/index-writing-code) and [Design XAML in Visual Studio](/visualstudio/xaml-tools/designing-xaml-in-visual-studio).</span></span>

<a name="The_Windows_Presentation_Foundation_Build_Pipeline"></a>

## <a name="wpf-build-pipeline"></a><span data-ttu-id="a1f31-116">Pipeline de génération WPF</span><span class="sxs-lookup"><span data-stu-id="a1f31-116">WPF Build Pipeline</span></span>

<span data-ttu-id="a1f31-117">Lors de la génération d’un projet WPF, la combinaison de cibles spécifiques au langage et spécifiques à WPF est appelée.</span><span class="sxs-lookup"><span data-stu-id="a1f31-117">When a WPF project is built, the combination of language-specific and WPF-specific targets are invoked.</span></span> <span data-ttu-id="a1f31-118">Le processus d’exécution de ces cibles est appelé le pipeline de génération, et les principales étapes sont illustrées par la figure suivante.</span><span class="sxs-lookup"><span data-stu-id="a1f31-118">The process of executing these targets is called the build pipeline, and the key steps are illustrated by the following figure.</span></span>

<span data-ttu-id="a1f31-119">![Processus de génération WPF](./media/wpfbuildsystem-figure1.png "WPFBuildSystem_Figure1")</span><span class="sxs-lookup"><span data-stu-id="a1f31-119">![WPF build process](./media/wpfbuildsystem-figure1.png "WPFBuildSystem_Figure1")</span></span>

<a name="Pre_Build_Initializations"></a>

### <a name="pre-build-initializations"></a><span data-ttu-id="a1f31-120">Initialisations avant génération</span><span class="sxs-lookup"><span data-stu-id="a1f31-120">Pre-Build Initializations</span></span>

<span data-ttu-id="a1f31-121">Avant de générer, MSBuild détermine l’emplacement des outils et bibliothèques importants, y compris les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="a1f31-121">Before building, MSBuild determines the location of important tools and libraries, including the following:</span></span>

- <span data-ttu-id="a1f31-122">.NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a1f31-122">The .NET Framework.</span></span>

- <span data-ttu-id="a1f31-123">Répertoires de SDK Windows.</span><span class="sxs-lookup"><span data-stu-id="a1f31-123">The Windows SDK directories.</span></span>

- <span data-ttu-id="a1f31-124">Emplacement des assemblys de référence WPF.</span><span class="sxs-lookup"><span data-stu-id="a1f31-124">The location of WPF reference assemblies.</span></span>

- <span data-ttu-id="a1f31-125">Propriété pour les chemins de recherche des assemblys.</span><span class="sxs-lookup"><span data-stu-id="a1f31-125">The property for the assembly search paths.</span></span>

<span data-ttu-id="a1f31-126">Le premier emplacement où MSBuild recherche les assemblys est le répertoire de l’assembly de référence (%ProgramFiles%\Reference Assemblies\Microsoft\Framework\v3.0\\).</span><span class="sxs-lookup"><span data-stu-id="a1f31-126">The first location where MSBuild searches for assemblies is the reference assembly directory (%ProgramFiles%\Reference Assemblies\Microsoft\Framework\v3.0\\).</span></span> <span data-ttu-id="a1f31-127">Pendant cette étape, le processus de génération initialise également les diverses propriétés et groupes d’éléments, et exécute tout travail de nettoyage nécessaire.</span><span class="sxs-lookup"><span data-stu-id="a1f31-127">During this step, the build process also initializes the various properties and item groups and performs any required cleanup work.</span></span>

<a name="Resolving_references"></a>

### <a name="resolving-references"></a><span data-ttu-id="a1f31-128">Résolution des références</span><span class="sxs-lookup"><span data-stu-id="a1f31-128">Resolving References</span></span>

<span data-ttu-id="a1f31-129">Le processus de génération localise et lie les assemblys requis pour générer le projet d’application.</span><span class="sxs-lookup"><span data-stu-id="a1f31-129">The build process locates and binds the assemblies required to build the application project.</span></span> <span data-ttu-id="a1f31-130">Cette logique est contenue dans la tâche `ResolveAssemblyReference`.</span><span class="sxs-lookup"><span data-stu-id="a1f31-130">This logic is contained in the `ResolveAssemblyReference` task.</span></span> <span data-ttu-id="a1f31-131">Tous les assemblys déclarés comme `Reference` dans le fichier projet sont fournis à la tâche, ainsi que des informations sur les chemins de recherche et les métadonnées sur les assemblys déjà installés sur le système.</span><span class="sxs-lookup"><span data-stu-id="a1f31-131">All assemblies declared as `Reference` in the project file are provided to the task along with information on the search paths and metadata on assemblies already installed on the system.</span></span> <span data-ttu-id="a1f31-132">La tâche recherche des assemblys et utilise les métadonnées de l’assembly installé pour filtrer les assemblys WPF de base qui n’ont pas besoin de s’afficher dans les manifestes de sortie.</span><span class="sxs-lookup"><span data-stu-id="a1f31-132">The task looks up assemblies and uses the installed assembly's metadata to filter out those core WPF assemblies that need not show up in the output manifests.</span></span> <span data-ttu-id="a1f31-133">Cela vise à éviter des informations redondantes dans les manifestes ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="a1f31-133">This is done to avoid redundant information in the ClickOnce manifests.</span></span> <span data-ttu-id="a1f31-134">Par exemple, étant donné que PresentationFramework. dll peut être considéré comme représentatif d’une application basée sur et pour WPF, et puisque tous les assemblys WPF existent au même emplacement sur chaque ordinateur sur lequel le .NET Framework est installé, il n’est pas nécessaire d’inclure tous les informations sur tous les .NET Framework assemblys de référence dans les manifestes.</span><span class="sxs-lookup"><span data-stu-id="a1f31-134">For example, since PresentationFramework.dll can be considered representative of an application built on and for WPF, and since all WPF assemblies exist at the same location on every machine that has the .NET Framework installed, there's no need to include all information on all .NET Framework reference assemblies in the manifests.</span></span>

<a name="Markup_Compilation___Pass_1"></a>

### <a name="markup-compilationpass-1"></a><span data-ttu-id="a1f31-135">Compilation du balisage — Étape 1</span><span class="sxs-lookup"><span data-stu-id="a1f31-135">Markup Compilation—Pass 1</span></span>

<span data-ttu-id="a1f31-136">Dans cette étape, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] fichiers sont analysés et compilés afin que le runtime ne perde pas de temps à analyser le code XML et à valider les valeurs des propriétés.</span><span class="sxs-lookup"><span data-stu-id="a1f31-136">In this step, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files are parsed and compiled so that the runtime does not spend time parsing XML and validating property values.</span></span> <span data-ttu-id="a1f31-137">Le fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] compilé est tokenisé au préalable de sorte que, lors de l’exécution, son chargement doit être beaucoup plus rapide que le chargement d’un fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a1f31-137">The compiled [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file is pre-tokenized so that, at run time, loading it should be much faster than loading a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span>

<span data-ttu-id="a1f31-138">Pendant cette étape, les activités suivantes ont lieu pour chaque fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] qui est un élément de génération `Page` :</span><span class="sxs-lookup"><span data-stu-id="a1f31-138">During this step, the following activities take place for every [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file that is a `Page` build item:</span></span>

1. <span data-ttu-id="a1f31-139">Le fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] est analysé par le compilateur de balisage.</span><span class="sxs-lookup"><span data-stu-id="a1f31-139">The [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file is parsed by the markup compiler.</span></span>

2. <span data-ttu-id="a1f31-140">Une représentation compilée est créée pour ce fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] et copiée dans le dossier obj\Release.</span><span class="sxs-lookup"><span data-stu-id="a1f31-140">A compiled representation is created for that [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and copied to the obj\Release folder.</span></span>

3. <span data-ttu-id="a1f31-141">Une représentation CodeDOM d’une nouvelle classe partielle est créée et copiée dans le dossier obj\Release.</span><span class="sxs-lookup"><span data-stu-id="a1f31-141">A CodeDOM representation of a new partial class is created and copied to the obj\Release folder.</span></span>

<span data-ttu-id="a1f31-142">En outre, un fichier de code spécifique au langage est généré pour chaque fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a1f31-142">In addition, a language-specific code file is generated for every [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span> <span data-ttu-id="a1f31-143">Par exemple, pour une page Page1. xaml dans un projet Visual Basic, un Page1. g. vb est généré ; pour une page Page1. xaml dans un C# projet, un Page1.g.cs est généré.</span><span class="sxs-lookup"><span data-stu-id="a1f31-143">For example, for a Page1.xaml page in a Visual Basic project, a Page1.g.vb is generated; for a Page1.xaml page in a C# project, a Page1.g.cs is generated.</span></span> <span data-ttu-id="a1f31-144">Le « .g » dans le nom de fichier indique que le fichier est du code généré qui a une déclaration de classe partielle pour l’élément de niveau supérieur du fichier de balisage (tel que `Page` ou `Window`).</span><span class="sxs-lookup"><span data-stu-id="a1f31-144">The ".g" in the file name indicates the file is generated code that has a partial class declaration for the top-level element of the markup file (such as `Page` or `Window`).</span></span> <span data-ttu-id="a1f31-145">La classe est déclarée avec le modificateur `partial` C# dans (`Extends` dans Visual Basic) pour indiquer qu’il existe une autre déclaration pour la classe ailleurs, généralement dans le fichier code-behind Page1.Xaml.cs.</span><span class="sxs-lookup"><span data-stu-id="a1f31-145">The class is declared with the `partial` modifier in C# (`Extends` in Visual Basic) to indicate there is another declaration for the class elsewhere, usually in the code-behind file Page1.xaml.cs.</span></span>

<span data-ttu-id="a1f31-146">La classe partielle s’étend de la classe de base appropriée (par exemple <xref:System.Windows.Controls.Page> pour une page) et implémente l’interface <xref:System.Windows.Markup.IComponentConnector?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a1f31-146">The partial class extends from the appropriate base class (such as <xref:System.Windows.Controls.Page> for a page) and implements the <xref:System.Windows.Markup.IComponentConnector?displayProperty=nameWithType> interface.</span></span> <span data-ttu-id="a1f31-147">L’interface <xref:System.Windows.Markup.IComponentConnector> possède des méthodes pour initialiser un composant et connecter des noms et des événements sur des éléments dans son contenu.</span><span class="sxs-lookup"><span data-stu-id="a1f31-147">The <xref:System.Windows.Markup.IComponentConnector> interface has methods to initialize a component and connect names and events on elements in its content.</span></span> <span data-ttu-id="a1f31-148">Par conséquent, le fichier de code généré a une implémentation de méthode similaire à la suivante :</span><span class="sxs-lookup"><span data-stu-id="a1f31-148">Consequently, the generated code file has a method implementation like the following:</span></span>

```csharp
public void InitializeComponent() {
    if (_contentLoaded) {
        return;
    }
    _contentLoaded = true;
    System.Uri resourceLocater =
        new System.Uri(
            "window1.xaml",
            System.UriKind.RelativeOrAbsolute);
    System.Windows.Application.LoadComponent(this, resourceLocater);
}
```

```vb
Public Sub InitializeComponent() _

    If _contentLoaded Then
        Return
    End If

    _contentLoaded = True
    Dim resourceLocater As System.Uri = _
        New System.Uri("mainwindow.xaml", System.UriKind.Relative)

    System.Windows.Application.LoadComponent(Me, resourceLocater)

End Sub
```

<span data-ttu-id="a1f31-149">Par défaut, la compilation du balisage s’exécute dans le même <xref:System.AppDomain> que le moteur MSBuild.</span><span class="sxs-lookup"><span data-stu-id="a1f31-149">By default, markup compilation runs in the same <xref:System.AppDomain> as the MSBuild engine.</span></span> <span data-ttu-id="a1f31-150">Cela assure des gains de performances significatifs.</span><span class="sxs-lookup"><span data-stu-id="a1f31-150">This provides significant performance gains.</span></span> <span data-ttu-id="a1f31-151">Ce comportement peut être basculé avec la propriété `AlwaysCompileMarkupFilesInSeparateDomain`.</span><span class="sxs-lookup"><span data-stu-id="a1f31-151">This behavior can be toggled with the `AlwaysCompileMarkupFilesInSeparateDomain` property.</span></span> <span data-ttu-id="a1f31-152">Cela présente l’avantage de décharger tous les assemblys de référence en déchargeant le <xref:System.AppDomain>séparé.</span><span class="sxs-lookup"><span data-stu-id="a1f31-152">This has the advantage of unloading all reference assemblies by unloading the separate <xref:System.AppDomain>.</span></span>

<a name="Pass_2_of_Markup_Compilation"></a>

### <a name="markup-compilationpass-2"></a><span data-ttu-id="a1f31-153">Compilation du balisage — Étape 2</span><span class="sxs-lookup"><span data-stu-id="a1f31-153">Markup Compilation—Pass 2</span></span>

<span data-ttu-id="a1f31-154">Les pages [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ne sont pas toutes compilées pendant la première étape de compilation du balisage.</span><span class="sxs-lookup"><span data-stu-id="a1f31-154">Not all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages are compiled at during pass 1 of markup compilation.</span></span> <span data-ttu-id="a1f31-155">Les fichiers [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] qui ont des références à des types définis localement (références à des types définis dans le code ailleurs dans le même projet) sont exemptés de compilation pour le moment.</span><span class="sxs-lookup"><span data-stu-id="a1f31-155">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files that have locally defined type references (references to types defined in code elsewhere in the same project) are exempt from compilation at this time.</span></span> <span data-ttu-id="a1f31-156">En effet, ces types définis localement existent uniquement dans la source et n’ont pas encore été compilés.</span><span class="sxs-lookup"><span data-stu-id="a1f31-156">This is because those locally defined types exist only in source and have not yet been compiled.</span></span> <span data-ttu-id="a1f31-157">Pour déterminer ceci, l’analyseur utilise des heuristiques qui impliquent la recherche d’éléments tels que `x:Name` dans le fichier de balisage.</span><span class="sxs-lookup"><span data-stu-id="a1f31-157">In order to determine this, the parser uses heuristics that involve looking for items such as `x:Name` in the markup file.</span></span> <span data-ttu-id="a1f31-158">Quand une telle instance est trouvée, la compilation de ce fichier de balisage est remise à plus tard jusqu’à ce que les fichiers de code aient été compilés, après quoi la deuxième étape de la compilation du balisage traite ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="a1f31-158">When such an instance is found, that markup file’s compilation is postponed until the code files have been compiled, after which, the second markup compilation pass processes these files.</span></span>

<a name="File_Classification"></a>

### <a name="file-classification"></a><span data-ttu-id="a1f31-159">Classification des fichiers</span><span class="sxs-lookup"><span data-stu-id="a1f31-159">File Classification</span></span>

<span data-ttu-id="a1f31-160">Le processus de génération organise les fichiers de sortie dans différents groupes de ressources en fonction de l’assembly d’application dans lequel ils seront placés.</span><span class="sxs-lookup"><span data-stu-id="a1f31-160">The build process puts output files into different resource groups based on which application assembly they will be placed in.</span></span> <span data-ttu-id="a1f31-161">Dans une application non localisée type, tous les fichiers de données marqués comme `Resource` sont placés dans l’assembly principal (fichier exécutable ou bibliothèque).</span><span class="sxs-lookup"><span data-stu-id="a1f31-161">In a typical nonlocalized application, all data files marked as `Resource` are placed in the main assembly (executable or library).</span></span> <span data-ttu-id="a1f31-162">Quand `UICulture` est défini dans le projet, tous les fichiers [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] compilés et les ressources marquées spécifiquement comme spécifiques au langage sont placés dans l’assembly de ressource satellite.</span><span class="sxs-lookup"><span data-stu-id="a1f31-162">When `UICulture` is set in the project, all compiled [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files and those resources specifically marked as language-specific are placed in the satellite resource assembly.</span></span> <span data-ttu-id="a1f31-163">En outre, toutes les ressources indépendantes du langage sont placées dans l’assembly principal.</span><span class="sxs-lookup"><span data-stu-id="a1f31-163">Furthermore, all language-neutral resources are placed in the main assembly.</span></span> <span data-ttu-id="a1f31-164">Cette détermination est faite lors de cette étape du processus de génération.</span><span class="sxs-lookup"><span data-stu-id="a1f31-164">In this step of the build process, that determination is made.</span></span>

<span data-ttu-id="a1f31-165">Les actions de build `ApplicationDefinition`, `Page` et `Resource` dans le fichier projet peuvent être augmentées avec les métadonnées `Localizable` (les valeurs acceptables sont `true` et `false`), qui déterminent si le fichier est spécifique au langage ou indépendant de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="a1f31-165">The `ApplicationDefinition`, `Page`, and `Resource` build actions in the project file can be augmented with the `Localizable` metadata (acceptable values are `true` and `false`), which dictates whether the file is language-specific or language-neutral.</span></span>

<a name="Core_Compilation"></a>

### <a name="core-compilation"></a><span data-ttu-id="a1f31-166">Compilation principale</span><span class="sxs-lookup"><span data-stu-id="a1f31-166">Core Compilation</span></span>

<span data-ttu-id="a1f31-167">L’étape de compilation principale implique la compilation des fichiers de code.</span><span class="sxs-lookup"><span data-stu-id="a1f31-167">The core compile step involves compilation of code files.</span></span> <span data-ttu-id="a1f31-168">Cela répond à une logique dans les fichiers cibles Microsoft.CSharp.targets et Microsoft.VisualBasic.targets spécifiques au langage.</span><span class="sxs-lookup"><span data-stu-id="a1f31-168">This is orchestrated by logic in the language-specific targets files Microsoft.CSharp.targets and Microsoft.VisualBasic.targets.</span></span> <span data-ttu-id="a1f31-169">Si les heuristiques ont déterminé qu’un seul passage du compilateur de balisage est suffisant, l’assembly principal est alors généré.</span><span class="sxs-lookup"><span data-stu-id="a1f31-169">If heuristics have determined that a single pass of the markup compiler is sufficient, then the main assembly is generated.</span></span> <span data-ttu-id="a1f31-170">Toutefois, si un ou plusieurs fichiers [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] du projet ont des références à des types définis localement, un fichier .dll temporaire est généré afin que les derniers assemblys d’application puissent être créés après la deuxième étape de compilation du balisage.</span><span class="sxs-lookup"><span data-stu-id="a1f31-170">However, if one or more [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files in the project have references to locally defined types, then a temporary .dll file is generated so the final application assemblies may be created after the second pass of markup compilation is complete.</span></span>

<a name="Manifest_generation"></a>

### <a name="manifest-generation"></a><span data-ttu-id="a1f31-171">Génération de manifeste</span><span class="sxs-lookup"><span data-stu-id="a1f31-171">Manifest Generation</span></span>

<span data-ttu-id="a1f31-172">À la fin du processus de génération, une fois que tous les assemblys d’application et les fichiers de contenu sont prêts, les manifestes ClickOnce pour l’application sont générés.</span><span class="sxs-lookup"><span data-stu-id="a1f31-172">At the end of the build process, after all the application assemblies and content files are ready, the ClickOnce manifests for the application are generated.</span></span>

<span data-ttu-id="a1f31-173">Le fichier manifeste de déploiement décrit le modèle de déploiement : la version actuelle, le comportement de mise à jour et l’identité d’éditeur avec la signature numérique.</span><span class="sxs-lookup"><span data-stu-id="a1f31-173">The deployment manifest file describes the deployment model: the current version, update behavior, and publisher identity along with digital signature.</span></span> <span data-ttu-id="a1f31-174">Ce manifeste est prévu pour être créé par les administrateurs qui gèrent le déploiement.</span><span class="sxs-lookup"><span data-stu-id="a1f31-174">This manifest is intended to be authored by administrators who handle deployment.</span></span> <span data-ttu-id="a1f31-175">L’extension de fichier est. XBAP (pour les applications de navigateur XAML (XBAP)) et. application pour les applications installées.</span><span class="sxs-lookup"><span data-stu-id="a1f31-175">The file extension is .xbap (for XAML browser applications (XBAPs)) and .application for installed applications.</span></span> <span data-ttu-id="a1f31-176">La première extension est déterminée par la propriété du projet `HostInBrowser` et, en conséquence, le manifeste identifie l’application comme étant hébergée par le navigateur.</span><span class="sxs-lookup"><span data-stu-id="a1f31-176">The former is dictated by the `HostInBrowser` project property and as a result the manifest identifies the application as browser-hosted.</span></span>

<span data-ttu-id="a1f31-177">Le manifeste de l’application (un fichier .exe.manifest) décrit les assemblys d’application et les bibliothèques dépendantes, et répertorie les autorisations requises par l’application.</span><span class="sxs-lookup"><span data-stu-id="a1f31-177">The application manifest (an .exe.manifest file) describes the application assemblies and dependent libraries and lists permissions required by the application.</span></span> <span data-ttu-id="a1f31-178">Ce fichier est prévu pour être créé par le développeur d’applications.</span><span class="sxs-lookup"><span data-stu-id="a1f31-178">This file is intended to be authored by the application developer.</span></span> <span data-ttu-id="a1f31-179">Pour lancer une application ClickOnce, un utilisateur ouvre le fichier de manifeste de déploiement de l’application.</span><span class="sxs-lookup"><span data-stu-id="a1f31-179">In order to launch a ClickOnce application, a user opens the application's deployment manifest file.</span></span>

<span data-ttu-id="a1f31-180">Ces fichiers manifestes sont toujours créés pour les applications XBAP.</span><span class="sxs-lookup"><span data-stu-id="a1f31-180">These manifest files are always created for XBAPs.</span></span> <span data-ttu-id="a1f31-181">Pour les applications installées, ils ne sont pas créés à moins que la propriété `GenerateManifests` ne soit spécifiée dans le fichier projet avec la valeur `true`.</span><span class="sxs-lookup"><span data-stu-id="a1f31-181">For installed applications, they are not created unless the `GenerateManifests` property is specified in the project file with value `true`.</span></span>

<span data-ttu-id="a1f31-182">Les XBAP obtiennent deux autorisations supplémentaires au-dessus des autorisations affectées aux applications de zone Internet typiques : <xref:System.Security.Permissions.WebBrowserPermission> et <xref:System.Security.Permissions.MediaPermission>.</span><span class="sxs-lookup"><span data-stu-id="a1f31-182">XBAPs get two additional permissions over and above those permissions assigned to typical Internet zone applications: <xref:System.Security.Permissions.WebBrowserPermission> and <xref:System.Security.Permissions.MediaPermission>.</span></span> <span data-ttu-id="a1f31-183">Le système de génération WPF déclare ces autorisations dans le manifeste de l’application.</span><span class="sxs-lookup"><span data-stu-id="a1f31-183">The WPF build system declares those permissions in the application manifest.</span></span>

<a name="Incremental_Build_Support"></a>

## <a name="incremental-build-support"></a><span data-ttu-id="a1f31-184">Prise en charge de la build incrémentielle</span><span class="sxs-lookup"><span data-stu-id="a1f31-184">Incremental Build Support</span></span>

<span data-ttu-id="a1f31-185">Le système de génération WPF assure la prise en charge des builds incrémentielles.</span><span class="sxs-lookup"><span data-stu-id="a1f31-185">The WPF build system provides support for incremental builds.</span></span> <span data-ttu-id="a1f31-186">Il est assez intelligent pour détecter les modifications apportées au balisage ou au code, et il compile uniquement les artefacts affectés par la modification.</span><span class="sxs-lookup"><span data-stu-id="a1f31-186">It is fairly intelligent about detecting changes made to markup or code, and it compiles only those artifacts affected by the change.</span></span> <span data-ttu-id="a1f31-187">Le mécanisme de build incrémentielle utilise les fichiers suivants :</span><span class="sxs-lookup"><span data-stu-id="a1f31-187">The incremental build mechanism uses the following files:</span></span>

- <span data-ttu-id="a1f31-188">Un fichier $(*AssemblyName*)_MarkupCompiler.Cache pour gérer l’état du compilateur actuel.</span><span class="sxs-lookup"><span data-stu-id="a1f31-188">An $(*AssemblyName*)_MarkupCompiler.Cache file to maintain current compiler state.</span></span>

- <span data-ttu-id="a1f31-189">Un fichier $(*AssemblyName*)_MarkupCompiler.lref pour mettre en cache les fichiers [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] avec les références aux types définis localement.</span><span class="sxs-lookup"><span data-stu-id="a1f31-189">An $(*AssemblyName*)_MarkupCompiler.lref file to cache the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files with references to locally defined types.</span></span>

<span data-ttu-id="a1f31-190">Voici un ensemble de règles qui régissent la build incrémentielle :</span><span class="sxs-lookup"><span data-stu-id="a1f31-190">The following is a set of rules governing incremental build:</span></span>

- <span data-ttu-id="a1f31-191">Le fichier est la plus petite unité au niveau de laquelle le système de génération détecte une modification.</span><span class="sxs-lookup"><span data-stu-id="a1f31-191">The file is the smallest unit at which the build system detects change.</span></span> <span data-ttu-id="a1f31-192">Par conséquent, pour un fichier de code, le système de génération ne peut pas déterminer si un type a été modifié ou si du code a été ajouté.</span><span class="sxs-lookup"><span data-stu-id="a1f31-192">So, for a code file, the build system cannot tell if a type was changed or if code was added.</span></span> <span data-ttu-id="a1f31-193">Il en va de même pour les fichiers projet.</span><span class="sxs-lookup"><span data-stu-id="a1f31-193">The same holds for project files.</span></span>

- <span data-ttu-id="a1f31-194">Le mécanisme de build incrémentielle doit être informé qu’une page [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] définit une classe ou utilise d’autres classes.</span><span class="sxs-lookup"><span data-stu-id="a1f31-194">The incremental build mechanism must be cognizant that a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] page either defines a class or uses other classes.</span></span>

- <span data-ttu-id="a1f31-195">Si des entrées `Reference` sont modifiées, vous devez recompiler toutes les pages.</span><span class="sxs-lookup"><span data-stu-id="a1f31-195">If `Reference` entries change, then recompile all pages.</span></span>

- <span data-ttu-id="a1f31-196">Si un fichier de code est modifié, recompilez toutes les pages avec des références à des types définis localement.</span><span class="sxs-lookup"><span data-stu-id="a1f31-196">If a code file changes, recompile all pages with locally defined type references.</span></span>

- <span data-ttu-id="a1f31-197">Si un fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] est modifié :</span><span class="sxs-lookup"><span data-stu-id="a1f31-197">If a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file changes:</span></span>

  - <span data-ttu-id="a1f31-198">Si [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] est déclaré comme `Page` dans le projet : si le fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] ne contient pas de références à des types définis localement, recompilez ce fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] plus toutes les pages [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] avec des références locales ; si le fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] contient des références locales, recompilez toutes les pages [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] avec les références locales.</span><span class="sxs-lookup"><span data-stu-id="a1f31-198">If [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is declared as `Page` in the project: if the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] does not have locally defined type references, recompile that [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] plus all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages with local references; if the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] has local references, recompile all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages with local references.</span></span>

  - <span data-ttu-id="a1f31-199">Si [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] est déclaré comme `ApplicationDefinition` dans le projet : recompiler tous les [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages (raison : chaque [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] a une référence à un type <xref:System.Windows.Application> qui a peut-être été modifié).</span><span class="sxs-lookup"><span data-stu-id="a1f31-199">If [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is declared as `ApplicationDefinition` in the project: recompile all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages (reason: each [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] has reference to an <xref:System.Windows.Application> type that may have changed).</span></span>

- <span data-ttu-id="a1f31-200">Si le fichier projet déclare un fichier de code en tant que définition d’application au lieu d’un fichier [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="a1f31-200">If the project file declares a code file as application definition instead of a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file:</span></span>

  - <span data-ttu-id="a1f31-201">Vérifiez si la valeur `ApplicationClassName` dans le fichier projet a changé (existe-t-il un nouveau type d’application ?).</span><span class="sxs-lookup"><span data-stu-id="a1f31-201">Check if the `ApplicationClassName` value in the project file has changed (is there a new application type?).</span></span> <span data-ttu-id="a1f31-202">Dans ce cas, recompilez toute l’application.</span><span class="sxs-lookup"><span data-stu-id="a1f31-202">If so, recompile the entire application.</span></span>

  - <span data-ttu-id="a1f31-203">Sinon, recompilez toutes les pages [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] avec des références locales.</span><span class="sxs-lookup"><span data-stu-id="a1f31-203">Otherwise, recompile all [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages with local references.</span></span>

- <span data-ttu-id="a1f31-204">Si un fichier projet change : appliquez toutes les règles précédentes et déterminez ce qui doit être recompilé.</span><span class="sxs-lookup"><span data-stu-id="a1f31-204">If a project file changes: apply all preceding rules and see what needs to be recompiled.</span></span> <span data-ttu-id="a1f31-205">Les modifications apportées aux propriétés suivantes entraînent une recompilation complète : `AssemblyName`, `IntermediateOutputPath`, `RootNamespace` et `HostInBrowser`.</span><span class="sxs-lookup"><span data-stu-id="a1f31-205">Changes to the following properties trigger a complete recompile: `AssemblyName`, `IntermediateOutputPath`, `RootNamespace`, and `HostInBrowser`.</span></span>

<span data-ttu-id="a1f31-206">Les scénarios de recompilation suivants sont possibles :</span><span class="sxs-lookup"><span data-stu-id="a1f31-206">The following recompile scenarios are possible:</span></span>

- <span data-ttu-id="a1f31-207">Toute l’application est recompilée.</span><span class="sxs-lookup"><span data-stu-id="a1f31-207">The entire application is recompiled.</span></span>

- <span data-ttu-id="a1f31-208">Seuls les fichiers [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] qui contiennent des références à des types définis localement sont recompilés.</span><span class="sxs-lookup"><span data-stu-id="a1f31-208">Only those [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files that have locally defined type references are recompiled.</span></span>

- <span data-ttu-id="a1f31-209">Rien n’est recompilé (si rien dans le projet n’a changé).</span><span class="sxs-lookup"><span data-stu-id="a1f31-209">Nothing is recompiled (if nothing in the project has changed).</span></span>

## <a name="see-also"></a><span data-ttu-id="a1f31-210">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a1f31-210">See also</span></span>

- [<span data-ttu-id="a1f31-211">Déploiement d’une application WPF</span><span class="sxs-lookup"><span data-stu-id="a1f31-211">Deploying a WPF Application</span></span>](deploying-a-wpf-application-wpf.md)
- [<span data-ttu-id="a1f31-212">Informations de référence sur MSBuild WPF</span><span class="sxs-lookup"><span data-stu-id="a1f31-212">WPF MSBuild Reference</span></span>](/visualstudio/msbuild/wpf-msbuild-reference)
- [<span data-ttu-id="a1f31-213">URI à en-tête pack dans WPF</span><span class="sxs-lookup"><span data-stu-id="a1f31-213">Pack URIs in WPF</span></span>](pack-uris-in-wpf.md)
- [<span data-ttu-id="a1f31-214">Fichiers de ressources, de contenu et de données d’une application WPF</span><span class="sxs-lookup"><span data-stu-id="a1f31-214">WPF Application Resource, Content, and Data Files</span></span>](wpf-application-resource-content-and-data-files.md)
