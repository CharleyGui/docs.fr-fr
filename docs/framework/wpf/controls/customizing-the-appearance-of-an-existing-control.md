---
title: Personnalisation de l'apparence d'un contrôle existant en créant un ControlTemplate
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- control contract [WPF]
- controls [WPF], visual structure changes
- ControlTemplate [WPF], customizing for existing controls
- skinning controls [WPF]
- controls [WPF], appearance specified by state
- templates [WPF], custom for existing controls
ms.assetid: 678dd116-43a2-4b8c-82b5-6b826f126e31
ms.openlocfilehash: 6d7401f9614e663351968dc6a2f85548735a176d
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/03/2019
ms.locfileid: "73460416"
---
# <a name="customizing-the-appearance-of-an-existing-control-by-creating-a-controltemplate"></a><span data-ttu-id="c778f-102">Personnalisation de l'apparence d'un contrôle existant en créant un ControlTemplate</span><span class="sxs-lookup"><span data-stu-id="c778f-102">Customizing the Appearance of an Existing Control by Creating a ControlTemplate</span></span>
<a name="introduction"></a><span data-ttu-id="c778f-103"><xref:System.Windows.Controls.ControlTemplate> spécifie la structure visuelle et le comportement visuel d’un contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-103">A <xref:System.Windows.Controls.ControlTemplate> specifies the visual structure and visual behavior of a control.</span></span> <span data-ttu-id="c778f-104">Vous pouvez personnaliser l’apparence d’un contrôle en lui donnant un nouveau <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="c778f-104">You can customize the appearance of a control by giving it a new <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="c778f-105">Lorsque vous créez un <xref:System.Windows.Controls.ControlTemplate>, vous remplacez l’apparence d’un contrôle existant sans modifier sa fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="c778f-105">When you create a <xref:System.Windows.Controls.ControlTemplate>, you replace the appearance of an existing control without changing its functionality.</span></span> <span data-ttu-id="c778f-106">Par exemple, vous pouvez faire en sorte que les boutons de votre application s’arrondissent au lieu de la forme carrée par défaut, mais le bouton déclenchera toujours l’événement <xref:System.Windows.Controls.Primitives.ButtonBase.Click>.</span><span class="sxs-lookup"><span data-stu-id="c778f-106">For example, you can make the buttons in your application round instead of the default square shape, but the button will still raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span>

 <span data-ttu-id="c778f-107">Cette rubrique explique les différentes parties d’un <xref:System.Windows.Controls.ControlTemplate>, illustre la création d’un <xref:System.Windows.Controls.ControlTemplate> simple pour un <xref:System.Windows.Controls.Button>et explique comment comprendre le contrat de contrôle d’un contrôle pour vous permettre de personnaliser son apparence.</span><span class="sxs-lookup"><span data-stu-id="c778f-107">This topic explains the various parts of a <xref:System.Windows.Controls.ControlTemplate>, demonstrates creating a simple <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>, and explains how to understand the control contract of a control so that you can customize its appearance.</span></span> <span data-ttu-id="c778f-108">Étant donné que vous créez un <xref:System.Windows.Controls.ControlTemplate> dans [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], vous pouvez modifier l’apparence d’un contrôle sans écrire de code.</span><span class="sxs-lookup"><span data-stu-id="c778f-108">Because you create a <xref:System.Windows.Controls.ControlTemplate> in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you can change a control's appearance without writing any code.</span></span> <span data-ttu-id="c778f-109">Vous pouvez également utiliser un concepteur, tel que Blend pour Visual Studio, pour créer des modèles de contrôle personnalisés.</span><span class="sxs-lookup"><span data-stu-id="c778f-109">You can also use a designer, such as Blend for Visual Studio, to create custom control templates.</span></span> <span data-ttu-id="c778f-110">Cette rubrique présente des exemples de la [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] qui personnalisent l’apparence d’un <xref:System.Windows.Controls.Button> et répertorie l’exemple complet à la fin de la rubrique.</span><span class="sxs-lookup"><span data-stu-id="c778f-110">This topic shows examples in the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] that customize the appearance of a <xref:System.Windows.Controls.Button> and lists the complete example at the end of the topic.</span></span> <span data-ttu-id="c778f-111">Pour plus d’informations sur l’utilisation de Blend pour Visual Studio, consultez [stylisation d’un contrôle qui prend en charge les modèles](https://go.microsoft.com/fwlink/?LinkId=161153).</span><span class="sxs-lookup"><span data-stu-id="c778f-111">For more information about using Blend for Visual Studio, see [Styling a control that supports templates](https://go.microsoft.com/fwlink/?LinkId=161153).</span></span>

 <span data-ttu-id="c778f-112">Les illustrations suivantes montrent une <xref:System.Windows.Controls.Button> qui utilise le <xref:System.Windows.Controls.ControlTemplate> créé dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="c778f-112">The following illustrations show a <xref:System.Windows.Controls.Button> that uses the <xref:System.Windows.Controls.ControlTemplate> that is created in this topic.</span></span>

 <span data-ttu-id="c778f-113">![Bouton avec un modèle de contrôle personnalisé.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span><span class="sxs-lookup"><span data-stu-id="c778f-113">![A button with a custom control template.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span></span>
<span data-ttu-id="c778f-114">Bouton qui utilise un modèle de contrôle personnalisé</span><span class="sxs-lookup"><span data-stu-id="c778f-114">A button that uses a custom control template</span></span>

 <span data-ttu-id="c778f-115">![Bouton avec une bordure rouge.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span><span class="sxs-lookup"><span data-stu-id="c778f-115">![A button with a red border.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span></span>
<span data-ttu-id="c778f-116">Bouton qui utilise un modèle de contrôle personnalisé et sur lequel le pointeur de la souris se trouve</span><span class="sxs-lookup"><span data-stu-id="c778f-116">A button that uses a custom control template and has the mouse pointer over it</span></span>

<a name="prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="c778f-117">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="c778f-117">Prerequisites</span></span>
 <span data-ttu-id="c778f-118">Cette rubrique part du principe que vous savez comment créer et utiliser des contrôles et des styles, comme indiqué dans [Contrôles](index.md).</span><span class="sxs-lookup"><span data-stu-id="c778f-118">This topic assumes that you understand how to create and use controls and styles as discussed in [Controls](index.md).</span></span> <span data-ttu-id="c778f-119">Les concepts abordés dans cette rubrique s’appliquent aux éléments qui héritent de la classe <xref:System.Windows.Controls.Control>, à l’exception du <xref:System.Windows.Controls.UserControl>.</span><span class="sxs-lookup"><span data-stu-id="c778f-119">The concepts discussed in this topic apply to elements that inherit from the <xref:System.Windows.Controls.Control> class, except for the <xref:System.Windows.Controls.UserControl>.</span></span> <span data-ttu-id="c778f-120">Vous ne pouvez pas appliquer un <xref:System.Windows.Controls.ControlTemplate> à un <xref:System.Windows.Controls.UserControl>.</span><span class="sxs-lookup"><span data-stu-id="c778f-120">You cannot apply a <xref:System.Windows.Controls.ControlTemplate> to a <xref:System.Windows.Controls.UserControl>.</span></span>

<a name="when_you_should_create_a_controltemplate"></a>
## <a name="when-you-should-create-a-controltemplate"></a><span data-ttu-id="c778f-121">Quand créer un ControlTemplate</span><span class="sxs-lookup"><span data-stu-id="c778f-121">When You Should Create a ControlTemplate</span></span>
 <span data-ttu-id="c778f-122">Les contrôles ont de nombreuses propriétés, telles que <xref:System.Windows.Controls.Border.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>et <xref:System.Windows.Controls.Control.FontFamily%2A>, que vous pouvez définir pour spécifier différents aspects de l’apparence du contrôle, mais les modifications que vous pouvez apporter en définissant ces propriétés sont limitées.</span><span class="sxs-lookup"><span data-stu-id="c778f-122">Controls have many properties, such as <xref:System.Windows.Controls.Border.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontFamily%2A>, that you can set to specify different aspects of the control's appearance, but the changes that you can make by setting these properties are limited.</span></span> <span data-ttu-id="c778f-123">Par exemple, vous pouvez définir la propriété <xref:System.Windows.Controls.Control.Foreground%2A> sur Blue et <xref:System.Windows.Controls.Control.FontStyle%2A> sur Italic sur un <xref:System.Windows.Controls.CheckBox>.</span><span class="sxs-lookup"><span data-stu-id="c778f-123">For example, you can set the <xref:System.Windows.Controls.Control.Foreground%2A> property to blue and <xref:System.Windows.Controls.Control.FontStyle%2A> to italic on a <xref:System.Windows.Controls.CheckBox>.</span></span>

 <span data-ttu-id="c778f-124">Si vous n’avez pas la possibilité de créer un <xref:System.Windows.Controls.ControlTemplate> pour les contrôles, tous les contrôles de chaque application basée sur [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]auront la même apparence générale, ce qui limiterait la possibilité de créer une application avec une apparence et une convivialité personnalisées.</span><span class="sxs-lookup"><span data-stu-id="c778f-124">Without the ability to create a new <xref:System.Windows.Controls.ControlTemplate> for controls, all controls in every [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-based application would have the same general appearance, which would limit the ability to create an application with a custom look and feel.</span></span> <span data-ttu-id="c778f-125">Par défaut, chaque <xref:System.Windows.Controls.CheckBox> a des caractéristiques similaires.</span><span class="sxs-lookup"><span data-stu-id="c778f-125">By default, every <xref:System.Windows.Controls.CheckBox> has similar characteristics.</span></span> <span data-ttu-id="c778f-126">Par exemple, le contenu du <xref:System.Windows.Controls.CheckBox> est toujours à droite de l’indicateur de sélection, et la coche est toujours utilisée pour indiquer que la <xref:System.Windows.Controls.CheckBox> est sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="c778f-126">For example, the content of the <xref:System.Windows.Controls.CheckBox> is always to the right of the selection indicator, and the check mark is always used to indicate that the <xref:System.Windows.Controls.CheckBox> is selected.</span></span>

 <span data-ttu-id="c778f-127">Vous créez une <xref:System.Windows.Controls.ControlTemplate> lorsque vous souhaitez personnaliser l’apparence du contrôle au-delà de ce qui est défini par les autres propriétés du contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-127">You create a <xref:System.Windows.Controls.ControlTemplate> when you want to customize the control's appearance beyond what setting the other properties on the control will do.</span></span> <span data-ttu-id="c778f-128">Dans l’exemple de la <xref:System.Windows.Controls.CheckBox>, supposons que vous souhaitiez que le contenu de la case à cocher se trouve au-dessus de l’indicateur de sélection et que vous souhaitiez qu’un X indique que le <xref:System.Windows.Controls.CheckBox> est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="c778f-128">In the example of the <xref:System.Windows.Controls.CheckBox>, suppose that you want the content of the check box to be above the selection indicator and you want an X to indicate that the <xref:System.Windows.Controls.CheckBox> is selected.</span></span> <span data-ttu-id="c778f-129">Vous spécifiez ces modifications dans le <xref:System.Windows.Controls.ControlTemplate> du <xref:System.Windows.Controls.CheckBox>.</span><span class="sxs-lookup"><span data-stu-id="c778f-129">You specify these changes in the <xref:System.Windows.Controls.ControlTemplate> of the <xref:System.Windows.Controls.CheckBox>.</span></span>

 <span data-ttu-id="c778f-130">L’illustration suivante montre une <xref:System.Windows.Controls.CheckBox> qui utilise un <xref:System.Windows.Controls.ControlTemplate>par défaut.</span><span class="sxs-lookup"><span data-stu-id="c778f-130">The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a default <xref:System.Windows.Controls.ControlTemplate>.</span></span>

 <span data-ttu-id="c778f-131">![Case à cocher avec le modèle de contrôle par défaut.](./media/ndp-checkboxdefault.png "NDP_CheckBoxDefault")</span><span class="sxs-lookup"><span data-stu-id="c778f-131">![A checkbox with the default control template.](./media/ndp-checkboxdefault.png "NDP_CheckBoxDefault")</span></span>
<span data-ttu-id="c778f-132">Case à cocher qui utilise le modèle de contrôle par défaut</span><span class="sxs-lookup"><span data-stu-id="c778f-132">A CheckBox that uses the default control template</span></span>

 <span data-ttu-id="c778f-133">L’illustration suivante montre une <xref:System.Windows.Controls.CheckBox> qui utilise un <xref:System.Windows.Controls.ControlTemplate> personnalisé pour placer le contenu du <xref:System.Windows.Controls.CheckBox> au-dessus de l’indicateur de sélection et affiche un X lorsque la <xref:System.Windows.Controls.CheckBox> est sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="c778f-133">The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a custom <xref:System.Windows.Controls.ControlTemplate> to place the content of the <xref:System.Windows.Controls.CheckBox> above the selection indicator and displays an X when the <xref:System.Windows.Controls.CheckBox> is selected.</span></span>

 <span data-ttu-id="c778f-134">![Case à cocher avec un modèle de contrôle personnalisé.](./media/ndp-checkboxcustom.png "NDP_CheckBoxCustom")</span><span class="sxs-lookup"><span data-stu-id="c778f-134">![A checkbox with a custom control template.](./media/ndp-checkboxcustom.png "NDP_CheckBoxCustom")</span></span>
<span data-ttu-id="c778f-135">Case à cocher qui utilise un modèle de contrôle personnalisé</span><span class="sxs-lookup"><span data-stu-id="c778f-135">A CheckBox that uses a custom control template</span></span>

 <span data-ttu-id="c778f-136">La <xref:System.Windows.Controls.ControlTemplate> pour les <xref:System.Windows.Controls.CheckBox> de cet exemple est relativement complexe. cette rubrique utilise donc un exemple plus simple de création d’un <xref:System.Windows.Controls.ControlTemplate> pour un <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="c778f-136">The <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.CheckBox> in this sample is relatively complex, so this topic uses a simpler example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>.</span></span>

<a name="changing_the_visual_structure_of_a_control"></a>
## <a name="changing-the-visual-structure-of-a-control"></a><span data-ttu-id="c778f-137">Changement de la structure visuelle d’un contrôle</span><span class="sxs-lookup"><span data-stu-id="c778f-137">Changing the Visual Structure of a Control</span></span>
 <span data-ttu-id="c778f-138">Dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], un contrôle est souvent un objet <xref:System.Windows.FrameworkElement> composite.</span><span class="sxs-lookup"><span data-stu-id="c778f-138">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], a control is often a composite <xref:System.Windows.FrameworkElement> objects.</span></span> <span data-ttu-id="c778f-139">Lorsque vous créez un <xref:System.Windows.Controls.ControlTemplate>, vous combinez des objets <xref:System.Windows.FrameworkElement> pour générer un contrôle unique.</span><span class="sxs-lookup"><span data-stu-id="c778f-139">When you create a <xref:System.Windows.Controls.ControlTemplate>, you combine <xref:System.Windows.FrameworkElement> objects to build a single control.</span></span> <span data-ttu-id="c778f-140">Un <xref:System.Windows.Controls.ControlTemplate> doit avoir une seule <xref:System.Windows.FrameworkElement> en tant qu’élément racine.</span><span class="sxs-lookup"><span data-stu-id="c778f-140">A <xref:System.Windows.Controls.ControlTemplate> must have only one <xref:System.Windows.FrameworkElement> as its root element.</span></span> <span data-ttu-id="c778f-141">L’élément racine contient généralement d’autres objets <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="c778f-141">The root element usually contains other <xref:System.Windows.FrameworkElement> objects.</span></span> <span data-ttu-id="c778f-142">La combinaison d’objets constitue la structure visuelle du contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-142">The combination of objects makes up the control's visual structure.</span></span>

 <span data-ttu-id="c778f-143">L’exemple suivant crée une <xref:System.Windows.Controls.ControlTemplate> personnalisée pour le <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="c778f-143">The following example creates a custom <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="c778f-144">L' <xref:System.Windows.Controls.ControlTemplate> crée la structure visuelle du <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="c778f-144">The <xref:System.Windows.Controls.ControlTemplate> creates the visual structure of the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="c778f-145">Cet exemple ne change pas l’apparence du bouton si vous placez le pointeur de la souris dessus ou cliquez dessus.</span><span class="sxs-lookup"><span data-stu-id="c778f-145">This example does not change the button's appearance when you move the mouse pointer over it or click it.</span></span> <span data-ttu-id="c778f-146">La modification de l’apparence du bouton quand celui-ci est dans un autre état est décrite plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="c778f-146">Changing the button's appearance when it is in a different state is discussed later in this topic.</span></span>

 <span data-ttu-id="c778f-147">Dans cet exemple, la structure visuelle se compose des parties suivantes :</span><span class="sxs-lookup"><span data-stu-id="c778f-147">In this example, the visual structure consists of the following parts:</span></span>

- <span data-ttu-id="c778f-148"><xref:System.Windows.Controls.Border> nommé `RootElement` qui sert de <xref:System.Windows.FrameworkElement>racine du modèle.</span><span class="sxs-lookup"><span data-stu-id="c778f-148">A <xref:System.Windows.Controls.Border> named `RootElement` that serves as the template's root <xref:System.Windows.FrameworkElement>.</span></span>

- <span data-ttu-id="c778f-149"><xref:System.Windows.Controls.Grid> qui est un enfant de `RootElement`.</span><span class="sxs-lookup"><span data-stu-id="c778f-149">A <xref:System.Windows.Controls.Grid> that is a child of `RootElement`.</span></span>

- <span data-ttu-id="c778f-150"><xref:System.Windows.Controls.ContentPresenter> qui affiche le contenu du bouton.</span><span class="sxs-lookup"><span data-stu-id="c778f-150">A <xref:System.Windows.Controls.ContentPresenter> that displays the button's content.</span></span> <span data-ttu-id="c778f-151">Le <xref:System.Windows.Controls.ContentPresenter> permet d’afficher tout type d’objet.</span><span class="sxs-lookup"><span data-stu-id="c778f-151">The <xref:System.Windows.Controls.ContentPresenter> enables any type of object to be displayed.</span></span>

 [!code-xaml[VSMButtonTemplate#BasicTemplate](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#basictemplate)]

### <a name="preserving-the-functionality-of-a-controls-properties-by-using-templatebinding"></a><span data-ttu-id="c778f-152">Conservation de la fonctionnalité des propriétés d’un contrôle en utilisant TemplateBinding</span><span class="sxs-lookup"><span data-stu-id="c778f-152">Preserving the Functionality of a Control's Properties by Using TemplateBinding</span></span>
 <span data-ttu-id="c778f-153">Lorsque vous créez un <xref:System.Windows.Controls.ControlTemplate>, vous pouvez toujours utiliser les propriétés publiques pour modifier l’apparence du contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-153">When you create a new <xref:System.Windows.Controls.ControlTemplate>, you still might want to use the public properties to change the control's appearance.</span></span> <span data-ttu-id="c778f-154">L’extension de balisage [TemplateBinding](../advanced/templatebinding-markup-extension.md) lie une propriété d’un élément qui se trouve dans le <xref:System.Windows.Controls.ControlTemplate> à une propriété publique définie par le contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-154">The [TemplateBinding](../advanced/templatebinding-markup-extension.md) markup extension binds a property of an element that is in the <xref:System.Windows.Controls.ControlTemplate> to a public property that is defined by the control.</span></span> <span data-ttu-id="c778f-155">Quand vous utilisez [TemplateBinding](../advanced/templatebinding-markup-extension.md), vous permettez aux propriétés sur le contrôle d’agir comme paramètres du modèle.</span><span class="sxs-lookup"><span data-stu-id="c778f-155">When you use [TemplateBinding](../advanced/templatebinding-markup-extension.md), you enable properties on the control to act as parameters to the template.</span></span> <span data-ttu-id="c778f-156">Autrement dit, quand une propriété sur un contrôle est définie, cette valeur est passée à l’élément qui a le [TemplateBinding](../advanced/templatebinding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="c778f-156">That is, when a property on a control is set, that value is passed on to the element that has the [TemplateBinding](../advanced/templatebinding-markup-extension.md) on it.</span></span>

 <span data-ttu-id="c778f-157">L’exemple suivant répète la partie de l’exemple précédent qui utilise l’extension de balisage [TemplateBinding](../advanced/templatebinding-markup-extension.md) pour lier les propriétés des éléments qui se trouvent dans le <xref:System.Windows.Controls.ControlTemplate> aux propriétés publiques définies par le bouton.</span><span class="sxs-lookup"><span data-stu-id="c778f-157">The following example repeats the part of the preceding example that uses the [TemplateBinding](../advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the button.</span></span>

 [!code-xaml[VSMButtonTemplate#TemplateBinding](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#templatebinding)]

 <span data-ttu-id="c778f-158">Dans cet exemple, le <xref:System.Windows.Controls.Grid> a son <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> modèle de propriété lié à <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c778f-158">In this example, the <xref:System.Windows.Controls.Grid> has its <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> property template bound to <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c778f-159">Étant donné que <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> est lié à un modèle, vous pouvez créer plusieurs boutons qui utilisent le même <xref:System.Windows.Controls.ControlTemplate> et définir la <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> sur différentes valeurs sur chaque bouton.</span><span class="sxs-lookup"><span data-stu-id="c778f-159">Because <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> is template bound, you can create multiple buttons that use the same <xref:System.Windows.Controls.ControlTemplate> and set the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> to different values on each button.</span></span> <span data-ttu-id="c778f-160">Si <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> n’était pas un modèle lié à une propriété d’un élément dans la <xref:System.Windows.Controls.ControlTemplate>, la définition de la <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> d’un bouton n’aurait aucun impact sur l’apparence du bouton.</span><span class="sxs-lookup"><span data-stu-id="c778f-160">If <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> was not template bound to a property of an element in the <xref:System.Windows.Controls.ControlTemplate>, setting the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> of a button would have no impact on the button's appearance.</span></span>

 <span data-ttu-id="c778f-161">Notez que les noms des deux propriétés n’ont pas besoin d’être identiques.</span><span class="sxs-lookup"><span data-stu-id="c778f-161">Note that the names of the two properties do not need to be identical.</span></span> <span data-ttu-id="c778f-162">Dans l’exemple précédent, la propriété <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> de la <xref:System.Windows.Controls.Button> est liée par modèle à la propriété <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType> de l' <xref:System.Windows.Controls.ContentPresenter>.</span><span class="sxs-lookup"><span data-stu-id="c778f-162">In the preceding example, the <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> property of the <xref:System.Windows.Controls.Button> is template bound to the <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType> property of the <xref:System.Windows.Controls.ContentPresenter>.</span></span> <span data-ttu-id="c778f-163">Le contenu du bouton est ainsi positionné horizontalement.</span><span class="sxs-lookup"><span data-stu-id="c778f-163">This enables the content of the button to be positioned horizontally.</span></span> <span data-ttu-id="c778f-164"><xref:System.Windows.Controls.ContentPresenter> n’a pas de propriété nommée `HorizontalContentAlignment`, mais <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> peut être lié à <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c778f-164"><xref:System.Windows.Controls.ContentPresenter> does not have a property named `HorizontalContentAlignment`, but <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> can be bound to <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c778f-165">Quand vous liez par modèle une propriété, vérifiez que les propriétés source et cible sont du même type.</span><span class="sxs-lookup"><span data-stu-id="c778f-165">When you template bind a property, be sure that the target and source properties are the same type.</span></span>

 <span data-ttu-id="c778f-166">La classe <xref:System.Windows.Controls.Control> définit plusieurs propriétés qui doivent être utilisées par le modèle de contrôle pour avoir un effet sur le contrôle lorsqu’elles sont définies.</span><span class="sxs-lookup"><span data-stu-id="c778f-166">The <xref:System.Windows.Controls.Control> class defines several properties that must be used by the control template to have an effect on the control when they are set.</span></span> <span data-ttu-id="c778f-167">La façon dont le <xref:System.Windows.Controls.ControlTemplate> utilise la propriété dépend de la propriété.</span><span class="sxs-lookup"><span data-stu-id="c778f-167">How the <xref:System.Windows.Controls.ControlTemplate> uses the property depends on the property.</span></span> <span data-ttu-id="c778f-168">Le <xref:System.Windows.Controls.ControlTemplate> doit utiliser la propriété de l’une des manières suivantes :</span><span class="sxs-lookup"><span data-stu-id="c778f-168">The <xref:System.Windows.Controls.ControlTemplate> must use the property in one of the following ways:</span></span>

- <span data-ttu-id="c778f-169">Un élément dans le modèle <xref:System.Windows.Controls.ControlTemplate> est lié à la propriété.</span><span class="sxs-lookup"><span data-stu-id="c778f-169">An element in the <xref:System.Windows.Controls.ControlTemplate> template binds to the property.</span></span>

- <span data-ttu-id="c778f-170">Un élément dans le <xref:System.Windows.Controls.ControlTemplate> hérite de la propriété d’un <xref:System.Windows.FrameworkElement>parent.</span><span class="sxs-lookup"><span data-stu-id="c778f-170">An element in the <xref:System.Windows.Controls.ControlTemplate> inherits the property from a parent <xref:System.Windows.FrameworkElement>.</span></span>

 <span data-ttu-id="c778f-171">Le tableau suivant répertorie les propriétés visuelles héritées par un contrôle de la classe <xref:System.Windows.Controls.Control>.</span><span class="sxs-lookup"><span data-stu-id="c778f-171">The following table lists the visual properties inherited by a control from the <xref:System.Windows.Controls.Control> class.</span></span> <span data-ttu-id="c778f-172">Il indique également si le modèle de contrôle par défaut d’un contrôle utilise la valeur de la propriété héritée ou s’il doit être lié par modèle.</span><span class="sxs-lookup"><span data-stu-id="c778f-172">It also indicates whether the default control template of a control uses the inherited property value or if it must be template bound.</span></span>

|<span data-ttu-id="c778f-173">Property</span><span class="sxs-lookup"><span data-stu-id="c778f-173">Property</span></span>|<span data-ttu-id="c778f-174">Méthode d’utilisation</span><span class="sxs-lookup"><span data-stu-id="c778f-174">Usage method</span></span>|
|--------------|------------------|
|<xref:System.Windows.Controls.Control.Background%2A>|<span data-ttu-id="c778f-175">Liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-175">Template binding</span></span>|
|<xref:System.Windows.Controls.Control.BorderThickness%2A>|<span data-ttu-id="c778f-176">Liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-176">Template binding</span></span>|
|<xref:System.Windows.Controls.Control.BorderBrush%2A>|<span data-ttu-id="c778f-177">Liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-177">Template binding</span></span>|
|<xref:System.Windows.Controls.Control.FontFamily%2A>|<span data-ttu-id="c778f-178">Héritage de propriété ou liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-178">Property inheritance or template binding</span></span>|
|<xref:System.Windows.Controls.Control.FontSize%2A>|<span data-ttu-id="c778f-179">Héritage de propriété ou liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-179">Property inheritance or template binding</span></span>|
|<xref:System.Windows.Controls.Control.FontStretch%2A>|<span data-ttu-id="c778f-180">Héritage de propriété ou liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-180">Property inheritance or template binding</span></span>|
|<xref:System.Windows.Controls.Control.FontWeight%2A>|<span data-ttu-id="c778f-181">Héritage de propriété ou liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-181">Property inheritance or template binding</span></span>|
|<xref:System.Windows.Controls.Control.Foreground%2A>|<span data-ttu-id="c778f-182">Héritage de propriété ou liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-182">Property inheritance or template binding</span></span>|
|<xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A>|<span data-ttu-id="c778f-183">Liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-183">Template binding</span></span>|
|<xref:System.Windows.Controls.Control.Padding%2A>|<span data-ttu-id="c778f-184">Liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-184">Template binding</span></span>|
|<xref:System.Windows.Controls.Control.VerticalContentAlignment%2A>|<span data-ttu-id="c778f-185">Liaison de modèle</span><span class="sxs-lookup"><span data-stu-id="c778f-185">Template binding</span></span>|

 <span data-ttu-id="c778f-186">Le tableau répertorie uniquement les propriétés visuelles héritées de la classe <xref:System.Windows.Controls.Control>.</span><span class="sxs-lookup"><span data-stu-id="c778f-186">The table lists only the visual properties inherited from the <xref:System.Windows.Controls.Control> class.</span></span> <span data-ttu-id="c778f-187">Outre les propriétés listées dans le tableau, un contrôle peut également hériter des propriétés <xref:System.Windows.FrameworkElement.DataContext%2A>, <xref:System.Windows.FrameworkElement.Language%2A>et <xref:System.Windows.Controls.TextBlock.TextDecorations%2A> de l’élément Framework parent.</span><span class="sxs-lookup"><span data-stu-id="c778f-187">Apart from the properties listed in the table, a control may also inherit the <xref:System.Windows.FrameworkElement.DataContext%2A>, <xref:System.Windows.FrameworkElement.Language%2A>, and <xref:System.Windows.Controls.TextBlock.TextDecorations%2A> properties from the parent framework element.</span></span>

 <span data-ttu-id="c778f-188">En outre, si le <xref:System.Windows.Controls.ContentPresenter> se trouve dans le <xref:System.Windows.Controls.ControlTemplate> d’un <xref:System.Windows.Controls.ContentControl>, le <xref:System.Windows.Controls.ContentPresenter> est automatiquement lié aux propriétés <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> et <xref:System.Windows.Controls.ContentControl.Content%2A>.</span><span class="sxs-lookup"><span data-stu-id="c778f-188">Also, if the <xref:System.Windows.Controls.ContentPresenter> is in the <xref:System.Windows.Controls.ControlTemplate> of a <xref:System.Windows.Controls.ContentControl>, the <xref:System.Windows.Controls.ContentPresenter> will automatically bind to the <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> and <xref:System.Windows.Controls.ContentControl.Content%2A> properties.</span></span> <span data-ttu-id="c778f-189">De même, un <xref:System.Windows.Controls.ItemsPresenter> qui se trouve dans le <xref:System.Windows.Controls.ControlTemplate> d’un <xref:System.Windows.Controls.ItemsControl> est automatiquement lié aux propriétés <xref:System.Windows.Controls.ItemsControl.Items%2A> et <xref:System.Windows.Controls.ItemsPresenter>.</span><span class="sxs-lookup"><span data-stu-id="c778f-189">Likewise, an <xref:System.Windows.Controls.ItemsPresenter> that is in the <xref:System.Windows.Controls.ControlTemplate> of an <xref:System.Windows.Controls.ItemsControl> will automatically bind to the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.ItemsPresenter> properties.</span></span>

 <span data-ttu-id="c778f-190">L’exemple suivant crée deux boutons qui utilisent le <xref:System.Windows.Controls.ControlTemplate> défini dans l’exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="c778f-190">The following example creates two buttons that use the <xref:System.Windows.Controls.ControlTemplate> defined in the preceding example.</span></span> <span data-ttu-id="c778f-191">L’exemple définit les propriétés <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>et <xref:System.Windows.Controls.Control.FontSize%2A> sur chaque bouton.</span><span class="sxs-lookup"><span data-stu-id="c778f-191">The example sets the <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontSize%2A> properties on each button.</span></span> <span data-ttu-id="c778f-192">La définition de la propriété <xref:System.Windows.Controls.Control.Background%2A> a un effet, car elle est liée par modèle dans le <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="c778f-192">Setting the <xref:System.Windows.Controls.Control.Background%2A> property has an effect because it is template bound in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="c778f-193">Même si les propriétés <xref:System.Windows.Controls.Control.Foreground%2A> et <xref:System.Windows.Controls.Control.FontSize%2A> ne sont pas liées par modèle, leur définition a un effet, car leurs valeurs sont héritées.</span><span class="sxs-lookup"><span data-stu-id="c778f-193">Even though the <xref:System.Windows.Controls.Control.Foreground%2A> and <xref:System.Windows.Controls.Control.FontSize%2A> properties are not template bound, setting them has an effect because their values are inherited.</span></span>

 [!code-xaml[VSMButtonTemplate#ButtonDeclaration](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#buttondeclaration)]

 <span data-ttu-id="c778f-194">L’exemple précédent produit une sortie similaire à celle de l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="c778f-194">The preceding example produces output that is similar to the following illustration.</span></span>

 <span data-ttu-id="c778f-195">![Deux boutons, un bleu et un violet.](./media/ndp-buttontwo.png "NDP_ButtonTwo")</span><span class="sxs-lookup"><span data-stu-id="c778f-195">![Two buttons, one blue and one purple.](./media/ndp-buttontwo.png "NDP_ButtonTwo")</span></span>
<span data-ttu-id="c778f-196">Deux boutons avec des couleurs d’arrière-plan différentes</span><span class="sxs-lookup"><span data-stu-id="c778f-196">Two buttons with different background colors</span></span>

<a name="changing_the_appearance_of_a_control_depending_on_its_state"></a>
## <a name="changing-the-appearance-of-a-control-depending-on-its-state"></a><span data-ttu-id="c778f-197">Modification de l’apparence d’un contrôle en fonction de son état</span><span class="sxs-lookup"><span data-stu-id="c778f-197">Changing the Appearance of a Control Depending on Its State</span></span>
 <span data-ttu-id="c778f-198">La différence entre un bouton avec son apparence par défaut et le bouton de l’exemple précédent est que le bouton par défaut change légèrement selon son état.</span><span class="sxs-lookup"><span data-stu-id="c778f-198">The difference between a button with its default appearance and the button in the preceding example is that the default button subtly changes when it is in different states.</span></span> <span data-ttu-id="c778f-199">Par exemple, l’apparence du bouton par défaut change quand l’utilisateur clique dessus ou pointe sur lui.</span><span class="sxs-lookup"><span data-stu-id="c778f-199">For example, the default button's appearance changes when the button is pressed, or when the mouse pointer is over the button.</span></span> <span data-ttu-id="c778f-200">Bien que le <xref:System.Windows.Controls.ControlTemplate> ne modifie pas la fonctionnalité d’un contrôle, il modifie le comportement visuel du contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-200">Although the <xref:System.Windows.Controls.ControlTemplate> does not change the functionality of a control, it does change the control's visual behavior.</span></span> <span data-ttu-id="c778f-201">Un comportement visuel décrit l’apparence du contrôle quand ce dernier est dans un état particulier.</span><span class="sxs-lookup"><span data-stu-id="c778f-201">A visual behavior describes the control appearance when it is in a certain state.</span></span> <span data-ttu-id="c778f-202">Pour comprendre la différence entre la fonctionnalité et le comportement visuel d’un contrôle, considérez l’exemple du bouton.</span><span class="sxs-lookup"><span data-stu-id="c778f-202">To understand the difference between the functionality and visual behavior of a control, consider the button example.</span></span> <span data-ttu-id="c778f-203">La fonctionnalité du bouton consiste à déclencher l’événement <xref:System.Windows.Controls.Primitives.ButtonBase.Click> lorsque l’utilisateur clique dessus, mais le comportement visuel du bouton a pour effet de modifier son apparence lorsqu’il est pointé ou enfoncé.</span><span class="sxs-lookup"><span data-stu-id="c778f-203">The button's functionality is to raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event when it is clicked, but the button's visual behavior is to change its appearance when it is pointed to or pressed.</span></span>

 <span data-ttu-id="c778f-204">Vous utilisez <xref:System.Windows.VisualState> objets pour spécifier l’apparence d’un contrôle lorsqu’il est dans un certain état.</span><span class="sxs-lookup"><span data-stu-id="c778f-204">You use <xref:System.Windows.VisualState> objects to specify the appearance of a control when it is in a certain state.</span></span> <span data-ttu-id="c778f-205">Une <xref:System.Windows.VisualState> contient une <xref:System.Windows.Media.Animation.Storyboard> qui modifie l’apparence des éléments qui se trouvent dans le <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="c778f-205">A <xref:System.Windows.VisualState> contains a <xref:System.Windows.Media.Animation.Storyboard> that changes the appearance of the elements that are in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="c778f-206">Vous n’avez pas à écrire de code pour que cela se produise, car la logique du contrôle modifie l’État à l’aide de l' <xref:System.Windows.VisualStateManager>.</span><span class="sxs-lookup"><span data-stu-id="c778f-206">You do not have to write any code to make this occur because the control's logic changes state by using the <xref:System.Windows.VisualStateManager>.</span></span> <span data-ttu-id="c778f-207">Lorsque le contrôle passe à l’état spécifié par la propriété <xref:System.Windows.VisualState.Name%2A?displayProperty=nameWithType>, le <xref:System.Windows.Media.Animation.Storyboard> commence.</span><span class="sxs-lookup"><span data-stu-id="c778f-207">When the control enters the state that is specified by the <xref:System.Windows.VisualState.Name%2A?displayProperty=nameWithType> property, the <xref:System.Windows.Media.Animation.Storyboard> begins.</span></span> <span data-ttu-id="c778f-208">Lorsque le contrôle quitte l’État, le <xref:System.Windows.Media.Animation.Storyboard> s’arrête.</span><span class="sxs-lookup"><span data-stu-id="c778f-208">When the control exits the state, the <xref:System.Windows.Media.Animation.Storyboard> stops.</span></span>

 <span data-ttu-id="c778f-209">L’exemple suivant montre le <xref:System.Windows.VisualState> qui modifie l’apparence d’un <xref:System.Windows.Controls.Button> lorsque le pointeur de la souris se trouve sur celui-ci.</span><span class="sxs-lookup"><span data-stu-id="c778f-209">The following example shows the <xref:System.Windows.VisualState> that changes the appearance of a <xref:System.Windows.Controls.Button> when the mouse pointer is over it.</span></span> <span data-ttu-id="c778f-210">Le <xref:System.Windows.Media.Animation.Storyboard> modifie la couleur de bordure du bouton en modifiant la couleur du `BorderBrush`.</span><span class="sxs-lookup"><span data-stu-id="c778f-210">The <xref:System.Windows.Media.Animation.Storyboard> changes the button's border color by changing the color of the `BorderBrush`.</span></span> <span data-ttu-id="c778f-211">Si vous vous référez au <xref:System.Windows.Controls.ControlTemplate> exemple au début de cette rubrique, vous vous souviendrez que `BorderBrush` est le nom de la <xref:System.Windows.Media.SolidColorBrush> qui est assignée au <xref:System.Windows.Controls.Border.Background%2A> du <xref:System.Windows.Controls.Border>.</span><span class="sxs-lookup"><span data-stu-id="c778f-211">If you refer to the <xref:System.Windows.Controls.ControlTemplate> example at the beginning of this topic, you will recall that `BorderBrush` is the name of the <xref:System.Windows.Media.SolidColorBrush> that is assigned to the <xref:System.Windows.Controls.Border.Background%2A> of the <xref:System.Windows.Controls.Border>.</span></span>

 [!code-xaml[VSMButtonTemplate#4](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#4)]

 <span data-ttu-id="c778f-212">Le contrôle est chargé de définir les états dans le cadre de son contrat de contrôle, lequel est décrit en détail dans [Personnalisation des autres contrôles grâce à une bonne compréhension du contrat de contrôle](#customizing_other_controls_by_understanding_the_control_contract), plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="c778f-212">The control is responsible for defining the states as part of its control contract, which is discussed in detail in [Customizing Other Controls by Understanding the Control Contract](#customizing_other_controls_by_understanding_the_control_contract) later in this topic.</span></span> <span data-ttu-id="c778f-213">Le tableau suivant répertorie les États spécifiés pour le <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="c778f-213">The following table lists the states that are specified for the <xref:System.Windows.Controls.Button>.</span></span>

|<span data-ttu-id="c778f-214">Nom VisualState</span><span class="sxs-lookup"><span data-stu-id="c778f-214">VisualState Name</span></span>|<span data-ttu-id="c778f-215">Nom VisualStateGroup</span><span class="sxs-lookup"><span data-stu-id="c778f-215">VisualStateGroup Name</span></span>|<span data-ttu-id="c778f-216">Description</span><span class="sxs-lookup"><span data-stu-id="c778f-216">Description</span></span>|
|----------------------|---------------------------|-----------------|
|<span data-ttu-id="c778f-217">Normale</span><span class="sxs-lookup"><span data-stu-id="c778f-217">Normal</span></span>|<span data-ttu-id="c778f-218">CommonStates</span><span class="sxs-lookup"><span data-stu-id="c778f-218">CommonStates</span></span>|<span data-ttu-id="c778f-219">État par défaut.</span><span class="sxs-lookup"><span data-stu-id="c778f-219">The default state.</span></span>|
|<span data-ttu-id="c778f-220">MouseOver</span><span class="sxs-lookup"><span data-stu-id="c778f-220">MouseOver</span></span>|<span data-ttu-id="c778f-221">CommonStates</span><span class="sxs-lookup"><span data-stu-id="c778f-221">CommonStates</span></span>|<span data-ttu-id="c778f-222">Le pointeur de souris est positionné sur le contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-222">The mouse pointer is positioned over the control.</span></span>|
|<span data-ttu-id="c778f-223">Appuyé</span><span class="sxs-lookup"><span data-stu-id="c778f-223">Pressed</span></span>|<span data-ttu-id="c778f-224">CommonStates</span><span class="sxs-lookup"><span data-stu-id="c778f-224">CommonStates</span></span>|<span data-ttu-id="c778f-225">Le contrôle est enfoncé.</span><span class="sxs-lookup"><span data-stu-id="c778f-225">The control is pressed.</span></span>|
|<span data-ttu-id="c778f-226">Disabled</span><span class="sxs-lookup"><span data-stu-id="c778f-226">Disabled</span></span>|<span data-ttu-id="c778f-227">CommonStates</span><span class="sxs-lookup"><span data-stu-id="c778f-227">CommonStates</span></span>|<span data-ttu-id="c778f-228">Le contrôle est désactivé.</span><span class="sxs-lookup"><span data-stu-id="c778f-228">The control is disabled.</span></span>|
|<span data-ttu-id="c778f-229">Avec focus</span><span class="sxs-lookup"><span data-stu-id="c778f-229">Focused</span></span>|<span data-ttu-id="c778f-230">FocusStates</span><span class="sxs-lookup"><span data-stu-id="c778f-230">FocusStates</span></span>|<span data-ttu-id="c778f-231">Le contrôle a le focus.</span><span class="sxs-lookup"><span data-stu-id="c778f-231">The control has focus.</span></span>|
|<span data-ttu-id="c778f-232">Sans focus</span><span class="sxs-lookup"><span data-stu-id="c778f-232">Unfocused</span></span>|<span data-ttu-id="c778f-233">FocusStates</span><span class="sxs-lookup"><span data-stu-id="c778f-233">FocusStates</span></span>|<span data-ttu-id="c778f-234">Le contrôle n’a pas le focus.</span><span class="sxs-lookup"><span data-stu-id="c778f-234">The control does not have focus.</span></span>|

 <span data-ttu-id="c778f-235">Le <xref:System.Windows.Controls.Button> définit deux groupes d’États : le groupe `CommonStates` contient les États `Normal`, `MouseOver`, `Pressed`et `Disabled`.</span><span class="sxs-lookup"><span data-stu-id="c778f-235">The <xref:System.Windows.Controls.Button> defines two state groups: the `CommonStates` group contains the `Normal`, `MouseOver`, `Pressed`, and `Disabled` states.</span></span> <span data-ttu-id="c778f-236">le groupe `FocusStates` contient les états `Focused` et `Unfocused`.</span><span class="sxs-lookup"><span data-stu-id="c778f-236">The `FocusStates` group contains the `Focused` and `Unfocused` states.</span></span> <span data-ttu-id="c778f-237">Les états d’un même groupe d’état s’excluent mutuellement.</span><span class="sxs-lookup"><span data-stu-id="c778f-237">States in the same state group are mutually exclusive.</span></span> <span data-ttu-id="c778f-238">Le contrôle est toujours dans un état par groupe.</span><span class="sxs-lookup"><span data-stu-id="c778f-238">The control is always in exactly one state per group.</span></span> <span data-ttu-id="c778f-239">Par exemple, une <xref:System.Windows.Controls.Button> peut avoir le focus même lorsque le pointeur de la souris ne se trouve pas sur celle-ci, donc un <xref:System.Windows.Controls.Button> dans l’état du `Focused` peut être dans l’État `MouseOver`, `Pressed`ou `Normal`.</span><span class="sxs-lookup"><span data-stu-id="c778f-239">For example, a <xref:System.Windows.Controls.Button> can have focus even when the mouse pointer is not over it, so a <xref:System.Windows.Controls.Button> in the `Focused` state can be in the `MouseOver`, `Pressed`, or `Normal` state.</span></span>

 <span data-ttu-id="c778f-240">Vous ajoutez des objets <xref:System.Windows.VisualState> aux objets <xref:System.Windows.VisualStateGroup>.</span><span class="sxs-lookup"><span data-stu-id="c778f-240">You add <xref:System.Windows.VisualState> objects to <xref:System.Windows.VisualStateGroup> objects.</span></span> <span data-ttu-id="c778f-241">Vous ajoutez des objets <xref:System.Windows.VisualStateGroup> à la propriété jointe <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c778f-241">You add <xref:System.Windows.VisualStateGroup> objects to the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> attached property.</span></span> <span data-ttu-id="c778f-242">L’exemple suivant définit les objets <xref:System.Windows.VisualState> pour les États `Normal`, `MouseOver`et `Pressed`, qui se trouvent tous dans le groupe `CommonStates`.</span><span class="sxs-lookup"><span data-stu-id="c778f-242">The following example defines the <xref:System.Windows.VisualState> objects for the `Normal`, `MouseOver`, and `Pressed` states, which are all in the `CommonStates` group.</span></span> <span data-ttu-id="c778f-243">Le <xref:System.Windows.VisualState.Name%2A> de chaque <xref:System.Windows.VisualState> correspond au nom dans le tableau précédent.</span><span class="sxs-lookup"><span data-stu-id="c778f-243">The <xref:System.Windows.VisualState.Name%2A> of each <xref:System.Windows.VisualState> matches the name in the preceding table.</span></span> <span data-ttu-id="c778f-244">L’état `Disabled` et les états du groupe `FocusStates` sont omis pour que l’exemple reste concis, mais ils figurent dans l’exemple complet fourni à la fin de cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="c778f-244">The `Disabled` state and the states in the `FocusStates` group are omitted to keep the example short, but they are included in the entire example at the end of this topic.</span></span>

> [!NOTE]
> <span data-ttu-id="c778f-245">Veillez à définir la propriété jointe <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> sur le <xref:System.Windows.FrameworkElement> racine de la <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="c778f-245">Be sure to set the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> attached property on the root <xref:System.Windows.FrameworkElement> of the <xref:System.Windows.Controls.ControlTemplate>.</span></span>

 [!code-xaml[VSMButtonTemplate#VisualStates](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualstates)]

 <span data-ttu-id="c778f-246">L’exemple précédent produit une sortie similaire à celle des illustrations suivantes.</span><span class="sxs-lookup"><span data-stu-id="c778f-246">The preceding example produces output that is similar to the following illustrations.</span></span>

 <span data-ttu-id="c778f-247">![Bouton avec un modèle de contrôle personnalisé.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span><span class="sxs-lookup"><span data-stu-id="c778f-247">![A button with a custom control template.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span></span>
<span data-ttu-id="c778f-248">Bouton qui utilise un modèle de contrôle personnalisé dans l’état normal</span><span class="sxs-lookup"><span data-stu-id="c778f-248">A button that uses a custom control template in the normal state</span></span>

 <span data-ttu-id="c778f-249">![Bouton avec une bordure rouge.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span><span class="sxs-lookup"><span data-stu-id="c778f-249">![A button with a red border.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span></span>
<span data-ttu-id="c778f-250">Bouton qui utilise un modèle de contrôle personnalisé dans l’état de pointage avec la souris</span><span class="sxs-lookup"><span data-stu-id="c778f-250">A button that uses a custom control template in the mouse over state</span></span>

 <span data-ttu-id="c778f-251">![Bordure transparente sur un bouton enfoncé.](./media/ndp-buttonpressed.png "NDP_ButtonPressed")</span><span class="sxs-lookup"><span data-stu-id="c778f-251">![The border is transparent on a pressed button.](./media/ndp-buttonpressed.png "NDP_ButtonPressed")</span></span>
<span data-ttu-id="c778f-252">Bouton qui utilise un modèle de contrôle personnalisé dans l’état enfoncé</span><span class="sxs-lookup"><span data-stu-id="c778f-252">A button that uses a custom control template in the pressed state</span></span>

 <span data-ttu-id="c778f-253">Pour trouver les états visuels pour les contrôles inclus avec [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], consultez [Styles et modèles Control](control-styles-and-templates.md).</span><span class="sxs-lookup"><span data-stu-id="c778f-253">To find the visual states for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](control-styles-and-templates.md).</span></span>

<a name="specifying_the_behavior_of_a_control_when_it_transitions_between_states"></a>
## <a name="specifying-the-behavior-of-a-control-when-it-transitions-between-states"></a><span data-ttu-id="c778f-254">Spécification du comportement d’un contrôle durant les transitions entre états</span><span class="sxs-lookup"><span data-stu-id="c778f-254">Specifying the Behavior of a Control When It Transitions Between States</span></span>
 <span data-ttu-id="c778f-255">Dans l’exemple précédent, l’apparence du bouton change également quand l’utilisateur clique dessus, mais à moins que le bouton ne soit enfoncé pendant une seconde complète, aucun effet n’est visible pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c778f-255">In the preceding example, the appearance of the button also changes when the user clicks it, but unless the button is pressed for a full second, the user does not see the effect.</span></span> <span data-ttu-id="c778f-256">Par défaut, une seconde est nécessaire au déclenchement de l’animation.</span><span class="sxs-lookup"><span data-stu-id="c778f-256">By default, the animation takes one second to occur.</span></span> <span data-ttu-id="c778f-257">Étant donné que les utilisateurs sont susceptibles de cliquer et de relâcher un bouton en moins de temps, la rétroaction visuelle n’est pas efficace si vous laissez la <xref:System.Windows.Controls.ControlTemplate> dans son état par défaut.</span><span class="sxs-lookup"><span data-stu-id="c778f-257">Because users are likely to click and release a button in much less time, the visual feedback will not be effective if you leave the <xref:System.Windows.Controls.ControlTemplate> in its default state.</span></span>

 <span data-ttu-id="c778f-258">Vous pouvez spécifier la durée nécessaire à l’animation pour faire passer sans heurt un contrôle d’un État à un autre en ajoutant <xref:System.Windows.VisualTransition> objets au <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="c778f-258">You can specify the amount of time that it takes an animation to occur to smoothly transition a control from one state to another by adding <xref:System.Windows.VisualTransition> objects to the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="c778f-259">Lorsque vous créez un <xref:System.Windows.VisualTransition>, vous spécifiez un ou plusieurs des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="c778f-259">When you create a <xref:System.Windows.VisualTransition>, you specify one or more of the following:</span></span>

- <span data-ttu-id="c778f-260">Temps nécessaire à une transition entre des états</span><span class="sxs-lookup"><span data-stu-id="c778f-260">The time it takes for a transition between states to occur.</span></span>

- <span data-ttu-id="c778f-261">Changements supplémentaires dans l’apparence du contrôle durant la transition</span><span class="sxs-lookup"><span data-stu-id="c778f-261">Additional changes in the control's appearance that occur at the time of the transition.</span></span>

- <span data-ttu-id="c778f-262">À quel état la <xref:System.Windows.VisualTransition> est appliquée.</span><span class="sxs-lookup"><span data-stu-id="c778f-262">Which states the <xref:System.Windows.VisualTransition> is applied to.</span></span>

### <a name="specifying-the-duration-of-a-transition"></a><span data-ttu-id="c778f-263">Spécification de la durée d’une transition</span><span class="sxs-lookup"><span data-stu-id="c778f-263">Specifying the Duration of a Transition</span></span>
 <span data-ttu-id="c778f-264">Vous pouvez spécifier la durée d’une transition en définissant la propriété <xref:System.Windows.VisualTransition.GeneratedDuration%2A>.</span><span class="sxs-lookup"><span data-stu-id="c778f-264">You can specify how long a transition takes by setting the <xref:System.Windows.VisualTransition.GeneratedDuration%2A> property.</span></span> <span data-ttu-id="c778f-265">L’exemple précédent a une <xref:System.Windows.VisualState> qui spécifie que la bordure du bouton devient transparente lorsque le bouton est enfoncé, mais que l’animation prend trop de temps pour être perceptible si le bouton est rapidement enfoncé et relâché.</span><span class="sxs-lookup"><span data-stu-id="c778f-265">The preceding example has a <xref:System.Windows.VisualState> that specifies that the button's border becomes transparent when the button is pressed, but the animation takes too long to be noticeable if the button is quickly pressed and released.</span></span> <span data-ttu-id="c778f-266">Vous pouvez utiliser une <xref:System.Windows.VisualTransition> pour spécifier la durée pendant laquelle le contrôle passe à l’état enfoncé.</span><span class="sxs-lookup"><span data-stu-id="c778f-266">You can use a <xref:System.Windows.VisualTransition> to specify the amount of time it takes the control to transition into the pressed state.</span></span> <span data-ttu-id="c778f-267">L’exemple suivant spécifie que le contrôle passe à l’état Pressed après un centième de seconde.</span><span class="sxs-lookup"><span data-stu-id="c778f-267">The following example specifies that the control takes one hundredth of a second to go into the pressed state.</span></span>

 [!code-xaml[VSMButtonTemplate#PressedTransition](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#pressedtransition)]

### <a name="specifying-changes-to-the-controls-appearance-during-a-transition"></a><span data-ttu-id="c778f-268">Spécification de changements de l’apparence du contrôle durant une transition</span><span class="sxs-lookup"><span data-stu-id="c778f-268">Specifying Changes to the Control's Appearance During a Transition</span></span>
 <span data-ttu-id="c778f-269">Le <xref:System.Windows.VisualTransition> contient une <xref:System.Windows.Media.Animation.Storyboard> qui commence lorsque le contrôle passe d’un État à un autre.</span><span class="sxs-lookup"><span data-stu-id="c778f-269">The <xref:System.Windows.VisualTransition> contains a <xref:System.Windows.Media.Animation.Storyboard> that begins when the control transitions between states.</span></span> <span data-ttu-id="c778f-270">Par exemple, vous pouvez spécifier qu’une animation particulière a lieu quand le contrôle passe de l’état `MouseOver` à l’état `Normal`.</span><span class="sxs-lookup"><span data-stu-id="c778f-270">For example, you can specify that a certain animation occurs when the control transitions from the `MouseOver` state to the `Normal` State.</span></span> <span data-ttu-id="c778f-271">L’exemple suivant crée une <xref:System.Windows.VisualTransition> qui spécifie que lorsque l’utilisateur éloigne le pointeur de la souris du bouton, la bordure du bouton passe au bleu, puis au jaune, puis au noir en 1,5 secondes.</span><span class="sxs-lookup"><span data-stu-id="c778f-271">The following example creates a <xref:System.Windows.VisualTransition> that specifies that when the user moves the mouse pointer away from the button, the button's border changes to blue, then to yellow, then to black in 1.5 seconds.</span></span>

 [!code-xaml[VSMButtonTemplate#8](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#8)]

### <a name="specifying-when-a-visualtransition-is-applied"></a><span data-ttu-id="c778f-272">Spécification du moment où VisualTransition est appliqué</span><span class="sxs-lookup"><span data-stu-id="c778f-272">Specifying When a VisualTransition Is Applied</span></span>
 <span data-ttu-id="c778f-273">Un <xref:System.Windows.VisualTransition> peut être limité pour ne s’appliquer qu’à certains États, ou il peut être appliqué chaque fois que le contrôle passe d’un État à un autre.</span><span class="sxs-lookup"><span data-stu-id="c778f-273">A <xref:System.Windows.VisualTransition> can be restricted to apply to only certain states, or it can be applied any time the control transitions between states.</span></span> <span data-ttu-id="c778f-274">Dans l’exemple précédent, le <xref:System.Windows.VisualTransition> est appliqué lorsque le contrôle passe de l’État `MouseOver` à l’État `Normal` ; dans l’exemple qui précède, le <xref:System.Windows.VisualTransition> est appliqué lorsque le contrôle passe à l’État `Pressed`.</span><span class="sxs-lookup"><span data-stu-id="c778f-274">In the preceding example, the <xref:System.Windows.VisualTransition> is applied when the control goes from the `MouseOver` state to the `Normal` state; in the example before that, the <xref:System.Windows.VisualTransition> is applied when the control goes into the `Pressed` state.</span></span> <span data-ttu-id="c778f-275">Vous limitez le moment auquel une <xref:System.Windows.VisualTransition> est appliquée en définissant les propriétés <xref:System.Windows.VisualTransition.To%2A> et <xref:System.Windows.VisualTransition.From%2A>.</span><span class="sxs-lookup"><span data-stu-id="c778f-275">You restrict when a <xref:System.Windows.VisualTransition> is applied by setting the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties.</span></span> <span data-ttu-id="c778f-276">Le tableau suivant décrit les niveaux de restriction, du plus restrictif au moins restrictif.</span><span class="sxs-lookup"><span data-stu-id="c778f-276">The following table describes the levels of restriction from most restrictive to least restrictive.</span></span>

|<span data-ttu-id="c778f-277">Type de restriction</span><span class="sxs-lookup"><span data-stu-id="c778f-277">Type of restriction</span></span>|<span data-ttu-id="c778f-278">Valeur de From</span><span class="sxs-lookup"><span data-stu-id="c778f-278">Value of From</span></span>|<span data-ttu-id="c778f-279">Valeur de To</span><span class="sxs-lookup"><span data-stu-id="c778f-279">Value of To</span></span>|
|-------------------------|-------------------|-----------------|
|<span data-ttu-id="c778f-280">D’un état spécifié à un autre état spécifié</span><span class="sxs-lookup"><span data-stu-id="c778f-280">From a specified state to another specified state</span></span>|<span data-ttu-id="c778f-281">Nom d’un <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="c778f-281">The name of a <xref:System.Windows.VisualState></span></span>|<span data-ttu-id="c778f-282">Nom d’un <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="c778f-282">The name of a <xref:System.Windows.VisualState></span></span>|
|<span data-ttu-id="c778f-283">De n’importe quel état à un état spécifié</span><span class="sxs-lookup"><span data-stu-id="c778f-283">From any state to a specified state</span></span>|<span data-ttu-id="c778f-284">Non défini</span><span class="sxs-lookup"><span data-stu-id="c778f-284">Not set</span></span>|<span data-ttu-id="c778f-285">Nom d’un <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="c778f-285">The name of a <xref:System.Windows.VisualState></span></span>|
|<span data-ttu-id="c778f-286">D’un état spécifié à n’importe quel état</span><span class="sxs-lookup"><span data-stu-id="c778f-286">From a specified state to any state</span></span>|<span data-ttu-id="c778f-287">Nom d’un <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="c778f-287">The name of a <xref:System.Windows.VisualState></span></span>|<span data-ttu-id="c778f-288">Non défini</span><span class="sxs-lookup"><span data-stu-id="c778f-288">Not set</span></span>|
|<span data-ttu-id="c778f-289">De n’importe quel état à n’importe quel autre état</span><span class="sxs-lookup"><span data-stu-id="c778f-289">From any state to any other state</span></span>|<span data-ttu-id="c778f-290">Non défini</span><span class="sxs-lookup"><span data-stu-id="c778f-290">Not set</span></span>|<span data-ttu-id="c778f-291">Non défini</span><span class="sxs-lookup"><span data-stu-id="c778f-291">Not set</span></span>|

 <span data-ttu-id="c778f-292">Vous pouvez avoir plusieurs objets <xref:System.Windows.VisualTransition> dans un <xref:System.Windows.VisualStateGroup> qui font référence au même État, mais ils seront utilisés dans l’ordre indiqué par le tableau précédent.</span><span class="sxs-lookup"><span data-stu-id="c778f-292">You can have multiple <xref:System.Windows.VisualTransition> objects in a <xref:System.Windows.VisualStateGroup> that refer to the same state, but they will be used in the order that the previous table specifies.</span></span> <span data-ttu-id="c778f-293">Dans l’exemple suivant, il existe deux objets <xref:System.Windows.VisualTransition>.</span><span class="sxs-lookup"><span data-stu-id="c778f-293">In the following example, there are two <xref:System.Windows.VisualTransition> objects.</span></span> <span data-ttu-id="c778f-294">Lorsque le contrôle passe de l’État `Pressed` à l’État `MouseOver`, le <xref:System.Windows.VisualTransition> qui a à la fois le <xref:System.Windows.VisualTransition.From%2A> et le jeu de <xref:System.Windows.VisualTransition.To%2A> est utilisé.</span><span class="sxs-lookup"><span data-stu-id="c778f-294">When the control transitions from the `Pressed` state to the `MouseOver` state, the <xref:System.Windows.VisualTransition> that has both <xref:System.Windows.VisualTransition.From%2A> and <xref:System.Windows.VisualTransition.To%2A> set is used.</span></span> <span data-ttu-id="c778f-295">Quand le contrôle passe d’un état autre que `Pressed` à l’état `MouseOver`, l’autre état est utilisé.</span><span class="sxs-lookup"><span data-stu-id="c778f-295">When the control transitions from a state that is not `Pressed` to the `MouseOver` state, the other state is used.</span></span>

 [!code-xaml[VSMButtonTemplate#7](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#7)]

 <span data-ttu-id="c778f-296">La <xref:System.Windows.VisualStateGroup> a une propriété <xref:System.Windows.VisualStateGroup.Transitions%2A> qui contient les objets <xref:System.Windows.VisualTransition> qui s’appliquent aux objets <xref:System.Windows.VisualState> dans le <xref:System.Windows.VisualStateGroup>.</span><span class="sxs-lookup"><span data-stu-id="c778f-296">The <xref:System.Windows.VisualStateGroup> has a <xref:System.Windows.VisualStateGroup.Transitions%2A> property that contains the <xref:System.Windows.VisualTransition> objects that apply to the <xref:System.Windows.VisualState> objects in the <xref:System.Windows.VisualStateGroup>.</span></span> <span data-ttu-id="c778f-297">En tant que <xref:System.Windows.Controls.ControlTemplate> auteur, vous êtes libre d’inclure les <xref:System.Windows.VisualTransition> souhaitées.</span><span class="sxs-lookup"><span data-stu-id="c778f-297">As the <xref:System.Windows.Controls.ControlTemplate> author, you are free to include any <xref:System.Windows.VisualTransition> you want.</span></span> <span data-ttu-id="c778f-298">Toutefois, si les propriétés <xref:System.Windows.VisualTransition.To%2A> et <xref:System.Windows.VisualTransition.From%2A> sont définies sur des noms d’État qui ne sont pas dans le <xref:System.Windows.VisualStateGroup>, la <xref:System.Windows.VisualTransition> est ignorée.</span><span class="sxs-lookup"><span data-stu-id="c778f-298">However, if the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties are set to state names that are not in the <xref:System.Windows.VisualStateGroup>, the <xref:System.Windows.VisualTransition> is ignored.</span></span>

 <span data-ttu-id="c778f-299">L’exemple suivant montre les <xref:System.Windows.VisualStateGroup> pour le `CommonStates`.</span><span class="sxs-lookup"><span data-stu-id="c778f-299">The following example shows the <xref:System.Windows.VisualStateGroup> for the `CommonStates`.</span></span> <span data-ttu-id="c778f-300">L’exemple définit une <xref:System.Windows.VisualTransition> pour chacune des transitions suivantes du bouton.</span><span class="sxs-lookup"><span data-stu-id="c778f-300">The example defines a <xref:System.Windows.VisualTransition> for each of the button's following transitions.</span></span>

- <span data-ttu-id="c778f-301">À l’état `Pressed`</span><span class="sxs-lookup"><span data-stu-id="c778f-301">To the `Pressed` state.</span></span>

- <span data-ttu-id="c778f-302">À l’état `MouseOver`</span><span class="sxs-lookup"><span data-stu-id="c778f-302">To the `MouseOver` state.</span></span>

- <span data-ttu-id="c778f-303">De l’état `Pressed` à l’état `MouseOver`</span><span class="sxs-lookup"><span data-stu-id="c778f-303">From the `Pressed` state to the `MouseOver` state.</span></span>

- <span data-ttu-id="c778f-304">De l’état `MouseOver` à l’état `Normal`</span><span class="sxs-lookup"><span data-stu-id="c778f-304">From the `MouseOver` state to the `Normal` state.</span></span>

 [!code-xaml[VSMButtonTemplate#VisualTransitions](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualtransitions)]

<a name="customizing_other_controls_by_understanding_the_control_contract"></a>
## <a name="customizing-other-controls-by-understanding-the-control-contract"></a><span data-ttu-id="c778f-305">Personnalisation des autres contrôles grâce à une bonne compréhension du contrat de contrôle</span><span class="sxs-lookup"><span data-stu-id="c778f-305">Customizing Other Controls by Understanding the Control Contract</span></span>
 <span data-ttu-id="c778f-306">Un contrôle qui utilise une <xref:System.Windows.Controls.ControlTemplate> pour spécifier sa structure visuelle (à l’aide d’objets <xref:System.Windows.FrameworkElement>) et le comportement visuel (à l’aide d’objets <xref:System.Windows.VisualState>) utilise le modèle de contrôle des parties.</span><span class="sxs-lookup"><span data-stu-id="c778f-306">A control that uses a <xref:System.Windows.Controls.ControlTemplate> to specify its visual structure (by using <xref:System.Windows.FrameworkElement> objects) and visual behavior (by using <xref:System.Windows.VisualState> objects) uses the parts control model.</span></span> <span data-ttu-id="c778f-307">Bon nombre des contrôles inclus avec [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 4 utilisent ce modèle.</span><span class="sxs-lookup"><span data-stu-id="c778f-307">Many of the controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 4 use this model.</span></span> <span data-ttu-id="c778f-308">Les parties qu’un <xref:System.Windows.Controls.ControlTemplate> auteur doit connaître sont communiquées par le biais du contrat de contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-308">The parts that a <xref:System.Windows.Controls.ControlTemplate> author needs to be aware of are communicated through the control contract.</span></span> <span data-ttu-id="c778f-309">Quand vous connaissez les composants d’un contrat de contrôle, vous pouvez personnaliser l’apparence de tout contrôle qui utilise le modèle de contrôle des composants.</span><span class="sxs-lookup"><span data-stu-id="c778f-309">When you understand the parts of a control contract, you can customize the appearance of any control that uses the parts control model.</span></span>

 <span data-ttu-id="c778f-310">Un contrat de contrôle comporte trois éléments :</span><span class="sxs-lookup"><span data-stu-id="c778f-310">A control contract has three elements:</span></span>

- <span data-ttu-id="c778f-311">les éléments visuels utilisés par la logique du contrôle ;</span><span class="sxs-lookup"><span data-stu-id="c778f-311">The visual elements that the control's logic uses.</span></span>

- <span data-ttu-id="c778f-312">les états du contrôle et le groupe auquel appartient chaque état ;</span><span class="sxs-lookup"><span data-stu-id="c778f-312">The states of the control and the group each state belongs to.</span></span>

- <span data-ttu-id="c778f-313">les propriétés publiques qui affectent visuellement le contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-313">The public properties that visually affect the control.</span></span>

### <a name="visual-elements-in-the-control-contract"></a><span data-ttu-id="c778f-314">Éléments visuels du contrat de contrôle</span><span class="sxs-lookup"><span data-stu-id="c778f-314">Visual Elements in the Control Contract</span></span>
 <span data-ttu-id="c778f-315">Parfois, la logique d’un contrôle interagit avec un <xref:System.Windows.FrameworkElement> qui se trouve dans le <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="c778f-315">Sometimes a control's logic interacts with a <xref:System.Windows.FrameworkElement> that is in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="c778f-316">Par exemple, le contrôle peut gérer un événement de l’un de ses éléments.</span><span class="sxs-lookup"><span data-stu-id="c778f-316">For example, the control might handle an event of one of its elements.</span></span> <span data-ttu-id="c778f-317">Lorsqu’un contrôle s’attend à trouver un <xref:System.Windows.FrameworkElement> particulier dans le <xref:System.Windows.Controls.ControlTemplate>, il doit transmettre ces informations à l’auteur de la <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="c778f-317">When a control expects to find a particular <xref:System.Windows.FrameworkElement> in the <xref:System.Windows.Controls.ControlTemplate>, it must convey that information to the <xref:System.Windows.Controls.ControlTemplate> author.</span></span> <span data-ttu-id="c778f-318">Le contrôle utilise la <xref:System.Windows.TemplatePartAttribute> pour communiquer le type d’élément attendu et le nom de l’élément.</span><span class="sxs-lookup"><span data-stu-id="c778f-318">The control uses the <xref:System.Windows.TemplatePartAttribute> to convey the type of element that is expected, and what the name of the element should be.</span></span> <span data-ttu-id="c778f-319">Le <xref:System.Windows.Controls.Button> n’a pas de parties <xref:System.Windows.FrameworkElement> dans son contrat de contrôle, mais d’autres contrôles, tels que le <xref:System.Windows.Controls.ComboBox>, font.</span><span class="sxs-lookup"><span data-stu-id="c778f-319">The <xref:System.Windows.Controls.Button> does not have <xref:System.Windows.FrameworkElement> parts in its control contract, but other controls, such as the <xref:System.Windows.Controls.ComboBox>, do.</span></span>

 <span data-ttu-id="c778f-320">L’exemple suivant montre les objets <xref:System.Windows.TemplatePartAttribute> spécifiés sur la classe <xref:System.Windows.Controls.ComboBox>.</span><span class="sxs-lookup"><span data-stu-id="c778f-320">The following example shows the <xref:System.Windows.TemplatePartAttribute> objects that are specified on the <xref:System.Windows.Controls.ComboBox> class.</span></span> <span data-ttu-id="c778f-321">La logique de <xref:System.Windows.Controls.ComboBox> s’attend à trouver un <xref:System.Windows.Controls.TextBox> nommé `PART_EditableTextBox` et un <xref:System.Windows.Controls.Primitives.Popup> nommé `PART_Popup` dans son <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="c778f-321">The logic of <xref:System.Windows.Controls.ComboBox> expects to find a <xref:System.Windows.Controls.TextBox> named `PART_EditableTextBox` and a <xref:System.Windows.Controls.Primitives.Popup> named `PART_Popup` in its <xref:System.Windows.Controls.ControlTemplate>.</span></span>

 [!code-csharp[VSMButtonTemplate#ComboBoxContract](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#comboboxcontract)]
 [!code-vb[VSMButtonTemplate#ComboBoxContract](~/samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#comboboxcontract)]

 <span data-ttu-id="c778f-322">L’exemple suivant montre une <xref:System.Windows.Controls.ControlTemplate> simplifiée pour le <xref:System.Windows.Controls.ComboBox> qui comprend les éléments spécifiés par les objets <xref:System.Windows.TemplatePartAttribute> sur la classe <xref:System.Windows.Controls.ComboBox>.</span><span class="sxs-lookup"><span data-stu-id="c778f-322">The following example shows a simplified <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.ComboBox> that includes the elements that are specified by the <xref:System.Windows.TemplatePartAttribute> objects on the <xref:System.Windows.Controls.ComboBox> class.</span></span>

 [!code-xaml[VSMButtonTemplate#ComboBoxTemplate](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/window1.xaml#comboboxtemplate)]

### <a name="states-in-the-control-contract"></a><span data-ttu-id="c778f-323">États du contrat de contrôle</span><span class="sxs-lookup"><span data-stu-id="c778f-323">States in the Control Contract</span></span>
 <span data-ttu-id="c778f-324">Les états d’un contrôle font également partie du contrat de contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-324">The states of a control are also a part of the control contract.</span></span> <span data-ttu-id="c778f-325">L’exemple de création d’une <xref:System.Windows.Controls.ControlTemplate> pour un <xref:System.Windows.Controls.Button> montre comment spécifier l’apparence d’un <xref:System.Windows.Controls.Button> en fonction de ses États.</span><span class="sxs-lookup"><span data-stu-id="c778f-325">The example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button> shows how to specify the appearance of a <xref:System.Windows.Controls.Button> depending on its states.</span></span> <span data-ttu-id="c778f-326">Vous créez un <xref:System.Windows.VisualState> pour chaque état spécifié et placez tous les objets <xref:System.Windows.VisualState> qui partagent un <xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A> dans une <xref:System.Windows.VisualStateGroup>, comme décrit dans [modification de l’apparence d’un contrôle en fonction de son état](#changing_the_appearance_of_a_control_depending_on_its_state) précédemment dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="c778f-326">You create a <xref:System.Windows.VisualState> for each specified state and put all <xref:System.Windows.VisualState> objects that share a <xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A> in a <xref:System.Windows.VisualStateGroup>, as described in [Changing the Appearance of a Control Depending on Its State](#changing_the_appearance_of_a_control_depending_on_its_state) earlier in this topic.</span></span> <span data-ttu-id="c778f-327">Les contrôles tiers doivent spécifier des États à l’aide de l' <xref:System.Windows.TemplateVisualStateAttribute>, qui permet aux outils du concepteur, tels que les [Concepteur XAML](/visualstudio/xaml-tools/designing-xaml-in-visual-studio) dans Visual Studio et Blend pour Visual Studio, d’exposer les États du contrôle pour la création de modèles de contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-327">Third-party controls should specify states by using the <xref:System.Windows.TemplateVisualStateAttribute>, which enables designer tools, such as the [XAML Designer](/visualstudio/xaml-tools/designing-xaml-in-visual-studio) in Visual Studio and Blend for Visual Studio, to expose the control's states for authoring control templates.</span></span>

 <span data-ttu-id="c778f-328">Pour trouver le contrat de contrôle pour les contrôles inclus avec [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], consultez [Styles et modèles Control](control-styles-and-templates.md).</span><span class="sxs-lookup"><span data-stu-id="c778f-328">To find the control contract for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](control-styles-and-templates.md).</span></span>

### <a name="properties-in-the-control-contract"></a><span data-ttu-id="c778f-329">Propriétés du contrat de contrôle</span><span class="sxs-lookup"><span data-stu-id="c778f-329">Properties in the Control Contract</span></span>
 <span data-ttu-id="c778f-330">Les propriétés publiques qui affectent visuellement le contrôle sont également incluses dans le contrat de contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-330">The public properties that visually affect the control are also included in the control contract.</span></span> <span data-ttu-id="c778f-331">Vous pouvez définir ces propriétés pour modifier l’apparence du contrôle sans créer de <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="c778f-331">You can set these properties to change the appearance of the control without creating a new <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="c778f-332">Vous pouvez également utiliser l’extension de balisage [TemplateBinding](../advanced/templatebinding-markup-extension.md) pour lier les propriétés des éléments qui se trouvent dans le <xref:System.Windows.Controls.ControlTemplate> aux propriétés publiques définies par l' <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="c778f-332">You can also use the [TemplateBinding](../advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the <xref:System.Windows.Controls.Button>.</span></span>

 <span data-ttu-id="c778f-333">L’exemple suivant illustre le contrat de contrôle pour le bouton.</span><span class="sxs-lookup"><span data-stu-id="c778f-333">The following example shows the control contract for the button.</span></span>

 [!code-csharp[VSMButtonTemplate#ButtonContract](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#buttoncontract)]
 [!code-vb[VSMButtonTemplate#ButtonContract](~/samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#buttoncontract)]

 <span data-ttu-id="c778f-334">Lors de la création d’un <xref:System.Windows.Controls.ControlTemplate>, il est souvent plus facile de commencer avec un <xref:System.Windows.Controls.ControlTemplate> existant et d’y apporter des modifications.</span><span class="sxs-lookup"><span data-stu-id="c778f-334">When creating a <xref:System.Windows.Controls.ControlTemplate>, it is often easiest to begin with an existing <xref:System.Windows.Controls.ControlTemplate> and make changes to it.</span></span> <span data-ttu-id="c778f-335">Pour modifier un <xref:System.Windows.Controls.ControlTemplate>existant, vous pouvez effectuer l’une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="c778f-335">You can do one of the following to change an existing <xref:System.Windows.Controls.ControlTemplate>:</span></span>

- <span data-ttu-id="c778f-336">Utilisez un concepteur, tel que Blend pour Visual Studio, qui fournit une interface utilisateur graphique pour la création de modèles de contrôle.</span><span class="sxs-lookup"><span data-stu-id="c778f-336">Use a designer, such as Blend for Visual Studio, that provides a graphical user interface for creating control templates.</span></span> <span data-ttu-id="c778f-337">Pour plus d’informations, consultez [Définition d’un style pour un contrôle prenant en charge les modèles](https://go.microsoft.com/fwlink/?LinkId=161153).</span><span class="sxs-lookup"><span data-stu-id="c778f-337">For more information, see [Styling a control that supports templates](https://go.microsoft.com/fwlink/?LinkId=161153).</span></span>

- <span data-ttu-id="c778f-338">Récupérez le <xref:System.Windows.Controls.ControlTemplate> par défaut et modifiez-le.</span><span class="sxs-lookup"><span data-stu-id="c778f-338">Get the default <xref:System.Windows.Controls.ControlTemplate> and edit it.</span></span> <span data-ttu-id="c778f-339">Pour trouver les modèles de contrôle par défaut compris dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], consultez [Thèmes WPF par défaut](https://go.microsoft.com/fwlink/?LinkID=158252).</span><span class="sxs-lookup"><span data-stu-id="c778f-339">To find the default control templates that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Default WPF Themes](https://go.microsoft.com/fwlink/?LinkID=158252).</span></span>

<a name="complete_example"></a>
## <a name="complete-example"></a><span data-ttu-id="c778f-340">Exemple complet</span><span class="sxs-lookup"><span data-stu-id="c778f-340">Complete Example</span></span>
 <span data-ttu-id="c778f-341">L’exemple suivant montre le <xref:System.Windows.Controls.Button>complet<xref:System.Windows.Controls.ControlTemplate> abordé dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="c778f-341">The following example shows the complete <xref:System.Windows.Controls.Button><xref:System.Windows.Controls.ControlTemplate> that is discussed in this topic.</span></span>

 [!code-xaml[VSMButtonTemplate#3](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#3)]

## <a name="see-also"></a><span data-ttu-id="c778f-342">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c778f-342">See also</span></span>

- [<span data-ttu-id="c778f-343">Application d’un style et création de modèles</span><span class="sxs-lookup"><span data-stu-id="c778f-343">Styling and Templating</span></span>](../../../desktop-wpf/fundamentals/styles-templates-overview.md)
