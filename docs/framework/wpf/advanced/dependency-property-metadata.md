---
title: Métadonnées de propriété de dépendance
ms.date: 03/30/2017
helpviewer_keywords:
- APIs [WPF], metadata
- dependency properties [WPF], metadata
- metadata [WPF], for dependency properties
- overriding metadata [WPF]
ms.assetid: d01ed009-b722-41bf-b82f-fe1a8cdc50dd
ms.openlocfilehash: 3d84510fce69e81929cbe9b6088e12aaf3409769
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79186368"
---
# <a name="dependency-property-metadata"></a><span data-ttu-id="642ba-102">Métadonnées de propriété de dépendance</span><span class="sxs-lookup"><span data-stu-id="642ba-102">Dependency Property Metadata</span></span>
<span data-ttu-id="642ba-103">Le [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] système de propriété comprend un système de déclaration des métadonnées qui va au-delà de ce qui peut être rapporté au sujet d’une propriété par la réflexion ou les caractéristiques générales de l’heure courante de langue commune (CLR).</span><span class="sxs-lookup"><span data-stu-id="642ba-103">The [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system includes a metadata reporting system that goes beyond what can be reported about a property through reflection or general common language runtime (CLR) characteristics.</span></span> <span data-ttu-id="642ba-104">Les métadonnées d’une propriété de dépendance peuvent également être affectées de manière unique par la classe qui définit une propriété de dépendance, peuvent être changées quand la propriété de dépendance est ajoutée à une autre classe, et peuvent être substituées de manière spécifique par toutes les classes dérivées qui héritent de la propriété de dépendance de la classe de base de définition.</span><span class="sxs-lookup"><span data-stu-id="642ba-104">Metadata for a dependency property can also be assigned uniquely by the class that defines a dependency property, can be changed when the dependency property is added to a different class, and can be specifically overridden by all derived classes that inherit the dependency property from the defining base class.</span></span>  

<a name="prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="642ba-105">Conditions préalables requises</span><span class="sxs-lookup"><span data-stu-id="642ba-105">Prerequisites</span></span>  
 <span data-ttu-id="642ba-106">Cette rubrique part du principe que vous savez ce que sont les propriétés de dépendance du point de vue d’un consommateur de propriétés de dépendance existantes sur les classes [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] et que vous avez lu [Vue d’ensemble des propriétés de dépendance](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="642ba-106">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md).</span></span> <span data-ttu-id="642ba-107">Pour pouvoir suivre les exemples de cette rubrique, vous devez également comprendre [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] et savoir comment écrire des applications [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="642ba-107">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>  
  
<a name="dp_metadata_contents"></a>
## <a name="how-dependency-property-metadata-is-used"></a><span data-ttu-id="642ba-108">Utilisation des métadonnées de propriété de dépendance</span><span class="sxs-lookup"><span data-stu-id="642ba-108">How Dependency Property Metadata is Used</span></span>  
 <span data-ttu-id="642ba-109">Les métadonnées de propriété de dépendance existent en tant qu’objet qui peut être interrogé pour examiner les caractéristiques d’une propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="642ba-109">Dependency property metadata exists as an object that can be queried to examine the characteristics of a dependency property.</span></span> <span data-ttu-id="642ba-110">Ces métadonnées sont également souvent sollicitées par le système de propriétés quand il traite des propriétés de dépendance.</span><span class="sxs-lookup"><span data-stu-id="642ba-110">This metadata is also accessed frequently by the property system as it processes any given dependency property.</span></span> <span data-ttu-id="642ba-111">L’objet de métadonnées pour une propriété de dépendance peut contenir les types d’informations suivants :</span><span class="sxs-lookup"><span data-stu-id="642ba-111">The metadata object for a dependency property can contain the following types of information:</span></span>  
  
- <span data-ttu-id="642ba-112">Valeur par défaut pour la propriété de dépendance, si aucune autre valeur ne peut être déterminée pour la propriété de dépendance par la valeur locale, le modèle, l’héritage, etc. Pour une discussion approfondie de la façon dont les valeurs par défaut participent à la préséance utilisée par le système immobilier lors de l’attribution de valeurs pour les propriétés de dépendance, voir [Dépendance Valeur de la propriété Precedence](dependency-property-value-precedence.md).</span><span class="sxs-lookup"><span data-stu-id="642ba-112">Default value for the dependency property, if no other value can be determined for the dependency property by local value, style, inheritance, etc. For a thorough discussion of how default values participate in the precedence used by the property system when assigning values for dependency properties, see [Dependency Property Value Precedence](dependency-property-value-precedence.md).</span></span>  
  
- <span data-ttu-id="642ba-113">Références aux implémentations de rappels qui affectent les comportements de forçage ou de notification de modification en fonction du type de propriétaire.</span><span class="sxs-lookup"><span data-stu-id="642ba-113">References to callback implementations that affect coercion or change-notification behaviors on a per-owner-type basis.</span></span> <span data-ttu-id="642ba-114">Notez que ces rappels sont souvent définis avec un niveau d’accès non public. Ainsi, il n’est généralement pas possible d’obtenir les références réelles à partir des métadonnées, sauf si les références sont dans votre étendue d’accès autorisée.</span><span class="sxs-lookup"><span data-stu-id="642ba-114">Note that these callbacks are often defined with a nonpublic access level, so obtaining the actual references from metadata is generally not possible unless the references are within your permitted access scope.</span></span> <span data-ttu-id="642ba-115">Pour plus d’informations sur les rappels de propriété de dépendance, consultez [Validation et rappels de propriétés de dépendance](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="642ba-115">For more information on dependency property callbacks, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span>  
  
- <span data-ttu-id="642ba-116">Si la propriété de dépendance en question est considérée comme une propriété de niveau framework WPF, les métadonnées peuvent contenir des caractéristiques de propriété de dépendance de niveau framework WPF qui fournissent des informations et indiquent l’état de services tels que le moteur de disposition de niveau framework WPF et la logique d’héritage de propriété.</span><span class="sxs-lookup"><span data-stu-id="642ba-116">If the dependency property in question is considered to be a WPF framework-level property, the metadata might contain WPF framework-level dependency property characteristics, which report information and state for services such as the WPF framework-level layout engine and property inheritance logic.</span></span> <span data-ttu-id="642ba-117">Pour plus d’informations sur cet aspect des métadonnées de propriété de dépendance, consultez [Métadonnées de propriété de framework](framework-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="642ba-117">For more information on this aspect of dependency property metadata, see [Framework Property Metadata](framework-property-metadata.md).</span></span>  
  
<a name="APIs"></a>
## <a name="metadata-apis"></a><span data-ttu-id="642ba-118">API de métadonnées</span><span class="sxs-lookup"><span data-stu-id="642ba-118">Metadata APIs</span></span>  
 <span data-ttu-id="642ba-119">Le type qui rapporte la plupart des informations sur <xref:System.Windows.PropertyMetadata> les métadonnées utilisées par le système de propriété est la classe.</span><span class="sxs-lookup"><span data-stu-id="642ba-119">The type that reports most of the metadata information used by the property system is the <xref:System.Windows.PropertyMetadata> class.</span></span> <span data-ttu-id="642ba-120">Des instances de métadonnées sont éventuellement spécifiées quand les propriétés de dépendance sont inscrites auprès du système de propriétés, et peuvent également être spécifiées pour d’autres types qui s’ajoutent comme propriétaires ou remplacent les métadonnées dont ils héritent à partir de la définition de propriété de dépendance de la classe de base.</span><span class="sxs-lookup"><span data-stu-id="642ba-120">Metadata instances are optionally specified when dependency properties are registered with the property system, and can be specified again for additional types that either add themselves as owners or override metadata they inherit from the base class dependency property definition.</span></span> <span data-ttu-id="642ba-121">(Pour les cas où l’enregistrement d’une propriété ne précise pas les métadonnées, un défaut <xref:System.Windows.PropertyMetadata> est créé avec des valeurs par défaut pour cette classe.) Les métadonnées enregistrées sont retournées comme <xref:System.Windows.PropertyMetadata> lorsque vous appelez les différentes <xref:System.Windows.DependencyProperty.GetMetadata%2A> <xref:System.Windows.DependencyObject> surcharges qui obtiennent des métadonnées d’une propriété de dépendance sur une instance.</span><span class="sxs-lookup"><span data-stu-id="642ba-121">(For cases where a property registration does not specify metadata, a default <xref:System.Windows.PropertyMetadata> is created with default values for that class.)The registered metadata is returned as <xref:System.Windows.PropertyMetadata> when you call the various <xref:System.Windows.DependencyProperty.GetMetadata%2A> overloads that get metadata from a dependency property on a <xref:System.Windows.DependencyObject> instance.</span></span>  
  
 <span data-ttu-id="642ba-122">La <xref:System.Windows.PropertyMetadata> classe est ensuite dérivée pour fournir des métadonnées plus spécifiques pour les divisions architecturales telles que les classes de niveau cadre WPF.</span><span class="sxs-lookup"><span data-stu-id="642ba-122">The <xref:System.Windows.PropertyMetadata> class is then derived from to provide more specific metadata for architectural divisions such as the WPF framework-level classes.</span></span> <span data-ttu-id="642ba-123"><xref:System.Windows.UIPropertyMetadata>ajoute des rapports <xref:System.Windows.FrameworkPropertyMetadata> d’animation et fournit les propriétés de niveau cadre WPF mentionnées dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="642ba-123"><xref:System.Windows.UIPropertyMetadata> adds animation reporting, and <xref:System.Windows.FrameworkPropertyMetadata> provides the WPF framework-level properties mentioned in the previous section.</span></span> <span data-ttu-id="642ba-124">Lorsque les propriétés de dépendance sont <xref:System.Windows.PropertyMetadata> enregistrées, elles peuvent être enregistrées auprès de ces classes dérivées.</span><span class="sxs-lookup"><span data-stu-id="642ba-124">When dependency properties are registered, they can be registered with these <xref:System.Windows.PropertyMetadata> derived classes.</span></span> <span data-ttu-id="642ba-125">Lorsque les métadonnées sont <xref:System.Windows.PropertyMetadata> examinées, le type de base peut potentiellement être jeté aux classes dérivées afin que vous puissiez examiner les propriétés plus spécifiques.</span><span class="sxs-lookup"><span data-stu-id="642ba-125">When the metadata is examined, the base <xref:System.Windows.PropertyMetadata> type can potentially be cast to the derived classes so that you can examine the more specific properties.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="642ba-126">Les caractéristiques de propriété <xref:System.Windows.FrameworkPropertyMetadata> qui peuvent être spécifiées dans sont parfois appelées dans cette documentation des « drapeaux ».</span><span class="sxs-lookup"><span data-stu-id="642ba-126">The property characteristics that can be specified in <xref:System.Windows.FrameworkPropertyMetadata> are sometimes referred to in this documentation as "flags".</span></span> <span data-ttu-id="642ba-127">Lorsque vous créez de nouvelles métadonnées pour une utilisation dans les enregistrements de propriétés de <xref:System.Windows.FrameworkPropertyMetadataOptions> dépendance ou les remplacements de métadonnées, <xref:System.Windows.FrameworkPropertyMetadata> vous spécifiez ces valeurs en utilisant le recensement du signal et ensuite vous fournissez des valeurs éventuellement concatenées de l’énumération au constructeur.</span><span class="sxs-lookup"><span data-stu-id="642ba-127">When you create new metadata instances for use in dependency property registrations or metadata overrides, you specify these values using the flagwise enumeration <xref:System.Windows.FrameworkPropertyMetadataOptions> and then you supply possibly concatenated values of the enumeration to the <xref:System.Windows.FrameworkPropertyMetadata> constructor.</span></span> <span data-ttu-id="642ba-128">Cependant, une fois construites, ces <xref:System.Windows.FrameworkPropertyMetadata> caractéristiques d’option sont exposées dans une série de propriétés Boolean plutôt que la valeur de recensement de construction.</span><span class="sxs-lookup"><span data-stu-id="642ba-128">However, once constructed, these option characteristics are exposed within a <xref:System.Windows.FrameworkPropertyMetadata> as a series of Boolean properties rather than the constructing enumeration value.</span></span> <span data-ttu-id="642ba-129">Les propriétés booléennes vous permettent de vérifier chaque condition, plutôt que d’avoir à appliquer un masque à une valeur d’énumération d’indicateurs pour obtenir les informations qui vous intéressent.</span><span class="sxs-lookup"><span data-stu-id="642ba-129">The Boolean properties enable you to check each conditional, rather than requiring you to apply a mask to a flagwise enumeration value to get the information you are interested in.</span></span> <span data-ttu-id="642ba-130">Le constructeur utilise le concatenated <xref:System.Windows.FrameworkPropertyMetadataOptions> afin de garder la longueur de la signature du constructeur raisonnable, tandis que les métadonnées construites réelles expose les propriétés discrètes pour rendre la requête des métadonnées plus intuitive.</span><span class="sxs-lookup"><span data-stu-id="642ba-130">The constructor uses the concatenated <xref:System.Windows.FrameworkPropertyMetadataOptions> in order to keep the length of the constructor signature reasonable, whereas the actual constructed metadata exposes the discrete properties to make querying the metadata more intuitive.</span></span>  
  
<a name="override_or_subclass"></a>
## <a name="when-to-override-metadata-when-to-derive-a-class"></a><span data-ttu-id="642ba-131">Quand substituer des métadonnées, quand dériver une classe ?</span><span class="sxs-lookup"><span data-stu-id="642ba-131">When to Override Metadata, When to Derive a Class</span></span>  
 <span data-ttu-id="642ba-132">Le système de propriétés [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] offre des fonctionnalités établies pour changer certaines caractéristiques des propriétés de dépendance sans nécessiter leur réimplémentation totale.</span><span class="sxs-lookup"><span data-stu-id="642ba-132">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system has established capabilities for changing some characteristics of dependency properties without requiring them to be entirely re-implemented.</span></span> <span data-ttu-id="642ba-133">Pour cela, vous devez construire une instance différente des métadonnées de propriété pour la propriété de dépendance telle qu’elle existe sur un type particulier.</span><span class="sxs-lookup"><span data-stu-id="642ba-133">This is accomplished by constructing a different instance of property metadata for the dependency property as it exists on a particular type.</span></span> <span data-ttu-id="642ba-134">Notez que la plupart des propriétés de dépendance existantes ne sont pas des propriétés virtuelles. Ainsi, à proprement parler, vous ne pouvez les « réimplémenter » sur des classes héritées qu’en occultant le membre existant.</span><span class="sxs-lookup"><span data-stu-id="642ba-134">Note that most existing dependency properties are not virtual properties, so strictly speaking "re-implementing" them on inherited classes could only be accomplished by shadowing the existing member.</span></span>  
  
 <span data-ttu-id="642ba-135">Si le scénario que vous tentez d’activer pour une propriété de dépendance sur un type ne peut pas être obtenu en changeant les caractéristiques des propriétés de dépendance existantes, il peut être nécessaire de créer une classe dérivée, puis de déclarer une propriété de dépendance personnalisée sur votre classe dérivée.</span><span class="sxs-lookup"><span data-stu-id="642ba-135">If the scenario you are trying to enable for a dependency property on a type cannot be accomplished by modifying characteristics of existing dependency properties, it might then be necessary to create a derived class, and then to declare a custom dependency property on your derived class.</span></span> <span data-ttu-id="642ba-136">Une propriété de dépendance personnalisée se comporte [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] de la même façon que les propriétés de dépendance définies par les API.</span><span class="sxs-lookup"><span data-stu-id="642ba-136">A custom dependency property behaves identically to dependency properties defined by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] APIs.</span></span> <span data-ttu-id="642ba-137">Pour plus d’informations sur les propriétés de dépendance personnalisées, consultez [Propriétés de dépendance personnalisées](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="642ba-137">For more details about custom dependency properties, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>  
  
 <span data-ttu-id="642ba-138">L’une des caractéristiques principales d’une propriété de dépendance que vous ne pouvez pas substituer est son type de valeur.</span><span class="sxs-lookup"><span data-stu-id="642ba-138">One notable characteristic of a dependency property that you cannot override is its value type.</span></span> <span data-ttu-id="642ba-139">Si vous héritez d’une propriété de dépendance qui a le comportement approximatif souhaité, mais que vous avez besoin pour elle d’un type différent, vous devrez implémenter une propriété de dépendance personnalisée et peut-être lier les propriétés par l’intermédiaire de la conversion de type ou autre implémentation sur votre classe personnalisée.</span><span class="sxs-lookup"><span data-stu-id="642ba-139">If you are inheriting a dependency property that has the approximate behavior you require, but you require a different type for it, you will have to implement a custom dependency property and perhaps link the properties through type conversion or other implementation on your custom class.</span></span> <span data-ttu-id="642ba-140">En outre, vous <xref:System.Windows.ValidateValueCallback>ne pouvez pas remplacer un existant , parce que ce rappel existe dans le domaine d’enregistrement lui-même et non pas dans ses métadonnées.</span><span class="sxs-lookup"><span data-stu-id="642ba-140">Also, you cannot replace an existing <xref:System.Windows.ValidateValueCallback>, because this callback exists in the registration field itself and not within its metadata.</span></span>  
  
<a name="scenarios"></a>
## <a name="scenarios-for-changing-existing-metadata"></a><span data-ttu-id="642ba-141">Scénarios de changement des métadonnées existantes</span><span class="sxs-lookup"><span data-stu-id="642ba-141">Scenarios for Changing Existing Metadata</span></span>  
 <span data-ttu-id="642ba-142">Si vous travaillez avec des métadonnées d’une propriété de dépendance existante, un scénario courant de changement des métadonnées de propriété de dépendance consiste à modifier la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="642ba-142">If you are working with metadata of an existing dependency property, one common scenario for changing dependency property metadata is to change the default value.</span></span> <span data-ttu-id="642ba-143">Le changement ou l’ajout de rappels du système de propriétés est un scénario plus avancé.</span><span class="sxs-lookup"><span data-stu-id="642ba-143">Changing or adding property system callbacks is a more advanced scenario.</span></span> <span data-ttu-id="642ba-144">Vous souhaiterez peut-être le faire si votre implémentation d’une classe dérivée a des corrélations différentes entre des propriétés de dépendance.</span><span class="sxs-lookup"><span data-stu-id="642ba-144">You might want to do this if your implementation of a derived class has different interrelationships between dependency properties.</span></span> <span data-ttu-id="642ba-145">L’une des conditions pour disposer d’un modèle de programmation qui prend en charge à la fois le code et l’utilisation déclarative est que les propriétés doivent pouvoir être définies dans n’importe quel ordre.</span><span class="sxs-lookup"><span data-stu-id="642ba-145">One of the conditionals of having a programming model that supports both code and declarative usage is that properties must enable being set in any order.</span></span> <span data-ttu-id="642ba-146">Par conséquent, toutes les propriétés dépendantes doivent être définies juste-à-temps sans contexte et ne peuvent pas reposer sur la connaissance d’un ordre de définition tel que celui que l’on pourrait trouver dans un constructeur.</span><span class="sxs-lookup"><span data-stu-id="642ba-146">Thus any dependent properties need to be set just-in-time without context and cannot rely on knowing a setting order such as might be found in a constructor.</span></span> <span data-ttu-id="642ba-147">Pour plus d’informations sur cet aspect du système de propriétés, consultez [Validation et rappels de propriétés de dépendance](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="642ba-147">For more information on this aspect of the property system, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span> <span data-ttu-id="642ba-148">Notez que les rappels de validation ne font pas partie des métadonnées ; ils font partie de l’identificateur de propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="642ba-148">Note that validation callbacks are not part of the metadata; they are part of the dependency property identifier.</span></span> <span data-ttu-id="642ba-149">Ainsi, vous ne pouvez pas changer les rappels de validation en substituant les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="642ba-149">Therefore, validation callbacks cannot be changed by overriding the metadata.</span></span>  
  
 <span data-ttu-id="642ba-150">Dans certains cas, vous souhaiterez peut-être modifier les options de métadonnées de propriété de niveau framework WPF sur des propriétés de dépendance existantes.</span><span class="sxs-lookup"><span data-stu-id="642ba-150">In some cases you might also want to alter the WPF framework-level property metadata options on existing dependency properties.</span></span> <span data-ttu-id="642ba-151">Ces options communiquent certaines conditions connues sur les propriétés de niveau framework WPF à d’autres processus de niveau framework WPF tels que le système de disposition.</span><span class="sxs-lookup"><span data-stu-id="642ba-151">These options communicate certain known conditionals about WPF framework-level properties to other WPF framework-level processes such as the layout system.</span></span>  <span data-ttu-id="642ba-152">La définition des options n’est généralement effectuée que lors de l’enregistrement d’une nouvelle propriété de <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> dépendance, mais il est également possible de modifier les métadonnées de propriété au niveau du cadre WPF dans le cadre d’un ou <xref:System.Windows.DependencyProperty.AddOwner%2A> d’un appel.</span><span class="sxs-lookup"><span data-stu-id="642ba-152">Setting the options is generally done only when registering a new dependency property, but it is also possible to change the WPF framework-level property metadata as part of a <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> or <xref:System.Windows.DependencyProperty.AddOwner%2A> call.</span></span> <span data-ttu-id="642ba-153">Pour connaître les valeurs spécifiques à utiliser et pour plus d’informations, consultez [Métadonnées de propriété de framework](framework-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="642ba-153">For the specific values to use and more information, see [Framework Property Metadata](framework-property-metadata.md).</span></span> <span data-ttu-id="642ba-154">Pour plus d’informations sur la façon dont ces options doivent être définies pour une propriété de dépendance récemment inscrite, consultez [Propriétés de dépendance personnalisées](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="642ba-154">For more information that is pertinent to how these options should be set for a newly registered dependency property, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>  
  
<a name="dp_override_metadata"></a>
### <a name="overriding-metadata"></a><span data-ttu-id="642ba-155">Substitution de métadonnées</span><span class="sxs-lookup"><span data-stu-id="642ba-155">Overriding Metadata</span></span>  
 <span data-ttu-id="642ba-156">La substitution de métadonnées a pour objectif principal de vous permettre de changer les différents comportements dérivés des métadonnées qui sont appliqués à la propriété de dépendance telle qu’elle existe sur votre type.</span><span class="sxs-lookup"><span data-stu-id="642ba-156">The purpose of overriding metadata is primarily so that you have the opportunity to change the various metadata-derived behaviors that are applied to the dependency property as it exists on your type.</span></span> <span data-ttu-id="642ba-157">Les raisons sont expliquées plus en détail dans la section [Métadonnées](#dp_metadata_contents).</span><span class="sxs-lookup"><span data-stu-id="642ba-157">The reasons for this are explained in more detail in the [Metadata](#dp_metadata_contents) section.</span></span> <span data-ttu-id="642ba-158">Pour plus d’informations et pour obtenir des exemples de code, consultez [Substituer les métadonnées d’une propriété de dépendance](how-to-override-metadata-for-a-dependency-property.md).</span><span class="sxs-lookup"><span data-stu-id="642ba-158">For more information including some code examples, see [Override Metadata for a Dependency Property](how-to-override-metadata-for-a-dependency-property.md).</span></span>  
  
 <span data-ttu-id="642ba-159">Des métadonnées de propriété peuvent être fournies<xref:System.Windows.DependencyProperty.Register%2A>pour une propriété de dépendance pendant l’appel d’enregistrement ( ).</span><span class="sxs-lookup"><span data-stu-id="642ba-159">Property metadata can be supplied for a dependency property during the registration call (<xref:System.Windows.DependencyProperty.Register%2A>).</span></span> <span data-ttu-id="642ba-160">Toutefois, dans de nombreux cas, vous souhaiterez peut-être fournir des métadonnées propres au type pour votre classe quand elle hérite de cette propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="642ba-160">However, in many cases, you might want to provide type-specific metadata for your class when it inherits that dependency property.</span></span> <span data-ttu-id="642ba-161">Vous pouvez le faire <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> en appelant la méthode.</span><span class="sxs-lookup"><span data-stu-id="642ba-161">You can do this by calling the <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> method.</span></span>  <span data-ttu-id="642ba-162">Par exemple, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] à partir <xref:System.Windows.FrameworkElement> des API, la classe <xref:System.Windows.UIElement.Focusable%2A> est le type qui enregistre d’abord la propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="642ba-162">For an example from the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] APIs, the <xref:System.Windows.FrameworkElement> class is the type that first registers the <xref:System.Windows.UIElement.Focusable%2A> dependency property.</span></span> <span data-ttu-id="642ba-163">Mais <xref:System.Windows.Controls.Control> la classe l’emporte sur les métadonnées pour la propriété `false` `true`de dépendance pour fournir <xref:System.Windows.UIElement.Focusable%2A> sa propre valeur par défaut initiale, la changeant de , et autrement réutiliser la mise en œuvre originale.</span><span class="sxs-lookup"><span data-stu-id="642ba-163">But the <xref:System.Windows.Controls.Control> class overrides metadata for the dependency property to provide its own initial default value, changing it from `false` to `true`, and otherwise re-uses the original <xref:System.Windows.UIElement.Focusable%2A> implementation.</span></span>  
  
 <span data-ttu-id="642ba-164">Quand vous substituez des métadonnées, les différentes caractéristiques des métadonnées sont fusionnées ou remplacées.</span><span class="sxs-lookup"><span data-stu-id="642ba-164">When you override metadata, the different metadata characteristics are either merged or replaced.</span></span>  
  
- <span data-ttu-id="642ba-165"><xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>est fusionnée.</span><span class="sxs-lookup"><span data-stu-id="642ba-165"><xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is merged.</span></span> <span data-ttu-id="642ba-166">Si vous ajoutez <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>un nouveau , ce rappel est stocké dans les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="642ba-166">If you add a new <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>, that callback is stored in the metadata.</span></span> <span data-ttu-id="642ba-167">Si vous ne <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> spécifiez pas <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> un dans le remplacement, la valeur de est promu comme une référence de l’ancêtre le plus proche qui l’a spécifié dans les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="642ba-167">If you do not specify a <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is promoted as a reference from the nearest ancestor that specified it in metadata.</span></span>  
  
- <span data-ttu-id="642ba-168">Le comportement réel <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> du système de propriété est que les implémentations pour tous les propriétaires de métadonnées dans la hiérarchie sont conservés et ajoutés à un tableau, avec l’ordre d’exécution par le système de propriété étant que les rappels de la classe la plus dérivée sont invoqués en premier.</span><span class="sxs-lookup"><span data-stu-id="642ba-168">The actual property system behavior for <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is that implementations for all metadata owners in the hierarchy are retained and added to a table, with order of execution by the property system being that the most derived class's callbacks are invoked first.</span></span>  
  
- <span data-ttu-id="642ba-169"><xref:System.Windows.PropertyMetadata.DefaultValue%2A>est remplacé.</span><span class="sxs-lookup"><span data-stu-id="642ba-169"><xref:System.Windows.PropertyMetadata.DefaultValue%2A> is replaced.</span></span> <span data-ttu-id="642ba-170">Si vous ne <xref:System.Windows.PropertyMetadata.DefaultValue%2A> spécifiez pas <xref:System.Windows.PropertyMetadata.DefaultValue%2A> un dans le remplacement, la valeur de vient de l’ancêtre le plus proche qui l’a spécifié dans les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="642ba-170">If you do not specify a <xref:System.Windows.PropertyMetadata.DefaultValue%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.DefaultValue%2A> comes from the nearest ancestor that specified it in metadata.</span></span>  
  
- <span data-ttu-id="642ba-171"><xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>les implémentations sont remplacées.</span><span class="sxs-lookup"><span data-stu-id="642ba-171"><xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> implementations are replaced.</span></span> <span data-ttu-id="642ba-172">Si vous ajoutez <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>un nouveau , ce rappel est stocké dans les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="642ba-172">If you add a new <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>, that callback is stored in the metadata.</span></span> <span data-ttu-id="642ba-173">Si vous ne <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> spécifiez pas <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> un dans le remplacement, la valeur de est promu comme une référence de l’ancêtre le plus proche qui l’a spécifié dans les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="642ba-173">If you do not specify a <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> is promoted as a reference from the nearest ancestor that specified it in metadata.</span></span>  
  
- <span data-ttu-id="642ba-174">Le comportement du système <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> de propriété est que seules les métadonnées immédiates sont invoquées.</span><span class="sxs-lookup"><span data-stu-id="642ba-174">The property system behavior is that only the <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> in the immediate metadata is invoked.</span></span> <span data-ttu-id="642ba-175">Aucune référence <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> à d’autres implémentations dans la hiérarchie n’est conservée.</span><span class="sxs-lookup"><span data-stu-id="642ba-175">No references to other <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> implementations in the hierarchy are retained.</span></span>  
  
 <span data-ttu-id="642ba-176">Ce comportement est <xref:System.Windows.PropertyMetadata.Merge%2A>mis en œuvre par , et peut être remplacé sur les classes de métadonnées dérivées.</span><span class="sxs-lookup"><span data-stu-id="642ba-176">This behavior is implemented by <xref:System.Windows.PropertyMetadata.Merge%2A>, and can be overridden on derived metadata classes.</span></span>  
  
#### <a name="overriding-attached-property-metadata"></a><span data-ttu-id="642ba-177">Substitution de métadonnées de propriété jointe</span><span class="sxs-lookup"><span data-stu-id="642ba-177">Overriding Attached Property Metadata</span></span>  
 <span data-ttu-id="642ba-178">Dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], les propriétés jointes sont implémentées en tant que propriétés de dépendance.</span><span class="sxs-lookup"><span data-stu-id="642ba-178">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], attached properties are implemented as dependency properties.</span></span> <span data-ttu-id="642ba-179">Cela signifie qu’elles ont également des métadonnées de propriété, que les différentes classes peuvent substituer.</span><span class="sxs-lookup"><span data-stu-id="642ba-179">This means that they also have property metadata, which individual classes can override.</span></span> <span data-ttu-id="642ba-180">Les considérations de portée pour [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] une propriété <xref:System.Windows.DependencyObject> attachée sont généralement que n’importe quel peut avoir une propriété attachée fixée sur eux.</span><span class="sxs-lookup"><span data-stu-id="642ba-180">The scoping considerations for an attached property in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] are generally that any <xref:System.Windows.DependencyObject> can have an attached property set on them.</span></span> <span data-ttu-id="642ba-181">Par conséquent, toute <xref:System.Windows.DependencyObject> classe dérivée peut remplacer les métadonnées pour toute propriété jointe, car elle pourrait être fixée sur un cas de la classe.</span><span class="sxs-lookup"><span data-stu-id="642ba-181">Therefore, any <xref:System.Windows.DependencyObject> derived class can override the metadata for any attached property, as it might be set on an instance of the class.</span></span> <span data-ttu-id="642ba-182">Vous pouvez substituer les valeurs par défaut, les rappels ou les propriétés de rapport de caractéristiques de niveau framework WPF.</span><span class="sxs-lookup"><span data-stu-id="642ba-182">You can override default values, callbacks, or WPF framework-level characteristic-reporting properties.</span></span> <span data-ttu-id="642ba-183">Si la propriété jointe est définie sur une instance de votre classe, ces caractéristiques de métadonnées de propriété de substitution s’appliquent.</span><span class="sxs-lookup"><span data-stu-id="642ba-183">If the attached property is set on an instance of your class, those override property metadata characteristics apply.</span></span> <span data-ttu-id="642ba-184">Par exemple, vous pouvez substituer la valeur par défaut de telle sorte que votre valeur de remplacement soit signalée comme valeur de la propriété jointe sur des instances de votre classe chaque fois que la propriété n’est pas définie autrement.</span><span class="sxs-lookup"><span data-stu-id="642ba-184">For instance, you can override the default value, such that your override value is reported as the value of the attached property on instances of your class, whenever the property is not otherwise set.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="642ba-185">La <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> propriété n’est pas pertinente pour les propriétés attachées.</span><span class="sxs-lookup"><span data-stu-id="642ba-185">The <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> property is not relevant for attached properties.</span></span>  
  
<a name="dp_add_owner"></a>
### <a name="adding-a-class-as-an-owner-of-an-existing-dependency-property"></a><span data-ttu-id="642ba-186">Ajout d’une classe en tant que propriétaire d’une propriété de dépendance existante</span><span class="sxs-lookup"><span data-stu-id="642ba-186">Adding a Class as an Owner of an Existing Dependency Property</span></span>  
 <span data-ttu-id="642ba-187">Une classe peut s’ajouter en tant que propriétaire d’une <xref:System.Windows.DependencyProperty.AddOwner%2A> propriété de dépendance qui a déjà été enregistrée, en utilisant la méthode.</span><span class="sxs-lookup"><span data-stu-id="642ba-187">A class can add itself as an owner of a dependency property that has already been registered, by using the <xref:System.Windows.DependencyProperty.AddOwner%2A> method.</span></span> <span data-ttu-id="642ba-188">Cela permet à la classe d’utiliser une propriété de dépendance initialement inscrite pour un autre type.</span><span class="sxs-lookup"><span data-stu-id="642ba-188">This enables the class to use a dependency property that was originally registered for a different type.</span></span> <span data-ttu-id="642ba-189">La classe d’ajout n’est généralement pas une classe dérivée du type ayant inscrit initialement cette propriété de dépendance comme propriétaire.</span><span class="sxs-lookup"><span data-stu-id="642ba-189">The adding class is typically not a derived class of the type that first registered that dependency property as owner.</span></span> <span data-ttu-id="642ba-190">En pratique, cela permet à votre classe et à ses classes dérivées d’« hériter » d’une implémentation de propriété de dépendance sans que la classe propriétaire d’origine et la classe d’ajout ne soient dans la même vraie hiérarchie de classes.</span><span class="sxs-lookup"><span data-stu-id="642ba-190">Effectively, this allows your class and its derived classes to "inherit" a dependency property implementation without the original owner class and the adding class being in the same true class hierarchy.</span></span> <span data-ttu-id="642ba-191">En outre, la classe d’ajout (et aussi toutes les classes dérivées) peuvent ensuite fournir des métadonnées propres au type pour la propriété de dépendance d’origine.</span><span class="sxs-lookup"><span data-stu-id="642ba-191">In addition, the adding class (and all derived classes as well) can then provide type-specific metadata for the original dependency property.</span></span>  
  
 <span data-ttu-id="642ba-192">En plus de s’ajouter comme propriétaire par l’intermédiaire des méthodes utilitaires du système de propriétés, la classe d’ajout doit déclarer des membres publics supplémentaires sur elle-même pour que la propriété de dépendance participe totalement au système de propriétés avec exposition à la fois au code et au balisage.</span><span class="sxs-lookup"><span data-stu-id="642ba-192">As well as adding itself as owner through the property system utility methods, the adding class should declare additional public members on itself in order to make the dependency property] a full participant in the property system with exposure to both code and markup.</span></span> <span data-ttu-id="642ba-193">Une classe qui ajoute une propriété de dépendance existante a les mêmes responsabilités, en ce qui concerne l’exposition du modèle objet pour cette propriété de dépendance, qu’une classe qui définit une nouvelle propriété de dépendance personnalisée.</span><span class="sxs-lookup"><span data-stu-id="642ba-193">A class that adds an existing dependency property has the same responsibilities as far as exposing the object model for that dependency property as does a class that defines a new custom dependency property.</span></span> <span data-ttu-id="642ba-194">Le premier membre de ce genre à exposer est un champ identificateur de propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="642ba-194">The first such member to expose is a dependency property identifier field.</span></span> <span data-ttu-id="642ba-195">Ce champ doit `public static readonly` être <xref:System.Windows.DependencyProperty>un champ de type , <xref:System.Windows.DependencyProperty.AddOwner%2A> qui est attribué à la valeur de retour de l’appel.</span><span class="sxs-lookup"><span data-stu-id="642ba-195">This field should be a `public static readonly` field of type <xref:System.Windows.DependencyProperty>, which is assigned to the return value of the <xref:System.Windows.DependencyProperty.AddOwner%2A> call.</span></span> <span data-ttu-id="642ba-196">Le deuxième membre à définir est la propriété « emballage » de l’heure courante de l’exécution de la langue (CLR).</span><span class="sxs-lookup"><span data-stu-id="642ba-196">The second member to define is the common language runtime (CLR) "wrapper" property.</span></span> <span data-ttu-id="642ba-197">L’emballage le rend beaucoup plus pratique de manipuler votre <xref:System.Windows.DependencyObject.SetValue%2A> propriété de dépendance dans le code (vous évitez les appels à chaque fois, et pouvez faire cet appel qu’une seule fois dans l’emballage lui-même).</span><span class="sxs-lookup"><span data-stu-id="642ba-197">The wrapper makes it much more convenient to manipulate your dependency property in code (you avoid calls to <xref:System.Windows.DependencyObject.SetValue%2A> each time, and can make that call only once in the wrapper itself).</span></span> <span data-ttu-id="642ba-198">Le wrapper est implémenté exactement comment il le serait si vous inscriviez une propriété de dépendance personnalisée.</span><span class="sxs-lookup"><span data-stu-id="642ba-198">The wrapper is implemented identically to how it would be implemented if you were registering a custom dependency property.</span></span> <span data-ttu-id="642ba-199">Pour plus d’informations sur l’implémentation d’une propriété de dépendance, consultez [Propriétés de dépendance personnalisées](custom-dependency-properties.md) et [Ajouter un type propriétaire d’une propriété de dépendance](how-to-add-an-owner-type-for-a-dependency-property.md).</span><span class="sxs-lookup"><span data-stu-id="642ba-199">For more information about implementing a dependency property, see [Custom Dependency Properties](custom-dependency-properties.md) and [Add an Owner Type for a Dependency Property](how-to-add-an-owner-type-for-a-dependency-property.md).</span></span>  
  
#### <a name="addowner-and-attached-properties"></a><span data-ttu-id="642ba-200">AddOwner et les propriétés jointes</span><span class="sxs-lookup"><span data-stu-id="642ba-200">AddOwner and Attached Properties</span></span>  
 <span data-ttu-id="642ba-201">Vous pouvez <xref:System.Windows.DependencyProperty.AddOwner%2A> demander une propriété de dépendance qui est définie comme une propriété attachée par la classe propriétaire.</span><span class="sxs-lookup"><span data-stu-id="642ba-201">You can call <xref:System.Windows.DependencyProperty.AddOwner%2A> for a dependency property that is defined as an attached property by the owner class.</span></span> <span data-ttu-id="642ba-202">En général, ceci a pour but d’exposer la propriété précédemment jointe en tant que propriété de dépendance non jointe.</span><span class="sxs-lookup"><span data-stu-id="642ba-202">Generally the reason for doing this is to expose the previously attached property as a non-attached dependency property.</span></span> <span data-ttu-id="642ba-203">Vous exposerez <xref:System.Windows.DependencyProperty.AddOwner%2A> ensuite la `public static readonly` valeur de retour comme un champ pour une utilisation comme identifiant de propriété de dépendance, et définirez les propriétés appropriées d'« emballage » de sorte que la propriété apparaît dans la table des membres et prend en charge une utilisation non attachée de propriété dans votre classe.</span><span class="sxs-lookup"><span data-stu-id="642ba-203">You then will expose the <xref:System.Windows.DependencyProperty.AddOwner%2A> return value as a `public static readonly` field for use as the dependency property identifier, and will define appropriate "wrapper" properties so that the property appears in the members table and supports a non-attached property usage in your class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="642ba-204">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="642ba-204">See also</span></span>

- <xref:System.Windows.PropertyMetadata>
- <xref:System.Windows.DependencyObject>
- <xref:System.Windows.DependencyProperty>
- <xref:System.Windows.DependencyProperty.GetMetadata%2A>
- [<span data-ttu-id="642ba-205">Aperçu des propriétés de dépendance</span><span class="sxs-lookup"><span data-stu-id="642ba-205">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="642ba-206">Métadonnées de propriété de framework</span><span class="sxs-lookup"><span data-stu-id="642ba-206">Framework Property Metadata</span></span>](framework-property-metadata.md)
