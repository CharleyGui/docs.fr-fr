---
title: Extensions de balisage et XAML
ms.date: 03/30/2017
helpviewer_keywords:
- brace character [WPF]
- Binding markup extensions [WPF]
- RelativeSource markup extensions [WPF]
- XAML [WPF], markup extensions
- markup extensions [WPF]
- nesting extension syntax [WPF]
- curly brace characters ({})
- TemplateBinding markup extensions [WPF]
- StaticResource markup extensions [WPF]
- literal curly brace characters ({})
- characters [WPF], curly brace
- DynamicResource markup extensions [WPF]
ms.assetid: 618dc745-8b14-4886-833f-486d2254bb78
ms.openlocfilehash: f4134e9d0b26135d1bd6058ac9ed8941a9c6be34
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/24/2020
ms.locfileid: "76727893"
---
# <a name="markup-extensions-and-wpf-xaml"></a><span data-ttu-id="218e5-102">Extensions de balisage et XAML WPF</span><span class="sxs-lookup"><span data-stu-id="218e5-102">Markup Extensions and WPF XAML</span></span>
<span data-ttu-id="218e5-103">Cette rubrique introduit le concept d’extensions de balisage pour XAML, notamment leurs règles de syntaxe, leur finalité et le modèle d’objet de classe sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="218e5-103">This topic introduces the concept of markup extensions for XAML, including their syntax rules, purpose, and the class object model that underlies them.</span></span> <span data-ttu-id="218e5-104">Les extensions de balisage sont une fonctionnalité générale du langage XAML et de l’implémentation .NET des services XAML.</span><span class="sxs-lookup"><span data-stu-id="218e5-104">Markup extensions are a general feature of the XAML language and of the .NET implementation of XAML services.</span></span> <span data-ttu-id="218e5-105">Cette rubrique détaille spécifiquement des extensions de balisage pour une utilisation dans le langage XAML de WPF.</span><span class="sxs-lookup"><span data-stu-id="218e5-105">This topic specifically details markup extensions for use in WPF XAML.</span></span>  

<a name="XAML_Processors_and_Markup_Extensions"></a>   
## <a name="xaml-processors-and-markup-extensions"></a><span data-ttu-id="218e5-106">Processeurs XAML et extensions de balisage</span><span class="sxs-lookup"><span data-stu-id="218e5-106">XAML Processors and Markup Extensions</span></span>  
 <span data-ttu-id="218e5-107">En général, un analyseur XAML peut interpréter une valeur d’attribut en tant que chaîne littérale convertible en primitive ou la convertir en objet par un moyen ou par un autre.</span><span class="sxs-lookup"><span data-stu-id="218e5-107">Generally speaking, a XAML parser can either interpret an attribute value as a literal string that can be converted to a primitive, or convert it to an object by some means.</span></span> <span data-ttu-id="218e5-108">L’un d’eux consiste à référencer un convertisseur de type ; cette méthode est documentée dans la rubrique [TypeConverters et XAML](typeconverters-and-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-108">One such means is by referencing a type converter; this is documented in the topic [TypeConverters and XAML](typeconverters-and-xaml.md).</span></span> <span data-ttu-id="218e5-109">Cependant, certains scénarios peuvent nécessiter un comportement différent.</span><span class="sxs-lookup"><span data-stu-id="218e5-109">However, there are scenarios where different behavior is required.</span></span> <span data-ttu-id="218e5-110">Par exemple, un processeur XAML peut être informé du fait qu’une valeur d’attribut ne doit pas générer un nouvel objet dans le graphique d’objet.</span><span class="sxs-lookup"><span data-stu-id="218e5-110">For example, a XAML processor can be instructed that a value of an attribute should not result in a new object in the object graph.</span></span> <span data-ttu-id="218e5-111">L’attribut doit en revanche générer un graphique d’objet qui fait référence à un objet déjà construit dans une autre partie du graphique, c’est-à-dire un objet statique.</span><span class="sxs-lookup"><span data-stu-id="218e5-111">Instead, the attribute should result in an object graph that makes a reference to an already constructed object in another part of the graph, or a static object.</span></span> <span data-ttu-id="218e5-112">Autre scénario : un processeur XAML peut être chargé d’utiliser une syntaxe qui fournit des arguments non définis par défaut au constructeur d’un objet.</span><span class="sxs-lookup"><span data-stu-id="218e5-112">Another scenario is that a XAML processor can be instructed to use a syntax that provides non-default arguments to the constructor of an object.</span></span> <span data-ttu-id="218e5-113">Dans ces types de scénario, une extension de balisage peut être la solution.</span><span class="sxs-lookup"><span data-stu-id="218e5-113">These are the types of scenarios where a markup extension can provide the solution.</span></span>  
  
<a name="Basic_Markup_Extension_Syntax"></a>   
## <a name="basic-markup-extension-syntax"></a><span data-ttu-id="218e5-114">Syntaxe d’extension de balisage de base</span><span class="sxs-lookup"><span data-stu-id="218e5-114">Basic Markup Extension Syntax</span></span>  
 <span data-ttu-id="218e5-115">Une extension de balisage peut être implémentée pour fournir des valeurs de propriétés dans une utilisation d’attribut ou d’un élément de propriété, ou les deux à la fois.</span><span class="sxs-lookup"><span data-stu-id="218e5-115">A markup extension can be implemented to provide values for properties in an attribute usage, properties in a property element usage, or both.</span></span>  
  
 <span data-ttu-id="218e5-116">Quand elle est utilisée pour fournir une valeur d’attribut, la syntaxe qui distingue une séquence d’extension de balisage d’un processeur XAML est la présence d’accolades ouvrantes et fermantes ({ et }).</span><span class="sxs-lookup"><span data-stu-id="218e5-116">When used to provide an attribute value, the syntax that distinguishes a markup extension sequence to a XAML processor is the presence of the opening and closing curly braces ({ and }).</span></span> <span data-ttu-id="218e5-117">Le type d’extension de balisage est alors identifié par le jeton de chaîne qui suit immédiatement l’accolade ouvrante.</span><span class="sxs-lookup"><span data-stu-id="218e5-117">The type of markup extension is then identified by the string token immediately following the opening curly brace.</span></span>  
  
 <span data-ttu-id="218e5-118">Quand elle est utilisée dans la syntaxe des éléments de propriété, une extension de balisage ressemble visuellement à n’importe quel autre élément utilisé pour fournir une valeur d’élément de propriété, c’est-à-dire à une déclaration d’élément XAML qui fait référence à la classe d’extension de balisage en tant qu’élément, comprise entre les signes « inférieur à » et « supérieur à » (< >).</span><span class="sxs-lookup"><span data-stu-id="218e5-118">When used in property element syntax, a markup extension is visually the same as any other element used to provide a property element value: a XAML element declaration that references the markup extension class as an element, enclosed within angle brackets (<>).</span></span>  
  
<a name="XAML_Defined_Markup_Extensions"></a>   
## <a name="xaml-defined-markup-extensions"></a><span data-ttu-id="218e5-119">Extensions de balisage définies en XAML</span><span class="sxs-lookup"><span data-stu-id="218e5-119">XAML-Defined Markup Extensions</span></span>  
 <span data-ttu-id="218e5-120">Il existe plusieurs extensions de balisage qui ne sont pas spécifiques à l’implémentation WPF de XAML, mais qui sont plutôt des implémentations d’intrinsèques ou de fonctionnalités du langage XAML.</span><span class="sxs-lookup"><span data-stu-id="218e5-120">Several markup extensions exist that are not specific to the WPF implementation of XAML, but are instead implementations of intrinsics or features of XAML as a language.</span></span> <span data-ttu-id="218e5-121">Ces extensions de balisage sont implémentées dans l’assembly System.Xaml en tant que partie intégrante des services généraux XAML du .NET Framework et se trouvent dans l’espace de noms XAML du langage XAML.</span><span class="sxs-lookup"><span data-stu-id="218e5-121">These markup extensions are implemented in the System.Xaml assembly as part of the general .NET Framework XAML services, and are within the XAML language XAML namespace.</span></span> <span data-ttu-id="218e5-122">Dans le cadre d’une utilisation de balisage courante, ces extensions de balisage sont en général identifiables par le préfixe `x:`.</span><span class="sxs-lookup"><span data-stu-id="218e5-122">In terms of common markup usage, these markup extensions are typically identifiable by the `x:` prefix in the usage.</span></span> <span data-ttu-id="218e5-123">La classe de base <xref:System.Windows.Markup.MarkupExtension> (également définie dans System. Xaml) fournit le modèle que toutes les extensions de balisage doivent utiliser pour être prises en charge dans les lecteurs XAML et les writers XAML, y compris dans le XAML WPF.</span><span class="sxs-lookup"><span data-stu-id="218e5-123">The <xref:System.Windows.Markup.MarkupExtension> base class (also defined in System.Xaml) provides the pattern that all markup extensions should use in order to be supported in XAML readers and XAML writers, including in WPF XAML.</span></span>  
  
- <span data-ttu-id="218e5-124">`x:Type` fournit l'objet <xref:System.Type> pour le type nommé.</span><span class="sxs-lookup"><span data-stu-id="218e5-124">`x:Type` supplies the <xref:System.Type> object for the named type.</span></span> <span data-ttu-id="218e5-125">Cette fonctionnalité est généralement utilisée dans les styles et les modèles.</span><span class="sxs-lookup"><span data-stu-id="218e5-125">This facility is used most frequently in styles and templates.</span></span> <span data-ttu-id="218e5-126">Pour plus d’informations, consultez [x:Type, extension de balisage](../../../desktop-wpf/xaml-services/xtype-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-126">For details, see [x:Type Markup Extension](../../../desktop-wpf/xaml-services/xtype-markup-extension.md).</span></span>  
  
- <span data-ttu-id="218e5-127">`x:Static` génère des valeurs statiques.</span><span class="sxs-lookup"><span data-stu-id="218e5-127">`x:Static` produces static values.</span></span> <span data-ttu-id="218e5-128">Les valeurs proviennent des entités de code de type de valeur qui ne désignent pas directement le type de la valeur d’une propriété cible, mais qui peuvent être évaluées comme étant de ce type.</span><span class="sxs-lookup"><span data-stu-id="218e5-128">The values come from value-type code entities that are not directly the type of a target property's value, but can be evaluated to that type.</span></span> <span data-ttu-id="218e5-129">Pour plus d’informations, consultez [x:Static, extension de balisage](../../../desktop-wpf/xaml-services/xstatic-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-129">For details, see [x:Static Markup Extension](../../../desktop-wpf/xaml-services/xstatic-markup-extension.md).</span></span>  
  
- <span data-ttu-id="218e5-130">`x:Null` spécifie `null` en tant que valeur d’une propriété et peut être utilisé pour les attributs ou les valeurs d’élément de propriété.</span><span class="sxs-lookup"><span data-stu-id="218e5-130">`x:Null` specifies `null` as a value for a property and can be used either for attributes or property element values.</span></span> <span data-ttu-id="218e5-131">Pour plus d’informations, consultez [x:Null, extension de balisage](../../../desktop-wpf/xaml-services/xnull-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-131">For details, see [x:Null Markup Extension](../../../desktop-wpf/xaml-services/xnull-markup-extension.md).</span></span>  
  
- <span data-ttu-id="218e5-132">`x:Array` offre une prise en charge pour la création de tableaux généraux dans la syntaxe XAML, dans les cas où la prise en charge des collections assurée par les éléments de base et les modèles de contrôle WPF n’est délibérément pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="218e5-132">`x:Array` provides support for creation of general arrays in XAML syntax, for cases where the collection support provided by WPF base elements and control models is deliberately not used.</span></span> <span data-ttu-id="218e5-133">Pour plus d’informations, consultez [x:Array, extension de balisage](../../../desktop-wpf/xaml-services/xarray-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-133">For details, see [x:Array Markup Extension](../../../desktop-wpf/xaml-services/xarray-markup-extension.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="218e5-134">Le préfixe `x:` est utilisé pour le mappage d’espace de noms XAML standard des intrinsèques du langage XAML, dans l’élément racine d’un fichier ou d’une production XAML.</span><span class="sxs-lookup"><span data-stu-id="218e5-134">The `x:` prefix is used for the typical XAML namespace mapping of the XAML language intrinsics, in the root element of a XAML file or production.</span></span> <span data-ttu-id="218e5-135">Par exemple, les modèles Visual Studio pour les applications WPF initient un fichier XAML à l’aide de ce mappage de `x:`.</span><span class="sxs-lookup"><span data-stu-id="218e5-135">For example, the Visual Studio templates for WPF applications initiate a XAML file using this `x:` mapping.</span></span> <span data-ttu-id="218e5-136">Vous pouvez choisir un autre jeton de préfixe pour votre propre mappage d’espace de noms XAML. Cependant, dans cette documentation, le mappage `x:` par défaut est considéré comme un moyen d’identifier les entités qui représentent une partie définie de l’espace de noms XAML du langage XAML, par opposition à l’espace de noms XAML par défaut ou à d’autres espaces de noms XAML non liés à un framework spécifique.</span><span class="sxs-lookup"><span data-stu-id="218e5-136">You could choose a different prefix token in your own XAML namespace mapping, but this documentation will assume the default `x:` mapping as a means of identifying those entities that are a defined part of the XAML namespace for the XAML language, as opposed to the WPF default namespace or other XAML namespaces not related to a specific framework.</span></span>  
  
<a name="WPF_Specific_Markup_Extensions"></a>   
## <a name="wpf-specific-markup-extensions"></a><span data-ttu-id="218e5-137">Extensions de balisage spécifiques à WPF</span><span class="sxs-lookup"><span data-stu-id="218e5-137">WPF-Specific Markup Extensions</span></span>  
 <span data-ttu-id="218e5-138">Les extensions de balisage les plus courantes utilisées en programmation WPF sont celles qui prennent en charge les références de ressources (`StaticResource` et `DynamicResource`) et celles qui prennent en charge la liaison de données (`Binding`).</span><span class="sxs-lookup"><span data-stu-id="218e5-138">The most common markup extensions used in WPF programming are those that support resource references (`StaticResource` and `DynamicResource`), and those that support data binding (`Binding`).</span></span>  
  
- <span data-ttu-id="218e5-139">`StaticResource` fournit une valeur de propriété en remplaçant la valeur d’une ressource déjà définie.</span><span class="sxs-lookup"><span data-stu-id="218e5-139">`StaticResource` provides a value for a property by substituting the value of an already defined resource.</span></span> <span data-ttu-id="218e5-140">Une évaluation `StaticResource` est finalement effectuée au moment du chargement XAML et n’a pas accès au graphique d’objet au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="218e5-140">A `StaticResource` evaluation is ultimately made at XAML load time and does not have access to the object graph at run time.</span></span> <span data-ttu-id="218e5-141">Pour plus d’informations, consultez [StaticResource, extension de balisage](staticresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-141">For details, see [StaticResource Markup Extension](staticresource-markup-extension.md).</span></span>  
  
- <span data-ttu-id="218e5-142">`DynamicResource` fournit une valeur de propriété en différant le moment où cette valeur devient une référence à une ressource au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="218e5-142">`DynamicResource` provides a value for a property by deferring that value to be a run-time reference to a resource.</span></span> <span data-ttu-id="218e5-143">Une référence de ressource dynamique force une nouvelle recherche chaque fois qu’un accès à ladite ressource a lieu et que cette dernière a accès au graphique d’objet au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="218e5-143">A dynamic resource reference forces a new lookup each time that such a resource is accessed and has access to the object graph at run time.</span></span> <span data-ttu-id="218e5-144">Pour obtenir cet accès, le concept `DynamicResource` est pris en charge par les propriétés de dépendance dans le système de propriétés WPF et les expressions évaluées.</span><span class="sxs-lookup"><span data-stu-id="218e5-144">In order to get this access, `DynamicResource` concept is supported by dependency properties in the WPF property system, and evaluated expressions.</span></span> <span data-ttu-id="218e5-145">Par conséquent, vous pouvez uniquement utiliser `DynamicResource` pour une cible de propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="218e5-145">Therefore you can only use `DynamicResource` for a dependency property target.</span></span> <span data-ttu-id="218e5-146">Pour plus d’informations, consultez [DynamicResource, extension de balisage](dynamicresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-146">For details, see [DynamicResource Markup Extension](dynamicresource-markup-extension.md).</span></span>  
  
- <span data-ttu-id="218e5-147">`Binding` fournit une valeur liée aux données pour une propriété, en utilisant le contexte de données qui s’applique à l’objet parent au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="218e5-147">`Binding` provides a data bound value for a property, using the data context that applies to the parent object at run time.</span></span> <span data-ttu-id="218e5-148">Cette extension de balisage est relativement complexe, car elle active une syntaxe inline substantielle pour spécifier une liaison de données.</span><span class="sxs-lookup"><span data-stu-id="218e5-148">This markup extension is relatively complex, because it enables a substantial inline syntax for specifying a data binding.</span></span> <span data-ttu-id="218e5-149">Pour plus d’informations, consultez [Binding, extension de balisage](binding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-149">For details, see [Binding Markup Extension](binding-markup-extension.md).</span></span>  
  
- <span data-ttu-id="218e5-150">`RelativeSource` fournit des informations sources pour un <xref:System.Windows.Data.Binding> qui peut parcourir plusieurs relations possibles dans l’arborescence d’objets au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="218e5-150">`RelativeSource` provides source information for a <xref:System.Windows.Data.Binding> that can navigate several possible relationships in the run-time object tree.</span></span> <span data-ttu-id="218e5-151">Cela fournit une source d’approvisionnement spécialisée pour les liaisons créées dans des modèles multiusage ou dans du code sans avoir pleine connaissance de l’arborescence d’objets environnante.</span><span class="sxs-lookup"><span data-stu-id="218e5-151">This provides specialized sourcing for bindings that are created in multi-use templates or created in code without full knowledge of the surrounding object tree.</span></span> <span data-ttu-id="218e5-152">Pour plus d’informations, consultez [RelativeSource, extension de balisage](relativesource-markupextension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-152">For details, see [RelativeSource MarkupExtension](relativesource-markupextension.md).</span></span>  
  
- <span data-ttu-id="218e5-153">`TemplateBinding` permet à un modèle de contrôle d’utiliser des valeurs pour des propriétés basées sur un modèle provenant de propriétés définies par un modèle objet de la classe destinée à utiliser le modèle.</span><span class="sxs-lookup"><span data-stu-id="218e5-153">`TemplateBinding` enables a control template to use values for templated properties that come from object-model-defined properties of the class that will use the template.</span></span> <span data-ttu-id="218e5-154">En d’autres termes, la propriété au sein de la définition du modèle peut accéder à un contexte qui existe uniquement une fois que le modèle est appliqué.</span><span class="sxs-lookup"><span data-stu-id="218e5-154">In other words, the property within the template definition can access a context that only exists once the template is applied.</span></span> <span data-ttu-id="218e5-155">Pour plus d’informations, consultez [TemplateBinding, extension de balisage](templatebinding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-155">For details, see [TemplateBinding Markup Extension](templatebinding-markup-extension.md).</span></span> <span data-ttu-id="218e5-156">Pour plus d’informations sur l’utilisation pratique de `TemplateBinding`, consultez [Style avec ControlTemplates, exemple](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating).</span><span class="sxs-lookup"><span data-stu-id="218e5-156">For more information on the practical use of `TemplateBinding`, see [Styling with ControlTemplates Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating).</span></span>  
  
- <span data-ttu-id="218e5-157">`ColorConvertedBitmap` prend en charge un scénario d’acquisition d’images relativement avancé.</span><span class="sxs-lookup"><span data-stu-id="218e5-157">`ColorConvertedBitmap` supports a relatively advanced imaging scenario.</span></span> <span data-ttu-id="218e5-158">Pour plus d’informations, consultez [ColorConvertedBitmap, extension de balisage](colorconvertedbitmap-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-158">For details, see [ColorConvertedBitmap Markup Extension](colorconvertedbitmap-markup-extension.md).</span></span>  
  
- <span data-ttu-id="218e5-159">`ComponentResourceKey` et `ThemeDictionary` prennent en charge les aspects de la recherche de ressources, en particulier pour les ressources et les thèmes empaquetés avec des contrôles personnalisés.</span><span class="sxs-lookup"><span data-stu-id="218e5-159">`ComponentResourceKey` and `ThemeDictionary` support aspects of resource lookup, particularly for resources and themes that are packaged with custom controls.</span></span> <span data-ttu-id="218e5-160">Pour plus d’informations, consultez [ComponentResourceKey, extension de balisage](componentresourcekey-markup-extension.md), [ThemeDictionary, extension de balisage](themedictionary-markup-extension.md) ou [Vue d’ensemble de la création de contrôles](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-160">For more information, see [ComponentResourceKey Markup Extension](componentresourcekey-markup-extension.md), [ThemeDictionary Markup Extension](themedictionary-markup-extension.md), or [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>  
  
<a name="StarExtension"></a>   
## <a name="extension-classes"></a><span data-ttu-id="218e5-161">Classes d’extension \*</span><span class="sxs-lookup"><span data-stu-id="218e5-161">\*Extension Classes</span></span>  
 <span data-ttu-id="218e5-162">Pour le langage XAML général et les extensions de balisage spécifiques à WPF, le comportement de chaque extension de balisage est identifié sur un processeur XAML par le biais d’une classe `*Extension` qui dérive de <xref:System.Windows.Markup.MarkupExtension>et fournit une implémentation de la méthode <xref:System.Windows.Markup.StaticExtension.ProvideValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="218e5-162">For both the general XAML language and WPF-specific markup extensions, the behavior of each markup extension is identified to a XAML processor through a `*Extension` class that derives from <xref:System.Windows.Markup.MarkupExtension>, and provides an implementation of the <xref:System.Windows.Markup.StaticExtension.ProvideValue%2A> method.</span></span> <span data-ttu-id="218e5-163">Cette méthode au niveau de chaque extension fournit l’objet qui est retourné au moment où l’extension de balisage est évaluée.</span><span class="sxs-lookup"><span data-stu-id="218e5-163">This method on each extension provides the object that is returned when the markup extension is evaluated.</span></span> <span data-ttu-id="218e5-164">L’objet retourné est généralement évalué en fonction des différents jetons de chaîne passés à l’extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="218e5-164">The returned object is typically evaluated based on the various string tokens that are passed to the markup extension.</span></span>  
  
 <span data-ttu-id="218e5-165">Par exemple, la classe <xref:System.Windows.StaticResourceExtension> fournit l’implémentation de surface de la recherche de ressources réelle afin que son implémentation <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> retourne l’objet demandé, avec l’entrée de cette implémentation particulière représentant une chaîne utilisée pour rechercher la ressource par son `x:Key`.</span><span class="sxs-lookup"><span data-stu-id="218e5-165">For example, the <xref:System.Windows.StaticResourceExtension> class provides the surface implementation of actual resource lookup so that its <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> implementation returns the object that is requested, with the input of that particular implementation being a string that is used to look up the resource by its `x:Key`.</span></span> <span data-ttu-id="218e5-166">L’essentiel de cette implémentation n’a pas d’importance si vous utilisez une extension de balisage existante.</span><span class="sxs-lookup"><span data-stu-id="218e5-166">Much of this implementation detail is unimportant if you are using an existing markup extension.</span></span>  
  
 <span data-ttu-id="218e5-167">Certaines extensions de balisage n’utilisent pas d’arguments de jeton de chaîne.</span><span class="sxs-lookup"><span data-stu-id="218e5-167">Some markup extensions do not use string token arguments.</span></span> <span data-ttu-id="218e5-168">Cela s’explique soit par le fait qu’ils retournent une valeur statique ou cohérente, soit par le fait que le contexte de la valeur devant être retournée est disponible via l’un des services transmis par le paramètre `serviceProvider`.</span><span class="sxs-lookup"><span data-stu-id="218e5-168">This is either because they return a static or consistent value, or because context for what value should be returned is available through one of the services passed through the `serviceProvider` parameter.</span></span>  
  
 <span data-ttu-id="218e5-169">Le modèle de nommage `*Extension` est fourni par souci pratique et de cohérence.</span><span class="sxs-lookup"><span data-stu-id="218e5-169">The `*Extension` naming pattern is for convenience and consistency.</span></span> <span data-ttu-id="218e5-170">Il n’est pas nécessaire à un processeur XAML pour identifier cette classe comme étant une prise en charge d’une extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="218e5-170">It is not necessary in order for a XAML processor to identify that class as support for a markup extension.</span></span> <span data-ttu-id="218e5-171">Tant que votre code base comprend System. xaml et utilise .NET Framework implémentations de services XAML, tout ce qui est nécessaire pour être reconnu en tant qu’extension de balisage XAML consiste à dériver de <xref:System.Windows.Markup.MarkupExtension> et à prendre en charge une syntaxe de construction.</span><span class="sxs-lookup"><span data-stu-id="218e5-171">So long as your codebase includes System.Xaml and uses .NET Framework XAML Services implementations, all that is necessary to be recognized as a XAML markup extension is to derive from <xref:System.Windows.Markup.MarkupExtension> and to support a construction syntax.</span></span> <span data-ttu-id="218e5-172">WPF définit les classes d’activation de l’extension de balisage qui ne suivent pas le modèle d’affectation de noms `*Extension`, par exemple <xref:System.Windows.Data.Binding>.</span><span class="sxs-lookup"><span data-stu-id="218e5-172">WPF defines markup extension-enabling classes that do not follow the `*Extension` naming pattern, for example <xref:System.Windows.Data.Binding>.</span></span> <span data-ttu-id="218e5-173">En général, la raison à cela est que la classe prend en charge des scénarios qui dépassent la prise en charge pure de l’extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="218e5-173">Typically the reason for this is that the class supports scenarios beyond pure markup extension support.</span></span> <span data-ttu-id="218e5-174">Dans le cas de <xref:System.Windows.Data.Binding>, cette classe prend en charge l’accès au moment de l’exécution aux méthodes et aux propriétés de l’objet pour les scénarios qui n’ont rien à faire avec XAML.</span><span class="sxs-lookup"><span data-stu-id="218e5-174">In the case of <xref:System.Windows.Data.Binding>, that class supports run-time access to methods and properties of the object for scenarios that have nothing to do with XAML.</span></span>  
  
### <a name="extension-class-interpretation-of-initialization-text"></a><span data-ttu-id="218e5-175">Interprétation du texte d’initialisation par la classe d’extension</span><span class="sxs-lookup"><span data-stu-id="218e5-175">Extension Class Interpretation of Initialization Text</span></span>  
 <span data-ttu-id="218e5-176">Les jetons de chaîne situés à la suite du nom d’extension de balisage et se trouvant toujours entre accolades sont interprétés par un processeur XAML de l’une des manières suivantes :</span><span class="sxs-lookup"><span data-stu-id="218e5-176">The string tokens following the markup extension name and still within the braces are interpreted by a XAML processor in one of the following ways:</span></span>  
  
- <span data-ttu-id="218e5-177">Une virgule représente toujours le séparateur ou délimiteur de jetons individuels.</span><span class="sxs-lookup"><span data-stu-id="218e5-177">A comma always represents the separator or delimiter of individual tokens.</span></span>  
  
- <span data-ttu-id="218e5-178">Si des jetons distincts ne contiennent pas de signes égal, chaque jeton est considéré comme un argument de constructeur.</span><span class="sxs-lookup"><span data-stu-id="218e5-178">If the individual separated tokens do not contain any equals signs, each token is treated as a constructor argument.</span></span> <span data-ttu-id="218e5-179">Chaque paramètre de constructeur doit être fourni dans le type et l’ordre correct attendus par cette signature.</span><span class="sxs-lookup"><span data-stu-id="218e5-179">Each constructor parameter must be given as the type expected by that signature, and in the proper order expected by that signature.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="218e5-180">Un processeur XAML doit appeler le constructeur qui correspond au nombre d’arguments du nombre de paires.</span><span class="sxs-lookup"><span data-stu-id="218e5-180">A XAML processor must call the constructor that matches the argument count of the number of pairs.</span></span> <span data-ttu-id="218e5-181">Pour cette raison, si vous implémentez une extension de balisage personnalisée, ne fournissez pas plusieurs constructeurs avec le même nombre d’arguments.</span><span class="sxs-lookup"><span data-stu-id="218e5-181">For this reason, if you are implementing a custom markup extension, do not provide multiple constructors with the same argument count.</span></span> <span data-ttu-id="218e5-182">Bien que le comportement d’un processeur XAML en présence de plusieurs chemins d’accès de constructeur d’extension de balisage ayant le même nombre de paramètres ne soit pas défini, il est probable que le processeur XAML soit autorisé à lever une exception d’utilisation si ce cas se présente dans les définitions de type d’extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="218e5-182">The behavior for how a XAML processor behaves if more than one markup extension constructor path with the same parameter count exists is not defined, but you should anticipate that a XAML processor is permitted to throw an exception on usage if this situation exists in the markup extension type definitions.</span></span>  
  
- <span data-ttu-id="218e5-183">Si les jetons séparés individuels contiennent des signes égal, un processeur XAML appelle d’abord le constructeur sans paramètre pour l’extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="218e5-183">If the individual separated tokens contain equals signs, then a XAML processor first calls the parameterless constructor for the markup extension.</span></span> <span data-ttu-id="218e5-184">Ensuite, chaque paire nom=valeur est interprétée comme un nom de propriété existant au niveau de l’extension de balisage et une valeur à assigner à cette propriété.</span><span class="sxs-lookup"><span data-stu-id="218e5-184">Then, each name=value pair is interpreted as a property name that exists on the markup extension, and a value to assign to that property.</span></span>  
  
- <span data-ttu-id="218e5-185">S’il existe un résultat parallèle entre le comportement du constructeur et le comportement de définition de la propriété dans une extension de balisage, peu importe le comportement que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="218e5-185">If there is a parallel result between the constructor behavior and the property setting behavior in a markup extension, it does not matter which behavior you use.</span></span> <span data-ttu-id="218e5-186">Il est plus courant d’utiliser les paires *propriété*`=`*valeur* pour les extensions de balisage qui ont plusieurs propriétés définissables, ne serait-ce que parce qu’elles donnent à votre balisage un caractère plus intentionnel et vous avez moins de chances d’inverser par erreur les paramètres du constructeur.</span><span class="sxs-lookup"><span data-stu-id="218e5-186">It is more common usage to use the *property*`=`*value* pairs for markup extensions that have more than one settable property, if only because it makes your markup more intentional and you are less likely to accidentally transpose constructor parameters.</span></span> <span data-ttu-id="218e5-187">(Lorsque vous spécifiez des paires propriété = valeur, ces propriétés peuvent être dans n’importe quel ordre.) En outre, il n’existe aucune garantie qu’une extension de balisage fournisse un paramètre de constructeur qui définit chacune de ses propriétés définissables.</span><span class="sxs-lookup"><span data-stu-id="218e5-187">(When you specify property=value pairs, those properties may be in any order.) Also, there is no guarantee that a markup extension supplies a constructor parameter that sets every one of its settable properties.</span></span> <span data-ttu-id="218e5-188">Par exemple, <xref:System.Windows.Data.Binding> est une extension de balisage, avec de nombreuses propriétés définissables par le biais de l’extension dans le formulaire de *valeur* de la *propriété*`=`, mais <xref:System.Windows.Data.Binding> ne prend en charge que deux constructeurs : un constructeur sans paramètre et un qui définit un chemin d’accès initial.</span><span class="sxs-lookup"><span data-stu-id="218e5-188">For example, <xref:System.Windows.Data.Binding> is a markup extension, with many properties that are settable through the extension in *property*`=`*value* form, but <xref:System.Windows.Data.Binding> only supports two constructors: a parameterless constructor, and one that sets an initial path.</span></span>  
  
- <span data-ttu-id="218e5-189">Une virgule littérale ne peut pas être passée à une extension de balisage sans échappement.</span><span class="sxs-lookup"><span data-stu-id="218e5-189">A literal comma cannot be passed to a markup extension without escapement.</span></span>  
  
<a name="EscapeSequences"></a>   
## <a name="escape-sequences-and-markup-extensions"></a><span data-ttu-id="218e5-190">Séquences d’échappement et extensions de balisage</span><span class="sxs-lookup"><span data-stu-id="218e5-190">Escape Sequences and Markup Extensions</span></span>  
 <span data-ttu-id="218e5-191">La gestion des attributs dans un processeur XAML utilise les accolades comme indicateurs d’une séquence d’extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="218e5-191">Attribute handling in a XAML processor uses the curly braces as indicators of a markup extension sequence.</span></span> <span data-ttu-id="218e5-192">Il est possible aussi de générer une valeur d’attribut de caractère d’accolade littérale, si nécessaire, en entrant une séquence d’échappement avec une paire d’accolades vides, suivie de l’accolade littérale.</span><span class="sxs-lookup"><span data-stu-id="218e5-192">It is also possible to produce a literal curly brace character attribute value if necessary, by entering an escape sequence using an empty curly brace pair followed by the literal curly brace.</span></span> <span data-ttu-id="218e5-193">Consultez [{} séquence d’échappement-extension de balisage](../../../desktop-wpf/xaml-services/escape-sequence-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-193">See [{} Escape Sequence - Markup Extension](../../../desktop-wpf/xaml-services/escape-sequence-markup-extension.md).</span></span>  
  
<a name="Nesting"></a>   
## <a name="nesting-markup-extensions-in-xaml-usage"></a><span data-ttu-id="218e5-194">Imbrication d’extensions de balisage dans l’utilisation de XAML</span><span class="sxs-lookup"><span data-stu-id="218e5-194">Nesting Markup Extensions in XAML Usage</span></span>  
 <span data-ttu-id="218e5-195">L’imbrication de plusieurs extensions de balisage est prise en charge, et chaque extension de balisage est d’abord évaluée au plus profond.</span><span class="sxs-lookup"><span data-stu-id="218e5-195">Nesting of multiple markup extensions is supported, and each markup extension will be evaluated deepest first.</span></span> <span data-ttu-id="218e5-196">Penchons-nous, par exemple, sur l’utilisation suivante :</span><span class="sxs-lookup"><span data-stu-id="218e5-196">For example, consider the following usage:</span></span>  
  
```xaml  
<Setter Property="Background"  
  Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />  
```  
  
 <span data-ttu-id="218e5-197">Dans ce cas, l’instruction `x:Static` est évaluée en premier et retourne une chaîne.</span><span class="sxs-lookup"><span data-stu-id="218e5-197">In this usage, the `x:Static` statement is evaluated first and returns a string.</span></span> <span data-ttu-id="218e5-198">Cette chaîne est ensuite utilisée comme argument pour `DynamicResource`.</span><span class="sxs-lookup"><span data-stu-id="218e5-198">That string is then used as the argument for `DynamicResource`.</span></span>  
  
## <a name="markup-extensions-and-property-element-syntax"></a><span data-ttu-id="218e5-199">Extensions de balisage et syntaxe des éléments de propriété</span><span class="sxs-lookup"><span data-stu-id="218e5-199">Markup Extensions and Property Element Syntax</span></span>  
 <span data-ttu-id="218e5-200">Quand elle est utilisée comme un élément objet qui fournit une valeur d’élément de propriété, une classe d’extension de balisage ne se distingue pas visuellement d’un élément objet associé à un type ordinaire qui peut être utilisé en XAML.</span><span class="sxs-lookup"><span data-stu-id="218e5-200">When used as an object element that fills a property element value, a markup extension class is visually indistinguishable from a typical type-backed object element that can be used in XAML.</span></span> <span data-ttu-id="218e5-201">D’un point de vue pratique, la différence entre un élément objet ordinaire et une extension de balisage vient du fait que l’extension de balisage est soit évaluée en valeur typée, soit différée en tant qu’expression.</span><span class="sxs-lookup"><span data-stu-id="218e5-201">The practical difference between a typical object element and a markup extension is that the markup extension is either evaluated to a typed value or deferred as an expression.</span></span> <span data-ttu-id="218e5-202">Par conséquent, les mécanismes qui interviennent en cas d’erreur de type pour les valeurs de propriété de l’extension de balisage sont différents, à l’instar de la façon dont une propriété à liaison tardive est traitée dans d’autres modèles de programmation.</span><span class="sxs-lookup"><span data-stu-id="218e5-202">Therefore the mechanisms for any possible type errors of property values for the markup extension will be different, similar to how a late-bound property is treated in other programming models.</span></span> <span data-ttu-id="218e5-203">Un élément objet ordinaire fera l’objet d’une évaluation de la correspondance de type par rapport à la propriété cible qu’il définit pendant l’analyse du code XAML.</span><span class="sxs-lookup"><span data-stu-id="218e5-203">An ordinary object element will be evaluated for type match against the target property it is setting when the XAML is parsed.</span></span>  
  
 <span data-ttu-id="218e5-204">La plupart des extensions de balisage, quand elles sont utilisées dans une syntaxe d’éléments objet pour remplir un élément de propriété, ne doit pas comporter de contenu ni toute autre syntaxe d’éléments de propriété.</span><span class="sxs-lookup"><span data-stu-id="218e5-204">Most markup extensions, when used in object element syntax to fill a property element, would not have content or any further property element syntax within.</span></span> <span data-ttu-id="218e5-205">Par conséquent, vous devez fermer la balise de l’élément objet et ne fournir aucun élément enfant.</span><span class="sxs-lookup"><span data-stu-id="218e5-205">Thus you would close the object element tag, and provide no child elements.</span></span> <span data-ttu-id="218e5-206">Chaque fois qu’un processeur XAML rencontre un élément objet, le constructeur de cette classe est appelé, ce qui instancie l’objet créé à partir de l’élément analysé.</span><span class="sxs-lookup"><span data-stu-id="218e5-206">Whenever any object element is encountered by a XAML processor, the constructor for that class is called, which instantiates the object created from the parsed element.</span></span> <span data-ttu-id="218e5-207">Une classe d’extension de balisage n’est pas différente : Si vous souhaitez que votre extension de balisage soit utilisable dans la syntaxe d’élément objet, vous devez fournir un constructeur sans paramètre.</span><span class="sxs-lookup"><span data-stu-id="218e5-207">A markup extension class is no different: if you want your markup extension to be usable in object element syntax, you must provide a parameterless constructor.</span></span> <span data-ttu-id="218e5-208">Certaines extensions de balisage existantes ont au moins une valeur de propriété requise qui doit être spécifiée pour une initialisation efficace.</span><span class="sxs-lookup"><span data-stu-id="218e5-208">Some existing markup extensions have at least one required property value that must be specified for effective initialization.</span></span> <span data-ttu-id="218e5-209">Si tel est le cas, cette valeur de propriété est généralement fournie en tant qu’attribut de propriété au niveau de l’élément objet.</span><span class="sxs-lookup"><span data-stu-id="218e5-209">If so, that property value is typically given as a property attribute on the object element.</span></span> <span data-ttu-id="218e5-210">Les extensions de balisage qui ont des propriétés requises (et les noms de ces propriétés) sont notées dans les pages de référence [Fonctionnalités de langage pour les espaces de noms XAML (x:)](../../../desktop-wpf/xaml-services/namespace-language-features.md) et [Extensions XAML WPF](wpf-xaml-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="218e5-210">In the [XAML Namespace (x:) Language Features](../../../desktop-wpf/xaml-services/namespace-language-features.md) and [WPF XAML Extensions](wpf-xaml-extensions.md) reference pages, markup extensions that have required properties (and the names of required properties) will be noted.</span></span> <span data-ttu-id="218e5-211">Ces pages indiquent aussi si la syntaxe des éléments objet ou des attributs est rejetée pour des extensions de balisage particulières.</span><span class="sxs-lookup"><span data-stu-id="218e5-211">Reference pages will also note if either object element syntax or attribute syntax is disallowed for particular markup extensions.</span></span> <span data-ttu-id="218e5-212">Il convient d’attirer l’attention sur le cas de l’[extension de balisage x:Array](../../../desktop-wpf/xaml-services/xarray-markup-extension.md), qui ne peut pas prendre en charge la syntaxe d’attribut, car le contenu de ce tableau doit être spécifié dans le balisage en tant contenu.</span><span class="sxs-lookup"><span data-stu-id="218e5-212">A notable case is [x:Array Markup Extension](../../../desktop-wpf/xaml-services/xarray-markup-extension.md), which cannot support attribute syntax because the contents of that array must be specified within the tagging as content.</span></span> <span data-ttu-id="218e5-213">Le contenu du tableau étant géré en tant qu’objets généraux, aucun convertisseur de type par défaut ne peut être exécuté pour l’attribut.</span><span class="sxs-lookup"><span data-stu-id="218e5-213">The array contents are handled as general objects, therefore no default type converter for the attribute is feasible.</span></span> <span data-ttu-id="218e5-214">De plus, l’[extension de balisage x:Array](../../../desktop-wpf/xaml-services/xarray-markup-extension.md) nécessite un paramètre `type`.</span><span class="sxs-lookup"><span data-stu-id="218e5-214">Also, [x:Array Markup Extension](../../../desktop-wpf/xaml-services/xarray-markup-extension.md) requires a `type` parameter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="218e5-215">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="218e5-215">See also</span></span>

- [<span data-ttu-id="218e5-216">Vue d’ensemble du langage XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="218e5-216">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="218e5-217">Fonctionnalités de langage pour les espaces de noms XAML (x:)</span><span class="sxs-lookup"><span data-stu-id="218e5-217">XAML Namespace (x:) Language Features</span></span>](../../../desktop-wpf/xaml-services/namespace-language-features.md)
- [<span data-ttu-id="218e5-218">Extensions XAML WPF</span><span class="sxs-lookup"><span data-stu-id="218e5-218">WPF XAML Extensions</span></span>](wpf-xaml-extensions.md)
- [<span data-ttu-id="218e5-219">StaticResource, extension de balisage</span><span class="sxs-lookup"><span data-stu-id="218e5-219">StaticResource Markup Extension</span></span>](staticresource-markup-extension.md)
- [<span data-ttu-id="218e5-220">Binding, extension de balisage</span><span class="sxs-lookup"><span data-stu-id="218e5-220">Binding Markup Extension</span></span>](binding-markup-extension.md)
- [<span data-ttu-id="218e5-221">DynamicResource, extension de balisage</span><span class="sxs-lookup"><span data-stu-id="218e5-221">DynamicResource Markup Extension</span></span>](dynamicresource-markup-extension.md)
- [<span data-ttu-id="218e5-222">x:Type, extension de balisage</span><span class="sxs-lookup"><span data-stu-id="218e5-222">x:Type Markup Extension</span></span>](../../../desktop-wpf/xaml-services/xtype-markup-extension.md)
