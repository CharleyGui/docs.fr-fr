---
title: Héritage de la valeur de propriété
ms.date: 03/30/2017
helpviewer_keywords:
- inheritance [WPF], property values
- value inheritance [WPF]
- properties [WPF], value inheritance
ms.assetid: d7c338f9-f2bf-48ed-832c-7be58ac390e4
ms.openlocfilehash: b63f307d9edffd14315d383d8e06419fa141aee1
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79187194"
---
# <a name="property-value-inheritance"></a><span data-ttu-id="f267e-102">Héritage de la valeur de propriété</span><span class="sxs-lookup"><span data-stu-id="f267e-102">Property Value Inheritance</span></span>
<span data-ttu-id="f267e-103">L’héritage de la valeur de propriété est une fonctionnalité du système de propriétés [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f267e-103">Property value inheritance is a feature of the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system.</span></span> <span data-ttu-id="f267e-104">L’héritage de la valeur de propriété permet aux éléments enfants d’une arborescence d’éléments d’obtenir la valeur d’une propriété particulière des éléments parents, en héritant cette valeur telle qu’elle a été définie dans l’élément parent le plus proche.</span><span class="sxs-lookup"><span data-stu-id="f267e-104">Property value inheritance enables child elements in a tree of elements to obtain the value of a particular property from parent elements, inheriting that value as it was set anywhere in the nearest parent element.</span></span> <span data-ttu-id="f267e-105">L’élément parent peut également avoir obtenu sa valeur par héritage de la valeur de propriété, le système peut donc remonter jusqu’à la racine de la page.</span><span class="sxs-lookup"><span data-stu-id="f267e-105">The parent element might also have obtained its value through property value inheritance, so the system potentially recurses all the way to the page root.</span></span> <span data-ttu-id="f267e-106">L’héritage de la valeur de propriété n’est pas le comportement du système de propriétés par défaut. Une propriété doit être établie avec un paramètre de métadonnées particulier pour pouvoir lancer l’héritage de la valeur de propriété sur les éléments enfants.</span><span class="sxs-lookup"><span data-stu-id="f267e-106">Property value inheritance is not the default property system behavior; a property must be established with a particular metadata setting in order to cause that property to initiate property value inheritance on child elements.</span></span>  

<a name="Property_Value_Inheritance_is_Containment_Inheritance"></a>
## <a name="property-value-inheritance-is-containment-inheritance"></a><span data-ttu-id="f267e-107">L’héritage de la valeur de propriété est un héritage de relation contenant-contenu</span><span class="sxs-lookup"><span data-stu-id="f267e-107">Property Value Inheritance Is Containment Inheritance</span></span>  
 <span data-ttu-id="f267e-108">Le terme « Héritage » ne désigne pas tout à fait le même concept que l’héritage dans le contexte des types et de la programmation générale orientée objet, où les classes dérivées héritent des définitions de membre de leurs classes de base.</span><span class="sxs-lookup"><span data-stu-id="f267e-108">"Inheritance" as a term here is not quite the same concept as inheritance in the context of types and general object-oriented programming, where derived classes inherit member definitions from their base classes.</span></span> <span data-ttu-id="f267e-109">Cette signification d’héritage s’applique également dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] : les propriétés définies dans différentes classes de base sont exposées comme des attributs pour les classes [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] dérivées quand elles sont utilisées comme éléments et exposées sous forme de membres pour le code.</span><span class="sxs-lookup"><span data-stu-id="f267e-109">That meaning of inheritance is also active in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: properties defined in various base classes are exposed as attributes for derived [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] classes when used as elements, and exposed as members for code.</span></span> <span data-ttu-id="f267e-110">L’héritage de la valeur de propriété concerne particulièrement la façon dont les valeurs de propriété peuvent hériter d’un élément à l’autre en fonction des relations parent-enfant dans une arborescence d’éléments.</span><span class="sxs-lookup"><span data-stu-id="f267e-110">Property value inheritance is particularly about how property values can inherit from one element to another on the basis of the parent-child relationships within a tree of elements.</span></span> <span data-ttu-id="f267e-111">Cette arborescence d’éléments est plus directement visible quand des éléments sont imbriqués dans d’autres éléments à mesure que vous définissez des applications dans le balisage [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f267e-111">That tree of elements is most directly visible when nesting elements inside other elements as you define applications in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] markup.</span></span> <span data-ttu-id="f267e-112">Les arborescences d’objets peuvent également être créées par programmation en ajoutant des objets aux collections désignées d’autres objets, et l’héritage de la valeur de propriété fonctionne de la même façon dans l’arborescence terminée au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="f267e-112">Trees of objects can also be created programmatically by adding objects to designated collections of other objects, and property value inheritance works the same way in the finished tree at run time.</span></span>  
  
<a name="Practical_Applications_of_Property_Value_Inheritance"></a>
## <a name="practical-applications-of-property-value-inheritance"></a><span data-ttu-id="f267e-113">Applications pratiques de l’héritage de la valeur de propriété</span><span class="sxs-lookup"><span data-stu-id="f267e-113">Practical Applications of Property Value Inheritance</span></span>  
 <span data-ttu-id="f267e-114">Les [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] API comprennent plusieurs propriétés dont l’héritage immobilier est activé.</span><span class="sxs-lookup"><span data-stu-id="f267e-114">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] APIs include several properties that have property inheritance enabled.</span></span> <span data-ttu-id="f267e-115">En règle générale, il s’agit d’une propriété définie une seule fois par page, mais quand elle est également membre d’une des classes d’élément de base, elle existe aussi sur la plupart des éléments enfants.</span><span class="sxs-lookup"><span data-stu-id="f267e-115">Typically, the scenario for these is that they involve a property where it is appropriate that the property be set only once per page, but where that property is also a member of one of the base element classes and thus would also exist on most of the child elements.</span></span> <span data-ttu-id="f267e-116">Par exemple, <xref:System.Windows.FrameworkElement.FlowDirection%2A> la propriété contrôle la direction que le contenu débité doit être présentée et disposée sur la page.</span><span class="sxs-lookup"><span data-stu-id="f267e-116">For example, the <xref:System.Windows.FrameworkElement.FlowDirection%2A> property controls which direction flowed content should be presented and arranged on the page.</span></span> <span data-ttu-id="f267e-117">En règle générale, vous voulez que le flux de texte soit traité de manière cohérente dans l’ensemble des éléments enfants.</span><span class="sxs-lookup"><span data-stu-id="f267e-117">Typically, you want the text flow concept to be handled consistently throughout all child elements.</span></span> <span data-ttu-id="f267e-118">Si la direction du flux est redéfinie à un certain niveau de l’arborescence d’éléments par l’utilisateur ou une action de l’environnement, elle est redéfinie partout.</span><span class="sxs-lookup"><span data-stu-id="f267e-118">If flow direction were for some reason reset in some level of the element tree by user or environment action, it should typically be reset throughout.</span></span> <span data-ttu-id="f267e-119">Lorsque <xref:System.Windows.FrameworkElement.FlowDirection%2A> la propriété est faite pour hériter, la valeur n’a besoin d’être définie ou réinitialisée qu’une seule fois au niveau de l’arbre élément qui englobe les besoins de présentation de chaque page de l’application.</span><span class="sxs-lookup"><span data-stu-id="f267e-119">When the <xref:System.Windows.FrameworkElement.FlowDirection%2A> property is made to inherit, the value need only be set or reset once at the level in the element tree that encompasses the presentation needs of each page in the application.</span></span> <span data-ttu-id="f267e-120">Même la valeur par défaut initiale hérite de cette manière.</span><span class="sxs-lookup"><span data-stu-id="f267e-120">Even the initial default value will inherit in this way.</span></span> <span data-ttu-id="f267e-121">Le modèle d’héritage de la valeur de propriété permet toujours aux éléments individuels de redéfinir la valeur dans les rares cas où un mélange de directions de flux est intentionnel.</span><span class="sxs-lookup"><span data-stu-id="f267e-121">The property value inheritance model still enables individual elements to reset the value for the rare cases where having a mix of flow directions is intentional.</span></span>  
  
<a name="Making_a_Custom_Property_Inheritable"></a>
## <a name="making-a-custom-property-inheritable"></a><span data-ttu-id="f267e-122">Transformer une propriété personnalisée en propriété héritable</span><span class="sxs-lookup"><span data-stu-id="f267e-122">Making a Custom Property Inheritable</span></span>  
 <span data-ttu-id="f267e-123">En changeant les métadonnées d’une propriété personnalisée, vous pouvez rendre héritables vos propres propriétés personnalisées.</span><span class="sxs-lookup"><span data-stu-id="f267e-123">By changing a custom property's metadata, you can also make your own custom properties inheritable.</span></span> <span data-ttu-id="f267e-124">Toutefois, notez qu’une propriété désignée comme héritable a un impact sur les performances.</span><span class="sxs-lookup"><span data-stu-id="f267e-124">Note, however, that designating a property as inheritable does have some performance considerations.</span></span> <span data-ttu-id="f267e-125">Dans les cas où cette propriété n’a pas de valeur locale établie ou a une valeur obtenue par le biais de styles, de modèles ou d’une liaison de données, une propriété héritable transmet ses valeurs de propriété à tous les éléments enfants dans l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="f267e-125">In cases where that property does not have an established local value, or a value obtained through styles, templates, or data binding, an inheritable property provides its assigned property values to all child elements in the logical tree.</span></span>  
  
 <span data-ttu-id="f267e-126">Pour qu’une propriété participe à l’héritage de valeur, créez une propriété jointe, comme décrit dans [Enregistrer une propriété jointe](how-to-register-an-attached-property.md).</span><span class="sxs-lookup"><span data-stu-id="f267e-126">To make a property participate in value inheritance, create a custom attached property, as described in [Register an Attached Property](how-to-register-an-attached-property.md).</span></span> <span data-ttu-id="f267e-127">Enregistrez la propriété avec<xref:System.Windows.FrameworkPropertyMetadata>des métadonnées ( ) et spécifiez l’option "Héritière" dans les paramètres d’options dans les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="f267e-127">Register the property with metadata (<xref:System.Windows.FrameworkPropertyMetadata>) and specify the "Inherits" option in the options settings within that metadata.</span></span> <span data-ttu-id="f267e-128">Vérifiez aussi que la propriété a une valeur par défaut établie, car cette valeur hérite désormais.</span><span class="sxs-lookup"><span data-stu-id="f267e-128">Also make sure that the property has an established default value, because that value will now inherit.</span></span> <span data-ttu-id="f267e-129">Même si vous avez enregistré la propriété comme propriété jointe, vous pouvez aussi créer un « wrapper » de propriété pour un avoir accès get/set sur le type de propriétaire, comme pour les propriétés de dépendance « non jointes ».</span><span class="sxs-lookup"><span data-stu-id="f267e-129">Although you registered the property as attached, you might also want to create a property "wrapper" for get/set access on the owner type, just as you would for an "nonattached" dependency property.</span></span> <span data-ttu-id="f267e-130">Après cela, la propriété héréditaire peut être définie en utilisant l’emballage de propriété directe sur le type de propriétaire <xref:System.Windows.DependencyObject>ou les types dérivés, ou il peut être défini en utilisant la syntaxe de propriété attachée sur n’importe quel .</span><span class="sxs-lookup"><span data-stu-id="f267e-130">After doing so, the inheritable property can either be set by using the direct property wrapper on the owner type or derived types, or it can be set by using the attached property syntax on any <xref:System.Windows.DependencyObject>.</span></span>  
  
 <span data-ttu-id="f267e-131">Les propriétés attachées sont conceptuellement semblables aux propriétés globales ; vous pouvez vérifier la <xref:System.Windows.DependencyObject> valeur sur n’importe quel et obtenir un résultat valide.</span><span class="sxs-lookup"><span data-stu-id="f267e-131">Attached properties are conceptually similar to global properties; you can check for the value on any <xref:System.Windows.DependencyObject> and get a valid result.</span></span> <span data-ttu-id="f267e-132">Le scénario typique pour les propriétés attachées est de fixer la valeur de propriété sur des éléments d’enfant, et ce<xref:System.Windows.DependencyObject>scénario est plus efficace si la propriété en question est une propriété jointe qui est toujours implicitement présente comme une propriété attachée sur chaque élément ( ) dans l’arbre.</span><span class="sxs-lookup"><span data-stu-id="f267e-132">The typical scenario for attached properties is to set property values on child elements, and that scenario is more effective if the property in question is an attached property that is always implicitly present as an attached property on each element (<xref:System.Windows.DependencyObject>) in the tree.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="f267e-133">Même si l’héritage de la valeur de propriété peut sembler fonctionner pour les propriétés de dépendance non jointes, le comportement de l’héritage d’une propriété non jointe au-delà de certaines limites d’éléments dans l’arborescence d’exécution n’est pas défini.</span><span class="sxs-lookup"><span data-stu-id="f267e-133">Although property value inheritance might appear to work for nonattached dependency properties, the inheritance behavior for a nonattached property through certain element boundaries in the run-time tree is undefined.</span></span> <span data-ttu-id="f267e-134">Utilisez <xref:System.Windows.DependencyProperty.RegisterAttached%2A> toujours pour enregistrer <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> les propriétés où vous spécifiez dans les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="f267e-134">Always use <xref:System.Windows.DependencyProperty.RegisterAttached%2A> to register properties where you specify <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> in the metadata.</span></span>  
  
<a name="InheritanceContext"></a>
## <a name="inheriting-property-values-across-tree-boundaries"></a><span data-ttu-id="f267e-135">Héritage de valeurs de propriété au-delà des limites d’arborescence</span><span class="sxs-lookup"><span data-stu-id="f267e-135">Inheriting Property Values Across Tree Boundaries</span></span>  
 <span data-ttu-id="f267e-136">L’héritage des propriétés fonctionne sur une arborescence d’éléments.</span><span class="sxs-lookup"><span data-stu-id="f267e-136">Property inheritance works by traversing a tree of elements.</span></span> <span data-ttu-id="f267e-137">Cette arborescence est souvent parallèle à l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="f267e-137">This tree is often parallel to the logical tree.</span></span> <span data-ttu-id="f267e-138">Cependant, chaque fois que vous incluez un objet WPF au niveau du <xref:System.Windows.Media.Brush>noyau dans la balisage qui définit un arbre élément, tel qu’un, vous avez créé un arbre logique discontinu.</span><span class="sxs-lookup"><span data-stu-id="f267e-138">However, whenever you include a WPF core-level object in the markup that defines an element tree, such as a <xref:System.Windows.Media.Brush>, you have created a discontinuous logical tree.</span></span> <span data-ttu-id="f267e-139">Un véritable arbre logique ne s’étend pas conceptuellement à travers le <xref:System.Windows.Media.Brush>, parce que l’arbre logique est un concept de niveau cadre WPF.</span><span class="sxs-lookup"><span data-stu-id="f267e-139">A true logical tree does not conceptually extend through the <xref:System.Windows.Media.Brush>, because the logical tree is a WPF framework-level concept.</span></span> <span data-ttu-id="f267e-140">Vous pouvez voir cela reflété dans les <xref:System.Windows.LogicalTreeHelper>résultats lors de l’utilisation des méthodes de .</span><span class="sxs-lookup"><span data-stu-id="f267e-140">You can see this reflected in the results when using the methods of <xref:System.Windows.LogicalTreeHelper>.</span></span> <span data-ttu-id="f267e-141">Cependant, l’héritage de valeur de propriété peut combler cette lacune dans l’arbre logique et peut encore passer des valeurs héritées <xref:System.Windows.Controls.Frame>par, tant que le bien héréditaire a été enregistré comme une propriété jointe et aucune limite délibérée de blocage d’héritage (comme un ) est rencontrée.</span><span class="sxs-lookup"><span data-stu-id="f267e-141">However, property value inheritance can bridge this gap in the logical tree and can still pass inherited values through, so long as the inheritable property was registered as an attached property and no deliberate inheritance-blocking boundary (such as a <xref:System.Windows.Controls.Frame>) is encountered.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f267e-142">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="f267e-142">See also</span></span>

- [<span data-ttu-id="f267e-143">Métadonnées de propriété de dépendance</span><span class="sxs-lookup"><span data-stu-id="f267e-143">Dependency Property Metadata</span></span>](dependency-property-metadata.md)
- [<span data-ttu-id="f267e-144">Vue d'ensemble des propriétés jointes</span><span class="sxs-lookup"><span data-stu-id="f267e-144">Attached Properties Overview</span></span>](attached-properties-overview.md)
- [<span data-ttu-id="f267e-145">Priorité de la valeur de la propriété de dépendance</span><span class="sxs-lookup"><span data-stu-id="f267e-145">Dependency Property Value Precedence</span></span>](dependency-property-value-precedence.md)
