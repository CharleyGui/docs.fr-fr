---
title: Priorité de la valeur de propriété de dépendance
ms.date: 03/30/2017
helpviewer_keywords:
- dependency properties [WPF], classes as owners
- dependency properties [WPF], metadata
- classes [WPF], owners of dependency properties
- metadata [WPF], dependency properties
ms.assetid: 1fbada8e-4867-4ed1-8d97-62c07dad7ebc
ms.openlocfilehash: 2abe89abf1ab246464c8f7a7ca7c87295b0b3946
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/03/2019
ms.locfileid: "73458980"
---
# <a name="dependency-property-value-precedence"></a><span data-ttu-id="0d2ae-102">Priorité de la valeur de propriété de dépendance</span><span class="sxs-lookup"><span data-stu-id="0d2ae-102">Dependency Property Value Precedence</span></span>
<a name="introduction"></a> <span data-ttu-id="0d2ae-103">Cette rubrique explique comment le fonctionnement du système de propriétés [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] peut affecter la valeur d’une propriété de dépendance, et décrit la priorité selon laquelle les aspects du système de propriétés s’appliquent à la valeur effective d’une propriété.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-103">This topic explains how the workings of the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system can affect the value of a dependency property, and describes the precedence by which aspects of the property system apply to the effective value of a property.</span></span>  

<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="0d2ae-104">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="0d2ae-104">Prerequisites</span></span>  
 <span data-ttu-id="0d2ae-105">Cette rubrique part du principe que vous savez ce que sont les propriétés de dépendance du point de vue d’un consommateur de propriétés de dépendance existantes sur les classes [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], et que vous avez lu la [Vue d’ensemble des propriétés de dépendance](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-105">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes, and have read [Dependency Properties Overview](dependency-properties-overview.md).</span></span> <span data-ttu-id="0d2ae-106">Pour pouvoir suivre les exemples de cette rubrique, vous devez également comprendre [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] et savoir comment écrire des applications [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0d2ae-106">To follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>  
  
<a name="intro"></a>   
## <a name="the-wpf-property-system"></a><span data-ttu-id="0d2ae-107">Le système de propriétés WPF</span><span class="sxs-lookup"><span data-stu-id="0d2ae-107">The WPF Property System</span></span>  
 <span data-ttu-id="0d2ae-108">Le système de propriétés [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] offre un moyen puissant pour faire en sorte que la valeur des propriétés de dépendance soit déterminée par différents facteurs. Il permet de bénéficier de fonctionnalités telles que la validation des propriétés en temps réel et les liaisons tardives, et notifie les propriétés connexes des changements apportés aux valeurs d’autres propriétés.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-108">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system offers a powerful way to have the value of dependency properties be determined by a variety of factors, enabling features such as real-time property validation, late binding, and notifying related properties of changes to values for other properties.</span></span> <span data-ttu-id="0d2ae-109">L’ordre et la logique exacts utilisés pour déterminer les valeurs des propriétés de dépendance sont relativement complexes.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-109">The exact order and logic that is used to determine dependency property values is reasonably complex.</span></span> <span data-ttu-id="0d2ae-110">Connaître cet ordre vous aidera à éviter les paramètres de propriétés inutiles, et peut également éliminer toute confusion quant aux raisons pour lesquelles une tentative visant à influencer ou à anticiper une valeur de propriété de dépendance n’a pas généré la valeur attendue.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-110">Knowing this order will help you avoid unnecessary property setting, and might also clear up confusion over exactly why some attempt to influence or anticipate a dependency property value did not end up resulting in the value you expected.</span></span>  
  
<a name="multiple_sets"></a>   
## <a name="dependency-properties-might-be-set-in-multiple-places"></a><span data-ttu-id="0d2ae-111">Les propriétés de dépendance peuvent être « définies » à plusieurs emplacements</span><span class="sxs-lookup"><span data-stu-id="0d2ae-111">Dependency Properties Might Be "Set" in Multiple Places</span></span>  
 <span data-ttu-id="0d2ae-112">Voici un exemple [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] où la même propriété (<xref:System.Windows.Controls.Control.Background%2A>) a trois opérations « Set » différentes qui peuvent influencer la valeur.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-112">The following is example [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] where the same property (<xref:System.Windows.Controls.Control.Background%2A>) has three different "set" operations that might influence the value.</span></span>  
  
 [!code-xaml[PropertiesOvwSupport#DPPrecedence](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml#dpprecedence)]  
  
 <span data-ttu-id="0d2ae-113">Ici, quelle sera la couleur appliquée selon vous ? Le rouge, le vert ou le bleu ?</span><span class="sxs-lookup"><span data-stu-id="0d2ae-113">Here, which color do you expect will apply—red, green, or blue?</span></span>  
  
 <span data-ttu-id="0d2ae-114">À l’exception des valeurs animées et du forçage, les jeux de propriétés locaux sont définis à la priorité la plus élevée.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-114">With the exception of animated values and coercion, local property sets are set at the highest precedence.</span></span> <span data-ttu-id="0d2ae-115">Si vous définissez une valeur localement, vous pouvez vous attendre à ce qu’elle soit honorée, même au-delà des styles ou des modèles de contrôle.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-115">If you set a value locally you can expect that the value will be honored, even above any styles or control templates.</span></span> <span data-ttu-id="0d2ae-116">Ici, dans l’exemple, <xref:System.Windows.Controls.Control.Background%2A> est défini sur Red en local.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-116">Here in the example, <xref:System.Windows.Controls.Control.Background%2A> is set to Red locally.</span></span> <span data-ttu-id="0d2ae-117">Par conséquent, le style défini dans cette portée, même s’il s’agit d’un style implicite qui s’applique normalement à tous les éléments de ce type dans cette portée, n’est pas la priorité la plus élevée pour donner à la propriété <xref:System.Windows.Controls.Control.Background%2A> sa valeur.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-117">Therefore, the style defined in this scope, even though it is an implicit style that would otherwise apply to all elements of that type in that scope, is not the highest precedence for giving the <xref:System.Windows.Controls.Control.Background%2A> property its value.</span></span>  <span data-ttu-id="0d2ae-118">Si vous supprimiez la valeur locale Red de cette instance de Button, le style aurait la priorité et le bouton obtiendrait la valeur Background à partir du style.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-118">If you removed the local value of Red from that Button instance, then the style would have precedence and the button would obtain the Background value from the style.</span></span>  <span data-ttu-id="0d2ae-119">Dans le style, les déclencheurs sont prioritaires. Le bouton sera donc bleu si la souris est sur lui, et vert dans le cas contraire.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-119">Within the style, triggers take precedence, so the button will be blue if the mouse is over it, and green otherwise.</span></span>  
  
<a name="listing"></a>   
## <a name="dependency-property-setting-precedence-list"></a><span data-ttu-id="0d2ae-120">Liste de priorité de définition de propriété de dépendance</span><span class="sxs-lookup"><span data-stu-id="0d2ae-120">Dependency Property Setting Precedence List</span></span>  
 <span data-ttu-id="0d2ae-121">Voici l’ordre définitif suivi par le système de propriétés lors de l’affectation des valeurs d’exécution des propriétés de dépendance.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-121">The following is the definitive order that the property system uses when assigning the run-time values of dependency properties.</span></span> <span data-ttu-id="0d2ae-122">La priorité la plus élevée est répertoriée en premier.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-122">Highest precedence is listed first.</span></span> <span data-ttu-id="0d2ae-123">Cette liste étend certaines des généralisations présentées dans la [Vue d’ensemble des propriétés de dépendance](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-123">This list expands on some of the generalizations made in the [Dependency Properties Overview](dependency-properties-overview.md).</span></span>  
  
1. <span data-ttu-id="0d2ae-124">**Forçage du système de propriétés.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-124">**Property system coercion.**</span></span> <span data-ttu-id="0d2ae-125">Pour plus d’informations sur le forçage, consultez [Forçage, animation et valeur de base](#animations) plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-125">For details on coercion, see [Coercion, Animation, and Base Value](#animations) later in this topic.</span></span>  
  
2. <span data-ttu-id="0d2ae-126">**Animations actives ou animations avec un comportement de blocage.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-126">**Active animations, or animations with a Hold behavior.**</span></span> <span data-ttu-id="0d2ae-127">Pour avoir un effet pratique, une animation d’une propriété doit pouvoir être prioritaire par rapport à la valeur de base (non animée), même si cette valeur a été définie localement.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-127">In order to have any practical effect, an animation of a property must be able to have precedence over the base (unanimated) value, even if that value was set locally.</span></span> <span data-ttu-id="0d2ae-128">Pour plus d’informations, consultez [Forçage, animation et valeur de base](#animations) plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-128">For details, see [Coercion, Animation, and Base Value](#animations) later in this topic.</span></span>  
  
3. <span data-ttu-id="0d2ae-129">**Valeur locale.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-129">**Local value.**</span></span> <span data-ttu-id="0d2ae-130">Une valeur locale peut être définie à l’aide de la propriété « wrapper », qui équivaut également à définir en tant qu’attribut ou élément de propriété dans [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], ou par un appel à l’API <xref:System.Windows.DependencyObject.SetValue%2A> à l’aide d’une propriété d’une instance spécifique.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-130">A local value might be set through the convenience of the "wrapper" property, which also equates to setting as an attribute or property element in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], or by a call to the <xref:System.Windows.DependencyObject.SetValue%2A> API using a property of a specific instance.</span></span> <span data-ttu-id="0d2ae-131">Si vous définissez une valeur locale à l’aide d’une liaison ou d’une ressource, celles-ci se comportent chacune en termes de priorité comme si une valeur directe avait été définie.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-131">If you set a local value by using a binding or a resource, these each act in the precedence as if a direct value was set.</span></span>  
  
4. <span data-ttu-id="0d2ae-132">**Propriétés de modèle TemplatedParent.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-132">**TemplatedParent template properties.**</span></span> <span data-ttu-id="0d2ae-133">Un élément a un <xref:System.Windows.FrameworkElement.TemplatedParent%2A> s’il a été créé dans le cadre d’un modèle (un <xref:System.Windows.Controls.ControlTemplate> ou <xref:System.Windows.DataTemplate>).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-133">An element has a <xref:System.Windows.FrameworkElement.TemplatedParent%2A> if it was created as part of a template (a <xref:System.Windows.Controls.ControlTemplate> or <xref:System.Windows.DataTemplate>).</span></span> <span data-ttu-id="0d2ae-134">Pour plus d’informations sur les cas où ceci est applicable, consultez [TemplatedParent](#templatedparent) plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-134">For details on when this applies, see [TemplatedParent](#templatedparent) later in this topic.</span></span> <span data-ttu-id="0d2ae-135">Dans le modèle, la priorité suivante s’applique :</span><span class="sxs-lookup"><span data-stu-id="0d2ae-135">Within the template, the following precedence applies:</span></span>  
  
    1. <span data-ttu-id="0d2ae-136">Déclenche à partir du modèle <xref:System.Windows.FrameworkElement.TemplatedParent%2A>.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-136">Triggers from the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template.</span></span>  
  
    2. <span data-ttu-id="0d2ae-137">Jeux de propriétés (généralement via des attributs [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]) dans le modèle <xref:System.Windows.FrameworkElement.TemplatedParent%2A>.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-137">Property sets (typically through [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] attributes) in the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template.</span></span>  
  
5. <span data-ttu-id="0d2ae-138">**Style implicite.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-138">**Implicit style.**</span></span> <span data-ttu-id="0d2ae-139">S’applique uniquement à la propriété `Style`.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-139">Applies only to the `Style` property.</span></span> <span data-ttu-id="0d2ae-140">La propriété `Style` est renseignée par toute ressource de style avec une clé qui correspond au type de cet élément.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-140">The `Style` property is filled by any style resource with a key that matches the type of that element.</span></span> <span data-ttu-id="0d2ae-141">Cette ressource de style doit exister dans la page ou dans l’application ; la recherche d’une ressource de style implicite ne se poursuit pas dans les thèmes.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-141">That style resource must exist either in the page or the application; lookup for an implicit style resource does not proceed into the themes.</span></span>  
  
6. <span data-ttu-id="0d2ae-142">**Déclencheurs de styles.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-142">**Style triggers.**</span></span> <span data-ttu-id="0d2ae-143">Déclencheurs dans les styles de page ou d’application (ces styles peuvent être explicites ou implicites, mais pas issus des styles par défaut, qui ont une priorité inférieure).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-143">The triggers within styles from page or application (these styles might be either explicit or implicit styles, but not from the default styles, which have lower precedence).</span></span>  
  
7. <span data-ttu-id="0d2ae-144">**Déclencheurs de modèles.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-144">**Template triggers.**</span></span> <span data-ttu-id="0d2ae-145">Tout déclencheur d’un modèle dans un style, ou un modèle appliqué directement.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-145">Any trigger from a template within a style, or a directly applied template.</span></span>  
  
8. <span data-ttu-id="0d2ae-146">**Style Setters.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-146">**Style setters.**</span></span> <span data-ttu-id="0d2ae-147">Valeurs d’un <xref:System.Windows.Setter> dans les styles de page ou d’application.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-147">Values from a <xref:System.Windows.Setter> within styles from page or application.</span></span>  
  
9. <span data-ttu-id="0d2ae-148">**Style (de thème) par défaut.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-148">**Default (theme) style.**</span></span> <span data-ttu-id="0d2ae-149">Pour plus d’informations sur les cas où ceci est applicable, et sur la relation entre les styles de thème et les modèles dans les styles de thème, consultez [Style (de thème) par défaut](#themestyles) plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-149">For details on when this applies, and how theme styles relate to the templates within theme styles, see [Default (Theme) Styles](#themestyles) later in this topic.</span></span> <span data-ttu-id="0d2ae-150">Dans un style par défaut, l’ordre de priorité suivant s’applique :</span><span class="sxs-lookup"><span data-stu-id="0d2ae-150">Within a default style, the following order of precedence applies:</span></span>  
  
    1. <span data-ttu-id="0d2ae-151">Déclencheurs actifs dans le style de thème.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-151">Active triggers in the theme style.</span></span>  
  
    2. <span data-ttu-id="0d2ae-152">Méthodes setter dans le style de thème.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-152">Setters in the theme style.</span></span>  
  
10. <span data-ttu-id="0d2ae-153">**Héritage.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-153">**Inheritance.**</span></span> <span data-ttu-id="0d2ae-154">Quelques propriétés de dépendance héritent de leurs valeurs d’élément parent à éléments enfants, et n’ont donc pas besoin d’être définies spécifiquement sur chaque élément dans une application.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-154">A few dependency properties inherit their values from parent element to child elements, such that they need not be set specifically on each element throughout an application.</span></span> <span data-ttu-id="0d2ae-155">Pour plus d’informations, consultez [Héritage de la valeur de propriété](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-155">For details see [Property Value Inheritance](property-value-inheritance.md).</span></span>  
  
11. <span data-ttu-id="0d2ae-156">**Valeur par défaut issue des métadonnées de propriété de dépendance.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-156">**Default value from dependency property metadata.**</span></span> <span data-ttu-id="0d2ae-157">Toute propriété de dépendance peut avoir une valeur par défaut établie par l’inscription de cette propriété particulière dans le système de propriétés.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-157">Any given dependency property may have a default value as established by the property system registration of that particular property.</span></span> <span data-ttu-id="0d2ae-158">En outre, les classes dérivées qui héritent d’une propriété de dépendance peuvent substituer ces métadonnées (notamment la valeur par défaut) pour chaque type.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-158">Also, derived classes that inherit a dependency property have the option to override that metadata (including the default value) on a per-type basis.</span></span> <span data-ttu-id="0d2ae-159">Pour plus d’informations, consultez [Métadonnées de propriété de dépendance](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-159">See [Dependency Property Metadata](dependency-property-metadata.md) for more information.</span></span> <span data-ttu-id="0d2ae-160">Étant donné que l’héritage est vérifié avant la valeur par défaut, pour une propriété héritée une valeur par défaut d’élément parent est prioritaire par rapport à un élément enfant.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-160">Because inheritance is checked before default value, for an inherited property, a parent element default value takes precedence over a child element.</span></span>  <span data-ttu-id="0d2ae-161">Par conséquent, si une propriété pouvant être héritée n’est définie nulle part, la valeur par défaut spécifiée pour la racine ou le parent est utilisée au lieu de la valeur par défaut de l’élément enfant.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-161">Consequently, if an inheritable property is not set anywhere, the default value as specified on the root or parent is used instead of the child element default value.</span></span>  
  
<a name="templatedparent"></a>   
## <a name="templatedparent"></a><span data-ttu-id="0d2ae-162">TemplatedParent</span><span class="sxs-lookup"><span data-stu-id="0d2ae-162">TemplatedParent</span></span>  
 <span data-ttu-id="0d2ae-163">TemplatedParent en tant qu’élément de priorité ne s’applique pas à une propriété d’un élément que vous déclarez directement dans le balisage d’application standard.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-163">TemplatedParent as a precedence item does not apply to any property of an element that you declare directly in standard application markup.</span></span> <span data-ttu-id="0d2ae-164">Le concept de TemplatedParent existe uniquement pour les éléments enfants dans une arborescence visuelle qui sont créés par l’intermédiaire de l’application du modèle.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-164">The TemplatedParent concept exists only for child items within a visual tree that come into existence through the application of the template.</span></span> <span data-ttu-id="0d2ae-165">Lorsque le système de propriétés recherche une valeur dans le modèle de <xref:System.Windows.FrameworkElement.TemplatedParent%2A>, il recherche dans le modèle qui a créé cet élément.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-165">When the property system searches the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template for a value, it is searching the template that created that element.</span></span> <span data-ttu-id="0d2ae-166">Les valeurs de propriété du modèle <xref:System.Windows.FrameworkElement.TemplatedParent%2A> se comportent généralement comme si elles étaient définies en tant que valeur locale sur l’élément enfant, mais cette priorité moindre par rapport à la valeur locale existe, car les modèles sont potentiellement partagés.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-166">The property values from the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template generally act as if they were set as a local value on the child element, but this lesser precedence versus the local value exists because the templates are potentially shared.</span></span> <span data-ttu-id="0d2ae-167">Pour plus d'informations, consultez <xref:System.Windows.FrameworkElement.TemplatedParent%2A>.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-167">For details, see <xref:System.Windows.FrameworkElement.TemplatedParent%2A>.</span></span>  
  
<a name="style_property"></a>   
## <a name="the-style-property"></a><span data-ttu-id="0d2ae-168">Propriété Style</span><span class="sxs-lookup"><span data-stu-id="0d2ae-168">The Style Property</span></span>  
 <span data-ttu-id="0d2ae-169">L’ordre de recherche décrit précédemment s’applique à toutes les propriétés de dépendance possibles sauf une : la propriété <xref:System.Windows.FrameworkElement.Style%2A>.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-169">The order of lookup described earlier applies to all possible dependency properties except one: the <xref:System.Windows.FrameworkElement.Style%2A> property.</span></span> <span data-ttu-id="0d2ae-170">La propriété <xref:System.Windows.FrameworkElement.Style%2A> est unique dans la mesure où elle ne peut pas être lui-même un style, donc les éléments de précédence 5 à 8 ne s’appliquent pas.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-170">The <xref:System.Windows.FrameworkElement.Style%2A> property is unique in that it cannot itself be styled, so the precedence items 5 through 8 do not apply.</span></span> <span data-ttu-id="0d2ae-171">En outre, l’animation ou la contrainte de <xref:System.Windows.FrameworkElement.Style%2A> n’est pas recommandée (et l’animation des <xref:System.Windows.FrameworkElement.Style%2A> nécessiterait une classe d’animation personnalisée).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-171">Also, either animating or coercing <xref:System.Windows.FrameworkElement.Style%2A> is not recommended (and animating <xref:System.Windows.FrameworkElement.Style%2A> would require a custom animation class).</span></span> <span data-ttu-id="0d2ae-172">Cela laisse trois façons de définir la propriété <xref:System.Windows.FrameworkElement.Style%2A> :</span><span class="sxs-lookup"><span data-stu-id="0d2ae-172">This leaves three ways that the <xref:System.Windows.FrameworkElement.Style%2A> property might be set:</span></span>  
  
- <span data-ttu-id="0d2ae-173">**Style explicite.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-173">**Explicit style.**</span></span> <span data-ttu-id="0d2ae-174">La propriété <xref:System.Windows.FrameworkElement.Style%2A> est définie directement.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-174">The <xref:System.Windows.FrameworkElement.Style%2A> property is set directly.</span></span> <span data-ttu-id="0d2ae-175">Dans la plupart des scénarios, le style n’est pas défini inline. Il est plutôt référencé en tant que ressource, par clé explicite.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-175">In most scenarios, the style is not defined inline, but instead is referenced as a resource, by explicit key.</span></span> <span data-ttu-id="0d2ae-176">Dans ce cas, la propriété Style proprement dite se comporte comme s’il s’agissait d’une valeur locale (élément de priorité 3).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-176">In this case the Style property itself acts as if it were a local value, precedence item 3.</span></span>  
  
- <span data-ttu-id="0d2ae-177">**Style implicite.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-177">**Implicit style.**</span></span> <span data-ttu-id="0d2ae-178">La propriété <xref:System.Windows.FrameworkElement.Style%2A> n’est pas définie directement.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-178">The <xref:System.Windows.FrameworkElement.Style%2A> property is not set directly.</span></span> <span data-ttu-id="0d2ae-179">Toutefois, le <xref:System.Windows.FrameworkElement.Style%2A> existe à un certain niveau dans la séquence de recherche de ressources (page, application) et est indexé à l’aide d’une clé de ressource qui correspond au type auquel le style doit être appliqué.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-179">However, the <xref:System.Windows.FrameworkElement.Style%2A> exists at some level in the resource lookup sequence (page, application) and is keyed using a resource key that matches the type the style is to be applied to.</span></span> <span data-ttu-id="0d2ae-180">Dans ce cas, la propriété <xref:System.Windows.FrameworkElement.Style%2A> elle-même agit par une précédence identifiée dans la séquence en tant qu’élément 5.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-180">In this case, the <xref:System.Windows.FrameworkElement.Style%2A> property itself acts by a precedence identified in the sequence as item 5.</span></span> <span data-ttu-id="0d2ae-181">Cette condition peut être détectée à l’aide de <xref:System.Windows.DependencyPropertyHelper>s par rapport à la propriété <xref:System.Windows.FrameworkElement.Style%2A> et en recherchant <xref:System.Windows.BaseValueSource.ImplicitStyleReference> dans les résultats.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-181">This condition can be detected by using <xref:System.Windows.DependencyPropertyHelper> against the <xref:System.Windows.FrameworkElement.Style%2A> property and looking for <xref:System.Windows.BaseValueSource.ImplicitStyleReference> in the results.</span></span>  
  
- <span data-ttu-id="0d2ae-182">**Style par défaut**, également appelé **style de thème.**</span><span class="sxs-lookup"><span data-stu-id="0d2ae-182">**Default style**, also known as **theme style.**</span></span> <span data-ttu-id="0d2ae-183">La propriété <xref:System.Windows.FrameworkElement.Style%2A> n’est pas définie directement. en fait, elle est lue comme `null` jusqu’au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-183">The <xref:System.Windows.FrameworkElement.Style%2A> property is not set directly, and in fact will read as `null` up until run time.</span></span> <span data-ttu-id="0d2ae-184">Dans ce cas, le style provient de l’évaluation du thème d’exécution qui fait partie du moteur de présentation [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0d2ae-184">In this case, the style comes from the run-time theme evaluation that is part of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] presentation engine.</span></span>  
  
 <span data-ttu-id="0d2ae-185">Pour les styles implicites qui ne sont pas dans les thèmes, le type doit correspondre exactement-une `MyButton` classe dérivée de `Button`n’utilise pas implicitement un style pour `Button`.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-185">For implicit styles not in themes, the type must match exactly - a `MyButton` `Button`-derived class will not implicitly use a style for `Button`.</span></span>  
  
<a name="themestyles"></a>   
## <a name="default-theme-styles"></a><span data-ttu-id="0d2ae-186">Style (de thème) par défaut</span><span class="sxs-lookup"><span data-stu-id="0d2ae-186">Default (Theme) Styles</span></span>  
 <span data-ttu-id="0d2ae-187">Chaque contrôle fourni avec [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] a un style par défaut.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-187">Every control that ships with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] has a default style.</span></span> <span data-ttu-id="0d2ae-188">Ce style par défaut peut varier en fonction du thème. C’est pourquoi on le nomme parfois « style de thème ».</span><span class="sxs-lookup"><span data-stu-id="0d2ae-188">That default style potentially varies by theme, which is why this default style is sometimes referred to as a theme style.</span></span>  
  
 <span data-ttu-id="0d2ae-189">Les informations les plus importantes qui se trouvent dans le style par défaut d’un contrôle sont son modèle de contrôle, qui existe dans le style de thème en tant que méthode setter pour sa propriété <xref:System.Windows.Controls.Control.Template%2A>.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-189">The most important information that is found within a default style for a control is its control template, which exists in the theme style as a setter for its <xref:System.Windows.Controls.Control.Template%2A> property.</span></span> <span data-ttu-id="0d2ae-190">S’il n’y avait aucun modèle issu des styles par défaut, un contrôle sans modèle personnalisé dans le cadre d’un style personnalisé n’aurait aucune apparence visuelle.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-190">If there were no template from default styles, a control without a custom template as part of a custom style would have no visual appearance at all.</span></span> <span data-ttu-id="0d2ae-191">Le modèle du style par défaut donne une structure de base à l’apparence visuelle de chaque contrôle, et définit également les connexions entre les propriétés définies dans l’arborescence visuelle du modèle et la classe de contrôle correspondante.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-191">The template from the default style gives the visual appearance of each control a basic structure, and also defines the connections between properties defined in the visual tree of the template and the corresponding control class.</span></span> <span data-ttu-id="0d2ae-192">Chaque contrôle expose un ensemble de propriétés qui peuvent influencer l’apparence visuelle du contrôle sans remplacer complètement le modèle.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-192">Each control exposes a set of properties that can influence the visual appearance of the control without completely replacing the template.</span></span> <span data-ttu-id="0d2ae-193">Par exemple, considérez l’apparence visuelle par défaut d’un contrôle <xref:System.Windows.Controls.Primitives.Thumb>, qui est un composant d’un <xref:System.Windows.Controls.Primitives.ScrollBar>.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-193">For example, consider the default visual appearance of a <xref:System.Windows.Controls.Primitives.Thumb> control, which is a component of a <xref:System.Windows.Controls.Primitives.ScrollBar>.</span></span>  
  
 <span data-ttu-id="0d2ae-194">Une <xref:System.Windows.Controls.Primitives.Thumb> a certaines propriétés personnalisables.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-194">A <xref:System.Windows.Controls.Primitives.Thumb> has certain customizable properties.</span></span> <span data-ttu-id="0d2ae-195">Le modèle par défaut d’un <xref:System.Windows.Controls.Primitives.Thumb> crée une arborescence d’éléments visuels ou une structure de base avec plusieurs composants de <xref:System.Windows.Controls.Border> imbriqués pour créer un aspect biseauté.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-195">The default template of a <xref:System.Windows.Controls.Primitives.Thumb> creates a basic structure / visual tree with several nested <xref:System.Windows.Controls.Border> components to create a bevel look.</span></span> <span data-ttu-id="0d2ae-196">Si une propriété qui fait partie du modèle doit être exposée pour la personnalisation par la classe <xref:System.Windows.Controls.Primitives.Thumb>, cette propriété doit être exposée par un [TemplateBinding](templatebinding-markup-extension.md), dans le modèle.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-196">If a property that is part of the template is intended to be exposed for customization by the <xref:System.Windows.Controls.Primitives.Thumb> class, then that property must be exposed by a [TemplateBinding](templatebinding-markup-extension.md), within the template.</span></span> <span data-ttu-id="0d2ae-197">Dans le cas de <xref:System.Windows.Controls.Primitives.Thumb>, différentes propriétés de ces bordures partagent une liaison de modèle avec des propriétés telles que <xref:System.Windows.Controls.Border.Background%2A> ou <xref:System.Windows.Controls.Border.BorderThickness%2A>.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-197">In the case of <xref:System.Windows.Controls.Primitives.Thumb>, various properties of these borders share a template binding to properties such as <xref:System.Windows.Controls.Border.Background%2A> or <xref:System.Windows.Controls.Border.BorderThickness%2A>.</span></span> <span data-ttu-id="0d2ae-198">En revanche, certaines autres propriétés ou dispositions visuelles sont codées en dur dans le modèle de contrôle ou sont liées à des valeurs qui proviennent directement du thème, et ne peuvent pas être changées à moins de remplacer le modèle entier.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-198">But certain other properties or visual arrangements are hard-coded into the control template or are bound to values that come directly from the theme, and cannot be changed short of replacing the entire template.</span></span> <span data-ttu-id="0d2ae-199">En règle générale, si une propriété provient d’un parent basé sur un modèle et n’est pas exposée par une liaison de modèle, elle ne peut pas être ajustée par des styles car il n’existe aucun moyen simple de la cibler.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-199">Generally, if a property comes from a templated parent and is not exposed by a template binding, it cannot be adjusted by styles because there is no easy way to target it.</span></span> <span data-ttu-id="0d2ae-200">Mais cette propriété peut toujours être influencée par l’héritage de valeur de propriété dans le modèle appliqué, ou par la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-200">But that property could still be influenced by property value inheritance in the applied template, or by default value.</span></span>  
  
 <span data-ttu-id="0d2ae-201">Les styles de thème utilisent un type comme clé dans leurs définitions.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-201">The theme styles use a type as the key in their definitions.</span></span> <span data-ttu-id="0d2ae-202">Toutefois, lorsque des thèmes sont appliqués à une instance d’élément donnée, la recherche de thèmes pour ce type est effectuée en vérifiant la propriété <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> sur un contrôle.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-202">However, when themes are applied to a given element instance, themes lookup for this type is performed by checking the <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> property on a control.</span></span> <span data-ttu-id="0d2ae-203">Ce comportement est à contraster avec l’utilisation du littéral Type (par les styles implicites).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-203">This is in contrast to using the literal Type, as implicit styles do.</span></span> <span data-ttu-id="0d2ae-204">La valeur de <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> hériterait des classes dérivées même si l’implémenteur ne l’a pas modifiée (la méthode prévue pour la modification de la propriété n’est pas de la remplacer au niveau de la propriété, mais plutôt de modifier sa valeur par défaut dans les métadonnées de propriété).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-204">The value of <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> would inherit to derived classes even if the implementer did not change it (the intended way of changing the property is not to override it at the property level, but to instead change its default value in property metadata).</span></span> <span data-ttu-id="0d2ae-205">Cette indirection permet aux classes de base de définir les styles de thème pour les éléments dérivés qui ne disposent pas de style (ou, plus important encore, qui n’ont pas de modèle dans ce style et n’auraient donc aucune apparence visuelle par défaut).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-205">This indirection enables base classes to define the theme styles for derived elements that do not otherwise have a style (or more importantly, do not have a template within that style and would thus have no default visual appearance at all).</span></span> <span data-ttu-id="0d2ae-206">Par conséquent, vous pouvez dériver `MyButton` à partir de <xref:System.Windows.Controls.Button> et continuera d’obtenir le <xref:System.Windows.Controls.Button> modèle par défaut.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-206">Thus, you can derive `MyButton` from <xref:System.Windows.Controls.Button> and will still get the <xref:System.Windows.Controls.Button> default template.</span></span> <span data-ttu-id="0d2ae-207">Si vous étiez l’auteur du contrôle de `MyButton` et que vous souhaitiez un comportement différent, vous pouviez remplacer les métadonnées de propriété de dépendance pour <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> sur `MyButton` pour retourner une clé différente, puis définir les styles de thème pertinents, y compris le modèle pour `MyButton` qui vous devez empaqueter avec votre contrôle `MyButton`.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-207">If you were the control author of `MyButton` and you wanted a different behavior, you could override the dependency property metadata for <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> on `MyButton` to return a different key, and then define the relevant theme styles including template for `MyButton` that you must package with your `MyButton` control.</span></span> <span data-ttu-id="0d2ae-208">Pour plus d’informations sur les thèmes, les styles et la création de contrôles, consultez [Vue d’ensemble de la création de contrôles](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-208">For more details on themes, styles, and control authoring, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>  
  
<a name="resources"></a>   
## <a name="dynamic-resource-references-and-binding"></a><span data-ttu-id="0d2ae-209">Références de ressources dynamiques et liaison</span><span class="sxs-lookup"><span data-stu-id="0d2ae-209">Dynamic Resource References and Binding</span></span>  
 <span data-ttu-id="0d2ae-210">Les opérations de liaison et les références de ressources dynamiques respectent la priorité de l’emplacement auquel elles sont définies.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-210">Dynamic resource references and binding operations respect the precedence of the location at which they are set.</span></span> <span data-ttu-id="0d2ae-211">Par exemple, une ressource dynamique appliquée à une valeur locale agit conformément à l’élément de priorité 3, une liaison pour une méthode setter de propriété dans un style de thème s’applique à l’élément de priorité 9, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-211">For example, a dynamic resource applied to a local value acts per precedence item 3, a binding for a property setter within a theme style applies at precedence item 9, and so on.</span></span> <span data-ttu-id="0d2ae-212">Étant donné que les références de ressources dynamiques et la liaison doivent pouvoir obtenir des valeurs à partir de l’état d’exécution de l’application, cela implique que le processus de détermination de la priorité de valeur de propriété pour une propriété donnée s’étend également au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-212">Because dynamic resource references and binding must both be able to obtain values from the run time state of the application, this entails that the actual process of determining the property value precedence for any given property extends into the run time as well.</span></span>  
  
 <span data-ttu-id="0d2ae-213">Les références de ressources dynamiques ne font pas à proprement parler partie du système de propriétés, mais elles ont leur propre ordre de recherche qui interagit avec la séquence indiquée ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-213">Dynamic resource references are not strictly speaking part of the property system, but they do have a lookup order of their own which interacts with the sequence listed above.</span></span> <span data-ttu-id="0d2ae-214">Cette priorité est documentée plus en détail dans les [Ressources XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-214">That precedence is documented more thoroughly in the [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span> <span data-ttu-id="0d2ae-215">Il s’agit en gros de la priorité suivante : élément à racine de la page, application, thème, système.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-215">The basic summation of that precedence is: element to page root, application, theme, system.</span></span>  
  
 <span data-ttu-id="0d2ae-216">Les ressources dynamiques et les liaisons ont la priorité de l’emplacement où elles ont été définies, mais la valeur est différée.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-216">Dynamic resources and bindings have the precedence of where they were set, but the value is deferred.</span></span> <span data-ttu-id="0d2ae-217">L’une des conséquences de cela est que si vous affectez une valeur locale à une ressource dynamique ou une liaison, tout changement apporté à la valeur locale remplace entièrement la ressource dynamique ou la liaison.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-217">One consequence of this is that if you set a dynamic resource or binding to a local value, any change to the local value replaces the dynamic resource or binding entirely.</span></span> <span data-ttu-id="0d2ae-218">Même si vous appelez la méthode <xref:System.Windows.DependencyObject.ClearValue%2A> pour effacer la valeur définie localement, la ressource ou la liaison dynamique ne sera pas restaurée.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-218">Even if you call the <xref:System.Windows.DependencyObject.ClearValue%2A> method to clear the locally set value, the dynamic resource or binding will not be restored.</span></span> <span data-ttu-id="0d2ae-219">En fait, si vous appelez <xref:System.Windows.DependencyObject.ClearValue%2A> sur une propriété qui a une ressource dynamique ou une liaison sur place (sans valeur locale littérale), elles sont également supprimées par l’appel de <xref:System.Windows.DependencyObject.ClearValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-219">In fact, if you call <xref:System.Windows.DependencyObject.ClearValue%2A> on a property that has a dynamic resource or binding in place (with no literal local value), they are cleared by the <xref:System.Windows.DependencyObject.ClearValue%2A> call too.</span></span>  
  
<a name="setcurrentvalue"></a>   
## <a name="setcurrentvalue"></a><span data-ttu-id="0d2ae-220">SetCurrentValue</span><span class="sxs-lookup"><span data-stu-id="0d2ae-220">SetCurrentValue</span></span>  
 <span data-ttu-id="0d2ae-221">La méthode <xref:System.Windows.DependencyObject.SetCurrentValue%2A> est une autre façon de définir une propriété, mais elle n’est pas dans l’ordre de priorité.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-221">The <xref:System.Windows.DependencyObject.SetCurrentValue%2A> method is another way to set a property, but it is not in the order of precedence.</span></span> <span data-ttu-id="0d2ae-222">Au lieu de cela, <xref:System.Windows.DependencyObject.SetCurrentValue%2A> vous permet de modifier la valeur d’une propriété sans remplacer la source d’une valeur précédente.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-222">Instead, <xref:System.Windows.DependencyObject.SetCurrentValue%2A> enables you to change the value of a property without overwriting the source of a previous value.</span></span> <span data-ttu-id="0d2ae-223">Vous pouvez utiliser <xref:System.Windows.DependencyObject.SetCurrentValue%2A> chaque fois que vous souhaitez définir une valeur sans donner à cette valeur la précédence d’une valeur locale.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-223">You can use <xref:System.Windows.DependencyObject.SetCurrentValue%2A> any time that you want to set a value without giving that value the precedence of a local value.</span></span> <span data-ttu-id="0d2ae-224">Par exemple, si une propriété est définie par un déclencheur et qu’une autre valeur lui est affectée via <xref:System.Windows.DependencyObject.SetCurrentValue%2A>, le système de propriétés respecte toujours le déclencheur et la propriété change si l’action du déclencheur se produit.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-224">For example, if a property is set by a trigger and then assigned another value via <xref:System.Windows.DependencyObject.SetCurrentValue%2A>, the property system still respects the trigger and the property will change if the trigger’s action occurs.</span></span> <span data-ttu-id="0d2ae-225"><xref:System.Windows.DependencyObject.SetCurrentValue%2A> vous permet de modifier la valeur de la propriété sans lui donner une source avec une priorité plus élevée.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-225"><xref:System.Windows.DependencyObject.SetCurrentValue%2A> enables you to change the property’s value without giving it a source with a higher precedence.</span></span> <span data-ttu-id="0d2ae-226">De même, vous pouvez utiliser <xref:System.Windows.DependencyObject.SetCurrentValue%2A> pour modifier la valeur d’une propriété sans remplacer une liaison.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-226">Likewise, you can use <xref:System.Windows.DependencyObject.SetCurrentValue%2A> to change the value of a property without overwriting a binding.</span></span>  
  
<a name="animations"></a>   
## <a name="coercion-animations-and-base-value"></a><span data-ttu-id="0d2ae-227">Forçage, animations et valeur de base</span><span class="sxs-lookup"><span data-stu-id="0d2ae-227">Coercion, Animations, and Base Value</span></span>  
 <span data-ttu-id="0d2ae-228">Le forçage et l’animation agissent tous deux sur une valeur appelée « valeur de base » dans ce [!INCLUDE[TLA2#tla_sdk](../../../../includes/tla2sharptla-sdk-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0d2ae-228">Coercion and animation both act on a value that is termed as the "base value" throughout this [!INCLUDE[TLA2#tla_sdk](../../../../includes/tla2sharptla-sdk-md.md)].</span></span> <span data-ttu-id="0d2ae-229">La valeur de base est donc toute valeur déterminée par l’intermédiaire d’une évaluation vers le haut parmi les éléments jusqu’à ce que l’élément 2 soit atteint.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-229">The base value is thus whatever value is determined through evaluating upwards in the items until item 2 is reached.</span></span>  
  
 <span data-ttu-id="0d2ae-230">Pour une animation, la valeur de base peut avoir un effet sur la valeur animée, si cette animation ne spécifie pas à la fois « From » et « To » pour certains comportements, ou si l’animation rétablit délibérément la valeur de base une fois terminé.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-230">For an animation, the base value can have an effect on the animated value, if that animation does not specify both "From" and "To" for certain behaviors, or if the animation deliberately reverts to the base value when completed.</span></span> <span data-ttu-id="0d2ae-231">Pour voir cela en pratique, exécutez l’[Exemple de valeurs cibles d’animation From, To et By](https://go.microsoft.com/fwlink/?LinkID=159988).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-231">To see this in practice, run the [From, To, and By Animation Target Values Sample](https://go.microsoft.com/fwlink/?LinkID=159988).</span></span> <span data-ttu-id="0d2ae-232">Essayez de définir les valeurs locales de la hauteur du rectangle dans l’exemple, telles que la valeur locale initiale soit différente de toute valeur « From » dans l’animation.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-232">Try setting the local values of the rectangle height in the example, such that the initial local value differs from any "From" in the animation.</span></span> <span data-ttu-id="0d2ae-233">Vous noterez que les animations démarrent immédiatement en utilisant les valeurs « From », et qu’elles remplacent la valeur de base une fois qu’elles ont commencé.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-233">You will note that the animations start right away using the "From" values and replace the base value once started.</span></span> <span data-ttu-id="0d2ae-234">L’animation peut spécifier de retourner à la valeur trouvée avant l’animation une fois qu’elle est terminée en spécifiant le <xref:System.Windows.Media.Animation.FillBehavior>d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-234">The animation might specify to return to the value found before animation once it is completed by specifying the Stop <xref:System.Windows.Media.Animation.FillBehavior>.</span></span> <span data-ttu-id="0d2ae-235">Par la suite, la priorité normale est utilisée pour déterminer la valeur de base.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-235">Afterwards, normal precedence is used for the base value determination.</span></span>  
  
 <span data-ttu-id="0d2ae-236">Plusieurs animations peuvent être appliquées à une même propriété, chacune de ces animations ayant éventuellement été définie à partir de points différents dans la priorité de la valeur.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-236">Multiple animations might be applied to a single property, with each of these animations possibly having been defined from different points in the value precedence.</span></span> <span data-ttu-id="0d2ae-237">Toutefois, ces animations créeront peut-être une valeur composite à partir de leurs valeurs, plutôt que d’appliquer simplement l’animation à partir de la priorité la plus élevée.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-237">However, these animations will potentially composite their values, rather than just applying the animation from the higher precedence.</span></span> <span data-ttu-id="0d2ae-238">Cela dépend de la manière exacte dont les animations sont définies et du type de la valeur qui est animée.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-238">This depends on exactly how the animations are defined, and the type of the value that is being animated.</span></span> <span data-ttu-id="0d2ae-239">Pour plus d’informations sur l’animation de propriétés, consultez [Vue d’ensemble de l’animation](../graphics-multimedia/animation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-239">For more information about animating properties, see [Animation Overview](../graphics-multimedia/animation-overview.md).</span></span>  
  
 <span data-ttu-id="0d2ae-240">Le forçage s’applique au niveau le plus élevé.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-240">Coercion applies at the highest level of all.</span></span> <span data-ttu-id="0d2ae-241">Même une animation en cours d’exécution est sujette au forçage de valeur.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-241">Even an already running animation is subject to value coercion.</span></span> <span data-ttu-id="0d2ae-242">Certaines propriétés de dépendance existantes dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] ont un forçage intégré.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-242">Certain existing dependency properties in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] have built-in coercion.</span></span> <span data-ttu-id="0d2ae-243">Pour une propriété de dépendance personnalisée, vous définissez le comportement de forçage pour une propriété de dépendance personnalisée en écrivant une <xref:System.Windows.CoerceValueCallback> et en passant le rappel dans le cadre des métadonnées lorsque vous créez la propriété.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-243">For a custom dependency property, you define the coercion behavior for a custom dependency property by writing a <xref:System.Windows.CoerceValueCallback> and passing the callback as part of metadata when you create the property.</span></span> <span data-ttu-id="0d2ae-244">Vous pouvez également substituer le comportement de forçage d’une propriété existante en substituant les métadonnées de cette propriété dans une classe dérivée.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-244">You can also override coercion behavior of existing properties by overriding the metadata on that property in a derived class.</span></span> <span data-ttu-id="0d2ae-245">Le forçage interagit avec la valeur de base de telle façon que les contraintes du forçage soient appliquées telles qu’elles existent à ce moment précis, mais la valeur de base est quand même conservée.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-245">Coercion interacts with the base value in such a way that the constraints on coercion are applied as those constraints exist at the time, but the base value is still retained.</span></span> <span data-ttu-id="0d2ae-246">Par conséquent, si des contraintes du forçage sont par la suite levées, le forçage retourne la valeur la plus proche possible de cette valeur de base, et l’influence du forçage sur une propriété peut cesser dès que toutes les contraintes sont levées.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-246">Therefore, if constraints in coercion are later lifted, the coercion will return the closest value possible to that base value, and potentially the coercion influence on a property will cease as soon as all constraints are lifted.</span></span> <span data-ttu-id="0d2ae-247">Pour plus d’informations sur le comportement de forçage, consultez [Validation et rappels de propriétés de dépendance](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ae-247">For more information about coercion behavior, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span>  
  
<a name="triggers"></a>   
## <a name="trigger-behaviors"></a><span data-ttu-id="0d2ae-248">Comportements des déclencheurs</span><span class="sxs-lookup"><span data-stu-id="0d2ae-248">Trigger Behaviors</span></span>  
 <span data-ttu-id="0d2ae-249">Les contrôles définissent souvent les comportements des déclencheurs dans le cadre de leur style par défaut dans les thèmes.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-249">Controls often define trigger behaviors as part of their default style in themes.</span></span> <span data-ttu-id="0d2ae-250">La définition de propriétés locales sur des contrôles peut empêcher les déclencheurs de répondre à des événements pilotés par l’utilisateur visuellement ou par comportement.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-250">Setting local properties on controls might prevent the triggers from being able to respond to user-driven events either visually or behaviorally.</span></span> <span data-ttu-id="0d2ae-251">L’utilisation la plus courante d’un déclencheur de propriété concerne les propriétés de contrôle ou d’État telles que <xref:System.Windows.Controls.Primitives.Selector.IsSelected%2A>.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-251">The most common use of a property trigger is for control or state properties such as <xref:System.Windows.Controls.Primitives.Selector.IsSelected%2A>.</span></span> <span data-ttu-id="0d2ae-252">Par exemple, par défaut, lorsqu’un <xref:System.Windows.Controls.Button> est désactivé (le déclencheur pour <xref:System.Windows.UIElement.IsEnabled%2A> est `false`), la valeur de <xref:System.Windows.Controls.Control.Foreground%2A> dans le style de thème est ce qui provoque l’affichage du contrôle « grisé ».</span><span class="sxs-lookup"><span data-stu-id="0d2ae-252">For example, by default when a <xref:System.Windows.Controls.Button> is disabled (trigger for <xref:System.Windows.UIElement.IsEnabled%2A> is `false`) then the <xref:System.Windows.Controls.Control.Foreground%2A> value in the theme style is what causes the control to appear "grayed out".</span></span> <span data-ttu-id="0d2ae-253">Toutefois, si vous avez défini une valeur de <xref:System.Windows.Controls.Control.Foreground%2A> locale, cette couleur grise normale est remplacée par votre jeu de propriétés local, même dans ce scénario déclenché par une propriété.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-253">But if you have set a local <xref:System.Windows.Controls.Control.Foreground%2A> value, that normal gray-out color will be overruled in precedence by your local property set, even in this property-triggered scenario.</span></span> <span data-ttu-id="0d2ae-254">Soyez prudent quand vous définissez des valeurs pour des propriétés qui ont des comportements de déclenchement au niveau du thème, et vérifiez que vous n’interférez pas indûment avec l’expérience utilisateur prévue pour ce contrôle.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-254">Be cautious of setting values for properties that have theme-level trigger behaviors and make sure you are not unduly interfering with the intended user experience for that control.</span></span>  
  
<a name="clearvalue"></a>   
## <a name="clearvalue-and-value-precedence"></a><span data-ttu-id="0d2ae-255">ClearValue et priorité de valeur</span><span class="sxs-lookup"><span data-stu-id="0d2ae-255">ClearValue and Value Precedence</span></span>  
 <span data-ttu-id="0d2ae-256">La méthode <xref:System.Windows.DependencyObject.ClearValue%2A> fournit un moyen pratique d’effacer toute valeur appliquée localement d’une propriété de dépendance définie sur un élément.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-256">The <xref:System.Windows.DependencyObject.ClearValue%2A> method provides an expedient means to clear any locally applied value from a dependency property that is set on an element.</span></span> <span data-ttu-id="0d2ae-257">Toutefois, l’appel de <xref:System.Windows.DependencyObject.ClearValue%2A> n’est pas garanti que la valeur par défaut définie dans les métadonnées lors de l’inscription de la propriété est la nouvelle valeur effective.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-257">However, calling <xref:System.Windows.DependencyObject.ClearValue%2A> is not a guarantee that the default as established in metadata during property registration is the new effective value.</span></span> <span data-ttu-id="0d2ae-258">Tous les autres participants à la séquence de priorité de valeur sont toujours actifs.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-258">All of the other participants in value precedence are still active.</span></span> <span data-ttu-id="0d2ae-259">Seule la valeur définie localement a été supprimée de la séquence de priorité.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-259">Only the locally set value has been removed from the precedence sequence.</span></span> <span data-ttu-id="0d2ae-260">Par exemple, si vous appelez <xref:System.Windows.DependencyObject.ClearValue%2A> sur une propriété où cette propriété est également définie par un style de thème, la valeur de thème est appliquée comme nouvelle valeur plutôt que par défaut basée sur les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-260">For example, if you call <xref:System.Windows.DependencyObject.ClearValue%2A> on a property where that property is also set by a theme style, then the theme value is applied as the new value rather than the metadata-based default.</span></span> <span data-ttu-id="0d2ae-261">Si vous souhaitez que tous les participants à la valeur de propriété soient hors du processus et définir la valeur sur la valeur par défaut des métadonnées inscrites, vous pouvez obtenir définitivement cette valeur par défaut en interrogeant les métadonnées de propriété de dépendance, puis vous pouvez utiliser la valeur par défaut localement. Définissez la propriété avec un appel à <xref:System.Windows.DependencyObject.SetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="0d2ae-261">If you want to take all property value participants out of the process and set the value to the registered metadata default, you can obtain that default value definitively by querying the dependency property metadata, and then you can use the default value to locally set the property with a call to <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0d2ae-262">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="0d2ae-262">See also</span></span>

- <xref:System.Windows.DependencyObject>
- <xref:System.Windows.DependencyProperty>
- [<span data-ttu-id="0d2ae-263">Vue d’ensemble des propriétés de dépendance</span><span class="sxs-lookup"><span data-stu-id="0d2ae-263">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="0d2ae-264">Propriétés de dépendance personnalisées</span><span class="sxs-lookup"><span data-stu-id="0d2ae-264">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="0d2ae-265">Validation et rappels de propriétés de dépendance</span><span class="sxs-lookup"><span data-stu-id="0d2ae-265">Dependency Property Callbacks and Validation</span></span>](dependency-property-callbacks-and-validation.md)
