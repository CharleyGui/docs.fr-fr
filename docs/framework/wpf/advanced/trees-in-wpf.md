---
title: Arborescences
ms.date: 03/30/2017
helpviewer_keywords:
- logical tree [WPF]
- element tree [WPF]
- visual tree [WPF]
ms.assetid: e83f25e5-d66b-4fc7-92d2-50130c9a6649
ms.openlocfilehash: d4b17c34fb33f73ca1c173bebc8f94ddac5b1942
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/24/2020
ms.locfileid: "76746574"
---
# <a name="trees-in-wpf"></a><span data-ttu-id="b041a-102">Arborescences dans WPF</span><span class="sxs-lookup"><span data-stu-id="b041a-102">Trees in WPF</span></span>
<span data-ttu-id="b041a-103">Dans de nombreuses technologies, les éléments et les composants sont organisés en une arborescence, où les développeurs manipulent directement les nœuds d’objet dans l’arborescence pour modifier le rendu ou le comportement d’une application.</span><span class="sxs-lookup"><span data-stu-id="b041a-103">In many technologies, elements and components are organized in a tree structure where developers directly manipulate the object nodes in the tree to affect the rendering or behavior of an application.</span></span> [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="b041a-104">utilise également plusieurs métaphores d’arborescence pour définir des relations entre des éléments du programme.</span><span class="sxs-lookup"><span data-stu-id="b041a-104">also uses several tree structure metaphors to define relationships between program elements.</span></span> <span data-ttu-id="b041a-105">Pour la plupart, les développeurs WPF peuvent créer une application dans le code ou définir des parties de l’application en XAML, en se représentant mentalement la métaphore de l’arborescence des objets, mais en appelant pour cela une API spécifique ou en utilisant un balisage spécifique, au lieu d’utiliser une API générale de manipulation d’une arborescence d’objets, comme ce peut être le cas dans le modèle DOM XML.</span><span class="sxs-lookup"><span data-stu-id="b041a-105">For the most part WPF developers can create an application in code or define portions of the application in XAML while thinking conceptually about the object tree metaphor, but will be calling specific API or using specific markup to do so rather than some general object tree manipulation API such as you might use in XML DOM.</span></span> <span data-ttu-id="b041a-106">WPF expose deux classes d’assistance qui fournissent une vue métaphore de l’arborescence, <xref:System.Windows.LogicalTreeHelper> et <xref:System.Windows.Media.VisualTreeHelper>.</span><span class="sxs-lookup"><span data-stu-id="b041a-106">WPF exposes two helper classes that provide a tree metaphor view, <xref:System.Windows.LogicalTreeHelper> and <xref:System.Windows.Media.VisualTreeHelper>.</span></span> <span data-ttu-id="b041a-107">Les termes « arborescence d’éléments visuels » et « arborescence logique » sont également utilisés dans la documentation WPF, car ils sont utiles pour comprendre le comportement de certaines fonctionnalités clés de WPF.</span><span class="sxs-lookup"><span data-stu-id="b041a-107">The terms visual tree and logical tree are also used in the WPF documentation because these same trees are useful for understanding the behavior of certain key WPF features.</span></span> <span data-ttu-id="b041a-108">Cette rubrique définit ce que représente l’arborescence d’éléments visuels et l’arborescence logique, explique comment ces arborescences sont liées à un concept d’arborescence d’objets global et présente <xref:System.Windows.LogicalTreeHelper> et <xref:System.Windows.Media.VisualTreeHelper>.</span><span class="sxs-lookup"><span data-stu-id="b041a-108">This topic defines what the visual tree and logical tree represent, discusses how such trees relate to an overall object tree concept, and introduces <xref:System.Windows.LogicalTreeHelper> and <xref:System.Windows.Media.VisualTreeHelper>s.</span></span>  

<a name="element_tree"></a>   
## <a name="trees-in-wpf"></a><span data-ttu-id="b041a-109">Arborescences dans WPF</span><span class="sxs-lookup"><span data-stu-id="b041a-109">Trees in WPF</span></span>  
 <span data-ttu-id="b041a-110">L’arborescence la plus complète dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] est l’arborescence d’objets.</span><span class="sxs-lookup"><span data-stu-id="b041a-110">The most complete tree structure in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is the object tree.</span></span> <span data-ttu-id="b041a-111">Si vous définissez une page d’application dans [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] puis que vous chargez le [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], l’arborescence est créée sur la base des relations d’imbrication des éléments dans le balisage.</span><span class="sxs-lookup"><span data-stu-id="b041a-111">If you define an application page in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and then load the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], the tree structure is created based on the nesting relationships of the elements in the markup.</span></span> <span data-ttu-id="b041a-112">Si vous définissez une application ou une partie de l’application dans le code, l’arborescence est créée en fonction de la façon dont vous affectez les valeurs de propriété pour les propriétés qui implémentent le modèle de contenu d’un objet donné.</span><span class="sxs-lookup"><span data-stu-id="b041a-112">If you define an application or a portion of the application in code, then the tree structure is created based on how you assign property values for properties that implement the content model for a given object.</span></span> <span data-ttu-id="b041a-113">Dans [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], vous pouvez conceptualiser et signaler l’arborescence à son API publique de deux façons : en tant qu’arborescence logique et en tant qu’arborescence d’éléments visuels.</span><span class="sxs-lookup"><span data-stu-id="b041a-113">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], there are two ways that the complete object tree is conceptualized and can be reported to its public API: as the logical tree and as the visual tree.</span></span> <span data-ttu-id="b041a-114">Les distinctions entre arborescence logique et arborescence d’éléments visuels ne sont pas toujours nécessairement importantes, mais elles peuvent parfois générer des problèmes avec certains sous-systèmes [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], et affecter vos choix dans le balisage ou le code.</span><span class="sxs-lookup"><span data-stu-id="b041a-114">The distinctions between logical tree and visual tree are not always necessarily important, but they can occasionally cause issues with certain [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] subsystems and affect choices you make in markup or code.</span></span>  
  
 <span data-ttu-id="b041a-115">Même si vous ne manipuliez pas toujours directement l’arborescence logique ou l’arborescence d’éléments visuels, la compréhension des concepts présidant à l’interaction des arborescences est utile pour comprendre la technologie WPF.</span><span class="sxs-lookup"><span data-stu-id="b041a-115">Even though you do not always manipulate either the logical tree or the visual tree directly, understanding the concepts of how the trees interact is useful for understanding WPF as a technology.</span></span> <span data-ttu-id="b041a-116">Considérer WPF comme une métaphore d’une arborescence d’un certain type est également crucial pour comprendre le fonctionnement de l’héritage des propriétés et du routage des événements dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b041a-116">Thinking of WPF as a tree metaphor of some kind is also crucial to understanding how property inheritance and event routing work in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
> [!NOTE]
> <span data-ttu-id="b041a-117">L’arborescence d’objets étant plus un concept qu’une API réelle, vous pouvez aussi vous représenter ce concept sous la forme d’un graphe d’objets.</span><span class="sxs-lookup"><span data-stu-id="b041a-117">Because the object tree is more of a concept than an actual API, another way to think of the concept is as an object graph.</span></span> <span data-ttu-id="b041a-118">Dans la pratique, des relations existent entre les objets au moment de l’exécution, où la métaphore de l’arborescence cesse de fonctionner.</span><span class="sxs-lookup"><span data-stu-id="b041a-118">In practice, there are relationships between objects at run time where the tree metaphor will break down.</span></span> <span data-ttu-id="b041a-119">Néanmoins, en particulier avec l’interface utilisateur définie en XAML, la métaphore de l’arborescence est suffisamment pertinente pour que la plus grande partie de la documentation WPF utilise le terme « arborescence d’objets » pour faire référence à ce concept général.</span><span class="sxs-lookup"><span data-stu-id="b041a-119">Nevertheless, particularly with XAML-defined UI, the tree metaphor is relevant enough that most WPF documentation will use the term object tree when referencing this general concept.</span></span>  
  
<a name="logical_tree"></a>   
## <a name="the-logical-tree"></a><span data-ttu-id="b041a-120">L’arborescence logique</span><span class="sxs-lookup"><span data-stu-id="b041a-120">The Logical Tree</span></span>  
 <span data-ttu-id="b041a-121">Dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], vous ajoutez du contenu aux éléments d’interface en définissant les propriétés des objets qui représentent ces éléments.</span><span class="sxs-lookup"><span data-stu-id="b041a-121">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], you add content to UI elements by setting properties of the objects that back those elements.</span></span> <span data-ttu-id="b041a-122">Par exemple, vous ajoutez des éléments à un contrôle <xref:System.Windows.Controls.ListBox> en manipulant sa propriété <xref:System.Windows.Controls.ItemsControl.Items%2A>.</span><span class="sxs-lookup"><span data-stu-id="b041a-122">For example, you add items to a <xref:System.Windows.Controls.ListBox> control by manipulating its <xref:System.Windows.Controls.ItemsControl.Items%2A> property.</span></span> <span data-ttu-id="b041a-123">En procédant ainsi, vous placez des éléments dans le <xref:System.Windows.Controls.ItemCollection> qui correspond à la valeur de la propriété <xref:System.Windows.Controls.ItemsControl.Items%2A>.</span><span class="sxs-lookup"><span data-stu-id="b041a-123">By doing this, you are placing items into the <xref:System.Windows.Controls.ItemCollection> that is the <xref:System.Windows.Controls.ItemsControl.Items%2A> property value.</span></span> <span data-ttu-id="b041a-124">De même, pour ajouter des objets à un <xref:System.Windows.Controls.DockPanel>, vous manipulez sa valeur de propriété <xref:System.Windows.Controls.Panel.Children%2A>.</span><span class="sxs-lookup"><span data-stu-id="b041a-124">Similarly, to add objects to a <xref:System.Windows.Controls.DockPanel>, you manipulate its <xref:System.Windows.Controls.Panel.Children%2A> property value.</span></span> <span data-ttu-id="b041a-125">Ici, vous ajoutez des objets au <xref:System.Windows.Controls.UIElementCollection>.</span><span class="sxs-lookup"><span data-stu-id="b041a-125">Here, you are adding objects to the <xref:System.Windows.Controls.UIElementCollection>.</span></span> <span data-ttu-id="b041a-126">Pour obtenir un exemple de code, consultez [Comment : ajouter dynamiquement un élément](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="b041a-126">For a code example, see [How to: Add an Element Dynamically](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms752374(v=vs.100)).</span></span>  
  
 <span data-ttu-id="b041a-127">Dans [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], lorsque vous placez des éléments de liste dans un <xref:System.Windows.Controls.ListBox> ou des contrôles ou d’autres éléments d’interface utilisateur dans un <xref:System.Windows.Controls.DockPanel>, vous utilisez également les propriétés <xref:System.Windows.Controls.ItemsControl.Items%2A> et <xref:System.Windows.Controls.Panel.Children%2A>, explicitement ou implicitement, comme dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="b041a-127">In [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], when you place list items in a <xref:System.Windows.Controls.ListBox> or controls or other UI elements in a <xref:System.Windows.Controls.DockPanel>, you also use the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.Panel.Children%2A> properties, either explicitly or implicitly, as in the following example.</span></span>  
  
 [!code-xaml[TreeOvwsSupport#AllCode](~/samples/snippets/csharp/VS_Snippets_Wpf/TreeOvwsSupport/CS/page1.xaml#allcode)]  
  
 <span data-ttu-id="b041a-128">Si vous deviez traiter ce XAML en tant que XML dans un Document Object Model, et si vous aviez inclus les balises placées en commentaire comme étant implicites (ce qui est autorisé), l’arborescence DOM XML obtenue aurait inclus des éléments pour `<ListBox.Items>` et les autres éléments implicites.</span><span class="sxs-lookup"><span data-stu-id="b041a-128">If you were to process this XAML as XML under a document object model, and if you had included the tags commented out as implicit (which would have been legal), then the resulting XML DOM tree would have included elements for `<ListBox.Items>` and the other implicit items.</span></span> <span data-ttu-id="b041a-129">Mais XAML ne procède pas de cette façon quand vous lisez les balises et que vous écrivez dans les objets : le graphe d’objets obtenu n’inclut tout simplement pas `ListBox.Items`.</span><span class="sxs-lookup"><span data-stu-id="b041a-129">But XAML does not process that way when you read the markup and write to objects, the resulting object graph does not literally include `ListBox.Items`.</span></span> <span data-ttu-id="b041a-130">Toutefois, elle a une propriété <xref:System.Windows.Controls.ListBox> nommée `Items` qui contient un <xref:System.Windows.Controls.ItemCollection>, et cette <xref:System.Windows.Controls.ItemCollection> est initialisée mais vide lors du traitement de l' <xref:System.Windows.Controls.ListBox> XAML.</span><span class="sxs-lookup"><span data-stu-id="b041a-130">It does however have a <xref:System.Windows.Controls.ListBox> property named `Items` that contains a <xref:System.Windows.Controls.ItemCollection>, and that <xref:System.Windows.Controls.ItemCollection> is initialized but empty when the <xref:System.Windows.Controls.ListBox> XAML is processed.</span></span> <span data-ttu-id="b041a-131">Ensuite, chaque élément objet enfant qui existe en tant que contenu pour le <xref:System.Windows.Controls.ListBox> est ajouté au <xref:System.Windows.Controls.ItemCollection> par les appels de l’analyseur à `ItemCollection.Add`.</span><span class="sxs-lookup"><span data-stu-id="b041a-131">Then, each child object element that exists as content for the <xref:System.Windows.Controls.ListBox> is added to the <xref:System.Windows.Controls.ItemCollection> by parser calls to `ItemCollection.Add`.</span></span> <span data-ttu-id="b041a-132">Cet exemple de traitement du code XAML dans une arborescence d’objets semble jusqu’à présent être un exemple où l’arborescence d’objets créée est fondamentalement l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-132">This example of processing XAML into an object tree is so far seemingly an example where the created object tree is basically the logical tree.</span></span>  
  
 <span data-ttu-id="b041a-133">Toutefois, l’arborescence logique n’est pas le graphique d’objets entier qui existe pour l’interface utilisateur de votre application au moment de l’exécution, même avec les éléments de syntaxe implicite XAML pris en compte. La raison principale est qu’il s’agit d’éléments visuels et de modèles.</span><span class="sxs-lookup"><span data-stu-id="b041a-133">However, the logical tree is not the entire object graph that exists for your application UI at run time, even with the XAML implicit syntax items factored out. The main reason for this is visuals and templates.</span></span> <span data-ttu-id="b041a-134">Par exemple, considérez le <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="b041a-134">For example, consider the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="b041a-135">L’arborescence logique signale l’objet <xref:System.Windows.Controls.Button> ainsi que sa chaîne `Content`.</span><span class="sxs-lookup"><span data-stu-id="b041a-135">The logical tree reports the <xref:System.Windows.Controls.Button> object and also its string `Content`.</span></span> <span data-ttu-id="b041a-136">Mais il y a plus que ce bouton dans l’arborescence d’objets à l’exécution.</span><span class="sxs-lookup"><span data-stu-id="b041a-136">But there is more to this button in the run-time object tree.</span></span> <span data-ttu-id="b041a-137">En particulier, le bouton s’affiche uniquement sur l’écran comme il le fait car un modèle de contrôle de <xref:System.Windows.Controls.Button> spécifique a été appliqué.</span><span class="sxs-lookup"><span data-stu-id="b041a-137">In particular, the button only appears on screen the way it does because a specific <xref:System.Windows.Controls.Button> control template was applied.</span></span> <span data-ttu-id="b041a-138">Les éléments visuels qui proviennent d’un modèle appliqué (tels que les <xref:System.Windows.Controls.Border> définis par un modèle de gris foncé autour du bouton visuel) ne sont pas signalés dans l’arborescence logique, même si vous examinez l’arborescence logique pendant l’exécution (par exemple, la gestion d’un événement d’entrée à partir de l’interface utilisateur visible, puis la lecture de l’arborescence logique).</span><span class="sxs-lookup"><span data-stu-id="b041a-138">The visuals that come from an applied template (such as the template-defined <xref:System.Windows.Controls.Border> of dark gray around the visual button) are not reported in the logical tree, even if you are looking at the logical tree during run time (such as handling an input event from the visible UI and then reading the logical tree).</span></span> <span data-ttu-id="b041a-139">Pour rechercher les éléments visuels du modèle, vous devez au lieu de cela examiner l’arborescence d’éléments visuels.</span><span class="sxs-lookup"><span data-stu-id="b041a-139">To find the template visuals, you would instead need to examine the visual tree.</span></span>  
  
 <span data-ttu-id="b041a-140">Pour plus d’informations sur la façon dont la syntaxe [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] est mappée au graphe d’objets créé et sur la syntaxe implicite en XAML, consultez [Syntaxe XAML en détail](xaml-syntax-in-detail.md) ou [Vue d’ensemble de XAML (WPF)](xaml-overview-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="b041a-140">For more information about how [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] syntax maps to the created object graph, and implicit syntax in XAML, see [XAML Syntax In Detail](xaml-syntax-in-detail.md) or [XAML Overview (WPF)](xaml-overview-wpf.md).</span></span>  
  
<a name="tree_property_inheritance_event_routing"></a>   
### <a name="the-purpose-of-the-logical-tree"></a><span data-ttu-id="b041a-141">Objectif de l’arborescence logique</span><span class="sxs-lookup"><span data-stu-id="b041a-141">The Purpose of the Logical Tree</span></span>  
 <span data-ttu-id="b041a-142">L’arborescence logique existe pour que les modèles de contenu puissent facilement itérer sur leurs éventuels objets enfants, et pour que les modèles de contenu puissent être extensibles.</span><span class="sxs-lookup"><span data-stu-id="b041a-142">The logical tree exists so that content models can readily iterate over their possible child objects, and so that content models can be extensible.</span></span> <span data-ttu-id="b041a-143">De même, l’arborescence logique fournit un framework pour certaines notifications, comme quand tous les objets de l’arborescence logique sont chargés.</span><span class="sxs-lookup"><span data-stu-id="b041a-143">Also, the logical tree provides a framework for certain notifications, such as when all objects in the logical tree are loaded.</span></span> <span data-ttu-id="b041a-144">En fait, l’arborescence logique est une approximation d’un graphe d’objets à l’exécution au niveau du framework, ce qui exclut les éléments visuels, mais convient pour de nombreuses opérations de requêtes sur la composition de votre propre application à l’exécution.</span><span class="sxs-lookup"><span data-stu-id="b041a-144">Basically, the logical tree is an approximation of a run time object graph at the framework level, which excludes visuals, but is adequate for many querying operations against your own run time application's composition.</span></span>  
  
 <span data-ttu-id="b041a-145">En outre, les références de ressources statiques et dynamiques sont résolues en effectuant une recherche dans l’arborescence logique pour <xref:System.Windows.FrameworkElement.Resources%2A> collections sur l’objet de demande initial, puis en poursuivant l’arborescence logique et en vérifiant chaque <xref:System.Windows.FrameworkElement> (ou <xref:System.Windows.FrameworkContentElement>) pour une autre valeur `Resources` qui contient une <xref:System.Windows.ResourceDictionary>, éventuellement contenant cette clé.</span><span class="sxs-lookup"><span data-stu-id="b041a-145">In addition, both static and dynamic resource references are resolved by looking upwards through the logical tree for <xref:System.Windows.FrameworkElement.Resources%2A> collections on the initial requesting object, and then continuing up the logical tree and checking each <xref:System.Windows.FrameworkElement> (or <xref:System.Windows.FrameworkContentElement>) for another `Resources` value that contains a <xref:System.Windows.ResourceDictionary>, possibly containing that key.</span></span> <span data-ttu-id="b041a-146">L’arborescence logique est utilisée pour la recherche de ressources quand l’arborescence logique et l’arborescence d’éléments visuels sont présentes.</span><span class="sxs-lookup"><span data-stu-id="b041a-146">The logical tree is used for resource lookup when both the logical tree and the visual tree are present.</span></span> <span data-ttu-id="b041a-147">Pour plus d’informations sur les dictionnaires et la recherche de ressources, consultez la page [Ressources XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="b041a-147">For more information on resource dictionaries and lookup, see [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>  
  
<a name="composition"></a>   
### <a name="composition-of-the-logical-tree"></a><span data-ttu-id="b041a-148">Composition de l’arborescence logique</span><span class="sxs-lookup"><span data-stu-id="b041a-148">Composition of the Logical Tree</span></span>  
 <span data-ttu-id="b041a-149">L’arborescence logique est définie au niveau de l’infrastructure WPF, ce qui signifie que l’élément de base WPF le plus pertinent pour les opérations d’arborescence logique est soit <xref:System.Windows.FrameworkElement>, soit <xref:System.Windows.FrameworkContentElement>.</span><span class="sxs-lookup"><span data-stu-id="b041a-149">The logical tree is defined at the WPF framework-level, which means that the WPF base element that is most relevant for logical tree operations is either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="b041a-150">Toutefois, comme vous pouvez le voir si vous utilisez réellement l’API <xref:System.Windows.LogicalTreeHelper>, l’arborescence logique contient parfois des nœuds qui ne sont ni <xref:System.Windows.FrameworkElement> ni <xref:System.Windows.FrameworkContentElement>.</span><span class="sxs-lookup"><span data-stu-id="b041a-150">However, as you can see if you actually use the <xref:System.Windows.LogicalTreeHelper> API, the logical tree sometimes contains nodes that are not either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="b041a-151">Par exemple, l’arborescence logique indique la valeur <xref:System.Windows.Controls.TextBlock.Text%2A> d’un <xref:System.Windows.Controls.TextBlock>, qui est une chaîne.</span><span class="sxs-lookup"><span data-stu-id="b041a-151">For instance, the logical tree reports the <xref:System.Windows.Controls.TextBlock.Text%2A> value of a <xref:System.Windows.Controls.TextBlock>, which is a string.</span></span>  
  
<a name="override_logical_tree"></a>   
### <a name="overriding-the-logical-tree"></a><span data-ttu-id="b041a-152">Remplacement de l’arborescence logique</span><span class="sxs-lookup"><span data-stu-id="b041a-152">Overriding the Logical Tree</span></span>  
 <span data-ttu-id="b041a-153">Les auteurs de contrôles avancés peuvent remplacer l’arborescence logique en remplaçant plusieurs API qui définissent la façon dont un objet général ou un modèle de contenu ajoute ou supprime des objets dans l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-153">Advanced control authors can override the logical tree by overriding several APIs that define how a general object or content model adds or removes objects within the logical tree.</span></span> <span data-ttu-id="b041a-154">Pour obtenir un exemple montrant comment remplacer l’arborescence logique, consultez [Remplacer l’arborescence logique](how-to-override-the-logical-tree.md).</span><span class="sxs-lookup"><span data-stu-id="b041a-154">For an example of how to override the logical tree, see [Override the Logical Tree](how-to-override-the-logical-tree.md).</span></span>  
  
<a name="pvi"></a>   
### <a name="property-value-inheritance"></a><span data-ttu-id="b041a-155">Héritage de valeur de propriété</span><span class="sxs-lookup"><span data-stu-id="b041a-155">Property Value Inheritance</span></span>  
 <span data-ttu-id="b041a-156">L’héritage des valeurs de propriété fonctionne à travers une arborescence hybride.</span><span class="sxs-lookup"><span data-stu-id="b041a-156">Property value inheritance operates through a hybrid tree.</span></span> <span data-ttu-id="b041a-157">Les métadonnées réelles qui contiennent la propriété <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> qui autorise l’héritage de propriété sont la classe <xref:System.Windows.FrameworkPropertyMetadata> au niveau de l’infrastructure WPF.</span><span class="sxs-lookup"><span data-stu-id="b041a-157">The actual metadata that contains the <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> property that enables property inheritance is the WPF framework-level <xref:System.Windows.FrameworkPropertyMetadata> class.</span></span> <span data-ttu-id="b041a-158">Par conséquent, le parent qui contient la valeur d’origine et l’objet enfant qui hérite de cette valeur doivent être <xref:System.Windows.FrameworkElement> ou <xref:System.Windows.FrameworkContentElement>, et ils doivent tous deux faire partie d’une arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-158">Therefore, both the parent that holds the original value and the child object that inherits that value must both be <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>, and they must both be part of some logical tree.</span></span> <span data-ttu-id="b041a-159">Cependant, pour les propriétés WPF existantes qui prennent en charge l’héritage des propriétés, l’héritage de la valeur des propriétés peut se perpétuer à travers un objet intermédiaire qui ne se trouve pas dans l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-159">However, for existing WPF properties that support property inheritance, property value inheritance is able to perpetuate through an intervening object that is not in the logical tree.</span></span> <span data-ttu-id="b041a-160">Ceci est principalement approprié pour avoir des éléments de modèle utilisant des valeurs de propriétés héritées définies sur l’instance changée en modèle ou à des niveaux néanmoins plus élevés de la composition de niveau page, et par conséquent plus haut dans l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-160">Mainly this is relevant for having template elements use any inherited property values set either on the instance that is templated, or at still higher levels of page-level composition and therefore higher in the logical tree.</span></span> <span data-ttu-id="b041a-161">Pour que l’héritage des valeurs de propriétés fonctionne de manière cohérente dans cette limite, la propriété qui hérite doit être inscrite comme propriété attachée, et vous devez suivre ce modèle si vous prévoyez de définir une propriété de dépendance personnalisée avec un comportement d’héritage de propriété.</span><span class="sxs-lookup"><span data-stu-id="b041a-161">In order for property value inheritance to work consistently across such a boundary, the inheriting property must be registered as an attached property, and you should follow this pattern if you intend to define a custom dependency property with property inheritance behavior.</span></span> <span data-ttu-id="b041a-162">L’arborescence exacte utilisée pour l’héritage de propriétés ne peut pas être entièrement anticipée par une méthode d’utilitaire de classe d’assistance, même au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="b041a-162">The exact tree used for property inheritance cannot be entirely anticipated by a helper class utility method, even at run time.</span></span> <span data-ttu-id="b041a-163">Pour plus d’informations, consultez [Héritage de valeur de propriété](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="b041a-163">For more information, see [Property Value Inheritance](property-value-inheritance.md).</span></span>  
  
<a name="two_trees"></a>   
## <a name="the-visual-tree"></a><span data-ttu-id="b041a-164">L’arborescence d’éléments visuels</span><span class="sxs-lookup"><span data-stu-id="b041a-164">The Visual Tree</span></span>  
 <span data-ttu-id="b041a-165">En plus du concept d’arborescence logique, il existe également le concept d’arborescence d’éléments visuels dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b041a-165">In addition to the concept of the logical tree, there is also the concept of the visual tree in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="b041a-166">L’arborescence d’éléments visuels décrit la structure des objets visuels, telle qu’elle est représentée par la classe de base <xref:System.Windows.Media.Visual>.</span><span class="sxs-lookup"><span data-stu-id="b041a-166">The visual tree describes the structure of visual objects, as represented by the <xref:System.Windows.Media.Visual> base class.</span></span> <span data-ttu-id="b041a-167">Quand vous écrivez un modèle pour un contrôle, vous définissez ou vous redéfinissez l’arborescence d’éléments visuels qui s’applique pour ce contrôle.</span><span class="sxs-lookup"><span data-stu-id="b041a-167">When you write a template for a control, you are defining or redefining the visual tree that applies for that control.</span></span> <span data-ttu-id="b041a-168">L’arborescence d’éléments visuels est également intéressante pour les développeurs désireux un contrôle de plus bas niveau sur le dessin pour des raisons de performances et d’optimisation.</span><span class="sxs-lookup"><span data-stu-id="b041a-168">The visual tree is also of interest to developers who want lower-level control over drawing for performance and optimization reasons.</span></span> <span data-ttu-id="b041a-169">Une exposition de l’arborescence d’éléments visuels dans le cadre d’une programmation conventionnelle [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] est que les routes d’événements pour un événement routé passent principalement le long de l’arborescence d’éléments visuels, et non pas le long de l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-169">One exposure of the visual tree as part of conventional [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application programming is that event routes for a routed event mostly travel along the visual tree, not the logical tree.</span></span> <span data-ttu-id="b041a-170">Cette subtilité du comportement des événements routés peut ne pas être immédiatement apparente, sauf si vous êtes un créateur de contrôles.</span><span class="sxs-lookup"><span data-stu-id="b041a-170">This subtlety of routed event behavior might not be immediately apparent unless you are a control author.</span></span> <span data-ttu-id="b041a-171">Le routage des événements à travers l’arborescence d’éléments visuel permet aux contrôles qui implémentent la composition au niveau de l’élément visuel de gérer les événements ou de créer des méthodes setter d’événement.</span><span class="sxs-lookup"><span data-stu-id="b041a-171">Routing events through the visual tree enables controls that implement composition at the visual level to handle events or create event setters.</span></span>  
  
<a name="trees_content"></a>   
## <a name="trees-content-elements-and-content-hosts"></a><span data-ttu-id="b041a-172">Arborescences, éléments de contenu et hôtes de contenu</span><span class="sxs-lookup"><span data-stu-id="b041a-172">Trees, Content Elements, and Content Hosts</span></span>  
 <span data-ttu-id="b041a-173">Les éléments de contenu (classes qui dérivent de <xref:System.Windows.ContentElement>) ne font pas partie de l’arborescence d’éléments visuels ; ils n’héritent pas de <xref:System.Windows.Media.Visual> et n’ont pas de représentation visuelle.</span><span class="sxs-lookup"><span data-stu-id="b041a-173">Content elements (classes that derive from <xref:System.Windows.ContentElement>) are not part of the visual tree; they do not inherit from <xref:System.Windows.Media.Visual> and do not have a visual representation.</span></span> <span data-ttu-id="b041a-174">Pour apparaître dans une interface utilisateur, une <xref:System.Windows.ContentElement> doit être hébergée dans un hôte de contenu qui est à la fois un <xref:System.Windows.Media.Visual> et un participant d’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-174">In order to appear in a UI at all, a <xref:System.Windows.ContentElement> must be hosted in a content host that is both a <xref:System.Windows.Media.Visual> and a logical tree participant.</span></span> <span data-ttu-id="b041a-175">En général, un tel objet est un <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="b041a-175">Usually such an object is a <xref:System.Windows.FrameworkElement>.</span></span> <span data-ttu-id="b041a-176">Vous pouvez conceptualiser ce mécanisme de la façon suivante : l’hôte de contenu est comme un « navigateur » pour le contenu et il choisit comment afficher ce contenu dans la zone de l’écran contrôlée par l’hôte.</span><span class="sxs-lookup"><span data-stu-id="b041a-176">You can conceptualize that the content host is somewhat like a "browser" for the content and chooses how to display that content within the screen region that the host controls.</span></span> <span data-ttu-id="b041a-177">Quand le contenu est hébergé, il peut devenir un participant à certains processus de l’arborescence qui sont normalement associés à l’arborescence d’éléments visuels.</span><span class="sxs-lookup"><span data-stu-id="b041a-177">When the content is hosted, the content can be made a participant in certain tree processes that are normally associated with the visual tree.</span></span> <span data-ttu-id="b041a-178">En règle générale, la classe d’hôte <xref:System.Windows.FrameworkElement> inclut du code d’implémentation qui ajoute tout <xref:System.Windows.ContentElement> hébergé à l’itinéraire d’événement via des sous-nœuds de l’arborescence logique de contenu, même si le contenu hébergé ne fait pas partie de l’arborescence d’éléments visuels réelle.</span><span class="sxs-lookup"><span data-stu-id="b041a-178">Generally, the <xref:System.Windows.FrameworkElement> host class includes implementation code that adds any hosted <xref:System.Windows.ContentElement> to the event route through subnodes of the content logical tree, even though the hosted content is not part of the true visual tree.</span></span> <span data-ttu-id="b041a-179">Cela est nécessaire pour qu’un <xref:System.Windows.ContentElement> puisse sourcer un événement routé qui achemine vers tout autre élément que lui-même.</span><span class="sxs-lookup"><span data-stu-id="b041a-179">This is necessary so that a <xref:System.Windows.ContentElement> can source a routed event that routes to any element other than itself.</span></span>  
  
<a name="tree_traversal"></a>   
## <a name="tree-traversal"></a><span data-ttu-id="b041a-180">Parcours des arborescences</span><span class="sxs-lookup"><span data-stu-id="b041a-180">Tree Traversal</span></span>  
 <span data-ttu-id="b041a-181">La classe <xref:System.Windows.LogicalTreeHelper> fournit les méthodes <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>et <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> pour la traversée d’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-181">The <xref:System.Windows.LogicalTreeHelper> class provides the <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>, and <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> methods for logical tree traversal.</span></span> <span data-ttu-id="b041a-182">Dans la plupart des cas, vous n’avez pas à parcourir l’arborescence logique des contrôles existants, car ces contrôles exposent presque toujours leurs éléments enfants logiques comme une propriété de collection dédiée qui prend en charge les accès à la collection, comme `Add`, un indexeur, etc.</span><span class="sxs-lookup"><span data-stu-id="b041a-182">In most cases, you should not have to traverse the logical tree of existing controls, because these controls almost always expose their logical child elements as a dedicated collection property that supports collection access such as `Add`, an indexer, and so on.</span></span> <span data-ttu-id="b041a-183">La traversée d’arborescence est principalement un scénario utilisé par les auteurs de contrôle qui choisissent de ne pas dériver des modèles de contrôle prévus, tels que <xref:System.Windows.Controls.ItemsControl> ou <xref:System.Windows.Controls.Panel> où les propriétés de collection sont déjà définies, et qui envisagent de fournir leur propre prise en charge des propriétés de collection.</span><span class="sxs-lookup"><span data-stu-id="b041a-183">Tree traversal is mainly a scenario that is used by control authors who choose not to derive from intended control patterns such as <xref:System.Windows.Controls.ItemsControl> or <xref:System.Windows.Controls.Panel> where collection properties are already defined, and who intend to provide their own collection property support.</span></span>  
  
 <span data-ttu-id="b041a-184">L’arborescence d’éléments visuels prend également en charge une classe d’assistance pour parcourir les arborescences d’éléments visuels, <xref:System.Windows.Media.VisualTreeHelper>.</span><span class="sxs-lookup"><span data-stu-id="b041a-184">The visual tree also supports a helper class for visual tree traversal, <xref:System.Windows.Media.VisualTreeHelper>.</span></span> <span data-ttu-id="b041a-185">L’arborescence d’éléments visuels n’est pas exposée aussi facilement à l’aide de propriétés spécifiques au contrôle. par conséquent, la classe <xref:System.Windows.Media.VisualTreeHelper> est la méthode recommandée pour parcourir l’arborescence d’éléments visuels si cela est nécessaire pour votre scénario de programmation.</span><span class="sxs-lookup"><span data-stu-id="b041a-185">The visual tree is not exposed as conveniently through control-specific properties, so the <xref:System.Windows.Media.VisualTreeHelper> class is the recommended way to traverse the visual tree if that is necessary for your programming scenario.</span></span> <span data-ttu-id="b041a-186">Pour plus d’informations, consultez [Vue d’ensemble du rendu graphique WPF](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b041a-186">For more information, see [WPF Graphics Rendering Overview](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="b041a-187">Il est parfois nécessaire d’examiner l’arborescence d’éléments visuels d’un modèle appliqué.</span><span class="sxs-lookup"><span data-stu-id="b041a-187">Sometimes it is necessary to examine the visual tree of an applied template.</span></span> <span data-ttu-id="b041a-188">Vous devez être prudent quand vous utilisez cette technique.</span><span class="sxs-lookup"><span data-stu-id="b041a-188">You should be careful when using this technique.</span></span> <span data-ttu-id="b041a-189">Même si vous parcourez une arborescence d’éléments visuels pour un contrôle où vous définissez le modèle, les consommateurs de votre contrôle peuvent toujours modifier le modèle en définissant la propriété <xref:System.Windows.Controls.Control.Template%2A> sur les instances, et même l’utilisateur final peut influencer le modèle appliqué en modifiant le thème du système.</span><span class="sxs-lookup"><span data-stu-id="b041a-189">Even if you are traversing a visual tree for a control where you define the template, consumers of your control can always change the template by setting the <xref:System.Windows.Controls.Control.Template%2A> property on instances, and even the end user can influence the applied template by changing the system theme.</span></span>  
  
<a name="routes"></a>   
## <a name="routes-for-routed-events-as-a-tree"></a><span data-ttu-id="b041a-190">Routes pour les événements routés en tant qu’« arborescence »</span><span class="sxs-lookup"><span data-stu-id="b041a-190">Routes for Routed Events as a "Tree"</span></span>  
 <span data-ttu-id="b041a-191">Comme mentionné précédemment, la route de tout événement routé donné suit un chemin unique et prédéterminé d’une arborescence qui est un hybride de représentations de l’arborescence d’éléments visuels et de l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-191">As mentioned before, the route of any given routed event travels along a single and predetermined path of a tree that is a hybrid of the visual and logical tree representations.</span></span> <span data-ttu-id="b041a-192">La route d’événements peut suivre des directions vers le haut ou vers le bas de l’arborescence, selon qu’il s’agit d’une route d’événements de tunneling ou de propagation.</span><span class="sxs-lookup"><span data-stu-id="b041a-192">The event route can travel either in the up or down directions within the tree depending on whether it is a tunneling or bubbling routed event.</span></span> <span data-ttu-id="b041a-193">Le concept de route d’événements n’a pas de prise en charge directe par une classe d’assistance qui pourrait être utilisée pour parcourir la route d’événements indépendamment du déclenchement d’un événement qui routerait effectivement.</span><span class="sxs-lookup"><span data-stu-id="b041a-193">The event route concept does not have a directly supporting helper class that could be used to "walk" the event route independently of raising an event that actually routes.</span></span> <span data-ttu-id="b041a-194">Il existe une classe qui représente l’itinéraire, <xref:System.Windows.EventRoute>, mais les méthodes de cette classe sont généralement réservées à un usage interne uniquement.</span><span class="sxs-lookup"><span data-stu-id="b041a-194">There is a class that represents the route, <xref:System.Windows.EventRoute>, but the methods of that class are generally for internal use only.</span></span>  
  
<a name="resourcesandtrees"></a>   
## <a name="resource-dictionaries-and-trees"></a><span data-ttu-id="b041a-195">Dictionnaires et arborescences de ressources</span><span class="sxs-lookup"><span data-stu-id="b041a-195">Resource Dictionaries and Trees</span></span>  
 <span data-ttu-id="b041a-196">La recherche dans le dictionnaire de ressources pour toutes les `Resources` définies dans une page parcourt l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-196">Resource dictionary lookup for all `Resources` defined in a page traverses basically the logical tree.</span></span> <span data-ttu-id="b041a-197">Les objets qui ne sont pas dans l’arborescence logique peuvent référencer des ressources avec des clés, mais la séquence de recherche des ressources commence à l’endroit où cet objet est connecté à l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="b041a-197">Objects that are not in the logical tree can reference keyed resources, but the resource lookup sequence begins at the point where that object is connected to the logical tree.</span></span> <span data-ttu-id="b041a-198">Dans WPF, seuls les nœuds d’arbre logiques peuvent avoir une propriété `Resources` qui contient un <xref:System.Windows.ResourceDictionary>, par conséquent, il n’y a aucun avantage à parcourir l’arborescence d’éléments visuels à la recherche de ressources de clé à partir d’un <xref:System.Windows.ResourceDictionary>.</span><span class="sxs-lookup"><span data-stu-id="b041a-198">In WPF, only logical tree nodes can have a `Resources` property that contains a <xref:System.Windows.ResourceDictionary>, therefore there is no benefit in traversing the visual tree looking for keyed resources from a <xref:System.Windows.ResourceDictionary>.</span></span>  
  
 <span data-ttu-id="b041a-199">Cependant, la recherche de ressources peut également s’étendre au-delà de l’arborescence logique immédiate.</span><span class="sxs-lookup"><span data-stu-id="b041a-199">However, resource lookup can also extend beyond the immediate logical tree.</span></span> <span data-ttu-id="b041a-200">Pour le balisage de l’application, la recherche de ressources peut continuer ensuite dans les dictionnaires de ressources de niveau application, puis dans la prise en charge des thèmes et les valeurs système qui sont référencées en tant que clés ou propriétés statiques.</span><span class="sxs-lookup"><span data-stu-id="b041a-200">For application markup, the resource lookup can then continue onward to application-level resource dictionaries and then to theme support and system values that are referenced as static properties or keys.</span></span> <span data-ttu-id="b041a-201">Les thèmes eux-mêmes peuvent également référencer des valeurs système en dehors de l’arborescence logique des thèmes si les références de ressource sont dynamiques.</span><span class="sxs-lookup"><span data-stu-id="b041a-201">Themes themselves can also reference system values outside of the theme logical tree if the resource references are dynamic.</span></span> <span data-ttu-id="b041a-202">Pour plus d’informations sur les dictionnaires de ressources et la logique de la recherche, consultez [Ressources XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="b041a-202">For more information on resource dictionaries and the lookup logic, see [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b041a-203">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="b041a-203">See also</span></span>

- [<span data-ttu-id="b041a-204">Vue d’ensemble des entrées</span><span class="sxs-lookup"><span data-stu-id="b041a-204">Input Overview</span></span>](input-overview.md)
- [<span data-ttu-id="b041a-205">Vue d’ensemble du rendu graphique de WPF</span><span class="sxs-lookup"><span data-stu-id="b041a-205">WPF Graphics Rendering Overview</span></span>](../graphics-multimedia/wpf-graphics-rendering-overview.md)
- [<span data-ttu-id="b041a-206">Vue d’ensemble des événements routés</span><span class="sxs-lookup"><span data-stu-id="b041a-206">Routed Events Overview</span></span>](routed-events-overview.md)
- [<span data-ttu-id="b041a-207">Initialisation d’éléments objet ne figurant pas dans une arborescence d’objets</span><span class="sxs-lookup"><span data-stu-id="b041a-207">Initialization for Object Elements Not in an Object Tree</span></span>](initialization-for-object-elements-not-in-an-object-tree.md)
- [<span data-ttu-id="b041a-208">Architecture de WPF</span><span class="sxs-lookup"><span data-stu-id="b041a-208">WPF Architecture</span></span>](wpf-architecture.md)
