---
title: FocusVisualStyle et application d'un style au focus dans les contrôles
ms.date: 03/30/2017
helpviewer_keywords:
- keyboard focus [WPF]
- focus [WPF], visual styling
- styles [WPF], focus visual style
ms.assetid: 786ac576-011b-4d72-913b-558deccb9b35
ms.openlocfilehash: 988b084144532df6f7a6073184fcf035b0813bfd
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/03/2019
ms.locfileid: "73458682"
---
# <a name="styling-for-focus-in-controls-and-focusvisualstyle"></a><span data-ttu-id="d0d62-102">FocusVisualStyle et application d'un style au focus dans les contrôles</span><span class="sxs-lookup"><span data-stu-id="d0d62-102">Styling for Focus in Controls, and FocusVisualStyle</span></span>
[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="d0d62-103">propose deux mécanismes parallèles permettant de changer l’apparence visuelle d’un contrôle lorsqu’il reçoit le focus clavier.</span><span class="sxs-lookup"><span data-stu-id="d0d62-103">provides two parallel mechanisms for changing the visual appearance of a control when it receives keyboard focus.</span></span> <span data-ttu-id="d0d62-104">Le premier mécanisme consiste à utiliser des accesseurs set de propriété pour les propriétés telles que <xref:System.Windows.UIElement.IsKeyboardFocused%2A> dans le style ou le modèle appliqué au contrôle.</span><span class="sxs-lookup"><span data-stu-id="d0d62-104">The first mechanism is to use property setters for properties such as <xref:System.Windows.UIElement.IsKeyboardFocused%2A> within the style or template that is applied to the control.</span></span> <span data-ttu-id="d0d62-105">Le deuxième mécanisme consiste à fournir un style distinct comme valeur de la propriété <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> ; le « style de focus visuel » crée une arborescence d’éléments visuels distincte pour un ornement qui dessine en haut du contrôle, plutôt que de modifier l’arborescence d’éléments visuels du contrôle ou d’un autre élément d’interface utilisateur en le remplaçant.</span><span class="sxs-lookup"><span data-stu-id="d0d62-105">The second mechanism is to provide a separate style as the value of the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property; the "focus visual style" creates a separate visual tree for an adorner that draws on top of the control, rather than changing the visual tree of the control or other UI element by replacing it.</span></span> <span data-ttu-id="d0d62-106">Cette rubrique décrit les scénarios où chacun de ces mécanismes convient.</span><span class="sxs-lookup"><span data-stu-id="d0d62-106">This topic discusses the scenarios where each of these mechanisms is appropriate.</span></span>  

<a name="Purpose"></a>   
## <a name="the-purpose-of-focus-visual-style"></a><span data-ttu-id="d0d62-107">L’objectif du style de focus visuel</span><span class="sxs-lookup"><span data-stu-id="d0d62-107">The Purpose of Focus Visual Style</span></span>  
 <span data-ttu-id="d0d62-108">La fonctionnalité de style de focus visuel fournit un « modèle objet » commun permettant d’introduire un retour visuel utilisateur basé sur la navigation au clavier pour n’importe quel élément d’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d0d62-108">The focus visual style feature provides a common "object model" for introducing visual user feedback based on keyboard navigation to any UI element.</span></span> <span data-ttu-id="d0d62-109">C’est possible sans appliquer un nouveau modèle au contrôle et sans connaître la composition spécifique du modèle.</span><span class="sxs-lookup"><span data-stu-id="d0d62-109">This is possible without applying a new template to the control, or knowing the specific template composition.</span></span>  
  
 <span data-ttu-id="d0d62-110">Toutefois, étant donné que la fonctionnalité de style de focus visuel peut être utilisée sans connaître les modèles de contrôle, le retour visuel qui peut être affiché pour un contrôle avec un style de focus visuel est forcément limité.</span><span class="sxs-lookup"><span data-stu-id="d0d62-110">However, precisely because the focus visual style feature works without knowing the control templates, the visual feedback that can be displayed for a control using a focus visual style is necessarily limited.</span></span> <span data-ttu-id="d0d62-111">Cette fonctionnalité permet de superposer une arborescence d’éléments visuels différente (un ornement) sur l’arborescence d’éléments visuels créée par le rendu d’un contrôle via son modèle.</span><span class="sxs-lookup"><span data-stu-id="d0d62-111">What the feature actually does is to overlay a different visual tree (an adorner) on top of the visual tree as created by a control's rendering through its template.</span></span> <span data-ttu-id="d0d62-112">Vous définissez cette arborescence d’éléments visuels distincte à l’aide d’un style qui remplit la propriété <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>.</span><span class="sxs-lookup"><span data-stu-id="d0d62-112">You define this separate visual tree using a style that fills the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property.</span></span>  
  
<a name="Default"></a>   
## <a name="default-focus-visual-style-behavior"></a><span data-ttu-id="d0d62-113">Comportement du style de focus visuel par défaut</span><span class="sxs-lookup"><span data-stu-id="d0d62-113">Default Focus Visual Style Behavior</span></span>  
 <span data-ttu-id="d0d62-114">Les styles de focus visuels agissent uniquement lorsque l’action du focus a été démarrée par le clavier.</span><span class="sxs-lookup"><span data-stu-id="d0d62-114">Focus visual styles act only when the focus action was initiated by the keyboard.</span></span> <span data-ttu-id="d0d62-115">Une action de la souris ou un changement de focus par programmation désactive le mode de style de focus visuel.</span><span class="sxs-lookup"><span data-stu-id="d0d62-115">Any mouse action or programmatic focus change disables the mode for focus visual styles.</span></span> <span data-ttu-id="d0d62-116">Pour plus d’informations sur les différences entre les modes de focus, consultez [Vue d’ensemble du focus](focus-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d0d62-116">For more information about the distinctions between focus modes, see [Focus Overview](focus-overview.md).</span></span>  
  
 <span data-ttu-id="d0d62-117">Les thèmes des contrôles proposent un comportement de style de focus visuel par défaut qui devient celui de tous les contrôles du thème.</span><span class="sxs-lookup"><span data-stu-id="d0d62-117">The themes for controls include a default focus visual style behavior that becomes the focus visual style for all controls in the theme.</span></span> <span data-ttu-id="d0d62-118">Ce style de thème est identifié par la valeur de la <xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>de clé statique.</span><span class="sxs-lookup"><span data-stu-id="d0d62-118">This theme style is identified by the value of the static key <xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>.</span></span> <span data-ttu-id="d0d62-119">Lorsque vous déclarez votre propre style de focus visuel au niveau de l’application, vous remplacez ce comportement de style par défaut dans les thèmes.</span><span class="sxs-lookup"><span data-stu-id="d0d62-119">When you declare your own focus visual style at the application level, you replace this default style behavior from the themes.</span></span> <span data-ttu-id="d0d62-120">Si vous définissez l’ensemble du thème, vous devez utiliser cette même clé pour définir le style du comportement par défaut à appliquer à l’ensemble du thème.</span><span class="sxs-lookup"><span data-stu-id="d0d62-120">Alternatively, if you define the entire theme, then you should use this same key to define the style for the default behavior for your entire theme.</span></span>  
  
 <span data-ttu-id="d0d62-121">Dans les thèmes, le style de focus visuel par défaut est généralement très simple.</span><span class="sxs-lookup"><span data-stu-id="d0d62-121">In the themes, the default focus visual style is generally very simple.</span></span> <span data-ttu-id="d0d62-122">En voici une brève description :</span><span class="sxs-lookup"><span data-stu-id="d0d62-122">The following is a rough approximation:</span></span>  
  
```xaml  
<Style x:Key="{x:Static SystemParameters.FocusVisualStyleKey}">  
  <Setter Property="Control.Template">  
    <Setter.Value>  
      <ControlTemplate>  
        <Rectangle StrokeThickness="1"  
          Stroke="Black"  
          StrokeDashArray="1 2"  
          SnapsToDevicePixels="true"/>  
      </ControlTemplate>  
    </Setter.Value>  
  </Setter>  
</Style>  
```  
  
<a name="When"></a>   
## <a name="when-to-use-focus-visual-styles"></a><span data-ttu-id="d0d62-123">Quand utiliser des styles de focus visuels</span><span class="sxs-lookup"><span data-stu-id="d0d62-123">When to Use Focus Visual Styles</span></span>  
 <span data-ttu-id="d0d62-124">D’un point de vue conceptuel, l’apparence des styles de focus visuels appliqués aux contrôles doit être la même pour tous les contrôles.</span><span class="sxs-lookup"><span data-stu-id="d0d62-124">Conceptually, the appearance of focus visual styles applied to controls should be coherent from control to control.</span></span> <span data-ttu-id="d0d62-125">Un moyen de garantir l’homogénéité du style est de ne changer le style de focus visuel que si vous créez un thème entier, dans lequel chaque contrôle défini reçoit le même style de focus visuel ou une variation d’un style visuellement semblable.</span><span class="sxs-lookup"><span data-stu-id="d0d62-125">One way to ensure coherence is to change the focus visual style only if you are composing an entire theme, where each control that is defined in the theme gets either the very same focus visual style, or some variation of a style that is visually related from control to control.</span></span> <span data-ttu-id="d0d62-126">Vous pouvez également utiliser le même style (ou des styles similaires) pour tous les éléments d’une page ou d’une interface utilisateur auxquels vous pouvez donner le focus à l’aide du clavier.</span><span class="sxs-lookup"><span data-stu-id="d0d62-126">Alternatively, you might use the same style (or similar styles) to style every keyboard-focusable element on a page or in a UI.</span></span>  
  
 <span data-ttu-id="d0d62-127">La définition de <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> sur des styles de contrôle individuels qui ne font pas partie d’un thème n’est pas l’utilisation prévue des styles de focus visuels.</span><span class="sxs-lookup"><span data-stu-id="d0d62-127">Setting <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> on individual control styles that are not part of a theme is not the intended usage of focus visual styles.</span></span> <span data-ttu-id="d0d62-128">En effet, un comportement visuel incohérent entre les contrôles peut porter à confusion au niveau du focus clavier.</span><span class="sxs-lookup"><span data-stu-id="d0d62-128">This is because an inconsistent visual behavior between controls can lead to a confusing user experience regarding keyboard focus.</span></span> <span data-ttu-id="d0d62-129">Si vous encadrez des comportements spécifiques au contrôle pour le focus clavier qui ne sont délibérément pas cohérents dans un thème, une approche bien meilleure consiste à utiliser des déclencheurs dans les styles pour les propriétés d’état d’entrée individuelles, telles que <xref:System.Windows.UIElement.IsFocused%2A> ou <xref:System.Windows.UIElement.IsKeyboardFocused%2A>.</span><span class="sxs-lookup"><span data-stu-id="d0d62-129">If you are intending control-specific behaviors for keyboard focus that are deliberately not coherent across a theme, a much better approach is to use triggers in styles for individual input state properties, such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocused%2A>.</span></span>  
  
 <span data-ttu-id="d0d62-130">Les styles de focus visuels agissent exclusivement pour le focus clavier.</span><span class="sxs-lookup"><span data-stu-id="d0d62-130">Focus visual styles act exclusively for keyboard focus.</span></span> <span data-ttu-id="d0d62-131">Ils constituent donc un type de fonctionnalité d’accessibilité.</span><span class="sxs-lookup"><span data-stu-id="d0d62-131">As such, focus visual styles are a type of accessibility feature.</span></span> <span data-ttu-id="d0d62-132">Si vous souhaitez changer l’interface utilisateur au niveau d’un type de focus, que ce soit par la souris, le clavier ou par programmation, vous ne devez pas utiliser les styles de focus visuels. Vous devez utiliser des setters et des déclencheurs dans les styles ou les modèles qui utilisent la valeur des propriétés de focus générales, telles que <xref:System.Windows.UIElement.IsFocused%2A> ou <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>.</span><span class="sxs-lookup"><span data-stu-id="d0d62-132">If you want UI changes for any type of focus, whether via mouse, keyboard, or programmatically, then you should not use focus visual styles, and should instead use setters and triggers in styles or templates that are working from the value of general focus properties such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>.</span></span>  
  
<a name="How"></a>   
## <a name="how-to-create-a-focus-visual-style"></a><span data-ttu-id="d0d62-133">Comment créer un style de focus visuel</span><span class="sxs-lookup"><span data-stu-id="d0d62-133">How to Create a Focus Visual Style</span></span>  
 <span data-ttu-id="d0d62-134">Le style que vous créez pour un style de focus visuel doit toujours avoir le <xref:System.Windows.Style.TargetType%2A> de <xref:System.Windows.Controls.Control>.</span><span class="sxs-lookup"><span data-stu-id="d0d62-134">The style you create for a focus visual style should always have the <xref:System.Windows.Style.TargetType%2A> of <xref:System.Windows.Controls.Control>.</span></span> <span data-ttu-id="d0d62-135">Le style doit se composer principalement d’un <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="d0d62-135">The style should consist mainly of a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="d0d62-136">Vous ne spécifiez pas le type de cible comme étant le type dans lequel le style de focus visuel est assigné au <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>.</span><span class="sxs-lookup"><span data-stu-id="d0d62-136">You do not specify the target type to be the type where the focus visual style is assigned to the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>.</span></span>  
  
 <span data-ttu-id="d0d62-137">Étant donné que le type cible est toujours <xref:System.Windows.Controls.Control>, vous devez effectuer un style à l’aide des propriétés communes à tous les contrôles (à l’aide des propriétés de la classe <xref:System.Windows.Controls.Control> et de ses classes de base).</span><span class="sxs-lookup"><span data-stu-id="d0d62-137">Because the target type is always <xref:System.Windows.Controls.Control>, you must style by using properties that are common to all controls (using properties of the <xref:System.Windows.Controls.Control> class and its base classes).</span></span> <span data-ttu-id="d0d62-138">Vous devez créer un modèle qui soit superposé à un élément d’interface utilisateur et qui ne masque pas les zones fonctionnelles du contrôle.</span><span class="sxs-lookup"><span data-stu-id="d0d62-138">You should create a template that will properly function as an overlay to a UI element and that will not obscure functional areas of the control.</span></span> <span data-ttu-id="d0d62-139">En général, cela signifie que le retour visuel doit apparaître en dehors des marges du contrôle, ou sous la forme d’effets temporaires ou discrets qui ne bloquent pas le test d’atteinte du contrôle auquel est appliqué le style de focus visuel.</span><span class="sxs-lookup"><span data-stu-id="d0d62-139">Generally, this means that the visual feedback should appear outside the control margins, or as temporary or unobtrusive effects that will not block the hit testing on the control where the focus visual style is applied.</span></span> <span data-ttu-id="d0d62-140">Les propriétés que vous pouvez utiliser dans la liaison de modèle sont utiles pour déterminer le dimensionnement et le positionnement de votre modèle de superposition : <xref:System.Windows.FrameworkElement.ActualHeight%2A>, <xref:System.Windows.FrameworkElement.ActualWidth%2A>, <xref:System.Windows.FrameworkElement.Margin%2A>et <xref:System.Windows.Controls.Control.Padding%2A>.</span><span class="sxs-lookup"><span data-stu-id="d0d62-140">Properties that you can use in template binding that are useful for determining sizing and positioning of your overlay template include <xref:System.Windows.FrameworkElement.ActualHeight%2A>, <xref:System.Windows.FrameworkElement.ActualWidth%2A>, <xref:System.Windows.FrameworkElement.Margin%2A>, and <xref:System.Windows.Controls.Control.Padding%2A>.</span></span>  
  
<a name="Alternatives"></a>   
## <a name="alternatives-to-using-a-focus-visual-style"></a><span data-ttu-id="d0d62-141">Alternatives à l’utilisation des styles de focus visuels</span><span class="sxs-lookup"><span data-stu-id="d0d62-141">Alternatives to Using a Focus Visual Style</span></span>  
 <span data-ttu-id="d0d62-142">Lorsque l’utilisation d’un style de focus visuel n’est pas adaptée, soit parce que vous appliquez un style différent à chaque contrôle, soit parce que vous souhaitez contrôler davantage le modèle de contrôle, il existe plusieurs autres propriétés et techniques accessibles qui peuvent créer un comportement visuel en réponse aux changements du focus.</span><span class="sxs-lookup"><span data-stu-id="d0d62-142">For situations where using a focus visual style is not appropriate, either because you are only styling single controls or because you want greater control over the control template, there are many other accessible properties and techniques that can create visual behavior in response to changes in focus.</span></span>  
  
 <span data-ttu-id="d0d62-143">Les déclencheurs, les setters et les setters d’événement sont tous abordés en détail dans [Styles et modèles](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d0d62-143">Triggers, setters, and event setters are all discussed in detail in [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span></span> <span data-ttu-id="d0d62-144">La gestion des événements routés est abordée dans [Vue d’ensemble des événements routés](routed-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d0d62-144">Routed event handling is discussed in [Routed Events Overview](routed-events-overview.md).</span></span>  
  
### <a name="iskeyboardfocused"></a><span data-ttu-id="d0d62-145">IsKeyboardFocused</span><span class="sxs-lookup"><span data-stu-id="d0d62-145">IsKeyboardFocused</span></span>  
 <span data-ttu-id="d0d62-146">Si vous êtes particulièrement intéressé par le focus clavier, vous pouvez utiliser la propriété de dépendance <xref:System.Windows.UIElement.IsKeyboardFocused%2A> pour une propriété <xref:System.Windows.Trigger>.</span><span class="sxs-lookup"><span data-stu-id="d0d62-146">If you are specifically interested in keyboard focus, the <xref:System.Windows.UIElement.IsKeyboardFocused%2A> dependency property can be used for a property <xref:System.Windows.Trigger>.</span></span> <span data-ttu-id="d0d62-147">L’utilisation d’un déclencheur de propriété dans un style ou un modèle convient mieux à la définition d’un comportement de focus clavier qui est propre à un seul contrôle, et qui peut ne pas correspondre visuellement au comportement de focus clavier des autres contrôles.</span><span class="sxs-lookup"><span data-stu-id="d0d62-147">A property trigger in either a style or template is a more appropriate technique for defining a keyboard focus behavior that is very specifically for a single control, and which might not visually match the keyboard focus behavior for other controls.</span></span>  
  
 <span data-ttu-id="d0d62-148">Une autre propriété de dépendance similaire est <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>, qui peut être utile si vous souhaitez appeler visuellement que le focus clavier se trouve quelque part dans la composition ou dans la zone fonctionnelle du contrôle.</span><span class="sxs-lookup"><span data-stu-id="d0d62-148">Another similar dependency property is <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>, which might be appropriate to use if you want to visually call out that keyboard focus is somewhere within compositing or within the functional area of the control.</span></span> <span data-ttu-id="d0d62-149">Par exemple, vous pouvez placer un déclencheur <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> de façon à ce qu’un panneau qui regroupe plusieurs contrôles apparaisse différemment, même si le focus clavier peut se trouver plus précisément sur un élément individuel dans ce panneau.</span><span class="sxs-lookup"><span data-stu-id="d0d62-149">For example, you might place an <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> trigger such that a panel that groups several controls appears differently, even though keyboard focus might more precisely be on an individual element within that panel.</span></span>  
  
 <span data-ttu-id="d0d62-150">Vous pouvez également utiliser les événements <xref:System.Windows.UIElement.GotKeyboardFocus> et <xref:System.Windows.UIElement.LostKeyboardFocus> (ainsi que leurs équivalents en version préliminaire).</span><span class="sxs-lookup"><span data-stu-id="d0d62-150">You can also use the events <xref:System.Windows.UIElement.GotKeyboardFocus> and <xref:System.Windows.UIElement.LostKeyboardFocus> (as well as their Preview equivalents).</span></span> <span data-ttu-id="d0d62-151">Vous pouvez utiliser ces événements comme base pour une <xref:System.Windows.EventSetter>, ou vous pouvez écrire des gestionnaires pour les événements dans le code-behind.</span><span class="sxs-lookup"><span data-stu-id="d0d62-151">You can use these events as the basis for an <xref:System.Windows.EventSetter>, or you can write handlers for the events in code-behind.</span></span>  
  
### <a name="other-focus-properties"></a><span data-ttu-id="d0d62-152">Autres propriétés de focus</span><span class="sxs-lookup"><span data-stu-id="d0d62-152">Other Focus Properties</span></span>  
 <span data-ttu-id="d0d62-153">Si vous souhaitez que toutes les causes possibles d’une modification du focus produisent un comportement visuel, vous devez baser un accesseur set ou un déclencheur sur la propriété de dépendance <xref:System.Windows.UIElement.IsFocused%2A>, ou encore sur les événements <xref:System.Windows.UIElement.GotFocus> ou <xref:System.Windows.UIElement.LostFocus> utilisés pour un <xref:System.Windows.EventSetter>.</span><span class="sxs-lookup"><span data-stu-id="d0d62-153">If you want all possible causes of changing focus to produce a visual behavior, you should base a setter or trigger on the <xref:System.Windows.UIElement.IsFocused%2A> dependency property, or alternatively on the <xref:System.Windows.UIElement.GotFocus> or <xref:System.Windows.UIElement.LostFocus> events used for an <xref:System.Windows.EventSetter>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d0d62-154">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d0d62-154">See also</span></span>

- <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>
- [<span data-ttu-id="d0d62-155">Application d’un style et création de modèles</span><span class="sxs-lookup"><span data-stu-id="d0d62-155">Styling and Templating</span></span>](../../../desktop-wpf/fundamentals/styles-templates-overview.md)
- [<span data-ttu-id="d0d62-156">Vue d’ensemble du focus</span><span class="sxs-lookup"><span data-stu-id="d0d62-156">Focus Overview</span></span>](focus-overview.md)
- [<span data-ttu-id="d0d62-157">Vue d’ensemble des entrées</span><span class="sxs-lookup"><span data-stu-id="d0d62-157">Input Overview</span></span>](input-overview.md)
