---
title: Vue d'ensemble des propriétés jointes
description: En savoir plus sur les propriétés jointes dans Windows Presentation Foundation, qui sont des propriétés globales définissables sur n’importe quel objet.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- attached properties [WPF Designer]
ms.assetid: 75928354-dc01-47e8-a018-8409aec1f32d
ms.openlocfilehash: 993f65024fcfc4f39a408c81af43b798360e6cf6
ms.sourcegitcommit: 87cfeb69226fef01acb17c56c86f978f4f4a13db
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/24/2020
ms.locfileid: "87168377"
---
# <a name="attached-properties-overview"></a><span data-ttu-id="b2d42-103">Vue d'ensemble des propriétés jointes</span><span class="sxs-lookup"><span data-stu-id="b2d42-103">Attached Properties Overview</span></span>

<span data-ttu-id="b2d42-104">Une propriété jointe est un concept défini par XAML.</span><span class="sxs-lookup"><span data-stu-id="b2d42-104">An attached property is a concept defined by XAML.</span></span> <span data-ttu-id="b2d42-105">Elle est conçue pour être utilisée comme un type de propriété globale qui peut être défini sur tout objet.</span><span class="sxs-lookup"><span data-stu-id="b2d42-105">An attached property is intended to be used as a type of global property that is settable on any object.</span></span> <span data-ttu-id="b2d42-106">Dans [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], les propriétés jointes sont généralement définies comme une forme spécialisée de la propriété de dépendance qui n’a pas le « wrapper » de propriété classique.</span><span class="sxs-lookup"><span data-stu-id="b2d42-106">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], attached properties are typically defined as a specialized form of dependency property that does not have the conventional property "wrapper".</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b2d42-107">Conditions préalables<a name="prerequisites"></a></span><span class="sxs-lookup"><span data-stu-id="b2d42-107">Prerequisites <a name="prerequisites"></a></span></span>

<span data-ttu-id="b2d42-108">Cet article suppose que vous comprenez les propriétés de dépendance du point de vue d’un consommateur de propriétés de dépendance existantes sur les [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, et que vous avez lu la [vue d’ensemble des propriétés de dépendance](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b2d42-108">This article assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md).</span></span> <span data-ttu-id="b2d42-109">Pour suivre les exemples de cet article, vous devez également comprendre le XAML et savoir comment écrire des applications WPF.</span><span class="sxs-lookup"><span data-stu-id="b2d42-109">To follow the examples in this article, you should also understand XAML and know how to write WPF applications.</span></span>

## <a name="why-use-attached-properties"></a><span data-ttu-id="b2d42-110">Pourquoi utiliser des propriétés jointes<a name="attached_properties_usage"></a></span><span class="sxs-lookup"><span data-stu-id="b2d42-110">Why Use Attached Properties <a name="attached_properties_usage"></a></span></span>

<span data-ttu-id="b2d42-111">L’une des finalités d’une propriété jointe est de permettre à différents éléments enfants de spécifier des valeurs uniques pour une propriété définie dans un élément parent.</span><span class="sxs-lookup"><span data-stu-id="b2d42-111">One purpose of an attached property is to allow different child elements to specify unique values for a property that's defined in a parent element.</span></span> <span data-ttu-id="b2d42-112">Une application spécifique de ce scénario est de faire en sorte que les éléments enfants informent l’élément parent sur la manière dont ils doivent être présentés dans l’[!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b2d42-112">A specific application of this scenario is having child elements inform the parent element of how they are to be presented in the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span></span> <span data-ttu-id="b2d42-113">La propriété en est un exemple <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="b2d42-113">One example is the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="b2d42-114">La <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> propriété est créée en tant que propriété jointe, car elle est conçue pour être définie sur les éléments contenus dans un <xref:System.Windows.Controls.DockPanel> plutôt que sur <xref:System.Windows.Controls.DockPanel> lui-même.</span><span class="sxs-lookup"><span data-stu-id="b2d42-114">The <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> property is created as an attached property because it is designed to be set on elements that are contained within a <xref:System.Windows.Controls.DockPanel> rather than on <xref:System.Windows.Controls.DockPanel> itself.</span></span> <span data-ttu-id="b2d42-115">La <xref:System.Windows.Controls.DockPanel> classe définit le <xref:System.Windows.DependencyProperty> champ statique nommé <xref:System.Windows.Controls.DockPanel.DockProperty> , puis fournit les <xref:System.Windows.Controls.DockPanel.GetDock%2A> méthodes et <xref:System.Windows.Controls.DockPanel.SetDock%2A> comme accesseurs publics pour la propriété jointe.</span><span class="sxs-lookup"><span data-stu-id="b2d42-115">The <xref:System.Windows.Controls.DockPanel> class defines the static <xref:System.Windows.DependencyProperty> field named <xref:System.Windows.Controls.DockPanel.DockProperty>, and then provides the <xref:System.Windows.Controls.DockPanel.GetDock%2A> and <xref:System.Windows.Controls.DockPanel.SetDock%2A> methods as public accessors for the attached property.</span></span>

## <a name="attached-properties-in-xaml"></a><span data-ttu-id="b2d42-116">Propriétés jointes en XAML<a name="attached_properties_xaml"></a></span><span class="sxs-lookup"><span data-stu-id="b2d42-116">Attached Properties in XAML <a name="attached_properties_xaml"></a></span></span>

<span data-ttu-id="b2d42-117">En XAML, vous définissez des propriétés jointes à l’aide de la syntaxe *FournisseurPropriétéJointe*.*NomPropriété*</span><span class="sxs-lookup"><span data-stu-id="b2d42-117">In XAML, you set attached properties by using the syntax *AttachedPropertyProvider*.*PropertyName*</span></span>

<span data-ttu-id="b2d42-118">Voici un exemple de la façon dont vous pouvez définir <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> en XAML :</span><span class="sxs-lookup"><span data-stu-id="b2d42-118">The following is an example of how you can set <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> in XAML:</span></span>

[!code-xaml[PropertiesOvwSupport#APBasicUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml#apbasicusage)]

<span data-ttu-id="b2d42-119">L’utilisation est quelque peu similaire à une propriété statique ; vous référencez toujours le type <xref:System.Windows.Controls.DockPanel> qui possède et inscrit la propriété jointe, plutôt que de faire référence à une instance spécifiée par Name.</span><span class="sxs-lookup"><span data-stu-id="b2d42-119">The usage is somewhat similar to a static property; you always reference the type <xref:System.Windows.Controls.DockPanel> that owns and registers the attached property, rather than referring to any instance specified by name.</span></span>

<span data-ttu-id="b2d42-120">En outre, comme une propriété jointe en XAML est un attribut que vous définissez dans le balisage, seule l’opération définie est pertinente.</span><span class="sxs-lookup"><span data-stu-id="b2d42-120">Also, because an attached property in XAML is an attribute that you set in markup, only the set operation has any relevance.</span></span> <span data-ttu-id="b2d42-121">Vous ne pouvez pas obtenir directement une propriété en XAML, bien que des mécanismes indirects permettent de comparer des valeurs, telles que les déclencheurs dans les styles (pour plus d’informations, consultez [Application d’un style et création de modèles](../../../desktop-wpf/fundamentals/styles-templates-overview.md)).</span><span class="sxs-lookup"><span data-stu-id="b2d42-121">You cannot directly get a property in XAML, although there are some indirect mechanisms for comparing values, such as triggers in styles (for details, see [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md)).</span></span>

### <a name="attached-property-implementation-in-wpf"></a><span data-ttu-id="b2d42-122">Implémentation des propriétés jointes dans WPF</span><span class="sxs-lookup"><span data-stu-id="b2d42-122">Attached Property Implementation in WPF</span></span>

<span data-ttu-id="b2d42-123">Dans [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] , la plupart des propriétés associées à l’interface utilisateur sur les types WPF sont implémentées en tant que propriétés de dépendance.</span><span class="sxs-lookup"><span data-stu-id="b2d42-123">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], most of the UI-related attached properties on WPF types are implemented as dependency properties.</span></span> <span data-ttu-id="b2d42-124">Les propriétés jointes sont un concept XAML, tandis que les propriétés de dépendance sont un concept WPF.</span><span class="sxs-lookup"><span data-stu-id="b2d42-124">Attached properties are a XAML concept, whereas dependency properties are a WPF concept.</span></span> <span data-ttu-id="b2d42-125">Étant donné que les propriétés jointes WPF sont des propriétés de dépendance, elles prennent en charge des concepts de propriété de dépendance tels que les métadonnées de propriété et les valeurs par défaut de ces métadonnées de propriété.</span><span class="sxs-lookup"><span data-stu-id="b2d42-125">Because WPF attached properties are dependency properties, they support dependency property concepts such as property metadata, and default values from that property metadata.</span></span>

## <a name="how-attached-properties-are-used-by-the-owning-type"></a><span data-ttu-id="b2d42-126">Comment les propriétés jointes sont utilisées par le type propriétaire<a name="howused"></a></span><span class="sxs-lookup"><span data-stu-id="b2d42-126">How Attached Properties Are Used by the Owning Type <a name="howused"></a></span></span>

<span data-ttu-id="b2d42-127">Bien que les propriétés jointes puissent être définies sur tout objet, cela ne signifie pas systématiquement que leur définition produira un résultat concret ou que leur valeur sera jamais utilisée par un autre objet.</span><span class="sxs-lookup"><span data-stu-id="b2d42-127">Although attached properties are settable on any object, that does not automatically mean that setting the property will produce a tangible result, or that the value will ever be used by another object.</span></span> <span data-ttu-id="b2d42-128">En général, les propriétés jointes sont utilisées pour que les objets provenant de diverses relations logiques ou hiérarchies de classes possibles puissent chacun communiquer des informations communes au type qui définit la propriété jointe.</span><span class="sxs-lookup"><span data-stu-id="b2d42-128">Generally, attached properties are intended so that objects coming from a wide variety of possible class hierarchies or logical relationships can each report common information to the type that defines the attached property.</span></span> <span data-ttu-id="b2d42-129">Le type qui définit la propriété jointe suit en général l’un de ces modèles :</span><span class="sxs-lookup"><span data-stu-id="b2d42-129">The type that defines the attached property typically follows one of these models:</span></span>

- <span data-ttu-id="b2d42-130">Le type qui définit la propriété jointe est conçu pour pouvoir être l’élément parent des éléments qui définiront les valeurs de la propriété jointe.</span><span class="sxs-lookup"><span data-stu-id="b2d42-130">The type that defines the attached property is designed so that it can be the parent element of the elements that will set values for the attached property.</span></span> <span data-ttu-id="b2d42-131">Le type itère ensuite ses objets enfants par le biais de la logique interne au sein d’une structure d’objets arborescente, obtient les valeurs et agit sur elles.</span><span class="sxs-lookup"><span data-stu-id="b2d42-131">The type then iterates its child objects through internal logic against some object tree structure, obtains the values, and acts on those values in some manner.</span></span>

- <span data-ttu-id="b2d42-132">Le type qui définit la propriété jointe est utilisé comme élément enfant pour divers éléments parents et modèles de contenu possibles.</span><span class="sxs-lookup"><span data-stu-id="b2d42-132">The type that defines the attached property will be used as the child element for a variety of possible parent elements and content models.</span></span>

- <span data-ttu-id="b2d42-133">Le type qui définit la propriété jointe représente un service.</span><span class="sxs-lookup"><span data-stu-id="b2d42-133">The type that defines the attached property represents a service.</span></span> <span data-ttu-id="b2d42-134">D’autres types définissent les valeurs de la propriété jointe.</span><span class="sxs-lookup"><span data-stu-id="b2d42-134">Other types set values for the attached property.</span></span> <span data-ttu-id="b2d42-135">Quand l’élément qui définit la propriété est évalué dans le contexte du service, les valeurs de la propriété jointe sont obtenues par le biais de la logique interne de la classe de service.</span><span class="sxs-lookup"><span data-stu-id="b2d42-135">Then, when the element that set the property is evaluated in the context of the service, the attached property values are obtained through internal logic of the service class.</span></span>

### <a name="an-example-of-a-parent-defined-attached-property"></a><span data-ttu-id="b2d42-136">Exemple d’une propriété jointe définie par le parent</span><span class="sxs-lookup"><span data-stu-id="b2d42-136">An Example of a Parent-Defined Attached Property</span></span>

<span data-ttu-id="b2d42-137">Le scénario le plus courant dans lequel WPF définit une propriété jointe est lorsqu’un élément parent prend en charge une collection d’éléments enfants, et implémente également un comportement où les caractéristiques du comportement sont signalées individuellement pour chaque élément enfant.</span><span class="sxs-lookup"><span data-stu-id="b2d42-137">The most typical scenario where WPF defines an attached property is when a parent element supports a child element collection, and also implements a behavior where the specifics of the behavior are reported individually for each child element.</span></span>

<span data-ttu-id="b2d42-138"><xref:System.Windows.Controls.DockPanel>définit la <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> propriété jointe et <xref:System.Windows.Controls.DockPanel> a un code de niveau classe dans le cadre de sa logique de rendu (plus précisément, <xref:System.Windows.Controls.DockPanel.MeasureOverride%2A> et <xref:System.Windows.Controls.DockPanel.ArrangeOverride%2A> ).</span><span class="sxs-lookup"><span data-stu-id="b2d42-138"><xref:System.Windows.Controls.DockPanel> defines the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> attached property, and <xref:System.Windows.Controls.DockPanel> has class-level code as part of its rendering logic (specifically, <xref:System.Windows.Controls.DockPanel.MeasureOverride%2A> and <xref:System.Windows.Controls.DockPanel.ArrangeOverride%2A>).</span></span> <span data-ttu-id="b2d42-139">Une <xref:System.Windows.Controls.DockPanel> instance vérifie toujours si l’un de ses éléments enfants immédiats a défini une valeur pour <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="b2d42-139">A <xref:System.Windows.Controls.DockPanel> instance will always check to see whether any of its immediate child elements have set a value for <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="b2d42-140">Si tel est le cas, ces valeurs sont entrées pour la logique de rendu appliquée à l’élément enfant en question.</span><span class="sxs-lookup"><span data-stu-id="b2d42-140">If so, those values become input for the rendering logic applied to that particular child element.</span></span> <span data-ttu-id="b2d42-141"><xref:System.Windows.Controls.DockPanel>Les instances imbriquées traitent chacune leurs propres collections d’éléments enfants immédiats, mais ce comportement est spécifique à l’implémentation de la façon dont <xref:System.Windows.Controls.DockPanel> traite les <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> valeurs.</span><span class="sxs-lookup"><span data-stu-id="b2d42-141">Nested <xref:System.Windows.Controls.DockPanel> instances each treat their own immediate child element collections, but that behavior is implementation-specific to how <xref:System.Windows.Controls.DockPanel> processes <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> values.</span></span> <span data-ttu-id="b2d42-142">Il est théoriquement possible d’avoir des propriétés jointes qui influent sur les éléments au-delà du parent immédiat.</span><span class="sxs-lookup"><span data-stu-id="b2d42-142">It is theoretically possible to have attached properties that influence elements beyond the immediate parent.</span></span> <span data-ttu-id="b2d42-143">Si la <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> propriété jointe est définie sur un élément qui n’a pas <xref:System.Windows.Controls.DockPanel> d’élément parent pour agir dessus, aucune erreur ou exception n’est levée.</span><span class="sxs-lookup"><span data-stu-id="b2d42-143">If the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> attached property is set on an element that has no <xref:System.Windows.Controls.DockPanel> parent element to act upon it, no error or exception is raised.</span></span> <span data-ttu-id="b2d42-144">Cela signifie simplement qu’une valeur de propriété globale a été définie, mais qu’elle n’a pas de <xref:System.Windows.Controls.DockPanel> parent actuel pouvant consommer les informations.</span><span class="sxs-lookup"><span data-stu-id="b2d42-144">This simply means that a global property value was set, but it has no current <xref:System.Windows.Controls.DockPanel> parent that could consume the information.</span></span>

## <a name="attached-properties-in-code"></a><span data-ttu-id="b2d42-145">Propriétés jointes dans le code<a name="attached_properties_code"></a></span><span class="sxs-lookup"><span data-stu-id="b2d42-145">Attached Properties in Code <a name="attached_properties_code"></a></span></span>

<span data-ttu-id="b2d42-146">Les propriétés jointes dans WPF n’ont pas les méthodes de « wrapper » CLR typiques pour un accès facile en obtenir/définir.</span><span class="sxs-lookup"><span data-stu-id="b2d42-146">Attached properties in WPF do not have the typical CLR "wrapper" methods for easy get/set access.</span></span> <span data-ttu-id="b2d42-147">Cela est dû au fait que la propriété jointe ne fait pas nécessairement partie de l’espace de noms CLR pour les instances où la propriété est définie.</span><span class="sxs-lookup"><span data-stu-id="b2d42-147">This is because the attached property is not necessarily part of the CLR namespace for instances where the property is set.</span></span> <span data-ttu-id="b2d42-148">Toutefois, un processeur XAML doit pouvoir définir ces valeurs quand XAML est analysé.</span><span class="sxs-lookup"><span data-stu-id="b2d42-148">However, a XAML processor must be able to set those values when XAML is parsed.</span></span> <span data-ttu-id="b2d42-149">Pour prendre en charge l’utilisation d’une propriété jointe effective, le type de propriétaire de la propriété jointe doit implémenter des méthodes d’accesseur dédiées sous la forme **Get_PropertyName_** et **Set_PropertyName_**.</span><span class="sxs-lookup"><span data-stu-id="b2d42-149">To support an effective attached property usage, the owner type of the attached property must implement dedicated accessor methods in the form **Get_PropertyName_** and **Set_PropertyName_**.</span></span> <span data-ttu-id="b2d42-150">Ces méthodes d’accesseur dédiées sont également utiles pour obtenir ou définir la propriété jointe dans le code.</span><span class="sxs-lookup"><span data-stu-id="b2d42-150">These dedicated accessor methods are also useful to get or set the attached property in code.</span></span> <span data-ttu-id="b2d42-151">Du point de vue du code, une propriété jointe s’apparente à un champ de stockage comportant des accesseurs de méthode au lieu d’accesseurs de propriété, et ce champ de stockage peut exister sur tout objet plutôt que devoir être défini de manière spécifique.</span><span class="sxs-lookup"><span data-stu-id="b2d42-151">From a code perspective, an attached property is similar to a backing field that has method accessors instead of property accessors, and that backing field can exist on any object rather than needing to be specifically defined.</span></span>

<span data-ttu-id="b2d42-152">L’exemple suivant illustre la définition d’une propriété jointe dans le code.</span><span class="sxs-lookup"><span data-stu-id="b2d42-152">The following example shows how you can set an attached property in code.</span></span> <span data-ttu-id="b2d42-153">Dans cet exemple, `myCheckBox` est une instance de la <xref:System.Windows.Controls.CheckBox> classe.</span><span class="sxs-lookup"><span data-stu-id="b2d42-153">In this example, `myCheckBox` is an instance of the <xref:System.Windows.Controls.CheckBox> class.</span></span>

[!code-csharp[PropertiesOvwSupport#APCode](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml.cs#apcode)]
[!code-vb[PropertiesOvwSupport#APCode](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page4.xaml.vb#apcode)]

<span data-ttu-id="b2d42-154">Semblable au cas XAML, si `myCheckBox` n’avait pas déjà été ajouté en tant qu’élément enfant de `myDockPanel` par la quatrième ligne de code, la cinquième ligne de code ne lève pas d’exception, mais la valeur de la propriété n’interagit pas avec un <xref:System.Windows.Controls.DockPanel> parent et ne fait donc rien.</span><span class="sxs-lookup"><span data-stu-id="b2d42-154">Similar to the XAML case, if `myCheckBox` had not already been added as a child element of `myDockPanel` by the fourth line of code, the fifth line of code would not raise an exception, but the property value would not interact with a <xref:System.Windows.Controls.DockPanel> parent and thus would do nothing.</span></span> <span data-ttu-id="b2d42-155">Seule une <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> valeur définie sur un élément enfant associé à la présence d’un <xref:System.Windows.Controls.DockPanel> élément parent entraînera un comportement effectif dans l’application rendue.</span><span class="sxs-lookup"><span data-stu-id="b2d42-155">Only a <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> value set on a child element combined with the presence of a <xref:System.Windows.Controls.DockPanel> parent element will cause an effective behavior in the rendered application.</span></span> <span data-ttu-id="b2d42-156">(Dans ce cas, vous pourriez définir la propriété jointe, puis la joindre à l’arborescence.</span><span class="sxs-lookup"><span data-stu-id="b2d42-156">(In this case, you could set the attached property, then attach to the tree.</span></span> <span data-ttu-id="b2d42-157">Vous pourriez également joindre la propriété à l’arborescence, puis la définir.</span><span class="sxs-lookup"><span data-stu-id="b2d42-157">Or you could attach to the tree then set the attached property.</span></span> <span data-ttu-id="b2d42-158">Le résultat est le même, quel que soit l’ordre des actions.)</span><span class="sxs-lookup"><span data-stu-id="b2d42-158">Either action order provides the same result.)</span></span>

## <a name="attached-property-metadata"></a><span data-ttu-id="b2d42-159">Métadonnées de propriété jointe<a name="attached_properties_metadata"></a></span><span class="sxs-lookup"><span data-stu-id="b2d42-159">Attached Property Metadata <a name="attached_properties_metadata"></a></span></span>

<span data-ttu-id="b2d42-160">Lors de l’inscription de la propriété, <xref:System.Windows.FrameworkPropertyMetadata> est défini pour spécifier les caractéristiques de la propriété, par exemple si la propriété affecte le rendu, les mesures, etc.</span><span class="sxs-lookup"><span data-stu-id="b2d42-160">When registering the property, <xref:System.Windows.FrameworkPropertyMetadata> is set to specify characteristics of the property, such as whether the property affects rendering, measurement, and so on.</span></span> <span data-ttu-id="b2d42-161">Les métadonnées d’une propriété jointe sont en général identiques à celles d’une propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="b2d42-161">Metadata for an attached property is generally no different than on a dependency property.</span></span> <span data-ttu-id="b2d42-162">Si vous spécifiez une valeur par défaut dans une substitution des métadonnées d’une propriété jointe, cette valeur devient la valeur par défaut de la propriété jointe implicite sur les instances de la classe de substitution.</span><span class="sxs-lookup"><span data-stu-id="b2d42-162">If you specify a default value in an override to attached property metadata, that value becomes the default value of the implicit attached property on instances of the overriding class.</span></span> <span data-ttu-id="b2d42-163">Spécifiquement, votre valeur par défaut est signalée si un processus demande la valeur d’une propriété jointe par le biais de l’accesseur de méthode `Get` de cette propriété, en spécifiant une instance de la classe dans laquelle vous avez indiqué les métadonnées, et si la valeur de cette propriété jointe n’était autrement pas définie.</span><span class="sxs-lookup"><span data-stu-id="b2d42-163">Specifically, your default value is reported if some process queries for the value of an attached property through the `Get` method accessor for that property, specifying an instance of the class where you specified the metadata, and the value for that attached property was otherwise not set.</span></span>

<span data-ttu-id="b2d42-164">Si vous souhaitez activer l’héritage des valeurs de propriété sur une propriété, vous devez utiliser des propriétés jointes plutôt que des propriétés de dépendance non jointes.</span><span class="sxs-lookup"><span data-stu-id="b2d42-164">If you want to enable property value inheritance on a property, you should use attached properties rather than non-attached dependency properties.</span></span> <span data-ttu-id="b2d42-165">Pour plus d’informations, consultez [Héritage de la valeur de propriété](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="b2d42-165">For details, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

## <a name="custom-attached-properties"></a><span data-ttu-id="b2d42-166">Propriétés jointes personnalisées<a name="custom"></a></span><span class="sxs-lookup"><span data-stu-id="b2d42-166">Custom Attached Properties <a name="custom"></a></span></span>

### <a name="when-to-create-an-attached-property"></a><span data-ttu-id="b2d42-167">Quand créer une propriété jointe<a name="create_attached_properties"></a></span><span class="sxs-lookup"><span data-stu-id="b2d42-167">When to Create an Attached Property <a name="create_attached_properties"></a></span></span>

<span data-ttu-id="b2d42-168">Vous pouvez créer une propriété jointe si un mécanisme de définition de propriété doit être disponible pour les classes autres que la classe de définition.</span><span class="sxs-lookup"><span data-stu-id="b2d42-168">You might create an attached property when there is a reason to have a property setting mechanism available for classes other than the defining class.</span></span> <span data-ttu-id="b2d42-169">Le scénario le plus courant à cette fin est la mise en page.</span><span class="sxs-lookup"><span data-stu-id="b2d42-169">The most common scenario for this is layout.</span></span> <span data-ttu-id="b2d42-170">, Et sont des exemples de propriétés de disposition existantes <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> <xref:System.Windows.Controls.Panel.ZIndex%2A?displayProperty=nameWithType> <xref:System.Windows.Controls.Canvas.Top%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="b2d42-170">Examples of existing layout properties are <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>, <xref:System.Windows.Controls.Panel.ZIndex%2A?displayProperty=nameWithType>, and <xref:System.Windows.Controls.Canvas.Top%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="b2d42-171">Le scénario activé ici implique que les éléments existant comme éléments enfants sur les éléments contrôlant la mise en page sont en mesure d’exprimer individuellement des spécifications de mise en page à leurs éléments parents de mise en page et chacun d’eux définit une valeur de propriété configurée par le parent en tant que propriété jointe.</span><span class="sxs-lookup"><span data-stu-id="b2d42-171">The scenario enabled here is that elements that exist as child elements to layout-controlling elements are able to express layout requirements to their layout parent elements individually, each setting a property value that the parent defined as an attached property.</span></span>

<span data-ttu-id="b2d42-172">Un autre scénario illustrant l’utilisation d’une propriété jointe s’applique quand votre classe représente un service et que vous voulez que les classes soient en mesure d’intégrer le service avec une plus grande transparence.</span><span class="sxs-lookup"><span data-stu-id="b2d42-172">Another scenario for using an attached property is when your class represents a service, and you want classes to be able to integrate the service more transparently.</span></span>

<span data-ttu-id="b2d42-173">Toutefois, un autre scénario consiste à recevoir la prise en charge du Concepteur WPF Visual Studio, telle que la modification de la fenêtre **Propriétés** .</span><span class="sxs-lookup"><span data-stu-id="b2d42-173">Yet another scenario is to receive Visual Studio WPF Designer support, such as **Properties** window editing.</span></span> <span data-ttu-id="b2d42-174">Pour plus d’informations, consultez [Vue d’ensemble de la création de contrôles](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b2d42-174">For more information, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>

<span data-ttu-id="b2d42-175">Comme mentionné précédemment, vous devez enregistrer une propriété jointe si vous souhaitez utiliser l’héritage des valeurs de propriété.</span><span class="sxs-lookup"><span data-stu-id="b2d42-175">As mentioned before, you should register as an attached property if you want to use property value inheritance.</span></span>

### <a name="how-to-create-an-attached-property"></a><span data-ttu-id="b2d42-176">Comment créer une propriété jointe<a name="how_do_i_create_attached_properties"></a></span><span class="sxs-lookup"><span data-stu-id="b2d42-176">How to Create an Attached Property <a name="how_do_i_create_attached_properties"></a></span></span>

<span data-ttu-id="b2d42-177">Si votre classe définit la propriété jointe strictement pour une utilisation sur d’autres types, la classe n’a pas à dériver de <xref:System.Windows.DependencyObject> .</span><span class="sxs-lookup"><span data-stu-id="b2d42-177">If your class is defining the attached property strictly for use on other types, then the class does not have to derive from <xref:System.Windows.DependencyObject>.</span></span> <span data-ttu-id="b2d42-178">Toutefois, vous devez dériver de <xref:System.Windows.DependencyObject> si vous suivez le modèle WPF global qui consiste à faire en sorte que la propriété jointe soit également une propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="b2d42-178">But you do need to derive from <xref:System.Windows.DependencyObject> if you follow the overall WPF model of having your attached property also be a dependency property.</span></span>

<span data-ttu-id="b2d42-179">Définissez votre propriété jointe en tant que propriété de dépendance en déclarant un `public static readonly` champ de type <xref:System.Windows.DependencyProperty> .</span><span class="sxs-lookup"><span data-stu-id="b2d42-179">Define your attached property as a dependency property by declaring a `public static readonly` field of type <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="b2d42-180">Vous définissez ce champ à l’aide de la valeur de retour de la <xref:System.Windows.DependencyProperty.RegisterAttached%2A> méthode.</span><span class="sxs-lookup"><span data-stu-id="b2d42-180">You define this field by using the return value of the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method.</span></span> <span data-ttu-id="b2d42-181">Le nom du champ doit correspondre au nom de la propriété jointe, ajouté à la chaîne `Property` , pour suivre le modèle WPF établi pour nommer les champs d’identification et les propriétés qu’ils représentent.</span><span class="sxs-lookup"><span data-stu-id="b2d42-181">The field name must match the attached property name, appended with the string `Property`, to follow the established WPF pattern of naming the identifying fields versus the properties that they represent.</span></span> <span data-ttu-id="b2d42-182">Le fournisseur de propriétés jointes doit également fournir des méthodes **Get_PropertyName_** et **Set_PropertyName_** statiques comme accesseurs de la propriété jointe ; Si ce n’est pas le cas, le système de propriétés ne peut pas utiliser votre propriété jointe.</span><span class="sxs-lookup"><span data-stu-id="b2d42-182">The attached property provider must also provide static **Get_PropertyName_** and **Set_PropertyName_** methods as accessors for the attached property; failing to do this results in the property system being unable to use your attached property.</span></span>

> [!NOTE]
> <span data-ttu-id="b2d42-183">Si vous omettez l’accesseur Get de la propriété jointe, la liaison de données sur la propriété ne fonctionnera pas dans les outils de conception, tels que Visual Studio et Blend pour Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b2d42-183">If you omit the attached property's get accessor, data binding on the property will not work in design tools, such as Visual Studio and Blend for Visual Studio.</span></span>

#### <a name="the-get-accessor"></a><span data-ttu-id="b2d42-184">Accesseur Get</span><span class="sxs-lookup"><span data-stu-id="b2d42-184">The Get Accessor</span></span>

<span data-ttu-id="b2d42-185">La signature de l’accesseur **Get_PropertyName_** doit être :</span><span class="sxs-lookup"><span data-stu-id="b2d42-185">The signature for the **Get_PropertyName_** accessor must be:</span></span>

`public static object GetPropertyName(object target)`

- <span data-ttu-id="b2d42-186">L’objet `target` peut être défini comme un type plus spécifique dans votre implémentation.</span><span class="sxs-lookup"><span data-stu-id="b2d42-186">The `target` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="b2d42-187">Par exemple, la <xref:System.Windows.Controls.DockPanel.GetDock%2A?displayProperty=nameWithType> méthode type le paramètre en tant que <xref:System.Windows.UIElement> , car la propriété jointe est uniquement destinée à être définie sur des <xref:System.Windows.UIElement> instances.</span><span class="sxs-lookup"><span data-stu-id="b2d42-187">For example, the <xref:System.Windows.Controls.DockPanel.GetDock%2A?displayProperty=nameWithType> method types the parameter as <xref:System.Windows.UIElement>, because the attached property is only intended to be set on <xref:System.Windows.UIElement> instances.</span></span>

- <span data-ttu-id="b2d42-188">La valeur de retour peut être spécifiée comme un type plus spécifique dans votre implémentation.</span><span class="sxs-lookup"><span data-stu-id="b2d42-188">The return value can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="b2d42-189">Par exemple, la <xref:System.Windows.Controls.DockPanel.GetDock%2A> méthode le type comme <xref:System.Windows.Controls.Dock> , car la valeur ne peut être définie que sur cette énumération.</span><span class="sxs-lookup"><span data-stu-id="b2d42-189">For example, the <xref:System.Windows.Controls.DockPanel.GetDock%2A> method types it as <xref:System.Windows.Controls.Dock>, because the value can only be set to that enumeration.</span></span>

#### <a name="the-set-accessor"></a><span data-ttu-id="b2d42-190">Accesseur Set</span><span class="sxs-lookup"><span data-stu-id="b2d42-190">The Set Accessor</span></span>

<span data-ttu-id="b2d42-191">La signature de l’accesseur **Set_PropertyName_** doit être :</span><span class="sxs-lookup"><span data-stu-id="b2d42-191">The signature for the **Set_PropertyName_** accessor must be:</span></span>

`public static void SetPropertyName(object target, object value)`

- <span data-ttu-id="b2d42-192">L’objet `target` peut être défini comme un type plus spécifique dans votre implémentation.</span><span class="sxs-lookup"><span data-stu-id="b2d42-192">The `target` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="b2d42-193">Par exemple, la <xref:System.Windows.Controls.DockPanel.SetDock%2A> méthode le type comme <xref:System.Windows.UIElement> , car la propriété jointe est uniquement destinée à être définie sur des <xref:System.Windows.UIElement> instances.</span><span class="sxs-lookup"><span data-stu-id="b2d42-193">For example, the <xref:System.Windows.Controls.DockPanel.SetDock%2A> method types it as <xref:System.Windows.UIElement>, because the attached property is only intended to be set on <xref:System.Windows.UIElement> instances.</span></span>

- <span data-ttu-id="b2d42-194">L’objet `value` peut être défini comme un type plus spécifique dans votre implémentation.</span><span class="sxs-lookup"><span data-stu-id="b2d42-194">The `value` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="b2d42-195">Par exemple, la <xref:System.Windows.Controls.DockPanel.SetDock%2A> méthode le type comme <xref:System.Windows.Controls.Dock> , car la valeur ne peut être définie que sur cette énumération.</span><span class="sxs-lookup"><span data-stu-id="b2d42-195">For example, the <xref:System.Windows.Controls.DockPanel.SetDock%2A> method types it as <xref:System.Windows.Controls.Dock>, because the value can only be set to that enumeration.</span></span> <span data-ttu-id="b2d42-196">N’oubliez pas que la valeur de cette méthode est l’entrée provenant du chargeur XAML quand il rencontre votre propriété jointe dans une utilisation des propriétés jointes dans le balisage.</span><span class="sxs-lookup"><span data-stu-id="b2d42-196">Remember that the value for this method is the input coming from the XAML loader when it encounters your attached property in an attached property usage in markup.</span></span> <span data-ttu-id="b2d42-197">Cette entrée est la valeur spécifiée comme valeur d’attribut XAML dans le balisage.</span><span class="sxs-lookup"><span data-stu-id="b2d42-197">That input is the value specified as a XAML attribute value in markup.</span></span> <span data-ttu-id="b2d42-198">Ainsi, la conversion de type, la sérialisation de valeur ou l’extension de balisage doit être prise en charge pour le type utilisé afin que le type approprié puisse être créé à partir de la valeur d’attribut (laquelle est en fin de compte une simple chaîne).</span><span class="sxs-lookup"><span data-stu-id="b2d42-198">Therefore there must be type conversion, value serializer, or markup extension support for the type you use, such that the appropriate type can be created from the attribute value (which is ultimately just a string).</span></span>

<span data-ttu-id="b2d42-199">L’exemple suivant montre l’inscription de la propriété de dépendance (à l’aide de la <xref:System.Windows.DependencyProperty.RegisterAttached%2A> méthode), ainsi que les accesseurs **Get_PropertyName_** et **Set_PropertyName_** .</span><span class="sxs-lookup"><span data-stu-id="b2d42-199">The following example shows the dependency property registration (using the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method), as well as the **Get_PropertyName_** and **Set_PropertyName_** accessors.</span></span> <span data-ttu-id="b2d42-200">Dans cet exemple, le nom de la propriété jointe est `IsBubbleSource`.</span><span class="sxs-lookup"><span data-stu-id="b2d42-200">In the example, the attached property name is `IsBubbleSource`.</span></span> <span data-ttu-id="b2d42-201">Les accesseurs doivent donc être nommés `GetIsBubbleSource` et `SetIsBubbleSource`.</span><span class="sxs-lookup"><span data-stu-id="b2d42-201">Therefore, the accessors must be named `GetIsBubbleSource` and `SetIsBubbleSource`.</span></span>

[!code-csharp[WPFAquariumSln#RegisterAttachedBubbler](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#registerattachedbubbler)]
[!code-vb[WPFAquariumSln#RegisterAttachedBubbler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#registerattachedbubbler)]

#### <a name="attached-property-attributes"></a><span data-ttu-id="b2d42-202">Attributs des propriétés jointes</span><span class="sxs-lookup"><span data-stu-id="b2d42-202">Attached Property Attributes</span></span>

<span data-ttu-id="b2d42-203">WPF définit plusieurs attributs .NET qui sont destinés à fournir des informations sur les propriétés jointes aux processus de réflexion, ainsi qu’aux utilisateurs typiques de la réflexion et des informations de propriété telles que les concepteurs.</span><span class="sxs-lookup"><span data-stu-id="b2d42-203">WPF defines several .NET attributes that are intended to provide information about attached properties to reflection processes, and to typical users of reflection and property information such as designers.</span></span> <span data-ttu-id="b2d42-204">Les propriétés jointes ayant un type de portée illimitée, les concepteurs ont besoin d’un moyen d’éviter que les utilisateurs croulent sous une liste globale de toutes les propriétés jointes qui sont définies dans l’implémentation d’une technologie particulière utilisant XAML.</span><span class="sxs-lookup"><span data-stu-id="b2d42-204">Because attached properties have a type of unlimited scope, designers need a way to avoid overwhelming users with a global list of all the attached properties that are defined in a particular technology implementation that uses XAML.</span></span> <span data-ttu-id="b2d42-205">Les attributs .NET que WPF définit pour les propriétés jointes peuvent être utilisés pour définir la portée des situations où une propriété jointe donnée doit être affichée dans une fenêtre de propriétés.</span><span class="sxs-lookup"><span data-stu-id="b2d42-205">The .NET attributes that WPF defines for attached properties can be used to scope the situations where a given attached property should be shown in a properties window.</span></span> <span data-ttu-id="b2d42-206">Vous pouvez également envisager l’application de ces attributs à vos propres propriétés jointes personnalisées.</span><span class="sxs-lookup"><span data-stu-id="b2d42-206">You might consider applying these attributes for your own custom attached properties also.</span></span> <span data-ttu-id="b2d42-207">L’objectif et la syntaxe des attributs .NET sont décrits dans les pages de référence appropriées :</span><span class="sxs-lookup"><span data-stu-id="b2d42-207">The purpose and syntax of the .NET attributes is described on the appropriate reference pages:</span></span>

- <xref:System.Windows.AttachedPropertyBrowsableAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableForChildrenAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableForTypeAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableWhenAttributePresentAttribute>

## <a name="learning-more-about-attached-properties"></a><span data-ttu-id="b2d42-208">En savoir plus sur les propriétés jointes<a name="more"></a></span><span class="sxs-lookup"><span data-stu-id="b2d42-208">Learning More About Attached Properties <a name="more"></a></span></span>

- <span data-ttu-id="b2d42-209">Pour plus d’informations sur la création d’une propriété jointe, consultez [Enregistrer une propriété jointe](how-to-register-an-attached-property.md).</span><span class="sxs-lookup"><span data-stu-id="b2d42-209">For more information on creating an attached property, see [Register an Attached Property](how-to-register-an-attached-property.md).</span></span>

- <span data-ttu-id="b2d42-210">Pour obtenir des scénarios d’usage avancés des propriétés de dépendance et des propriétés jointes, consultez [Propriétés de dépendance personnalisées](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="b2d42-210">For more advanced usage scenarios for dependency properties and attached properties, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>

- <span data-ttu-id="b2d42-211">Vous pouvez également enregistrer une propriété en tant que propriété jointe et que propriété de dépendance ; mais dans cette situation, vous exposez encore les implémentations de « wrapper ».</span><span class="sxs-lookup"><span data-stu-id="b2d42-211">You can also register a property as an attached property, and as a dependency property, but then still expose "wrapper" implementations.</span></span> <span data-ttu-id="b2d42-212">Dans ce cas, vous pouvez définir la propriété soit sur cet élément, soit sur tout élément par le biais de la syntaxe de propriété jointe XAML.</span><span class="sxs-lookup"><span data-stu-id="b2d42-212">In this case, the property can be set either on that element, or on any element through the XAML attached property syntax.</span></span> <span data-ttu-id="b2d42-213">Un exemple de propriété avec un scénario approprié pour les utilisations standard et attachées est <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="b2d42-213">An example of a property with an appropriate scenario for both standard and attached usages is <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType>.</span></span>

## <a name="see-also"></a><span data-ttu-id="b2d42-214">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="b2d42-214">See also</span></span>

- <xref:System.Windows.DependencyProperty>
- [<span data-ttu-id="b2d42-215">Vue d’ensemble des propriétés de dépendance</span><span class="sxs-lookup"><span data-stu-id="b2d42-215">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="b2d42-216">Propriétés de dépendance personnalisées</span><span class="sxs-lookup"><span data-stu-id="b2d42-216">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="b2d42-217">Vue d’ensemble du langage XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="b2d42-217">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="b2d42-218">Enregistrer une propriété jointe</span><span class="sxs-lookup"><span data-stu-id="b2d42-218">Register an Attached Property</span></span>](how-to-register-an-attached-property.md)
