---
title: Dépannage des applications hybrides
ms.date: 03/30/2017
helpviewer_keywords:
- overlapping controls [WPF]
- Windows Forms [WPF], interoperability with
- Windows Forms [WPF], WPF interoperation
- interoperability [WPF], Windows Forms
- hybrid applications [WPF interoperability]
- message loops [WPF]
ms.assetid: f440c23f-fa5d-4d5a-852f-ba61150e6405
ms.openlocfilehash: b85a607d2e44d6253359a81118f90e6ee05d2d3f
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79187328"
---
# <a name="troubleshooting-hybrid-applications"></a><span data-ttu-id="2754b-102">Dépannage des applications hybrides</span><span class="sxs-lookup"><span data-stu-id="2754b-102">Troubleshooting Hybrid Applications</span></span>
<a name="introduction"></a><span data-ttu-id="2754b-103">Ce sujet énumère certains problèmes courants qui peuvent se [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] produire lors de la rédaction d’applications hybrides, qui utilisent à la fois et Windows Forms technologies.</span><span class="sxs-lookup"><span data-stu-id="2754b-103">This topic lists some common problems that can occur when authoring hybrid applications, which use both [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and Windows Forms technologies.</span></span>  

<a name="overlapping_controls"></a>
## <a name="overlapping-controls"></a><span data-ttu-id="2754b-104">Chevauchement de contrôles</span><span class="sxs-lookup"><span data-stu-id="2754b-104">Overlapping Controls</span></span>  
 <span data-ttu-id="2754b-105">Les contrôles peuvent ne pas se chevaucher comme escompté.</span><span class="sxs-lookup"><span data-stu-id="2754b-105">Controls may not overlap as you would expect.</span></span> <span data-ttu-id="2754b-106">Windows Forms utilise un HWND séparé pour chaque contrôle.</span><span class="sxs-lookup"><span data-stu-id="2754b-106">Windows Forms uses a separate HWND for each control.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="2754b-107">utilise un HWND pour tout le contenu d’une page.</span><span class="sxs-lookup"><span data-stu-id="2754b-107">uses one HWND for all content on a page.</span></span> <span data-ttu-id="2754b-108">Cette différence d’implémentation provoque des comportements de chevauchement inattendus.</span><span class="sxs-lookup"><span data-stu-id="2754b-108">This implementation difference causes unexpected overlapping behaviors.</span></span>  
  
 <span data-ttu-id="2754b-109">Un contrôle Windows Forms [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] hébergé apparaît toujours [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] au-dessus du contenu.</span><span class="sxs-lookup"><span data-stu-id="2754b-109">A Windows Forms control hosted in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] always appears on top of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content.</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="2754b-110">contenu hébergé dans <xref:System.Windows.Forms.Integration.ElementHost> un contrôle apparaît à <xref:System.Windows.Forms.Integration.ElementHost> l’ordre z du contrôle.</span><span class="sxs-lookup"><span data-stu-id="2754b-110">content hosted in an <xref:System.Windows.Forms.Integration.ElementHost> control appears at the z-order of the <xref:System.Windows.Forms.Integration.ElementHost> control.</span></span> <span data-ttu-id="2754b-111">Il est possible <xref:System.Windows.Forms.Integration.ElementHost> de chevaucher [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] les contrôles, mais le contenu hébergé ne se combine pas ou n’interagit pas.</span><span class="sxs-lookup"><span data-stu-id="2754b-111">It is possible to overlap <xref:System.Windows.Forms.Integration.ElementHost> controls, but the hosted [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content does not combine or interact.</span></span>  
  
<a name="child_property"></a>
## <a name="child-property"></a><span data-ttu-id="2754b-112">Propriété enfant</span><span class="sxs-lookup"><span data-stu-id="2754b-112">Child Property</span></span>  
 <span data-ttu-id="2754b-113">Les <xref:System.Windows.Forms.Integration.WindowsFormsHost> <xref:System.Windows.Forms.Integration.ElementHost> classes et les classes ne peuvent accueillir qu’un seul contrôle ou élément pour l’enfant.</span><span class="sxs-lookup"><span data-stu-id="2754b-113">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> and <xref:System.Windows.Forms.Integration.ElementHost> classes can host only a single child control or element.</span></span> <span data-ttu-id="2754b-114">Pour héberger plusieurs contrôles ou éléments, vous devez utiliser un conteneur comme contenu enfant.</span><span class="sxs-lookup"><span data-stu-id="2754b-114">To host more than one control or element, you must use a container as the child content.</span></span> <span data-ttu-id="2754b-115">Par exemple, vous pouvez ajouter le bouton <xref:System.Windows.Forms.Panel?displayProperty=nameWithType> Formulaires Windows et les <xref:System.Windows.Forms.Integration.WindowsFormsHost> commandes de <xref:System.Windows.Forms.Integration.WindowsFormsHost.Child%2A> la case à cocher à un contrôle, puis affecter le panneau à la propriété d’un contrôle.</span><span class="sxs-lookup"><span data-stu-id="2754b-115">For example, you could add Windows Forms button and check box controls to a <xref:System.Windows.Forms.Panel?displayProperty=nameWithType> control, and then assign the panel to a <xref:System.Windows.Forms.Integration.WindowsFormsHost> control's <xref:System.Windows.Forms.Integration.WindowsFormsHost.Child%2A> property.</span></span> <span data-ttu-id="2754b-116">Cependant, vous ne pouvez pas ajouter le bouton <xref:System.Windows.Forms.Integration.WindowsFormsHost> et les commandes de la case à cocher séparément au même contrôle.</span><span class="sxs-lookup"><span data-stu-id="2754b-116">However, you cannot add the button and check box controls separately to the same <xref:System.Windows.Forms.Integration.WindowsFormsHost> control.</span></span>  
  
<a name="scaling"></a>
## <a name="scaling"></a><span data-ttu-id="2754b-117">Mise à l'échelle</span><span class="sxs-lookup"><span data-stu-id="2754b-117">Scaling</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="2754b-118">et Windows Forms ont différents modèles de mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="2754b-118">and Windows Forms have different scaling models.</span></span> <span data-ttu-id="2754b-119">Certaines [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] transformations à l’échelle sont significatives pour les contrôles windows Forms, mais d’autres ne le sont pas.</span><span class="sxs-lookup"><span data-stu-id="2754b-119">Some [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] scaling transformations are meaningful to Windows Forms controls, but others are not.</span></span> <span data-ttu-id="2754b-120">Par exemple, la mise à l’échelle d’un contrôle windows Forms à 0 fonctionnera, mais si vous essayez d’échelle le même contrôle à une valeur non nulle, la taille du contrôle reste 0.</span><span class="sxs-lookup"><span data-stu-id="2754b-120">For example, scaling a Windows Forms control to 0 will work, but if you try to scale the same control back to a non-zero value, the control's size remains 0.</span></span> <span data-ttu-id="2754b-121">Pour plus d’informations, consultez [Considérations sur la disposition de l’élément WindowsFormsHost](layout-considerations-for-the-windowsformshost-element.md).</span><span class="sxs-lookup"><span data-stu-id="2754b-121">For more information, see [Layout Considerations for the WindowsFormsHost Element](layout-considerations-for-the-windowsformshost-element.md).</span></span>  
  
<a name="adapter"></a>
## <a name="adapter"></a><span data-ttu-id="2754b-122">Adaptateur</span><span class="sxs-lookup"><span data-stu-id="2754b-122">Adapter</span></span>  
 <span data-ttu-id="2754b-123">Il peut y avoir <xref:System.Windows.Forms.Integration.WindowsFormsHost> <xref:System.Windows.Forms.Integration.ElementHost> confusion lorsque vous travaillez dans les classes et les classes, parce qu’elles comprennent un conteneur caché.</span><span class="sxs-lookup"><span data-stu-id="2754b-123">There may be confusion when working the <xref:System.Windows.Forms.Integration.WindowsFormsHost> and <xref:System.Windows.Forms.Integration.ElementHost> classes, because they include a hidden container.</span></span> <span data-ttu-id="2754b-124">Les <xref:System.Windows.Forms.Integration.WindowsFormsHost> deux <xref:System.Windows.Forms.Integration.ElementHost> et les classes ont un conteneur caché, appelé un *adaptateur*, qu’ils utilisent pour héberger du contenu.</span><span class="sxs-lookup"><span data-stu-id="2754b-124">Both the <xref:System.Windows.Forms.Integration.WindowsFormsHost> and <xref:System.Windows.Forms.Integration.ElementHost> classes have a hidden container, called an *adapter*, which they use to host content.</span></span> <span data-ttu-id="2754b-125">Pour <xref:System.Windows.Forms.Integration.WindowsFormsHost> l’élément, l’adaptateur dérive de la <xref:System.Windows.Forms.ContainerControl?displayProperty=nameWithType> classe.</span><span class="sxs-lookup"><span data-stu-id="2754b-125">For the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element, the adapter derives from the <xref:System.Windows.Forms.ContainerControl?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="2754b-126">Pour <xref:System.Windows.Forms.Integration.ElementHost> le contrôle, l’adaptateur dérive de l’élément. <xref:System.Windows.Controls.DockPanel></span><span class="sxs-lookup"><span data-stu-id="2754b-126">For the <xref:System.Windows.Forms.Integration.ElementHost> control, the adapter derives from the <xref:System.Windows.Controls.DockPanel> element.</span></span> <span data-ttu-id="2754b-127">Quand vous voyez des références à l’adaptateur dans d’autres rubriques d’interopérabilité, c’est de ce conteneur qu’il est question.</span><span class="sxs-lookup"><span data-stu-id="2754b-127">When you see references to the adapter in other interoperation topics, this container is what is being discussed.</span></span>  
  
<a name="nesting"></a>
## <a name="nesting"></a><span data-ttu-id="2754b-128">Imbrication</span><span class="sxs-lookup"><span data-stu-id="2754b-128">Nesting</span></span>  
 <span data-ttu-id="2754b-129">La nidification d’un <xref:System.Windows.Forms.Integration.WindowsFormsHost> élément à l’intérieur d’un contrôle n’est <xref:System.Windows.Forms.Integration.ElementHost> pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="2754b-129">Nesting a <xref:System.Windows.Forms.Integration.WindowsFormsHost> element inside an <xref:System.Windows.Forms.Integration.ElementHost> control is not supported.</span></span> <span data-ttu-id="2754b-130">La nidification d’un <xref:System.Windows.Forms.Integration.ElementHost> contrôle à l’intérieur d’un <xref:System.Windows.Forms.Integration.WindowsFormsHost> élément n’est pas non plus prise en charge.</span><span class="sxs-lookup"><span data-stu-id="2754b-130">Nesting an <xref:System.Windows.Forms.Integration.ElementHost> control inside a <xref:System.Windows.Forms.Integration.WindowsFormsHost> element is also not supported.</span></span>  
  
<a name="focus"></a>
## <a name="focus"></a><span data-ttu-id="2754b-131">Focus</span><span class="sxs-lookup"><span data-stu-id="2754b-131">Focus</span></span>  
 <span data-ttu-id="2754b-132">Focus fonctionne [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] différemment dans et Windows Forms, ce qui signifie que les problèmes de mise au point peuvent se produire dans une application hybride.</span><span class="sxs-lookup"><span data-stu-id="2754b-132">Focus works differently in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and Windows Forms, which means that focus issues may occur in a hybrid application.</span></span> <span data-ttu-id="2754b-133">Par exemple, si vous <xref:System.Windows.Forms.Integration.WindowsFormsHost> vous concentrez à l’intérieur d’un élément, et que <xref:System.Windows.Forms.Integration.WindowsFormsHost> vous minimisez et restaurez la page ou affichez une boîte de dialogue modal, concentrez-vous à l’intérieur de l’élément.</span><span class="sxs-lookup"><span data-stu-id="2754b-133">For example, if you have focus inside a <xref:System.Windows.Forms.Integration.WindowsFormsHost> element, and you either minimize and restore the page or show a modal dialog box, focus inside the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element may be lost.</span></span> <span data-ttu-id="2754b-134">L’élément <xref:System.Windows.Forms.Integration.WindowsFormsHost> a toujours la concentration, mais le contrôle à l’intérieur peut ne pas.</span><span class="sxs-lookup"><span data-stu-id="2754b-134">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element still has focus, but the control inside it may not.</span></span>  
  
 <span data-ttu-id="2754b-135">La validation des données est également affectée par le focus.</span><span class="sxs-lookup"><span data-stu-id="2754b-135">Data validation is also affected by focus.</span></span> <span data-ttu-id="2754b-136">Validation fonctionne <xref:System.Windows.Forms.Integration.WindowsFormsHost> dans un élément, mais il ne <xref:System.Windows.Forms.Integration.WindowsFormsHost> fonctionne pas que <xref:System.Windows.Forms.Integration.WindowsFormsHost> vous onglet hors de l’élément, ou entre deux éléments différents.</span><span class="sxs-lookup"><span data-stu-id="2754b-136">Validation works in a <xref:System.Windows.Forms.Integration.WindowsFormsHost> element, but it does not work as you tab out of the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element, or between two different <xref:System.Windows.Forms.Integration.WindowsFormsHost> elements.</span></span>  
  
<a name="property_mapping"></a>
## <a name="property-mapping"></a><span data-ttu-id="2754b-137">Mappage de propriétés</span><span class="sxs-lookup"><span data-stu-id="2754b-137">Property Mapping</span></span>  
 <span data-ttu-id="2754b-138">Certaines cartographies immobilières nécessitent une interprétation approfondie pour [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] combler les implémentations différentes entre les technologies et windows Forms.</span><span class="sxs-lookup"><span data-stu-id="2754b-138">Some property mappings require extensive interpretation to bridge dissimilar implementations between the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and Windows Forms technologies.</span></span> <span data-ttu-id="2754b-139">Les mappages de propriétés permettent à votre code de réagir aux changements de polices, de couleurs et d’autres propriétés.</span><span class="sxs-lookup"><span data-stu-id="2754b-139">Property mappings enable your code to react to changes in fonts, colors, and other properties.</span></span> <span data-ttu-id="2754b-140">En général, les mappages de propriétés écoutent soit des événements *Property*Changed, soit des appels On*Property*Changed, et définissent des propriétés appropriées sur le contrôle enfant ou son adaptateur.</span><span class="sxs-lookup"><span data-stu-id="2754b-140">In general, property mappings work by listening for either *Property*Changed events or On*Property*Changed calls, and setting appropriate properties on either the child control or its adapter.</span></span> <span data-ttu-id="2754b-141">Pour plus d’informations, consultez [Mappage de propriétés Windows Forms et WPF](windows-forms-and-wpf-property-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="2754b-141">For more information, see [Windows Forms and WPF Property Mapping](windows-forms-and-wpf-property-mapping.md).</span></span>  
  
<a name="layoutrelated_properties_on_hosted_content"></a>
## <a name="layout-related-properties-on-hosted-content"></a><span data-ttu-id="2754b-142">Propriétés de disposition sur le contenu hébergé</span><span class="sxs-lookup"><span data-stu-id="2754b-142">Layout-related Properties on Hosted Content</span></span>  
 <span data-ttu-id="2754b-143">Lorsque <xref:System.Windows.Forms.Integration.WindowsFormsHost.Child%2A?displayProperty=nameWithType> la <xref:System.Windows.Forms.Integration.ElementHost.Child%2A?displayProperty=nameWithType> propriété ou la propriété est attribuée, plusieurs propriétés liées à la mise en page sur le contenu hébergé sont définies automatiquement.</span><span class="sxs-lookup"><span data-stu-id="2754b-143">When the <xref:System.Windows.Forms.Integration.WindowsFormsHost.Child%2A?displayProperty=nameWithType> or <xref:System.Windows.Forms.Integration.ElementHost.Child%2A?displayProperty=nameWithType> property is assigned, several layout-related properties on the hosted content are set automatically.</span></span> <span data-ttu-id="2754b-144">La modification de ces propriétés peut provoquer des comportements de disposition inattendus.</span><span class="sxs-lookup"><span data-stu-id="2754b-144">Changing these content properties can cause unexpected layout behaviors.</span></span>  
  
 <span data-ttu-id="2754b-145">Votre contenu hébergé est amarré pour remplir le <xref:System.Windows.Forms.Integration.WindowsFormsHost> parent et <xref:System.Windows.Forms.Integration.ElementHost> le parent.</span><span class="sxs-lookup"><span data-stu-id="2754b-145">Your hosted content is docked to fill the <xref:System.Windows.Forms.Integration.WindowsFormsHost> and <xref:System.Windows.Forms.Integration.ElementHost> parent.</span></span> <span data-ttu-id="2754b-146">Pour activer ce comportement de remplissage, plusieurs propriétés sont définies quand vous définissez la propriété enfant.</span><span class="sxs-lookup"><span data-stu-id="2754b-146">To enable this fill behavior, several properties are set when you set the child property.</span></span> <span data-ttu-id="2754b-147">Le tableau suivant répertorie <xref:System.Windows.Forms.Integration.ElementHost> les <xref:System.Windows.Forms.Integration.WindowsFormsHost> propriétés de contenu définies par les classes et les classes.</span><span class="sxs-lookup"><span data-stu-id="2754b-147">The following table lists which content properties are set by the <xref:System.Windows.Forms.Integration.ElementHost> and <xref:System.Windows.Forms.Integration.WindowsFormsHost> classes.</span></span>  
  
|<span data-ttu-id="2754b-148">Classe hôte</span><span class="sxs-lookup"><span data-stu-id="2754b-148">Host Class</span></span>|<span data-ttu-id="2754b-149">Propriétés de contenu</span><span class="sxs-lookup"><span data-stu-id="2754b-149">Content Properties</span></span>|  
|----------------|------------------------|  
|<xref:System.Windows.Forms.Integration.ElementHost>|<xref:System.Windows.FrameworkElement.Height%2A><br /><br /> <xref:System.Windows.FrameworkElement.Width%2A><br /><br /> <xref:System.Windows.FrameworkElement.Margin%2A><br /><br /> <xref:System.Windows.FrameworkElement.VerticalAlignment%2A><br /><br /> <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A>|  
|<xref:System.Windows.Forms.Integration.WindowsFormsHost>|<xref:System.Windows.Forms.Control.Margin%2A><br /><br /> <xref:System.Windows.Forms.Control.Dock%2A><br /><br /> <xref:System.Windows.Forms.Control.AutoSize%2A><br /><br /> <xref:System.Windows.Forms.Control.Location%2A><br /><br /> <xref:System.Windows.Forms.Control.MaximumSize%2A>|  
  
 <span data-ttu-id="2754b-150">Ne définissez pas ces propriétés directement sur le contenu hébergé.</span><span class="sxs-lookup"><span data-stu-id="2754b-150">Do not set these properties directly on the hosted content.</span></span> <span data-ttu-id="2754b-151">Pour plus d’informations, consultez [Considérations sur la disposition de l’élément WindowsFormsHost](layout-considerations-for-the-windowsformshost-element.md).</span><span class="sxs-lookup"><span data-stu-id="2754b-151">For more information, see [Layout Considerations for the WindowsFormsHost Element](layout-considerations-for-the-windowsformshost-element.md).</span></span>  
  
<a name="navigation_applications"></a>
## <a name="navigation-applications"></a><span data-ttu-id="2754b-152">Applications de navigation</span><span class="sxs-lookup"><span data-stu-id="2754b-152">Navigation Applications</span></span>  
 <span data-ttu-id="2754b-153">Les applications de navigation peuvent ne pas tenir à jour l’état utilisateur.</span><span class="sxs-lookup"><span data-stu-id="2754b-153">Navigation applications may not maintain user state.</span></span> <span data-ttu-id="2754b-154">L’élément <xref:System.Windows.Forms.Integration.WindowsFormsHost> recrée ses commandes lorsqu’il est utilisé dans une application de navigation.</span><span class="sxs-lookup"><span data-stu-id="2754b-154">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element recreates its controls when it is used in a navigation application.</span></span> <span data-ttu-id="2754b-155">Recréer les contrôles de l’enfant se produit lorsque <xref:System.Windows.Forms.Integration.WindowsFormsHost> l’utilisateur navigue loin de la page hébergeant l’élément, puis y retourne.</span><span class="sxs-lookup"><span data-stu-id="2754b-155">Recreating child controls occurs when the user navigates away from the page hosting the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element and then returns to it.</span></span> <span data-ttu-id="2754b-156">Tout contenu qui a été tapé par l’utilisateur sera perdu.</span><span class="sxs-lookup"><span data-stu-id="2754b-156">Any content that has been typed in by the user will be lost.</span></span>  
  
<a name="message_loop_interoperation"></a>
## <a name="message-loop-interoperation"></a><span data-ttu-id="2754b-157">Interopérabilité des boucles de messages</span><span class="sxs-lookup"><span data-stu-id="2754b-157">Message Loop Interoperation</span></span>  
 <span data-ttu-id="2754b-158">Lorsque vous travaillez avec les boucles de messages Windows Forms, les messages peuvent ne pas être traités comme prévu.</span><span class="sxs-lookup"><span data-stu-id="2754b-158">When working with Windows Forms message loops, messages may not be processed as expected.</span></span> <span data-ttu-id="2754b-159">La <xref:System.Windows.Forms.Integration.WindowsFormsHost.EnableWindowsFormsInterop%2A> méthode est <xref:System.Windows.Forms.Integration.WindowsFormsHost> appelée par le constructeur.</span><span class="sxs-lookup"><span data-stu-id="2754b-159">The <xref:System.Windows.Forms.Integration.WindowsFormsHost.EnableWindowsFormsInterop%2A> method is called by the <xref:System.Windows.Forms.Integration.WindowsFormsHost> constructor.</span></span> <span data-ttu-id="2754b-160">Cette méthode ajoute un filtre de messages à la boucle de message [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2754b-160">This method adds a message filter to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] message loop.</span></span> <span data-ttu-id="2754b-161">Ce filtre <xref:System.Windows.Forms.Control.PreProcessMessage%2A?displayProperty=nameWithType> appelle la <xref:System.Windows.Forms.Control?displayProperty=nameWithType> méthode si a été la cible du message et traduit /dispatches le message.</span><span class="sxs-lookup"><span data-stu-id="2754b-161">This filter calls the <xref:System.Windows.Forms.Control.PreProcessMessage%2A?displayProperty=nameWithType> method if a <xref:System.Windows.Forms.Control?displayProperty=nameWithType> was the target of the message and translates/dispatches the message.</span></span>  
  
 <span data-ttu-id="2754b-162">Si vous <xref:System.Windows.Window> affichez un dans <xref:System.Windows.Forms.Application.Run%2A?displayProperty=nameWithType>une boucle de message Windows <xref:System.Windows.Forms.Integration.ElementHost.EnableModelessKeyboardInterop%2A> Forms avec , vous ne pouvez pas taper quoi que ce soit à moins que vous appelez la méthode.</span><span class="sxs-lookup"><span data-stu-id="2754b-162">If you show a <xref:System.Windows.Window> in a Windows Forms message loop with <xref:System.Windows.Forms.Application.Run%2A?displayProperty=nameWithType>, you cannot type anything unless you call the <xref:System.Windows.Forms.Integration.ElementHost.EnableModelessKeyboardInterop%2A> method.</span></span> <span data-ttu-id="2754b-163">La <xref:System.Windows.Forms.Integration.ElementHost.EnableModelessKeyboardInterop%2A> méthode <xref:System.Windows.Window> prend un <xref:System.Windows.Forms.IMessageFilter?displayProperty=nameWithType>et ajoute un , qui [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] redirige les messages liés aux clés à la boucle de message.</span><span class="sxs-lookup"><span data-stu-id="2754b-163">The <xref:System.Windows.Forms.Integration.ElementHost.EnableModelessKeyboardInterop%2A> method takes a <xref:System.Windows.Window> and adds a <xref:System.Windows.Forms.IMessageFilter?displayProperty=nameWithType>, which reroutes key-related messages to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] message loop.</span></span> <span data-ttu-id="2754b-164">Pour plus d’informations, consultez [Architecture d’entrée pour l’interopérabilité entre Windows Forms et WPF](windows-forms-and-wpf-interoperability-input-architecture.md).</span><span class="sxs-lookup"><span data-stu-id="2754b-164">For more information, see [Windows Forms and WPF Interoperability Input Architecture](windows-forms-and-wpf-interoperability-input-architecture.md).</span></span>  
  
<a name="opacity_and_layering"></a>
## <a name="opacity-and-layering"></a><span data-ttu-id="2754b-165">Opacité et superposition</span><span class="sxs-lookup"><span data-stu-id="2754b-165">Opacity and Layering</span></span>  
 <span data-ttu-id="2754b-166">La <xref:System.Windows.Interop.HwndHost> classe ne prend pas en charge la superposition.</span><span class="sxs-lookup"><span data-stu-id="2754b-166">The <xref:System.Windows.Interop.HwndHost> class does not support layering.</span></span> <span data-ttu-id="2754b-167">Cela signifie que <xref:System.Windows.UIElement.Opacity%2A> le <xref:System.Windows.Forms.Integration.WindowsFormsHost> réglage de la propriété sur l’élément [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] n’a aucun effet, et aucun mélange ne se produira avec d’autres fenêtres qui ont <xref:System.Windows.Window.AllowsTransparency%2A> mis à `true`.</span><span class="sxs-lookup"><span data-stu-id="2754b-167">This means that setting the <xref:System.Windows.UIElement.Opacity%2A> property on the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element has no effect, and no blending will occur with other [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] windows which have <xref:System.Windows.Window.AllowsTransparency%2A> set to `true`.</span></span>  
  
<a name="dispose"></a>
## <a name="dispose"></a><span data-ttu-id="2754b-168">Dispose</span><span class="sxs-lookup"><span data-stu-id="2754b-168">Dispose</span></span>  
 <span data-ttu-id="2754b-169">Le fait de ne pas supprimer correctement les classes peut entraîner une fuite des ressources.</span><span class="sxs-lookup"><span data-stu-id="2754b-169">Not disposing classes properly can leak resources.</span></span> <span data-ttu-id="2754b-170">Dans vos applications hybrides, <xref:System.Windows.Forms.Integration.WindowsFormsHost> <xref:System.Windows.Forms.Integration.ElementHost> assurez-vous que les classes et les classes sont éliminées, ou vous pourriez fuir des ressources.</span><span class="sxs-lookup"><span data-stu-id="2754b-170">In your hybrid applications, make sure that the <xref:System.Windows.Forms.Integration.WindowsFormsHost> and <xref:System.Windows.Forms.Integration.ElementHost> classes are disposed, or you could leak resources.</span></span> <span data-ttu-id="2754b-171">Windows Forms <xref:System.Windows.Forms.Integration.ElementHost> dispose de contrôles lorsque <xref:System.Windows.Forms.Form> son parent non modal ferme.</span><span class="sxs-lookup"><span data-stu-id="2754b-171">Windows Forms disposes <xref:System.Windows.Forms.Integration.ElementHost> controls when its non-modal <xref:System.Windows.Forms.Form> parent closes.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="2754b-172">dispose <xref:System.Windows.Forms.Integration.WindowsFormsHost> d’éléments lorsque votre demande s’arrête.</span><span class="sxs-lookup"><span data-stu-id="2754b-172">disposes <xref:System.Windows.Forms.Integration.WindowsFormsHost> elements when your application shuts down.</span></span> <span data-ttu-id="2754b-173">Il est possible <xref:System.Windows.Forms.Integration.WindowsFormsHost> d’afficher <xref:System.Windows.Window> un élément dans une boucle de message Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="2754b-173">It is possible to show a <xref:System.Windows.Forms.Integration.WindowsFormsHost> element in a <xref:System.Windows.Window> in a Windows Forms message loop.</span></span> <span data-ttu-id="2754b-174">Dans ce cas, votre code peut ne pas être averti que votre application s’arrête.</span><span class="sxs-lookup"><span data-stu-id="2754b-174">In this case, your code may not receive notification that your application is shutting down.</span></span>  
  
<a name="enabling_visual_styles"></a>
## <a name="enabling-visual-styles"></a><span data-ttu-id="2754b-175">Activation des styles visuels</span><span class="sxs-lookup"><span data-stu-id="2754b-175">Enabling Visual Styles</span></span>  
 <span data-ttu-id="2754b-176">Les styles visuels Microsoft Windows XP sur un contrôle Windows Forms peuvent ne pas être activés.</span><span class="sxs-lookup"><span data-stu-id="2754b-176">Microsoft Windows XP visual styles on a Windows Forms control may not be enabled.</span></span> <span data-ttu-id="2754b-177">La <xref:System.Windows.Forms.Application.EnableVisualStyles%2A?displayProperty=nameWithType> méthode est appelée dans le modèle d’une application Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="2754b-177">The <xref:System.Windows.Forms.Application.EnableVisualStyles%2A?displayProperty=nameWithType> method is called in the template for a Windows Forms application.</span></span> <span data-ttu-id="2754b-178">Bien que cette méthode ne soit pas appelée par défaut, si vous utilisez Visual Studio pour créer un projet, vous obtiendrez des styles visuels Microsoft Windows XP pour les contrôles, si la version 6.0 de Comctl32.dll est disponible.</span><span class="sxs-lookup"><span data-stu-id="2754b-178">Although this method is not called by default, if you use Visual Studio to create a project, you will get Microsoft Windows XP visual styles for controls, if version 6.0 of Comctl32.dll is available.</span></span> <span data-ttu-id="2754b-179">Vous devez <xref:System.Windows.Forms.Application.EnableVisualStyles%2A> appeler la méthode avant que les poignées soient créées sur le thread.</span><span class="sxs-lookup"><span data-stu-id="2754b-179">You must call the <xref:System.Windows.Forms.Application.EnableVisualStyles%2A> method before handles are created on the thread.</span></span> <span data-ttu-id="2754b-180">Pour plus d’informations, consultez [Guide pratique pour activer des styles visuels dans une application hybride](how-to-enable-visual-styles-in-a-hybrid-application.md).</span><span class="sxs-lookup"><span data-stu-id="2754b-180">For more information, see [How to: Enable Visual Styles in a Hybrid Application](how-to-enable-visual-styles-in-a-hybrid-application.md).</span></span>  
  
<a name="licensed_controls"></a>
## <a name="licensed-controls"></a><span data-ttu-id="2754b-181">Contrôles sous licence</span><span class="sxs-lookup"><span data-stu-id="2754b-181">Licensed Controls</span></span>  
 <span data-ttu-id="2754b-182">Les formulaires Windows sous licence contrôlent les informations de licence affichées dans une boîte de message à l’utilisateur peut provoquer un comportement inattendu pour une application hybride.</span><span class="sxs-lookup"><span data-stu-id="2754b-182">Licensed Windows Forms controls that display licensing information in a message box to the user might cause unexpected behavior for a hybrid application.</span></span> <span data-ttu-id="2754b-183">Certains contrôles sous licence affichent une boîte de dialogue en réponse à la création de handle.</span><span class="sxs-lookup"><span data-stu-id="2754b-183">Some licensed controls show a dialog box in response to handle creation.</span></span> <span data-ttu-id="2754b-184">Par exemple, un contrôle sous licence peut informer l’utilisateur qu’une licence est nécessaire ou que l’utilisateur n’a plus le droit qu’à trois utilisations du contrôle.</span><span class="sxs-lookup"><span data-stu-id="2754b-184">For example, a licensed control might inform the user that a license is required, or that the user has three remaining trial uses of the control.</span></span>  
  
 <span data-ttu-id="2754b-185">L’élément <xref:System.Windows.Forms.Integration.WindowsFormsHost> dérive <xref:System.Windows.Interop.HwndHost> de la classe, et la poignée <xref:System.Windows.Forms.Integration.WindowsFormsHost.BuildWindowCore%2A> du contrôle de l’enfant est créée à l’intérieur de la méthode.</span><span class="sxs-lookup"><span data-stu-id="2754b-185">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element derives from the <xref:System.Windows.Interop.HwndHost> class, and the child control’s handle is created inside the <xref:System.Windows.Forms.Integration.WindowsFormsHost.BuildWindowCore%2A> method.</span></span> <span data-ttu-id="2754b-186">La <xref:System.Windows.Interop.HwndHost> classe ne permet pas de <xref:System.Windows.Forms.Integration.WindowsFormsHost.BuildWindowCore%2A> traiter les messages dans la méthode, mais l’affichage d’une boîte de dialogue provoque l’envoi de messages.</span><span class="sxs-lookup"><span data-stu-id="2754b-186">The <xref:System.Windows.Interop.HwndHost> class does not allow messages to be processed in the <xref:System.Windows.Forms.Integration.WindowsFormsHost.BuildWindowCore%2A> method, but displaying a dialog box causes messages to be sent.</span></span> <span data-ttu-id="2754b-187">Pour activer ce scénario <xref:System.Windows.Forms.Control.CreateControl%2A?displayProperty=nameWithType> de licence, appelez la <xref:System.Windows.Forms.Integration.WindowsFormsHost> méthode sur le contrôle avant de l’attribuer comme l’enfant de l’élément.</span><span class="sxs-lookup"><span data-stu-id="2754b-187">To enable this licensing scenario, call the <xref:System.Windows.Forms.Control.CreateControl%2A?displayProperty=nameWithType> method on the control before assigning it as the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element's child.</span></span>  
  
<a name="wpf_designer"></a>
## <a name="wpf-designer"></a><span data-ttu-id="2754b-188">Concepteur WPF</span><span class="sxs-lookup"><span data-stu-id="2754b-188">WPF Designer</span></span>  
 <span data-ttu-id="2754b-189">Vous pouvez concevoir votre contenu WPF en utilisant le WPF Designer for Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="2754b-189">You can design your WPF content by using the WPF Designer for Visual Studio.</span></span> <span data-ttu-id="2754b-190">Les sections suivantes énumèrent certains problèmes courants qui peuvent se produire lors de la rédaction d’applications hybrides avec le concepteur WPF.</span><span class="sxs-lookup"><span data-stu-id="2754b-190">The following sections list some common problems that can occur when authoring hybrid applications with the WPF Designer.</span></span>  
  
### <a name="backcolortransparent-is-ignored-at-design-time"></a><span data-ttu-id="2754b-191">BackColorTransparent est ignoré au moment du design</span><span class="sxs-lookup"><span data-stu-id="2754b-191">BackColorTransparent is ignored at design time</span></span>  
 <span data-ttu-id="2754b-192">La <xref:System.Windows.Forms.Integration.ElementHost.BackColorTransparent%2A> propriété pourrait ne pas fonctionner comme prévu au moment de la conception.</span><span class="sxs-lookup"><span data-stu-id="2754b-192">The <xref:System.Windows.Forms.Integration.ElementHost.BackColorTransparent%2A> property might not work as expected at design time.</span></span>  
  
 <span data-ttu-id="2754b-193">Si un contrôle WPF n’est pas sur un parent <xref:System.Windows.Forms.Integration.ElementHost.BackColorTransparent%2A> visible, le temps d’exécution WPF ignore la valeur.</span><span class="sxs-lookup"><span data-stu-id="2754b-193">If a WPF control is not on a visible parent, the WPF runtime ignores the <xref:System.Windows.Forms.Integration.ElementHost.BackColorTransparent%2A> value.</span></span> <span data-ttu-id="2754b-194">La raison <xref:System.Windows.Forms.Integration.ElementHost.BackColorTransparent%2A> pour laquelle <xref:System.Windows.Forms.Integration.ElementHost> cela pourrait être <xref:System.AppDomain>ignoré est parce que l’objet est créé dans un séparé .</span><span class="sxs-lookup"><span data-stu-id="2754b-194">The reason that <xref:System.Windows.Forms.Integration.ElementHost.BackColorTransparent%2A> might be ignored is because <xref:System.Windows.Forms.Integration.ElementHost> object is created in a separate <xref:System.AppDomain>.</span></span> <span data-ttu-id="2754b-195">Toutefois, lorsque vous exécutez l’application, <xref:System.Windows.Forms.Integration.ElementHost.BackColorTransparent%2A> fonctionne comme prévu.</span><span class="sxs-lookup"><span data-stu-id="2754b-195">However, when you run the application, <xref:System.Windows.Forms.Integration.ElementHost.BackColorTransparent%2A> does work as expected.</span></span>  
  
### <a name="design-time-error-list-appears-when-the-obj-folder-is-deleted"></a><span data-ttu-id="2754b-196">La liste d’erreurs au moment du design apparaît quand le dossier obj est supprimé</span><span class="sxs-lookup"><span data-stu-id="2754b-196">Design-time Error List appears when the obj folder is deleted</span></span>  
 <span data-ttu-id="2754b-197">Si vous supprimez le dossier obj, la liste d’erreurs au moment du design s’affiche.</span><span class="sxs-lookup"><span data-stu-id="2754b-197">If the obj folder is deleted, the Design-time Error List appears.</span></span>  
  
 <span data-ttu-id="2754b-198">Lorsque vous <xref:System.Windows.Forms.Integration.ElementHost>concevez à l’aide, le concepteur de formulaires Windows utilise des fichiers générés dans le dossier Debug ou Release dans le dossier obj de votre projet.</span><span class="sxs-lookup"><span data-stu-id="2754b-198">When you design using <xref:System.Windows.Forms.Integration.ElementHost>, the Windows Forms Designer uses generated files in the Debug or Release folder within your project's obj folder.</span></span> <span data-ttu-id="2754b-199">Si vous supprimez ces fichiers, la liste d’erreurs au moment du design apparaît.</span><span class="sxs-lookup"><span data-stu-id="2754b-199">If you delete these files, the Design-time Error List appears.</span></span> <span data-ttu-id="2754b-200">Pour résoudre ce problème, regénérez votre projet.</span><span class="sxs-lookup"><span data-stu-id="2754b-200">To fix this problem, rebuild your project.</span></span> <span data-ttu-id="2754b-201">Pour plus d’informations, consultez [Erreurs au moment du design dans le Concepteur Windows Forms](../../winforms/controls/design-time-errors-in-the-windows-forms-designer.md).</span><span class="sxs-lookup"><span data-stu-id="2754b-201">For more information, see [Design-Time Errors in the Windows Forms Designer](../../winforms/controls/design-time-errors-in-the-windows-forms-designer.md).</span></span>  
  
<a name="elementhost_and_ime"></a>
## <a name="elementhost-and-ime"></a><span data-ttu-id="2754b-202">ElementHost et IME</span><span class="sxs-lookup"><span data-stu-id="2754b-202">ElementHost and IME</span></span>  
 <span data-ttu-id="2754b-203">Les contrôles WPF <xref:System.Windows.Forms.Integration.ElementHost> hébergés dans <xref:System.Windows.Forms.Control.ImeMode%2A> un actuellement ne prennent pas en charge la propriété.</span><span class="sxs-lookup"><span data-stu-id="2754b-203">WPF controls hosted in an <xref:System.Windows.Forms.Integration.ElementHost> currently do not support the <xref:System.Windows.Forms.Control.ImeMode%2A> property.</span></span> <span data-ttu-id="2754b-204">Les <xref:System.Windows.Forms.Control.ImeMode%2A> modifications seront ignorées par les contrôles hébergés.</span><span class="sxs-lookup"><span data-stu-id="2754b-204">Changes to <xref:System.Windows.Forms.Control.ImeMode%2A> will be ignored by the hosted controls.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2754b-205">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="2754b-205">See also</span></span>

- <xref:System.Windows.Forms.Integration.ElementHost>
- <xref:System.Windows.Forms.Integration.WindowsFormsHost>
- <span data-ttu-id="2754b-206">[Interopérabilité avec le Concepteur WPF](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/bb628658(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="2754b-206">[Interoperability in the WPF Designer](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/bb628658(v=vs.100))</span></span>
- [<span data-ttu-id="2754b-207">Architecture d’entrée pour l’interopérabilité entre Windows Forms et WPF</span><span class="sxs-lookup"><span data-stu-id="2754b-207">Windows Forms and WPF Interoperability Input Architecture</span></span>](windows-forms-and-wpf-interoperability-input-architecture.md)
- [<span data-ttu-id="2754b-208">Guide pratique pour activer des styles visuels dans une application hybride</span><span class="sxs-lookup"><span data-stu-id="2754b-208">How to: Enable Visual Styles in a Hybrid Application</span></span>](how-to-enable-visual-styles-in-a-hybrid-application.md)
- [<span data-ttu-id="2754b-209">Considérations sur la disposition de l’élément WindowsFormsHost</span><span class="sxs-lookup"><span data-stu-id="2754b-209">Layout Considerations for the WindowsFormsHost Element</span></span>](layout-considerations-for-the-windowsformshost-element.md)
- [<span data-ttu-id="2754b-210">Mappage de propriétés Windows Forms et WPF</span><span class="sxs-lookup"><span data-stu-id="2754b-210">Windows Forms and WPF Property Mapping</span></span>](windows-forms-and-wpf-property-mapping.md)
- [<span data-ttu-id="2754b-211">Erreurs au moment du design dans le Concepteur Windows Forms</span><span class="sxs-lookup"><span data-stu-id="2754b-211">Design-Time Errors in the Windows Forms Designer</span></span>](../../winforms/controls/design-time-errors-in-the-windows-forms-designer.md)
- [<span data-ttu-id="2754b-212">Migration et interopérabilité</span><span class="sxs-lookup"><span data-stu-id="2754b-212">Migration and Interoperability</span></span>](migration-and-interoperability.md)
