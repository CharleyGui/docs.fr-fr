---
title: Propriétés de dépendance en lecture seule
ms.date: 03/30/2017
helpviewer_keywords:
- dependency properties [WPF], read-only
- read-only dependency properties [WPF]
ms.assetid: f23d6ec9-3780-4c09-a2ff-b2f0a2deddf1
ms.openlocfilehash: 327897d50bd23a739d015a4151459d9d4a6fc1a0
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64611785"
---
# <a name="read-only-dependency-properties"></a><span data-ttu-id="1e21e-102">Propriétés de dépendance en lecture seule</span><span class="sxs-lookup"><span data-stu-id="1e21e-102">Read-Only Dependency Properties</span></span>
<span data-ttu-id="1e21e-103">Cette rubrique décrit les propriétés de dépendance en lecture seule, y compris les propriétés de dépendance en lecture seule existantes, et les scénarios et techniques de création d’une propriété de dépendance en lecture seule personnalisée.</span><span class="sxs-lookup"><span data-stu-id="1e21e-103">This topic describes read-only dependency properties, including existing read-only dependency properties and the scenarios and techniques for creating a custom read-only dependency property.</span></span>  

<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="1e21e-104">Prérequis</span><span class="sxs-lookup"><span data-stu-id="1e21e-104">Prerequisites</span></span>  
 <span data-ttu-id="1e21e-105">Cette rubrique part du principe que vous comprenez les scénarios de base de l’implémentation d’une propriété de dépendance et que vous savez comment les métadonnées sont appliquées à une propriété de dépendance personnalisée.</span><span class="sxs-lookup"><span data-stu-id="1e21e-105">This topic assumes that you understand the basic scenarios of implementing a dependency property, and how metadata is applied to a custom dependency property.</span></span> <span data-ttu-id="1e21e-106">Pour plus d’informations sur le contexte, consultez [Propriétés de dépendance personnalisées](custom-dependency-properties.md) et [Métadonnées de propriété de dépendance](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="1e21e-106">See [Custom Dependency Properties](custom-dependency-properties.md) and [Dependency Property Metadata](dependency-property-metadata.md) for context.</span></span>  
  
<a name="existing"></a>   
## <a name="existing-read-only-dependency-properties"></a><span data-ttu-id="1e21e-107">Propriétés de dépendance en lecture seule existantes</span><span class="sxs-lookup"><span data-stu-id="1e21e-107">Existing Read-Only Dependency Properties</span></span>  
 <span data-ttu-id="1e21e-108">Certaines des propriétés de dépendance définies dans le framework [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] sont en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="1e21e-108">Some of the dependency properties defined in the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] framework are read-only.</span></span> <span data-ttu-id="1e21e-109">En règle générale, vous définissez des propriétés de dépendance en lecture seule parce qu’elles doivent être utilisées pour déterminer des états. Toutefois, quand l’état est influencé par plusieurs facteurs, le simple fait de définir la propriété sur cet état n’est pas souhaitable du point de vue de la conception de l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1e21e-109">The typical reason for specifying a read-only dependency property is that these are properties that should be used for state determination, but where that state is influenced by a multitude of factors, but just setting the property to that state isn't desirable from a user interface design perspective.</span></span> <span data-ttu-id="1e21e-110">Par exemple, la propriété <xref:System.Windows.UIElement.IsMouseOver%2A> est simplement un état déterminé à partir de l’entrée de souris de surface.</span><span class="sxs-lookup"><span data-stu-id="1e21e-110">For example, the property <xref:System.Windows.UIElement.IsMouseOver%2A> is really just surfacing state as determined from the mouse input.</span></span> <span data-ttu-id="1e21e-111">Si vous tentez de définir cette valeur par programmation en contournant la vraie entrée de souris, vous obtenez un comportement imprévisible qui entraîne une incohérence.</span><span class="sxs-lookup"><span data-stu-id="1e21e-111">Any attempt to set this value programmatically by circumventing the true mouse input would be unpredictable and would cause inconsistency.</span></span>  
  
 <span data-ttu-id="1e21e-112">Parce qu’elles ne sont pas définissables, les propriétés de dépendance en lecture seule ne sont pas appropriées dans de nombreux scénarios pour lesquels les propriétés de dépendance offrent normalement une solution (à savoir : liaison de données, style applicable directement à une valeur, validation, animation, héritage).</span><span class="sxs-lookup"><span data-stu-id="1e21e-112">By virtue of not being settable, read-only dependency properties aren't appropriate for many of the scenarios for which dependency properties normally offer a solution (namely: data binding, directly stylable to a value, validation, animation, inheritance).</span></span> <span data-ttu-id="1e21e-113">Bien qu’elles ne soient pas définissables, les propriétés de dépendance en lecture seule offrent néanmoins des fonctionnalités supplémentaires prises en charge par les propriétés de dépendance dans le système de propriétés.</span><span class="sxs-lookup"><span data-stu-id="1e21e-113">Despite not being settable, read-only dependency properties still have some of the additional capabilities supported by dependency properties in the property system.</span></span> <span data-ttu-id="1e21e-114">La fonctionnalité restante la plus importante est que la propriété de dépendance en lecture seule peut toujours être utilisée comme déclencheur de propriété dans un style.</span><span class="sxs-lookup"><span data-stu-id="1e21e-114">The most important remaining capability is that the read-only dependency property can still be used as a property trigger in a style.</span></span> <span data-ttu-id="1e21e-115">Vous ne pouvez pas activer de déclencheurs avec une propriété [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] normale, seule une propriété de dépendance le permet.</span><span class="sxs-lookup"><span data-stu-id="1e21e-115">You can't enable triggers with a normal [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] property; it needs to be a dependency property.</span></span> <span data-ttu-id="1e21e-116">Les susmentionnés <xref:System.Windows.UIElement.IsMouseOver%2A> propriété est un parfait exemple de scénario où il peut être très utile de définir un style pour un contrôle, où certains propriété visible comme un arrière-plan, premier plan ou des propriétés similaires d’éléments composés dans le contrôle change lorsque l’utilisateur place la souris sur une région définie de votre contrôle.</span><span class="sxs-lookup"><span data-stu-id="1e21e-116">The aforementioned <xref:System.Windows.UIElement.IsMouseOver%2A> property is a perfect example of a scenario where it might be quite useful to define a style for a control, where some visible property such as a background, foreground, or similar properties of composited elements within the control will change when the user places a mouse over some defined region of your control.</span></span> <span data-ttu-id="1e21e-117">Les changements d’une propriété de dépendance en lecture seule peuvent aussi être détectés et signalés par les processus d’invalidation inhérents au système de propriétés, la fonctionnalité de déclencheur de propriété étant prise en charge en interne.</span><span class="sxs-lookup"><span data-stu-id="1e21e-117">Changes in a read-only dependency property can also be detected and reported by the property system's inherent invalidation processes, and this in fact supports the property trigger functionality internally.</span></span>  
  
<a name="new"></a>   
## <a name="creating-custom-read-only-dependency-properties"></a><span data-ttu-id="1e21e-118">Création de propriétés de dépendance en lecture seule personnalisées</span><span class="sxs-lookup"><span data-stu-id="1e21e-118">Creating Custom Read-Only Dependency Properties</span></span>  
 <span data-ttu-id="1e21e-119">Lisez attentivement la section ci-dessus qui explique pourquoi les propriétés de dépendance en lecture seule ne fonctionnent pas dans de nombreux scénarios de propriété de dépendance classiques.</span><span class="sxs-lookup"><span data-stu-id="1e21e-119">Make sure to read the section above regarding why read-only dependency properties won't work for many typical dependency-property scenarios.</span></span> <span data-ttu-id="1e21e-120">Toutefois, si vous avez un scénario approprié, vous pouvez créer votre propre propriété de dépendance en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="1e21e-120">But if you have an appropriate scenario, you may wish to create your own read-only dependency property.</span></span>  
  
 <span data-ttu-id="1e21e-121">Une grande partie du processus de création d’une propriété de dépendance en lecture seule est identique à celui décrit dans les rubriques [Propriétés de dépendance personnalisées](custom-dependency-properties.md) et [Implémenter une propriété de dépendance](how-to-implement-a-dependency-property.md).</span><span class="sxs-lookup"><span data-stu-id="1e21e-121">Much of the process of creating a read-only dependency property is the same as is described in the [Custom Dependency Properties](custom-dependency-properties.md) and [Implement a Dependency Property](how-to-implement-a-dependency-property.md) topics.</span></span> <span data-ttu-id="1e21e-122">Il existe trois différences majeures :</span><span class="sxs-lookup"><span data-stu-id="1e21e-122">There are three important differences:</span></span>  
  
- <span data-ttu-id="1e21e-123">Lorsque vous inscrivez votre propriété, appelez le <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A> méthode au lieu de la normale <xref:System.Windows.DependencyProperty.Register%2A> méthode d’inscription de propriété.</span><span class="sxs-lookup"><span data-stu-id="1e21e-123">When registering your property, call the <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A> method instead of the normal <xref:System.Windows.DependencyProperty.Register%2A> method for property registration.</span></span>  
  
- <span data-ttu-id="1e21e-124">Quand vous implémentez la propriété de « wrapper » [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)], vérifiez que le wrapper n’a pas non plus d’implémentation définie, pour qu’il n’y ait pas d’incohérence dans l’état en lecture seule pour le wrapper public que vous exposez.</span><span class="sxs-lookup"><span data-stu-id="1e21e-124">When implementing the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] "wrapper" property, make sure that the wrapper too doesn't have a set implementation, so that there is no inconsistency in read-only state for the public wrapper you expose.</span></span>  
  
- <span data-ttu-id="1e21e-125">L’objet retourné par l’inscription en lecture seule est <xref:System.Windows.DependencyPropertyKey> plutôt que <xref:System.Windows.DependencyProperty>.</span><span class="sxs-lookup"><span data-stu-id="1e21e-125">The object returned by the read-only registration is <xref:System.Windows.DependencyPropertyKey> rather than <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="1e21e-126">Vous devez toujours stocker ce champ sous forme de membre, mais, en général, vous ne le convertissez pas en membre public du type.</span><span class="sxs-lookup"><span data-stu-id="1e21e-126">You should still store this field as a member but typically you would not make it a public member of the type.</span></span>  
  
 <span data-ttu-id="1e21e-127">Indépendamment de la valeur ou champ privé que vous utilisez, le stockage de votre propriété de dépendance en lecture seule peut être entièrement inscriptible en utilisant la logique de votre choix.</span><span class="sxs-lookup"><span data-stu-id="1e21e-127">Whatever private field or value you have backing your read-only dependency property can of course be fully writable using whatever logic you decide.</span></span> <span data-ttu-id="1e21e-128">Toutefois, la méthode la plus simple pour définir la propriété initialement ou dans le cadre de la logique d’exécution est d’utiliser les [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] du système de propriétés plutôt que de contourner le système de propriétés et de définir directement le champ de stockage privé.</span><span class="sxs-lookup"><span data-stu-id="1e21e-128">However, the most straightforward way to set the property either initially or as part of runtime logic is to use the property system's [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], rather than circumventing the property system and setting the private backing field directly.</span></span> <span data-ttu-id="1e21e-129">En particulier, il existe une signature de <xref:System.Windows.DependencyObject.SetValue%2A> qui accepte un paramètre de type <xref:System.Windows.DependencyPropertyKey>.</span><span class="sxs-lookup"><span data-stu-id="1e21e-129">In particular, there is a signature of <xref:System.Windows.DependencyObject.SetValue%2A> that accepts a parameter of type <xref:System.Windows.DependencyPropertyKey>.</span></span> <span data-ttu-id="1e21e-130">Comment et où vous définissez la valeur par programmation au sein de votre logique d’application affecteront la manière dont vous voulez définir l’accès sur le <xref:System.Windows.DependencyPropertyKey> créé quand vous avez inscrit la propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="1e21e-130">How and where you set this value programmatically within your application logic will affect how you may wish to set access on the <xref:System.Windows.DependencyPropertyKey> created when you first registered the dependency property.</span></span> <span data-ttu-id="1e21e-131">Si vous gérez cette logique entièrement dans la classe, vous pouvez indiquer qu’elle est privée ou, si vous voulez qu’elle soit définie à partir d’autres parties de l’assembly, vous pouvez la définir en interne.</span><span class="sxs-lookup"><span data-stu-id="1e21e-131">If you handle this logic all within the class you could make it private, or if you require it to be set from other portions of the assembly you might set it internal.</span></span> <span data-ttu-id="1e21e-132">Une approche consiste à appeler <xref:System.Windows.DependencyObject.SetValue%2A> au sein d’un gestionnaire d’événements de classe d’un événement pertinent qui indique à une instance de classe, la valeur de propriété stockée doit être modifiée.</span><span class="sxs-lookup"><span data-stu-id="1e21e-132">One approach is to call <xref:System.Windows.DependencyObject.SetValue%2A> within a class event handler of a relevant event that informs a class instance that the stored property value needs to be changed.</span></span> <span data-ttu-id="1e21e-133">Une autre approche consiste à relier les propriétés de dépendance à l’aide associée <xref:System.Windows.PropertyChangedCallback> et <xref:System.Windows.CoerceValueCallback> rappels dans le cadre des métadonnées de ces propriétés lors de l’inscription.</span><span class="sxs-lookup"><span data-stu-id="1e21e-133">Another approach is to tie dependency properties together by using paired <xref:System.Windows.PropertyChangedCallback> and <xref:System.Windows.CoerceValueCallback> callbacks as part of those properties' metadata during registration.</span></span>  
  
 <span data-ttu-id="1e21e-134">Étant donné que le <xref:System.Windows.DependencyPropertyKey> est privé et n’est pas propagé par le système de propriétés en dehors de votre code, une propriété de dépendance en lecture seule a de mieux de la sécurité de paramétrage qu’une propriété de dépendance en lecture-écriture.</span><span class="sxs-lookup"><span data-stu-id="1e21e-134">Because the <xref:System.Windows.DependencyPropertyKey> is private, and is not propagated by the property system outside of your code, a read-only dependency property does have better setting security than a read-write dependency property.</span></span> <span data-ttu-id="1e21e-135">Pour une propriété de dépendance en lecture-écriture, le champ d’identification est explicitement ou implicitement public et la propriété est donc largement définissable.</span><span class="sxs-lookup"><span data-stu-id="1e21e-135">For a read-write dependency property, the identifying field is explicitly or implicitly public and thus the property is widely settable.</span></span> <span data-ttu-id="1e21e-136">Pour plus d’informations, consultez [Sécurité de propriété de dépendance](dependency-property-security.md).</span><span class="sxs-lookup"><span data-stu-id="1e21e-136">For more specifics, see [Dependency Property Security](dependency-property-security.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1e21e-137">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="1e21e-137">See also</span></span>

- [<span data-ttu-id="1e21e-138">Vue d’ensemble des propriétés de dépendance</span><span class="sxs-lookup"><span data-stu-id="1e21e-138">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="1e21e-139">Propriétés de dépendance personnalisées</span><span class="sxs-lookup"><span data-stu-id="1e21e-139">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="1e21e-140">Application d’un style et création de modèles</span><span class="sxs-lookup"><span data-stu-id="1e21e-140">Styling and Templating</span></span>](../controls/styling-and-templating.md)
