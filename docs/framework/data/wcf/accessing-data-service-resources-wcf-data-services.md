---
title: Accès aux ressources d'un service de données (services de données WCF)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, querying
- getting started, WCF Data Services
- querying the data service [WCF Data Service]
- WCF Data Services, getting started
- WCF Data Services, accessing data
ms.assetid: 9665ff5b-3e3a-495d-bf83-d531d5d060ed
ms.openlocfilehash: cf6877dd67ad9e17a43be5eafb84a2ecf21d7190
ms.sourcegitcommit: f348c84443380a1959294cdf12babcb804cfa987
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/12/2019
ms.locfileid: "73975434"
---
# <a name="accessing-data-service-resources-wcf-data-services"></a><span data-ttu-id="41304-102">Accès aux ressources d'un service de données (services de données WCF)</span><span class="sxs-lookup"><span data-stu-id="41304-102">Accessing Data Service Resources (WCF Data Services)</span></span>
[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="41304-103">prend en charge le Open Data Protocol (OData) pour exposer vos données en tant que flux avec des ressources adressables par des URI.</span><span class="sxs-lookup"><span data-stu-id="41304-103">supports the Open Data Protocol (OData) to expose your data as a feed with resources that are addressable by URIs.</span></span> <span data-ttu-id="41304-104">Ces ressources sont représentées selon les conventions de relation d’entité de l' [Entity Data Model](../adonet/entity-data-model.md).</span><span class="sxs-lookup"><span data-stu-id="41304-104">These resources are represented according to the entity-relationship conventions of the [Entity Data Model](../adonet/entity-data-model.md).</span></span> <span data-ttu-id="41304-105">Dans ce modèle, les entités représentent des unités opérationnelles de données qui sont des types de données dans un domaine d'application, par exemple les clients, ordres, éléments et produits.</span><span class="sxs-lookup"><span data-stu-id="41304-105">In this model, entities represent operational units of data that are data types in an application domain, such as customers, orders, items, and products.</span></span> <span data-ttu-id="41304-106">Les données d'entité sont accessibles et modifiées au moyen de la sémantique REST (Representational State Transfer), en particulier les verbes HTTP standard GET, PUT, POST et DELETE.</span><span class="sxs-lookup"><span data-stu-id="41304-106">Entity data is accessed and changed by using the semantics of representational state transfer (REST), specifically the standard HTTP verbs of GET, PUT, POST, and DELETE.</span></span>  
  
## <a name="addressing-resources"></a><span data-ttu-id="41304-107">Adressage des ressources</span><span class="sxs-lookup"><span data-stu-id="41304-107">Addressing Resources</span></span>  
 <span data-ttu-id="41304-108">Dans OData, vous traitez les données exposées par le modèle de données à l’aide d’un URI.</span><span class="sxs-lookup"><span data-stu-id="41304-108">In OData, you address any data exposed by the data model by using a URI.</span></span> <span data-ttu-id="41304-109">Par exemple, l’URI suivant retourne un flux qui est le jeu d’entités Customers, qui contient des entrées pour toutes les instances du type d’entité Customer :</span><span class="sxs-lookup"><span data-stu-id="41304-109">For example, the following URI returns a feed that is the Customers entity set, which contains entries for all instances of the Customer entity type:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Customers>
  
 <span data-ttu-id="41304-110">Les entités ont des propriétés spéciales appelées des clés d'entité.</span><span class="sxs-lookup"><span data-stu-id="41304-110">Entities have special properties called entity keys.</span></span> <span data-ttu-id="41304-111">Une clé d'entité est utilisée pour identifier uniquement une entité unique dans un jeu d'entités.</span><span class="sxs-lookup"><span data-stu-id="41304-111">An entity key is used to uniquely identify a single entity in an entity set.</span></span> <span data-ttu-id="41304-112">Cela vous permet d'adresser une instance spécifique d'un type d'entité dans le jeu d'entités.</span><span class="sxs-lookup"><span data-stu-id="41304-112">This enables you to address a specific instance of an entity type in the entity set.</span></span> <span data-ttu-id="41304-113">Par exemple, l'URI suivant retourne une entrée pour une instance spécifique du type d'entité Customer dont la valeur de clé est `ALFKI`:</span><span class="sxs-lookup"><span data-stu-id="41304-113">For example, the following URI returns an entry for a specific instance of the Customer entity type that has a key value of `ALFKI`:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')>
  
 <span data-ttu-id="41304-114">Les propriétés primitives et complexes d'une instance d'entité peuvent également être adressées individuellement.</span><span class="sxs-lookup"><span data-stu-id="41304-114">Primitive and complex properties of an entity instance can also be individually addressed.</span></span> <span data-ttu-id="41304-115">Par exemple, l'URI suivant retourne un élément XML qui contient la valeur de propriété `ContactName` pour un client spécifique :</span><span class="sxs-lookup"><span data-stu-id="41304-115">For example, the following URI returns an XML element that contains the `ContactName` property value for a specific Customer:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/ContactName>
  
 <span data-ttu-id="41304-116">Lorsque vous incluez le point de terminaison `$value` dans l'URI précédent, seule la valeur de la propriété primitive est retournée dans le message de réponse.</span><span class="sxs-lookup"><span data-stu-id="41304-116">When you include the `$value` endpoint in the previous URI, only the value of the primitive property is returned in the response message.</span></span> <span data-ttu-id="41304-117">L'exemple suivant retourne uniquement la chaîne « Maria Anders » sans l'élément XML :</span><span class="sxs-lookup"><span data-stu-id="41304-117">The following example returns only the string "Maria Anders" without the XML element:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/ContactName/$value>
  
 <span data-ttu-id="41304-118">Les associations définissent dans le modèle de données les relations entre les entités.</span><span class="sxs-lookup"><span data-stu-id="41304-118">Relationships between entities are defined in the data model by associations.</span></span> <span data-ttu-id="41304-119">Ces associations vous permettent d'adresser des jeux d'entités connexes à l'aide des propriétés de navigation d'une instance d'entité.</span><span class="sxs-lookup"><span data-stu-id="41304-119">These associations enable you to address related entities by using navigation properties of an entity instance.</span></span> <span data-ttu-id="41304-120">Une propriété de navigation peut soit retourner une entité connexe unique, dans le cas d'une relation plusieurs-à-un, soit un jeu d'entités connexes, dans le cas d'une relation un-à-plusieurs.</span><span class="sxs-lookup"><span data-stu-id="41304-120">A navigation property can return either a single related entity, in the case of a many-to-one relationship, or a set of related entities, in the case of a one-to-many relationship.</span></span> <span data-ttu-id="41304-121">Par exemple, l'URI suivant retourne un flux qui constitue le jeu de toutes les commandes associées à un client spécifique :</span><span class="sxs-lookup"><span data-stu-id="41304-121">For example, the following URI returns a feed that is the set of all the Orders that are related to a specific Customer:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/Orders>
  
 <span data-ttu-id="41304-122">Les relations, qui sont habituellement bidirectionnelles, sont représentées par une paire de propriétés de navigation.</span><span class="sxs-lookup"><span data-stu-id="41304-122">Relationships, which are usually bi-directional, are represented by a pair of navigation properties.</span></span> <span data-ttu-id="41304-123">Inversement à la relation de l'exemple précédent, l'URI suivant retourne une référence à l'entité Customer à laquelle appartient une entité Order spécifique :</span><span class="sxs-lookup"><span data-stu-id="41304-123">As the reverse of the relationship shown in the previous example, the following URI returns a reference to the Customer entity to which a specific Order entity belongs:</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Orders(10643)/Customer>
  
 <span data-ttu-id="41304-124">OData vous permet également d’adresser des ressources en fonction des résultats d’expressions de requête.</span><span class="sxs-lookup"><span data-stu-id="41304-124">OData also enables you to address resources based on the results of query expressions.</span></span> <span data-ttu-id="41304-125">Cela permet de filtrer des ensembles de ressources en fonction d’une expression évaluée.</span><span class="sxs-lookup"><span data-stu-id="41304-125">This makes it possible to filter sets of resources based on an evaluated expression.</span></span> <span data-ttu-id="41304-126">Par exemple, l'URI suivant filtre les ressources pour retourner uniquement les ordres du client spécifié expédiés depuis le 22 septembre 1997 :</span><span class="sxs-lookup"><span data-stu-id="41304-126">For example, the following URI filters the resources to return only the Orders for the specified Customer that have shipped since September 22, 1997:</span></span>  
  
<span data-ttu-id="41304-127"><https://services.odata.org/Northwind/Northwind.svc/Customers( 'ALFKI')/Orders ? $filter = DateExpédition gt DateTime' 1997-09-22T00:00:00 ' ></span><span class="sxs-lookup"><span data-stu-id="41304-127"><https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/Orders?$filter=ShippedDate gt datetime'1997-09-22T00:00:00'></span></span>
  
 <span data-ttu-id="41304-128">Pour plus d’informations, consultez [OData : conventions d’URI](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).</span><span class="sxs-lookup"><span data-stu-id="41304-128">For more information, see [OData: URI Conventions](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).</span></span>
  
## <a name="system-query-options"></a><span data-ttu-id="41304-129">Option de requête système</span><span class="sxs-lookup"><span data-stu-id="41304-129">System Query Options</span></span>  
 <span data-ttu-id="41304-130">OData définit un ensemble d’options de requête système que vous pouvez utiliser pour effectuer des opérations de requête traditionnelles sur des ressources, telles que le filtrage, le tri et la pagination.</span><span class="sxs-lookup"><span data-stu-id="41304-130">OData defines a set of system query options that you can use to perform traditional query operations against resources, such as filtering, sorting, and paging.</span></span> <span data-ttu-id="41304-131">Par exemple, l’URI suivant retourne le jeu de toutes les entités `Order`, ainsi que les entités `Order_Detail` associées, dont les codes postaux ne se terminent pas par `100`:</span><span class="sxs-lookup"><span data-stu-id="41304-131">For example, the following URI returns the set of all the `Order` entities, along with related `Order_Detail` entities, the postal codes of which do not end in `100`:</span></span>  
  
<span data-ttu-id="41304-132"><https://services.odata.org/Northwind/Northwind.svc/Orders? $filter = not EndsWith (ShipPostalCode, ' 100 ') & $expand = Order_Details & $OrderBy = ShipCity ></span><span class="sxs-lookup"><span data-stu-id="41304-132"><https://services.odata.org/Northwind/Northwind.svc/Orders?$filter=not endswith(ShipPostalCode,'100')&$expand=Order_Details&$orderby=ShipCity></span></span>
  
 <span data-ttu-id="41304-133">Les entrées du flux retourné sont également classées selon la valeur de la propriété ShipCity des commandes.</span><span class="sxs-lookup"><span data-stu-id="41304-133">The entries in the returned feed are also ordered by the value of the ShipCity property of the orders.</span></span>  
  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="41304-134">prend en charge les options de requête système OData suivantes :</span><span class="sxs-lookup"><span data-stu-id="41304-134">supports the following OData system query options:</span></span>  
  
|<span data-ttu-id="41304-135">Option de requête</span><span class="sxs-lookup"><span data-stu-id="41304-135">Query Option</span></span>|<span data-ttu-id="41304-136">Description</span><span class="sxs-lookup"><span data-stu-id="41304-136">Description</span></span>|  
|------------------|-----------------|  
|`$orderby`|<span data-ttu-id="41304-137">Définit un ordre de tri par défaut pour les entités du flux retourné.</span><span class="sxs-lookup"><span data-stu-id="41304-137">Defines a default sort order for entities in the returned feed.</span></span> <span data-ttu-id="41304-138">La requête suivante classe le flux des clients retournés par comté et ville :</span><span class="sxs-lookup"><span data-stu-id="41304-138">The following query orders the returned customers feed by county and city:</span></span><br /><br /> <https://services.odata.org/Northwind/Northwind.svc/Customers?$orderby=Country,City>|  
|`$top`|<span data-ttu-id="41304-139">Spécifie le nombre d'entités à inclure dans le flux retourné.</span><span class="sxs-lookup"><span data-stu-id="41304-139">Specifies the number of entities to include in the returned feed.</span></span> <span data-ttu-id="41304-140">L'exemple suivant ignore les 10 premiers clients, puis retourne les 10 suivants :</span><span class="sxs-lookup"><span data-stu-id="41304-140">The following example skips the first 10 customers and then returns the next 10:</span></span><br /><br /> <https://services.odata.org/Northwind/Northwind.svc/Customers?$skip=10&$top=10>|  
|`$skip`|<span data-ttu-id="41304-141">Spécifie le nombre d'entités à ignorer avant de commencer à retourner des entités dans le flux.</span><span class="sxs-lookup"><span data-stu-id="41304-141">Specifies the number of entities to skip before starting to return entities in the feed.</span></span> <span data-ttu-id="41304-142">L'exemple suivant ignore les 10 premiers clients, puis retourne les 10 suivants :</span><span class="sxs-lookup"><span data-stu-id="41304-142">The following example skips the first 10 customers and then returns the next 10:</span></span><br /><br /> <https://services.odata.org/Northwind/Northwind.svc/Customers?$skip=10&$top=10>|  
|`$filter`|<span data-ttu-id="41304-143">Définit une expression qui filtre les entités retournées dans le flux selon des critères spécifiques.</span><span class="sxs-lookup"><span data-stu-id="41304-143">Defines an expression that filters the entities returned in the feed based on specific criteria.</span></span> <span data-ttu-id="41304-144">Cette option de requête prend en charge un jeu d'opérateurs logiques de comparaison, d'opérateurs arithmétiques et de fonctions de requête prédéfinies utilisés pour évaluer l'expression de filtre.</span><span class="sxs-lookup"><span data-stu-id="41304-144">This query option supports a set of logical comparison operators, arithmetic operators, and predefined query functions that are used to evaluate the filter expression.</span></span> <span data-ttu-id="41304-145">L'exemple suivant retourne toutes les commandes dont les codes postaux ne se terminent pas par 100 :</span><span class="sxs-lookup"><span data-stu-id="41304-145">The following example returns all orders the postal codes of which do not end in 100:</span></span><br /><br /> <span data-ttu-id="41304-146"><https://services.odata.org/Northwind/Northwind.svc/Orders? $filter = not EndsWith (ShipPostalCode, ' 100 ') ></span><span class="sxs-lookup"><span data-stu-id="41304-146"><https://services.odata.org/Northwind/Northwind.svc/Orders?$filter=not endswith(ShipPostalCode,'100')></span></span>|  
|`$expand`|<span data-ttu-id="41304-147">Spécifie les entités connexes retournées par la requête.</span><span class="sxs-lookup"><span data-stu-id="41304-147">Specifies which related entities are returned by the query.</span></span> <span data-ttu-id="41304-148">Les entités connexes sont incluses comme un flux ou comme une entrée inline avec l'entité retournée par la requête.</span><span class="sxs-lookup"><span data-stu-id="41304-148">Related entities are included as either a feed or an entry inline with the entity returned by the query.</span></span> <span data-ttu-id="41304-149">L'exemple suivant retourne la commande du client « ALFKI » avec le détail des articles de chaque commande :</span><span class="sxs-lookup"><span data-stu-id="41304-149">The following example returns the order for the customer 'ALFKI' along with the item details for each order:</span></span><br /><br /> <https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/Orders?$expand=Order_Details>|  
|`$select`|<span data-ttu-id="41304-150">Spécifie une projection qui définit les propriétés de l'entité retournées dans la projection.</span><span class="sxs-lookup"><span data-stu-id="41304-150">Specifies a projection that defines the properties of the entity are returned in the projection.</span></span> <span data-ttu-id="41304-151">Par défaut, toutes les propriétés d'une entité sont retournées dans un flux.</span><span class="sxs-lookup"><span data-stu-id="41304-151">By default, all properties of an entity are returned in a feed.</span></span> <span data-ttu-id="41304-152">La requête suivante retourne uniquement trois propriétés de l'entité `Customer` :</span><span class="sxs-lookup"><span data-stu-id="41304-152">The following query returns only three properties of the `Customer` entity:</span></span><br /><br /> <https://services.odata.org/Northwind/Northwind.svc/Customers?$select=CustomerID,CompanyName,City>|  
|`$inlinecount`|<span data-ttu-id="41304-153">Demande qu'un décompte du nombre d'entités retournées dans le flux soit inclus avec le flux.</span><span class="sxs-lookup"><span data-stu-id="41304-153">Requests that a count of the number of entities returned in the feed be included with the feed.</span></span>|  
  
## <a name="addressing-relationships"></a><span data-ttu-id="41304-154">Adressage de relations</span><span class="sxs-lookup"><span data-stu-id="41304-154">Addressing Relationships</span></span>  
 <span data-ttu-id="41304-155">En plus d’adresser des jeux d’entités et des instances d’entité, OData vous permet également de traiter les associations qui représentent des relations entre des entités.</span><span class="sxs-lookup"><span data-stu-id="41304-155">In addition to addressing entity sets and entity instances, OData also enables you to address the associations that represent relationships between entities.</span></span> <span data-ttu-id="41304-156">Cette fonctionnalité est nécessaire pour créer ou modifier une relation entre deux instances d'entité, telles que l'expéditeur associé à un ordre donné dans l'exemple de base de données Northwind.</span><span class="sxs-lookup"><span data-stu-id="41304-156">This functionality is required to be able to create or change a relationship between two entity instances, such as the shipper that is related to a given order in the Northwind sample database.</span></span> <span data-ttu-id="41304-157">OData prend en charge un opérateur `$link` pour traiter spécifiquement les associations entre les entités.</span><span class="sxs-lookup"><span data-stu-id="41304-157">OData supports a `$link` operator to specifically address the associations between entities.</span></span> <span data-ttu-id="41304-158">Par exemple, l'URI suivant est spécifié dans un message de demande HTTP PUT pour remplacer l'expéditeur pour l'ordre spécifié par un nouvel expéditeur.</span><span class="sxs-lookup"><span data-stu-id="41304-158">For example, the following URI is specified in an HTTP PUT request message to change the shipper for the specified order to a new shipper.</span></span>  
  
<https://services.odata.org/Northwind/Northwind.svc/Orders(10643)/$links/Shipper>
  
 <span data-ttu-id="41304-159">Pour plus d’informations, consultez la section `3.2. Addressing Links between Entries` sur [OData : conventions d’URI](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).</span><span class="sxs-lookup"><span data-stu-id="41304-159">For more information, see section `3.2. Addressing Links between Entries` at [OData: URI Conventions](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).</span></span>
  
## <a name="consuming-the-returned-feed"></a><span data-ttu-id="41304-160">Consommation du flux retourné</span><span class="sxs-lookup"><span data-stu-id="41304-160">Consuming the Returned Feed</span></span>  
 <span data-ttu-id="41304-161">L’URI d’une ressource OData vous permet d’adresser des données d’entité exposées par le service.</span><span class="sxs-lookup"><span data-stu-id="41304-161">The URI of an OData resource enables you to address entity data exposed by the service.</span></span> <span data-ttu-id="41304-162">Lorsque vous entrez un URI dans le champ d’adresse d’un navigateur Web, une représentation de flux OData de la ressource demandée est retournée.</span><span class="sxs-lookup"><span data-stu-id="41304-162">When you enter a URI into the address field of a Web browser, a OData feed representation of the requested resource is returned.</span></span> <span data-ttu-id="41304-163">Pour plus d’informations, consultez le Guide de [démarrage rapide de WCF Data Services](quickstart-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="41304-163">For more information, see the [WCF Data Services Quickstart](quickstart-wcf-data-services.md).</span></span> <span data-ttu-id="41304-164">Même si un navigateur Web peut être utile pour vérifier qu’une ressource de service de données retourne les données attendues, les services de données de production qui peuvent également créer, mettre à jour et supprimer des données sont généralement accessibles par le code d’application ou les langages de script d’une page Web.</span><span class="sxs-lookup"><span data-stu-id="41304-164">Although a Web browser may be useful for testing that a data service resource returns the expected data, production data services that can also create, update, and delete data are generally accessed by application code or scripting languages in a Web page.</span></span> <span data-ttu-id="41304-165">Pour plus d’informations, consultez [utilisation d’un service de données dans une application cliente](using-a-data-service-in-a-client-application-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="41304-165">For more information, see [Using a Data Service in a Client Application](using-a-data-service-in-a-client-application-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="41304-166">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="41304-166">See also</span></span>

- [<span data-ttu-id="41304-167">Site web Open Data Protocol</span><span class="sxs-lookup"><span data-stu-id="41304-167">Open Data Protocol Web site</span></span>](https://www.odata.org/)
