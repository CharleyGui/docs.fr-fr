---
title: Considérations sur LINQ (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, LINQ
- querying the data service [WCF Data Services]
- WCF Data Services, querying
ms.assetid: cc4ec9e9-348f-42a6-a78e-1cd40e370656
ms.openlocfilehash: f8ec53323abec7077c69f50fe522338228ceddbb
ms.sourcegitcommit: ed3f926b6cdd372037bbcc214dc8f08a70366390
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/16/2020
ms.locfileid: "76116638"
---
# <a name="linq-considerations-wcf-data-services"></a><span data-ttu-id="ef889-102">Considérations sur LINQ (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="ef889-102">LINQ Considerations (WCF Data Services)</span></span>
<span data-ttu-id="ef889-103">Cette rubrique fournit des informations sur la façon dont les requêtes LINQ sont composées et exécutées lorsque vous utilisez le client WCF Data Services et les limitations de l’utilisation de LINQ pour interroger un service de données qui implémente le Open Data Protocol (OData).</span><span class="sxs-lookup"><span data-stu-id="ef889-103">This topic provides information about the way in which LINQ queries are composed and executed when you are using the WCF Data Services client and limitations of using LINQ to query a data service that implements the Open Data Protocol (OData).</span></span> <span data-ttu-id="ef889-104">Pour plus d’informations sur la composition et l’exécution de requêtes sur un service de données basé sur OData, consultez [interrogation du service de données](querying-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ef889-104">For more information about composing and executing queries against an OData-based data service, see [Querying the Data Service](querying-the-data-service-wcf-data-services.md).</span></span>  
  
## <a name="composing-linq-queries"></a><span data-ttu-id="ef889-105">Composition de requêtes LINQ</span><span class="sxs-lookup"><span data-stu-id="ef889-105">Composing LINQ Queries</span></span>  
 <span data-ttu-id="ef889-106">LINQ vous permet de composer des requêtes pour interroger une collection d'objets qui implémente <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="ef889-106">LINQ enables you to compose queries against a collection of objects that implements <xref:System.Collections.Generic.IEnumerable%601>.</span></span> <span data-ttu-id="ef889-107">La boîte de dialogue **Ajouter une référence de service** dans Visual Studio et l’outil outil DataSvcUtil. exe sont utilisées pour générer une représentation d’un service OData en tant que classe de conteneur d’entités qui hérite de <xref:System.Data.Services.Client.DataServiceContext>, ainsi que des objets qui représentent les entités retournées dans les flux.</span><span class="sxs-lookup"><span data-stu-id="ef889-107">Both the **Add Service Reference** dialog box in Visual Studio and the DataSvcUtil.exe tool are used to generate a representation of an OData service as an entity container class that inherits from <xref:System.Data.Services.Client.DataServiceContext>, as well as objects that represent the entities returned in feeds.</span></span> <span data-ttu-id="ef889-108">Ces outils génèrent également des propriétés sur la classe de conteneur d’entités des collections qui sont exposées en tant que flux par le service.</span><span class="sxs-lookup"><span data-stu-id="ef889-108">These tools also generate properties on the entity container class for the collections that are exposed as feeds by the service.</span></span> <span data-ttu-id="ef889-109">Chacune de ces propriétés de classe qui encapsule le service de données retourne un <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="ef889-109">Each of these properties of the class that encapsulates the data service return a <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span> <span data-ttu-id="ef889-110">Étant donné que la classe <xref:System.Data.Services.Client.DataServiceQuery%601> implémente l'interface <xref:System.Linq.IQueryable%601> définie par LINQ, vous pouvez composer une requête LINQ sur des flux exposés par le service de données, qui sont convertis par la bibliothèque cliente en un URI de demande de requête envoyé au service de données lors de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="ef889-110">Because the <xref:System.Data.Services.Client.DataServiceQuery%601> class implements the <xref:System.Linq.IQueryable%601> interface defined by LINQ, you can compose a LINQ query against feeds exposed by the data service, which are translated by the client library into a query request URI that is sent to the data service on execution.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="ef889-111">L’ensemble de requêtes exprimables dans la syntaxe LINQ est plus large que ceux activés dans la syntaxe d’URI utilisée par les services de données OData.</span><span class="sxs-lookup"><span data-stu-id="ef889-111">The set of queries expressible in the LINQ syntax is broader than those enabled in the URI syntax that is used by OData data services.</span></span> <span data-ttu-id="ef889-112"><xref:System.NotSupportedException> est levée lorsque la requête ne peut pas être mappée à un URI dans le service de données cible.</span><span class="sxs-lookup"><span data-stu-id="ef889-112">A <xref:System.NotSupportedException> is raised when the query cannot be mapped to a URI in the target data service.</span></span> <span data-ttu-id="ef889-113">Pour plus d’informations, consultez les [Méthodes LINQ non prises en charge](linq-considerations-wcf-data-services.md#unsupportedMethods) dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="ef889-113">For more information, see the [Unsupported LINQ Methods](linq-considerations-wcf-data-services.md#unsupportedMethods) in this topic.</span></span>  
  
 <span data-ttu-id="ef889-114">L'exemple suivant est une requête LINQ qui retourne des `Orders` ayant un coût de fret supérieur à $30 et trie les résultats par date d'expédition, en commençant par la dernière :</span><span class="sxs-lookup"><span data-stu-id="ef889-114">The following example is a LINQ query that returns `Orders` that have a freight cost of more than $30 and sorts the results by the shipping date, starting with the latest ship date:</span></span>  
  
[!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionslinqspecific)]      
[!code-vb[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionslinqspecific)]    
  
 <span data-ttu-id="ef889-115">Cette requête LINQ est traduite dans l’URI de requête suivant qui est exécuté sur le service de données de [démarrage rapide](quickstart-wcf-data-services.md) basé sur Northwind :</span><span class="sxs-lookup"><span data-stu-id="ef889-115">This LINQ query is translated into the following query URI that is executed against the Northwind-based [quickstart](quickstart-wcf-data-services.md) data service:</span></span>  
  
```http
http://localhost:12345/Northwind.svc/Orders?Orderby=ShippedDate&?filter=Freight gt 30  
```  
  
 <span data-ttu-id="ef889-116">Pour plus d’informations générales sur LINQ, consultez [LINQ (Language-Integrated Query) C# ](../../../csharp/programming-guide/concepts/linq/index.md) ou [LINQ (Language-Integrated Query)-Visual Basic](../../../visual-basic/programming-guide/concepts/linq/index.md).</span><span class="sxs-lookup"><span data-stu-id="ef889-116">For more general information about LINQ, see [Language-Integrated Query (LINQ) - C#](../../../csharp/programming-guide/concepts/linq/index.md) or [Language-Integrated Query (LINQ) - Visual Basic](../../../visual-basic/programming-guide/concepts/linq/index.md).</span></span>  
  
 <span data-ttu-id="ef889-117">LINQ vous permet de composer des requêtes en utilisant aussi bien la syntaxe déclarative spécifique au langage, illustrée dans l'exemple précédent, qu'un ensemble de méthodes de requête qu'on nomme opérateurs de requête standard.</span><span class="sxs-lookup"><span data-stu-id="ef889-117">LINQ enables you to compose queries by using both the language-specific declarative query syntax, shown in the previous example, as well as a set of query methods known as standard query operators.</span></span> <span data-ttu-id="ef889-118">Une requête équivalente à l'exemple précédent peut être composée en utilisant uniquement la syntaxe reposant sur une méthode, comme illustré dans l'exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="ef889-118">An equivalent query to the previous example can be composed by using only the method-based syntax, as shown the following example:</span></span>  
  
[!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqExpressionSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionslinqexpressionspecific)]      
[!code-vb[Astoria Northwind Client#AddQueryOptionsLinqExpressionSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionslinqexpressionspecific)]    
  
 <span data-ttu-id="ef889-119">Le client WCF Data Services est en mesure de traduire les deux types de requêtes composées en un URI de requête, et vous pouvez étendre une requête LINQ en ajoutant des méthodes de requête à une expression de requête.</span><span class="sxs-lookup"><span data-stu-id="ef889-119">The WCF Data Services client is able to translate both kinds of composed queries into a query URI, and you can extend a LINQ query by appending query methods to a query expression.</span></span> <span data-ttu-id="ef889-120">Lorsque vous composez des requêtes LINQ en ajoutant une syntaxe de méthode à une expression de requête ou un <xref:System.Data.Services.Client.DataServiceQuery%601>, les opérations sont ajoutées à l'URI de la requête dans l'ordre suivant lequel les méthodes sont appelées.</span><span class="sxs-lookup"><span data-stu-id="ef889-120">When you compose LINQ queries by appending method syntax to a query expression or a <xref:System.Data.Services.Client.DataServiceQuery%601>, the operations are added to the query URI in the order in which methods are called.</span></span> <span data-ttu-id="ef889-121">Cela équivaut à appeler la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> pour ajouter chaque option de requête à l'URI de requête.</span><span class="sxs-lookup"><span data-stu-id="ef889-121">This is equivalent to calling the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method to add each query option to the query URI.</span></span>  
  
## <a name="executing-linq-queries"></a><span data-ttu-id="ef889-122">Exécution de requêtes LINQ</span><span class="sxs-lookup"><span data-stu-id="ef889-122">Executing LINQ Queries</span></span>  
 <span data-ttu-id="ef889-123">Lorsqu'elles sont ajoutées à une requête, certaines méthodes de requête LINQ, comme <xref:System.Linq.Enumerable.First%60%601%28System.Collections.Generic.IEnumerable%7B%60%600%7D%29> ou <xref:System.Linq.Enumerable.Single%60%601%28System.Collections.Generic.IEnumerable%7B%60%600%7D%29>, provoquent son exécution.</span><span class="sxs-lookup"><span data-stu-id="ef889-123">Certain LINQ query methods, such as <xref:System.Linq.Enumerable.First%60%601%28System.Collections.Generic.IEnumerable%7B%60%600%7D%29> or <xref:System.Linq.Enumerable.Single%60%601%28System.Collections.Generic.IEnumerable%7B%60%600%7D%29>, when appended to the query, cause the query to be executed.</span></span> <span data-ttu-id="ef889-124">L’exécution de la requête est également déclenchée lorsque les résultats sont énumérés implicitement, comme lors d’une boucle `foreach` ou lorsque la requête est attribuée à une collection `List`.</span><span class="sxs-lookup"><span data-stu-id="ef889-124">A query is also executed when results are enumerated implicitly, such as during a `foreach` loop or when the query is assigned to a `List` collection.</span></span> <span data-ttu-id="ef889-125">Pour plus d’informations, consultez [interrogation du service de données](querying-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ef889-125">For more information, see [Querying the Data Service](querying-the-data-service-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="ef889-126">Le client exécute une requête LINQ en deux parties.</span><span class="sxs-lookup"><span data-stu-id="ef889-126">The client executes a LINQ query in two parts.</span></span> <span data-ttu-id="ef889-127">Lorsque cela est possible, les expressions LINQ dans une requête sont d'abord évaluées sur le client, puis une requête basée surl' URI est générée et envoyée au service de données pour être évaluée par rapport aux données dans le service.</span><span class="sxs-lookup"><span data-stu-id="ef889-127">Whenever possible, LINQ expressions in a query are first evaluated on the client, and then a URI-based query is generated and sent to the data service for evaluation against data in the service.</span></span> <span data-ttu-id="ef889-128">Pour plus d’informations, consultez la section relative à l' [exécution du client et du serveur](querying-the-data-service-wcf-data-services.md#executingQueries) dans [interrogation du service de données](querying-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ef889-128">For more information, see the section [Client versus Server Execution](querying-the-data-service-wcf-data-services.md#executingQueries) in [Querying the Data Service](querying-the-data-service-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="ef889-129">Lorsqu’une requête LINQ ne peut pas être traduite dans un URI de requête conforme à OData, une exception est levée lors d’une tentative d’exécution.</span><span class="sxs-lookup"><span data-stu-id="ef889-129">When a LINQ query cannot be translated in an OData-compliant query URI, an exception is raised when execution is attempted.</span></span> <span data-ttu-id="ef889-130">Pour plus d’informations, consultez [interrogation du service de données](querying-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ef889-130">For more information, see [Querying the Data Service](querying-the-data-service-wcf-data-services.md).</span></span>  
  
## <a name="linq-query-examples"></a><span data-ttu-id="ef889-131">Exemples de requêtes LINQ</span><span class="sxs-lookup"><span data-stu-id="ef889-131">LINQ Query Examples</span></span>  
 <span data-ttu-id="ef889-132">Les exemples des sections suivantes illustrent les types de requêtes LINQ qui peuvent être exécutés sur un service OData.</span><span class="sxs-lookup"><span data-stu-id="ef889-132">The examples in the following sections demonstrate the kinds of LINQ queries that can be executed against an OData service.</span></span>  
  
<a name="filtering"></a>   
### <a name="filtering"></a><span data-ttu-id="ef889-133">Filtrage</span><span class="sxs-lookup"><span data-stu-id="ef889-133">Filtering</span></span>  
 <span data-ttu-id="ef889-134">Les exemples de requêtes LINQ de cette section filtrent les données dans le flux retourné par le service.</span><span class="sxs-lookup"><span data-stu-id="ef889-134">The LINQ query examples in this section filter data in the feed returned by the service.</span></span>  
  
 <span data-ttu-id="ef889-135">Les exemples suivants illustrent des requêtes équivalentes qui filtrent les entités `Orders` retournées afin que seules les commandes ayant un coût de fret supérieur à $30 soient retournées :</span><span class="sxs-lookup"><span data-stu-id="ef889-135">The following examples are equivalent queries that filter the returned `Orders` entities so that only orders with a freight cost greater than $30 are returned:</span></span>  
  
- <span data-ttu-id="ef889-136">Utilisation de la syntaxe de requête LINQ :</span><span class="sxs-lookup"><span data-stu-id="ef889-136">Using LINQ query syntax:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqWhereClauseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqwhereclausespecific)]      
[!code-vb[Astoria Northwind Client#LinqWhereClauseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqwhereclausespecific)]     
  
- <span data-ttu-id="ef889-137">Utilisation des méthodes de requête LINQ :</span><span class="sxs-lookup"><span data-stu-id="ef889-137">Using LINQ query methods:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqWhereMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqwheremethodspecific)]      
[!code-vb[Astoria Northwind Client#LinqWhereMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqwheremethodspecific)]       
  
- <span data-ttu-id="ef889-138">Option `$filter` de la chaîne de requête d'URI :</span><span class="sxs-lookup"><span data-stu-id="ef889-138">The URI query string `$filter` option:</span></span>  
  
[!code-csharp[Astoria Northwind Client#ExplicitQueryWhereMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#explicitquerywheremethodspecific)]      
[!code-vb[Astoria Northwind Client#ExplicitQueryWhereMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#explicitquerywheremethodspecific)]       
  
 <span data-ttu-id="ef889-139">Tous les exemples précédents sont convertis vers l'URI de requête : `http://localhost:12345/northwind.svc/Orders()?$filter=Freight gt 30M`.</span><span class="sxs-lookup"><span data-stu-id="ef889-139">All of the previous examples are translated to the query URI: `http://localhost:12345/northwind.svc/Orders()?$filter=Freight gt 30M`.</span></span>  
  
<a name="sorting"></a>   
### <a name="sorting"></a><span data-ttu-id="ef889-140">Tri</span><span class="sxs-lookup"><span data-stu-id="ef889-140">Sorting</span></span>  
 <span data-ttu-id="ef889-141">Les exemples suivants illustrent des requêtes équivalentes qui trient les données retournées par nom de société, code postal et ordre descendant :</span><span class="sxs-lookup"><span data-stu-id="ef889-141">The following examples show equivalent queries that sort returned data both by the company name and by postal code, descending:</span></span>  
  
- <span data-ttu-id="ef889-142">Utilisation de la syntaxe de requête LINQ :</span><span class="sxs-lookup"><span data-stu-id="ef889-142">Using LINQ query syntax:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqOrderByClauseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqorderbyclausespecific)]      
[!code-vb[Astoria Northwind Client#LinqOrderByClauseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqorderbyclausespecific)]        
  
- <span data-ttu-id="ef889-143">Utilisation des méthodes de requête LINQ :</span><span class="sxs-lookup"><span data-stu-id="ef889-143">Using LINQ query methods:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqOrderByMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqorderbymethodspecific)]      
[!code-vb[Astoria Northwind Client#LinqOrderByMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqorderbymethodspecific)]        
  
- <span data-ttu-id="ef889-144">Option `$orderby` de la chaîne de requête d'URI :</span><span class="sxs-lookup"><span data-stu-id="ef889-144">URI query string `$orderby` option):</span></span>  
  
[!code-csharp[Astoria Northwind Client#ExplicitQueryOrderByMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#explicitqueryorderbymethodspecific)]      
[!code-vb[Astoria Northwind Client#ExplicitQueryOrderByMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#explicitqueryorderbymethodspecific)]         
  
 <span data-ttu-id="ef889-145">Tous les exemples précédents sont convertis vers l'URI de requête : `http://localhost:12345/northwind.svc/Customers()?$orderby=CompanyName,PostalCode desc`.</span><span class="sxs-lookup"><span data-stu-id="ef889-145">All of the previous examples are translated to the query URI: `http://localhost:12345/northwind.svc/Customers()?$orderby=CompanyName,PostalCode desc`.</span></span>  
  
<a name="projection"></a>   
### <a name="projection"></a><span data-ttu-id="ef889-146">Projection</span><span class="sxs-lookup"><span data-stu-id="ef889-146">Projection</span></span>  
 <span data-ttu-id="ef889-147">Les exemples suivants illustrent des requêtes équivalentes qui projettent les données retournées dans le type plus restreint `CustomerAddress`.</span><span class="sxs-lookup"><span data-stu-id="ef889-147">The following examples show equivalent queries that project returned data into the narrower `CustomerAddress` type:</span></span>  
  
- <span data-ttu-id="ef889-148">Utilisation de la syntaxe de requête LINQ :</span><span class="sxs-lookup"><span data-stu-id="ef889-148">Using LINQ query syntax:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqSelectClauseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqselectclausespecific)]      
[!code-vb[Astoria Northwind Client#LinqSelectClauseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqselectclausespecific)]         
  
- <span data-ttu-id="ef889-149">Utilisation des méthodes de requête LINQ :</span><span class="sxs-lookup"><span data-stu-id="ef889-149">Using LINQ query methods:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqSelectMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqselectmethodspecific)]      
[!code-vb[Astoria Northwind Client#LinqSelectMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqselectmethodspecific)]         

> [!NOTE]
> <span data-ttu-id="ef889-150">L'option de requête `$select` ne peut pas être ajoutée à un URI de requête à l'aide de la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>.</span><span class="sxs-lookup"><span data-stu-id="ef889-150">The `$select` query option cannot be added to a query URI by using the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method.</span></span> <span data-ttu-id="ef889-151">Nous vous recommandons d'utiliser la méthode LINQ <xref:System.Linq.Enumerable.Select%2A> pour que le client génère l'option de requête `$select` dans l'URI de requête.</span><span class="sxs-lookup"><span data-stu-id="ef889-151">We recommend that you use the LINQ <xref:System.Linq.Enumerable.Select%2A> method to have the client generate the `$select` query option in the request URI.</span></span>  
  
 <span data-ttu-id="ef889-152">Les deux exemples précédents sont traduits dans l'URI de requête : `"http://localhost:12345/northwind.svc/Customers()?$filter=Country eq 'GerGerm'&$select=CustomerID,Address,City,Region,PostalCode,Country"`.</span><span class="sxs-lookup"><span data-stu-id="ef889-152">Both of the previous examples are translated to the query URI: `"http://localhost:12345/northwind.svc/Customers()?$filter=Country eq 'GerGerm'&$select=CustomerID,Address,City,Region,PostalCode,Country"`.</span></span>  
  
<a name="paging"></a>   
### <a name="client-paging"></a><span data-ttu-id="ef889-153">Pagination du client</span><span class="sxs-lookup"><span data-stu-id="ef889-153">Client Paging</span></span>  
 <span data-ttu-id="ef889-154">Les exemples suivants illustrent des requêtes équivalentes qui génèrent une page d'entités de commande triées incluant 25 commandes, en ignorant les 50 premières commandes :</span><span class="sxs-lookup"><span data-stu-id="ef889-154">The following examples show equivalent queries that request a page of sorted order entities that includes 25 orders, skipping the first 50 orders:</span></span>  
  
- <span data-ttu-id="ef889-155">Application des méthodes de requête à une requête LINQ :</span><span class="sxs-lookup"><span data-stu-id="ef889-155">Applying query methods to a LINQ query:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqSkipTakeMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqskiptakemethodspecific)]      
[!code-vb[Astoria Northwind Client#LinqSkipTakeMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqskiptakemethodspecific)]     
  
- <span data-ttu-id="ef889-156">Options de chaîne de requête d'URI `$skip` et `$top` :</span><span class="sxs-lookup"><span data-stu-id="ef889-156">URI query string `$skip` and `$top` options):</span></span>  
  
[!code-csharp[Astoria Northwind Client#ExplicitQuerySkipTakeMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#explicitqueryskiptakemethodspecific)]      
[!code-vb[Astoria Northwind Client#ExplicitQuerySkipTakeMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#explicitqueryskiptakemethodspecific)]     
  
 <span data-ttu-id="ef889-157">Les deux exemples précédents sont traduits dans l'URI de requête : `http://localhost:12345/northwind.svc/Orders()?$orderby=OrderDate desc&$skip=50&$top=25`.</span><span class="sxs-lookup"><span data-stu-id="ef889-157">Both of the previous examples are translated to the query URI: `http://localhost:12345/northwind.svc/Orders()?$orderby=OrderDate desc&$skip=50&$top=25`.</span></span>  
  
<a name="expand"></a>   
### <a name="expand"></a><span data-ttu-id="ef889-158">Expand</span><span class="sxs-lookup"><span data-stu-id="ef889-158">Expand</span></span>  
 <span data-ttu-id="ef889-159">Lorsque vous interrogez un service de données OData, vous pouvez demander que les entités associées à l’entité ciblée par la requête soient incluses dans le flux retourné.</span><span class="sxs-lookup"><span data-stu-id="ef889-159">When you query an OData data service, you can request that entities related to the entity targeted by the query be included the returned feed.</span></span> <span data-ttu-id="ef889-160">La méthode <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> est appelée sur la <xref:System.Data.Services.Client.DataServiceQuery%601> pour l'ensemble d'entités ciblé par la requête LINQ, avec le nom de l'ensemble d'entités relatif fourni sous la forme de paramètre `path`.</span><span class="sxs-lookup"><span data-stu-id="ef889-160">The <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method is called on the <xref:System.Data.Services.Client.DataServiceQuery%601> for the entity set targeted by the LINQ query, with the related entity set name supplied as the `path` parameter.</span></span> <span data-ttu-id="ef889-161">Pour plus d’informations, consultez chargement d’un [contenu différé](loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ef889-161">For more information, see [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="ef889-162">Les exemples suivants illustrent les différentes façons d'utiliser la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> dans une requête :</span><span class="sxs-lookup"><span data-stu-id="ef889-162">The following examples show equivalent ways to use the <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method in a query:</span></span>  
  
- <span data-ttu-id="ef889-163">Dans la syntaxe de requête LINQ :</span><span class="sxs-lookup"><span data-stu-id="ef889-163">In LINQ query syntax:</span></span>  
  
[!code-csharp[Astoria Northwind Client#LinqQueryExpandSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqqueryexpandspecific)]      
[!code-vb[Astoria Northwind Client#LinqQueryExpandSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqqueryexpandspecific)]  
  
- <span data-ttu-id="ef889-164">Avec les méthodes de requête LINQ :</span><span class="sxs-lookup"><span data-stu-id="ef889-164">With LINQ query methods:</span></span>  

[!code-csharp[Astoria Northwind Client#LinqQueryExpandMethodSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqqueryexpandmethodspecific)]       
[!code-vb[Astoria Northwind Client#LinqQueryExpandMethodSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqqueryexpandmethodspecific)]       

 <span data-ttu-id="ef889-165">Les deux exemples précédents sont traduits dans l'URI de requête : `http://localhost:12345/northwind.svc/Orders()?$filter=CustomerID eq 'ALFKI'&$expand=Order_Details`.</span><span class="sxs-lookup"><span data-stu-id="ef889-165">Both of the previous examples are translated to the query URI: `http://localhost:12345/northwind.svc/Orders()?$filter=CustomerID eq 'ALFKI'&$expand=Order_Details`.</span></span>  
  
<a name="unsupportedMethods"></a>   
## <a name="unsupported-linq-methods"></a><span data-ttu-id="ef889-166">Méthodes LINQ non prises en charge</span><span class="sxs-lookup"><span data-stu-id="ef889-166">Unsupported LINQ Methods</span></span>  
 <span data-ttu-id="ef889-167">Le tableau suivant contient les classes des méthodes LINQ qui ne sont pas prises en charge et ne peuvent pas être incluses dans une requête exécutée sur un service OData :</span><span class="sxs-lookup"><span data-stu-id="ef889-167">The following table contains the classes of LINQ methods are not supported and cannot be included in a query executed against an OData service:</span></span>  
  
|<span data-ttu-id="ef889-168">Type d'opération</span><span class="sxs-lookup"><span data-stu-id="ef889-168">Operation Type</span></span>|<span data-ttu-id="ef889-169">Méthode non prise en charge</span><span class="sxs-lookup"><span data-stu-id="ef889-169">Unsupported Method</span></span>|  
|--------------------|------------------------|  
|<span data-ttu-id="ef889-170">Opérateurs de jeu</span><span class="sxs-lookup"><span data-stu-id="ef889-170">Set operators</span></span>|<span data-ttu-id="ef889-171">Aucun opérateur de jeu n'est pris en charge sur un <xref:System.Data.Services.Client.DataServiceQuery%601>, impliquant ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="ef889-171">All set operators are unsupported against a <xref:System.Data.Services.Client.DataServiceQuery%601>, which included the following:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.All%2A><br />-   <xref:System.Linq.Enumerable.Any%2A><br />-   <xref:System.Linq.Enumerable.Concat%2A><br />-   <xref:System.Linq.Enumerable.DefaultIfEmpty%2A><br />-   <xref:System.Linq.Enumerable.Distinct%2A><br />-   <xref:System.Linq.Enumerable.Except%2A><br />-   <xref:System.Linq.Enumerable.Intersect%2A><br />-   <xref:System.Linq.Enumerable.Union%2A><br />-   <xref:System.Linq.Enumerable.Zip%2A>|  
|<span data-ttu-id="ef889-172">Opérations de tri</span><span class="sxs-lookup"><span data-stu-id="ef889-172">Ordering operators</span></span>|<span data-ttu-id="ef889-173">Les opérateur de tri suivants, qui nécessitent un <xref:System.Collections.Generic.IComparer%601>, ne sont pas pris en charge sur un <xref:System.Data.Services.Client.DataServiceQuery%601> :</span><span class="sxs-lookup"><span data-stu-id="ef889-173">The following ordering operators that require <xref:System.Collections.Generic.IComparer%601> are unsupported against a <xref:System.Data.Services.Client.DataServiceQuery%601>:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.OrderBy%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2C%60%601%7D%2CSystem.Collections.Generic.IComparer%7B%60%601%7D%29><br />-   <xref:System.Linq.Enumerable.OrderByDescending%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2C%60%601%7D%2CSystem.Collections.Generic.IComparer%7B%60%601%7D%29><br />-   <xref:System.Linq.Enumerable.ThenBy%60%602%28System.Linq.IOrderedEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2C%60%601%7D%2CSystem.Collections.Generic.IComparer%7B%60%601%7D%29><br />-   <xref:System.Linq.Enumerable.ThenByDescending%60%602%28System.Linq.IOrderedEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2C%60%601%7D%2CSystem.Collections.Generic.IComparer%7B%60%601%7D%29>|  
|<span data-ttu-id="ef889-174">Opérateurs de projection et de filtrage</span><span class="sxs-lookup"><span data-stu-id="ef889-174">Projection and filtering operators</span></span>|<span data-ttu-id="ef889-175">Les opérateurs de projection et de filtrage suivants, qui acceptent un argument de position, ne sont pas pris en charge sur <xref:System.Data.Services.Client.DataServiceQuery%601> :</span><span class="sxs-lookup"><span data-stu-id="ef889-175">The following projection and filtering operators that accept a positional argument are unsupported against a <xref:System.Data.Services.Client.DataServiceQuery%601>:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.Join%60%604%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Collections.Generic.IEnumerable%7B%60%601%7D%2CSystem.Func%7B%60%600%2C%60%602%7D%2CSystem.Func%7B%60%601%2C%60%602%7D%2CSystem.Func%7B%60%600%2C%60%601%2C%60%603%7D%2CSystem.Collections.Generic.IEqualityComparer%7B%60%602%7D%29><br />-   <xref:System.Linq.Enumerable.Select%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Int32%2C%60%601%7D%29><br />-   <xref:System.Linq.Enumerable.SelectMany%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Collections.Generic.IEnumerable%7B%60%601%7D%7D%29><br />-   <xref:System.Linq.Enumerable.SelectMany%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Int32%2CSystem.Collections.Generic.IEnumerable%7B%60%601%7D%7D%29><br />-   <xref:System.Linq.Enumerable.SelectMany%60%603%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Collections.Generic.IEnumerable%7B%60%601%7D%7D%2CSystem.Func%7B%60%600%2C%60%601%2C%60%602%7D%29><br />-   <xref:System.Linq.Enumerable.SelectMany%60%603%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Int32%2CSystem.Collections.Generic.IEnumerable%7B%60%601%7D%7D%2CSystem.Func%7B%60%600%2C%60%601%2C%60%602%7D%29><br />-   <xref:System.Linq.Enumerable.Where%60%601%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%600%2CSystem.Int32%2CSystem.Boolean%7D%29>|  
|<span data-ttu-id="ef889-176">Opérateurs de regroupement</span><span class="sxs-lookup"><span data-stu-id="ef889-176">Grouping operators</span></span>|<span data-ttu-id="ef889-177">Aucun opérateur de groupement n'est pris en charge sur un <xref:System.Data.Services.Client.DataServiceQuery%601>, impliquant ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="ef889-177">All grouping operators are unsupported against a <xref:System.Data.Services.Client.DataServiceQuery%601>, including the following:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.GroupBy%2A><br />-   <xref:System.Linq.Enumerable.GroupJoin%2A><br /><br /> <span data-ttu-id="ef889-178">Les opérations de groupement doivent être exécutées sur le client.</span><span class="sxs-lookup"><span data-stu-id="ef889-178">Grouping operations must be performed on the client.</span></span>|  
|<span data-ttu-id="ef889-179">Opérateurs d'agrégation</span><span class="sxs-lookup"><span data-stu-id="ef889-179">Aggregate operators</span></span>|<span data-ttu-id="ef889-180">Aucune opération d'agrégation n'est prise en charge sur un <xref:System.Data.Services.Client.DataServiceQuery%601>, impliquant ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="ef889-180">All aggregate operations are unsupported against a <xref:System.Data.Services.Client.DataServiceQuery%601>, including the following:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.Aggregate%2A><br />-   <xref:System.Linq.Enumerable.Average%2A><br />-   <xref:System.Linq.Enumerable.Count%2A><br />-   <xref:System.Linq.Enumerable.LongCount%2A><br />-   <xref:System.Linq.Enumerable.Max%2A><br />-   <xref:System.Linq.Enumerable.Min%2A><br />-   <xref:System.Linq.Enumerable.Sum%2A><br /><br /> <span data-ttu-id="ef889-181">Les opérations d'agrégation doivent soit être exécutées sur le client, soit être encapsulées par une opération de service.</span><span class="sxs-lookup"><span data-stu-id="ef889-181">Aggregate operations must either be performed on the client or be encapsulated by a service operation.</span></span>|  
|<span data-ttu-id="ef889-182">Opérateurs de pagination</span><span class="sxs-lookup"><span data-stu-id="ef889-182">Paging operators</span></span>|<span data-ttu-id="ef889-183">Les opérateur de pagination suivants ne sont pas pris en charge sur un <xref:System.Data.Services.Client.DataServiceQuery%601> :</span><span class="sxs-lookup"><span data-stu-id="ef889-183">The following paging operators are not supported against a <xref:System.Data.Services.Client.DataServiceQuery%601>:</span></span><br /><br /> -   <xref:System.Linq.Enumerable.ElementAt%2A><br />-   <xref:System.Linq.Enumerable.Last%2A><br />-   <xref:System.Linq.Enumerable.LastOrDefault%2A><br />-   <xref:System.Linq.Enumerable.SkipWhile%2A><br />-   <xref:System.Linq.Enumerable.TakeWhile%2A><br/><br/><span data-ttu-id="ef889-184">**Remarque :**  Les opérateurs de pagination qui sont exécutés sur une séquence vide retournent la valeur null.</span><span class="sxs-lookup"><span data-stu-id="ef889-184">**Note:**  Paging operators that are executed on an empty sequence return null.</span></span>|  
|<span data-ttu-id="ef889-185">Autres opérateurs</span><span class="sxs-lookup"><span data-stu-id="ef889-185">Other operators</span></span>|<span data-ttu-id="ef889-186">Les opérateurs suivants ne sont pas non plus pris en charge sur un <xref:System.Data.Services.Client.DataServiceQuery%601>:</span><span class="sxs-lookup"><span data-stu-id="ef889-186">The following operators are also not supported against a <xref:System.Data.Services.Client.DataServiceQuery%601>:</span></span><br /><br /> - <xref:System.Linq.Enumerable.Empty%2A><br />- <xref:System.Linq.Enumerable.Range%2A><br />- <xref:System.Linq.Enumerable.Repeat%2A><br />- <xref:System.Linq.Enumerable.ToDictionary%2A><br />- <xref:System.Linq.Enumerable.ToLookup%2A>|  
  
<a name="supportedExpressions"></a>   
## <a name="supported-expression-functions"></a><span data-ttu-id="ef889-187">Fonctions d'expression prises en charge</span><span class="sxs-lookup"><span data-stu-id="ef889-187">Supported Expression Functions</span></span>  
 <span data-ttu-id="ef889-188">Les méthodes et propriétés CLR (Common-Language Runtime) suivantes sont prises en charge, car elles peuvent être traduites dans une expression de requête pour être incluses dans l’URI de la demande à un service OData :</span><span class="sxs-lookup"><span data-stu-id="ef889-188">The following common-language runtime (CLR) methods and properties are supported because they can be translated in a query expression for inclusion in the request URI to an OData service:</span></span>  
  
|<span data-ttu-id="ef889-189">Membre <xref:System.String></span><span class="sxs-lookup"><span data-stu-id="ef889-189"><xref:System.String> Member</span></span>|<span data-ttu-id="ef889-190">Fonction OData prise en charge</span><span class="sxs-lookup"><span data-stu-id="ef889-190">Supported OData Function</span></span>|  
|-----------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|  
|<xref:System.String.Concat%28System.String%2CSystem.String%29>|`string concat(string p0, string p1)`|  
|<xref:System.String.Contains%28System.String%29>|`bool substringof(string p0, string p1)`|  
|<xref:System.String.EndsWith%28System.String%29>|`bool endswith(string p0, string p1)`|  
|<xref:System.String.IndexOf%28System.String%2CSystem.Int32%29>|`int indexof(string p0, string p1)`|  
|<xref:System.String.Length>|`int length(string p0)`|  
|<xref:System.String.Replace%28System.String%2CSystem.String%29>|`string replace(string p0, string find, string replace)`|  
|<xref:System.String.Substring%28System.Int32%29>|`string substring(string p0, int pos)`|  
|<xref:System.String.Substring%28System.Int32%2CSystem.Int32%29>|`string substring(string p0, int pos, int length)`|  
|<xref:System.String.ToLower>|`string tolower(string p0)`|  
|<xref:System.String.ToUpper>|`string toupper(string p0)`|  
|<xref:System.String.Trim>|`string trim(string p0)`|  
  
|<span data-ttu-id="ef889-191"><xref:System.DateTime> membre<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="ef889-191"><xref:System.DateTime> Member<sup>1</sup></span></span>|<span data-ttu-id="ef889-192">Fonction OData prise en charge</span><span class="sxs-lookup"><span data-stu-id="ef889-192">Supported OData Function</span></span>|  
|-------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|  
|<xref:System.DateTime.Day>|`int day(DateTime p0)`|  
|<xref:System.DateTime.Hour>|`int hour(DateTime p0)`|  
|<xref:System.DateTime.Minute>|`int minute(DateTime p0)`|  
|<xref:System.DateTime.Month>|`int month(DateTime p0)`|  
|<xref:System.DateTime.Second>|`int second(DateTime p0)`|  
|<xref:System.DateTime.Year>|`int year(DateTime p0)`|  
  
 <span data-ttu-id="ef889-193"><sup>1</sup> Les propriétés de date et d’heure équivalentes de <xref:Microsoft.VisualBasic.DateAndTime?displayProperty=nameWithType> et la méthode <xref:Microsoft.VisualBasic.DateAndTime.DatePart%2A> dans Visual Basic sont également prises en charge.</span><span class="sxs-lookup"><span data-stu-id="ef889-193"><sup>1</sup>The equivalent date and time properties of <xref:Microsoft.VisualBasic.DateAndTime?displayProperty=nameWithType> and the <xref:Microsoft.VisualBasic.DateAndTime.DatePart%2A> method in Visual Basic are also supported.</span></span>  
  
|<span data-ttu-id="ef889-194">Membre <xref:System.Math></span><span class="sxs-lookup"><span data-stu-id="ef889-194"><xref:System.Math> Member</span></span>|<span data-ttu-id="ef889-195">Fonction OData prise en charge</span><span class="sxs-lookup"><span data-stu-id="ef889-195">Supported OData Function</span></span>|  
|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|  
|<xref:System.Math.Ceiling%28System.Decimal%29>|`decimal ceiling(decimal p0)`|  
|<xref:System.Math.Ceiling%28System.Double%29>|`double ceiling(double p0)`|  
|<xref:System.Math.Floor%28System.Decimal%29>|`decimal floor(decimal p0)`|  
|<xref:System.Math.Floor%28System.Double%29>|`double floor(double p0)`|  
|<xref:System.Math.Round%28System.Decimal%29>|`decimal round(decimal p0)`|  
|<xref:System.Math.Round%28System.Double%29>|`double round(double p0)`|  
  
|<span data-ttu-id="ef889-196">Membre <xref:System.Linq.Expressions.Expression></span><span class="sxs-lookup"><span data-stu-id="ef889-196"><xref:System.Linq.Expressions.Expression> Member</span></span>|<span data-ttu-id="ef889-197">Fonction OData prise en charge</span><span class="sxs-lookup"><span data-stu-id="ef889-197">Supported OData Function</span></span>|  
|---------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|  
|<xref:System.Linq.Expressions.Expression.TypeIs%28System.Linq.Expressions.Expression%2CSystem.Type%29>|`bool isof(type p0)`|  
  
 <span data-ttu-id="ef889-198">Le client peut également être en mesure d'évaluer les fonctions CLR supplémentaires sur le client.</span><span class="sxs-lookup"><span data-stu-id="ef889-198">The client may also be able to evaluate additional CLR functions on the client.</span></span> <span data-ttu-id="ef889-199">Une exception <xref:System.NotSupportedException> est levée pour toute expression qui ne peut pas être évaluée sur le client ou traduite dans un URI de requête valide pour l'évaluation sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="ef889-199">A <xref:System.NotSupportedException> is raised for any expression that cannot be evaluated on the client and cannot be translated into a valid request URI for evaluation on the server.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ef889-200">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ef889-200">See also</span></span>

- [<span data-ttu-id="ef889-201">Interrogation du service de données</span><span class="sxs-lookup"><span data-stu-id="ef889-201">Querying the Data Service</span></span>](querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="ef889-202">Projections de requête</span><span class="sxs-lookup"><span data-stu-id="ef889-202">Query Projections</span></span>](query-projections-wcf-data-services.md)
- [<span data-ttu-id="ef889-203">Matérialisation d’objet</span><span class="sxs-lookup"><span data-stu-id="ef889-203">Object Materialization</span></span>](object-materialization-wcf-data-services.md)
- [<span data-ttu-id="ef889-204">OData : conventions d’URI</span><span class="sxs-lookup"><span data-stu-id="ef889-204">OData: URI Conventions</span></span>](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/)
