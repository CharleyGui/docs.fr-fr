---
title: Mise à jour du service de données (services de données WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, changing data
- WCF Data Services, client library
ms.assetid: 00d993be-ffed-4dea-baf7-6eea982cdb54
ms.openlocfilehash: 4b351b2a69d2829b67c80839f3257fa8e218b55d
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64660639"
---
# <a name="updating-the-data-service-wcf-data-services"></a><span data-ttu-id="cb424-102">Mise à jour du service de données (services de données WCF)</span><span class="sxs-lookup"><span data-stu-id="cb424-102">Updating the Data Service (WCF Data Services)</span></span>
<span data-ttu-id="cb424-103">Lorsque vous utilisez le [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] bibliothèque cliente pour consommer un [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] flux, la bibliothèque traduit les entrées dans le flux en instances des classes de service de données client.</span><span class="sxs-lookup"><span data-stu-id="cb424-103">When you use the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed, the library translates the entries in the feed into instances of client data service classes.</span></span> <span data-ttu-id="cb424-104">Ces classes de service de données sont suivies à l'aide de l'objet <xref:System.Data.Services.Client.DataServiceContext> auquel <xref:System.Data.Services.Client.DataServiceQuery%601> appartient.</span><span class="sxs-lookup"><span data-stu-id="cb424-104">These data service classes are tracked by using the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span> <span data-ttu-id="cb424-105">Le client suit les modifications apportées aux entités que vous signalez à l'aide des méthodes sur <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="cb424-105">The client tracks changes to entities that you report by using methods on <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="cb424-106">Ces méthodes permettent au client de suivre les entités ajoutées et supprimées, ainsi que les modifications que vous apportez aux valeurs de propriété ou aux relations entre les instances d'entités.</span><span class="sxs-lookup"><span data-stu-id="cb424-106">These methods enable the client to track added and deleted entities and also changes that you make to property values or to relationships between entity instances.</span></span> <span data-ttu-id="cb424-107">Ces modifications suivies sont renvoyées au service de données sous forme d'opérations REST lorsque vous appelez la méthode <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="cb424-107">Those tracked changes are sent back to the data service as REST-based operations when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="cb424-108">Lorsque vous utilisez une instance de <xref:System.Data.Services.Client.DataServiceCollection%601> pour lier des données et des contrôles, les modifications apportées aux données dans le contrôle lié sont automatiquement signalées à l'objet <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="cb424-108">When you use an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> to bind data to controls, changes made to data in the bound control are automatically reported to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="cb424-109">Pour plus d’informations, consultez [liaison de données aux contrôles](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="cb424-109">For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span></span>  
  
## <a name="adding-modifying-and-changing-entities"></a><span data-ttu-id="cb424-110">Ajout, modification et changement d'entités</span><span class="sxs-lookup"><span data-stu-id="cb424-110">Adding, Modifying, and Changing Entities</span></span>  
 <span data-ttu-id="cb424-111">Lorsque vous utilisez le **ajouter une référence de Service** boîte de dialogue dans Visual Studio pour ajouter une référence à un [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] flux, les client data service classes résultantes ont chacune statique *créer* méthode qui prend un paramètre pour chaque propriété d’entité non nullable.</span><span class="sxs-lookup"><span data-stu-id="cb424-111">When you use the **Add Service Reference** dialog in Visual Studio to add a reference to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed, the resulting client data service classes each have a static *Create* method that takes one parameter for each non-nullable entity property.</span></span> <span data-ttu-id="cb424-112">Vous pouvez utiliser cette méthode pour créer des instances de classes de type d'entité, comme dans l'exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="cb424-112">You can use this method to create instances of entity type classes, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#createnewproduct)]
 [!code-vb[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#createnewproduct)]  
  
 <span data-ttu-id="cb424-113">Pour ajouter une instance d’entité, appelez la *AddTo* méthode sur le <xref:System.Data.Services.Client.DataServiceContext> classe générée par le **ajouter une référence de Service** boîte de dialogue, comme dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="cb424-113">To add an entity instance, call the appropriate *AddTo* method on the <xref:System.Data.Services.Client.DataServiceContext> class generated by the **Add Service Reference** dialog box, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addproductspecific)]
 [!code-vb[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addproductspecific)]  
  
 <span data-ttu-id="cb424-114">Cela ajoute l'objet au contexte et au jeu correct d'entités.</span><span class="sxs-lookup"><span data-stu-id="cb424-114">This adds the object to the context and into the correct entity set.</span></span> <span data-ttu-id="cb424-115">Vous pouvez également appeler <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, mais vous devez fournir à la place le nom de jeu d'entités.</span><span class="sxs-lookup"><span data-stu-id="cb424-115">You can also call <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, but you must instead supply the entity set name.</span></span> <span data-ttu-id="cb424-116">Si l'entité ajoutée possède une ou plusieurs relations à d'autres entités, vous pouvez utiliser la méthode <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> ou l'une des méthodes précédentes et définir aussi explicitement ces liens.</span><span class="sxs-lookup"><span data-stu-id="cb424-116">If the added entity has one or more relationships to other entities, you can either use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method or use one of the previous methods and also explicitly define those links.</span></span> <span data-ttu-id="cb424-117">Ces opérations sont traitées plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="cb424-117">These operations are discussed later in this topic.</span></span>  
  
 <span data-ttu-id="cb424-118">Pour modifier une instance d'entité existante, recherchez tout d'abord cette entité, apportez les modifications souhaitées à ses propriétés, puis appelez la méthode <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> sur <xref:System.Data.Services.Client.DataServiceContext> pour indiquer à la bibliothèque cliente qu'elle doit envoyer une mise à jour de cet objet, comme illustré dans cet exemple :</span><span class="sxs-lookup"><span data-stu-id="cb424-118">To modify an existing entity instance, first query for that entity, make the desired changes to its properties, and then call the <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> to indicate to the client library that it needs to send an update for that object, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#modifycustomerspecific)]
 [!code-vb[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#modifycustomerspecific)]  
  
 <span data-ttu-id="cb424-119">Pour supprimer une instance d'entité, appelez la méthode <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> sur <xref:System.Data.Services.Client.DataServiceContext>, comme illustré dans l'exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="cb424-119">To delete an entity instance, call the <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext>, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#deleteproductspecific)]
 [!code-vb[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#deleteproductspecific)]  
  
 <span data-ttu-id="cb424-120">Pour plus d'informations, voir [Procédure : Ajouter, modifier et supprimer des entités](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="cb424-120">For more information, see [How to: Add, Modify, and Delete Entities](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md).</span></span>  
  
## <a name="attaching-entities"></a><span data-ttu-id="cb424-121">Attachement d'entités</span><span class="sxs-lookup"><span data-stu-id="cb424-121">Attaching Entities</span></span>  
 <span data-ttu-id="cb424-122">La bibliothèque cliente vous permet d'enregistrer des mises à jour apportées à une entité sans exécuter en premier une requête pour charger l'entité dans <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="cb424-122">The client library enables you to save updates that you made to an entity without first executing a query to load the entity into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="cb424-123">Utilisez la méthode <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> pour joindre un objet existant à un jeu d'entités spécifique dans <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="cb424-123">Use the <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> method to attach an existing object to a specific entity set in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="cb424-124">Vous pouvez modifier ensuite l'objet et enregistrer les modifications apportées au service de données.</span><span class="sxs-lookup"><span data-stu-id="cb424-124">You can then modify the object and save the changes to the data service.</span></span> <span data-ttu-id="cb424-125">Dans l'exemple suivant, un objet client été modifié et joint au contexte, puis <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> est appelé pour marquer l'objet attaché comme <xref:System.Data.Services.Client.EntityStates.Modified> avant l'appel de <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> :</span><span class="sxs-lookup"><span data-stu-id="cb424-125">In the following example, a customer object that has been changed is attached to the context and then <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> is called to mark the attached object as <xref:System.Data.Services.Client.EntityStates.Modified> before <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#attachobjectspecific)]
 [!code-vb[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#attachobjectspecific)]  
  
 <span data-ttu-id="cb424-126">Vous devez tenir compte des points suivants lors de l'attachement d'objets :</span><span class="sxs-lookup"><span data-stu-id="cb424-126">The following considerations apply when attaching objects:</span></span>  
  
- <span data-ttu-id="cb424-127">Un objet est joint dans l'état <xref:System.Data.Services.Client.EntityStates.Unchanged>.</span><span class="sxs-lookup"><span data-stu-id="cb424-127">An object is attached in the <xref:System.Data.Services.Client.EntityStates.Unchanged> state.</span></span>  
  
- <span data-ttu-id="cb424-128">Lorsqu'un objet est joint, les objets associés à l'objet joint ne sont pas non plus joints.</span><span class="sxs-lookup"><span data-stu-id="cb424-128">When an object is attached, objects that are related to the attached object are not also attached.</span></span>  
  
- <span data-ttu-id="cb424-129">Un objet ne peut pas être joint si l'entité fait déjà l'objet d'un suivi par le contexte.</span><span class="sxs-lookup"><span data-stu-id="cb424-129">An object cannot be attached if the entity is already being tracked by the context.</span></span>  
  
- <span data-ttu-id="cb424-130">La surcharge de méthode <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> qui utilise un paramètre `etag` est utilisée lorsque vous attachez un objet entité ayant été reçu avec une valeur eTag.</span><span class="sxs-lookup"><span data-stu-id="cb424-130">The <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> method overload that takes an `etag` parameter is used when you attach an entity object that was received along with an eTag value.</span></span> <span data-ttu-id="cb424-131">Cette valeur eTag est ensuite utilisée pour vérifier l'accès concurrentiel lorsque les modifications apportées à l'objet attaché sont enregistrées.</span><span class="sxs-lookup"><span data-stu-id="cb424-131">This eTag value is then used to check for concurrency when changes to the attached object are saved.</span></span>  
  
 <span data-ttu-id="cb424-132">Pour plus d'informations, voir [Procédure : Attacher une entité existante au DataServiceContext](../../../../docs/framework/data/wcf/attach-an-existing-entity-to-dc-wcf-data.md).</span><span class="sxs-lookup"><span data-stu-id="cb424-132">For more information, see [How to: Attach an Existing Entity to the DataServiceContext](../../../../docs/framework/data/wcf/attach-an-existing-entity-to-dc-wcf-data.md).</span></span>  
  
## <a name="creating-and-modifying-relationship-links"></a><span data-ttu-id="cb424-133">Création et modification des liens de relation</span><span class="sxs-lookup"><span data-stu-id="cb424-133">Creating and Modifying Relationship Links</span></span>  
 <span data-ttu-id="cb424-134">Lorsque vous ajoutez une nouvelle entité à l’aide la <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> approprié ou méthode *AddTo* méthode de la <xref:System.Data.Services.Client.DataServiceContext> qui classe le **ajouter une référence de Service** génère de la boîte de dialogue, toutes les relations entre la nouvelle entité et les entités associées ne sont pas définies automatiquement.</span><span class="sxs-lookup"><span data-stu-id="cb424-134">When you add a new entity by using either the <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> method or the appropriate *AddTo* method of the <xref:System.Data.Services.Client.DataServiceContext> class that the **Add Service Reference** dialog generates, any relationships between the new entity and related entities are not automatically defined.</span></span>  
  
 <span data-ttu-id="cb424-135">Vous pouvez créer et modifier les relations entre des instances d'entité et faire répercuter par la bibliothèque cliente ces modifications dans le service de données.</span><span class="sxs-lookup"><span data-stu-id="cb424-135">You can create and change relationships between entity instances and have the client library reflect those changes in the data service.</span></span> <span data-ttu-id="cb424-136">Les relations entre les entités sont définies comme des associations dans le modèle, et <xref:System.Data.Services.Client.DataServiceContext> suit chaque relation comme un objet de lien dans le contexte.</span><span class="sxs-lookup"><span data-stu-id="cb424-136">Relationships between entities are defined as associations in the model, and the <xref:System.Data.Services.Client.DataServiceContext> tracks each relationship as a link object in the context.</span></span> [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="cb424-137">fournit les méthodes suivantes sur la <xref:System.Data.Services.Client.DataServiceContext> classe à créer, modifier et supprimer ces liens :</span><span class="sxs-lookup"><span data-stu-id="cb424-137">provides the following methods on the <xref:System.Data.Services.Client.DataServiceContext> class to create, modify, and delete these links:</span></span>  
  
|<span data-ttu-id="cb424-138">Méthode</span><span class="sxs-lookup"><span data-stu-id="cb424-138">Method</span></span>|<span data-ttu-id="cb424-139">Description</span><span class="sxs-lookup"><span data-stu-id="cb424-139">Description</span></span>|  
|------------|-----------------|  
|<xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A>|<span data-ttu-id="cb424-140">Crée un lien entre deux objets entité connexes.</span><span class="sxs-lookup"><span data-stu-id="cb424-140">Creates a new link between two related entity objects.</span></span> <span data-ttu-id="cb424-141">L'appel de cette méthode revient à appeler <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> et <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> pour créer le nouvel objet et définir la relation avec un objet existant.</span><span class="sxs-lookup"><span data-stu-id="cb424-141">Calling this method is equivalent to calling <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> and <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> to both create the new object and define the relationship to an existing object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>|<span data-ttu-id="cb424-142">Crée un lien entre deux objets entité connexes.</span><span class="sxs-lookup"><span data-stu-id="cb424-142">Creates a new link between two related entity objects.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>|<span data-ttu-id="cb424-143">Met à jour un lien existant entre deux objets entité associés.</span><span class="sxs-lookup"><span data-stu-id="cb424-143">Updates an existing link between two related entity objects.</span></span> <span data-ttu-id="cb424-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> est également utilisé pour supprimer des liens avec une cardinalité de zéro-ou-un (`0..1:1`) et un-à-un (`1:1`).</span><span class="sxs-lookup"><span data-stu-id="cb424-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> is also used to delete links with a cardinality of zero-or-one-to-one (`0..1:1`) and one-to-one (`1:1`).</span></span> <span data-ttu-id="cb424-145">Pour ce faire, vous pouvez définir l'objet lié sur `null`.</span><span class="sxs-lookup"><span data-stu-id="cb424-145">You can do this by setting the related object to `null`.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DeleteLink%2A>|<span data-ttu-id="cb424-146">Marque un lien que le contexte suit pour la suppression lorsque la méthode <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> est appelée.</span><span class="sxs-lookup"><span data-stu-id="cb424-146">Marks a link that the context is tracking for deletion when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called.</span></span> <span data-ttu-id="cb424-147">Utilisez cette méthode lorsque vous supprimez un objet connexe ou modifiez une relation en supprimant en premier le lien vers un objet existant et en ajoutant ensuite un lien au nouvel objet connexe.</span><span class="sxs-lookup"><span data-stu-id="cb424-147">Use this method when you delete a related object or change a relationship by first deleting the link to an existing object and then adding a link to the new related object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AttachLink%2A>|<span data-ttu-id="cb424-148">Notifie le contexte d'un lien existant entre deux objets entité.</span><span class="sxs-lookup"><span data-stu-id="cb424-148">Notifies the context of an existing link between two entity objects.</span></span> <span data-ttu-id="cb424-149">Le contexte suppose que cette relation existe déjà dans le service de données et ne cherche pas à créer le lien lorsque vous appelez la méthode <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="cb424-149">The context assumes that this relationship already exists in the data service and does not try to create the link when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span> <span data-ttu-id="cb424-150">Utilisez cette méthode lorsque vous joignez des objets à un contexte et devez joindre également le lien entre les deux.</span><span class="sxs-lookup"><span data-stu-id="cb424-150">Use this method when you attach objects to a context and need to also attach the link between the two.</span></span> <span data-ttu-id="cb424-151">Si vous définissez une nouvelle relation, vous devez utiliser à la place <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span><span class="sxs-lookup"><span data-stu-id="cb424-151">If you are defining a new relationship, you should instead use <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DetachLink%2A>|<span data-ttu-id="cb424-152">Arrête le suivi du lien spécifié dans le contexte.</span><span class="sxs-lookup"><span data-stu-id="cb424-152">Stops tracking the specified link in the context.</span></span> <span data-ttu-id="cb424-153">Cette méthode est utilisée pour supprimer les relations un-à-plusieurs (`*:*`).</span><span class="sxs-lookup"><span data-stu-id="cb424-153">This method is used to delete one-to-many (`*:*`) relationships.</span></span> <span data-ttu-id="cb424-154">Pour les liens de relation avec une cardinalité de un, vous devez utiliser <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> à la place.</span><span class="sxs-lookup"><span data-stu-id="cb424-154">For relationship links with a cardinality of one, you must instead use <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span></span>|  
  
 <span data-ttu-id="cb424-155">L'exemple suivant montre comment utiliser la méthode <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> pour ajouter un nouveau `Order_Detail` associé à une entité `Orders` existante.</span><span class="sxs-lookup"><span data-stu-id="cb424-155">The following example shows how to use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method to add a new `Order_Detail` that is related to an existing `Orders` entity.</span></span> <span data-ttu-id="cb424-156">Étant donné que le nouvel objet `Order_Details` est maintenant suivi par <xref:System.Data.Services.Client.DataServiceContext>, la relation de l'objet `Order_Details` ajouté à l'entité `Products` existante est définie par l'appel de la méthode <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> :</span><span class="sxs-lookup"><span data-stu-id="cb424-156">Because the new `Order_Details` object is now tracked by the <xref:System.Data.Services.Client.DataServiceContext>, the relationship of the added `Order_Details` object to the existing `Products` entity is defined by calling the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addorderdetailtoorderspecific)]
 [!code-vb[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addorderdetailtoorderspecific)]  
  
 <span data-ttu-id="cb424-157">Si la méthode <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> définit des liens qui doivent être créés dans le service de données, pour que ces liens soient répercutés dans les objets du contexte, vous devez également définir les propriétés de navigation sur les objets eux-mêmes.</span><span class="sxs-lookup"><span data-stu-id="cb424-157">While the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method defines links that must be created in the data service, to have these links reflected in the objects that are in the context, you must also set the navigation properties on the objects themselves.</span></span> <span data-ttu-id="cb424-158">Dans l'exemple précédent, vous devez définir les propriétés de navigation comme suit :</span><span class="sxs-lookup"><span data-stu-id="cb424-158">In the previous example, you should set the navigation properties as follows:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#setnavprops)]
 [!code-vb[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#setnavprops)]  
  
 <span data-ttu-id="cb424-159">Pour plus d'informations, voir [Procédure : Définir des relations d’entité](../../../../docs/framework/data/wcf/how-to-define-entity-relationships-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="cb424-159">For more information, see [How to: Define Entity Relationships](../../../../docs/framework/data/wcf/how-to-define-entity-relationships-wcf-data-services.md).</span></span>  
  
## <a name="saving-changes"></a><span data-ttu-id="cb424-160">Enregistrement des modifications</span><span class="sxs-lookup"><span data-stu-id="cb424-160">Saving Changes</span></span>  
 <span data-ttu-id="cb424-161">Les modifications sont suivies dans l'instance <xref:System.Data.Services.Client.DataServiceContext> mais ne sont pas envoyées au serveur immédiatement.</span><span class="sxs-lookup"><span data-stu-id="cb424-161">Changes are tracked in the <xref:System.Data.Services.Client.DataServiceContext> instance but not sent to the server immediately.</span></span> <span data-ttu-id="cb424-162">Une fois que vous avez terminé d'effectuer les modifications requises pour une activité spécifiée, appelez <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> afin de soumettre toutes les modifications au service de données.</span><span class="sxs-lookup"><span data-stu-id="cb424-162">After you are finished with the required changes for a specified activity, call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> to submit all the changes to the data service.</span></span> <span data-ttu-id="cb424-163">Pour plus d’informations, consultez [gérer le contexte de Service de données](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="cb424-163">For more information, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span> <span data-ttu-id="cb424-164">Vous pouvez également enregistrer des modifications de façon asynchrone à l'aide des méthodes <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> et <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="cb424-164">You can also save changes asynchronously by using the <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> and <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A> methods.</span></span> <span data-ttu-id="cb424-165">Pour plus d’informations, consultez [opérations asynchrones](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="cb424-165">For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cb424-166">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="cb424-166">See also</span></span>

- [<span data-ttu-id="cb424-167">Bibliothèque cliente WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="cb424-167">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
- [<span data-ttu-id="cb424-168">Interrogation du service de données</span><span class="sxs-lookup"><span data-stu-id="cb424-168">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="cb424-169">Opérations asynchrones</span><span class="sxs-lookup"><span data-stu-id="cb424-169">Asynchronous Operations</span></span>](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)
- [<span data-ttu-id="cb424-170">Opérations de traitement par lots</span><span class="sxs-lookup"><span data-stu-id="cb424-170">Batching Operations</span></span>](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md)
- [<span data-ttu-id="cb424-171">Matérialisation d’objet</span><span class="sxs-lookup"><span data-stu-id="cb424-171">Object Materialization</span></span>](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md)
- [<span data-ttu-id="cb424-172">Gestion du contexte du service de données</span><span class="sxs-lookup"><span data-stu-id="cb424-172">Managing the Data Service Context</span></span>](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md)
