---
title: Opérations asynchrones (services de données WCF)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, asynchronous operations
- asynchronous operations [WCF Data Services]
- WCF Data Services, client library
ms.assetid: 679644c7-e3fc-422c-b14a-b44b683900d0
ms.openlocfilehash: 3e8d3ec46362751ea8bbfe5120e35a050d0e7a6c
ms.sourcegitcommit: 79a2d6a07ba4ed08979819666a0ee6927bbf1b01
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74569359"
---
# <a name="asynchronous-operations-wcf-data-services"></a><span data-ttu-id="bd9cf-102">Opérations asynchrones (services de données WCF)</span><span class="sxs-lookup"><span data-stu-id="bd9cf-102">Asynchronous Operations (WCF Data Services)</span></span>
<span data-ttu-id="bd9cf-103">Les applications Web doivent gérer une latence plus élevée entre le client et le serveur, comparé aux applications qui s'exécutent sur des réseaux internes.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-103">Web applications must accommodate higher latency between client and server than applications that run inside internal networks.</span></span> <span data-ttu-id="bd9cf-104">Pour optimiser les performances et l’expérience utilisateur de votre application, nous vous recommandons d’utiliser les méthodes asynchrones des <xref:System.Data.Services.Client.DataServiceContext> et des classes <xref:System.Data.Services.Client.DataServiceQuery%601> lors de l’accès aux serveurs de WCF Data Services sur le Web.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-104">To optimize the performance and user experience of your application, we recommend using the asynchronous methods of the <xref:System.Data.Services.Client.DataServiceContext> and <xref:System.Data.Services.Client.DataServiceQuery%601> classes when accessing WCF Data Services servers over the Web.</span></span>  
  
 <span data-ttu-id="bd9cf-105">Bien que les serveurs WCF Data Services traitent les requêtes HTTP de façon asynchrone, certaines méthodes des bibliothèques clientes WCF Data Services sont synchrones et attendent la fin de la totalité de l’échange requête-réponse avant de poursuivre l’exécution.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-105">Although the WCF Data Services servers process HTTP requests asynchronously, some methods of the WCF Data Services client libraries are synchronous and wait until the entire request-response exchange is completed before continuing execution.</span></span> <span data-ttu-id="bd9cf-106">Les méthodes asynchrones des bibliothèques clientes WCF Data Services n’attendent pas que cet échange se termine et peuvent permettre à votre application de gérer une interface utilisateur réactive en attendant.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-106">The asynchronous methods of the WCF Data Services client libraries do not wait for this exchange to complete and can allow your application to maintain a responsive user interface in the meantime.</span></span>  
  
 <span data-ttu-id="bd9cf-107">Vous pouvez effectuer des opérations asynchrones à l’aide d’une paire de méthodes sur les <xref:System.Data.Services.Client.DataServiceContext> et <xref:System.Data.Services.Client.DataServiceQuery%601> les classes qui commencent respectivement par *Begin* et *end* .</span><span class="sxs-lookup"><span data-stu-id="bd9cf-107">You can perform asynchronous operations by using a pair of methods on the <xref:System.Data.Services.Client.DataServiceContext> and <xref:System.Data.Services.Client.DataServiceQuery%601> classes that start with *Begin* and *End* respectively.</span></span> <span data-ttu-id="bd9cf-108">Les méthodes *Begin* inscrivent un délégué appelé par le service lorsque l’opération est terminée.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-108">The *Begin* methods register a delegate that the service calls when the operation is complete.</span></span> <span data-ttu-id="bd9cf-109">Les méthodes *end* doivent être appelées dans le délégué inscrit pour gérer le rappel des opérations terminées.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-109">The *End* methods should be called in the delegate that is registered to handle the callback from the completed operations.</span></span> <span data-ttu-id="bd9cf-110">Quand vous appelez la méthode *end* pour terminer une opération asynchrone, vous devez le faire à partir du même <xref:System.Data.Services.Client.DataServiceQuery%601> ou <xref:System.Data.Services.Client.DataServiceContext> instance que vous avez utilisé pour commencer l’opération.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-110">When you call the *End* method to complete an asynchronous operation, you must do so from the same <xref:System.Data.Services.Client.DataServiceQuery%601> or <xref:System.Data.Services.Client.DataServiceContext> instance that you used to begin the operation.</span></span> <span data-ttu-id="bd9cf-111">Chaque méthode *Begin* prend un paramètre `state` qui peut passer un objet d’État au rappel.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-111">Each *Begin* method takes a `state` parameter that can pass a state object to the callback.</span></span> <span data-ttu-id="bd9cf-112">Cet objet d’État est récupéré à partir de l' <xref:System.IAsyncResult> fourni avec le rappel et permet d’appeler la méthode *end* correspondante pour terminer l’opération asynchrone.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-112">This state object is retrieved from the <xref:System.IAsyncResult> that is supplied with the callback and is used to call the corresponding *End* method to complete the asynchronous operation.</span></span> <span data-ttu-id="bd9cf-113">Par exemple, lorsque vous fournissez l'instance <xref:System.Data.Services.Client.DataServiceQuery%601> comme paramètre `state` lorsque vous appelez la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> sur l'instance, la même instance <xref:System.Data.Services.Client.DataServiceQuery%601> est retournée par <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-113">For example, when you supply the <xref:System.Data.Services.Client.DataServiceQuery%601> instance as the `state` parameter when you call the <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> method on the instance, the same <xref:System.Data.Services.Client.DataServiceQuery%601> instance is returned by the <xref:System.IAsyncResult>.</span></span> <span data-ttu-id="bd9cf-114">Puis cette instance de <xref:System.Data.Services.Client.DataServiceQuery%601> est utilisée pour appeler la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.EndExecute%2A> pour terminer l'opération de requête.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-114">This instance of <xref:System.Data.Services.Client.DataServiceQuery%601> is then used to call the <xref:System.Data.Services.Client.DataServiceQuery%601.EndExecute%2A> method to complete the query operation.</span></span> <span data-ttu-id="bd9cf-115">Pour plus d’informations, consultez [Comment : exécuter des requêtes de service de données asynchrones](how-to-execute-asynchronous-data-service-queries-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bd9cf-115">For more information, see [How to: Execute Asynchronous Data Service Queries](how-to-execute-asynchronous-data-service-queries-wcf-data-services.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="bd9cf-116">Seules les opérations asynchrones sont prises en charge par les bibliothèques clientes fournies dans le .NET Framework pour Silverlight.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-116">Only asynchronous operations are supported by the client libraries that are provided in the .NET Framework for Silverlight.</span></span> <span data-ttu-id="bd9cf-117">Pour plus d’informations, consultez [WCF Data Services (Silverlight)](https://go.microsoft.com/fwlink/?LinkID=143149).</span><span class="sxs-lookup"><span data-stu-id="bd9cf-117">For more information, see [WCF Data Services (Silverlight)](https://go.microsoft.com/fwlink/?LinkID=143149).</span></span>  
  
 <span data-ttu-id="bd9cf-118">Les bibliothèques clientes .NET Framework prennent en charge les opérations asynchrones suivantes :</span><span class="sxs-lookup"><span data-stu-id="bd9cf-118">The .NET Framework client libraries support the following asynchronous operations:</span></span>  
  
|<span data-ttu-id="bd9cf-119">Opération</span><span class="sxs-lookup"><span data-stu-id="bd9cf-119">Operation</span></span>|<span data-ttu-id="bd9cf-120">Méthodes</span><span class="sxs-lookup"><span data-stu-id="bd9cf-120">Methods</span></span>|  
|---------------|-------------|  
|<span data-ttu-id="bd9cf-121">Exécution d'un <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-121">Executing a <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>|-   <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A><br />-   <xref:System.Data.Services.Client.DataServiceQuery%601.EndExecute%2A>|  
|<span data-ttu-id="bd9cf-122">Exécution d'une requête du <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-122">Executing a query from the <xref:System.Data.Services.Client.DataServiceContext>.</span></span>|-   <xref:System.Data.Services.Client.DataServiceContext.BeginExecute%2A><br />-   <xref:System.Data.Services.Client.DataServiceContext.EndExecute%2A>|  
|<span data-ttu-id="bd9cf-123">Exécution d'une requête par lot du <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-123">Executing a batch query from the <xref:System.Data.Services.Client.DataServiceContext>.</span></span>|-   <xref:System.Data.Services.Client.DataServiceContext.BeginExecuteBatch%2A><br />-   <xref:System.Data.Services.Client.DataServiceContext.EndExecuteBatch%2A>|  
|<span data-ttu-id="bd9cf-124">Chargement d'une entité connexe dans <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-124">Loading a related entity into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span>|-   <xref:System.Data.Services.Client.DataServiceContext.BeginLoadProperty%2A><br />-   <xref:System.Data.Services.Client.DataServiceContext.EndLoadProperty%2A>|  
|<span data-ttu-id="bd9cf-125">Enregistrement des modifications apportées aux objets dans <xref:System.Data.Services.Client.DataServiceContext></span><span class="sxs-lookup"><span data-stu-id="bd9cf-125">Saving changes to objects in the <xref:System.Data.Services.Client.DataServiceContext></span></span>|-   <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A><br />-   <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A>|  
  
## <a name="threading-considerations-for-asynchronous-operations"></a><span data-ttu-id="bd9cf-126">Considérations sur le threading relatives aux opérations asynchrones</span><span class="sxs-lookup"><span data-stu-id="bd9cf-126">Threading Considerations for Asynchronous Operations</span></span>  
 <span data-ttu-id="bd9cf-127">Dans une application multithread, le délégué inscrit comme rappel pour l’opération asynchrone n’est pas nécessairement appelé sur le même thread que celui utilisé pour appeler la méthode *Begin* , ce qui crée la demande initiale.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-127">In a multi-threaded application, the delegate that is registered as a callback for the asynchronous operation is not necessarily invoked on the same thread that was used to call the *Begin* method, which creates the initial request.</span></span> <span data-ttu-id="bd9cf-128">Dans une application où le rappel doit être appelé sur un thread spécifique, vous devez marshaler explicitement l’exécution de la méthode *end* , qui gère la réponse, vers le thread souhaité.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-128">In an application where the callback must be invoked on a specific thread, you must explicitly marshal the execution of the *End* method, which handles the response, to the desired thread.</span></span> <span data-ttu-id="bd9cf-129">Par exemple, dans les applications WPF (Windows Presentation Foundation) et Silverlight, la réponse doit être remarshalée au thread de l’interface utilisateur en utilisant la méthode <xref:System.Windows.Threading.Dispatcher.BeginInvoke%2A> sur l’objet <xref:System.Windows.Threading.Dispatcher>.</span><span class="sxs-lookup"><span data-stu-id="bd9cf-129">For example, in Windows Presentation Foundation (WPF)-based applications and Silverlight-based applications, the response must be marshaled back to the UI thread by using the <xref:System.Windows.Threading.Dispatcher.BeginInvoke%2A> method on the <xref:System.Windows.Threading.Dispatcher> object.</span></span> <span data-ttu-id="bd9cf-130">Pour plus d’informations, consultez [interrogation du service de données (WCF Data Services/Silverlight)](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc903932(v=vs.95)).</span><span class="sxs-lookup"><span data-stu-id="bd9cf-130">For more information, see [Querying the Data Service (WCF Data Services/Silverlight)](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc903932(v=vs.95)).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bd9cf-131">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="bd9cf-131">See also</span></span>

- [<span data-ttu-id="bd9cf-132">Bibliothèque cliente WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="bd9cf-132">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
