---
title: interrogation du service de données (services de données WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
- WCF Data Services, accessing data
ms.assetid: 823e9444-27aa-4f1f-be8e-0486d67f54c0
ms.openlocfilehash: cc0e8a5e7d254fc4b34566d2252869a2da4af3db
ms.sourcegitcommit: 5ae5a1a9520b8b8b6164ad728d396717f30edafc
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/11/2019
ms.locfileid: "70894285"
---
# <a name="querying-the-data-service-wcf-data-services"></a><span data-ttu-id="c41f4-102">interrogation du service de données (services de données WCF)</span><span class="sxs-lookup"><span data-stu-id="c41f4-102">Querying the Data Service (WCF Data Services)</span></span>

<span data-ttu-id="c41f4-103">La bibliothèque cliente [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] vous permet d'exécuter des requêtes auprès d'un service de données à l'aide de modèles de programmation .NET Framework familiers, notamment Language Integrated Query (LINQ).</span><span class="sxs-lookup"><span data-stu-id="c41f4-103">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to execute queries against a data service by using familiar .NET Framework programming patterns, including using language integrated query (LINQ).</span></span> <span data-ttu-id="c41f4-104">La bibliothèque cliente traduit une requête, définie sur le client comme une instance de la classe <xref:System.Data.Services.Client.DataServiceQuery%601>, en un message de demande HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="c41f4-104">The client library translates a query, which is defined on the client as an instance of the <xref:System.Data.Services.Client.DataServiceQuery%601> class, into an HTTP GET request message.</span></span> <span data-ttu-id="c41f4-105">La bibliothèque reçoit le message de réponse et le convertit en instances de classes de service de données client.</span><span class="sxs-lookup"><span data-stu-id="c41f4-105">The library receives the response message and translates it into instances of client data service classes.</span></span> <span data-ttu-id="c41f4-106">Ces classes sont suivies par le <xref:System.Data.Services.Client.DataServiceContext> auquel la <xref:System.Data.Services.Client.DataServiceQuery%601> appartient.</span><span class="sxs-lookup"><span data-stu-id="c41f4-106">These classes are tracked by the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span>

## <a name="data-service-queries"></a><span data-ttu-id="c41f4-107">Requêtes du service de données</span><span class="sxs-lookup"><span data-stu-id="c41f4-107">Data Service Queries</span></span>

<span data-ttu-id="c41f4-108">La classe générique <xref:System.Data.Services.Client.DataServiceQuery%601> représente une requête qui retourne une collection de zéro, une ou plusieurs instances de type d'entité.</span><span class="sxs-lookup"><span data-stu-id="c41f4-108">The <xref:System.Data.Services.Client.DataServiceQuery%601> generic class represents a query that returns a collection of zero or more entity type instances.</span></span> <span data-ttu-id="c41f4-109">Une requête du service de données appartient toujours à un contexte du service de données existant.</span><span class="sxs-lookup"><span data-stu-id="c41f4-109">A data service query always belongs to an existing data service context.</span></span> <span data-ttu-id="c41f4-110">Ce contexte conserve les informations relatives à l'URI de service et aux métadonnées qui sont requises pour composer et exécuter la requête.</span><span class="sxs-lookup"><span data-stu-id="c41f4-110">This context maintains the service URI and metadata information that is required to compose and execute the query.</span></span>

<span data-ttu-id="c41f4-111">Lorsque vous utilisez la boîte de dialogue **Ajouter une référence de service** pour ajouter un service de données à une application cliente basée sur .NET Framework, une classe de conteneur d’entités qui <xref:System.Data.Services.Client.DataServiceContext> hérite de la classe est créée.</span><span class="sxs-lookup"><span data-stu-id="c41f4-111">When you use the **Add Service Reference** dialog to add a data service to a .NET Framework-based client application, an entity container class is created that inherits from the <xref:System.Data.Services.Client.DataServiceContext> class.</span></span> <span data-ttu-id="c41f4-112">Cette classe inclut des propriétés qui retournent des instances <xref:System.Data.Services.Client.DataServiceQuery%601> typées.</span><span class="sxs-lookup"><span data-stu-id="c41f4-112">This class includes properties that return typed <xref:System.Data.Services.Client.DataServiceQuery%601> instances.</span></span> <span data-ttu-id="c41f4-113">Il y a une propriété pour chaque jeu d'entités exposé par le service de données.</span><span class="sxs-lookup"><span data-stu-id="c41f4-113">There is one property for each entity set that the data service exposes.</span></span> <span data-ttu-id="c41f4-114">Ces propriétés simplifient la création d'une instance d'un <xref:System.Data.Services.Client.DataServiceQuery%601> typé.</span><span class="sxs-lookup"><span data-stu-id="c41f4-114">These properties make it easier to create an instance of a typed <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>

<span data-ttu-id="c41f4-115">Une requête est exécutée dans les scénarios suivants :</span><span class="sxs-lookup"><span data-stu-id="c41f4-115">A query is executed in the following scenarios:</span></span>

- <span data-ttu-id="c41f4-116">Lorsque les résultats sont énumérés implicitement, tel que :</span><span class="sxs-lookup"><span data-stu-id="c41f4-116">When results are enumerated implicitly, such as:</span></span>

  - <span data-ttu-id="c41f4-117">Lorsqu'une propriété sur <xref:System.Data.Services.Client.DataServiceContext> qui représente un jeu d'entités est énumérée, comme pendant une boucle `foreach` (C#) ou `For Each` (Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="c41f4-117">When a property on the <xref:System.Data.Services.Client.DataServiceContext> that represents and entity set is enumerated, such as during a `foreach` (C#) or `For Each` (Visual Basic) loop.</span></span>

  - <span data-ttu-id="c41f4-118">Lorsque la requête est assignée à une collection `List`.</span><span class="sxs-lookup"><span data-stu-id="c41f4-118">When the query is assigned to a `List` collection.</span></span>

- <span data-ttu-id="c41f4-119">Lorsque la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> ou <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> est explicitement appelée.</span><span class="sxs-lookup"><span data-stu-id="c41f4-119">When the <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> or <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> method is explicitly called.</span></span>

- <span data-ttu-id="c41f4-120">Lorsqu'un opérateur d'exécution de requête LINQ, tel que <xref:System.Linq.Enumerable.First%2A> ou <xref:System.Linq.Enumerable.Single%2A> est appelé.</span><span class="sxs-lookup"><span data-stu-id="c41f4-120">When a LINQ query execution operator, such as <xref:System.Linq.Enumerable.First%2A> or <xref:System.Linq.Enumerable.Single%2A> is called.</span></span>

<span data-ttu-id="c41f4-121">La requête suivante, lorsqu'elle est exécutée, retourne toutes les entités `Customers` dans le service de données Northwind :</span><span class="sxs-lookup"><span data-stu-id="c41f4-121">The following query, when it is executed, returns all `Customers` entities in the Northwind data service:</span></span>

[!code-csharp[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getallcustomersspecific)]
[!code-vb[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getallcustomersspecific)]

<span data-ttu-id="c41f4-122">Pour plus d’informations, consultez [Guide pratique pour Exécuter des requêtes](how-to-execute-data-service-queries-wcf-data-services.md)de service de données.</span><span class="sxs-lookup"><span data-stu-id="c41f4-122">For more information, see [How to: Execute Data Service Queries](how-to-execute-data-service-queries-wcf-data-services.md).</span></span>

<span data-ttu-id="c41f4-123">Le [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client prend en charge les requêtes pour les objets à liaison tardive, par exemple lorsque vous utilisez C#le type dynamique dans.</span><span class="sxs-lookup"><span data-stu-id="c41f4-123">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client supports queries for late-bound objects, such as when you use the *dynamic* type in C#.</span></span> <span data-ttu-id="c41f4-124">Toutefois, pour de bonnes performances, vous devriez toujours composer des requêtes fortement typées sur le service de données.</span><span class="sxs-lookup"><span data-stu-id="c41f4-124">However, for performance reasons you should always compose strongly-typed queries against the data service.</span></span> <span data-ttu-id="c41f4-125">La type <xref:System.Tuple> et les objets dynamiques ne sont pas pris en charge par le client.</span><span class="sxs-lookup"><span data-stu-id="c41f4-125">The <xref:System.Tuple> type and dynamic objects are not supported by the client.</span></span>

## <a name="linq-queries"></a><span data-ttu-id="c41f4-126">Requêtes LINQ</span><span class="sxs-lookup"><span data-stu-id="c41f4-126">LINQ Queries</span></span>

<span data-ttu-id="c41f4-127">Étant donné <xref:System.Data.Services.Client.DataServiceQuery%601> que la classe implémente l' <xref:System.Linq.IQueryable%601> interface définie par LINQ [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] , la bibliothèque cliente est en mesure de transformer des requêtes LINQ sur des données de jeu d’entités en un URI qui représente une expression de requête évaluée par rapport à un service de données ressource.</span><span class="sxs-lookup"><span data-stu-id="c41f4-127">Because the <xref:System.Data.Services.Client.DataServiceQuery%601> class implements the <xref:System.Linq.IQueryable%601> interface defined by LINQ, the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library is able to transform LINQ queries against entity set data into a URI that represents a query expression evaluated against a data service resource.</span></span> <span data-ttu-id="c41f4-128">L'exemple suivant est une requête LINQ équivalente à l'instance <xref:System.Data.Services.Client.DataServiceQuery%601> précédente qui retourne des `Orders` ayant un coût de fret supérieur à $30 et classe les résultats par coût de fret :</span><span class="sxs-lookup"><span data-stu-id="c41f4-128">The following example is a LINQ query that is equivalent to the previous <xref:System.Data.Services.Client.DataServiceQuery%601> that returns `Orders` that have a freight cost of more than $30 and orders the results by the freight cost:</span></span>

[!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionslinqspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionslinqspecific)]

<span data-ttu-id="c41f4-129">Cette requête LINQ est traduite dans l’URI de requête suivant qui est exécuté sur le service de données de [démarrage rapide](quickstart-wcf-data-services.md) basé sur Northwind :</span><span class="sxs-lookup"><span data-stu-id="c41f4-129">This LINQ query is translated into the following query URI that is executed against the Northwind-based [quickstart](quickstart-wcf-data-services.md) data service:</span></span>

```http
http://localhost:12345/Northwind.svc/Orders?Orderby=ShippedDate&?filter=Freight gt 30
```

> [!NOTE]
> <span data-ttu-id="c41f4-130">L'ensemble de requêtes pouvant être exprimées dans la syntaxe LINQ est plus étendu que dans la syntaxe d'URI REST (Representational State Transfer) utilisée par les services de données.</span><span class="sxs-lookup"><span data-stu-id="c41f4-130">The set of queries expressible in the LINQ syntax is broader than those enabled in the representational state transfer (REST)-based URI syntax that is used by data services.</span></span> <span data-ttu-id="c41f4-131"><xref:System.NotSupportedException> est levée lorsque la requête ne peut pas être mappée à un URI dans le service de données cible.</span><span class="sxs-lookup"><span data-stu-id="c41f4-131">A <xref:System.NotSupportedException> is raised when the query cannot be mapped to a URI in the target data service.</span></span>

<span data-ttu-id="c41f4-132">Pour plus d’informations, consultez [considérations relatives à LINQ](linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="c41f4-132">For more information, see [LINQ Considerations](linq-considerations-wcf-data-services.md).</span></span>

## <a name="adding-query-options"></a><span data-ttu-id="c41f4-133">Ajout d'options de requête</span><span class="sxs-lookup"><span data-stu-id="c41f4-133">Adding Query Options</span></span>

<span data-ttu-id="c41f4-134">Les requêtes du service de données prennent en charge toutes les options de requête fournies par [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c41f4-134">Data service queries support all the query options that [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]s provides.</span></span> <span data-ttu-id="c41f4-135">Vous appelez la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> pour ajouter les options de requête à une instance <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="c41f4-135">You call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method to append query options to a <xref:System.Data.Services.Client.DataServiceQuery%601> instance.</span></span> <span data-ttu-id="c41f4-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> retourne une nouvelle instance <xref:System.Data.Services.Client.DataServiceQuery%601> qui est équivalente à la requête d'origine mais avec le nouveau jeu d'options de requête.</span><span class="sxs-lookup"><span data-stu-id="c41f4-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> returns a new <xref:System.Data.Services.Client.DataServiceQuery%601> instance that is equivalent to the original query but with the new query option set.</span></span> <span data-ttu-id="c41f4-137">La requête suivante, en cas d'exécution, retourne les `Orders` qui sont filtrées par la valeur `Freight` et classées par `OrderID`, dans l'ordre descendant :</span><span class="sxs-lookup"><span data-stu-id="c41f4-137">The following query, when executed, returns `Orders` that are filtered by the `Freight` value and ordered by the `OrderID`, descending:</span></span>

[!code-csharp[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionsspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionsspecific)]

<span data-ttu-id="c41f4-138">Vous pouvez utiliser l'option de requête `$orderby` pour organiser et filtrer une requête en fonction d'une seule propriété, comme dans l'exemple suivant qui filtre et organise les objets `Orders` retournés en fonction de la valeur de la propriété `Freight` :</span><span class="sxs-lookup"><span data-stu-id="c41f4-138">You can use the `$orderby` query option to both order and filter a query based on a single property, as in the following example that filters and orders the returned `Orders` objects based on the value of the `Freight` property:</span></span>

[!code-csharp[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#orderwithfilter)]
[!code-vb[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#orderwithfilter)]

<span data-ttu-id="c41f4-139">Vous pouvez appeler consécutivement la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> pour construire des expressions de requête complexes.</span><span class="sxs-lookup"><span data-stu-id="c41f4-139">You can call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method consecutively to construct complex query expressions.</span></span> <span data-ttu-id="c41f4-140">Pour plus d’informations, consultez [Guide pratique pour Ajoutez des options de requête à une requête](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md)de service de données.</span><span class="sxs-lookup"><span data-stu-id="c41f4-140">For more information, see [How to: Add Query Options to a Data Service Query](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span></span>

<span data-ttu-id="c41f4-141">Les options de requête fournissent une autre méthode pour exprimer les composants syntactiques d'une requête LINQ.</span><span class="sxs-lookup"><span data-stu-id="c41f4-141">Query options give you another way to express the syntactic components of a LINQ query.</span></span> <span data-ttu-id="c41f4-142">Pour plus d’informations, consultez [considérations relatives à LINQ](linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="c41f4-142">For more information, see [LINQ Considerations](linq-considerations-wcf-data-services.md).</span></span>

> [!NOTE]
> <span data-ttu-id="c41f4-143">L'option de requête `$select` ne peut pas être ajoutée à un URI de requête à l'aide de la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>.</span><span class="sxs-lookup"><span data-stu-id="c41f4-143">The `$select` query option cannot be added to a query URI by using the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method.</span></span> <span data-ttu-id="c41f4-144">Nous vous recommandons d'utiliser la méthode LINQ <xref:System.Linq.Enumerable.Select%2A> pour que le client génère l'option de requête `$select` dans l'URI de requête.</span><span class="sxs-lookup"><span data-stu-id="c41f4-144">We recommend that you use the LINQ <xref:System.Linq.Enumerable.Select%2A> method to have the client generate the `$select` query option in the request URI.</span></span>

<a name="executingQueries"></a>

## <a name="client-versus-server-execution"></a><span data-ttu-id="c41f4-145">Exécution du client et exécution du serveur</span><span class="sxs-lookup"><span data-stu-id="c41f4-145">Client versus Server Execution</span></span>

<span data-ttu-id="c41f4-146">Le client exécute une requête en deux parties.</span><span class="sxs-lookup"><span data-stu-id="c41f4-146">The client executes a query in two parts.</span></span> <span data-ttu-id="c41f4-147">Lorsque cela est possible, les expressions dans une requête sont d'abord évaluées sur le client, puis une requête basée sur l'URI est générée et envoyée au service de données pour être évaluée par rapport aux données dans le service.</span><span class="sxs-lookup"><span data-stu-id="c41f4-147">Whenever possible, expressions in a query are first evaluated on the client, and then a URI-based query is generated and sent to the data service for evaluation against data in the service.</span></span> <span data-ttu-id="c41f4-148">Prenons la requête LINQ suivante :</span><span class="sxs-lookup"><span data-stu-id="c41f4-148">Consider the following LINQ query:</span></span>

[!code-csharp[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqqueryclientevalspecific)]
[!code-vb[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqqueryclientevalspecific)]

<span data-ttu-id="c41f4-149">Dans cet exemple, l'expression `(basePrice – (basePrice * discount))` est évaluée sur le client.</span><span class="sxs-lookup"><span data-stu-id="c41f4-149">In this example, the expression `(basePrice – (basePrice * discount))` is evaluated on the client.</span></span> <span data-ttu-id="c41f4-150">À cause de cela, l'URI de requête réel `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` transmis au service de données contient la valeur décimale `90` déjà calculée dans la clause de filtre.</span><span class="sxs-lookup"><span data-stu-id="c41f4-150">Because of this, the actual query URI `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` that is sent to the data service contains the already calculated decimal value of `90` in the filter clause.</span></span> <span data-ttu-id="c41f4-151">Les autres parties de l'expression de filtrage, y compris l'expression de la sous-chaîne, sont évaluées par le service de données.</span><span class="sxs-lookup"><span data-stu-id="c41f4-151">The other parts of the filtering expression, including the substring expression, are evaluated by the data service.</span></span> <span data-ttu-id="c41f4-152">Les expressions qui sont évaluées sur le client suivent la sémantique CLR (Common Language Runtime), tandis que les expressions transmises au service de données reposent sur l'implémentation du protocole [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] dans le service de données.</span><span class="sxs-lookup"><span data-stu-id="c41f4-152">Expressions that are evaluated on the client follow common language runtime (CLR) semantics, while expressions sent to the data service rely on the data service implementation of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Protocol.</span></span> <span data-ttu-id="c41f4-153">Vous devriez également tenir compte des scénarios où cette évaluation séparée peut entraîner des résultats inattendus, comme quand le client et le service exécutent des évaluations basées sur le temps dans différents fuseaux horaires.</span><span class="sxs-lookup"><span data-stu-id="c41f4-153">You should also be aware of scenarios where this separate evaluation may cause unexpected results, such as when both the client and service perform time-based evaluations in different time zones.</span></span>

## <a name="query-responses"></a><span data-ttu-id="c41f4-154">Réponses aux requêtes</span><span class="sxs-lookup"><span data-stu-id="c41f4-154">Query Responses</span></span>

<span data-ttu-id="c41f4-155">En cas d'exécution, <xref:System.Data.Services.Client.DataServiceQuery%601> retourne un <xref:System.Collections.Generic.IEnumerable%601> du type d'entité demandé.</span><span class="sxs-lookup"><span data-stu-id="c41f4-155">When executed, the <xref:System.Data.Services.Client.DataServiceQuery%601> returns an <xref:System.Collections.Generic.IEnumerable%601> of the requested entity type.</span></span> <span data-ttu-id="c41f4-156">Ce résultat de requête peut être converti en un objet <xref:System.Data.Services.Client.QueryOperationResponse%601>, comme dans l'exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="c41f4-156">This query result can be cast to a <xref:System.Data.Services.Client.QueryOperationResponse%601> object, as in the following example:</span></span>

[!code-csharp[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getresponsespecific)]
[!code-vb[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getresponsespecific)]

<span data-ttu-id="c41f4-157">Les instances de type d'entité qui représentent des entités dans le service de données sont créées sur le client par le biais d'un processus appelé matérialisation d'objets.</span><span class="sxs-lookup"><span data-stu-id="c41f4-157">The entity type instances that represent entities in the data service are created on the client by a process called object materialization.</span></span> <span data-ttu-id="c41f4-158">Pour plus d’informations, consultez [matérialisation d’objets](object-materialization-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="c41f4-158">For more information, see [Object Materialization](object-materialization-wcf-data-services.md).</span></span> <span data-ttu-id="c41f4-159">L'objet <xref:System.Data.Services.Client.QueryOperationResponse%601> implémente <xref:System.Collections.Generic.IEnumerable%601> pour fournir un accès aux résultats de la requête.</span><span class="sxs-lookup"><span data-stu-id="c41f4-159">The <xref:System.Data.Services.Client.QueryOperationResponse%601> object implements <xref:System.Collections.Generic.IEnumerable%601> to provide access to the results of the query.</span></span>

<span data-ttu-id="c41f4-160"><xref:System.Data.Services.Client.QueryOperationResponse%601> a également les membres suivants qui vous permettent d'accéder à des informations supplémentaires sur un résultat de requête :</span><span class="sxs-lookup"><span data-stu-id="c41f4-160">The <xref:System.Data.Services.Client.QueryOperationResponse%601> also has the following members that enable you to access additional information about a query result:</span></span>

- <span data-ttu-id="c41f4-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A>- affiche une erreur résultant de l'opération, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="c41f4-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A> - gets an error thrown by the operation, if any has occurred.</span></span>

- <span data-ttu-id="c41f4-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A>- contient la collection d'en-têtes de réponse HTTP associée à la réponse à la requête.</span><span class="sxs-lookup"><span data-stu-id="c41f4-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A> - contains the collection of HTTP response headers associated with the query response.</span></span>

- <span data-ttu-id="c41f4-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A> - obtient l'instance <xref:System.Data.Services.Client.DataServiceQuery%601> originale qui a créé le <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span><span class="sxs-lookup"><span data-stu-id="c41f4-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A> - gets the original <xref:System.Data.Services.Client.DataServiceQuery%601> that generated the <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span></span>

- <span data-ttu-id="c41f4-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A> - obtient le code de réponse HTTP pour la réponse à la requête.</span><span class="sxs-lookup"><span data-stu-id="c41f4-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A> - gets the HTTP response code for the query response.</span></span>

- <span data-ttu-id="c41f4-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A>- place le nombre total d'entités dans le jeu d'entités lorsque la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> a été appelée sur le <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="c41f4-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> - gets the total number of entities in the entity set when the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method was called on the <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>

- <span data-ttu-id="c41f4-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A>- retourne un objet <xref:System.Data.Services.Client.DataServiceQueryContinuation> qui contient l'URI de la page suivante de résultats.</span><span class="sxs-lookup"><span data-stu-id="c41f4-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A> - returns a <xref:System.Data.Services.Client.DataServiceQueryContinuation> object that contains the URI of the next page of results.</span></span>

<span data-ttu-id="c41f4-167">Par défaut, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] retourne uniquement les données qui sont explicitement sélectionnées par l’URI de requête.</span><span class="sxs-lookup"><span data-stu-id="c41f4-167">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] only returns data that is explicitly selected by the query URI.</span></span> <span data-ttu-id="c41f4-168">Cela vous permet de charger explicitement des données supplémentaires à partir du service de données lorsque cela est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="c41f4-168">This gives you the option to explicitly load additional data from the data service when it is needed.</span></span> <span data-ttu-id="c41f4-169">Une demande est envoyée au service de données chaque fois vous chargez explicitement des données à partir du service de données.</span><span class="sxs-lookup"><span data-stu-id="c41f4-169">A request is sent to the data service each time you explicitly load data from the data service.</span></span> <span data-ttu-id="c41f4-170">Les données qui peuvent être chargées explicitement incluent des entités associées, des données de réponse paginées et des flux de données binaires.</span><span class="sxs-lookup"><span data-stu-id="c41f4-170">Data that can be explicitly loaded includes related entities, paged response data, and binary data streams.</span></span>

> [!NOTE]
> <span data-ttu-id="c41f4-171">Étant donné qu’un service de données peut retourner une réponse paginée, nous recommandons que votre application utilise le modèle de programmation pour gérer une réponse du service de données paginée.</span><span class="sxs-lookup"><span data-stu-id="c41f4-171">Because a data service may return a paged response, we recommend that your application use the programming pattern to handle a paged data service response.</span></span> <span data-ttu-id="c41f4-172">Pour plus d’informations, consultez chargement d’un [contenu différé](loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="c41f4-172">For more information, see [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).</span></span>

<span data-ttu-id="c41f4-173">La quantité de données retournée par une requête peut également être réduite en spécifiant que seules certaines propriétés d'une entité doivent être retournées dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="c41f4-173">The amount of data returned by a query can also be reduced by specifying that only certain properties of an entity are returned in the response.</span></span> <span data-ttu-id="c41f4-174">Pour plus d’informations, consultez [projections de requête](query-projections-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="c41f4-174">For more information, see [Query Projections](query-projections-wcf-data-services.md).</span></span>

## <a name="getting-a-count-of-the-total-number-of-entities-in-the-set"></a><span data-ttu-id="c41f4-175">Obtenir un décompte du nombre total d'entités d'un jeu</span><span class="sxs-lookup"><span data-stu-id="c41f4-175">Getting a Count of the Total Number of Entities in the Set</span></span>

<span data-ttu-id="c41f4-176">Dans certains scénarios, il est utile de connaître le nombre total d'entités d'un jeu d'entités et pas simplement le nombre retourné par la requête.</span><span class="sxs-lookup"><span data-stu-id="c41f4-176">In some scenarios, it is helpful to know the total number of entities in an entity set and not merely the number returned by the query.</span></span> <span data-ttu-id="c41f4-177">Appelez la méthode <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> sur l'instance <xref:System.Data.Services.Client.DataServiceQuery%601> pour demander que le nombre total d'entités du jeu soit inclus dans le résultat de la requête.</span><span class="sxs-lookup"><span data-stu-id="c41f4-177">Call the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to request that this total count of entities in the set be included with the query result.</span></span> <span data-ttu-id="c41f4-178">Dans ce cas, la propriété <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> du <xref:System.Data.Services.Client.QueryOperationResponse%601> retourné renvoie le nombre total d'entités du jeu.</span><span class="sxs-lookup"><span data-stu-id="c41f4-178">In this case, the <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> property of the returned <xref:System.Data.Services.Client.QueryOperationResponse%601> returns the total number of entities in the set.</span></span>

<span data-ttu-id="c41f4-179">Vous pouvez également obtenir uniquement le nombre total d'entités du jeu comme un <xref:System.Int32> ou comme une valeur <xref:System.Int64> en appelant les méthodes <xref:System.Linq.Enumerable.Count%2A> ou <xref:System.Linq.Enumerable.LongCount%2A> respectivement.</span><span class="sxs-lookup"><span data-stu-id="c41f4-179">You can also get only the total count of entities in the set either as an <xref:System.Int32> or as a <xref:System.Int64> value by calling the <xref:System.Linq.Enumerable.Count%2A> or <xref:System.Linq.Enumerable.LongCount%2A> methods respectively.</span></span> <span data-ttu-id="c41f4-180">Lorsque ces méthodes sont appelées, le <xref:System.Data.Services.Client.QueryOperationResponse%601> n'est pas retourné ; seule la valeur du compteur est retournée.</span><span class="sxs-lookup"><span data-stu-id="c41f4-180">When these methods are called, a <xref:System.Data.Services.Client.QueryOperationResponse%601> is not returned; only the count value is returned.</span></span> <span data-ttu-id="c41f4-181">Pour plus d'informations, voir [Procédure : Déterminez le nombre d’entités retournées](number-of-entities-returned-by-a-query-wcf.md)par une requête.</span><span class="sxs-lookup"><span data-stu-id="c41f4-181">For more information, see [How to: Determine the Number of Entities Returned by a Query](number-of-entities-returned-by-a-query-wcf.md).</span></span>

## <a name="in-this-section"></a><span data-ttu-id="c41f4-182">Dans cette section</span><span class="sxs-lookup"><span data-stu-id="c41f4-182">In This Section</span></span>

- [<span data-ttu-id="c41f4-183">Projections de requête</span><span class="sxs-lookup"><span data-stu-id="c41f4-183">Query Projections</span></span>](query-projections-wcf-data-services.md)

- [<span data-ttu-id="c41f4-184">Matérialisation d’objet</span><span class="sxs-lookup"><span data-stu-id="c41f4-184">Object Materialization</span></span>](object-materialization-wcf-data-services.md)

- [<span data-ttu-id="c41f4-185">Considérations sur LINQ</span><span class="sxs-lookup"><span data-stu-id="c41f4-185">LINQ Considerations</span></span>](linq-considerations-wcf-data-services.md)

- [<span data-ttu-id="c41f4-186">Guide pratique pour Exécuter des requêtes de service de données</span><span class="sxs-lookup"><span data-stu-id="c41f4-186">How to: Execute Data Service Queries</span></span>](how-to-execute-data-service-queries-wcf-data-services.md)

- [<span data-ttu-id="c41f4-187">Guide pratique pour Ajouter des options de requête à une requête de service de données</span><span class="sxs-lookup"><span data-stu-id="c41f4-187">How to: Add Query Options to a Data Service Query</span></span>](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md)

- [<span data-ttu-id="c41f4-188">Guide pratique pour Déterminer le nombre d’entités retournées par une requête</span><span class="sxs-lookup"><span data-stu-id="c41f4-188">How to: Determine the Number of Entities Returned by a Query</span></span>](number-of-entities-returned-by-a-query-wcf.md)

- [<span data-ttu-id="c41f4-189">Guide pratique pour Spécifier les informations d’identification du client pour une demande de service de données</span><span class="sxs-lookup"><span data-stu-id="c41f4-189">How to: Specify Client Credentials for a Data Service Request</span></span>](specify-client-creds-for-a-data-service-request-wcf.md)

- [<span data-ttu-id="c41f4-190">Guide pratique pour Définir des en-têtes dans la demande du client</span><span class="sxs-lookup"><span data-stu-id="c41f4-190">How to: Set Headers in the Client Request</span></span>](how-to-set-headers-in-the-client-request-wcf-data-services.md)

- [<span data-ttu-id="c41f4-191">Guide pratique : Résultats de la requête de projet</span><span class="sxs-lookup"><span data-stu-id="c41f4-191">How to: Project Query Results</span></span>](how-to-project-query-results-wcf-data-services.md)

## <a name="see-also"></a><span data-ttu-id="c41f4-192">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c41f4-192">See also</span></span>

- [<span data-ttu-id="c41f4-193">Bibliothèque cliente WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="c41f4-193">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
