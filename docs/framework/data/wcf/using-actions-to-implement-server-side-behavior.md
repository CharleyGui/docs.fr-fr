---
title: Utilisation d'actions pour implémenter le comportement côté serveur
ms.date: 03/30/2017
ms.assetid: 11a372db-7168-498b-80d2-9419ff557ba5
ms.openlocfilehash: bdfa8e37904395b402874b743ca4069cae75c504
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/07/2019
ms.locfileid: "70779691"
---
# <a name="using-actions-to-implement-server-side-behavior"></a><span data-ttu-id="8a49a-102">Utilisation d'actions pour implémenter le comportement côté serveur</span><span class="sxs-lookup"><span data-stu-id="8a49a-102">Using actions to implement server-side behavior</span></span>

<span data-ttu-id="8a49a-103">Les actions OData permettent d'implémenter un comportement qui agit sur une ressource extraite d'un service OData.</span><span class="sxs-lookup"><span data-stu-id="8a49a-103">OData Actions provide a way to implement a behavior that acts upon a resource retrieved from an OData service.</span></span> <span data-ttu-id="8a49a-104">Par exemple, prenez un film numérique comme ressource. Vous pouvez effectuer plusieurs opérations avec celui-ci : extraction, évaluation/commentaire ou archivage.</span><span class="sxs-lookup"><span data-stu-id="8a49a-104">For example consider a digital movie as a resource, there are many things you may do with a digital movie: check-out, rate/comment, or check-in.</span></span> <span data-ttu-id="8a49a-105">Ce sont des exemples d'actions pouvant être implémentées par un service de données WCF qui gère les films numériques.</span><span class="sxs-lookup"><span data-stu-id="8a49a-105">These are all examples of Actions that may be implemented by a WCF Data Service that manages digital movies.</span></span> <span data-ttu-id="8a49a-106">Les actions sont écrites dans une réponse OData qui contient une ressource sur laquelle l'action peut être appelée.</span><span class="sxs-lookup"><span data-stu-id="8a49a-106">Actions are described in an OData response that contains a resource on which the Action can be invoked.</span></span> <span data-ttu-id="8a49a-107">Lorsqu'un utilisateur demande une ressource qui représente un film numérique, la réponse retournée par le service de données WCF contient des informations sur les actions disponibles pour cette ressource.</span><span class="sxs-lookup"><span data-stu-id="8a49a-107">When a user requests a resource that represents a digital movie the response returned from the WCF Data Service contains information about the Actions that are available for that resource.</span></span> <span data-ttu-id="8a49a-108">La disponibilité d'une action dépend de l'état du service de données ou de la ressource.</span><span class="sxs-lookup"><span data-stu-id="8a49a-108">The availability of an Action can depend on the state of the data service or resource.</span></span> <span data-ttu-id="8a49a-109">Par exemple, une fois qu'un film numérique est extrait, il ne peut pas être extrait par un autre utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8a49a-109">For example once a digital movie is checked out it cannot be checked out by another user.</span></span> <span data-ttu-id="8a49a-110">Les clients peuvent appeler une action en indiquant simplement une URL.</span><span class="sxs-lookup"><span data-stu-id="8a49a-110">Clients can invoke an action simply by specifying a URL.</span></span> <span data-ttu-id="8a49a-111">Par exemple, `http://MyServer/MovieService.svc/Movies(6)` identifie un film numérique spécifique et `http://MyServer/MovieService.svc/Movies(6)/Checkout` appelle l’action sur le film spécifique.</span><span class="sxs-lookup"><span data-stu-id="8a49a-111">For example, `http://MyServer/MovieService.svc/Movies(6)` would identify a specific digital movie and `http://MyServer/MovieService.svc/Movies(6)/Checkout` would invoke the action on the specific movie.</span></span> <span data-ttu-id="8a49a-112">Les actions vous permettent d'exposer votre modèle de service sans exposer votre modèle de données.</span><span class="sxs-lookup"><span data-stu-id="8a49a-112">Actions allow you to expose you service model without exposing your data model.</span></span> <span data-ttu-id="8a49a-113">Poursuivons avec l'exemple de service de film, vous pouvez autoriser un utilisateur à évaluer un film, mais pas à exposer directement les données d'évaluation en tant que ressource.</span><span class="sxs-lookup"><span data-stu-id="8a49a-113">Continuing with the movie service example, you may wish to allow a user to rate a movie, but not directly expose the rating data as a resource.</span></span> <span data-ttu-id="8a49a-114">Vous pouvez implémenter une action d'évaluation pour autoriser l'utilisateur à évaluer un film, sans accéder directement aux données d'évaluation en tant que ressource.</span><span class="sxs-lookup"><span data-stu-id="8a49a-114">You could implement a Rate Action to allow the user to rate a movie but not directly access the rating data as a resource.</span></span>
  
## <a name="implementing-an-action"></a><span data-ttu-id="8a49a-115">Implémentation d'une action</span><span class="sxs-lookup"><span data-stu-id="8a49a-115">Implementing an action</span></span>  
 <span data-ttu-id="8a49a-116">Pour implémenter une action de service, vous <xref:System.IServiceProvider>devez implémenter les interfaces, [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103))et [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) .</span><span class="sxs-lookup"><span data-stu-id="8a49a-116">To implement a service action you must implement the <xref:System.IServiceProvider>, [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)), and [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) interfaces.</span></span> <span data-ttu-id="8a49a-117"><xref:System.IServiceProvider>permet à WCF Data Services d’accéder à votre implémentation de [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)).</span><span class="sxs-lookup"><span data-stu-id="8a49a-117"><xref:System.IServiceProvider> allows WCF Data Services to get your implementation of [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)).</span></span> <span data-ttu-id="8a49a-118">[IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) permet à WCF Data Services de créer, Rechercher, décrire et appeler des actions de service.</span><span class="sxs-lookup"><span data-stu-id="8a49a-118">[IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) allows WCF Data Services to create, find, describe and invoke service actions.</span></span> <span data-ttu-id="8a49a-119">[IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) vous permet d’appeler le code qui implémente le comportement des actions de service et d’obtenir les résultats, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="8a49a-119">[IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) allows you to invoke the code that implements the service actions’ behavior and get the results, if any.</span></span> <span data-ttu-id="8a49a-120">N'oubliez pas que les services de données WCF sont des services WCF par appel ; une nouvelle instance du service est créée à chaque fois que le service est appelé.</span><span class="sxs-lookup"><span data-stu-id="8a49a-120">Keep in mind that WCF Data Services are Per-Call WCF Services, a new instance of the service will be created each time the service is called.</span></span>  <span data-ttu-id="8a49a-121">Assurez-vous qu'aucun travail inutile n'est effectué lors de la création du service.</span><span class="sxs-lookup"><span data-stu-id="8a49a-121">Make sure no unnecessary work is done when the service is created.</span></span>  
  
### <a name="iserviceprovider"></a><span data-ttu-id="8a49a-122">IServiceProvider</span><span class="sxs-lookup"><span data-stu-id="8a49a-122">IServiceProvider</span></span>  
 <span data-ttu-id="8a49a-123"><xref:System.IServiceProvider> contient une méthode appelée <xref:System.IServiceProvider.GetService%2A>.</span><span class="sxs-lookup"><span data-stu-id="8a49a-123"><xref:System.IServiceProvider> contains a method called <xref:System.IServiceProvider.GetService%2A>.</span></span> <span data-ttu-id="8a49a-124">Cette méthode est appelée par les services de données WCF pour récupérer plusieurs fournisseurs de services, notamment des fournisseurs de services de métadonnées et des fournisseurs d'actions de service de données.</span><span class="sxs-lookup"><span data-stu-id="8a49a-124">This method is called by WCF Data Services to retrieve a number of service providers, including metadata service providers and data service action providers.</span></span> <span data-ttu-id="8a49a-125">Lorsque vous êtes invité à entrer un fournisseur d’action de service de données, retournez votre implémentation de [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) .</span><span class="sxs-lookup"><span data-stu-id="8a49a-125">When asked for a data service action provider, return your [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) implementation.</span></span>  
  
### <a name="idataserviceactionprovider"></a><span data-ttu-id="8a49a-126">IDataServiceActionProvider</span><span class="sxs-lookup"><span data-stu-id="8a49a-126">IDataServiceActionProvider</span></span>  
 <span data-ttu-id="8a49a-127">[IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) contient des méthodes qui vous permettent de récupérer des informations sur les actions disponibles.</span><span class="sxs-lookup"><span data-stu-id="8a49a-127">[IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) contains methods that allow you to retrieve information about the available actions.</span></span> <span data-ttu-id="8a49a-128">Lorsque vous implémentez [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) , vous augmentez les métadonnées de votre service qui est défini par l’implémentation de [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) par votre service avec des actions et en gérant la répartition vers ces actions comme pose.</span><span class="sxs-lookup"><span data-stu-id="8a49a-128">When you implement [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) you are augmenting the metadata for your service which is defined by your service’s implementation of [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) with Actions and handling dispatch to those actions as appropriate.</span></span>  
  
#### <a name="advertiseserviceaction"></a><span data-ttu-id="8a49a-129">AdvertiseServiceAction</span><span class="sxs-lookup"><span data-stu-id="8a49a-129">AdvertiseServiceAction</span></span>  
 <span data-ttu-id="8a49a-130">La [méthode AdvertiseServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859971(v=vs.103)) est appelée pour déterminer quelles actions sont disponibles pour la ressource spécifiée.</span><span class="sxs-lookup"><span data-stu-id="8a49a-130">The [AdvertiseServiceAction method](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859971(v=vs.103)) is called to determine what actions are available for the specified resource.</span></span> <span data-ttu-id="8a49a-131">Cette méthode est appelée uniquement pour les actions qui ne sont pas toujours disponibles.</span><span class="sxs-lookup"><span data-stu-id="8a49a-131">This method is only called for actions that are not always available.</span></span> <span data-ttu-id="8a49a-132">Elle s'utilise pour vérifier si l'action doit être incluse dans la réponse OData en fonction de l'état de la ressource demandée ou de l'état du service.</span><span class="sxs-lookup"><span data-stu-id="8a49a-132">It is used to check if the action should be included in the OData response based upon the state of the resource being requested or the state of the service.</span></span> <span data-ttu-id="8a49a-133">Le mode de vérification dépend entièrement de vous.</span><span class="sxs-lookup"><span data-stu-id="8a49a-133">How this check is accomplished is completely up to you.</span></span> <span data-ttu-id="8a49a-134">Si l'opération permettant de calculer la disponibilité et la ressource active dans un flux est coûteuse en ressources, la vérification peut être ignorée et l'action publiée.</span><span class="sxs-lookup"><span data-stu-id="8a49a-134">If it is an expensive to calculate availability and the current resource is in a feed, it is acceptable to skip the check and advertise the action.</span></span> <span data-ttu-id="8a49a-135">Le paramètre `inFeed` a la valeur `true` si la ressource active retournée fait partie d'un flux.</span><span class="sxs-lookup"><span data-stu-id="8a49a-135">The `inFeed` parameter is set to `true` if the current resource being returned is part of a feed.</span></span>  
  
#### <a name="createinvokable"></a><span data-ttu-id="8a49a-136">CreateInvokable</span><span class="sxs-lookup"><span data-stu-id="8a49a-136">CreateInvokable</span></span>  
 <span data-ttu-id="8a49a-137">[CreateInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859940(v=vs.103)) est appelé pour créer un [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) qui contient un délégué qui encapsule le code qui implémente le comportement de l’action.</span><span class="sxs-lookup"><span data-stu-id="8a49a-137">[CreateInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859940(v=vs.103)) is called to create a [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) that contains a delegate that encapsulates the code that implements the action’s behavior.</span></span> <span data-ttu-id="8a49a-138">Cela crée l’instance [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) , mais n’appelle pas l’action.</span><span class="sxs-lookup"><span data-stu-id="8a49a-138">This creates the [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) instance but does not invoke the action.</span></span> <span data-ttu-id="8a49a-139">Les actions de service de données WCF ont des effets secondaires et doivent fonctionner conjointement avec le fournisseur de mise à jour pour enregistrer ces modifications sur le disque.</span><span class="sxs-lookup"><span data-stu-id="8a49a-139">WCF Data Service Actions have side effects and need to work in conjunction with the Update Provider to save those changes to disk.</span></span> <span data-ttu-id="8a49a-140">La méthode [IDataServiceInvokable. Invoke](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859924(v=vs.103)) est appelée à partir de la méthode SaveChanges () du fournisseur de mise à jour est appelée.</span><span class="sxs-lookup"><span data-stu-id="8a49a-140">The [IDataServiceInvokable.Invoke](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859924(v=vs.103)) method is called from the Update Provider’s SaveChanges() method is called.</span></span>  
  
#### <a name="getserviceactions"></a><span data-ttu-id="8a49a-141">GetServiceActions</span><span class="sxs-lookup"><span data-stu-id="8a49a-141">GetServiceActions</span></span>  
 <span data-ttu-id="8a49a-142">Cette méthode retourne une collection d’instances [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) qui représentent toutes les actions exposées par un service de données WCF.</span><span class="sxs-lookup"><span data-stu-id="8a49a-142">This method returns a collection of [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) instances that represent all of the actions a WCF Data Service exposes.</span></span> <span data-ttu-id="8a49a-143">[ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) est la représentation de métadonnées d’une action, qui comprend des informations telles que le nom de l’action, ses paramètres et son type de retour.</span><span class="sxs-lookup"><span data-stu-id="8a49a-143">[ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is the metadata representation of an Action, that includes information like the Action name, its parameters, and its return type.</span></span>  
  
#### <a name="getserviceactionsbybindingparametertype"></a><span data-ttu-id="8a49a-144">GetServiceActionsByBindingParameterType</span><span class="sxs-lookup"><span data-stu-id="8a49a-144">GetServiceActionsByBindingParameterType</span></span>  
 <span data-ttu-id="8a49a-145">Cette méthode retourne une collection de toutes les instances [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) qui peuvent être liées au type de paramètre de liaison spécifié.</span><span class="sxs-lookup"><span data-stu-id="8a49a-145">This method returns a collection of all [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) instances that can be bound to the specified binding parameter type.</span></span> <span data-ttu-id="8a49a-146">En d’autres termes, tous les [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103))qui peuvent agir sur le type de ressource spécifié (également appelé type de paramètre de liaison). Cela est utilisé lorsque le service retourne une ressource afin d’inclure des informations sur les actions qui peuvent être appelées par rapport à cette ressource.</span><span class="sxs-lookup"><span data-stu-id="8a49a-146">In other words, all [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103))s that can act on the specified resource type (also called binding parameter type).This is used when the service returns a resource in order to include information about Actions that can be invoked against that resource.</span></span> <span data-ttu-id="8a49a-147">Cette méthode ne doit retourner que les actions qui lient au type exact de paramètre de liaison (aucun type dérivé).</span><span class="sxs-lookup"><span data-stu-id="8a49a-147">This method should only return actions that can bind to the exact binding parameter type (no derived types).</span></span> <span data-ttu-id="8a49a-148">Cette méthode est appelée une fois par demande par type rencontré et le résultat est mis en cache par les services de données WCF.</span><span class="sxs-lookup"><span data-stu-id="8a49a-148">This method is called once per request per type encountered and the result is cached by WCF Data Services.</span></span>  
  
#### <a name="tryresolveserviceaction"></a><span data-ttu-id="8a49a-149">TryResolveServiceAction</span><span class="sxs-lookup"><span data-stu-id="8a49a-149">TryResolveServiceAction</span></span>  
 <span data-ttu-id="8a49a-150">Cette méthode recherche un [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) spécifié et retourne `true` si le [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) est trouvé.</span><span class="sxs-lookup"><span data-stu-id="8a49a-150">This method searches for a specified [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) and returns `true` if the [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is found.</span></span> <span data-ttu-id="8a49a-151">S’il est trouvé, [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) est retourné dans `serviceAction` le `out` paramètre.</span><span class="sxs-lookup"><span data-stu-id="8a49a-151">If found, the [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is returned in the `serviceAction` `out` parameter.</span></span>  
  
### <a name="idataserviceinvokable"></a><span data-ttu-id="8a49a-152">IDataServiceInvokable</span><span class="sxs-lookup"><span data-stu-id="8a49a-152">IDataServiceInvokable</span></span>  
 <span data-ttu-id="8a49a-153">Cette interface offre un moyen d'exécuter une action de service de données WCF.</span><span class="sxs-lookup"><span data-stu-id="8a49a-153">This interface provides a way to execute a WCF Data Service Action.</span></span> <span data-ttu-id="8a49a-154">Lorsque vous implémentez IDataServiceInvokable, vous êtes chargé de trois opérations :</span><span class="sxs-lookup"><span data-stu-id="8a49a-154">When implementing IDataServiceInvokable you are responsible for 3 things:</span></span>  
  
1. <span data-ttu-id="8a49a-155">capture et marshaling potentiel des paramètres ;</span><span class="sxs-lookup"><span data-stu-id="8a49a-155">Capturing and potentially marshaling the parameters</span></span>  
  
2. <span data-ttu-id="8a49a-156">distribution des paramètres dans le code qui implémente réellement l'action lorsque la méthode Invoke() est appelée ;</span><span class="sxs-lookup"><span data-stu-id="8a49a-156">Dispatching the parameters to the code that actually implements the Action when Invoke() is called</span></span>  
  
3. <span data-ttu-id="8a49a-157">stockage des résultats de la méthode Invoke() de façon à ce qu'ils puissent être récupérés en utilisant la méthode GetResult().</span><span class="sxs-lookup"><span data-stu-id="8a49a-157">Storing any results from Invoke() so they can be retrieved using GetResult()</span></span>  
  
 <span data-ttu-id="8a49a-158">Les paramètres peuvent être passés en tant que jetons.</span><span class="sxs-lookup"><span data-stu-id="8a49a-158">The parameters may be passed as tokens.</span></span> <span data-ttu-id="8a49a-159">En effet, il est possible d’écrire un fournisseur de services de données qui fonctionne avec des jetons qui représentent des ressources ; le cas échéant, vous devrez peut-être convertir (marshaler) ces jetons en ressources réelles avant de les distribuer à l’action réelle.</span><span class="sxs-lookup"><span data-stu-id="8a49a-159">This is because it is possible to write a Data Service Provider that works with tokens that represent resources, if this is the case you may need to convert (marshal) these tokens into actual resources before dispatching to the actual action.</span></span> <span data-ttu-id="8a49a-160">Une fois le paramètre marshalé, il doit être dans un état modifiable afin que toutes les modifications apportées à la ressource lorsque l’action est appelée soient enregistrées et écrites sur le disque.</span><span class="sxs-lookup"><span data-stu-id="8a49a-160">After the parameter has been marshaled, it must be in an editable state so that any changes to the resource that occur when the action is invoked will be saved and written to disk.</span></span>  
  
 <span data-ttu-id="8a49a-161">Cette interface requiert deux méthodes : Invoke et GetResult.</span><span class="sxs-lookup"><span data-stu-id="8a49a-161">This interface requires two methods: Invoke and GetResult.</span></span> <span data-ttu-id="8a49a-162">Invoke appelle le délégué qui implémente le comportement de l'action et GetResult retourne le résultat de l'action.</span><span class="sxs-lookup"><span data-stu-id="8a49a-162">Invoke invokes the delegate that implements the action’s behavior and GetResult returns the result of the action.</span></span>  
  
## <a name="invoking-a-wcf-data-service-action"></a><span data-ttu-id="8a49a-163">Appel d'une action de service de données WCF</span><span class="sxs-lookup"><span data-stu-id="8a49a-163">Invoking a WCF Data Service Action</span></span>  
 <span data-ttu-id="8a49a-164">Les actions sont appelées en utilisant une requête POST HTTP.</span><span class="sxs-lookup"><span data-stu-id="8a49a-164">Actions are invoked using an HTTP POST request.</span></span> <span data-ttu-id="8a49a-165">L'URL spécifie la ressource suivie par le nom de l'action.</span><span class="sxs-lookup"><span data-stu-id="8a49a-165">The URL specifies the resource followed by the action name.</span></span> <span data-ttu-id="8a49a-166">Les paramètres sont passés dans le corps de la requête.</span><span class="sxs-lookup"><span data-stu-id="8a49a-166">Parameters are passed in the body of the request.</span></span> <span data-ttu-id="8a49a-167">Par exemple, s'il existe un service appelé MovieService qui expose une action appelée Rate.</span><span class="sxs-lookup"><span data-stu-id="8a49a-167">For example if there was a service called MovieService which exposed an action called Rate.</span></span> <span data-ttu-id="8a49a-168">Vous pouvez utiliser l'URL suivante pour appeler l'action Rate sur un film spécifique :</span><span class="sxs-lookup"><span data-stu-id="8a49a-168">You could use the following URL to invoke the Rate action on a specific movie:</span></span>  
  
 `http://MovieServer/MovieService.svc/Movies(1)/Rate`
  
 <span data-ttu-id="8a49a-169">Movies(1) indique le film que vous voulez évaluer et Rate indique l'action d'évaluation.</span><span class="sxs-lookup"><span data-stu-id="8a49a-169">Movies(1) specifies the movie you wish to rate and Rate specifies the Rate action.</span></span> <span data-ttu-id="8a49a-170">La valeur réelle de l'évaluation sera dans la corps de la requête HTTP tel que l'illustre cet exemple :</span><span class="sxs-lookup"><span data-stu-id="8a49a-170">The actual value of the rating will be in the body of the HTTP request as shown in the following example:</span></span>  
  
```  
POST http://MovieServer/MoviesService.svc/Movies(1)/Rate HTTP/1.1   
Content-Type: application/json   
Content-Length: 20   
Host: localhost:15238  
{   
   "rating": 4   
}  
```  
  
> [!WARNING]
> <span data-ttu-id="8a49a-171">L'exemple de code ci-dessus ne fonctionnera qu'avec les services de données WCF version 5.2 et version ultérieure qui prennent en charge le format JSON léger.</span><span class="sxs-lookup"><span data-stu-id="8a49a-171">The above sample code will work only with WCF Data Services 5.2 and later which has support for JSON light.</span></span> <span data-ttu-id="8a49a-172">Si vous utilisez une version antérieure des services de données WCF, vous devez spécifier le type de contenu détaillé JSON comme suit : `application/json;odata=verbose`.</span><span class="sxs-lookup"><span data-stu-id="8a49a-172">If using an earlier version of WCF Data Services, you must specify the json verbose content-type as follows: `application/json;odata=verbose`.</span></span>  
  
 <span data-ttu-id="8a49a-173">Vous pouvez aussi appeler une action en utilisant le client des services de données WCF comme indiqué dans l'extrait de code suivant :</span><span class="sxs-lookup"><span data-stu-id="8a49a-173">Alternatively you can invoke an action using the WCF Data Services Client as shown in the following code snippet.</span></span>  
  
```csharp
MoviesModel context = new MoviesModel (new Uri("http://MyServer/MoviesService.svc/"));  
//...  
context.Execute(new Uri("http://MyServer/MoviesService.svc/Movies(1)/Rate"), "POST", new BodyOperationParameter("rating",4) );
```
  
 <span data-ttu-id="8a49a-174">Dans l'extrait de code ci-dessus, la classe `MoviesModel` a été générée en utilisant Visual Studio pour ajouter une référence de service à un service de données WCF.</span><span class="sxs-lookup"><span data-stu-id="8a49a-174">In the code snippet above, the `MoviesModel` class was generated by using Visual Studio to Add Service Reference to a WCF Data Service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8a49a-175">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8a49a-175">See also</span></span>

- [<span data-ttu-id="8a49a-176">WCF Data Services 4.5</span><span class="sxs-lookup"><span data-stu-id="8a49a-176">WCF Data Services 4.5</span></span>](index.md)
- [<span data-ttu-id="8a49a-177">Définition de WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="8a49a-177">Defining WCF Data Services</span></span>](defining-wcf-data-services.md)
- [<span data-ttu-id="8a49a-178">Développement et déploiement de WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="8a49a-178">Developing and Deploying WCF Data Services</span></span>](developing-and-deploying-wcf-data-services.md)
- [<span data-ttu-id="8a49a-179">Fournisseurs de services de données personnalisés</span><span class="sxs-lookup"><span data-stu-id="8a49a-179">Custom Data Service Providers</span></span>](custom-data-service-providers-wcf-data-services.md)
