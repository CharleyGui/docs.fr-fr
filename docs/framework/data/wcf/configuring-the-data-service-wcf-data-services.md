---
title: Configuration du service de données (services de données WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, configuring
ms.assetid: 59efd4c8-cc7a-4800-a0a4-d3f8abe6c55c
ms.openlocfilehash: 6f73fa43bcb99e53adabe8b49ffee75c65802eca
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/14/2020
ms.locfileid: "79399888"
---
# <a name="configuring-the-data-service-wcf-data-services"></a>Configuration du service de données (services de données WCF)
Avec WCF Data Services, vous pouvez créer des services de données qui exposent les flux du protocole de données ouvertes (OData). Les données de ces flux peuvent provenir de diverses sources. WCF Data Services utilise des fournisseurs de données pour exposer ces données sous forme d’alimentation OData. Ces fournisseurs comprennent un fournisseur Entity Framework, un fournisseur de réflexion et un jeu d'interfaces de fournisseur de services de données personnalisé. L'implémentation de fournisseur définit le modèle de données du service. Pour plus d’informations, voir [Fournisseurs de services de données](data-services-providers-wcf-data-services.md).  
  
 Dans WCF Data Services, un service de données <xref:System.Data.Services.DataService%601> est une classe qui hérite de la classe, où le type de service de données est le conteneur d’entités du modèle de données. Ce conteneur d'entités a une ou plusieurs propriétés qui retournent un objet <xref:System.Linq.IQueryable%601> utilisé pour accéder aux jeux d'entités dans le modèle de données.  
  
 Les comportements du service de données sont définis par les membres de la classe <xref:System.Data.Services.DataServiceConfiguration>, et par les membres de la classe <xref:System.Data.Services.DataServiceBehavior>, accessible depuis la propriété <xref:System.Data.Services.DataServiceConfiguration.DataServiceBehavior%2A> de la classe <xref:System.Data.Services.DataServiceConfiguration>. La classe <xref:System.Data.Services.DataServiceConfiguration> est fournie à la méthode `InitializeService` implémentée par le service de données, comme dans l'implémentation suivante d'un service de données Northwind :  
  
[!code-csharp[Astoria Northwind Service#DataServiceConfigComplete](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_service/cs/northwind.svc.cs#dataserviceconfigcomplete)]  
[!code-vb[Astoria Northwind Service#DataServiceConfigComplete](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_service/vb/northwind.svc.vb#dataserviceconfigcomplete)]  
  
## <a name="data-service-configuration-settings"></a>Paramètres de la configuration du service de données  
 La classe <xref:System.Data.Services.DataServiceConfiguration> vous permet de spécifier les comportements de service de données suivants :  
  
|Membre|Comportement|  
|------------|--------------|  
|<xref:System.Data.Services.DataServiceBehavior.AcceptCountRequests%2A>|Vous permet de désactiver les demandes de nombre soumises au service de données à l’aide du segment de chemin d’accès `$count` et l’option de requête `$inlinecount`. Pour plus d’informations, voir [OData: URI Conventions](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).|  
|<xref:System.Data.Services.DataServiceBehavior.AcceptProjectionRequests%2A>|Vous permet de désactiver la prise en charge pour la projection de données dans les demandes soumises au service de données à l'aide de l'option de requête `$select`. Pour plus d’informations, voir [OData: URI Conventions](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).|  
|<xref:System.Data.Services.DataServiceConfiguration.EnableTypeAccess%2A>|Permet l'exposition d'un type de données dans les métadonnées pour un fournisseur de métadonnées dynamique défini à l'aide de l'interface <xref:System.Data.Services.Providers.IDataServiceMetadataProvider>.|  
|<xref:System.Data.Services.DataServiceConfiguration.EnableTypeConversion%2A>|Vous permet de spécifier si l'exécution du service de données doit convertir le type contenu dans la charge utile au type de propriété réel spécifié dans la demande.|  
|<xref:System.Data.Services.DataServiceBehavior.InvokeInterceptorsOnLinkDelete%2A>|Vous permet de spécifier si les intercepteurs de modification enregistrés sont appelés sur les entités liées lorsqu'un lien de relation entre deux entités est supprimé.|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxBatchCount%2A>|Vous permet de limiter le nombre d'ensembles de modifications et d'opérations de requête autorisés dans un lot unique. Pour plus d’informations, voir [OData: Batch](https://www.odata.org/documentation/odata-version-2-0/batch-processing/) and [Batching Operations](batching-operations-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxChangesetCount%2A>|Vous permet de limiter le nombre de modifications qui peuvent être incluses dans un seul ensemble de modifications. Pour plus d’informations, voir [Comment : Activer le paging des résultats des services de données.](how-to-enable-paging-of-data-service-results-wcf-data-services.md)|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxExpandCount%2A>|Vous permet de limiter la taille d'une réponse en limitant le nombre des entités connexes qui peuvent être incluses dans une demande unique à l'aide de l'opérateur de requête `$expand`. Pour plus d’informations, voir [OData: URI Conventions](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/) and [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxExpandDepth%2A>|Vous permet de limiter la taille d'une réponse en limitant la profondeur du graphique des entités connexes qui peuvent être incluses dans une demande unique à l'aide de l'opérateur de requête `$expand`. Pour plus d’informations, voir [OData: URI Conventions](https://www.odata.org/documentation/odata-version-2-0/uri-conventions/) and [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxObjectCountOnInsert%2A>|Vous permet de limiter le nombre d'entités à insérer et pouvant être contenues dans une requête POST unique.|  
|<xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A>|Définit la version du protocole Atom utilisé par le service de données. Lorsque la valeur <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> de la est définie à une <xref:System.Data.Services.Common.DataServiceProtocolVersion>valeur inférieure à la valeur maximale de , la dernière fonctionnalité de WCF Data Services n’est pas disponible pour les clients accédant au service de données. Pour plus d’informations, voir [Version de service de données](data-service-versioning-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxResultsPerCollection%2A>|Vous permet de limiter la taille d'une réponse en limitant le nombre d'entités dans chaque jeu d'entités retourné comme un flux de données.|  
|<xref:System.Data.Services.DataServiceConfiguration.RegisterKnownType%2A>|Ajoute un type de données à la liste des types reconnus par le service de données.|  
|<xref:System.Data.Services.DataServiceConfiguration.SetEntitySetAccessRule%2A>|Définit les droits d'accès pour les ressources de jeu d'entités qui sont disponibles sur le service de données. Une valeur d'astérisque (`*` peut être fournie pour le paramètre de nom pour définir l'accès pour tous les jeux d'entités restants au même niveau. Nous vous recommandons de définir l'accès aux jeux d'entités pour fournir l'accès le moins privilégié aux ressources de service de données requises par les applications clientes. Pour plus d'informations, consultez [Securing WCF Data Services](securing-wcf-data-services.md). Pour des exemples des droits d’accès minimaux requis pour une action URI et HTTP donnée, consultez le tableau dans la section [Minimum Resource Access Requirements.](configuring-the-data-service-wcf-data-services.md#accessRequirements)|  
|<xref:System.Data.Services.DataServiceConfiguration.SetEntitySetPageSize%2A>|Définit la taille maximale de page pour une ressource de jeu d'entités. Pour plus d’informations, voir [Comment : Activer le paging des résultats des services de données.](how-to-enable-paging-of-data-service-results-wcf-data-services.md)|  
|<xref:System.Data.Services.DataServiceConfiguration.SetServiceOperationAccessRule%2A>|Définit les droits d'accès pour les opérations de service définies sur le service de données. Pour plus d’informations, voir [Opérations de service](service-operations-wcf-data-services.md). Une valeur d'astérisque (`*` peut être fournie pour le paramètre de nom pour définir l'accès pour toutes les opérations de service au même niveau. Nous vous recommandons de définir l'accès aux opérations de service pour fournir l'accès le moins privilégié aux ressources de service de données requises par les applications clientes. Pour plus d'informations, consultez [Securing WCF Data Services](securing-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.UseVerboseErrors%2A>|Cette propriété de configuration vous permet de dépanner plus facilement un service de données en retournant plus d'informations dans le message de réponse d'erreur. L'utilisation de cette option n'est pas destinée à un environnement de production. Pour plus d’informations, voir [Développer et déployer WCF Data Services](developing-and-deploying-wcf-data-services.md).|  
  
<a name="accessRequirements"></a>
## <a name="minimum-resource-access-requirements"></a>Spécifications minimales pour l'accès aux ressources  
 Le tableau suivant détaille les droits minimaux de jeu d'entités qui doivent être accordés pour exécuter une opération spécifique. Les exemples de chemin sont basés sur le service de données Northwind qui est créé lorsque vous terminez le [quickstart](quickstart-wcf-data-services.md). Puisque l'énumération <xref:System.Data.Services.EntitySetRights> et l'énumération <xref:System.Data.Services.ServiceOperationRights> sont toutes deux définies à l'aide de l'objet <xref:System.FlagsAttribute>, vous pouvez utiliser un opérateur OR logique pour spécifier plusieurs autorisations pour un jeu d'entités ou une opération unique. Pour plus d’informations, voir [Comment : Activer l’accès au service de données](how-to-enable-access-to-the-data-service-wcf-data-services.md).  
  
|Chemin d'accès/action|`GET`|`DELETE`|`MERGE`|`POST`|`PUT`|  
|------------------|-----------|--------------|-------------|------------|-----------|  
|`/Customers`|<xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non pris en charge|Non pris en charge|<xref:System.Data.Services.EntitySetRights.WriteAppend>|Non pris en charge|  
|`/Customers('ALFKI')`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteDelete>|<xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteMerge>|n/a|<xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non pris en charge|Non pris en charge|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteMerge> ou <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> -et-<br /><br /> `Orders` `:` et <xref:System.Data.Services.EntitySetRights.WriteAppend>|Non pris en charge|  
|`/Customers('ALFKI')/Orders(10643)`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders` : <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteDelete>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders` : <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteMerge>|Non pris en charge|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders` : <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Orders(10643)/Customer`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers` : <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteDelete><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteMerge> ;<br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.WriteAppend><br /><br /> -et-<br /><br /> `Orders` : <xref:System.Data.Services.EntitySetRights.WriteAppend> et <xref:System.Data.Services.EntitySetRights.ReadSingle>|Non pris en charge|  
|`/Customers('ALFKI')/$links/Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non pris en charge|Non pris en charge|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteMerge> ou <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|Non pris en charge|  
|`/Customers('ALFKI')/$links/Orders(10643)`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteMerge> ou <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|Non pris en charge|Non pris en charge|Non pris en charge|  
|`/Orders(10643)/$links/Customer`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteMerge> ou <xref:System.Data.Services.EntitySetRights.WriteReplace>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders` : <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteMerge>|Non pris en charge|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle>;<br /><br /> -et-<br /><br /> `Orders` : <xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers/$count`|<xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non pris en charge|Non pris en charge|Non pris en charge|Non pris en charge|  
|`/Customers('ALFKI')/ContactName`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|Non pris en charge|<xref:System.Data.Services.EntitySetRights.WriteMerge>|Non pris en charge|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/Address/StreetAddress/$value`<sup>1</sup>|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.WriteDelete>|Non pris en charge|Non pris en charge|Non pris en charge|  
|`/Customers('ALFKI')/ContactName/$value`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.ReadSingle> et <xref:System.Data.Services.EntitySetRights.WriteDelete>|<xref:System.Data.Services.EntitySetRights.WriteMerge>|Non pris en charge|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/$value` <sup>2</sup>|<xref:System.Data.Services.EntitySetRights.ReadSingle>|Non pris en charge|Non pris en charge|Non pris en charge|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers?$select=Orders/*&$expand=Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non pris en charge|Non pris en charge|`Customers`: <xref:System.Data.Services.EntitySetRights.WriteAppend>|Non pris en charge|  
|`/Customers('ALFKI')?$select=Orders/*&$expand=Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -et-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non pris en charge|Non pris en charge|Non pris en charge|Non pris en charge|  
  
 <sup>1</sup> Dans cet `Address` exemple, représente une `Customers` propriété de type `StreetAddress`complexe de l’entité qui a une propriété nommée . Le modèle utilisé par les services de données Northwind ne définit pas ce type complexe explicitement. Lorsque le modèle de données est défini à l'aide du fournisseur Entity Framework, vous pouvez utiliser les outils Entity Data Model pour définir un tel type complexe. Pour plus d’informations, voir [Comment : Créer et modifier les types complexes.](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd456820(v=vs.100))  
  
 <sup>2</sup> Cette URI est prise en charge lorsqu’une propriété qui renvoie un gros objet binaire (BLOB) est définie `Customers`comme la ressource médiatique qui appartient à une entité qui est une entrée de lien multimédia, qui dans ce cas, est . Pour plus d’informations, voir [Streaming Provider](streaming-provider-wcf-data-services.md).  
  
<a name="versioning"></a>
## <a name="versioning-requirements"></a>Exigences pour le contrôle de version  
 Les comportements de configuration de service de données suivants nécessitent la version 2 du protocole OData, ou des versions ultérieures :  
  
- Prise en charge des demandes relatives au nombre de lignes.  
  
- Prise en charge de l'option de requête $select pour la projection.  
  
 Pour plus d’informations, voir [Version de service de données](data-service-versioning-wcf-data-services.md).  
  
## <a name="see-also"></a>Voir aussi

- [Définition des services de données WCF](defining-wcf-data-services.md)
- [Hébergement du service de données](hosting-the-data-service-wcf-data-services.md)
