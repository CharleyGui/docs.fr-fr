---
title: Protection des informations de connexion
description: Découvrez les vulnérabilités de sécurité dans les chaînes de connexion, qui peuvent survenir en raison de la construction et de la conservation des chaînes de connexion et du type d’authentification.
ms.date: 03/30/2017
ms.assetid: 1471f580-bcd4-4046-bdaf-d2541ecda2f4
ms.openlocfilehash: 76b182a3d14be08d956f8ffb95dd2ae05245c003
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90557890"
---
# <a name="protecting-connection-information"></a><span data-ttu-id="d70d7-103">Protection des informations de connexion</span><span class="sxs-lookup"><span data-stu-id="d70d7-103">Protecting Connection Information</span></span>
<span data-ttu-id="d70d7-104">La protection de l'accès à votre source de données représente l'un de vos principaux objectifs lorsque vous sécurisez une application.</span><span class="sxs-lookup"><span data-stu-id="d70d7-104">Protecting access to your data source is one of the most important goals when securing an application.</span></span> <span data-ttu-id="d70d7-105">Une chaîne de connexion présente une vulnérabilité potentielle si elle n'est pas sécurisée.</span><span class="sxs-lookup"><span data-stu-id="d70d7-105">A connection string presents a potential vulnerability if it is not secured.</span></span> <span data-ttu-id="d70d7-106">Le stockage d'informations de connexion au format texte brut ou sa conservation dans la mémoire risque de compromettre l'ensemble de votre système.</span><span class="sxs-lookup"><span data-stu-id="d70d7-106">Storing connection information in plain text or persisting it in memory risks compromising your entire system.</span></span> <span data-ttu-id="d70d7-107">Les chaînes de connexion incorporées dans votre code source peuvent être lues à l’aide de l' [Ildasm.exe (Désassembleur il)](../../tools/ildasm-exe-il-disassembler.md) pour afficher le langage MSIL (Microsoft Intermediate Language) dans un assembly compilé.</span><span class="sxs-lookup"><span data-stu-id="d70d7-107">Connection strings embedded in your source code can be read using the [Ildasm.exe (IL Disassembler)](../../tools/ildasm-exe-il-disassembler.md) to view Microsoft intermediate language (MSIL) in a compiled assembly.</span></span>  
  
 <span data-ttu-id="d70d7-108">Des vulnérabilités de sécurité impliquant des chaînes de connexion peuvent se produire en fonction du type d'authentification utilisé, de la manière dont les chaînes de connexion sont conservées dans la mémoire et sur le disque, et des techniques utilisées pour les construire au moment de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="d70d7-108">Security vulnerabilities involving connection strings can arise based on the type of authentication used, how connection strings are persisted in memory and on disk, and the techniques used to construct them at run time.</span></span>  
  
## <a name="use-windows-authentication"></a><span data-ttu-id="d70d7-109">Utiliser l'authentification Windows</span><span class="sxs-lookup"><span data-stu-id="d70d7-109">Use Windows Authentication</span></span>  
 <span data-ttu-id="d70d7-110">Pour aider à limiter l'accès à votre source de données, vous devez sécuriser des informations de connexion telles que l'ID utilisateur, le mot de passe et le nom de source de données.</span><span class="sxs-lookup"><span data-stu-id="d70d7-110">To help limit access to your data source, you must secure connection information such as user ID, password, and data source name.</span></span> <span data-ttu-id="d70d7-111">Afin d’éviter d’exposer les informations utilisateur, nous vous recommandons d’utiliser l’authentification Windows (parfois appelée *sécurité intégrée*) dans la mesure du possible.</span><span class="sxs-lookup"><span data-stu-id="d70d7-111">In order to avoid exposing user information, we recommend using Windows authentication (sometimes referred to as *integrated security*) wherever possible.</span></span> <span data-ttu-id="d70d7-112">L'authentification Windows est spécifiée dans une chaîne de connexion à l'aide des mots clés `Integrated Security` ou `Trusted_Connection`, ce qui supprime le recours à un ID utilisateur et à un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="d70d7-112">Windows authentication is specified in a connection string by using the `Integrated Security` or `Trusted_Connection` keywords, eliminating the need to use a user ID and password.</span></span> <span data-ttu-id="d70d7-113">Lors de l'utilisation de l'authentification Windows, les utilisateurs sont authentifiés par Windows et l'accès aux ressources de serveur et de base de données est déterminé en octroyant des autorisations aux utilisateurs et aux groupes Windows.</span><span class="sxs-lookup"><span data-stu-id="d70d7-113">When using Windows authentication, users are authenticated by Windows, and access to server and database resources is determined by granting permissions to Windows users and groups.</span></span>  
  
 <span data-ttu-id="d70d7-114">Dans les cas où l'utilisation de l'authentification Windows n'est pas possible, vous devez être extrêmement prudent, car les informations d'authentification utilisateur sont exposées dans la chaîne de connexion.</span><span class="sxs-lookup"><span data-stu-id="d70d7-114">For situations where it is not possible to use Windows authentication, you must use extra care because user credentials are exposed in the connection string.</span></span> <span data-ttu-id="d70d7-115">Dans une application ASP.NET, vous pouvez configurer un compte Windows en tant qu'identité fixe utilisée pour la connexion à des bases de données et autres ressources réseau.</span><span class="sxs-lookup"><span data-stu-id="d70d7-115">In an ASP.NET application, you can configure a Windows account as a fixed identity that is used to connect to databases and other network resources.</span></span> <span data-ttu-id="d70d7-116">Vous activez l’emprunt d’identité dans l’élément Identity dans le fichier **web.config** et spécifiez un nom d’utilisateur et un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="d70d7-116">You enable impersonation in the identity element in the **web.config** file and specify a user name and password.</span></span>  
  
```xml  
<identity impersonate="true"
        userName="MyDomain\UserAccount"
        password="*****" />  
```  
  
 <span data-ttu-id="d70d7-117">Le compte d'identité fixe doit être un compte avec des privilèges faibles auquel seules les autorisations nécessaires dans la base de données ont été octroyées.</span><span class="sxs-lookup"><span data-stu-id="d70d7-117">The fixed identity account should be a low-privilege account that has been granted only necessary permissions in the database.</span></span> <span data-ttu-id="d70d7-118">En outre, vous devez chiffrer le fichier de configuration afin que le nom d'utilisateur et le mot de passe ne soient pas exposés en texte clair.</span><span class="sxs-lookup"><span data-stu-id="d70d7-118">In addition, you should encrypt the configuration file so that the user name and password are not exposed in clear text.</span></span>  
  
## <a name="do-not-use-universal-data-link-udl-files"></a><span data-ttu-id="d70d7-119">N'utilisez pas de fichiers UDL (Universal Data Link)</span><span class="sxs-lookup"><span data-stu-id="d70d7-119">Do Not Use Universal Data Link (UDL) files</span></span>  
 <span data-ttu-id="d70d7-120">Évitez de stocker des chaînes de connexion pour <xref:System.Data.OleDb.OleDbConnection> dans un fichier UDL (Universal Data Link).</span><span class="sxs-lookup"><span data-stu-id="d70d7-120">Avoid storing connection strings for an <xref:System.Data.OleDb.OleDbConnection> in a Universal Data Link (UDL) file.</span></span> <span data-ttu-id="d70d7-121">Les fichiers UDL sont stockés en texte clair et ne peuvent pas être chiffrés.</span><span class="sxs-lookup"><span data-stu-id="d70d7-121">UDLs are stored in clear text and cannot be encrypted.</span></span> <span data-ttu-id="d70d7-122">Un fichier UDL est une ressource basée sur un fichier externe pour votre application et il ne peut pas être sécurisé ou chiffré à l'aide du .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d70d7-122">A UDL file is an external file-based resource to your application, and it cannot be secured or encrypted using the .NET Framework.</span></span>  
  
## <a name="avoid-injection-attacks-with-connection-string-builders"></a><span data-ttu-id="d70d7-123">Évitez les attaques par injection à l'aide de générateurs de chaînes de connexion</span><span class="sxs-lookup"><span data-stu-id="d70d7-123">Avoid Injection Attacks with Connection String Builders</span></span>  
 <span data-ttu-id="d70d7-124">Une attaque par injection de chaîne de connexion peut se produire lorsqu'une concaténation de chaîne dynamique est utilisée pour générer des chaînes de connexion en fonction de l'entrée utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d70d7-124">A connection string injection attack can occur when dynamic string concatenation is used to build connection strings based on user input.</span></span> <span data-ttu-id="d70d7-125">Si l'entrée utilisateur n'est pas validée et que du texte ou des caractères malveillants ne sont pas placés dans une séquence d'échappement, un attaquant peut éventuellement accéder à des données sensibles ou à d'autres ressources sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="d70d7-125">If the user input is not validated and malicious text or characters not escaped, an attacker can potentially access sensitive data or other resources on the server.</span></span> <span data-ttu-id="d70d7-126">Pour résoudre ce problème, ADO.NET 2.0 a introduit de nouvelles classes de générateur de chaîne de connexion pour valider la syntaxe de chaîne de connexion et garantir que des paramètres supplémentaires ne sont pas introduits.</span><span class="sxs-lookup"><span data-stu-id="d70d7-126">To address this problem, ADO.NET 2.0 introduced new connection string builder classes to validate connection string syntax and ensure that additional parameters are not introduced.</span></span> <span data-ttu-id="d70d7-127">Pour plus d’informations, consultez [Builders de chaînes de connexion](connection-string-builders.md).</span><span class="sxs-lookup"><span data-stu-id="d70d7-127">For more information, see [Connection String Builders](connection-string-builders.md).</span></span>  
  
## <a name="use-persist-security-infofalse"></a><span data-ttu-id="d70d7-128">Utilisez Persist Security Info=False</span><span class="sxs-lookup"><span data-stu-id="d70d7-128">Use Persist Security Info=False</span></span>  
 <span data-ttu-id="d70d7-129">La valeur par défaut pour `Persist Security Info` est False ; nous vous recommandons d'utiliser cette valeur par défaut dans toutes les chaînes de connexion.</span><span class="sxs-lookup"><span data-stu-id="d70d7-129">The default value for `Persist Security Info` is false; we recommend using this default in all connection strings.</span></span> <span data-ttu-id="d70d7-130">Le paramétrage de `Persist Security Info` avec la valeur `true` ou `yes` permet d'obtenir des informations sensibles pour la sécurité, dont l'ID utilisateur et le mot de passe, à partir d'une connexion une fois celle-ci ouverte.</span><span class="sxs-lookup"><span data-stu-id="d70d7-130">Setting `Persist Security Info` to `true` or `yes` allows security-sensitive information, including the user ID and password, to be obtained from a connection after it has been opened.</span></span> <span data-ttu-id="d70d7-131">Lorsque `Persist Security Info` possède la valeur `false` ou `no`, les informations de sécurité sont ignorées après leur utilisation pour ouvrir la connexion, ce qui garantit qu'une source qui n'est pas digne de confiance ne dispose pas d'un accès à des informations sensibles sur la sécurité.</span><span class="sxs-lookup"><span data-stu-id="d70d7-131">When `Persist Security Info` is set to `false` or `no`, security information is discarded after it is used to open the connection, ensuring that an untrusted source does not have access to security-sensitive information.</span></span>  
  
## <a name="encrypt-configuration-files"></a><span data-ttu-id="d70d7-132">Chiffrez les fichiers de configuration</span><span class="sxs-lookup"><span data-stu-id="d70d7-132">Encrypt Configuration Files</span></span>  
 <span data-ttu-id="d70d7-133">Vous pouvez également stocker des chaînes de connexion dans des fichiers de configuration, ce qui évite d'avoir à les incorporer dans le code de votre application.</span><span class="sxs-lookup"><span data-stu-id="d70d7-133">You can also store connection strings in configuration files, which eliminates the need to embed them in your application's code.</span></span> <span data-ttu-id="d70d7-134">Les fichiers de configuration sont des fichiers XML standard pour lesquels le .NET Framework a défini un ensemble commun d'éléments.</span><span class="sxs-lookup"><span data-stu-id="d70d7-134">Configuration files are standard XML files for which the .NET Framework has defined a common set of elements.</span></span> <span data-ttu-id="d70d7-135">Les chaînes de connexion dans les fichiers de configuration sont généralement stockées à l’intérieur de l' **\<connectionStrings>** élément dans l' **app.config** pour une application Windows, ou dans le fichier **web.config** pour une application ASP.net.</span><span class="sxs-lookup"><span data-stu-id="d70d7-135">Connection strings in configuration files are typically stored inside the **\<connectionStrings>** element in the **app.config** for a Windows application, or the **web.config** file for an ASP.NET application.</span></span> <span data-ttu-id="d70d7-136">Pour plus d’informations sur les principes de base du stockage, de l’extraction et du chiffrement des chaînes de connexion à partir de fichiers de configuration, consultez [chaînes de connexion et fichiers de configuration](connection-strings-and-configuration-files.md).</span><span class="sxs-lookup"><span data-stu-id="d70d7-136">For more information on the basics of storing, retrieving and encrypting connection strings from configuration files, see [Connection Strings and Configuration Files](connection-strings-and-configuration-files.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d70d7-137">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d70d7-137">See also</span></span>

- [<span data-ttu-id="d70d7-138">Sécurisation des applications ADO.NET</span><span class="sxs-lookup"><span data-stu-id="d70d7-138">Securing ADO.NET Applications</span></span>](securing-ado-net-applications.md)
- <span data-ttu-id="d70d7-139">[Chiffrement des informations de configuration à l’aide de la configuration protégée](/previous-versions/aspnet/53tyfkaw(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="d70d7-139">[Encrypting Configuration Information Using Protected Configuration](/previous-versions/aspnet/53tyfkaw(v=vs.100))</span></span>
- [<span data-ttu-id="d70d7-140">Sécurité dans .NET</span><span class="sxs-lookup"><span data-stu-id="d70d7-140">Security in .NET</span></span>](../../../standard/security/index.md)
- [<span data-ttu-id="d70d7-141">Vue d'ensemble d’ADO.NET</span><span class="sxs-lookup"><span data-stu-id="d70d7-141">ADO.NET Overview</span></span>](ado-net-overview.md)
