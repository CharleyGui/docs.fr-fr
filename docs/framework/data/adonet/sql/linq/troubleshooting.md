---
title: Résolution des problèmes
ms.date: 03/30/2017
ms.assetid: 8cd4401c-b12c-4116-a421-f3dcffa65670
ms.openlocfilehash: ebcfec475d20492f5ce1f971163544d9faa52223
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64613762"
---
# <a name="troubleshooting"></a><span data-ttu-id="d061c-102">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="d061c-102">Troubleshooting</span></span>
<span data-ttu-id="d061c-103">Les informations suivantes exposent quelques problèmes que vous pouvez rencontrer dans vos applications [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] et fournissent des suggestions pour les éviter, ou du moins en réduire l'effet.</span><span class="sxs-lookup"><span data-stu-id="d061c-103">The following information exposes some issues you might encounter in your [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] applications, and provides suggestions to avoid or otherwise reduce the effect of these issues.</span></span>  
  
 <span data-ttu-id="d061c-104">Autres problèmes sont traités dans [Forum aux Questions](../../../../../../docs/framework/data/adonet/sql/linq/frequently-asked-questions.md).</span><span class="sxs-lookup"><span data-stu-id="d061c-104">Additional issues are addressed in [Frequently Asked Questions](../../../../../../docs/framework/data/adonet/sql/linq/frequently-asked-questions.md).</span></span>  
  
## <a name="unsupported-standard-query-operators"></a><span data-ttu-id="d061c-105">Opérateurs de requête standard non pris en charge</span><span class="sxs-lookup"><span data-stu-id="d061c-105">Unsupported Standard Query Operators</span></span>  
 [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <span data-ttu-id="d061c-106">ne prend pas en charge toutes les méthodes d'opérateur de requête standard (par exemple, <xref:System.Linq.Enumerable.ElementAt%2A>).</span><span class="sxs-lookup"><span data-stu-id="d061c-106">does not support all standard query operator methods (for example, <xref:System.Linq.Enumerable.ElementAt%2A>).</span></span> <span data-ttu-id="d061c-107">En conséquence, les projets qui sont compilés peuvent produire des erreurs d'exécution.</span><span class="sxs-lookup"><span data-stu-id="d061c-107">As a result, projects that compile can still produce run-time errors.</span></span> <span data-ttu-id="d061c-108">Pour plus d’informations, consultez [traduction des opérateurs de requête Standard](../../../../../../docs/framework/data/adonet/sql/linq/standard-query-operator-translation.md).</span><span class="sxs-lookup"><span data-stu-id="d061c-108">For more information, see [Standard Query Operator Translation](../../../../../../docs/framework/data/adonet/sql/linq/standard-query-operator-translation.md).</span></span>  
  
## <a name="memory-issues"></a><span data-ttu-id="d061c-109">Problèmes de mémoire</span><span class="sxs-lookup"><span data-stu-id="d061c-109">Memory Issues</span></span>  
 <span data-ttu-id="d061c-110">Si une requête implique une collection en mémoire et [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <xref:System.Data.Linq.Table%601>, la requête peut être exécutée en mémoire, en fonction de l’ordre dans lequel les deux collections sont spécifiées.</span><span class="sxs-lookup"><span data-stu-id="d061c-110">If a query involves an in-memory collection and [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <xref:System.Data.Linq.Table%601>, the query might be executed in memory, depending on the order in which the two collections are specified.</span></span> <span data-ttu-id="d061c-111">Si la requête doit être exécutée dans la mémoire, les données de la table de base de données devront être extraites.</span><span class="sxs-lookup"><span data-stu-id="d061c-111">If the query must be executed in memory, then the data from the database table will need to be retrieved.</span></span>  
  
 <span data-ttu-id="d061c-112">Cette approche est inefficace et peut se traduire par une utilisation significative de la mémoire et du processeur.</span><span class="sxs-lookup"><span data-stu-id="d061c-112">This approach is inefficient and could result in significant memory and processor usage.</span></span> <span data-ttu-id="d061c-113">Essayez d'éviter de telles requêtes multidomaines.</span><span class="sxs-lookup"><span data-stu-id="d061c-113">Try to avoid such multi-domain queries.</span></span>  
  
## <a name="file-names-and-sqlmetal"></a><span data-ttu-id="d061c-114">Noms de fichier et SQLMetal</span><span class="sxs-lookup"><span data-stu-id="d061c-114">File Names and SQLMetal</span></span>  
 <span data-ttu-id="d061c-115">Pour spécifier un nom de fichier d'entrée, ajoutez son nom à la ligne de commande comme fichier d'entrée.</span><span class="sxs-lookup"><span data-stu-id="d061c-115">To specify an input file name, add the name to the command line as the input file.</span></span> <span data-ttu-id="d061c-116">L’inclusion du nom de fichier dans la chaîne de connexion (avec l’option **/conn** ) n’est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="d061c-116">Including the file name in the connection string (using the **/conn** option) is not supported.</span></span> <span data-ttu-id="d061c-117">Pour plus d’informations, consultez [SqlMetal.exe (outil de génération de code)](../../../../../../docs/framework/tools/sqlmetal-exe-code-generation-tool.md).</span><span class="sxs-lookup"><span data-stu-id="d061c-117">For more information, see [SqlMetal.exe (Code Generation Tool)](../../../../../../docs/framework/tools/sqlmetal-exe-code-generation-tool.md).</span></span>  
  
## <a name="class-library-projects"></a><span data-ttu-id="d061c-118">Projets de bibliothèque de classe</span><span class="sxs-lookup"><span data-stu-id="d061c-118">Class Library Projects</span></span>  
 <span data-ttu-id="d061c-119">[!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)] crée une chaîne de connexion dans le fichier `app.config` du projet.</span><span class="sxs-lookup"><span data-stu-id="d061c-119">The [!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)] creates a connection string in the `app.config` file of the project.</span></span> <span data-ttu-id="d061c-120">Dans les projets de bibliothèque de classes, le fichier `app.config` n'est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="d061c-120">In class library projects, the `app.config` file is not used.</span></span> [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <span data-ttu-id="d061c-121">utilise la chaîne de connexion fournie dans les fichiers au moment du design.</span><span class="sxs-lookup"><span data-stu-id="d061c-121">uses the Connection String provided in the design-time files.</span></span> <span data-ttu-id="d061c-122">La modification de la valeur dans `app.config` ne modifie pas la base de données à laquelle votre application se connecte.</span><span class="sxs-lookup"><span data-stu-id="d061c-122">Changing the value in `app.config` does not change the database to which your application connects.</span></span>  
  
## <a name="cascade-delete"></a><span data-ttu-id="d061c-123">Suppression en cascade</span><span class="sxs-lookup"><span data-stu-id="d061c-123">Cascade Delete</span></span>  
 [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <span data-ttu-id="d061c-124">ne prend pas en charge ni ne reconnaît les opérations de suppression en cascade.</span><span class="sxs-lookup"><span data-stu-id="d061c-124">does not support or recognize cascade-delete operations.</span></span> <span data-ttu-id="d061c-125">Si vous souhaitez supprimer une ligne dans une table comportant des contraintes sur cette suppression, vous devez effectuer l'une des actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="d061c-125">If you want to delete a row in a table that has constraints against it, you must do either of the following:</span></span>  
  
- <span data-ttu-id="d061c-126">Définissez la règle `ON DELETE CASCADE` dans la contrainte de clé étrangère dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="d061c-126">Set the `ON DELETE CASCADE` rule in the foreign-key constraint in the database.</span></span>  
  
- <span data-ttu-id="d061c-127">Utilisez votre propre code pour supprimer en premier les objets enfants qui empêchent la suppression de l'objet parent.</span><span class="sxs-lookup"><span data-stu-id="d061c-127">Use your own code to first delete the child objects that prevent the parent object from being deleted.</span></span>  
  
 <span data-ttu-id="d061c-128">Sinon, une exception <xref:System.Data.SqlClient.SqlException> est levée.</span><span class="sxs-lookup"><span data-stu-id="d061c-128">Otherwise, a <xref:System.Data.SqlClient.SqlException> exception is thrown.</span></span>  
  
 <span data-ttu-id="d061c-129">Pour plus d'informations, voir [Procédure : Supprimer des lignes de la base de données](../../../../../../docs/framework/data/adonet/sql/linq/how-to-delete-rows-from-the-database.md).</span><span class="sxs-lookup"><span data-stu-id="d061c-129">For more information, see [How to: Delete Rows From the Database](../../../../../../docs/framework/data/adonet/sql/linq/how-to-delete-rows-from-the-database.md).</span></span>  
  
## <a name="expression-not-queryable"></a><span data-ttu-id="d061c-130">Expression non requêtable</span><span class="sxs-lookup"><span data-stu-id="d061c-130">Expression Not Queryable</span></span>  
 <span data-ttu-id="d061c-131">Si vous obtenez l'erreur "L'expression de type [expression] ne peut pas être interrogée. Vérifiez que vous n'omettez pas une référence d'assembly et/ou une importation d'espace de noms pour le fournisseur LINQ."</span><span class="sxs-lookup"><span data-stu-id="d061c-131">If you get the "Expression [expression] is not queryable; are you missing an assembly reference?"</span></span> <span data-ttu-id="d061c-132">, vérifiez que :</span><span class="sxs-lookup"><span data-stu-id="d061c-132">error, make sure of the following:</span></span>  
  
- <span data-ttu-id="d061c-133">Votre application cible [!INCLUDE[compact_v35_short](../../../../../../includes/compact-v35-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d061c-133">Your application is targeting [!INCLUDE[compact_v35_short](../../../../../../includes/compact-v35-short-md.md)].</span></span>  
  
- <span data-ttu-id="d061c-134">Il y a une référence à `System.Core.dll` et `System.Data.Linq.dll`.</span><span class="sxs-lookup"><span data-stu-id="d061c-134">You have a reference to `System.Core.dll` and `System.Data.Linq.dll`.</span></span>  
  
- <span data-ttu-id="d061c-135">Vous avez un `Imports` (Visual Basic) ou `using` directive (c#) pour <xref:System.Linq> et <xref:System.Data.Linq>.</span><span class="sxs-lookup"><span data-stu-id="d061c-135">You have an `Imports` (Visual Basic) or `using` (C#) directive for <xref:System.Linq> and <xref:System.Data.Linq>.</span></span>  
  
## <a name="duplicatekeyexception"></a><span data-ttu-id="d061c-136">DuplicateKeyException</span><span class="sxs-lookup"><span data-stu-id="d061c-136">DuplicateKeyException</span></span>  
 <span data-ttu-id="d061c-137">Au cours de débogage un [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] projet, vous pouvez parcourir les relations d’une entité.</span><span class="sxs-lookup"><span data-stu-id="d061c-137">In the course of debugging a [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] project, you might traverse an entity's relations.</span></span> <span data-ttu-id="d061c-138">Cela apporte ces éléments dans le cache, et [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] est informé de leur présence.</span><span class="sxs-lookup"><span data-stu-id="d061c-138">Doing so brings these items into the cache, and [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] becomes aware of their presence.</span></span> <span data-ttu-id="d061c-139">Si vous tentez ensuite d'exécuter <xref:System.Data.Linq.Table%601.Attach%2A> ou <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A> ou une méthode similaire qui produit plusieurs lignes ayant la même clé, une <xref:System.Data.Linq.DuplicateKeyException> est levée.</span><span class="sxs-lookup"><span data-stu-id="d061c-139">If you then try to execute <xref:System.Data.Linq.Table%601.Attach%2A> or <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A> or a similar method that produces multiple rows that have the same key, a <xref:System.Data.Linq.DuplicateKeyException> is thrown.</span></span>  
  
## <a name="string-concatenation-exceptions"></a><span data-ttu-id="d061c-140">Exceptions de concaténation de chaînes</span><span class="sxs-lookup"><span data-stu-id="d061c-140">String Concatenation Exceptions</span></span>  
 <span data-ttu-id="d061c-141">La concaténation sur les opérandes mappées à `[n]text` et d'autre `[n][var]char` n'est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="d061c-141">Concatenation on operands mapped to `[n]text` and other `[n][var]char` is not supported.</span></span> <span data-ttu-id="d061c-142">Une exception est levée en cas de concaténation de chaînes mappée à deux ensembles de types différents.</span><span class="sxs-lookup"><span data-stu-id="d061c-142">An exception is thrown for concatenation of strings mapped to the two different sets of types.</span></span> <span data-ttu-id="d061c-143">Pour plus d’informations, consultez [System.String, méthodes](../../../../../../docs/framework/data/adonet/sql/linq/system-string-methods.md).</span><span class="sxs-lookup"><span data-stu-id="d061c-143">For more information, see [System.String Methods](../../../../../../docs/framework/data/adonet/sql/linq/system-string-methods.md).</span></span>  
  
## <a name="skip-and-take-exceptions-in-sql-server-2000"></a><span data-ttu-id="d061c-144">Exceptions d'ignorance (Skip) et d'acceptation (Take) dans SQL Server 2000</span><span class="sxs-lookup"><span data-stu-id="d061c-144">Skip and Take Exceptions in SQL Server 2000</span></span>  
 <span data-ttu-id="d061c-145">Vous devez utiliser des membres d'identité (<xref:System.Data.Linq.Mapping.ColumnAttribute.IsPrimaryKey%2A>) lorsque vous utilisez <xref:System.Linq.Queryable.Take%2A> ou <xref:System.Linq.Queryable.Skip%2A> sur une base de données Microsoft SQL Server 2000.</span><span class="sxs-lookup"><span data-stu-id="d061c-145">You must use identity members (<xref:System.Data.Linq.Mapping.ColumnAttribute.IsPrimaryKey%2A>) when you use <xref:System.Linq.Queryable.Take%2A> or <xref:System.Linq.Queryable.Skip%2A> against a SQL Server 2000 database.</span></span> <span data-ttu-id="d061c-146">La requête doit être effectuée sur une table unique (c'est-à-dire, pas une jointure) ou il doit s'agir d'une opération <xref:System.Linq.Queryable.Distinct%2A>, <xref:System.Linq.Queryable.Except%2A>, <xref:System.Linq.Queryable.Intersect%2A> ou <xref:System.Linq.Queryable.Union%2A>, et elle ne doit pas inclure d'opération <xref:System.Linq.Queryable.Concat%2A>.</span><span class="sxs-lookup"><span data-stu-id="d061c-146">The query must be against a single table (that is, not a join), or be a <xref:System.Linq.Queryable.Distinct%2A>, <xref:System.Linq.Queryable.Except%2A>, <xref:System.Linq.Queryable.Intersect%2A>, or <xref:System.Linq.Queryable.Union%2A> operation, and must not include a <xref:System.Linq.Queryable.Concat%2A> operation.</span></span> <span data-ttu-id="d061c-147">Pour plus d’informations, consultez la section « Prise en charge SQL Server 2000 » dans [traduction des opérateurs de requête Standard](../../../../../../docs/framework/data/adonet/sql/linq/standard-query-operator-translation.md).</span><span class="sxs-lookup"><span data-stu-id="d061c-147">For more information, see the "SQL Server 2000 Support" section in [Standard Query Operator Translation](../../../../../../docs/framework/data/adonet/sql/linq/standard-query-operator-translation.md).</span></span>  
  
 <span data-ttu-id="d061c-148">Cette exigence ne s’applique pas à [!INCLUDE[sqprsqlong](../../../../../../includes/sqprsqlong-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d061c-148">This requirement does not apply to [!INCLUDE[sqprsqlong](../../../../../../includes/sqprsqlong-md.md)].</span></span>  
  
## <a name="groupby-invalidoperationexception"></a><span data-ttu-id="d061c-149">GroupBy InvalidOperationException</span><span class="sxs-lookup"><span data-stu-id="d061c-149">GroupBy InvalidOperationException</span></span>  
 <span data-ttu-id="d061c-150">Cette exception est levée lorsqu'une valeur de colonne est null dans une requête <xref:System.Linq.Enumerable.GroupBy%2A> regroupée par une expression `boolean`, telle que `group x by (Phone==@phone)`.</span><span class="sxs-lookup"><span data-stu-id="d061c-150">This exception is thrown when a column value is null in a <xref:System.Linq.Enumerable.GroupBy%2A> query that groups by a `boolean` expression, such as `group x by (Phone==@phone)`.</span></span> <span data-ttu-id="d061c-151">L'expression étant `boolean`, la clé doit donc être `boolean`, et non `nullable``boolean`.</span><span class="sxs-lookup"><span data-stu-id="d061c-151">Because the expression is a `boolean`, the key is inferred to be `boolean`, not `nullable` `boolean`.</span></span> <span data-ttu-id="d061c-152">Lorsque la comparaison traduite produit un null, une tentative est faite pour assigner un `nullable``boolean` à un `boolean`, et l'exception est levée.</span><span class="sxs-lookup"><span data-stu-id="d061c-152">When the translated comparison produces a null, an attempt is made to assign a `nullable` `boolean` to a `boolean`, and the exception is thrown.</span></span>  
  
 <span data-ttu-id="d061c-153">Pour éviter cette situation (en supposant que vous souhaitiez traiter les valeurs null comme des valeurs false), utilisez, par exemple, la méthode suivante :</span><span class="sxs-lookup"><span data-stu-id="d061c-153">To avoid this situation (assuming you want to treat nulls as false), use an approach such as the following:</span></span>  
  
 `GroupBy="(Phone != null) && (Phone=@Phone)"`  
  
## <a name="oncreated-partial-method"></a><span data-ttu-id="d061c-154">Méthode partielle OnCreated()</span><span class="sxs-lookup"><span data-stu-id="d061c-154">OnCreated() Partial Method</span></span>  
 <span data-ttu-id="d061c-155">La méthode générée `OnCreated()` est appelée chaque fois que le constructeur d'objet est appelé, y compris dans le cas où [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] appelle le constructeur pour faire une copie pour les valeurs d'origine.</span><span class="sxs-lookup"><span data-stu-id="d061c-155">The generated method `OnCreated()` is called each time the object constructor is called, including the scenario in which [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] calls the constructor to make a copy for original values.</span></span> <span data-ttu-id="d061c-156">Tenez compte de ce comportement si vous implémentez la méthode `OnCreated()` dans votre propre classe partielle.</span><span class="sxs-lookup"><span data-stu-id="d061c-156">Take this behavior into account if you implement the `OnCreated()` method in your own partial class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d061c-157">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d061c-157">See also</span></span>

- [<span data-ttu-id="d061c-158">Prise en charge du débogage</span><span class="sxs-lookup"><span data-stu-id="d061c-158">Debugging Support</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/debugging-support.md)
- [<span data-ttu-id="d061c-159">Forum Aux Questions</span><span class="sxs-lookup"><span data-stu-id="d061c-159">Frequently Asked Questions</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/frequently-asked-questions.md)
