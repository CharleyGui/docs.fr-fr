---
title: Identité d'un objet
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: c788f2f9-65cc-4455-9907-e8388a268e00
ms.openlocfilehash: 053c861bae951f044d30d048951aa072b3d85a42
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/07/2019
ms.locfileid: "70792941"
---
# <a name="object-identity"></a><span data-ttu-id="f7e74-102">Identité d'un objet</span><span class="sxs-lookup"><span data-stu-id="f7e74-102">Object Identity</span></span>
<span data-ttu-id="f7e74-103">Les identités des objets du runtime sont uniques.</span><span class="sxs-lookup"><span data-stu-id="f7e74-103">Objects in the runtime have unique identities.</span></span> <span data-ttu-id="f7e74-104">Deux variables qui font référence au même objet font en réalité référence à la même instance de l'objet.</span><span class="sxs-lookup"><span data-stu-id="f7e74-104">Two variables that refer to the same object actually refer to the same instance of the object.</span></span> <span data-ttu-id="f7e74-105">Par conséquent, les modifications que vous apportez avec un chemin d'accès via une variable sont immédiatement visibles via l'autre variable.</span><span class="sxs-lookup"><span data-stu-id="f7e74-105">Because of this fact, changes that you make by way of a path through one variable are immediately visible through the other.</span></span>  
  
 <span data-ttu-id="f7e74-106">Les lignes d'une table de bases de données relationnelle n'ont pas d'identités uniques.</span><span class="sxs-lookup"><span data-stu-id="f7e74-106">Rows in a relational database table do not have unique identities.</span></span> <span data-ttu-id="f7e74-107">Étant donné que chaque ligne a une clé primaire unique, deux lignes ne peuvent pas partager la même valeur de clé.</span><span class="sxs-lookup"><span data-stu-id="f7e74-107">Because each row has a unique primary key, no two rows share the same key value.</span></span> <span data-ttu-id="f7e74-108">Toutefois, cela concerne uniquement le contenu de la table de base de données.</span><span class="sxs-lookup"><span data-stu-id="f7e74-108">However, this fact constrains only the contents of the database table.</span></span>  
  
 <span data-ttu-id="f7e74-109">Dans la réalité, les données sont souvent extraites de la base de données vers une couche différente où une application fonctionne avec celles-ci.</span><span class="sxs-lookup"><span data-stu-id="f7e74-109">In reality, data is most often brought out of the database and into a different tier, where an application works with it.</span></span> <span data-ttu-id="f7e74-110">Il s'agit du modèle que [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] prend en charge.</span><span class="sxs-lookup"><span data-stu-id="f7e74-110">This is the model that [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] supports.</span></span> <span data-ttu-id="f7e74-111">Lorsque des données sont extraites de la base de données comme lignes, il est peu probable que deux lignes qui représentent les mêmes données correspondent réellement aux mêmes instances de ligne.</span><span class="sxs-lookup"><span data-stu-id="f7e74-111">When data is brought out of the database as rows, you have no expectation that two rows that represent the same data actually correspond to the same row instances.</span></span> <span data-ttu-id="f7e74-112">Si vous interrogez un client spécifique deux fois, vous obtenez deux lignes de données.</span><span class="sxs-lookup"><span data-stu-id="f7e74-112">If you query for a specific customer two times, you get two rows of data.</span></span> <span data-ttu-id="f7e74-113">Chaque ligne contient les mêmes informations.</span><span class="sxs-lookup"><span data-stu-id="f7e74-113">Each row contains the same information.</span></span>  
  
 <span data-ttu-id="f7e74-114">Vous souhaitez obtenir quelque chose de très différent avec les objets.</span><span class="sxs-lookup"><span data-stu-id="f7e74-114">With objects you expect something very different.</span></span> <span data-ttu-id="f7e74-115">Si vous demandez à plusieurs reprises les mêmes informations au <xref:System.Data.Linq.DataContext>, vous vous attendez à ce que celui-ci vous donne la même instance d'objet.</span><span class="sxs-lookup"><span data-stu-id="f7e74-115">You expect that if you ask the <xref:System.Data.Linq.DataContext> for the same information repeatedly, it will in fact give you the same object instance.</span></span> <span data-ttu-id="f7e74-116">Ce comportement est attendu, étant donné que les objets ont une signification particulière pour votre application, et vous vous attendez à ce qu'ils se comportent comme des objets.</span><span class="sxs-lookup"><span data-stu-id="f7e74-116">You expect this behavior because objects have special meaning for your application and you expect them to behave like objects.</span></span> <span data-ttu-id="f7e74-117">Vous les avez conçus comme des hiérarchies ou des graphiques.</span><span class="sxs-lookup"><span data-stu-id="f7e74-117">You designed them as hierarchies or graphs.</span></span> <span data-ttu-id="f7e74-118">Vous comptez les récupérer comme tels et ne pas recevoir de nombreuses instances répliquées uniquement parce que vous avez effectué la même demande plusieurs fois.</span><span class="sxs-lookup"><span data-stu-id="f7e74-118">You expect to retrieve them as such and not to receive multitudes of replicated instances just because you asked for the same thing more than one time.</span></span>  
  
 <span data-ttu-id="f7e74-119">Dans [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)], le <xref:System.Data.Linq.DataContext> gère l'identité de l'objet.</span><span class="sxs-lookup"><span data-stu-id="f7e74-119">In [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)], the <xref:System.Data.Linq.DataContext> manages object identity.</span></span> <span data-ttu-id="f7e74-120">À chaque fois que vous récupérez une nouvelle ligne de la base de données, elle est entrée dans une table d'identités par sa clé primaire et un objet est créé.</span><span class="sxs-lookup"><span data-stu-id="f7e74-120">Whenever you retrieve a new row from the database, the row is logged in an identity table by its primary key, and a new object is created.</span></span> <span data-ttu-id="f7e74-121">À chaque fois que vous récupérez cette ligne, l'instance d'objet d'origine est remise à l'application.</span><span class="sxs-lookup"><span data-stu-id="f7e74-121">Whenever you retrieve that same row, the original object instance is handed back to the application.</span></span> <span data-ttu-id="f7e74-122">De cette façon, le <xref:System.Data.Linq.DataContext> traduit le concept d'identité tel que la base de données l'a vu (autrement dit, des clés primaire) en concept d'identité vu par le langage (autrement dit, des instances).</span><span class="sxs-lookup"><span data-stu-id="f7e74-122">In this manner the <xref:System.Data.Linq.DataContext> translates the concept of identity as seen by the database (that is, primary keys) into the concept of identity seen by the language (that is, instances).</span></span> <span data-ttu-id="f7e74-123">L'application voit uniquement l'objet dans l'état dans lequel il a été récupéré la première fois.</span><span class="sxs-lookup"><span data-stu-id="f7e74-123">The application only sees the object in the state that it was first retrieved.</span></span> <span data-ttu-id="f7e74-124">Si les nouvelles données sont différentes, elles sont ignorées.</span><span class="sxs-lookup"><span data-stu-id="f7e74-124">The new data, if different, is discarded.</span></span> <span data-ttu-id="f7e74-125">Pour plus d’informations, consultez [récupération d’objets à partir du cache d’identité](retrieving-objects-from-the-identity-cache.md).</span><span class="sxs-lookup"><span data-stu-id="f7e74-125">For more information, see [Retrieving Objects from the Identity Cache](retrieving-objects-from-the-identity-cache.md).</span></span>  
  
 [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="f7e74-126">utilise cette approche pour gérer l’intégrité des objets locaux afin de prendre en charge les mises à jour optimistes.</span><span class="sxs-lookup"><span data-stu-id="f7e74-126">uses this approach to manage the integrity of local objects in order to support optimistic updates.</span></span> <span data-ttu-id="f7e74-127">Étant donné que les seules modifications qui se produisent une fois que l'objet a été créé sont celles effectuées par l'application, le rôle de l'application est correctement défini.</span><span class="sxs-lookup"><span data-stu-id="f7e74-127">Because the only changes that occur after the object is at first created are those made by the application, the intent of the application is clear.</span></span> <span data-ttu-id="f7e74-128">Si un tiers extérieur a effectué des modifications dans l'intervalle, elles sont identifiées au moment où `SubmitChanges()` est appelé.</span><span class="sxs-lookup"><span data-stu-id="f7e74-128">If changes by an outside party have occurred in the interim, they are identified at the time `SubmitChanges()` is called.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="f7e74-129">Si l'objet demandé par la requête est facilement identifiable comme un objet déjà récupéré, aucune requête n'est exécutée.</span><span class="sxs-lookup"><span data-stu-id="f7e74-129">If the object requested by the query is easily identifiable as one already retrieved, no query is executed.</span></span> <span data-ttu-id="f7e74-130">La table d'identités agit en tant que cache de tous les objets récupérés précédemment.</span><span class="sxs-lookup"><span data-stu-id="f7e74-130">The identity table acts as a cache of all previously retrieved objects.</span></span>  
  
## <a name="examples"></a><span data-ttu-id="f7e74-131">Exemples</span><span class="sxs-lookup"><span data-stu-id="f7e74-131">Examples</span></span>  
  
### <a name="object-caching-example-1"></a><span data-ttu-id="f7e74-132">Exemple 1 de la mise en cache d'objets</span><span class="sxs-lookup"><span data-stu-id="f7e74-132">Object Caching Example 1</span></span>  
 <span data-ttu-id="f7e74-133">Dans cet exemple, si vous exécutez les mêmes requêtes deux fois, vous recevez une référence au même objet en mémoire à chaque fois.</span><span class="sxs-lookup"><span data-stu-id="f7e74-133">In this example, if you execute the same query two times, you receive a reference to the same object in memory every time.</span></span>  
  
 [!code-csharp[DLinqObjectIdentity#1](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqObjectIdentity/cs/Program.cs#1)]
 [!code-vb[DLinqObjectIdentity#1](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqObjectIdentity/vb/Module1.vb#1)]  
  
### <a name="object-caching-example-2"></a><span data-ttu-id="f7e74-134">Exemple 2 de la mise en cache d'objets</span><span class="sxs-lookup"><span data-stu-id="f7e74-134">Object Caching Example 2</span></span>  
 <span data-ttu-id="f7e74-135">Dans cet exemple, si vous exécutez des requêtes différentes qui retournent la même ligne de la base de données, vous recevez une référence au même objet en mémoire à chaque fois.</span><span class="sxs-lookup"><span data-stu-id="f7e74-135">In this example, if you execute different queries that return the same row from the database, you receive a reference to the same object in memory every time.</span></span>  
  
 [!code-csharp[DLinqObjectIdentity#2](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqObjectIdentity/cs/Program.cs#2)]
 [!code-vb[DLinqObjectIdentity#2](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqObjectIdentity/vb/Module1.vb#2)]  
  
## <a name="see-also"></a><span data-ttu-id="f7e74-136">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="f7e74-136">See also</span></span>

- [<span data-ttu-id="f7e74-137">Informations générales</span><span class="sxs-lookup"><span data-stu-id="f7e74-137">Background Information</span></span>](background-information.md)
