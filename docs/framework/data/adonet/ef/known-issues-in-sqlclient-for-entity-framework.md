---
title: Problèmes connus dans SqlClient pour l'Entity Framework
ms.date: 03/30/2017
ms.assetid: 48fe4912-4d0f-46b6-be96-3a42c54780f6
ms.openlocfilehash: 5c0b7c32e00a0cc90367a559a41f5a7ab59a33a4
ms.sourcegitcommit: 4e2d355baba82814fa53efd6b8bbb45bfe054d11
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/04/2019
ms.locfileid: "70251394"
---
# <a name="known-issues-in-sqlclient-for-entity-framework"></a><span data-ttu-id="4d081-102">Problèmes connus dans SqlClient pour l'Entity Framework</span><span class="sxs-lookup"><span data-stu-id="4d081-102">Known Issues in SqlClient for Entity Framework</span></span>
<span data-ttu-id="4d081-103">Cette section décrit les problèmes connus liés au fournisseur de données .NET Framework pour SQL Server (SqlClient).</span><span class="sxs-lookup"><span data-stu-id="4d081-103">This section describes known issues related to the .NET Framework Data Provider for SQL Server (SqlClient).</span></span>  
  
## <a name="trailing-spaces-in-string-functions"></a><span data-ttu-id="4d081-104">Espaces de fin dans les fonctions de chaîne</span><span class="sxs-lookup"><span data-stu-id="4d081-104">Trailing Spaces in String Functions</span></span>  
 <span data-ttu-id="4d081-105">SQL Server ignore les espaces de fin dans les valeurs de chaîne.</span><span class="sxs-lookup"><span data-stu-id="4d081-105">SQL Server ignores trailing spaces in string values.</span></span> <span data-ttu-id="4d081-106">Par conséquent, le passage d'espaces de fin dans la chaîne peut provoquer des résultats imprévisibles, voire des défaillances.</span><span class="sxs-lookup"><span data-stu-id="4d081-106">Therefore, passing trailing spaces in the string can lead to unpredictable results, even failures.</span></span>  
  
 <span data-ttu-id="4d081-107">Si votre chaîne doit contenir des espaces de fin, vous devez envisager d’ajouter un espace blanc à la fin, afin que SQL Server ne supprime pas la chaîne.</span><span class="sxs-lookup"><span data-stu-id="4d081-107">If you have to have trailing spaces in your string, you should consider appending a white space character at the end, so that SQL Server does not trim the string.</span></span> <span data-ttu-id="4d081-108">Si les espaces de fin ne sont pas indispensables, ils doivent être supprimés avant le passage au pipeline de la requête.</span><span class="sxs-lookup"><span data-stu-id="4d081-108">If the trailing spaces are not required, they should be trimmed before they are passed down the query pipeline.</span></span>  
  
## <a name="right-function"></a><span data-ttu-id="4d081-109">Fonction RIGHT</span><span class="sxs-lookup"><span data-stu-id="4d081-109">RIGHT Function</span></span>  
 <span data-ttu-id="4d081-110">Si une valeur non `null` est passée comme premier argument et que 0 est passé comme deuxième argument à `RIGHT(nvarchar(max)`, 0`)` ou `RIGHT(varchar(max)`, 0`)`, c’est une valeur `NULL` qui sera retournée, et non une chaîne `empty`.</span><span class="sxs-lookup"><span data-stu-id="4d081-110">If a non-`null` value is passed as a first argument and 0 is passed as a second argument to `RIGHT(nvarchar(max)`, 0`)` or `RIGHT(varchar(max)`, 0`)`, a `NULL` value will be returned instead of an `empty` string.</span></span>  
  
## <a name="cross-and-outer-apply-operators"></a><span data-ttu-id="4d081-111">Opérateurs CROSS et OUTER APPLY</span><span class="sxs-lookup"><span data-stu-id="4d081-111">CROSS and OUTER APPLY Operators</span></span>  
 <span data-ttu-id="4d081-112">Les opérateurs CROSS et OUTER APPLY ont été introduits dans SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="4d081-112">CROSS and OUTER APPLY operators were introduced in SQL Server 2005.</span></span> <span data-ttu-id="4d081-113">Dans certains cas, le pipeline de requête peut produire une instruction Transact-SQL qui contient des opérateurs CROSS APPLY et/ou OUTER APPLY.</span><span class="sxs-lookup"><span data-stu-id="4d081-113">In some cases the query pipeline might produce a Transact-SQL statement that contains CROSS APPLY and/or OUTER APPLY operators.</span></span> <span data-ttu-id="4d081-114">Dans la mesure où certains fournisseurs principaux, y compris les versions de SQL Server antérieures à SQL Server 2005, ne prennent pas en charge ces opérateurs, de telles requêtes ne peuvent pas être exécutées sur ces fournisseurs principaux.</span><span class="sxs-lookup"><span data-stu-id="4d081-114">Because some backend providers, including versions of SQL Server earlier than SQL Server 2005, do not support these operators, such queries cannot be executed on these backend providers.</span></span>  
  
 <span data-ttu-id="4d081-115">Vous trouverez ci-dessous quelques scénarios classiques susceptibles d'aboutir à la présence d'opérateurs CROSS APPLY et/ou OUTER APPLY dans la requête de sortie :</span><span class="sxs-lookup"><span data-stu-id="4d081-115">The following are some typical scenarios that might lead to the presence of CROSS APPLY and/or OUTER APPLY operators in the output query:</span></span>  
  
- <span data-ttu-id="4d081-116">sous-requête corrélée avec pagination ;</span><span class="sxs-lookup"><span data-stu-id="4d081-116">A correlated subquery with paging.</span></span>  
  
- <span data-ttu-id="4d081-117">`AnyElement` sur une sous-requête corrélée ou sur une collection produite par navigation ;</span><span class="sxs-lookup"><span data-stu-id="4d081-117">An `AnyElement` over a correlated sub-query, or over a collection produced by navigation.</span></span>  
  
- <span data-ttu-id="4d081-118">requêtes LINQ qui utilisent des méthodes de regroupement acceptant un sélecteur d'élément ;</span><span class="sxs-lookup"><span data-stu-id="4d081-118">LINQ queries that use grouping methods that accept an element selector.</span></span>  
  
- <span data-ttu-id="4d081-119">requête dans laquelle un CROSS APPLY ou un OUTER APPLY est explicitement spécifié ;</span><span class="sxs-lookup"><span data-stu-id="4d081-119">A query in which a CROSS APPLY or an OUTER APPLY is explicitly specified</span></span>  
  
- <span data-ttu-id="4d081-120">requête dotée d'une construction DEREF sur une construction REF.</span><span class="sxs-lookup"><span data-stu-id="4d081-120">A query that has a DEREF construct over a REF construct.</span></span>  
  
## <a name="skip-operator"></a><span data-ttu-id="4d081-121">Opérateur SKIP</span><span class="sxs-lookup"><span data-stu-id="4d081-121">SKIP Operator</span></span>  
 <span data-ttu-id="4d081-122">Si vous utilisez SQL Server 2000, l’utilisation de SKIP avec ORDER BY sur des colonnes non-clés peut retourner des résultats incorrects.</span><span class="sxs-lookup"><span data-stu-id="4d081-122">If you are using SQL Server 2000, using SKIP with ORDER BY on non-key columns might return incorrect results.</span></span> <span data-ttu-id="4d081-123">Le nombre de lignes ignorées peut être supérieur au nombre de lignes spécifié si la colonne non-clé contient des données en double.</span><span class="sxs-lookup"><span data-stu-id="4d081-123">More than the specified number of rows might be skipped if the non-key column has duplicate data in it.</span></span> <span data-ttu-id="4d081-124">Cela est dû au fait que SKIP est traduit pour SQL Server 2000.</span><span class="sxs-lookup"><span data-stu-id="4d081-124">This is due to how SKIP is translated for SQL Server 2000.</span></span> <span data-ttu-id="4d081-125">Par exemple, dans la requête suivante, plus de cinq lignes peuvent être ignorées si `E.NonKeyColumn` contient des valeurs en double :</span><span class="sxs-lookup"><span data-stu-id="4d081-125">For example, in the following query, more than five rows might be skipped if `E.NonKeyColumn` has duplicate values:</span></span>  
  
```  
SELECT [E] FROM Container.EntitySet AS [E] ORDER BY [E].[NonKeyColumn] DESC SKIP 5L  
```  
  
## <a name="targeting-the-correct-sql-server-version"></a><span data-ttu-id="4d081-126">Ciblage de la version appropriée de SQL Server</span><span class="sxs-lookup"><span data-stu-id="4d081-126">Targeting the Correct SQL Server Version</span></span>  
 <span data-ttu-id="4d081-127">Le [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] cible la requête Transact-SQL basée sur la version SQL Server spécifiée dans l' `ProviderManifestToken` attribut de l’élément Schema dans le fichier de modèle de stockage (. SSDL).</span><span class="sxs-lookup"><span data-stu-id="4d081-127">The [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] targets the Transact-SQL query based on the SQL Server version that is specified in the `ProviderManifestToken` attribute of the Schema element in the storage model (.ssdl) file.</span></span> <span data-ttu-id="4d081-128">Cette version de SQL Server peut ne pas correspondre à celle à laquelle vous êtes connecté.</span><span class="sxs-lookup"><span data-stu-id="4d081-128">This version might differ from the version of the actual SQL Server you are connected to.</span></span> <span data-ttu-id="4d081-129">Par exemple, si vous utilisez SQL Server 2005, mais que votre `ProviderManifestToken` attribut a la valeur 2008, la requête Transact-SQL générée peut ne pas s’exécuter sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="4d081-129">For example, if you are using SQL Server 2005, but your `ProviderManifestToken` attribute is set to 2008, the generated Transact-SQL query might not execute on the server.</span></span> <span data-ttu-id="4d081-130">Par exemple, une requête qui utilise les nouveaux types date/heure introduits dans SQL Server 2008 ne s'exécutera pas sur les versions antérieures de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4d081-130">For example, a query that uses the new date time types that were introduced in SQL Server 2008 will not execute on earlier versions of the SQL Server.</span></span> <span data-ttu-id="4d081-131">Si vous utilisez SQL Server 2005, mais que votre `ProviderManifestToken` attribut a la valeur 2000, la requête Transact-SQL générée peut être moins optimisée, ou vous pouvez obtenir une exception qui indique que la requête n’est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="4d081-131">If you are using SQL Server 2005, but your `ProviderManifestToken` attribute is set to 2000, the generated Transact-SQL query might be less optimized, or you might get an exception that says that the query is not supported.</span></span> <span data-ttu-id="4d081-132">Pour plus d'informations, voir la section Opérateurs CROSS et OUTER APPLY, plus haut dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="4d081-132">For more information, see the CROSS and OUTER APPLY Operators section, earlier in this topic.</span></span>  
  
 <span data-ttu-id="4d081-133">Certains comportements de base de données dépendent du niveau de compatibilité défini pour la base de données.</span><span class="sxs-lookup"><span data-stu-id="4d081-133">Certain database behaviors depend on the compatibility level set to the database.</span></span> <span data-ttu-id="4d081-134">Si votre `ProviderManifestToken` attribut est défini sur 2005 et que votre version de SQL Server est 2005, mais que le niveau de compatibilité d’une base de données est défini sur « 80 » (SQL Server 2000), le Transact-SQL généré ciblera SQL Server 2005, mais peut ne pas s’exécuter comme prévu en raison de la paramètre de niveau de compatibilité.</span><span class="sxs-lookup"><span data-stu-id="4d081-134">If your `ProviderManifestToken` attribute is set to 2005 and your SQL Server version is 2005, but the compatibility level of a database is set to "80" (SQL Server 2000), the generated Transact-SQL will be targeting SQL Server 2005, but might not execute as expected due to the compatibility level setting.</span></span> <span data-ttu-id="4d081-135">Par exemple, vous pouvez perdre des informations de classement si un nom de colonne dans la liste ORDER BY correspond à un nom de colonne dans le sélecteur.</span><span class="sxs-lookup"><span data-stu-id="4d081-135">For example, you might lose ordering information if a column name in the ORDER BY list matches a column name in the selector.</span></span>  
  
## <a name="nested-queries-in-projection"></a><span data-ttu-id="4d081-136">Requêtes imbriquées dans la projection</span><span class="sxs-lookup"><span data-stu-id="4d081-136">Nested Queries in Projection</span></span>  
 <span data-ttu-id="4d081-137">Les requêtes imbriquées d'une clause de projection peuvent être traduites en requêtes de produit cartésien sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="4d081-137">Nested queries in a projection clause might get translated into Cartesian product queries on the server.</span></span> <span data-ttu-id="4d081-138">Sur certains serveurs principaux, y compris SLQ Server, la table TempDB peut devenir très volumineuse.</span><span class="sxs-lookup"><span data-stu-id="4d081-138">On some back-end servers, including SLQ Server, this can cause the TempDB table to get quite large.</span></span> <span data-ttu-id="4d081-139">et une diminution des performances du serveur.</span><span class="sxs-lookup"><span data-stu-id="4d081-139">This can decrease server performance.</span></span>  
  
 <span data-ttu-id="4d081-140">Vous trouverez ci-dessous un exemple de requête imbriquée dans une clause de projection :</span><span class="sxs-lookup"><span data-stu-id="4d081-140">The following is an example of  a nested query in a projection clause:</span></span>  
  
```  
SELECT c, (SELECT c, (SELECT c FROM AdventureWorksModel.Vendor AS c  ) As Inner2 FROM AdventureWorksModel.JobCandidate AS c  ) As Inner1 FROM AdventureWorksModel.EmployeeDepartmentHistory AS c  
```  
  
## <a name="server-generated-guid-identity-values"></a><span data-ttu-id="4d081-141">Valeurs d'identité GUID générées par le serveur</span><span class="sxs-lookup"><span data-stu-id="4d081-141">Server Generated GUID Identity Values</span></span>  
 <span data-ttu-id="4d081-142">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] prend en charge les valeurs d'identité de type GUID générées par le serveur, mais le fournisseur doit prendre en charge le retour de la valeur d'identité générée par le serveur après l'insertion d'une ligne.</span><span class="sxs-lookup"><span data-stu-id="4d081-142">The [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] supports server-generated GUID type identity values, but the provider must support returning the server-generated identity value after a row was inserted.</span></span> <span data-ttu-id="4d081-143">À compter de SQL Server 2005, vous pouvez retourner le type GUID généré par le serveur dans une base de données SQL Server à l’aide de la [clause OUTPUT](https://go.microsoft.com/fwlink/?LinkId=169400) .</span><span class="sxs-lookup"><span data-stu-id="4d081-143">Starting with SQL Server 2005, you can return the server-generated GUID type in a SQL Server database through the [OUTPUT clause](https://go.microsoft.com/fwlink/?LinkId=169400) .</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4d081-144">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="4d081-144">See also</span></span>

- [<span data-ttu-id="4d081-145">SqlClient pour Entity Framework</span><span class="sxs-lookup"><span data-stu-id="4d081-145">SqlClient for the Entity Framework</span></span>](sqlclient-for-the-entity-framework.md)
- [<span data-ttu-id="4d081-146">Problèmes connus et éléments à prendre en compte dans LINQ to Entities</span><span class="sxs-lookup"><span data-stu-id="4d081-146">Known Issues and Considerations in LINQ to Entities</span></span>](./language-reference/known-issues-and-considerations-in-linq-to-entities.md)
