---
title: 'Procédure : ajouter des programmes d’installation à votre application de service'
description: Consultez Comment ajouter des programmes d’installation à votre application de service. Visual Studio fournit des composants d’installation qui peuvent installer des ressources associées à vos applications de service.
ms.date: 03/30/2017
helpviewer_keywords:
- Windows Service applications, deploying
- installation components, adding to services
- installers, adding to services
- Windows Service applications, adding installers
- services, adding installers
- ServiceInstaller class, adding installers to services
- ServiceProcessInstaller class, adding installers to services
ms.assetid: 8b698e9a-b88e-4f44-ae45-e0c5ea0ae5a8
author: ghogen
ms.openlocfilehash: f82dd6635555ccb8fcbcdf63cba2495084194731
ms.sourcegitcommit: 40de8df14289e1e05b40d6e5c1daabd3c286d70c
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/22/2020
ms.locfileid: "86925642"
---
# <a name="how-to-add-installers-to-your-service-application"></a><span data-ttu-id="8f772-104">Procédure : ajouter des programmes d’installation à votre application de service</span><span class="sxs-lookup"><span data-stu-id="8f772-104">How to: Add Installers to Your Service Application</span></span>
<span data-ttu-id="8f772-105">Visual Studio est fourni avec des composants d’installation qui peuvent installer des ressources associées à vos applications de service.</span><span class="sxs-lookup"><span data-stu-id="8f772-105">Visual Studio ships installation components that can install resources associated with your service applications.</span></span> <span data-ttu-id="8f772-106">Les composants d’installation inscrivent un service auprès du système sur lequel il est installé et informent le Gestionnaire de contrôle des services de l’existence du service.</span><span class="sxs-lookup"><span data-stu-id="8f772-106">Installation components register an individual service on the system to which it is being installed and let the Services Control Manager know that the service exists.</span></span> <span data-ttu-id="8f772-107">Quand vous travaillez avec une application de service, vous pouvez sélectionner un lien dans la fenêtre Propriétés pour ajouter automatiquement les programmes d’installation appropriés à votre projet.</span><span class="sxs-lookup"><span data-stu-id="8f772-107">When you work with a service application, you can select a link in the Properties window to automatically add the appropriate installers to your project.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8f772-108">Les valeurs des propriétés de votre service sont copiées de la classe de service dans la classe du programme d’installation.</span><span class="sxs-lookup"><span data-stu-id="8f772-108">Property values for your service are copied from the service class to the installer class.</span></span> <span data-ttu-id="8f772-109">Si vous modifiez les valeurs des propriétés sur la classe de service, vos modifications ne sont pas automatiquement répercutées dans le programme d’installation.</span><span class="sxs-lookup"><span data-stu-id="8f772-109">If you update the property values on the service class, they are not automatically updated in the installer.</span></span>  
  
 <span data-ttu-id="8f772-110">Quand vous ajoutez un programme d’installation à votre projet, une nouvelle classe (nommée par défaut `ProjectInstaller`) est créée dans le projet, et des instances des composants d’installation appropriés sont créées dans celui-ci.</span><span class="sxs-lookup"><span data-stu-id="8f772-110">When you add an installer to your project, a new class (which, by default, is named `ProjectInstaller`) is created in the project, and instances of the appropriate installation components are created within it.</span></span> <span data-ttu-id="8f772-111">Cette classe sert de point central à tous les composants d’installation dont votre projet a besoin.</span><span class="sxs-lookup"><span data-stu-id="8f772-111">This class acts as a central point for all of the installation components your project needs.</span></span> <span data-ttu-id="8f772-112">Par exemple, le fait d’ajouter un deuxième service à votre application et de cliquer sur le lien Ajouter le programme d’installation n’entraîne pas l’ajout d’une deuxième classe dans le programme d’installation. Au lieu de cela, le composant d’installation nécessaire pour le deuxième service est ajouté à la classe existante.</span><span class="sxs-lookup"><span data-stu-id="8f772-112">For example, if you add a second service to your application and click the Add Installer link, a second installer class is not created; instead, the necessary additional installation component for the second service is added to the existing class.</span></span>  
  
 <span data-ttu-id="8f772-113">Les programmes d’installation ne nécessitent aucun codage spécial pour que vos services s’installent correctement.</span><span class="sxs-lookup"><span data-stu-id="8f772-113">You do not need to do any special coding within the installers to make your services install correctly.</span></span> <span data-ttu-id="8f772-114">Toutefois, vous devrez parfois modifier le contenu des programmes d’installation pour ajouter des fonctionnalités spéciales au processus d’installation.</span><span class="sxs-lookup"><span data-stu-id="8f772-114">However, you may occasionally need to modify the contents of the installers if you need to add special functionality to the installation process.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8f772-115">Les boîtes de dialogue et les commandes de menu affichées peuvent différer de celles décrites dans l'Aide selon les paramètres actifs ou le mode d'édition.</span><span class="sxs-lookup"><span data-stu-id="8f772-115">The dialog boxes and menu commands you see might differ from those described in Help depending on your active settings or edition.</span></span> <span data-ttu-id="8f772-116">Pour modifier vos paramètres, choisissez **Paramètres d'importation et d'exportation** dans le menu **Outils** .</span><span class="sxs-lookup"><span data-stu-id="8f772-116">To change your settings, choose **Import and Export Settings** on the **Tools** menu.</span></span> <span data-ttu-id="8f772-117">Pour plus d’informations, consultez [Personnaliser l’IDE Visual Studio](/visualstudio/ide/personalizing-the-visual-studio-ide).</span><span class="sxs-lookup"><span data-stu-id="8f772-117">For more information, see [Personalize the Visual Studio IDE](/visualstudio/ide/personalizing-the-visual-studio-ide).</span></span>  
  
### <a name="to-add-installers-to-your-service-application"></a><span data-ttu-id="8f772-118">Pour ajouter des programmes d’installation à votre application de service</span><span class="sxs-lookup"><span data-stu-id="8f772-118">To add installers to your service application</span></span>  
  
1. <span data-ttu-id="8f772-119">Dans **l’Explorateur de solutions**, accédez au **mode Création** du service auquel vous souhaitez ajouter un composant d’installation.</span><span class="sxs-lookup"><span data-stu-id="8f772-119">In **Solution Explorer**, access **Design** view for the service for which you want to add an installation component.</span></span>  
  
2. <span data-ttu-id="8f772-120">Cliquez sur l’arrière-plan du concepteur pour sélectionner le service lui-même et non son contenu.</span><span class="sxs-lookup"><span data-stu-id="8f772-120">Click the background of the designer to select the service itself, rather than any of its contents.</span></span>  
  
3. <span data-ttu-id="8f772-121">Lorsque le concepteur a le focus, cliquez avec le bouton droit, puis cliquez sur **Ajouter le programme d'installation**.</span><span class="sxs-lookup"><span data-stu-id="8f772-121">With the designer in focus, right-click, and then click **Add Installer**.</span></span>  
  
     <span data-ttu-id="8f772-122">Une nouvelle classe, `ProjectInstaller`, et deux composants d’installation, <xref:System.ServiceProcess.ServiceProcessInstaller> et <xref:System.ServiceProcess.ServiceInstaller>, sont ajoutés à votre projet, et les valeurs des propriétés du service sont copiées dans les composants.</span><span class="sxs-lookup"><span data-stu-id="8f772-122">A new class, `ProjectInstaller`, and two installation components, <xref:System.ServiceProcess.ServiceProcessInstaller> and <xref:System.ServiceProcess.ServiceInstaller>, are added to your project, and property values for the service are copied to the components.</span></span>  
  
4. <span data-ttu-id="8f772-123">Cliquez sur le composant <xref:System.ServiceProcess.ServiceInstaller> et vérifiez que la valeur de la propriété <xref:System.ServiceProcess.ServiceInstaller.ServiceName%2A> est identique à celle de la propriété <xref:System.ServiceProcess.ServiceInstaller.ServiceName%2A> sur le service.</span><span class="sxs-lookup"><span data-stu-id="8f772-123">Click the <xref:System.ServiceProcess.ServiceInstaller> component and verify that the value of the <xref:System.ServiceProcess.ServiceInstaller.ServiceName%2A> property is set to the same value as the <xref:System.ServiceProcess.ServiceInstaller.ServiceName%2A> property on the service itself.</span></span>  
  
5. <span data-ttu-id="8f772-124">Pour déterminer le mode de démarrage de votre service, cliquez sur le composant <xref:System.ServiceProcess.ServiceInstaller> et définissez la propriété <xref:System.ServiceProcess.ServiceInstaller.StartType%2A> avec la valeur appropriée.</span><span class="sxs-lookup"><span data-stu-id="8f772-124">To determine how your service will be started, click the <xref:System.ServiceProcess.ServiceInstaller> component and set the <xref:System.ServiceProcess.ServiceInstaller.StartType%2A> property to the appropriate value.</span></span>  
  
    |<span data-ttu-id="8f772-125">Valeur</span><span class="sxs-lookup"><span data-stu-id="8f772-125">Value</span></span>|<span data-ttu-id="8f772-126">Résultats</span><span class="sxs-lookup"><span data-stu-id="8f772-126">Result</span></span>|  
    |-----------|------------|  
    |<xref:System.ServiceProcess.ServiceStartMode.Manual>|<span data-ttu-id="8f772-127">Vous devez démarrer manuellement le service après l’installation.</span><span class="sxs-lookup"><span data-stu-id="8f772-127">The service must be manually started after installation.</span></span> <span data-ttu-id="8f772-128">Pour plus d’informations, consultez [Guide pratique pour démarrer des services](how-to-start-services.md).</span><span class="sxs-lookup"><span data-stu-id="8f772-128">For more information, see [How to: Start Services](how-to-start-services.md).</span></span>|  
    |<xref:System.ServiceProcess.ServiceStartMode.Automatic>|<span data-ttu-id="8f772-129">Le service démarre automatiquement à chaque redémarrage de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="8f772-129">The service will start by itself whenever the computer reboots.</span></span>|  
    |<xref:System.ServiceProcess.ServiceStartMode.Disabled>|<span data-ttu-id="8f772-130">Le service ne peut pas être démarré.</span><span class="sxs-lookup"><span data-stu-id="8f772-130">The service cannot be started.</span></span>|  
  
6. <span data-ttu-id="8f772-131">Pour déterminer le contexte de sécurité dans lequel votre service va s’exécuter, cliquez sur le composant <xref:System.ServiceProcess.ServiceProcessInstaller> et définissez les valeurs de propriété appropriées.</span><span class="sxs-lookup"><span data-stu-id="8f772-131">To determine the security context in which your service will run, click the <xref:System.ServiceProcess.ServiceProcessInstaller> component and set the appropriate property values.</span></span> <span data-ttu-id="8f772-132">Pour plus d’informations, consultez [Guide pratique pour spécifier le contexte de sécurité des services](how-to-specify-the-security-context-for-services.md).</span><span class="sxs-lookup"><span data-stu-id="8f772-132">For more information, see [How to: Specify the Security Context for Services](how-to-specify-the-security-context-for-services.md).</span></span>  
  
7. <span data-ttu-id="8f772-133">Substituez les méthodes qui doivent faire l’objet d’un traitement personnalisé.</span><span class="sxs-lookup"><span data-stu-id="8f772-133">Override any methods for which you need to perform custom processing.</span></span>  
  
8. <span data-ttu-id="8f772-134">Effectuez les étapes 1 à 7 pour chaque service supplémentaire dans votre projet.</span><span class="sxs-lookup"><span data-stu-id="8f772-134">Perform steps 1 through 7 for each additional service in your project.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="8f772-135">Pour chaque service supplémentaire dans votre projet, ajoutez un composant <xref:System.ServiceProcess.ServiceInstaller> à la classe `ProjectInstaller` du projet.</span><span class="sxs-lookup"><span data-stu-id="8f772-135">For each additional service in your project, you must add an additional <xref:System.ServiceProcess.ServiceInstaller> component to the project's `ProjectInstaller` class.</span></span> <span data-ttu-id="8f772-136">Le composant <xref:System.ServiceProcess.ServiceProcessInstaller> ajouté à la troisième étape fonctionne avec tous les programmes d’installation de service dans le projet.</span><span class="sxs-lookup"><span data-stu-id="8f772-136">The <xref:System.ServiceProcess.ServiceProcessInstaller> component added in step three works with all of the individual service installers in the project.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8f772-137">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8f772-137">See also</span></span>

- [<span data-ttu-id="8f772-138">Introduction aux applications de service Windows</span><span class="sxs-lookup"><span data-stu-id="8f772-138">Introduction to Windows Service Applications</span></span>](introduction-to-windows-service-applications.md)
- [<span data-ttu-id="8f772-139">Procédure : Installer et désinstaller des services</span><span class="sxs-lookup"><span data-stu-id="8f772-139">How to: Install and Uninstall Services</span></span>](how-to-install-and-uninstall-services.md)
- [<span data-ttu-id="8f772-140">Procédure : démarrer des services</span><span class="sxs-lookup"><span data-stu-id="8f772-140">How to: Start Services</span></span>](how-to-start-services.md)
- [<span data-ttu-id="8f772-141">Procédure : spécifier le contexte de sécurité des services</span><span class="sxs-lookup"><span data-stu-id="8f772-141">How to: Specify the Security Context for Services</span></span>](how-to-specify-the-security-context-for-services.md)
