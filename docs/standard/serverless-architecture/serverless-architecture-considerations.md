---
title: 'Considérations relatives à une architecture sans serveur : applications sans serveur'
description: Comprendre les défis de la conception des applications sans serveur, à partir de la gestion de l’état et le stockage persistant à l’échelle, de journalisation, le suivi et diagnostics.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: d1654375be1c815d1f46bd8983c38baf063eee04
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/15/2019
ms.locfileid: "65643582"
---
# <a name="serverless-architecture-considerations"></a><span data-ttu-id="282bd-103">Considérations relatives à l’architecture serverless</span><span class="sxs-lookup"><span data-stu-id="282bd-103">Serverless architecture considerations</span></span>

<span data-ttu-id="282bd-104">Adoption d’une architecture sans serveur n’est fourni avec certains défis.</span><span class="sxs-lookup"><span data-stu-id="282bd-104">Adopting a serverless architecture does come with certain challenges.</span></span> <span data-ttu-id="282bd-105">Cette section explore certaines des considérations plus courantes à connaître.</span><span class="sxs-lookup"><span data-stu-id="282bd-105">This section explores some of the more common considerations to be aware of.</span></span> <span data-ttu-id="282bd-106">Tous ces défis proposent des solutions.</span><span class="sxs-lookup"><span data-stu-id="282bd-106">All of these challenges have solutions.</span></span> <span data-ttu-id="282bd-107">Comme avec tous les choix d’architecture, la décision d’Adoptez le serverless doit être prise uniquement après avoir soigneusement les avantages et inconvénients.</span><span class="sxs-lookup"><span data-stu-id="282bd-107">As with all architecture choices, the decision to go serverless should be made only after carefully considering the pros and cons.</span></span> <span data-ttu-id="282bd-108">Selon les besoins de votre application, vous pouvez décider de qu'une implémentation sans serveur n’est pas la solution idéale pour certains composants.</span><span class="sxs-lookup"><span data-stu-id="282bd-108">Depending on the needs of your application, you may decide a serverless implementation isn't the right solution for certain components.</span></span>

## <a name="managing-state"></a><span data-ttu-id="282bd-109">Gestion de l’état</span><span class="sxs-lookup"><span data-stu-id="282bd-109">Managing state</span></span>

<span data-ttu-id="282bd-110">Les fonctions sans serveur, comme les microservices en général, sont sans état par défaut.</span><span class="sxs-lookup"><span data-stu-id="282bd-110">Serverless functions, as with microservices in general, are stateless by default.</span></span> <span data-ttu-id="282bd-111">L’état en évitant permet sans serveur est éphémère, monter en charge et pour assurer la résilience sans un point central de défaillance.</span><span class="sxs-lookup"><span data-stu-id="282bd-111">Avoiding state enables serverless to be ephemeral, to scale out, and to provide resiliency without a central point of failure.</span></span> <span data-ttu-id="282bd-112">Dans certains cas, les processus d’entreprise nécessitent état.</span><span class="sxs-lookup"><span data-stu-id="282bd-112">In some circumstances, business processes require state.</span></span> <span data-ttu-id="282bd-113">Si votre processus requiert que l’état, vous avez deux options.</span><span class="sxs-lookup"><span data-stu-id="282bd-113">If your process requires state, you have two options.</span></span> <span data-ttu-id="282bd-114">Vous pouvez adopter un modèle autre que sans serveur, ou interagir avec un service distinct qui fournit l’état.</span><span class="sxs-lookup"><span data-stu-id="282bd-114">You can adopt a model other than serverless, or interact with a separate service that provides state.</span></span> <span data-ttu-id="282bd-115">Ajout d’un état peut compliquer la solution et rendre plus difficile à l’échelle et potentiellement créer un point de défaillance unique.</span><span class="sxs-lookup"><span data-stu-id="282bd-115">Adding state can complicate the solution and make it harder to scale, and potentially create a single point of failure.</span></span> <span data-ttu-id="282bd-116">Étudiez attentivement si votre fonction requiert absolument l’état.</span><span class="sxs-lookup"><span data-stu-id="282bd-116">Carefully consider whether your function absolutely requires state.</span></span> <span data-ttu-id="282bd-117">Si la réponse est « Oui », déterminez s’il est toujours judicieux de mettre en œuvre sans serveur.</span><span class="sxs-lookup"><span data-stu-id="282bd-117">If the answer is "yes," determine whether it still makes sense to implement it with serverless.</span></span>

<span data-ttu-id="282bd-118">Il existe plusieurs solutions à adopter l’état sans compromettre les avantages de sans serveur.</span><span class="sxs-lookup"><span data-stu-id="282bd-118">There are several solutions to adopt state without compromising the benefits of serverless.</span></span> <span data-ttu-id="282bd-119">Voici quelques-unes des solutions plus populaires :</span><span class="sxs-lookup"><span data-stu-id="282bd-119">Some of the more popular solutions include:</span></span>

* <span data-ttu-id="282bd-120">Utiliser un magasin de données temporaire ou d’un cache distribué, comme Redis</span><span class="sxs-lookup"><span data-stu-id="282bd-120">Use a temporary data store or distributed cache, like Redis</span></span>
* <span data-ttu-id="282bd-121">État de Store dans une base de données, tels que SQL ou CosmosDB</span><span class="sxs-lookup"><span data-stu-id="282bd-121">Store state in a database, like SQL or CosmosDB</span></span>
* <span data-ttu-id="282bd-122">Gérer l’état via un moteur de flux de travail comme fonctions durables</span><span class="sxs-lookup"><span data-stu-id="282bd-122">Handle state through a workflow engine like durable functions</span></span>

<span data-ttu-id="282bd-123">La dernière ligne est que vous devez être conscient de la nécessité d’une gestion d’état dans les processus que vous envisagez d’implémenter avec sans serveur.</span><span class="sxs-lookup"><span data-stu-id="282bd-123">The bottom line is that you should be aware of the need for any state management within processes you're considering to implement with serverless.</span></span>

## <a name="long-running-processes"></a><span data-ttu-id="282bd-124">Processus à long terme</span><span class="sxs-lookup"><span data-stu-id="282bd-124">Long-running processes</span></span>

<span data-ttu-id="282bd-125">Nombreux avantages liés à sans serveur s’appuient sur les processus en cours éphémère.</span><span class="sxs-lookup"><span data-stu-id="282bd-125">Many benefits of serverless rely on the processes being ephemeral.</span></span> <span data-ttu-id="282bd-126">Les temps d’exécution courtes rendent plus facile pour le fournisseur sans serveur libérer des ressources que les fonctions de fonctions de fin et le partage entre les hôtes.</span><span class="sxs-lookup"><span data-stu-id="282bd-126">Short run times make it easier for the serverless provider to free up resources as functions end and share functions across hosts.</span></span> <span data-ttu-id="282bd-127">La plupart des fournisseurs de cloud limiter la durée totale, que votre fonction peut s’exécuter à environ 10 minutes.</span><span class="sxs-lookup"><span data-stu-id="282bd-127">Most cloud providers limit the total time your function can run to around 10 minutes.</span></span> <span data-ttu-id="282bd-128">Si votre processus peut prendre plus de temps, vous pouvez envisager une autre implémentation.</span><span class="sxs-lookup"><span data-stu-id="282bd-128">If your process may take longer, you might consider an alternative implementation.</span></span>

<span data-ttu-id="282bd-129">Il existe quelques exceptions et les solutions.</span><span class="sxs-lookup"><span data-stu-id="282bd-129">There are a few exceptions and solutions.</span></span> <span data-ttu-id="282bd-130">Une solution peut être pour arrêter votre processus en composants plus petits qui individuellement prennent moins de temps à exécuter.</span><span class="sxs-lookup"><span data-stu-id="282bd-130">One solution may be to break your process into smaller components that individually take less time to run.</span></span> <span data-ttu-id="282bd-131">Si votre processus s’exécute longtemps en raison des dépendances, vous pouvez également envisager un flux de travail asynchrone à l’aide d’une solution telle que des fonctions durables.</span><span class="sxs-lookup"><span data-stu-id="282bd-131">If your process runs long because of dependencies, you can also consider an asynchronous workflow using a solution like durable functions.</span></span> <span data-ttu-id="282bd-132">Fonctions durables suspendre et mettre à jour l’état de votre processus pendant qu’il attend sur un processus externe se termine.</span><span class="sxs-lookup"><span data-stu-id="282bd-132">Durable functions pause and maintain the state of your process while it's waiting on an external process to finish.</span></span> <span data-ttu-id="282bd-133">Traitement asynchrone réduit le temps que le processus s’exécute.</span><span class="sxs-lookup"><span data-stu-id="282bd-133">Asynchronous handling reduces the time the actual process runs.</span></span>

## <a name="startup-time"></a><span data-ttu-id="282bd-134">Temps de démarrage</span><span class="sxs-lookup"><span data-stu-id="282bd-134">Startup time</span></span>

<span data-ttu-id="282bd-135">Un problème potentiel avec des implémentations sans serveur est le temps de démarrage.</span><span class="sxs-lookup"><span data-stu-id="282bd-135">One potential concern with serverless implementations is startup time.</span></span> <span data-ttu-id="282bd-136">Pour économiser les ressources, de nombreux fournisseurs sans serveur créent infrastructure « à la demande. »</span><span class="sxs-lookup"><span data-stu-id="282bd-136">To conserve resources, many serverless providers create infrastructure "on demand."</span></span> <span data-ttu-id="282bd-137">Lorsqu’une fonction sans serveur est déclenchée après une période de temps, les ressources pour héberger la fonction deviez être créé ou redémarré.</span><span class="sxs-lookup"><span data-stu-id="282bd-137">When a serverless function is triggered after a period of time, the resources to host the function may need to be created or restarted.</span></span> <span data-ttu-id="282bd-138">Dans certaines situations, les démarrages à froid peuvent entraîner des retards de quelques secondes.</span><span class="sxs-lookup"><span data-stu-id="282bd-138">In some situations, cold starts may result in delays of several seconds.</span></span> <span data-ttu-id="282bd-139">Temps de démarrage varie entre les fournisseurs et les niveaux de service.</span><span class="sxs-lookup"><span data-stu-id="282bd-139">Startup time varies across providers and service levels.</span></span> <span data-ttu-id="282bd-140">Il existe plusieurs approches pour les temps de démarrage adresse s’il est important de réduire à la réussite de l’application.</span><span class="sxs-lookup"><span data-stu-id="282bd-140">There are a few approaches to address startup time if it's important to minimize for the success of the app.</span></span>

* <span data-ttu-id="282bd-141">Certains fournisseurs permettent aux utilisateurs de payer pour les niveaux de service qui garantissent l’infrastructure est « always on ».</span><span class="sxs-lookup"><span data-stu-id="282bd-141">Some providers allow users to pay for service levels that guarantee infrastructure is "always on".</span></span>
* <span data-ttu-id="282bd-142">Implémenter un mécanisme keep-alive (ping le point de terminaison pour qu’il soit « éveillés »).</span><span class="sxs-lookup"><span data-stu-id="282bd-142">Implement a keep-alive mechanism (ping the endpoint to keep it "awake").</span></span>
* <span data-ttu-id="282bd-143">Utiliser l’orchestration, comme Kubernetes avec une approche de la fonction en conteneur (l’hôte est déjà en cours d’exécution pour la rotation de nouvelles instances est extrêmement rapide).</span><span class="sxs-lookup"><span data-stu-id="282bd-143">Use orchestration like Kubernetes with a containerized function approach (the host is already running so spinning up new instances is extremely fast).</span></span>

## <a name="database-updates-and-migrations"></a><span data-ttu-id="282bd-144">Migrations et mises à jour de la base de données</span><span class="sxs-lookup"><span data-stu-id="282bd-144">Database updates and migrations</span></span>

<span data-ttu-id="282bd-145">L’avantage du code sans serveur est que vous pouvez libérer des nouvelles fonctions sans avoir à redéployer l’application entière.</span><span class="sxs-lookup"><span data-stu-id="282bd-145">An advantage of serverless code is that you can release new functions without having to redeploy the entire application.</span></span> <span data-ttu-id="282bd-146">Cet avantage peut devenir un inconvénient lorsqu’une base de données relationnelle est impliqué.</span><span class="sxs-lookup"><span data-stu-id="282bd-146">This advantage can become a disadvantage when there's a relational database involved.</span></span> <span data-ttu-id="282bd-147">Modifications apportées aux schémas de base de données sont difficiles à synchroniser avec les mises à jour sans serveur.</span><span class="sxs-lookup"><span data-stu-id="282bd-147">Changes to database schemas are difficult to synchronize with serverless updates.</span></span> <span data-ttu-id="282bd-148">Défis supplémentaires sont posés lorsque des problèmes surgissent et les modifications doivent être restaurées.</span><span class="sxs-lookup"><span data-stu-id="282bd-148">Additional challenges are posed when things go wrong and the changes must be rolled back.</span></span> <span data-ttu-id="282bd-149">L’intégrité des données est l’une des raisons qui est recommandé pour les microservices et les fonctions sans serveur que qu’ils possèdent leurs propres données.</span><span class="sxs-lookup"><span data-stu-id="282bd-149">Data integrity is one reason that a best practice for microservices and serverless functions is that they own their own data.</span></span> <span data-ttu-id="282bd-150">Il est possible de déployer les modifications comme une seule unité de calcul et de données.</span><span class="sxs-lookup"><span data-stu-id="282bd-150">It is possible to deploy changes as a single unit of compute and data.</span></span> <span data-ttu-id="282bd-151">La réalité est que de nombreux systèmes hérités fonctionnalité des bases de données back-end volumineuses qui doivent être synchronisées avec l’architecture sans serveur.</span><span class="sxs-lookup"><span data-stu-id="282bd-151">The reality is that many legacy systems feature a large back-end database that must be reconciled with the serverless architecture.</span></span>

<span data-ttu-id="282bd-152">Une approche courante pour résoudre des versions de schéma consiste à jamais modifier les propriétés existantes et les colonnes, mais à la place ajouter de nouvelles informations.</span><span class="sxs-lookup"><span data-stu-id="282bd-152">A popular approach to solve schema versioning is to never modify existing properties and columns, but instead add new information.</span></span> <span data-ttu-id="282bd-153">Par exemple, considérez une modification apportée à déplacer à partir d’une valeur booléenne « completed » indicateur pour une liste de tâches à une « date d’achèvement ».</span><span class="sxs-lookup"><span data-stu-id="282bd-153">For example, consider a change to move from a Boolean "completed" flag for a todo list to a "completed date."</span></span> <span data-ttu-id="282bd-154">Au lieu de supprimer l’ancien champ, la modification de la base de données sera :</span><span class="sxs-lookup"><span data-stu-id="282bd-154">Instead of removing the old field, the database change will:</span></span>

1. <span data-ttu-id="282bd-155">Ajoutez un champ Nouveau « date de fin ».</span><span class="sxs-lookup"><span data-stu-id="282bd-155">Add a new "completed date" field.</span></span>
1. <span data-ttu-id="282bd-156">Transformez le champ booléen « terminé » à une fonction calculée qui détermine si la date d’achèvement est après la date actuelle.</span><span class="sxs-lookup"><span data-stu-id="282bd-156">Transform the "completed" Boolean field to a computed function that evaluates whether the completed date is after the current date.</span></span>
1. <span data-ttu-id="282bd-157">Ajouter un déclencheur pour définir la date d’achèvement à la date actuelle lorsque la valeur booléenne terminée est définie sur true.</span><span class="sxs-lookup"><span data-stu-id="282bd-157">Add a trigger to set the completed date to the current date when the completed Boolean is set to true.</span></span>

<span data-ttu-id="282bd-158">La séquence de modifications garantit que le code hérité continue à s’exécuter « tel quel », tandis que les fonctions sans serveur plus récente peuvent tirer parti du nouveau champ.</span><span class="sxs-lookup"><span data-stu-id="282bd-158">The sequence of changes ensures that legacy code continues to run "as is" while newer serverless functions can take advantage of the new field.</span></span>

<span data-ttu-id="282bd-159">Pour plus d’informations sur les données dans les architectures sans serveur, consultez [défis et solutions pour la gestion de données distribuée](../microservices-architecture/architect-microservice-container-applications/distributed-data-management.md).</span><span class="sxs-lookup"><span data-stu-id="282bd-159">For more information about data in serverless architectures, see [Challenges and solutions for distributed data management](../microservices-architecture/architect-microservice-container-applications/distributed-data-management.md).</span></span>

## <a name="scaling"></a><span data-ttu-id="282bd-160">Mise à l'échelle</span><span class="sxs-lookup"><span data-stu-id="282bd-160">Scaling</span></span>

<span data-ttu-id="282bd-161">Il est souvent à tort que sans serveur ne signifie « aucun serveur ».</span><span class="sxs-lookup"><span data-stu-id="282bd-161">It's a common misconception that serverless means "no server."</span></span> <span data-ttu-id="282bd-162">Il s’agit en fait « moins serveur. »</span><span class="sxs-lookup"><span data-stu-id="282bd-162">It's in fact "less server."</span></span> <span data-ttu-id="282bd-163">Il le fait est qu'une infrastructure de sauvegarde est importante de comprendre quand il s’agit de mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="282bd-163">The fact there is a backing infrastructure is important to understand when it comes to scaling.</span></span> <span data-ttu-id="282bd-164">Plateformes plus serverless fournissent un ensemble de contrôles pour gérer la façon dont l’infrastructure doit mettre à l’échelle lors de la densité de l’événement augmente.</span><span class="sxs-lookup"><span data-stu-id="282bd-164">Most serverless platforms provide a set of controls to handle how the infrastructure should scale when event density increases.</span></span> <span data-ttu-id="282bd-165">Vous pouvez choisir parmi une variété d’options, mais votre stratégie peut varier en fonction de la fonction.</span><span class="sxs-lookup"><span data-stu-id="282bd-165">You can choose from a variety of options, but your strategy may vary depending on the function.</span></span> <span data-ttu-id="282bd-166">En outre, les fonctions sont généralement exécutées sous un hôte associées, afin que les fonctions sur le même hôte ont les mêmes options de mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="282bd-166">Furthermore, functions are typically run under a related host, so that functions on the same host have the same scale options.</span></span> <span data-ttu-id="282bd-167">Par conséquent, il est nécessaire organiser et aborder les fonctions sont hébergées en fonction des exigences de mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="282bd-167">Therefore it is necessary to organize and strategize which functions are hosted together based on scale requirements.</span></span>

<span data-ttu-id="282bd-168">Règles souvent spécifient comment monter en puissance (augmenter les ressources hôtes) et la montée en puissance (augmenter le nombre d’instances d’hôte) en fonction des paramètres différents.</span><span class="sxs-lookup"><span data-stu-id="282bd-168">Rules often specify how to scale-up (increase the host resources) and scale-out (increase the number of host instances) based on varying parameters.</span></span> <span data-ttu-id="282bd-169">Déclencheurs pour les échelles peuvent inclure la planification, taux de demandes, l’utilisation du processeur et utilisation de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="282bd-169">Triggers for scales may include schedule, request rates, CPU utilization, and memory usage.</span></span> <span data-ttu-id="282bd-170">Souvent de meilleures performances ont un coût supérieur.</span><span class="sxs-lookup"><span data-stu-id="282bd-170">Higher performance often comes at a greater cost.</span></span> <span data-ttu-id="282bd-171">L’une des approches moins coûteux, basé sur la consommation ne peuvent pas mettre à l’échelle comme rapidement lorsque le taux de demandes soudainement augmente.</span><span class="sxs-lookup"><span data-stu-id="282bd-171">The less expensive, consumption-based approaches may not scale as quickly when the request rate suddenly increases.</span></span> <span data-ttu-id="282bd-172">Il existe un compromis entre le paiement à l’avance « coût d’assurance » par rapport à payer strictement « en tant que vous allez » et risquer des réponses plus lents en raison d’une augmentation soudaine de la demande.</span><span class="sxs-lookup"><span data-stu-id="282bd-172">There is a trade-off between paying up front "insurance cost" versus paying strictly "as you go" and risking slower responses due to sudden increases in demand.</span></span>

## <a name="monitoring-tracing-and-logging"></a><span data-ttu-id="282bd-173">Surveillance, le suivi et journalisation</span><span class="sxs-lookup"><span data-stu-id="282bd-173">Monitoring, tracing, and logging</span></span>

<span data-ttu-id="282bd-174">Un aspect souvent négligée en matière de DevOps surveille les applications une fois déployées.</span><span class="sxs-lookup"><span data-stu-id="282bd-174">An often overlooked aspect of DevOps is monitoring applications once deployed.</span></span> <span data-ttu-id="282bd-175">Il est important de disposer d’une stratégie pour surveiller les fonctions sans serveur.</span><span class="sxs-lookup"><span data-stu-id="282bd-175">It's important to have a strategy for monitoring serverless functions.</span></span> <span data-ttu-id="282bd-176">Le principal défi est souvent corrélation ou reconnaît lorsqu’un utilisateur appelle plusieurs fonctions dans le cadre de l’interaction même.</span><span class="sxs-lookup"><span data-stu-id="282bd-176">The biggest challenge is often correlation, or recognizing when a user calls multiple functions as part of the same interaction.</span></span> <span data-ttu-id="282bd-177">Plateformes plus sans serveur permettent une journalisation de console peut être importé dans des outils tiers.</span><span class="sxs-lookup"><span data-stu-id="282bd-177">Most serverless platforms allow console logging that can be imported into third-party tools.</span></span> <span data-ttu-id="282bd-178">Il existe également des options pour automatiser la collecte de données de télémétrie, créer et suivre les ID de corrélation et surveiller les actions spécifiques pour obtenir des informations détaillées.</span><span class="sxs-lookup"><span data-stu-id="282bd-178">There are also options to automate collection of telemetry, generate and track correlation IDs, and monitor specific actions to provide detailed insights.</span></span> <span data-ttu-id="282bd-179">Azure fournit des avancées [plateforme d’Application Insights](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) pour la surveillance et analytique.</span><span class="sxs-lookup"><span data-stu-id="282bd-179">Azure provides the advanced [Application Insights platform](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) for monitoring and analytics.</span></span>

## <a name="inter-service-dependencies"></a><span data-ttu-id="282bd-180">Dépendances entre services</span><span class="sxs-lookup"><span data-stu-id="282bd-180">Inter-service dependencies</span></span>

<span data-ttu-id="282bd-181">Une architecture sans serveur peut inclure des fonctions qui s’appuient sur d’autres fonctions.</span><span class="sxs-lookup"><span data-stu-id="282bd-181">A serverless architecture may include functions that rely on other functions.</span></span> <span data-ttu-id="282bd-182">En fait, il n’est pas rare que dans une architecture sans serveur pour disposer de plusieurs services s’appellent mutuellement en tant que partie d’une interaction ou d’une transaction distribuée.</span><span class="sxs-lookup"><span data-stu-id="282bd-182">In fact, it isn't uncommon in a serverless architecture to have multiple services call each other as part of an interaction or distributed transaction.</span></span> <span data-ttu-id="282bd-183">Pour éviter un couplage important, il est recommandé que les services ne référencent mutuellement directement.</span><span class="sxs-lookup"><span data-stu-id="282bd-183">To avoid strong coupling, it's recommended that services don't reference each other directly.</span></span> <span data-ttu-id="282bd-184">Lorsque le point de terminaison pour un service doit être modifié, des références directes pourrait entraîner la refactorisation principale.</span><span class="sxs-lookup"><span data-stu-id="282bd-184">When the endpoint for a service needs to change, direct references could result in major refactoring.</span></span> <span data-ttu-id="282bd-185">Une solution suggérée consiste à fournir un mécanisme de découverte de service, par exemple un Registre, qui fournit le point de terminaison approprié pour un type de demande.</span><span class="sxs-lookup"><span data-stu-id="282bd-185">A suggested solution is to provide a service discovery mechanism, such as a registry, that provides the appropriate end point for a request type.</span></span> <span data-ttu-id="282bd-186">Une autre solution consiste à tirer parti des services de messagerie telles que les files d’attente ou rubriques pour la communication entre les services.</span><span class="sxs-lookup"><span data-stu-id="282bd-186">Another solution is to leverage messaging services like queues or topics for communication between services.</span></span>

## <a name="managing-failure-and-providing-resiliency"></a><span data-ttu-id="282bd-187">La gestion des défaillances et fournir la résilience</span><span class="sxs-lookup"><span data-stu-id="282bd-187">Managing failure and providing resiliency</span></span>

<span data-ttu-id="282bd-188">Il est également important de prendre en compte la *modèle disjoncteur*: Si, pour une raison quelconque, un service continue d’échouer, il n’est pas recommandé d’appeler ce service à plusieurs reprises.</span><span class="sxs-lookup"><span data-stu-id="282bd-188">It's also important to consider the *circuit-breaker pattern*: If, for some reason, a service continues to fail, it isn't advisable to call that service repeatedly.</span></span> <span data-ttu-id="282bd-189">Au lieu de cela, un autre service est appelé, ou un message retourné jusqu'à ce que l’intégrité du service dépendant est rétablie.</span><span class="sxs-lookup"><span data-stu-id="282bd-189">Instead, an alternative service is called or a message returned until the health of the dependent service is re-established.</span></span> <span data-ttu-id="282bd-190">L’architecture sans serveur doit prendre en compte la stratégie de résolution et la gestion des dépendances entre services.</span><span class="sxs-lookup"><span data-stu-id="282bd-190">The serverless architecture needs to take into account the strategy for resolving and managing inter-service dependencies.</span></span>

<span data-ttu-id="282bd-191">Pour continuer le modèle disjoncteur, services doivent être résilient et tolérant aux pannes.</span><span class="sxs-lookup"><span data-stu-id="282bd-191">To continue the circuit-breaker pattern, services need to be fault tolerant and resilient.</span></span> <span data-ttu-id="282bd-192">Une tolérance de panne désigne la capacité de votre application pour continuer à s’exécuter même après des exceptions inattendues ou États non valides sont rencontrées.</span><span class="sxs-lookup"><span data-stu-id="282bd-192">Fault tolerance refers to the ability of your application to continue running even after unexpected exceptions or invalid states are encountered.</span></span> <span data-ttu-id="282bd-193">Une tolérance de panne est généralement une fonction du code lui-même et comment il a écrit pour gérer les exceptions.</span><span class="sxs-lookup"><span data-stu-id="282bd-193">Fault tolerance is typically a function of the code itself and how it's written to handle exceptions.</span></span> <span data-ttu-id="282bd-194">La résilience fait référence à la capacité de l’application est à la récupération après des échecs.</span><span class="sxs-lookup"><span data-stu-id="282bd-194">Resiliency refers to how capable the app is at recovering from failures.</span></span> <span data-ttu-id="282bd-195">La résilience est généralement gérée par la plateforme sans serveur.</span><span class="sxs-lookup"><span data-stu-id="282bd-195">Resiliency is often managed by the serverless platform.</span></span> <span data-ttu-id="282bd-196">La plateforme doit être en mesure de faire tourner une nouvelle instance de la fonction sans serveur en cas d’échec de l’existant.</span><span class="sxs-lookup"><span data-stu-id="282bd-196">The platform should be able to spin up a new serverless function instance when the existing one fails.</span></span> <span data-ttu-id="282bd-197">La plate-forme doit également être suffisamment intelligente s’arrête de nouvelles instances en cas d’échec de chaque nouvelle instance.</span><span class="sxs-lookup"><span data-stu-id="282bd-197">The platform should also be intelligent enough to stop spinning up new instances when every new instance fails.</span></span>

<span data-ttu-id="282bd-198">Pour plus d’informations, consultez [implémentation du modèle de disjoncteur](../microservices-architecture/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="282bd-198">For more information, see [Implementing the Circuit Breaker pattern](../microservices-architecture/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span></span>

## <a name="versioning-and-greenblue-deployments"></a><span data-ttu-id="282bd-199">Déploiements de contrôle de version et vert/bleu</span><span class="sxs-lookup"><span data-stu-id="282bd-199">Versioning and green/blue deployments</span></span>

<span data-ttu-id="282bd-200">Un avantage majeur de sans serveur est la possibilité de mettre à niveau d’une fonction spécifique sans avoir à redéployer l’application entière.</span><span class="sxs-lookup"><span data-stu-id="282bd-200">A major benefit of serverless is the ability to upgrade a specific function without having to redeploy the entire application.</span></span> <span data-ttu-id="282bd-201">Pour les mises à niveau réussisse, les fonctions doivent être avec contrôle de version afin que les services qui les appellent sont acheminés vers la version correcte du code.</span><span class="sxs-lookup"><span data-stu-id="282bd-201">For upgrades to be successful, functions must be versioned so that services calling them are routed to the correct version of code.</span></span> <span data-ttu-id="282bd-202">Une stratégie pour le déploiement de nouvelles versions est également importante.</span><span class="sxs-lookup"><span data-stu-id="282bd-202">A strategy for deploying new versions is also important.</span></span> <span data-ttu-id="282bd-203">Une approche courante consiste à utiliser « vert/bleu déploiements »</span><span class="sxs-lookup"><span data-stu-id="282bd-203">A common approach is to use "green/blue deployments."</span></span> <span data-ttu-id="282bd-204">Le déploiement vert est la fonction active.</span><span class="sxs-lookup"><span data-stu-id="282bd-204">The green deployment is the current function.</span></span> <span data-ttu-id="282bd-205">Une nouvelle version de « bleue » est déployée en production et testée.</span><span class="sxs-lookup"><span data-stu-id="282bd-205">A new "blue" version is deployed to production and tested.</span></span> <span data-ttu-id="282bd-206">Lorsque les tests réussissent, les versions de vertes et bleues sont échangées afin de la nouvelle version est fourni en direct.</span><span class="sxs-lookup"><span data-stu-id="282bd-206">When testing passes, the green and blue versions are swapped so the new version comes live.</span></span> <span data-ttu-id="282bd-207">Si des problèmes sont rencontrés, ils peuvent être échangés en retour.</span><span class="sxs-lookup"><span data-stu-id="282bd-207">If any issues are encountered, they can be swapped back.</span></span> <span data-ttu-id="282bd-208">Prise en charge le contrôle de version et les déploiements vert/bleu nécessite une combinaison de création de fonctions pour s’adapter aux changements de version et l’utilisation de la plateforme sans serveur pour gérer les déploiements.</span><span class="sxs-lookup"><span data-stu-id="282bd-208">Supporting versioning and green/blue deployments requires a combination of authoring the functions to accommodate version changes and working with the serverless platform to handle deployments.</span></span> <span data-ttu-id="282bd-209">Une approche possible consiste à utiliser des proxys qui sont décrites dans le [plateforme serverless Azure](azure-functions.md#proxies) chapitre.</span><span class="sxs-lookup"><span data-stu-id="282bd-209">One possible approach is to use proxies, which are described in the [Azure serverless platform](azure-functions.md#proxies) chapter.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="282bd-210">[Précédent](serverless-architecture.md)
>[Suivant](serverless-design-examples.md)</span><span class="sxs-lookup"><span data-stu-id="282bd-210">[Previous](serverless-architecture.md)
[Next](serverless-design-examples.md)</span></span>
