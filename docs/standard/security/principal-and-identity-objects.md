---
title: Objets Principal et Identity
description: En savoir plus sur les objets d’identité, qui représentent des utilisateurs dans .NET. En savoir plus sur les objets principal, qui encapsulent à la fois un objet Identity & un rôle.
ms.date: 07/15/2020
ms.technology: dotnet-standard
helpviewer_keywords:
- WindowsIdentity objects
- GenericIdentity objects
- GenericPrincipal objects
- identity objects, about identity objects
- security [.NET], identity objects
- principal objects, about principal objects
- security [.NET], principals
- WindowsPrincipal objects
ms.assetid: aa5930ad-f3d7-40aa-b6f6-c6edcd5c64f7
ms.openlocfilehash: 79caeed6ed64a07238e398af1e12f51640b88b62
ms.sourcegitcommit: b7a8b09828bab4e90f66af8d495ecd7024c45042
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87555252"
---
# <a name="principal-and-identity-objects"></a><span data-ttu-id="fc104-104">Objets Principal et Identity</span><span class="sxs-lookup"><span data-stu-id="fc104-104">Principal and Identity Objects</span></span>

> [!NOTE]
> <span data-ttu-id="fc104-105">Cet article s’applique à Windows.</span><span class="sxs-lookup"><span data-stu-id="fc104-105">This article applies to Windows.</span></span>
>
> <span data-ttu-id="fc104-106">Pour plus d’informations sur la ASP.NET Core, consultez [ASP.net Core Security](/aspnet/core/security/).</span><span class="sxs-lookup"><span data-stu-id="fc104-106">For information about ASP.NET Core, see [ASP.NET Core Security](/aspnet/core/security/).</span></span>

<span data-ttu-id="fc104-107">Le code managé peut découvrir l’identité ou le rôle d’un principal à l’aide d’un <xref:System.Security.Principal.IPrincipal> objet, qui contient une référence à un <xref:System.Security.Principal.IIdentity> objet.</span><span class="sxs-lookup"><span data-stu-id="fc104-107">Managed code can discover the identity or the role of a principal through a <xref:System.Security.Principal.IPrincipal> object, which contains a reference to an <xref:System.Security.Principal.IIdentity> object.</span></span> <span data-ttu-id="fc104-108">Il peut être utile de comparer des objets identity et principal à des concepts familiers comme les comptes des utilisateurs et des groupes.</span><span class="sxs-lookup"><span data-stu-id="fc104-108">It might be helpful to compare identity and principal objects to familiar concepts like user and group accounts.</span></span> <span data-ttu-id="fc104-109">Dans la plupart des environnements de réseau, les comptes d’utilisateur représentent des personnes ou des programmes, tandis que les comptes de groupe représentent des catégories d’utilisateurs et les droits qu’ils possèdent.</span><span class="sxs-lookup"><span data-stu-id="fc104-109">In most network environments, user accounts represent people or programs, while group accounts represent certain categories of users and the rights they possess.</span></span> <span data-ttu-id="fc104-110">De même, les objets d’identité .NET représentent des utilisateurs, tandis que les rôles représentent des appartenances et des contextes de sécurité.</span><span class="sxs-lookup"><span data-stu-id="fc104-110">Similarly, .NET identity objects represent users, while roles represent memberships and security contexts.</span></span> <span data-ttu-id="fc104-111">Dans .NET, l’objet principal encapsule un objet Identity et un role.</span><span class="sxs-lookup"><span data-stu-id="fc104-111">In .NET, the principal object encapsulates both an identity object and a role.</span></span> <span data-ttu-id="fc104-112">Les applications .NET accordent des droits au principal en fonction de son identité ou, plus communément, de son appartenance au rôle.</span><span class="sxs-lookup"><span data-stu-id="fc104-112">.NET applications grant rights to the principal based on its identity or, more commonly, its role membership.</span></span>  
  
## <a name="identity-objects"></a><span data-ttu-id="fc104-113">Objets Identity</span><span class="sxs-lookup"><span data-stu-id="fc104-113">Identity Objects</span></span>

<span data-ttu-id="fc104-114">L’objet identity encapsule des informations sur l’utilisateur ou l’une entité en cours de validation.</span><span class="sxs-lookup"><span data-stu-id="fc104-114">The identity object encapsulates information about the user or entity being validated.</span></span> <span data-ttu-id="fc104-115">Au niveau de base, les objets identity contiennent un nom et un type d’authentification.</span><span class="sxs-lookup"><span data-stu-id="fc104-115">At their most basic level, identity objects contain a name and an authentication type.</span></span> <span data-ttu-id="fc104-116">Le nom peut être un nom d’utilisateur ou le nom d’un compte Windows, tandis que le type d’authentification peut être un protocole de connexion pris en charge, tel que Kerberos V5, ou une valeur personnalisée.</span><span class="sxs-lookup"><span data-stu-id="fc104-116">The name can either be a user's name or the name of a Windows account, while the authentication type can be either a supported logon protocol, such as Kerberos V5, or a custom value.</span></span> <span data-ttu-id="fc104-117">.NET définit un <xref:System.Security.Principal.GenericIdentity> objet qui peut être utilisé pour la plupart des scénarios de connexion personnalisés et un objet plus spécialisé <xref:System.Security.Principal.WindowsIdentity> qui peut être utilisé lorsque vous souhaitez que votre application s’appuie sur l’authentification Windows.</span><span class="sxs-lookup"><span data-stu-id="fc104-117">.NET defines a <xref:System.Security.Principal.GenericIdentity> object that can be used for most custom logon scenarios and a more specialized <xref:System.Security.Principal.WindowsIdentity> object that can be used when you want your application to rely on Windows authentication.</span></span> <span data-ttu-id="fc104-118">En outre, vous pouvez définir votre propre classe d’identité qui encapsule des informations utilisateur personnalisées.</span><span class="sxs-lookup"><span data-stu-id="fc104-118">Additionally, you can define your own identity class that encapsulates custom user information.</span></span>  
  
<span data-ttu-id="fc104-119">L' <xref:System.Security.Principal.IIdentity> interface définit des propriétés pour accéder à un nom et à un type d’authentification, comme Kerberos V5 ou NTLM.</span><span class="sxs-lookup"><span data-stu-id="fc104-119">The <xref:System.Security.Principal.IIdentity> interface defines properties for accessing a name and an authentication type, such as Kerberos V5 or NTLM.</span></span> <span data-ttu-id="fc104-120">Toutes les classes **Identity** implémentent l’interface **IIdentity**.</span><span class="sxs-lookup"><span data-stu-id="fc104-120">All **Identity** classes implement the **IIdentity** interface.</span></span> <span data-ttu-id="fc104-121">Aucune relation n’est requise entre un objet **Identity** et le jeton de processus Windows NT sous lequel un thread est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="fc104-121">There is no required relationship between an **Identity** object and the Windows NT process token under which a thread is currently executing.</span></span> <span data-ttu-id="fc104-122">Toutefois, si l’objet **Identity** est un objet **WindowsIdentity**, l’identité est supposée représenter un jeton de sécurité Windows NT.</span><span class="sxs-lookup"><span data-stu-id="fc104-122">However, if the **Identity** object is a **WindowsIdentity** object, the identity is assumed to represent a Windows NT security token.</span></span>  
  
## <a name="principal-objects"></a><span data-ttu-id="fc104-123">Objets Principal</span><span class="sxs-lookup"><span data-stu-id="fc104-123">Principal Objects</span></span>

<span data-ttu-id="fc104-124">L’objet principal représente le contexte de sécurité dans lequel le code est exécuté.</span><span class="sxs-lookup"><span data-stu-id="fc104-124">The principal object represents the security context under which code is running.</span></span> <span data-ttu-id="fc104-125">Les applications qui implémentent une sécurité basée sur les rôles accordent des droits en fonction du rôle associé à un objet principal.</span><span class="sxs-lookup"><span data-stu-id="fc104-125">Applications that implement role-based security grant rights based on the role associated with a principal object.</span></span> <span data-ttu-id="fc104-126">À l’instar des objets Identity, .NET fournit un <xref:System.Security.Principal.GenericPrincipal> objet et un <xref:System.Security.Principal.WindowsPrincipal> objet.</span><span class="sxs-lookup"><span data-stu-id="fc104-126">Similar to identity objects, .NET provides a <xref:System.Security.Principal.GenericPrincipal> object and a <xref:System.Security.Principal.WindowsPrincipal> object.</span></span> <span data-ttu-id="fc104-127">Vous pouvez également définir vos propres classes principal personnalisées.</span><span class="sxs-lookup"><span data-stu-id="fc104-127">You can also define your own custom principal classes.</span></span>  
  
<span data-ttu-id="fc104-128">L' <xref:System.Security.Principal.IPrincipal> interface définit une propriété pour accéder à un objet **Identity** associé, ainsi qu’une méthode pour déterminer si l’utilisateur identifié par l’objet **principal** est membre d’un rôle donné.</span><span class="sxs-lookup"><span data-stu-id="fc104-128">The <xref:System.Security.Principal.IPrincipal> interface defines a property for accessing an associated **Identity** object as well as a method for determining whether the user identified by the **Principal** object is a member of a given role.</span></span> <span data-ttu-id="fc104-129">Toutes les classes **Principal** implémentent l’interface **IPrincipal** ainsi que les propriétés et méthodes supplémentaires nécessaires.</span><span class="sxs-lookup"><span data-stu-id="fc104-129">All **Principal** classes implement the **IPrincipal** interface as well as any additional properties and methods that are necessary.</span></span> <span data-ttu-id="fc104-130">Par exemple, le common language runtime fournit la classe **WindowsPrincipal** qui implémente des fonctionnalités supplémentaires pour mapper l’appartenance au groupe Windows NT ou Windows 2000 avec des rôles.</span><span class="sxs-lookup"><span data-stu-id="fc104-130">For example, the common language runtime provides the **WindowsPrincipal** class, which implements additional functionality for mapping Windows NT or Windows 2000 group membership to roles.</span></span>  
  
<span data-ttu-id="fc104-131">Un objet **principal** est lié à un objet de contexte d’appel ( <xref:System.Runtime.Remoting.Messaging.CallContext> ) au sein d’un domaine d’application ( <xref:System.AppDomain> ).</span><span class="sxs-lookup"><span data-stu-id="fc104-131">A **Principal** object is bound to a call context (<xref:System.Runtime.Remoting.Messaging.CallContext>) object within an application domain (<xref:System.AppDomain>).</span></span> <span data-ttu-id="fc104-132">Un contexte d’appel par défaut est toujours créé avec chaque nouveau **AppDomain**. Un contexte d’appel est donc toujours disponible pour accepter l’objet **Principal**.</span><span class="sxs-lookup"><span data-stu-id="fc104-132">A default call context is always created with each new **AppDomain**, so there is always a call context available to accept the **Principal** object.</span></span> <span data-ttu-id="fc104-133">Lorsqu’un nouveau thread est créé, un objet **CallContext** est également créé pour le thread.</span><span class="sxs-lookup"><span data-stu-id="fc104-133">When a new thread is created, a **CallContext** object is also created for the thread.</span></span> <span data-ttu-id="fc104-134">La référence de l’objet **Principal** est automatiquement copiée du thread de création dans l’objet **CallContext** du nouveau thread.</span><span class="sxs-lookup"><span data-stu-id="fc104-134">The **Principal** object reference is automatically copied from the creating thread to the new thread's **CallContext**.</span></span> <span data-ttu-id="fc104-135">Si le runtime ne peut pas déterminer quel objet **Principal** appartient au créateur du thread, il suit la stratégie par défaut de création d’un objet **Principal** et **Identity**.</span><span class="sxs-lookup"><span data-stu-id="fc104-135">If the runtime cannot determine which **Principal** object belongs to the creator of the thread, it follows the default policy for **Principal** and **Identity** object creation.</span></span>  
  
<span data-ttu-id="fc104-136">Une stratégie spécifique de domaine d’application configurable définit les règles permettant de déterminer le type d’objet **Principal** à associer à un nouveau domaine d’application.</span><span class="sxs-lookup"><span data-stu-id="fc104-136">A configurable application domain-specific policy defines the rules for deciding what type of **Principal** object to associate with a new application domain.</span></span> <span data-ttu-id="fc104-137">Si la stratégie de sécurité le permet, le runtime peut créer des objets **Principal** et **Identity** qui correspondent au jeton de système d’exploitation associé au thread en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="fc104-137">Where security policy permits, the runtime can create **Principal** and **Identity** objects that reflect the operating system token associated with the current thread of execution.</span></span> <span data-ttu-id="fc104-138">Par défaut, le runtime utilise des objets **Principal** et **Identity** qui représentent des utilisateurs non authentifiés.</span><span class="sxs-lookup"><span data-stu-id="fc104-138">By default, the runtime uses **Principal** and **Identity** objects that represent unauthenticated users.</span></span> <span data-ttu-id="fc104-139">Le runtime ne crée pas ces objets **Principal** et **Identity** par défaut tant que le code ne tente pas d’y accéder.</span><span class="sxs-lookup"><span data-stu-id="fc104-139">The runtime does not create these default **Principal** and **Identity** objects until the code attempts to access them.</span></span>  
  
<span data-ttu-id="fc104-140">Le code approuvé créant un domaine d’application peut définir la stratégie de domaine d’application qui régit la construction des objets **Principal** et **Identity** par défaut.</span><span class="sxs-lookup"><span data-stu-id="fc104-140">Trusted code that creates an application domain can set the application domain policy that controls construction of the default **Principal** and **Identity** objects.</span></span> <span data-ttu-id="fc104-141">Cette stratégie spécifique du domaine d’application s’applique à tous les threads d’exécution dans ce domaine d’application.</span><span class="sxs-lookup"><span data-stu-id="fc104-141">This application domain-specific policy applies to all execution threads in that application domain.</span></span> <span data-ttu-id="fc104-142">Un hôte approuvé non géré, par nature, a la possibilité de définir cette stratégie, mais le code managé qui définit cette stratégie doit avoir le <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> pour le contrôle de la stratégie de domaine.</span><span class="sxs-lookup"><span data-stu-id="fc104-142">An unmanaged, trusted host inherently has the ability to set this policy, but managed code that sets this policy must have the <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> for controlling domain policy.</span></span>  
  
<span data-ttu-id="fc104-143">Lors de la transmission d’un objet **Principal** entre des domaines d’application, mais dans le même processus (et donc sur le même ordinateur), l’infrastructure distante copie une référence à l’objet **Principal** associé au contexte de l’appelant dans le contexte de l’appelé.</span><span class="sxs-lookup"><span data-stu-id="fc104-143">When transmitting a **Principal** object across application domains but within the same process (and therefore on the same computer), the remoting infrastructure copies a reference to the **Principal** object associated with the caller's context to the callee's context.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fc104-144">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="fc104-144">See also</span></span>

- [<span data-ttu-id="fc104-145">Procédure : créer un objet WindowsPrincipal</span><span class="sxs-lookup"><span data-stu-id="fc104-145">How to: Create a WindowsPrincipal Object</span></span>](how-to-create-a-windowsprincipal-object.md)
- [<span data-ttu-id="fc104-146">Procédure : créer des objets GenericPrincipal et GenericIdentity</span><span class="sxs-lookup"><span data-stu-id="fc104-146">How to: Create GenericPrincipal and GenericIdentity Objects</span></span>](how-to-create-genericprincipal-and-genericidentity-objects.md)
- [<span data-ttu-id="fc104-147">Remplacement d'un objet Principal</span><span class="sxs-lookup"><span data-stu-id="fc104-147">Replacing a Principal Object</span></span>](replacing-a-principal-object.md)
- [<span data-ttu-id="fc104-148">Emprunt et restauration d'identité</span><span class="sxs-lookup"><span data-stu-id="fc104-148">Impersonating and Reverting</span></span>](impersonating-and-reverting.md)
- [<span data-ttu-id="fc104-149">Sécurité basée sur les rôles</span><span class="sxs-lookup"><span data-stu-id="fc104-149">Role-Based Security</span></span>](role-based-security.md)
- [<span data-ttu-id="fc104-150">Concepts fondamentaux sur la sécurité</span><span class="sxs-lookup"><span data-stu-id="fc104-150">Key Security Concepts</span></span>](key-security-concepts.md)
- [<span data-ttu-id="fc104-151">Sécurité ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="fc104-151">ASP.NET Core Security</span></span>](/aspnet/core/security/)
