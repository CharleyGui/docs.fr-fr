---
title: Stockage isolé
description: Explorez le stockage isolé, qui est un mécanisme de stockage de données qui offre une isolation & la sécurité en définissant des méthodes standardisées pour associer du code à des données enregistrées.
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- data storage using isolated storage
- stores
- storing data using isolated storage
- isolated storage
- location of isolated storage in file system
- standardizing storage systems
- storing data using isolated storage, when not to use
- code, isolated storage
- isolated storage, options
- data storage using isolated storage, when not to use
- storing data using isolated storage, options
- isolated storage, when not to use
- data storage using isolated storage, options
- isolation
ms.assetid: aff939d7-9e49-46f2-a8cd-938d3020e94e
ms.openlocfilehash: b9915faff2593cc51868c20e1a83a05ffca9f548
ms.sourcegitcommit: dc2feef0794cf41dbac1451a13b8183258566c0e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/24/2020
ms.locfileid: "85325940"
---
# <a name="isolated-storage"></a><span data-ttu-id="d20c7-103">Stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-103">Isolated Storage</span></span>
<a name="top"></a> <span data-ttu-id="d20c7-104">Pour les applications de bureau, le stockage isolé est un mécanisme de stockage de données qui offre une isolation et une sécurité en définissant des méthodes standardisées pour associer du code à des données enregistrées.</span><span class="sxs-lookup"><span data-stu-id="d20c7-104">For desktop apps, isolated storage is a data storage mechanism that provides isolation and safety by defining standardized ways of associating code with saved data.</span></span> <span data-ttu-id="d20c7-105">La standardisation offre également d'autres avantages.</span><span class="sxs-lookup"><span data-stu-id="d20c7-105">Standardization provides other benefits as well.</span></span> <span data-ttu-id="d20c7-106">Les administrateurs peuvent utiliser des outils conçus pour manipuler un stockage isolé afin de configurer l'espace de stockage du fichier, de définir des stratégies de sécurité et de supprimer des données inutilisées.</span><span class="sxs-lookup"><span data-stu-id="d20c7-106">Administrators can use tools designed to manipulate isolated storage to configure file storage space, set security policies, and delete unused data.</span></span> <span data-ttu-id="d20c7-107">Grâce au stockage isolé, votre code ne nécessite plus de chemins d'accès uniques pour spécifier des emplacements sécurisés dans le système de fichiers. En outre, les données sont protégées des autres applications qui possèdent uniquement un accès au stockage isolé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-107">With isolated storage, your code no longer needs unique paths to specify safe locations in the file system, and data is protected from other applications that only have isolated storage access.</span></span> <span data-ttu-id="d20c7-108">Les informations codées en dur concernant l'emplacement de la zone de stockage d'une application ne sont pas nécessaires.</span><span class="sxs-lookup"><span data-stu-id="d20c7-108">Hard-coded information that indicates where an application's storage area is located is unnecessary.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d20c7-109">Le stockage isolé n’est pas disponible pour les applications du Windows 8. x Store.</span><span class="sxs-lookup"><span data-stu-id="d20c7-109">Isolated storage is not available for Windows 8.x Store apps.</span></span> <span data-ttu-id="d20c7-110">À la place, utilisez les classes de données d’application des espaces de noms `Windows.Storage` inclus dans l’API Windows Runtime pour stocker des données locales et des fichiers.</span><span class="sxs-lookup"><span data-stu-id="d20c7-110">Instead, use the application data classes in the `Windows.Storage` namespaces included in the Windows Runtime API to store local data and files.</span></span> <span data-ttu-id="d20c7-111">Pour plus d’informations, consultez [Données d’applications](https://docs.microsoft.com/previous-versions/windows/apps/hh464917(v=win.10)) dans le Centre de développement Windows.</span><span class="sxs-lookup"><span data-stu-id="d20c7-111">For more information, see [Application data](https://docs.microsoft.com/previous-versions/windows/apps/hh464917(v=win.10)) in the Windows Dev Center.</span></span>

<span data-ttu-id="d20c7-112">Cette rubrique contient les sections suivantes :</span><span class="sxs-lookup"><span data-stu-id="d20c7-112">This topic contains the following sections:</span></span>

- [<span data-ttu-id="d20c7-113">Magasins et compartiments de données</span><span class="sxs-lookup"><span data-stu-id="d20c7-113">Data Compartments and Stores</span></span>](#data_compartments_and_stores)

- [<span data-ttu-id="d20c7-114">Quotas pour le stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-114">Quotas for Isolated Storage</span></span>](#quotas)

- [<span data-ttu-id="d20c7-115">Accès sécurisé</span><span class="sxs-lookup"><span data-stu-id="d20c7-115">Secure Access</span></span>](#secure_access)

- [<span data-ttu-id="d20c7-116">Utilisation autorisée et risques pour la sécurité</span><span class="sxs-lookup"><span data-stu-id="d20c7-116">Allowed Usage and Security Risks</span></span>](#allowed_usage)

- [<span data-ttu-id="d20c7-117">Emplacements de stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-117">Isolated Storage Locations</span></span>](#isolated_storage_locations)

- [<span data-ttu-id="d20c7-118">Création, énumération et suppression du stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-118">Creating, Enumerating, and Deleting Isolated Storage</span></span>](#isolated_storage_tasks)

- [<span data-ttu-id="d20c7-119">Scénarios de stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-119">Scenarios for Isolated Storage</span></span>](#scenarios_for_isolated_storage)

- [<span data-ttu-id="d20c7-120">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="d20c7-120">Related Topics</span></span>](#related_topics)

- [<span data-ttu-id="d20c7-121">Référence</span><span class="sxs-lookup"><span data-stu-id="d20c7-121">Reference</span></span>](#reference)

<a name="data_compartments_and_stores"></a>

## <a name="data-compartments-and-stores"></a><span data-ttu-id="d20c7-122">Magasins et compartiments de données</span><span class="sxs-lookup"><span data-stu-id="d20c7-122">Data Compartments and Stores</span></span>

<span data-ttu-id="d20c7-123">Lorsqu'une application stocke des données dans un fichier, le nom de fichier et l'emplacement de stockage doivent être choisis avec soin afin de réduire la possibilité que l'emplacement de stockage soit connu d'une autre application et, par conséquent, vulnérable en termes d'endommagement.</span><span class="sxs-lookup"><span data-stu-id="d20c7-123">When an application stores data in a file, the file name and storage location must be carefully chosen to minimize the possibility that the storage location will be known to another application and, therefore, will be vulnerable to corruption.</span></span> <span data-ttu-id="d20c7-124">Sans un système standard pour gérer ces problèmes, le développement de techniques adéquates qui minimisent les conflits de stockage peut être complexe et les résultats peuvent être incertains.</span><span class="sxs-lookup"><span data-stu-id="d20c7-124">Without a standard system in place to manage these problems, developing ad hoc techniques that minimize storage conflicts can be complex, and the results can be unreliable.</span></span>

<span data-ttu-id="d20c7-125">Grâce au stockage isolé, les données sont toujours isolées par utilisateur et par assembly.</span><span class="sxs-lookup"><span data-stu-id="d20c7-125">With isolated storage, data is always isolated by user and by assembly.</span></span> <span data-ttu-id="d20c7-126">Les informations d'identification telles que l'origine ou le nom fort de l'assembly déterminent l'identité de l'assembly.</span><span class="sxs-lookup"><span data-stu-id="d20c7-126">Credentials such as the origin or the strong name of the assembly determine assembly identity.</span></span> <span data-ttu-id="d20c7-127">Les données peuvent également être isolées par domaine d'application, en utilisant des informations d'identification similaires.</span><span class="sxs-lookup"><span data-stu-id="d20c7-127">Data can also be isolated by application domain, using similar credentials.</span></span>

<span data-ttu-id="d20c7-128">Lors de l'utilisation du stockage isolé, votre application enregistre des données dans un seul compartiment de données associé à un aspect de l'identité du code, tel que son éditeur ou sa signature.</span><span class="sxs-lookup"><span data-stu-id="d20c7-128">When you use isolated storage, your application saves data to a unique data compartment that is associated with some aspect of the code's identity, such as its publisher or signature.</span></span> <span data-ttu-id="d20c7-129">Le compartiment de données est une abstraction et non un emplacement de stockage spécifique ; il est composé d'au moins un fichier de stockage isolé, appelé un magasin, contenant des emplacements de répertoire réels où sont stockées les données.</span><span class="sxs-lookup"><span data-stu-id="d20c7-129">The data compartment is an abstraction, not a specific storage location; it consists of one or more isolated storage files, called stores, which contain the actual directory locations where data is stored.</span></span> <span data-ttu-id="d20c7-130">Par exemple, une application peut comprendre un compartiment de données qui lui est associé, et un répertoire du système de fichiers implémente le magasin qui préserve réellement les données de cette application.</span><span class="sxs-lookup"><span data-stu-id="d20c7-130">For example, an application might have a data compartment associated with it, and a directory in the file system would implement the store that actually preserves the data for that application.</span></span> <span data-ttu-id="d20c7-131">Les données enregistrées dans le magasin peuvent être de tout type, à partir des informations sur les préférences de l'utilisateur à des informations sur l'état de l'application.</span><span class="sxs-lookup"><span data-stu-id="d20c7-131">The data saved in the store can be any kind of data, from user preference information to application state.</span></span> <span data-ttu-id="d20c7-132">Pour le développeur, l'emplacement du compartiment de données est transparent.</span><span class="sxs-lookup"><span data-stu-id="d20c7-132">For the developer, the location of the data compartment is transparent.</span></span> <span data-ttu-id="d20c7-133">Les magasins résident généralement sur le client, mais une application serveur peut utiliser des magasins isolés pour stocker des informations en empruntant l'identité de l'utilisateur légitime.</span><span class="sxs-lookup"><span data-stu-id="d20c7-133">Stores usually reside on the client, but a server application could use isolated stores to store information by impersonating the user on whose behalf it is functioning.</span></span> <span data-ttu-id="d20c7-134">Le stockage isolé peut également stocker des informations sur un serveur avec le profil itinérant d'un utilisateur, de sorte que les informations se déplacent avec l'utilisateur itinérant.</span><span class="sxs-lookup"><span data-stu-id="d20c7-134">Isolated storage can also store information on a server with a user's roaming profile so that the information will travel with the roaming user.</span></span>

<a name="quotas"></a>

## <a name="quotas-for-isolated-storage"></a><span data-ttu-id="d20c7-135">Quotas pour le stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-135">Quotas for Isolated Storage</span></span>

<span data-ttu-id="d20c7-136">Un quota représente une limite de la quantité de stockage isolé pouvant être utilisée.</span><span class="sxs-lookup"><span data-stu-id="d20c7-136">A quota is a limit on the amount of isolated storage that can be used.</span></span> <span data-ttu-id="d20c7-137">Le quota inclut des octets d'espace de fichier ainsi que la surcharge associée au répertoire et d'autres informations du magasin.</span><span class="sxs-lookup"><span data-stu-id="d20c7-137">The quota includes bytes of file space as well as the overhead associated with the directory and other information in the store.</span></span> <span data-ttu-id="d20c7-138">Le stockage isolé utilise des quotas d'autorisation qui représentent des limites de stockage définies via des objets <xref:System.Security.Permissions.IsolatedStoragePermission> .</span><span class="sxs-lookup"><span data-stu-id="d20c7-138">Isolated storage uses permission quotas, which are storage limits that are set by using <xref:System.Security.Permissions.IsolatedStoragePermission> objects.</span></span> <span data-ttu-id="d20c7-139">Lors d'une tentative d'écriture de données qui dépassent le quota, l'exception <xref:System.IO.IsolatedStorage.IsolatedStorageException> est levée.</span><span class="sxs-lookup"><span data-stu-id="d20c7-139">If you try to write data that exceeds the quota, an <xref:System.IO.IsolatedStorage.IsolatedStorageException> exception is thrown.</span></span>  <span data-ttu-id="d20c7-140">La stratégie de sécurité, modifiable à l'aide de l'outil .NET Framework Configuration  Tool (Mscorcfg.msc) détermine les autorisations accordées au code.</span><span class="sxs-lookup"><span data-stu-id="d20c7-140">Security policy, which can be modified using the .NET Framework Configuration Tool (Mscorcfg.msc), determines which permissions are granted to code.</span></span> <span data-ttu-id="d20c7-141">Le code possédant une autorisation <xref:System.Security.Permissions.IsolatedStoragePermission> ne peut pas utiliser davantage de stockage que celui autorisé par la propriété <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> .</span><span class="sxs-lookup"><span data-stu-id="d20c7-141">Code that has been granted <xref:System.Security.Permissions.IsolatedStoragePermission> is restricted to using no more storage than the <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> property allows.</span></span> <span data-ttu-id="d20c7-142">Toutefois, dans la mesure où le code peut ignorer des quotas d'autorisation en présentant diverses identités d'utilisateur, les quotas d'autorisation servent d'indications sur la façon dont le code doit se comporter et ne représentent pas une limite définitive du comportement du code.</span><span class="sxs-lookup"><span data-stu-id="d20c7-142">However, because code can bypass permission quotas by presenting different user identities, permission quotas serve as guidelines for how code should behave rather than as a firm limit on code behavior.</span></span>

<span data-ttu-id="d20c7-143">Les quotas ne sont pas appliqués sur les magasins itinérants.</span><span class="sxs-lookup"><span data-stu-id="d20c7-143">Quotas are not enforced on roaming stores.</span></span> <span data-ttu-id="d20c7-144">C'est pourquoi, pour que le code les utilise, le niveau d'autorisation requis est un peu plus haut.</span><span class="sxs-lookup"><span data-stu-id="d20c7-144">Because of this, a slightly higher level of permission is required for code to use them.</span></span> <span data-ttu-id="d20c7-145">Les valeurs d'énumération <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> et <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> spécifient une autorisation appropriée pour utiliser le stockage isolé lorsqu'il s'agit d'un utilisateur itinérant.</span><span class="sxs-lookup"><span data-stu-id="d20c7-145">The enumeration values <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> and <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> specify a permission to use isolated storage for a roaming user.</span></span>

<a name="secure_access"></a>

## <a name="secure-access"></a><span data-ttu-id="d20c7-146">Accès sécurisé</span><span class="sxs-lookup"><span data-stu-id="d20c7-146">Secure Access</span></span>

<span data-ttu-id="d20c7-147">Le stockage isolé permet aux applications qui ne disposent pas d'un niveau de confiance suffisant de stocker des données d'une façon contrôlée par la stratégie de sécurité de l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-147">Using isolated storage enables partially trusted applications to store data in a manner that is controlled by the computer's security policy.</span></span> <span data-ttu-id="d20c7-148">Ceci est particulièrement utile pour les composants téléchargés qu'un utilisateur doit exécuter avec précaution.</span><span class="sxs-lookup"><span data-stu-id="d20c7-148">This is especially useful for downloaded components that a user might want to run cautiously.</span></span> <span data-ttu-id="d20c7-149">La stratégie de sécurité accorde rarement ce genre d'autorisation de code lorsque vous accédez au système de fichiers en utilisant des mécanismes d'E/S standard.</span><span class="sxs-lookup"><span data-stu-id="d20c7-149">Security policy rarely grants this kind of code permission when you access the file system by using standard I/O mechanisms.</span></span> <span data-ttu-id="d20c7-150">Toutefois, l'autorisation d'utiliser le stockage isolé est accordée par défaut au code s'exécutant à partir de l'ordinateur local, d'un réseau local ou d'Internet.</span><span class="sxs-lookup"><span data-stu-id="d20c7-150">However, by default, code running from the local computer, a local network, or the Internet is granted the right to use isolated storage.</span></span>

<span data-ttu-id="d20c7-151">Les administrateurs peuvent limiter la quantité de stockage isolé disponible pour un utilisateur ou une application, en fonction d'un niveau de confiance approprié.</span><span class="sxs-lookup"><span data-stu-id="d20c7-151">Administrators can limit how much isolated storage an application or a user has available, based on an appropriate trust level.</span></span> <span data-ttu-id="d20c7-152">En outre, les administrateurs peuvent supprimer toutes les données rendues persistantes d'un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-152">In addition, administrators can remove a user's persisted data completely.</span></span> <span data-ttu-id="d20c7-153">Pour créer le stockage isolé ou y accéder, l'autorisation <xref:System.Security.Permissions.IsolatedStorageFilePermission> appropriée doit être accordée au code.</span><span class="sxs-lookup"><span data-stu-id="d20c7-153">To create or access isolated storage, code must be granted the appropriate <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission.</span></span>

<span data-ttu-id="d20c7-154">Pour accéder au stockage isolé, le code doit posséder tous les droits de système d'exploitation de la plateforme native.</span><span class="sxs-lookup"><span data-stu-id="d20c7-154">To access isolated storage, code must have all necessary native platform operating system rights.</span></span> <span data-ttu-id="d20c7-155">Les listes de contrôle d'accès (ACL) qui contrôlent les utilisateurs autorisés à utiliser le système de fichiers doivent être respectées.</span><span class="sxs-lookup"><span data-stu-id="d20c7-155">The access control lists (ACLs) that control which users have the rights to use the file system must be satisfied.</span></span> <span data-ttu-id="d20c7-156">Les applications .NET Framework possèdent déjà des droits de système d'exploitation pour accéder au stockage isolé, sauf si elles effectuent un emprunt d'identité (spécifique à la plateforme).</span><span class="sxs-lookup"><span data-stu-id="d20c7-156">.NET Framework applications already have operating system rights to access isolated storage unless they perform (platform-specific) impersonation.</span></span> <span data-ttu-id="d20c7-157">Dans ce cas, l'application doit garantir que l'identité de l'utilisateur empruntée possède les droits de système d'exploitation appropriés pour accéder au stockage isolé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-157">In this case, the application is responsible for ensuring that the impersonated user identity has the proper operating system rights to access isolated storage.</span></span> <span data-ttu-id="d20c7-158">Cet accès permet au code exécuté ou téléchargé à partir du Web de lire et d'écrire facilement dans une zone de stockage liée à un utilisateur particulier.</span><span class="sxs-lookup"><span data-stu-id="d20c7-158">This access provides a convenient way for code that is run or downloaded from the web to read and write to a storage area related to a particular user.</span></span>

<span data-ttu-id="d20c7-159">Pour contrôler l'accès au stockage isolé, le Common Language Runtime utilise des objets <xref:System.Security.Permissions.IsolatedStorageFilePermission> .</span><span class="sxs-lookup"><span data-stu-id="d20c7-159">To control access to isolated storage, the common language runtime uses <xref:System.Security.Permissions.IsolatedStorageFilePermission> objects.</span></span> <span data-ttu-id="d20c7-160">Chaque objet possède des propriétés qui spécifient les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="d20c7-160">Each object has properties that specify the following values:</span></span>

- <span data-ttu-id="d20c7-161">Utilisation autorisée, qui indique le type d'accès autorisé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-161">Allowed usage, which indicates the type of access that is allowed.</span></span> <span data-ttu-id="d20c7-162">Les valeurs sont des membres de l'énumération <xref:System.Security.Permissions.IsolatedStorageContainment> .</span><span class="sxs-lookup"><span data-stu-id="d20c7-162">The values are members of the <xref:System.Security.Permissions.IsolatedStorageContainment> enumeration.</span></span> <span data-ttu-id="d20c7-163">Pour plus d'informations sur ces valeurs, consultez le tableau de la section suivante.</span><span class="sxs-lookup"><span data-stu-id="d20c7-163">For more information about these values, see the table in the next section.</span></span>

- <span data-ttu-id="d20c7-164">Quota de stockage, comme décrit dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="d20c7-164">Storage quota, as discussed in the preceding section.</span></span>

<span data-ttu-id="d20c7-165">Le runtime exige l'autorisation <xref:System.Security.Permissions.IsolatedStorageFilePermission> lors de la première tentative d'ouverture d'un magasin par le code.</span><span class="sxs-lookup"><span data-stu-id="d20c7-165">The runtime demands <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission when code first attempts to open a store.</span></span> <span data-ttu-id="d20c7-166">Il détermine s’il doit ou non accorder cette autorisation, en fonction du niveau de fiabilité du code.</span><span class="sxs-lookup"><span data-stu-id="d20c7-166">It decides whether to grant this permission, based on how much the code is trusted.</span></span> <span data-ttu-id="d20c7-167">Si l'autorisation est accordée, l'utilisation autorisée et les valeurs de quota de stockage sont déterminées par la stratégie de sécurité et par la demande du code de l'autorisation <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span><span class="sxs-lookup"><span data-stu-id="d20c7-167">If the permission is granted, the allowed usage and storage quota values are determined by security policy and by the code's request for <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span> <span data-ttu-id="d20c7-168">La configuration de la stratégie de sécurité est définie à l'aide de l'outil .NET Framework Configuration Tool (Mscorcfg.msc).</span><span class="sxs-lookup"><span data-stu-id="d20c7-168">Security policy is set by using the .NET Framework Configuration Tool (Mscorcfg.msc).</span></span> <span data-ttu-id="d20c7-169">Tous les appelants de la pile des appels sont vérifiés pour garantir que chaque appelant possède au moins l'utilisation autorisée appropriée.</span><span class="sxs-lookup"><span data-stu-id="d20c7-169">All callers in the call stack are checked to ensure that each caller has at least the appropriate allowed usage.</span></span> <span data-ttu-id="d20c7-170">Le runtime vérifie également le quota imposé au code qui a ouvert ou créé le magasin dans lequel le fichier doit être enregistré.</span><span class="sxs-lookup"><span data-stu-id="d20c7-170">The runtime also checks the quota imposed on the code that opened or created the store in which the file is to be saved.</span></span> <span data-ttu-id="d20c7-171">Si ces conditions sont remplies, l'autorisation est accordée.</span><span class="sxs-lookup"><span data-stu-id="d20c7-171">If these conditions are satisfied, permission is granted.</span></span> <span data-ttu-id="d20c7-172">Le quota est revérifié à chaque fois qu'un fichier est écrit dans le magasin.</span><span class="sxs-lookup"><span data-stu-id="d20c7-172">The quota is checked again every time a file is written to the store.</span></span>

<span data-ttu-id="d20c7-173">Le code d'application n'est pas nécessaire pour demander l'autorisation, car le Common Language Runtime accorde l'autorisation <xref:System.Security.Permissions.IsolatedStorageFilePermission> appropriée selon la stratégie de sécurité.</span><span class="sxs-lookup"><span data-stu-id="d20c7-173">Application code is not required to request permission because the common language runtime will grant whatever <xref:System.Security.Permissions.IsolatedStorageFilePermission> is appropriate based on security policy.</span></span> <span data-ttu-id="d20c7-174">Toutefois, il existe de bonnes raisons de demander des autorisations spécifiques nécessaires à votre application, notamment l'autorisation <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span><span class="sxs-lookup"><span data-stu-id="d20c7-174">However, there are good reasons to request specific permissions that your application needs, including <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span>

<a name="allowed_usage"></a>

## <a name="allowed-usage-and-security-risks"></a><span data-ttu-id="d20c7-175">Utilisation autorisée et risques pour la sécurité</span><span class="sxs-lookup"><span data-stu-id="d20c7-175">Allowed Usage and Security Risks</span></span>

<span data-ttu-id="d20c7-176">L'utilisation autorisée spécifiée par l'autorisation <xref:System.Security.Permissions.IsolatedStorageFilePermission> détermine le degré d'autorisation du code pour créer et utiliser le stockage isolé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-176">The allowed usage specified by <xref:System.Security.Permissions.IsolatedStorageFilePermission> determines the degree to which code will be allowed to create and use isolated storage.</span></span> <span data-ttu-id="d20c7-177">Le tableau suivant illustre la correspondance entre l'utilisation autorisée spécifiée dans l'autorisation et les types d'isolation. En outre, il résume les problèmes de sécurité associés à chaque utilisation autorisée.</span><span class="sxs-lookup"><span data-stu-id="d20c7-177">The following table shows how the allowed usage specified in the permission corresponds to types of isolation and summarizes the security risks associated with each allowed usage.</span></span>

|<span data-ttu-id="d20c7-178">Utilisation autorisée</span><span class="sxs-lookup"><span data-stu-id="d20c7-178">Allowed usage</span></span>|<span data-ttu-id="d20c7-179">Types d'isolation</span><span class="sxs-lookup"><span data-stu-id="d20c7-179">Isolation types</span></span>|<span data-ttu-id="d20c7-180">Impact sur la sécurité</span><span class="sxs-lookup"><span data-stu-id="d20c7-180">Security impact</span></span>|
|-------------------|---------------------|---------------------|
|<xref:System.Security.Permissions.IsolatedStorageContainment.None>|<span data-ttu-id="d20c7-181">Aucune utilisation de stockage isolé n'est autorisée.</span><span class="sxs-lookup"><span data-stu-id="d20c7-181">No isolated storage use is allowed.</span></span>|<span data-ttu-id="d20c7-182">Aucun impact sur la sécurité.</span><span class="sxs-lookup"><span data-stu-id="d20c7-182">There is no security impact.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByUser>|<span data-ttu-id="d20c7-183">Isolation par utilisateur, par domaine et par assembly.</span><span class="sxs-lookup"><span data-stu-id="d20c7-183">Isolation by user, domain, and assembly.</span></span> <span data-ttu-id="d20c7-184">Chaque assembly possède un sous-magasin distinct dans le domaine.</span><span class="sxs-lookup"><span data-stu-id="d20c7-184">Each assembly has a separate substore within the domain.</span></span> <span data-ttu-id="d20c7-185">Les magasins utilisant cette autorisation sont également implicitement isolés par l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-185">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="d20c7-186">Ce niveau d'autorisation laisse les ressources ouvertes à une surutilisation non autorisée, même si les quotas appliqués rendent cette surutilisation plus difficile.</span><span class="sxs-lookup"><span data-stu-id="d20c7-186">This permission level leaves resources open to unauthorized overuse, although enforced quotas make it more difficult.</span></span> <span data-ttu-id="d20c7-187">C'est une attaque de refus de service.</span><span class="sxs-lookup"><span data-stu-id="d20c7-187">This is called a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser>|<span data-ttu-id="d20c7-188">Identique à `DomainIsolationByUser`, mais le magasin est enregistré à un emplacement itinérant si les profils utilisateurs itinérants sont activés et si les quotas ne sont pas appliqués.</span><span class="sxs-lookup"><span data-stu-id="d20c7-188">Same as `DomainIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="d20c7-189">Dans la mesure où les quotas doivent être désactivés, les ressources de stockage sont plus vulnérables à une attaque de refus de service.</span><span class="sxs-lookup"><span data-stu-id="d20c7-189">Because quotas must be disabled, storage resources are more vulnerable to a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByUser>|<span data-ttu-id="d20c7-190">Isolation par utilisateur et par assembly.</span><span class="sxs-lookup"><span data-stu-id="d20c7-190">Isolation by user and assembly.</span></span> <span data-ttu-id="d20c7-191">Les magasins utilisant cette autorisation sont également implicitement isolés par l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-191">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="d20c7-192">Les quotas sont appliqués à ce niveau pour empêcher une attaque de refus de service.</span><span class="sxs-lookup"><span data-stu-id="d20c7-192">Quotas are enforced at this level to help prevent a denial of service attack.</span></span> <span data-ttu-id="d20c7-193">Un assembly identique d'un autre domaine peut accéder à ce magasin, ce qui permet la divulgation d'informations entre des applications.</span><span class="sxs-lookup"><span data-stu-id="d20c7-193">The same assembly in another domain can access this store, opening the possibility that information could be leaked between applications.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser>|<span data-ttu-id="d20c7-194">Identique à `AssemblyIsolationByUser`, mais le magasin est enregistré à un emplacement itinérant si les profils utilisateurs itinérants sont activés et si les quotas ne sont pas appliqués.</span><span class="sxs-lookup"><span data-stu-id="d20c7-194">Same as `AssemblyIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="d20c7-195">Identique à `AssemblyIsolationByUser`, mais le risque d'attaque par déni de service augmente sans les quotas.</span><span class="sxs-lookup"><span data-stu-id="d20c7-195">Same as in `AssemblyIsolationByUser`, but without quotas, the risk of a denial of service attack increases.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AdministerIsolatedStorageByUser>|<span data-ttu-id="d20c7-196">Isolation par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-196">Isolation by user.</span></span> <span data-ttu-id="d20c7-197">Généralement, seuls les outils d'administration ou de débogage utilisent ce niveau d'autorisation.</span><span class="sxs-lookup"><span data-stu-id="d20c7-197">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="d20c7-198">L'accès avec cette autorisation permet au code d'afficher ou de supprimer un fichier de stockage isolé d'un utilisateur ou des répertoires (sans tenir compte de l'isolation d'assembly).</span><span class="sxs-lookup"><span data-stu-id="d20c7-198">Access with this permission allows code to view or delete any of a user's isolated storage files or directories (regardless of assembly isolation).</span></span> <span data-ttu-id="d20c7-199">Les risques comprennent notamment une divulgation d'informations et une perte de données.</span><span class="sxs-lookup"><span data-stu-id="d20c7-199">Risks include, but are not limited to, leaking information and data loss.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.UnrestrictedIsolatedStorage>|<span data-ttu-id="d20c7-200">Isolation par tous les utilisateurs, domaines et assemblys.</span><span class="sxs-lookup"><span data-stu-id="d20c7-200">Isolation by all users, domains, and assemblies.</span></span> <span data-ttu-id="d20c7-201">Généralement, seuls les outils d'administration ou de débogage utilisent ce niveau d'autorisation.</span><span class="sxs-lookup"><span data-stu-id="d20c7-201">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="d20c7-202">Cette autorisation permet un compromis total de tous les magasins isolés pour tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="d20c7-202">This permission creates the potential for a total compromise of all isolated stores for all users.</span></span>|

## <a name="safety-of-isolated-storage-components-with-regard-to-untrusted-data"></a><span data-ttu-id="d20c7-203">Sécurité des composants de stockage isolé en ce qui concerne les données non approuvées</span><span class="sxs-lookup"><span data-stu-id="d20c7-203">Safety of isolated storage components with regard to untrusted data</span></span>

<span data-ttu-id="d20c7-204">__Cette section s’applique aux frameworks suivants :__</span><span class="sxs-lookup"><span data-stu-id="d20c7-204">__This section applies to the following frameworks:__</span></span>

- <span data-ttu-id="d20c7-205">.NET Framework (toutes les versions)</span><span class="sxs-lookup"><span data-stu-id="d20c7-205">.NET Framework (all versions)</span></span>
- <span data-ttu-id="d20c7-206">.NET Core 2.1 +</span><span class="sxs-lookup"><span data-stu-id="d20c7-206">.NET Core 2.1+</span></span>
- <span data-ttu-id="d20c7-207">.NET 5.0 +</span><span class="sxs-lookup"><span data-stu-id="d20c7-207">.NET 5.0+</span></span>

<span data-ttu-id="d20c7-208">Le .NET Framework et .NET Core offrent un [stockage isolé](/dotnet/standard/io/isolated-storage) comme un mécanisme permettant de conserver les données d’un utilisateur, d’une application ou d’un composant.</span><span class="sxs-lookup"><span data-stu-id="d20c7-208">The .NET Framework and .NET Core offer [isolated storage](/dotnet/standard/io/isolated-storage) as a mechanism to persist data for a user, an application, or a component.</span></span> <span data-ttu-id="d20c7-209">Il s’agit d’un composant hérité principalement conçu pour les scénarios de sécurité d’accès du code dépréciés.</span><span class="sxs-lookup"><span data-stu-id="d20c7-209">This is a legacy component primarily designed for now-deprecated Code Access Security scenarios.</span></span>

<span data-ttu-id="d20c7-210">Diverses API et outils de stockage isolé peuvent être utilisés pour lire les données au-delà des limites d’approbation.</span><span class="sxs-lookup"><span data-stu-id="d20c7-210">Various isolated storage APIs and tools can be used to read data across trust boundaries.</span></span> <span data-ttu-id="d20c7-211">Par exemple, la lecture de données à partir d’une étendue à l’échelle de l’ordinateur peut agréger des données à partir d’autres comptes d’utilisateurs, éventuellement moins fiables, sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-211">For example, reading data from a machine-wide scope can aggregate data from other, possibly less-trusted user accounts on the machine.</span></span> <span data-ttu-id="d20c7-212">Les composants ou les applications qui lisent à partir des étendues de stockage isolé à l’échelle de l’ordinateur doivent être conscients des conséquences de la lecture de ces données.</span><span class="sxs-lookup"><span data-stu-id="d20c7-212">Components or applications which read from machine-wide isolated storage scopes should be aware of the consequences of reading this data.</span></span>

### <a name="security-sensitive-apis-which-can-read-from-the-machine-wide-scope"></a><span data-ttu-id="d20c7-213">API sensibles à la sécurité qui peuvent lire à partir de l’étendue à l’échelle de l’ordinateur</span><span class="sxs-lookup"><span data-stu-id="d20c7-213">Security-sensitive APIs which can read from the machine-wide scope</span></span>

<span data-ttu-id="d20c7-214">Les composants ou les applications qui appellent les API suivantes lisent à partir de l’étendue à l’échelle de l’ordinateur :</span><span class="sxs-lookup"><span data-stu-id="d20c7-214">Components or applications that call any of the following APIs read from the machine-wide scope:</span></span>

* <span data-ttu-id="d20c7-215">[IsolatedStorageFile. GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator), en passant une étendue qui comprend l’indicateur IsolatedStorageScope. machine</span><span class="sxs-lookup"><span data-stu-id="d20c7-215">[IsolatedStorageFile.GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* [<span data-ttu-id="d20c7-216">IsolatedStorageFile. GetMachineStoreForApplication</span><span class="sxs-lookup"><span data-stu-id="d20c7-216">IsolatedStorageFile.GetMachineStoreForApplication</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforapplication)
* [<span data-ttu-id="d20c7-217">IsolatedStorageFile. GetMachineStoreForAssembly</span><span class="sxs-lookup"><span data-stu-id="d20c7-217">IsolatedStorageFile.GetMachineStoreForAssembly</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforassembly)
* [<span data-ttu-id="d20c7-218">IsolatedStorageFile. GetMachineStoreForDomain</span><span class="sxs-lookup"><span data-stu-id="d20c7-218">IsolatedStorageFile.GetMachineStoreForDomain</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestorefordomain)
* <span data-ttu-id="d20c7-219">[IsolatedStorageFile. GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore), passant une portée qui comprend l’indicateur IsolatedStorageScope. machine</span><span class="sxs-lookup"><span data-stu-id="d20c7-219">[IsolatedStorageFile.GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* <span data-ttu-id="d20c7-220">[IsolatedStorageFile. Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove), passage d’une étendue incluant l' `IsolatedStorageScope.Machine` indicateur</span><span class="sxs-lookup"><span data-stu-id="d20c7-220">[IsolatedStorageFile.Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove), passing a scope that includes the `IsolatedStorageScope.Machine` flag</span></span>

<span data-ttu-id="d20c7-221">L' [outil de stockage isolé](/dotnet/framework/tools/storeadm-exe-isolated-storage-tool) `storeadm.exe` est affecté s’il est appelé avec le `/machine` commutateur, comme illustré dans le code suivant :</span><span class="sxs-lookup"><span data-stu-id="d20c7-221">The [isolated storage tool](/dotnet/framework/tools/storeadm-exe-isolated-storage-tool) `storeadm.exe` is impacted if called with the `/machine` switch, as shown in the following code:</span></span>

```txt
storeadm.exe /machine [any-other-switches]
```

<span data-ttu-id="d20c7-222">L’outil Isolated Storage est fourni avec Visual Studio et le kit de développement logiciel (SDK) .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d20c7-222">The isolated storage tool is provided as part of Visual Studio and the .NET Framework SDK.</span></span>

<span data-ttu-id="d20c7-223">Si l’application n’implique pas d’appels aux API précédentes, ou si le flux de travail n’implique pas `storeadm.exe` d’appel de cette manière, ce document n’est pas applicable.</span><span class="sxs-lookup"><span data-stu-id="d20c7-223">If the application doesn't involve calls to the preceding APIs, or if the workflow doesn't involve calling `storeadm.exe` in this manner, this document doesn't apply.</span></span>

### <a name="impact-in-multi-user-environments"></a><span data-ttu-id="d20c7-224">Impact dans les environnements multi-utilisateurs</span><span class="sxs-lookup"><span data-stu-id="d20c7-224">Impact in multi-user environments</span></span>

<span data-ttu-id="d20c7-225">Comme mentionné précédemment, l’impact sur la sécurité de ces API résulte de la lecture des données écrites à partir d’un environnement de confiance dans un environnement de confiance différent.</span><span class="sxs-lookup"><span data-stu-id="d20c7-225">As mentioned previously, the security impact from these APIs results from data written from one trust environment is read from a different trust environment.</span></span> <span data-ttu-id="d20c7-226">Le stockage isolé utilise généralement l’un des trois emplacements suivants pour lire et écrire des données :</span><span class="sxs-lookup"><span data-stu-id="d20c7-226">Isolated storage generally uses one of three locations to read and write data:</span></span>

1. <span data-ttu-id="d20c7-227">`%LOCALAPPDATA%\IsolatedStorage\`: Par exemple, `C:\Users\<username>\AppData\Local\IsolatedStorage\` pour l' `User` étendue.</span><span class="sxs-lookup"><span data-stu-id="d20c7-227">`%LOCALAPPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Local\IsolatedStorage\`, for `User` scope.</span></span>
2. <span data-ttu-id="d20c7-228">`%APPDATA%\IsolatedStorage\`: Par exemple, `C:\Users\<username>\AppData\Roaming\IsolatedStorage\` pour l' `User|Roaming` étendue.</span><span class="sxs-lookup"><span data-stu-id="d20c7-228">`%APPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Roaming\IsolatedStorage\`, for `User|Roaming` scope.</span></span>
3. <span data-ttu-id="d20c7-229">`%PROGRAMDATA%\IsolatedStorage\`: Par exemple, `C:\ProgramData\IsolatedStorage\` pour l' `Machine` étendue.</span><span class="sxs-lookup"><span data-stu-id="d20c7-229">`%PROGRAMDATA%\IsolatedStorage\`: For example, `C:\ProgramData\IsolatedStorage\`, for `Machine` scope.</span></span>

<span data-ttu-id="d20c7-230">Les deux premiers emplacements sont isolés par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-230">The first two locations are isolated per-user.</span></span> <span data-ttu-id="d20c7-231">Windows garantit que différents comptes d’utilisateur sur le même ordinateur ne peuvent pas accéder aux dossiers de profil utilisateur de l’autre.</span><span class="sxs-lookup"><span data-stu-id="d20c7-231">Windows ensures that different user accounts on the same machine cannot access each other's user profile folders.</span></span> <span data-ttu-id="d20c7-232">Deux comptes d’utilisateur différents qui utilisent `User` les `User|Roaming` magasins ou ne voient pas les données de l’autre et ne peuvent pas interférer avec les données de l’autre.</span><span class="sxs-lookup"><span data-stu-id="d20c7-232">Two different user accounts who use the `User` or `User|Roaming` stores will not see each other's data and cannot interfere with each other's data.</span></span>

<span data-ttu-id="d20c7-233">Le troisième emplacement est partagé entre tous les comptes d’utilisateur sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-233">The third location is shared across all user accounts on the machine.</span></span> <span data-ttu-id="d20c7-234">Différents comptes peuvent lire et écrire à cet emplacement, et ils peuvent voir les données de chacun.</span><span class="sxs-lookup"><span data-stu-id="d20c7-234">Different accounts can read from and write to this location, and they're able to see each other's data.</span></span>

<span data-ttu-id="d20c7-235">Les chemins d’accès précédents peuvent différer selon la version de Windows utilisée.</span><span class="sxs-lookup"><span data-stu-id="d20c7-235">The preceding paths may differ based on the version of Windows in use.</span></span>

<span data-ttu-id="d20c7-236">Considérons maintenant un système multi-utilisateur avec deux utilisateurs inscrits _Mallory_ et _Bob_.</span><span class="sxs-lookup"><span data-stu-id="d20c7-236">Now consider a multi-user system with two registered users _Mallory_ and _Bob_.</span></span> <span data-ttu-id="d20c7-237">Mallory a la possibilité d’accéder à son répertoire de profil utilisateur `C:\Users\Mallory\` et peut accéder à l’emplacement de stockage partagé à l’ensemble de l’ordinateur `C:\ProgramData\IsolatedStorage\` .</span><span class="sxs-lookup"><span data-stu-id="d20c7-237">Mallory has the ability to access her user profile directory `C:\Users\Mallory\`, and she can access the shared machine-wide storage location `C:\ProgramData\IsolatedStorage\`.</span></span> <span data-ttu-id="d20c7-238">Elle ne peut pas accéder au répertoire du profil utilisateur de Bob `C:\Users\Bob\` .</span><span class="sxs-lookup"><span data-stu-id="d20c7-238">She cannot access Bob's user profile directory `C:\Users\Bob\`.</span></span>

<span data-ttu-id="d20c7-239">Si Mallory souhaite attaquer Bob, il peut écrire des données dans l’emplacement de stockage à l’intérieur de l’ordinateur, puis tenter d’influencer Bob dans la lecture à partir du magasin à l’intérieur de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-239">If Mallory wishes to attack Bob, she might write data to the machine-wide storage location, then attempt to influence Bob into reading from the machine-wide store.</span></span> <span data-ttu-id="d20c7-240">Quand Bob exécute une application qui lit à partir de ce magasin, cette application fonctionnera sur les données que Mallory y a placées, mais à partir du contexte du compte d’utilisateur de Bob.</span><span class="sxs-lookup"><span data-stu-id="d20c7-240">When Bob runs an app that reads from this store, that app will operate on the data Mallory placed there, but from within the context of Bob's user account.</span></span> <span data-ttu-id="d20c7-241">Le reste de ce document présente différents vecteurs d’attaque et les étapes que les applications peuvent effectuer pour réduire les risques liés à ces attaques.</span><span class="sxs-lookup"><span data-stu-id="d20c7-241">The remainder of this document contemplates various attack vectors and what steps apps can do to minimize their risk to these attacks.</span></span>

<span data-ttu-id="d20c7-242">__Remarque :__ Pour qu’une telle attaque ait lieu, Mallory requiert :</span><span class="sxs-lookup"><span data-stu-id="d20c7-242">__Note:__ In order for such an attack to take place, Mallory requires:</span></span>

* <span data-ttu-id="d20c7-243">Un compte d’utilisateur sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-243">A user account on the machine.</span></span>
* <span data-ttu-id="d20c7-244">Capacité de placer un fichier dans un emplacement connu sur le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="d20c7-244">The ability to place a file into a known location on the file system.</span></span>
* <span data-ttu-id="d20c7-245">Savoir que Bob va à un moment donné exécuter une application qui tente de lire ces données.</span><span class="sxs-lookup"><span data-stu-id="d20c7-245">Knowledge that Bob will at some point run an app which attempts to read this data.</span></span>

<span data-ttu-id="d20c7-246">Il ne s’agit pas de vecteurs de menace qui s’appliquent aux environnements de bureau à utilisateur unique standard, tels que les ordinateurs personnels ou les stations de travail d’entreprise à un seul employé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-246">These are not threat vectors which apply to standard single-user desktop environments like home PCs or single-employee enterprise workstations.</span></span>

#### <a name="elevation-of-privilege"></a><span data-ttu-id="d20c7-247">Élévation de privilège</span><span class="sxs-lookup"><span data-stu-id="d20c7-247">Elevation of privilege</span></span>

<span data-ttu-id="d20c7-248">Une attaque par __élévation de privilèges__ se produit lorsque l’application de Bob lit le fichier de Mallory et tente automatiquement d’entreprendre une action en fonction du contenu de cette charge utile.</span><span class="sxs-lookup"><span data-stu-id="d20c7-248">An __elevation of privilege__ attack occurs when Bob's app reads Mallory's file and automatically tries to take some action based on the contents of that payload.</span></span> <span data-ttu-id="d20c7-249">Prenons l’exemple d’une application qui lit le contenu d’un script de démarrage à partir du magasin de l’ordinateur et transmet ce contenu à `Process.Start` .</span><span class="sxs-lookup"><span data-stu-id="d20c7-249">Consider an app that reads the contents of a startup script from the machine-wide store and passes those contents to `Process.Start`.</span></span> <span data-ttu-id="d20c7-250">Si Mallory peut placer un script malveillant à l’intérieur du magasin de l’ordinateur, quand Bob lance son application :</span><span class="sxs-lookup"><span data-stu-id="d20c7-250">If Mallory can place a malicious script inside the machine-wide store, when Bob launches his app:</span></span>

* <span data-ttu-id="d20c7-251">Son application analyse et lance le script malveillant de Mallory _dans le contexte du profil utilisateur de Bob_.</span><span class="sxs-lookup"><span data-stu-id="d20c7-251">His app parses and launches Mallory's malicious script _under the context of Bob's user profile_.</span></span>
* <span data-ttu-id="d20c7-252">Mallory accède au compte de Bob sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="d20c7-252">Mallory gaines access to Bob's account on the local machine.</span></span>

#### <a name="denial-of-service"></a><span data-ttu-id="d20c7-253">Déni de service</span><span class="sxs-lookup"><span data-stu-id="d20c7-253">Denial of service</span></span>

<span data-ttu-id="d20c7-254">Une attaque par __déni de service__ se produit lorsque l’application de Bob lit le fichier et les blocages de Mallory, ou s’arrête de fonctionner correctement.</span><span class="sxs-lookup"><span data-stu-id="d20c7-254">A __denial of service__ attack occurs when Bob's app reads Mallory's file and crashes or otherwise stops functioning correctly.</span></span> <span data-ttu-id="d20c7-255">Reprenons l’application mentionnée précédemment, qui tente d’analyser un script de démarrage à partir du magasin de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-255">Consider again the app mentioned previously, which attempts to parse a startup script from the machine-wide store.</span></span> <span data-ttu-id="d20c7-256">Si Mallory peut placer un fichier dont le contenu est incorrect dans le magasin de l’ordinateur, il peut :</span><span class="sxs-lookup"><span data-stu-id="d20c7-256">If Mallory can place a file with malformed contents inside the machine-wide store, she might:</span></span>

* <span data-ttu-id="d20c7-257">Oblige l’application de Bob à lever une exception tôt dans le chemin de démarrage.</span><span class="sxs-lookup"><span data-stu-id="d20c7-257">Cause Bob's app to throw an exception early in the startup path.</span></span>
* <span data-ttu-id="d20c7-258">Empêcher le lancement de l’application en raison de l’exception.</span><span class="sxs-lookup"><span data-stu-id="d20c7-258">Prevent the app from launching successfully because of the exception.</span></span>

<span data-ttu-id="d20c7-259">Elle a ensuite refusé à Bob la possibilité de lancer l’application sous son propre compte d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-259">She has then denied Bob the ability to launch the app under his own user account.</span></span>

#### <a name="information-disclosure"></a><span data-ttu-id="d20c7-260">Divulgation d’informations</span><span class="sxs-lookup"><span data-stu-id="d20c7-260">Information disclosure</span></span>

<span data-ttu-id="d20c7-261">Une attaque de __Divulgation d’informations__ se produit lorsque Mallory peut inciter Bob à divulguer le contenu d’un fichier auquel Mallory n’a normalement pas accès.</span><span class="sxs-lookup"><span data-stu-id="d20c7-261">An __information disclosure__ attack occurs when Mallory can trick Bob into disclosing the contents of a file that Mallory does not normally have access to.</span></span> <span data-ttu-id="d20c7-262">Supposons que Bob a un fichier de secret *C:\Users\Bob\secret.txt* que Mallory souhaite lire.</span><span class="sxs-lookup"><span data-stu-id="d20c7-262">Consider that Bob has a secret file *C:\Users\Bob\secret.txt* that Mallory wants to read.</span></span> <span data-ttu-id="d20c7-263">Elle connaît le chemin d’accès à ce fichier, mais elle ne peut pas la lire, car Windows lui interdit d’accéder au répertoire du profil utilisateur de Bob.</span><span class="sxs-lookup"><span data-stu-id="d20c7-263">She knows the path to this file, but she cannot read it because Windows forbids her from gaining access to Bob's user profile directory.</span></span>

<span data-ttu-id="d20c7-264">Au lieu de cela, Mallory place un lien physique dans le magasin à l’intérieur de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-264">Instead, Mallory places a hard link into the machine-wide store.</span></span> <span data-ttu-id="d20c7-265">Il s’agit d’un type spécial de fichier qui ne contient pas de contenu, mais il pointe vers un autre fichier sur le disque.</span><span class="sxs-lookup"><span data-stu-id="d20c7-265">This is a special kind of file that itself does not contain any contents, rather, it points to another file on disk.</span></span> <span data-ttu-id="d20c7-266">La tentative de lecture du fichier de liaison physique aura pour effet de lire le contenu du fichier ciblé par le lien.</span><span class="sxs-lookup"><span data-stu-id="d20c7-266">Attempting to read the hard link file will instead read the contents of the file targeted by the link.</span></span> <span data-ttu-id="d20c7-267">Une fois le lien physique créé, Mallory ne peut toujours pas lire le contenu du fichier, car il n’a pas accès à la cible ( `C:\Users\Bob\secret.txt` ) du lien.</span><span class="sxs-lookup"><span data-stu-id="d20c7-267">After creating the hard link, Mallory still cannot read the file contents because she does not have access to the target (`C:\Users\Bob\secret.txt`) of the link.</span></span> <span data-ttu-id="d20c7-268">Toutefois _, Bob a_ accès à ce fichier.</span><span class="sxs-lookup"><span data-stu-id="d20c7-268">However, Bob _does_ have access to this file.</span></span>

<span data-ttu-id="d20c7-269">Lorsque l’application de Bob lit à partir du magasin de l’ordinateur, elle lit par inadvertance le contenu de son fichier, de la même `secret.txt` façon que si le fichier lui-même était présent dans le magasin de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-269">When Bob's app reads from the machine-wide store, it now inadvertently reads the contents of his `secret.txt` file, just as if the file itself had been present in the machine-wide store.</span></span> <span data-ttu-id="d20c7-270">Lorsque l’application de Bob s’arrête, si elle tente de réenregistrer le fichier dans le magasin de l’ordinateur, elle finit par placer une copie réelle du fichier dans le répertoire \* C:\ProgramData\IsolatedStorage \* .</span><span class="sxs-lookup"><span data-stu-id="d20c7-270">When Bob's app exits, if it attempts to resave the file to the machine-wide store, it will end up placing an actual copy of the file in the \*C:\ProgramData\IsolatedStorage\* directory.</span></span> <span data-ttu-id="d20c7-271">Étant donné que ce répertoire est lisible par n’importe quel utilisateur sur l’ordinateur, Mallory peut maintenant lire le contenu du fichier.</span><span class="sxs-lookup"><span data-stu-id="d20c7-271">Since this directory is readable by any user on the machine, Mallory can now read the contents of the file.</span></span>

### <a name="best-practices-to-defend-against-these-attacks"></a><span data-ttu-id="d20c7-272">Meilleures pratiques pour la protection contre ces attaques</span><span class="sxs-lookup"><span data-stu-id="d20c7-272">Best practices to defend against these attacks</span></span>

<span data-ttu-id="d20c7-273">__Important :__ Si votre environnement a plusieurs utilisateurs mutuellement non approuvés, __n’appelez pas__ l’API `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` ou appelez l’outil `storeadm.exe /machine /list` .</span><span class="sxs-lookup"><span data-stu-id="d20c7-273">__Important:__ If your environment has multiple mutually untrusted users, __do not__ call the API `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` or invoke the tool `storeadm.exe /machine /list`.</span></span> <span data-ttu-id="d20c7-274">Les deux partent du principe qu’ils fonctionnent avec des données approuvées.</span><span class="sxs-lookup"><span data-stu-id="d20c7-274">Both of these assume that they're operating on trusted data.</span></span> <span data-ttu-id="d20c7-275">Si une personne malveillante peut amorcer une charge malveillante dans le magasin de l’ordinateur, cette charge utile peut mener à une attaque par élévation de privilège dans le contexte de l’utilisateur qui exécute ces commandes.</span><span class="sxs-lookup"><span data-stu-id="d20c7-275">If an attacker can seed a malicious payload in the machine-wide store, that payload can lead to an elevation of privilege attack under the context of the user who runs these commands.</span></span>

<span data-ttu-id="d20c7-276">En cas de fonctionnement dans un environnement multi-utilisateur, reconsidérez l’utilisation des fonctionnalités de stockage isolé qui ciblent la portée de l' _ordinateur_ .</span><span class="sxs-lookup"><span data-stu-id="d20c7-276">If operating in a multi-user environment, reconsider use of isolated storage features which target the _Machine_ scope.</span></span> <span data-ttu-id="d20c7-277">Si une application doit lire les données à partir d’un emplacement au niveau de l’ordinateur, préférez lire les données à partir d’un emplacement accessible en écriture uniquement par les comptes d’administrateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-277">If an app must read data from a machine-wide location, prefer to read the data from a location that are writable only by admin accounts.</span></span> <span data-ttu-id="d20c7-278">Le `%PROGRAMFILES%` répertoire et la `HKLM` ruche de Registre sont des exemples d’emplacements accessibles en écriture par les administrateurs et accessibles en lecture par tout le monde.</span><span class="sxs-lookup"><span data-stu-id="d20c7-278">The `%PROGRAMFILES%` directory and the `HKLM` registry hive are examples of locations which are writable by only administrators and readable by everyone.</span></span> <span data-ttu-id="d20c7-279">Les données lues à partir de ces emplacements sont donc considérées comme dignes de confiance.</span><span class="sxs-lookup"><span data-stu-id="d20c7-279">Data read from those locations is therefore considered trustworthy.</span></span>

<span data-ttu-id="d20c7-280">Si une application doit utiliser la portée de l' _ordinateur_ dans un environnement multi-utilisateur, validez le contenu des fichiers que vous lisez à partir du magasin de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-280">If an app must use the _Machine_ scope in a multi-user environment, validate the contents of any file that you read from the machine-wide store.</span></span> <span data-ttu-id="d20c7-281">Si l’application désérialise des graphiques d’objets à partir de ces fichiers, envisagez d’utiliser des sérialiseurs plus sûrs comme `XmlSerializer` au lieu de sérialiseurs dangereux comme `BinaryFormatter` ou `NetDataContractSerializer` .</span><span class="sxs-lookup"><span data-stu-id="d20c7-281">If the app deserializing object graphs from these files, consider using safer serializers like `XmlSerializer` instead of dangerous serializers like `BinaryFormatter` or `NetDataContractSerializer`.</span></span> <span data-ttu-id="d20c7-282">Soyez vigilant avec les graphiques d’objets profondément imbriqués ou les graphiques d’objets qui effectuent l’allocation des ressources en fonction du contenu du fichier.</span><span class="sxs-lookup"><span data-stu-id="d20c7-282">Use caution with deeply nested object graphs or object graphs which perform resource allocation based on the file contents.</span></span>

<a name="isolated_storage_locations"></a>

## <a name="isolated-storage-locations"></a><span data-ttu-id="d20c7-283">Emplacements de stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-283">Isolated Storage Locations</span></span>

<span data-ttu-id="d20c7-284">Il est parfois utile de vérifier une modification apportée au stockage isolé en utilisant le système de fichiers du système d'exploitation.</span><span class="sxs-lookup"><span data-stu-id="d20c7-284">Sometimes it is helpful to verify a change to isolated storage by using the file system of the operating system.</span></span> <span data-ttu-id="d20c7-285">Vous devrez peut-être également avoir besoin de connaître l'emplacement des fichiers de stockage isolé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-285">You might also want to know the location of isolated storage files.</span></span> <span data-ttu-id="d20c7-286">Cet emplacement dépend du système d'exploitation.</span><span class="sxs-lookup"><span data-stu-id="d20c7-286">This location is different depending on the operating system.</span></span> <span data-ttu-id="d20c7-287">Le tableau suivant illustre les emplacements racine du stockage isolé sur quelques systèmes d'exploitation courants.</span><span class="sxs-lookup"><span data-stu-id="d20c7-287">The following table shows the root locations where isolated storage is created on a few common operating systems.</span></span> <span data-ttu-id="d20c7-288">Examinez les répertoires Microsoft\IsolatedStorage sous cet emplacement racine.</span><span class="sxs-lookup"><span data-stu-id="d20c7-288">Look for Microsoft\IsolatedStorage directories under this root location.</span></span> <span data-ttu-id="d20c7-289">Vous devez modifier les paramètres de dossier pour afficher les fichiers et les dossiers cachés afin de visualiser le stockage isolé dans le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="d20c7-289">You must change folder settings to show hidden files and folders in order to see isolated storage in the file system.</span></span>

|<span data-ttu-id="d20c7-290">Système d’exploitation</span><span class="sxs-lookup"><span data-stu-id="d20c7-290">Operating system</span></span>|<span data-ttu-id="d20c7-291">Emplacement dans le système de fichiers</span><span class="sxs-lookup"><span data-stu-id="d20c7-291">Location in file system</span></span>|
|----------------------|-----------------------------|
|<span data-ttu-id="d20c7-292">Windows 2000, Windows XP, Windows Server 2003 (mise à niveau de Windows NT 4.0)</span><span class="sxs-lookup"><span data-stu-id="d20c7-292">Windows 2000, Windows XP, Windows Server 2003  (upgrade from Windows NT 4.0)</span></span>|<span data-ttu-id="d20c7-293">Magasins itinérants =</span><span class="sxs-lookup"><span data-stu-id="d20c7-293">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="d20c7-294">\<SYSTEMROOT>\Profiles \\<utilisateur \> \Application Data</span><span class="sxs-lookup"><span data-stu-id="d20c7-294">\<SYSTEMROOT>\Profiles\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="d20c7-295">Magasins non itinérants =</span><span class="sxs-lookup"><span data-stu-id="d20c7-295">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="d20c7-296">\<SYSTEMROOT>\Profiles \\<utilisateur \> \Local Settings\Application Data</span><span class="sxs-lookup"><span data-stu-id="d20c7-296">\<SYSTEMROOT>\Profiles\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="d20c7-297">Windows 2000 - Nouvelle installation (et mises à niveau de Windows 98 et Windows NT 3.51)</span><span class="sxs-lookup"><span data-stu-id="d20c7-297">Windows 2000  - clean installation (and upgrades from Windows 98 and Windows NT 3.51)</span></span>|<span data-ttu-id="d20c7-298">Magasins itinérants =</span><span class="sxs-lookup"><span data-stu-id="d20c7-298">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="d20c7-299">\<SYSTEMDRIVE>\Documents and Settings \\<utilisateur \> \Application Data</span><span class="sxs-lookup"><span data-stu-id="d20c7-299">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="d20c7-300">Magasins non itinérants =</span><span class="sxs-lookup"><span data-stu-id="d20c7-300">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="d20c7-301">\<SYSTEMDRIVE>\Documents and Settings \\<utilisateur \> \Local Settings\Application Data</span><span class="sxs-lookup"><span data-stu-id="d20c7-301">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="d20c7-302">Windows XP, Windows Server 2003 - Nouvelle installation (et mises à niveau de Windows 2000 et Windows 98)</span><span class="sxs-lookup"><span data-stu-id="d20c7-302">Windows XP, Windows Server 2003 - clean installation (and upgrades from Windows 2000 and Windows 98)</span></span>|<span data-ttu-id="d20c7-303">Magasins itinérants =</span><span class="sxs-lookup"><span data-stu-id="d20c7-303">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="d20c7-304">\<SYSTEMDRIVE>\Documents and Settings \\<utilisateur \> \Application Data</span><span class="sxs-lookup"><span data-stu-id="d20c7-304">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="d20c7-305">Magasins non itinérants =</span><span class="sxs-lookup"><span data-stu-id="d20c7-305">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="d20c7-306">\<SYSTEMDRIVE>\Documents and Settings \\<utilisateur \> \Local Settings\Application Data</span><span class="sxs-lookup"><span data-stu-id="d20c7-306">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="d20c7-307">Windows 8, Windows 7, Windows Server 2008, Windows Vista</span><span class="sxs-lookup"><span data-stu-id="d20c7-307">Windows 8, Windows 7, Windows Server 2008, Windows Vista</span></span>|<span data-ttu-id="d20c7-308">Magasins itinérants =</span><span class="sxs-lookup"><span data-stu-id="d20c7-308">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="d20c7-309">\<SYSTEMDRIVE>\Utilisateurs \\<utilisateur \> \AppData\Roaming</span><span class="sxs-lookup"><span data-stu-id="d20c7-309">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Roaming</span></span><br /><br /> <span data-ttu-id="d20c7-310">Magasins non itinérants =</span><span class="sxs-lookup"><span data-stu-id="d20c7-310">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="d20c7-311">\<SYSTEMDRIVE>\Utilisateurs \\<utilisateur \> \AppData\Local</span><span class="sxs-lookup"><span data-stu-id="d20c7-311">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Local</span></span>|

<a name="isolated_storage_tasks"></a>

## <a name="creating-enumerating-and-deleting-isolated-storage"></a><span data-ttu-id="d20c7-312">Création, énumération et suppression du stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-312">Creating, Enumerating, and Deleting Isolated Storage</span></span>

<span data-ttu-id="d20c7-313">Le .NET Framework fournit trois classes dans l'espace de noms <xref:System.IO.IsolatedStorage> pour vous aider à exécuter des tâches qui impliquent le stockage isolé :</span><span class="sxs-lookup"><span data-stu-id="d20c7-313">The .NET Framework provides three classes in the <xref:System.IO.IsolatedStorage> namespace to help you perform tasks that involve isolated storage:</span></span>

- <span data-ttu-id="d20c7-314"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>, qui dérive de <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> , assure la gestion de base des fichiers d'application et d'assembly stockés.</span><span class="sxs-lookup"><span data-stu-id="d20c7-314"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>, derives from <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> and provides basic management of stored assembly and application files.</span></span> <span data-ttu-id="d20c7-315">Une instance de la classe <xref:System.IO.IsolatedStorage.IsolatedStorageFile> représente un magasin unique situé dans le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="d20c7-315">An instance of the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class represents a single store located in the file system.</span></span>

- <span data-ttu-id="d20c7-316"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream> , qui dérive de <xref:System.IO.FileStream?displayProperty=nameWithType> , donne accès aux fichiers d'un magasin.</span><span class="sxs-lookup"><span data-stu-id="d20c7-316"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream> derives from <xref:System.IO.FileStream?displayProperty=nameWithType> and provides access to the files in a store.</span></span>

- <span data-ttu-id="d20c7-317"><xref:System.IO.IsolatedStorage.IsolatedStorageScope> est une énumération qui vous permet de créer et de sélectionner un magasin avec un type d'isolation approprié.</span><span class="sxs-lookup"><span data-stu-id="d20c7-317"><xref:System.IO.IsolatedStorage.IsolatedStorageScope> is an enumeration that enables you to create and select a store with the appropriate isolation type.</span></span>

<span data-ttu-id="d20c7-318">Les classes de stockage isolé vous permettent de créer, d'énumérer et de supprimer le stockage isolé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-318">The isolated storage classes enable you to create, enumerate, and delete isolated storage.</span></span> <span data-ttu-id="d20c7-319">Les méthodes permettant d'effectuer ces tâches sont disponibles par l'intermédiaire de l'objet <xref:System.IO.IsolatedStorage.IsolatedStorageFile> .</span><span class="sxs-lookup"><span data-stu-id="d20c7-319">The methods for performing these tasks are available through the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> object.</span></span> <span data-ttu-id="d20c7-320">Avec certaines opérations, vous devez disposer de l'autorisation <xref:System.Security.Permissions.IsolatedStorageFilePermission> qui représente le droit d'administrer le stockage isolé ; vous pouvez également être amené à disposer de droits de système d'exploitation pour accéder au fichier ou au répertoire.</span><span class="sxs-lookup"><span data-stu-id="d20c7-320">Some operations require you to have the <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission that represents the right to administer isolated storage; you might also need to have operating system rights to access the file or directory.</span></span>

<span data-ttu-id="d20c7-321">Pour obtenir une série d’exemples illustrant les tâches de stockage isolé courantes, consultez les rubriques « comment » sous [Rubriques connexes](#related_topics).</span><span class="sxs-lookup"><span data-stu-id="d20c7-321">For a series of examples that demonstrate common isolated storage tasks, see the how-to topics listed in [Related Topics](#related_topics).</span></span>

<a name="scenarios_for_isolated_storage"></a>

## <a name="scenarios-for-isolated-storage"></a><span data-ttu-id="d20c7-322">Scénarios de stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-322">Scenarios for Isolated Storage</span></span>

<span data-ttu-id="d20c7-323">Le stockage isolé est utile dans de nombreuses situations, notamment dans ces quatre scénarios :</span><span class="sxs-lookup"><span data-stu-id="d20c7-323">Isolated storage is useful in many situations, including these four scenarios:</span></span>

- <span data-ttu-id="d20c7-324">Contrôles téléchargés.</span><span class="sxs-lookup"><span data-stu-id="d20c7-324">Downloaded controls.</span></span> <span data-ttu-id="d20c7-325">Les contrôles de code managé téléchargés à partir d'Internet ne sont pas autorisés à écrire sur le disque dur via les classes E/S ordinaires, mais ils peuvent utiliser le stockage isolé pour rendre persistants les paramètres des utilisateurs et les états des applications.</span><span class="sxs-lookup"><span data-stu-id="d20c7-325">Managed code controls downloaded from the Internet are not allowed to write to the hard drive through normal I/O classes, but they can use isolated storage to persist users' settings and application states.</span></span>

- <span data-ttu-id="d20c7-326">Stockage de composant partagé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-326">Shared component storage.</span></span> <span data-ttu-id="d20c7-327">Les composants partagés entre plusieurs applications peuvent utiliser le stockage isolé pour fournir un accès contrôlé aux magasins de données.</span><span class="sxs-lookup"><span data-stu-id="d20c7-327">Components that are shared between applications can use isolated storage to provide controlled access to data stores.</span></span>

- <span data-ttu-id="d20c7-328">Stockage serveur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-328">Server storage.</span></span> <span data-ttu-id="d20c7-329">Les applications serveur peuvent utiliser le stockage isolé pour fournir des magasins individuels à de nombreux utilisateurs qui effectuent des demandes à l'application.</span><span class="sxs-lookup"><span data-stu-id="d20c7-329">Server applications can use isolated storage to provide individual stores for a large number of users making requests to the application.</span></span> <span data-ttu-id="d20c7-330">Dans la mesure où le stockage isolé est toujours isolé par l'utilisateur, le serveur doit emprunter l'identité de l'utilisateur qui effectue la demande.</span><span class="sxs-lookup"><span data-stu-id="d20c7-330">Because isolated storage is always segregated by user, the server must impersonate the user making the request.</span></span> <span data-ttu-id="d20c7-331">Dans ce cas, les données sont isolées en fonction de l'identité de l'entité de sécurité, qui est identique à l'identité utilisée par l'application pour établir une distinction entre ses utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="d20c7-331">In this case, data is isolated based on the identity of the principal, which is the same identity the application uses to distinguish between its users.</span></span>

- <span data-ttu-id="d20c7-332">Profil itinérant.</span><span class="sxs-lookup"><span data-stu-id="d20c7-332">Roaming.</span></span> <span data-ttu-id="d20c7-333">Les applications peuvent également utiliser le stockage isolé avec des profils d'utilisateur itinérant.</span><span class="sxs-lookup"><span data-stu-id="d20c7-333">Applications can also use isolated storage with roaming user profiles.</span></span> <span data-ttu-id="d20c7-334">Ainsi, les magasins isolés d'un utilisateur peuvent être itinérants avec le profil.</span><span class="sxs-lookup"><span data-stu-id="d20c7-334">This allows a user's isolated stores to roam with the profile.</span></span>

<span data-ttu-id="d20c7-335">Vous ne devez pas utiliser le stockage isolé dans les situations suivantes :</span><span class="sxs-lookup"><span data-stu-id="d20c7-335">You should not use isolated storage in the following situations:</span></span>

- <span data-ttu-id="d20c7-336">Pour stocker des secrets de grande valeur, tels que des clés ou des mots de passe non chiffrés, car le stockage isolé n'est pas protégé contre le code à niveau de confiance extrêmement élevé, contre le code non managé ou contre les utilisateurs de confiance de l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-336">To store high-value secrets, such as unencrypted keys or passwords, because isolated storage is not protected from highly trusted code, from unmanaged code, or from trusted users of the computer.</span></span>

- <span data-ttu-id="d20c7-337">Pour stocker du code.</span><span class="sxs-lookup"><span data-stu-id="d20c7-337">To store code.</span></span>

- <span data-ttu-id="d20c7-338">Pour enregistrer les paramètres de configuration et de déploiement, qui sont contrôlés par les administrateurs.</span><span class="sxs-lookup"><span data-stu-id="d20c7-338">To store configuration and deployment settings, which administrators control.</span></span> <span data-ttu-id="d20c7-339">(les préférences de l'utilisateur ne sont pas considérées comme des paramètres de configuration car les administrateurs ne les contrôlent pas).</span><span class="sxs-lookup"><span data-stu-id="d20c7-339">(User preferences are not considered to be configuration settings because administrators do not control them.)</span></span>

<span data-ttu-id="d20c7-340">De nombreuses applications utilisent une base de données pour stocker et isoler des données. Dans ce cas, une ou plusieurs lignes d'une base de données peuvent représenter le stockage d'un utilisateur spécifique.</span><span class="sxs-lookup"><span data-stu-id="d20c7-340">Many applications use a database to store and isolate data, in which case one or more rows in a database might represent storage for a specific user.</span></span> <span data-ttu-id="d20c7-341">Vous pouvez utiliser le stockage isolé plutôt qu'une base de données lorsque le nombre d'utilisateurs est petit, lorsque la surcharge de l'utilisation d'une base de données est significative ou lorsque aucune base de données n'existe.</span><span class="sxs-lookup"><span data-stu-id="d20c7-341">You might choose to use isolated storage instead of a database when the number of users is small, when the overhead of using a database is significant, or when no database facility exists.</span></span> <span data-ttu-id="d20c7-342">Le stockage isolé peut également être utilisé lorsque l'application nécessite un stockage plus flexible et plus complexe que celui proposé par une ligne d'une base de données.</span><span class="sxs-lookup"><span data-stu-id="d20c7-342">Also, when the application requires storage that is more flexible and complex than what a row in a database provides, isolated storage can provide a viable alternative.</span></span>

<a name="related_topics"></a>

## <a name="related-topics"></a><span data-ttu-id="d20c7-343">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="d20c7-343">Related Topics</span></span>

|<span data-ttu-id="d20c7-344">Intitulé</span><span class="sxs-lookup"><span data-stu-id="d20c7-344">Title</span></span>|<span data-ttu-id="d20c7-345">Description</span><span class="sxs-lookup"><span data-stu-id="d20c7-345">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="d20c7-346">Types d'isolation</span><span class="sxs-lookup"><span data-stu-id="d20c7-346">Types of Isolation</span></span>](types-of-isolation.md)|<span data-ttu-id="d20c7-347">Décrit les divers types d'isolation.</span><span class="sxs-lookup"><span data-stu-id="d20c7-347">Describes the different types of isolation.</span></span>|
|[<span data-ttu-id="d20c7-348">Procédure : obtenir des magasins pour le stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-348">How to: Obtain Stores for Isolated Storage</span></span>](how-to-obtain-stores-for-isolated-storage.md)|<span data-ttu-id="d20c7-349">Donne un exemple d'utilisation de la classe <xref:System.IO.IsolatedStorage.IsolatedStorageFile> pour obtenir un magasin isolé par utilisateur et par assembly.</span><span class="sxs-lookup"><span data-stu-id="d20c7-349">Provides an example of using the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class to obtain a store isolated by user and assembly.</span></span>|
|[<span data-ttu-id="d20c7-350">Procédure : énumérer des magasins pour le stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-350">How to: Enumerate Stores for Isolated Storage</span></span>](how-to-enumerate-stores-for-isolated-storage.md)|<span data-ttu-id="d20c7-351">Indique comment utiliser la méthode <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> pour calculer la taille de tout le stockage isolé de l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d20c7-351">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> method to calculate the size of all isolated storage for the user.</span></span>|
|[<span data-ttu-id="d20c7-352">Procédure : supprimer des magasins dans le stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-352">How to: Delete Stores in Isolated Storage</span></span>](how-to-delete-stores-in-isolated-storage.md)|<span data-ttu-id="d20c7-353">Indique comment utiliser la méthode <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> de deux façons différentes pour supprimer des magasins isolés.</span><span class="sxs-lookup"><span data-stu-id="d20c7-353">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> method in two different ways to delete isolated stores.</span></span>|
|[<span data-ttu-id="d20c7-354">Procédure : anticiper des conditions d’espace insuffisant avec le stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-354">How to: Anticipate Out-of-Space Conditions with Isolated Storage</span></span>](how-to-anticipate-out-of-space-conditions-with-isolated-storage.md)|<span data-ttu-id="d20c7-355">Illustre comment mesurer l'espace restant dans un magasin isolé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-355">Shows how to measure the remaining space in an isolated store.</span></span>|
|[<span data-ttu-id="d20c7-356">Procédure : créer des fichiers et des répertoires dans un stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-356">How to: Create Files and Directories in Isolated Storage</span></span>](how-to-create-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="d20c7-357">Propose plusieurs exemples pour créer des fichiers et des répertoires dans un magasin isolé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-357">Provides some examples of creating files and directories in an isolated store.</span></span>|
|[<span data-ttu-id="d20c7-358">Procédure : rechercher des fichiers et des répertoires existants dans un stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-358">How to: Find Existing Files and Directories in Isolated Storage</span></span>](how-to-find-existing-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="d20c7-359">Illustre comment lire la structure de répertoire et les fichiers dans le stockage isolé.</span><span class="sxs-lookup"><span data-stu-id="d20c7-359">Demonstrates how to read the directory structure and files in isolated storage.</span></span>|
|[<span data-ttu-id="d20c7-360">Procédure : lire et écrire des fichiers dans un stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-360">How to: Read and Write to Files in Isolated Storage</span></span>](how-to-read-and-write-to-files-in-isolated-storage.md)|<span data-ttu-id="d20c7-361">Fournit un exemple d'écriture d'une chaîne dans un fichier de stockage isolé et de sa lecture ultérieure.</span><span class="sxs-lookup"><span data-stu-id="d20c7-361">Provides an example of writing a string to an isolated storage file and reading it back.</span></span>|
|[<span data-ttu-id="d20c7-362">Procédure : supprimer des fichiers et des répertoires dans un stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-362">How to: Delete Files and Directories in Isolated Storage</span></span>](how-to-delete-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="d20c7-363">Indique comment supprimer des fichiers et des répertoires d'un stockage isolé</span><span class="sxs-lookup"><span data-stu-id="d20c7-363">Demonstrates how to delete isolated storage files and directories.</span></span>|
|[<span data-ttu-id="d20c7-364">E/s de fichier et de flux</span><span class="sxs-lookup"><span data-stu-id="d20c7-364">File and Stream I/O</span></span>](index.md)|<span data-ttu-id="d20c7-365">Explique comment accéder aux flux de données et de fichiers de façon synchrone et asynchrone.</span><span class="sxs-lookup"><span data-stu-id="d20c7-365">Explains how you can perform synchronous and asynchronous file and data stream access.</span></span>|

<a name="reference"></a>

## <a name="reference"></a><span data-ttu-id="d20c7-366">Informations de référence</span><span class="sxs-lookup"><span data-stu-id="d20c7-366">Reference</span></span>

- <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFile?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFileStream?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageScope?displayProperty=nameWithType>
