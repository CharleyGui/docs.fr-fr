---
title: Parallélisme de données (bibliothèque parallèle de tâches)
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- parallelism, data
ms.assetid: 3f05f33f-f1da-4b16-81c2-9ceff1bef449
ms.openlocfilehash: d7500666f12624d1a81d399a325827a416e5af3c
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/02/2020
ms.locfileid: "84276775"
---
# <a name="data-parallelism-task-parallel-library"></a><span data-ttu-id="d6f0f-102">Parallélisme de données (bibliothèque parallèle de tâches)</span><span class="sxs-lookup"><span data-stu-id="d6f0f-102">Data Parallelism (Task Parallel Library)</span></span>
<span data-ttu-id="d6f0f-103">Le *parallélisme des données* fait référence aux scénarios dans lesquels la même opération est exécutée de manière simultanée (autrement dit, en parallèle) sur les éléments d’un tableau ou d’une collection source.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-103">*Data parallelism* refers to scenarios in which the same operation is performed concurrently (that is, in parallel) on elements in a source collection or array.</span></span> <span data-ttu-id="d6f0f-104">Dans les opérations en parallèle de données, la collection source est partitionnée afin que plusieurs threads puissent fonctionner simultanément sur des segments différents.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-104">In data parallel operations, the source collection is partitioned so that multiple threads can operate on different segments concurrently.</span></span>  
  
 <span data-ttu-id="d6f0f-105">La bibliothèque parallèle de tâches prend en charge le parallélisme des données via la classe <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-105">The Task Parallel Library (TPL) supports data parallelism through the <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="d6f0f-106">Cette classe fournit des implémentations parallèles, fondées sur une méthode, des boucles [for](../../csharp/language-reference/keywords/for.md) et [foreach](../../csharp/language-reference/keywords/foreach-in.md) (`For` et `For Each` en Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="d6f0f-106">This class provides method-based parallel implementations of [for](../../csharp/language-reference/keywords/for.md) and [foreach](../../csharp/language-reference/keywords/foreach-in.md) loops (`For` and `For Each` in Visual Basic).</span></span> <span data-ttu-id="d6f0f-107">Vous écrivez la logique de boucle d'une boucle <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> ou <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> de la même manière que pour une boucle séquentielle.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-107">You write the loop logic for a <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> or <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> loop much as you would write a sequential loop.</span></span> <span data-ttu-id="d6f0f-108">Vous n’avez pas à créer de threads ou d’éléments de travail de file d’attente.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-108">You do not have to create threads or queue work items.</span></span> <span data-ttu-id="d6f0f-109">Dans les boucles simples, vous n'avez pas besoin d'acquérir de verrous.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-109">In basic loops, you do not have to take locks.</span></span> <span data-ttu-id="d6f0f-110">La bibliothèque parallèle de tâches gère tous les travaux de bas niveau pour vous.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-110">The TPL handles all the low-level work for you.</span></span> <span data-ttu-id="d6f0f-111">Pour des informations détaillées sur l’utilisation de <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> et de <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType>, téléchargez le document [Modèles de programmation parallèle : comprendre et appliquer les modèles parallèles avec .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222).</span><span class="sxs-lookup"><span data-stu-id="d6f0f-111">For in-depth information about the use of <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType>, download the document [Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222).</span></span> <span data-ttu-id="d6f0f-112">L'exemple de code suivant montre une boucle `foreach` simple et son équivalent parallèle.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-112">The following code example shows a simple `foreach` loop and its parallel equivalent.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="d6f0f-113">Cette documentation utilise les expressions lambda pour définir les délégués de la bibliothèque parallèle de tâches.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-113">This documentation uses lambda expressions to define delegates in TPL.</span></span> <span data-ttu-id="d6f0f-114">Si les expressions lambda en C# ou Visual Basic ne vous sont pas familières, consultez la page [Expressions lambda en PLINQ et dans la bibliothèque parallèle de tâches](lambda-expressions-in-plinq-and-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="d6f0f-114">If you are not familiar with lambda expressions in C# or Visual Basic, see [Lambda Expressions in PLINQ and TPL](lambda-expressions-in-plinq-and-tpl.md).</span></span>  
  
 [!code-csharp[TPL#20](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl/cs/tpl.cs#20)]
 [!code-vb[TPL#20](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl/vb/tpl_vb.vb#20)]  
  
 <span data-ttu-id="d6f0f-115">Quand une boucle parallèle s'exécute, la bibliothèque parallèle de tâches partitionne la source de données afin que la boucle puisse s'exécuter simultanément sur plusieurs parties.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-115">When a parallel loop runs, the TPL partitions the data source so that the loop can operate on multiple parts concurrently.</span></span> <span data-ttu-id="d6f0f-116">En arrière-plan, le planificateur de tâches partitionne la tâche en fonction des ressources système et de la charge de travail.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-116">Behind the scenes, the Task Scheduler partitions the task based on system resources and workload.</span></span> <span data-ttu-id="d6f0f-117">Quand cela lui est possible, le planificateur redistribue le travail entre plusieurs threads et processeurs si la charge de travail est déséquilibrée.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-117">When possible, the scheduler redistributes work among multiple threads and processors if the workload becomes unbalanced.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="d6f0f-118">Vous pouvez également fournir votre propre partitionneur ou planificateur personnalisé.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-118">You can also supply your own custom partitioner or scheduler.</span></span> <span data-ttu-id="d6f0f-119">Pour plus d’informations, consultez la page [Partitionneurs personnalisés pour PLINQ et la bibliothèque parallèle de tâches (TPL)](custom-partitioners-for-plinq-and-tpl.md) et [Planificateurs de tâches](xref:System.Threading.Tasks.TaskScheduler).</span><span class="sxs-lookup"><span data-stu-id="d6f0f-119">For more information, see [Custom Partitioners for PLINQ and TPL](custom-partitioners-for-plinq-and-tpl.md) and [Task Schedulers](xref:System.Threading.Tasks.TaskScheduler).</span></span>  
  
 <span data-ttu-id="d6f0f-120">Les méthodes <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> et <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> ont plusieurs surcharges qui vous permettent d'arrêter ou de quitter l'exécution d'une boucle, de surveiller l'état de la boucle sur d'autres threads, de maintenir l'état local de thread, de finaliser des objets locaux de thread, de contrôler le degré d'accès concurrentiel, etc.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-120">Both the <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> methods have several overloads that let you stop or break loop execution, monitor the state of the loop on other threads, maintain thread-local state, finalize thread-local objects, control the degree of concurrency, and so on.</span></span> <span data-ttu-id="d6f0f-121">Les types d'assistance qui permettent ces fonctionnalités incluent <xref:System.Threading.Tasks.ParallelLoopState>, <xref:System.Threading.Tasks.ParallelOptions>, <xref:System.Threading.Tasks.ParallelLoopResult>, <xref:System.Threading.CancellationToken> et <xref:System.Threading.CancellationTokenSource>.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-121">The helper types that enable this functionality include <xref:System.Threading.Tasks.ParallelLoopState>, <xref:System.Threading.Tasks.ParallelOptions>, <xref:System.Threading.Tasks.ParallelLoopResult>, <xref:System.Threading.CancellationToken>, and <xref:System.Threading.CancellationTokenSource>.</span></span>  
  
 <span data-ttu-id="d6f0f-122">Pour plus d’informations, consultez [Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222).</span><span class="sxs-lookup"><span data-stu-id="d6f0f-122">For more information, see [Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222).</span></span>  
  
 <span data-ttu-id="d6f0f-123">Le parallélisme des données avec syntaxe déclarative ou de requête est pris en charge par PLINQ.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-123">Data parallelism with declarative, or query-like, syntax is supported by PLINQ.</span></span> <span data-ttu-id="d6f0f-124">Pour plus d’informations, consultez [PLINQ (Parallel LINQ)](introduction-to-plinq.md).</span><span class="sxs-lookup"><span data-stu-id="d6f0f-124">For more information, see [Parallel LINQ (PLINQ)](introduction-to-plinq.md).</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="d6f0f-125">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="d6f0f-125">Related Topics</span></span>  
  
|<span data-ttu-id="d6f0f-126">Intitulé</span><span class="sxs-lookup"><span data-stu-id="d6f0f-126">Title</span></span>|<span data-ttu-id="d6f0f-127">Description</span><span class="sxs-lookup"><span data-stu-id="d6f0f-127">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="d6f0f-128">Procédure : écrire une boucle Parallel.For simple</span><span class="sxs-lookup"><span data-stu-id="d6f0f-128">How to: Write a Simple Parallel.For Loop</span></span>](how-to-write-a-simple-parallel-for-loop.md)|<span data-ttu-id="d6f0f-129">Explique comment écrire une boucle <xref:System.Threading.Tasks.Parallel.For%2A> sur tout tableau ou collection source <xref:System.Collections.Generic.IEnumerable%601> indexable.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-129">Describes how to write a <xref:System.Threading.Tasks.Parallel.For%2A> loop over any array or indexable <xref:System.Collections.Generic.IEnumerable%601> source collection.</span></span>|  
|[<span data-ttu-id="d6f0f-130">Procédure : écrire une boucle Parallel.ForEach simple</span><span class="sxs-lookup"><span data-stu-id="d6f0f-130">How to: Write a Simple Parallel.ForEach Loop</span></span>](how-to-write-a-simple-parallel-foreach-loop.md)|<span data-ttu-id="d6f0f-131">Explique comment écrire une boucle <xref:System.Threading.Tasks.Parallel.ForEach%2A> sur toute collection source <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-131">Describes how to write a <xref:System.Threading.Tasks.Parallel.ForEach%2A> loop over any <xref:System.Collections.Generic.IEnumerable%601> source collection.</span></span>|  
|<span data-ttu-id="d6f0f-132">[Guide pratique : arrêt ou sortie d’une boucle Parallel.For](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd460721(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="d6f0f-132">[How to: Stop or Break from a Parallel.For Loop](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd460721(v=vs.100))</span></span>|<span data-ttu-id="d6f0f-133">Explique comment arrêter ou rompre une boucle parallèle afin que tous les threads soient informés de l'action.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-133">Describes how to stop or break from a parallel loop so that all threads are informed of the action.</span></span>|  
|[<span data-ttu-id="d6f0f-134">Procédure : écrire une boucle Parallel.For avec des variables locales de thread</span><span class="sxs-lookup"><span data-stu-id="d6f0f-134">How to: Write a Parallel.For Loop with Thread-Local Variables</span></span>](how-to-write-a-parallel-for-loop-with-thread-local-variables.md)|<span data-ttu-id="d6f0f-135">Explique comment écrire une boucle <xref:System.Threading.Tasks.Parallel.For%2A> dans laquelle chaque thread maintient une variable privée qui n’est pas visible pour les autres threads et comment synchroniser les résultats de tous les threads quand la boucle se termine.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-135">Describes how to write a <xref:System.Threading.Tasks.Parallel.For%2A> loop in which each thread maintains a private variable that is not visible to any other threads, and how to synchronize the results from all threads when the loop completes.</span></span>|  
|[<span data-ttu-id="d6f0f-136">Procédure : écrire une boucle Parallel.ForEach avec des variables locales de partition</span><span class="sxs-lookup"><span data-stu-id="d6f0f-136">How to: Write a Parallel.ForEach Loop with Partition-Local Variables</span></span>](how-to-write-a-parallel-foreach-loop-with-partition-local-variables.md)|<span data-ttu-id="d6f0f-137">Explique comment écrire une boucle <xref:System.Threading.Tasks.Parallel.ForEach%2A> dans laquelle chaque thread maintient une variable privée qui n’est pas visible pour les autres threads et comment synchroniser les résultats de tous les threads quand la boucle se termine.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-137">Describes how to write a <xref:System.Threading.Tasks.Parallel.ForEach%2A> loop in which each thread maintains a private variable that is not visible to any other threads, and how to synchronize the results from all threads when the loop completes.</span></span>|  
|[<span data-ttu-id="d6f0f-138">Procédure : annuler une boucle Parallel.For ou ForEach</span><span class="sxs-lookup"><span data-stu-id="d6f0f-138">How to: Cancel a Parallel.For or ForEach Loop</span></span>](how-to-cancel-a-parallel-for-or-foreach-loop.md)|<span data-ttu-id="d6f0f-139">Explique comment annuler une boucle parallèle à l'aide d'un <xref:System.Threading.CancellationToken?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-139">Describes how to cancel a parallel loop by using a <xref:System.Threading.CancellationToken?displayProperty=nameWithType></span></span>|  
|[<span data-ttu-id="d6f0f-140">Procédure : accélérer les petits corps de boucles</span><span class="sxs-lookup"><span data-stu-id="d6f0f-140">How to: Speed Up Small Loop Bodies</span></span>](how-to-speed-up-small-loop-bodies.md)|<span data-ttu-id="d6f0f-141">Décrit une façon d'accélérer l'exécution quand un corps de boucle est très petit.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-141">Describes one way to speed up execution when a loop body is very small.</span></span>|  
|[<span data-ttu-id="d6f0f-142">Bibliothèque parallèle de tâches</span><span class="sxs-lookup"><span data-stu-id="d6f0f-142">Task Parallel Library (TPL)</span></span>](task-parallel-library-tpl.md)|<span data-ttu-id="d6f0f-143">Fournit une vue d’ensemble de la bibliothèque parallèle de tâches.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-143">Provides an overview of the Task Parallel Library.</span></span>|  
|[<span data-ttu-id="d6f0f-144">Programmation parallèle</span><span class="sxs-lookup"><span data-stu-id="d6f0f-144">Parallel Programming</span></span>](index.md)|<span data-ttu-id="d6f0f-145">Présente la programmation parallèle dans le .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d6f0f-145">Introduces Parallel Programming in the .NET Framework.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="d6f0f-146">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d6f0f-146">See also</span></span>

- [<span data-ttu-id="d6f0f-147">Programmation parallèle</span><span class="sxs-lookup"><span data-stu-id="d6f0f-147">Parallel Programming</span></span>](index.md)
