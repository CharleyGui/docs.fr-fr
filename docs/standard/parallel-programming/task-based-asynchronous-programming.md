---
title: Programmation asynchrone basée sur les tâches - .NET
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- parallelism, task
ms.assetid: 458b5e69-5210-45e5-bc44-3888f86abd6f
ms.openlocfilehash: 51292d977f2be87cec7c3481f5004fe5fe756224
ms.sourcegitcommit: 81ad1f09b93f3b3e6706a7f2e4ddf50ef229ea3d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/20/2019
ms.locfileid: "74204540"
---
# <a name="task-based-asynchronous-programming"></a><span data-ttu-id="dcdff-102">Programmation asynchrone basée sur les tâches</span><span class="sxs-lookup"><span data-stu-id="dcdff-102">Task-based asynchronous programming</span></span>

<span data-ttu-id="dcdff-103">La bibliothèque parallèle de tâches (TPL) est basée sur le concept de *tâche*, qui représente une opération asynchrone.</span><span class="sxs-lookup"><span data-stu-id="dcdff-103">The Task Parallel Library (TPL) is based on the concept of a *task*, which represents an asynchronous operation.</span></span> <span data-ttu-id="dcdff-104">À certains égards, une tâche ressemble à un thread ou à un élément de travail <xref:System.Threading.ThreadPool>, mais à un niveau d’abstraction supérieur.</span><span class="sxs-lookup"><span data-stu-id="dcdff-104">In some ways, a task resembles a thread or <xref:System.Threading.ThreadPool> work item, but at a higher level of abstraction.</span></span> <span data-ttu-id="dcdff-105">Le terme *parallélisme des tâches* fait référence à une ou plusieurs tâches indépendantes qui s’exécutent simultanément.</span><span class="sxs-lookup"><span data-stu-id="dcdff-105">The term *task parallelism* refers to one or more independent tasks running concurrently.</span></span> <span data-ttu-id="dcdff-106">Les tâches présentent deux grands avantages :</span><span class="sxs-lookup"><span data-stu-id="dcdff-106">Tasks provide two primary benefits:</span></span>

- <span data-ttu-id="dcdff-107">Une utilisation plus efficace et évolutive des ressources système.</span><span class="sxs-lookup"><span data-stu-id="dcdff-107">More efficient and more scalable use of system resources.</span></span>

     <span data-ttu-id="dcdff-108">En arrière-plan, les tâches sont mises en file d’attente dans le <xref:System.Threading.ThreadPool>, amélioré au moyen d’algorithmes qui déterminent le nombre de threads (et s’y ajustent) et qui fournissent l’équilibrage de charge afin d’optimiser le débit.</span><span class="sxs-lookup"><span data-stu-id="dcdff-108">Behind the scenes, tasks are queued to the <xref:System.Threading.ThreadPool>, which has been enhanced with algorithms  that determine and adjust to the number of threads and that provide load balancing to maximize throughput.</span></span> <span data-ttu-id="dcdff-109">Cela rend les tâches relativement simples et vous permet d’en créer de nombreuses pour un parallélisme affiné.</span><span class="sxs-lookup"><span data-stu-id="dcdff-109">This makes tasks relatively lightweight, and you can create many of them to enable fine-grained parallelism.</span></span>

- <span data-ttu-id="dcdff-110">Davantage de contrôle par programmation qu'avec un thread ou un élément de travail.</span><span class="sxs-lookup"><span data-stu-id="dcdff-110">More programmatic control than is possible with a thread or work item.</span></span>

     <span data-ttu-id="dcdff-111">Les tâches et l'infrastructure construites autour de ces algorithmes fournissent un ensemble riche d'API prenant en charge l'attente, l'annulation, les continuations, la gestion fiable des exceptions, l'état détaillé, la planification personnalisée, et bien plus encore.</span><span class="sxs-lookup"><span data-stu-id="dcdff-111">Tasks and the framework built around them provide a rich set of APIs that support waiting, cancellation, continuations, robust exception handling, detailed status, custom scheduling, and more.</span></span>

<span data-ttu-id="dcdff-112">Pour ces raisons, la bibliothèque parallèle de tâches est l'API privilégiée pour l'écriture du code multithread, asynchrone et parallèle dans .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="dcdff-112">For both of these reasons, in the .NET Framework, TPL is the preferred API for writing multi-threaded, asynchronous, and parallel code.</span></span>

## <a name="creating-and-running-tasks-implicitly"></a><span data-ttu-id="dcdff-113">Création et exécution implicites de tâches</span><span class="sxs-lookup"><span data-stu-id="dcdff-113">Creating and running tasks implicitly</span></span>

<span data-ttu-id="dcdff-114">La méthode <xref:System.Threading.Tasks.Parallel.Invoke%2A?displayProperty=nameWithType> offre un moyen pratique d'exécuter simultanément un nombre d'instructions arbitraires.</span><span class="sxs-lookup"><span data-stu-id="dcdff-114">The <xref:System.Threading.Tasks.Parallel.Invoke%2A?displayProperty=nameWithType> method provides a convenient way to run any number of arbitrary statements concurrently.</span></span> <span data-ttu-id="dcdff-115">Pour cela, passez un délégué <xref:System.Action> pour chaque élément de travail.</span><span class="sxs-lookup"><span data-stu-id="dcdff-115">Just pass in an <xref:System.Action> delegate for each item of work.</span></span> <span data-ttu-id="dcdff-116">La façon la plus facile de créer ces délégués est d’utiliser des expressions lambda.</span><span class="sxs-lookup"><span data-stu-id="dcdff-116">The easiest way to create these delegates is to use lambda expressions.</span></span> <span data-ttu-id="dcdff-117">L’expression lambda peut appeler une méthode nommée ou fournir le code inline.</span><span class="sxs-lookup"><span data-stu-id="dcdff-117">The lambda expression can either call a named method or provide the code inline.</span></span> <span data-ttu-id="dcdff-118">L'exemple suivant montre un appel <xref:System.Threading.Tasks.Parallel.Invoke%2A> de base qui crée et démarre deux tâches qui s'exécutent simultanément.</span><span class="sxs-lookup"><span data-stu-id="dcdff-118">The following example shows a basic <xref:System.Threading.Tasks.Parallel.Invoke%2A> call that creates and starts two tasks that run concurrently.</span></span> <span data-ttu-id="dcdff-119">La première tâche est représentée par une expression lambda qui appelle une méthode nommée `DoSomeWork` et la seconde tâche est représentée par une expression lambda qui appelle une méthode nommée `DoSomeOtherWork`.</span><span class="sxs-lookup"><span data-stu-id="dcdff-119">The first task is represented by a lambda expression that calls a method named `DoSomeWork`, and the second task is represented by a lambda expression that calls a method named `DoSomeOtherWork`.</span></span>

> [!NOTE]
> <span data-ttu-id="dcdff-120">Cette documentation utilise les expressions lambda pour définir les délégués de la bibliothèque parallèle de tâches.</span><span class="sxs-lookup"><span data-stu-id="dcdff-120">This documentation uses lambda expressions to define delegates in TPL.</span></span> <span data-ttu-id="dcdff-121">Si les expressions lambda en C# ou Visual Basic ne vous sont pas familières, consultez [Expressions lambda en PLINQ et dans la bibliothèque parallèle de tâches](../../../docs/standard/parallel-programming/lambda-expressions-in-plinq-and-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-121">If you are not familiar with lambda expressions in C# or Visual Basic, see [Lambda Expressions in PLINQ and TPL](../../../docs/standard/parallel-programming/lambda-expressions-in-plinq-and-tpl.md).</span></span>

[!code-csharp[TPL#21](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl/cs/tpl.cs#21)]
[!code-vb[TPL#21](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl/vb/tpl_vb.vb#21)]

> [!NOTE]
> <span data-ttu-id="dcdff-122">Le nombre d'instances <xref:System.Threading.Tasks.Task> créées en arrière-plan par <xref:System.Threading.Tasks.Parallel.Invoke%2A> n'est pas nécessairement égal au nombre de délégués fournis.</span><span class="sxs-lookup"><span data-stu-id="dcdff-122">The number of <xref:System.Threading.Tasks.Task> instances that are created behind the scenes by <xref:System.Threading.Tasks.Parallel.Invoke%2A> is not necessarily equal to the number of delegates that are provided.</span></span> <span data-ttu-id="dcdff-123">La bibliothèque parallèle de tâches peut utiliser différentes optimisations, surtout avec un grand nombre de délégués.</span><span class="sxs-lookup"><span data-stu-id="dcdff-123">The TPL may employ various optimizations, especially with large numbers of delegates.</span></span>

<span data-ttu-id="dcdff-124">Pour plus d’informations, consultez [Comment : utiliser parallel_invoke pour exécuter des opérations parallèles](../../../docs/standard/parallel-programming/how-to-use-parallel-invoke-to-execute-parallel-operations.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-124">For more information, see [How to: Use Parallel.Invoke to Execute Parallel Operations](../../../docs/standard/parallel-programming/how-to-use-parallel-invoke-to-execute-parallel-operations.md).</span></span>

<span data-ttu-id="dcdff-125">Pour un plus grand contrôle de l’exécution de tâches ou pour retourner une valeur à partir de la tâche, vous devez utiliser les objets <xref:System.Threading.Tasks.Task> de manière plus explicite.</span><span class="sxs-lookup"><span data-stu-id="dcdff-125">For greater control over task execution or to return a value from the task, you have to work with <xref:System.Threading.Tasks.Task> objects more explicitly.</span></span>

## <a name="creating-and-running-tasks-explicitly"></a><span data-ttu-id="dcdff-126">Création et exécution explicites de tâches</span><span class="sxs-lookup"><span data-stu-id="dcdff-126">Creating and running tasks explicitly</span></span>

<span data-ttu-id="dcdff-127">Une tâche qui ne retourne pas de valeur est représentée par la classe <xref:System.Threading.Tasks.Task?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-127">A task that does not return a value is represented by the <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="dcdff-128">Une tâche qui retourne une valeur est représentée par la classe <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType>, qui hérite de <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-128">A task that returns a value is represented by the <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> class, which inherits from <xref:System.Threading.Tasks.Task>.</span></span> <span data-ttu-id="dcdff-129">L’objet de tâche gère les détails de l’infrastructure et fournit des méthodes et des propriétés accessibles depuis le thread appelant pendant la durée de vie de la tâche.</span><span class="sxs-lookup"><span data-stu-id="dcdff-129">The task object handles the infrastructure details and provides methods and properties that are accessible from the calling thread throughout the lifetime of the task.</span></span> <span data-ttu-id="dcdff-130">Par exemple, vous pouvez accéder à la propriété <xref:System.Threading.Tasks.Task.Status%2A> d'une tâche à tout moment pour déterminer si son exécution a commencé, est terminée, a été annulée ou a levé une exception.</span><span class="sxs-lookup"><span data-stu-id="dcdff-130">For example, you can access the <xref:System.Threading.Tasks.Task.Status%2A> property of a task at any time to determine whether it has started running, ran to completion, was canceled, or has thrown an exception.</span></span> <span data-ttu-id="dcdff-131">Le statut est représenté par une énumération <xref:System.Threading.Tasks.TaskStatus>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-131">The status is represented by a <xref:System.Threading.Tasks.TaskStatus> enumeration.</span></span>

<span data-ttu-id="dcdff-132">Lorsque vous créez une tâche, vous lui donnez un délégué utilisateur qui encapsule le code que la tâche exécutera.</span><span class="sxs-lookup"><span data-stu-id="dcdff-132">When you create a task, you give it a user delegate that encapsulates the code that the task will execute.</span></span> <span data-ttu-id="dcdff-133">Le délégué peut être exprimé en tant que délégué nommé, méthode anonyme ou expression lambda.</span><span class="sxs-lookup"><span data-stu-id="dcdff-133">The delegate can be expressed as a named delegate, an anonymous method, or a lambda expression.</span></span> <span data-ttu-id="dcdff-134">Les expressions lambda peuvent contenir un appel à une méthode nommée, comme indiqué dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="dcdff-134">Lambda expressions can contain a call to a named method, as shown in the following example.</span></span> <span data-ttu-id="dcdff-135">Notez que l’exemple inclut un appel à la méthode <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> pour garantir que l’exécution de la tâche se termine avant la fin de l’application en mode console.</span><span class="sxs-lookup"><span data-stu-id="dcdff-135">Note that the example includes a call to the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method to ensure that the task completes execution before the console mode application ends.</span></span>

[!code-csharp[TPL_TaskIntro#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/lambda1.cs#1)]
[!code-vb[TPL_TaskIntro#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/lambda1.vb#1)]

<span data-ttu-id="dcdff-136">Vous pouvez également utiliser les méthodes <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> pour créer et lancer une tâche dans une opération.</span><span class="sxs-lookup"><span data-stu-id="dcdff-136">You can also use the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> methods to create and start a task in one operation.</span></span> <span data-ttu-id="dcdff-137">Pour gérer la tâche, les méthodes <xref:System.Threading.Tasks.Task.Run%2A> utilisent le planificateur de tâches par défaut, quel que soit le planificateur de tâches associé au thread actuel.</span><span class="sxs-lookup"><span data-stu-id="dcdff-137">To manage the task, the <xref:System.Threading.Tasks.Task.Run%2A> methods use the default  task scheduler, regardless of which task scheduler is associated with the current thread.</span></span> <span data-ttu-id="dcdff-138">Les méthodes <xref:System.Threading.Tasks.Task.Run%2A> représentent la meilleure façon de créer et de lancer des tâches lorsqu’un plus grand contrôle sur la création et la planification de la tâche n’est pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="dcdff-138">The <xref:System.Threading.Tasks.Task.Run%2A> methods are the preferred way to create and start tasks when more control over the creation and scheduling of the task is not needed.</span></span>

[!code-csharp[TPL_TaskIntro#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/run1.cs#2)]
[!code-vb[TPL_TaskIntro#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/run1.vb#2)]

<span data-ttu-id="dcdff-139">Vous pouvez également utiliser la méthode <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> pour créer et lancer une tâche dans une opération.</span><span class="sxs-lookup"><span data-stu-id="dcdff-139">You can also use the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method to create and start a task in one operation.</span></span> <span data-ttu-id="dcdff-140">Utilisez cette méthode quand la création et la planification n’ont pas besoin d’être séparées et que vous avez besoin d’options supplémentaires de création de tâches ou d’utiliser un planificateur spécifique, ou lorsque vous devez obtenir l’état supplémentaire dans la tâche via sa propriété <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType>, comme indiqué dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="dcdff-140">Use this method when creation and scheduling do not have to be separated and you require additional task creation options or the use of a specific scheduler, or when you need to pass additional state into the task that you can retrieve through its <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType> property, as shown in the following example.</span></span>

[!code-csharp[TPL_TaskIntro#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/asyncstate.cs#23)]
[!code-vb[TPL_TaskIntro#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/asyncstate.vb#23)]

<span data-ttu-id="dcdff-141"><xref:System.Threading.Tasks.Task> et <xref:System.Threading.Tasks.Task%601> exposent tous deux une propriété <xref:System.Threading.Tasks.Task.Factory%2A> statique qui retourne une instance par défaut de <xref:System.Threading.Tasks.TaskFactory>, afin que vous puissiez appeler la méthode en tant que `Task.Factory.StartNew()`.</span><span class="sxs-lookup"><span data-stu-id="dcdff-141"><xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> each expose a static <xref:System.Threading.Tasks.Task.Factory%2A> property that returns a default instance of <xref:System.Threading.Tasks.TaskFactory>, so that you can call the method as `Task.Factory.StartNew()`.</span></span> <span data-ttu-id="dcdff-142">De plus, dans l’exemple suivant, parce que les tâches sont de type <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType>, chacune d’elle a une propriété <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> publique contenant le résultat du calcul.</span><span class="sxs-lookup"><span data-stu-id="dcdff-142">Also, in the following example, because the tasks are of type <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType>, they each have a public <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property that contains the result of the computation.</span></span> <span data-ttu-id="dcdff-143">Les tâches sont exécutées de façon asynchrone et peuvent se terminer dans n’importe quel ordre.</span><span class="sxs-lookup"><span data-stu-id="dcdff-143">The tasks run asynchronously and may complete in any order.</span></span> <span data-ttu-id="dcdff-144">Si la propriété <xref:System.Threading.Tasks.Task%601.Result%2A> est accessible avant la fin du calcul, la propriété bloque le thread appelant jusqu'à ce que la valeur soit disponible.</span><span class="sxs-lookup"><span data-stu-id="dcdff-144">If the <xref:System.Threading.Tasks.Task%601.Result%2A> property is accessed before the computation finishes, the property blocks the calling thread until the value is available.</span></span>

[!code-csharp[TPL_TaskIntro#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/result1.cs#4)]
[!code-vb[TPL_TaskIntro#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/result1.vb#4)]

<span data-ttu-id="dcdff-145">Pour plus d’informations, consultez [Comment : retourner une valeur à partir d’une tâche](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-145">For more information, see [How to: Return a Value from a Task](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md).</span></span>

<span data-ttu-id="dcdff-146">Lorsque vous utilisez une expression lambda pour créer le délégué d’une tâche, vous avez accès à toutes les variables qui sont visibles à ce stade dans votre code source.</span><span class="sxs-lookup"><span data-stu-id="dcdff-146">When you use a lambda expression to create a delegate, you have access to all the variables that are visible at that point in your source code.</span></span> <span data-ttu-id="dcdff-147">Toutefois, dans certains cas, notamment dans les boucles, une expression lambda ne capture pas la variable comme prévu.</span><span class="sxs-lookup"><span data-stu-id="dcdff-147">However, in some cases, most notably within loops, a lambda doesn't capture the variable as expected.</span></span> <span data-ttu-id="dcdff-148">Elle capture uniquement la valeur finale, pas la valeur qui change au cours de chaque itération.</span><span class="sxs-lookup"><span data-stu-id="dcdff-148">It only captures the final value, not the value as it mutates after each iteration.</span></span> <span data-ttu-id="dcdff-149">L'exemple de code suivant illustre le problème.</span><span class="sxs-lookup"><span data-stu-id="dcdff-149">The following example illustrates the problem.</span></span> <span data-ttu-id="dcdff-150">Il passe un compteur de boucles à une expression lambda qui instancie un objet `CustomData` et utilise le compteur de boucles comme identificateur de l'objet.</span><span class="sxs-lookup"><span data-stu-id="dcdff-150">It passes a loop counter to a lambda expression that instantiates a `CustomData` object and uses the loop counter as the object's identifier.</span></span> <span data-ttu-id="dcdff-151">Comme le montre la sortie de l'exemple, chaque objet `CustomData` a un identificateur identique.</span><span class="sxs-lookup"><span data-stu-id="dcdff-151">As the output from the example shows, each `CustomData` object has an identical identifier.</span></span>

[!code-csharp[TPL_TaskIntro#22](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/iteration1b.cs#22)]
[!code-vb[TPL_TaskIntro#22](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/iteration1b.vb#22)]

<span data-ttu-id="dcdff-152">Vous pouvez accéder à la valeur de chaque itération en fournissant un objet d’état à une tâche via son constructeur.</span><span class="sxs-lookup"><span data-stu-id="dcdff-152">You can access the value on each iteration by providing a state object to a task through its constructor.</span></span> <span data-ttu-id="dcdff-153">L'exemple suivant modifie l'exemple précédent en utilisant le compteur de boucles lors de la création de l'objet `CustomData` qui, à son tour, est passé à l'expression lambda.</span><span class="sxs-lookup"><span data-stu-id="dcdff-153">The following example modifies the previous example by using the loop counter when creating the `CustomData` object, which, in turn, is passed to the lambda expression.</span></span>  <span data-ttu-id="dcdff-154">Comme le montre la sortie de l'exemple, chaque objet `CustomData` possède maintenant un identificateur unique basé sur la valeur du compteur de boucle au moment où l'objet a été instancié.</span><span class="sxs-lookup"><span data-stu-id="dcdff-154">As the output from the example shows, each `CustomData` object now has a unique identifier based on the value of the loop counter at the time the object was instantiated.</span></span>

[!code-csharp[TPL_TaskIntro#21](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/iteration1a.cs#21)]
[!code-vb[TPL_TaskIntro#21](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/iteration1a.vb#21)]

<span data-ttu-id="dcdff-155">Cet état est passé comme argument au délégué de tâche et est accessible dans l'objet de tâche à l'aide de la propriété <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-155">This state is passed as an argument to the task delegate, and it can be accessed from the task object by using the <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType> property.</span></span>  <span data-ttu-id="dcdff-156">L'exemple suivant est une variante de l'exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="dcdff-156">The following example is a variation on the previous example.</span></span> <span data-ttu-id="dcdff-157">Il utilise la propriété <xref:System.Threading.Tasks.Task.AsyncState%2A> pour afficher des informations sur les objets `CustomData` passés à l’expression lambda.</span><span class="sxs-lookup"><span data-stu-id="dcdff-157">It uses the <xref:System.Threading.Tasks.Task.AsyncState%2A> property to display information about the `CustomData` objects passed to the lambda expression.</span></span>

[!code-csharp[TPL_TaskIntro#23](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/asyncstate.cs#23)]
[!code-vb[TPL_TaskIntro#23](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/asyncstate.vb#23)]

## <a name="task-id"></a><span data-ttu-id="dcdff-158">ID de tâche</span><span class="sxs-lookup"><span data-stu-id="dcdff-158">Task ID</span></span>

<span data-ttu-id="dcdff-159">Chaque tâche reçoit un ID d'entier qui l'identifie de façon unique dans un domaine d'application et peut être accessible à l'aide de la propriété <xref:System.Threading.Tasks.Task.Id%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-159">Every task receives an integer ID that uniquely identifies it in an application domain and can be accessed by using the <xref:System.Threading.Tasks.Task.Id%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="dcdff-160">L’ID est utile pour la consultation des informations de tâche dans les fenêtres **Piles parallèles** et **Tâches** du débogueur Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="dcdff-160">The ID is useful for viewing task information in the Visual Studio debugger **Parallel Stacks** and **Tasks** windows.</span></span> <span data-ttu-id="dcdff-161">L’ID est créé de manière différée, ce qui signifie qu’il n’est pas créé tant que cela n’est pas demandé ; par conséquent, une tâche peut avoir un ID différent à chaque exécution du programme.</span><span class="sxs-lookup"><span data-stu-id="dcdff-161">The ID is lazily created, which means that it isn't created until it is requested; therefore, a task may have a different ID every time the program is run.</span></span> <span data-ttu-id="dcdff-162">Pour plus d’informations sur l’affichage des ID de tâche dans le débogueur, consultez [Utilisation de la fenêtre Tâches](/visualstudio/debugger/using-the-tasks-window) et [Utilisation de la fenêtre Piles parallèles](/visualstudio/debugger/using-the-parallel-stacks-window).</span><span class="sxs-lookup"><span data-stu-id="dcdff-162">For more information about how to view task IDs in the debugger, see [Using the Tasks Window](/visualstudio/debugger/using-the-tasks-window) and [Using the Parallel Stacks Window](/visualstudio/debugger/using-the-parallel-stacks-window).</span></span>

## <a name="task-creation-options"></a><span data-ttu-id="dcdff-163">Options de création de tâches</span><span class="sxs-lookup"><span data-stu-id="dcdff-163">Task creation options</span></span>

<span data-ttu-id="dcdff-164">La plupart des API qui créent des tâches fournissent des surcharges qui acceptent un paramètre <xref:System.Threading.Tasks.TaskCreationOptions>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-164">Most APIs that create tasks provide overloads that accept a <xref:System.Threading.Tasks.TaskCreationOptions> parameter.</span></span> <span data-ttu-id="dcdff-165">En spécifiant l’une de ces options, vous indiquez au planificateur de tâches la manière de planifier la tâche dans le pool de threads.</span><span class="sxs-lookup"><span data-stu-id="dcdff-165">By specifying one of these options, you tell the task scheduler how to schedule the task on the thread pool.</span></span> <span data-ttu-id="dcdff-166">Le tableau suivant répertorie les différentes options de création de tâches.</span><span class="sxs-lookup"><span data-stu-id="dcdff-166">The following table lists the various task creation options.</span></span>

|<span data-ttu-id="dcdff-167">Valeur du paramètre <xref:System.Threading.Tasks.TaskCreationOptions></span><span class="sxs-lookup"><span data-stu-id="dcdff-167"><xref:System.Threading.Tasks.TaskCreationOptions> parameter value</span></span>|<span data-ttu-id="dcdff-168">Description</span><span class="sxs-lookup"><span data-stu-id="dcdff-168">Description</span></span>|
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|<xref:System.Threading.Tasks.TaskCreationOptions.None>|<span data-ttu-id="dcdff-169">Valeur par défaut lorsqu'aucune option n'est spécifiée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-169">The default when no option is specified.</span></span> <span data-ttu-id="dcdff-170">Le planificateur utilise ses méthodes heuristiques par défaut pour planifier la tâche.</span><span class="sxs-lookup"><span data-stu-id="dcdff-170">The scheduler uses its default heuristics to schedule the task.</span></span>|
|<xref:System.Threading.Tasks.TaskCreationOptions.PreferFairness>|<span data-ttu-id="dcdff-171">Spécifie que la tâche doit être planifiée afin que les tâches créées précédemment soient susceptibles d’être exécutées plus tôt et que les tâches créées ultérieurement soient susceptibles d’être exécutées plus tard.</span><span class="sxs-lookup"><span data-stu-id="dcdff-171">Specifies that the task should be scheduled so that tasks created sooner will be more likely to be executed sooner, and tasks created later will be more likely to execute later.</span></span>|
|<xref:System.Threading.Tasks.TaskCreationOptions.LongRunning>|<span data-ttu-id="dcdff-172">Spécifie que la tâche représente une opération de longue durée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-172">Specifies that the task represents a long-running operation.</span></span>|
|<xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent>|<span data-ttu-id="dcdff-173">Spécifie qu’une tâche doit être créée en tant qu’enfant attaché à la tâche actuelle, s’il en existe une.</span><span class="sxs-lookup"><span data-stu-id="dcdff-173">Specifies that a task should be created as an attached child of the current task, if one exists.</span></span> <span data-ttu-id="dcdff-174">Pour plus d'informations, consultez [Tâches enfants attachées et détachées](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-174">For more information, see [Attached and Detached Child Tasks](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md).</span></span>|
|<xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach>|<span data-ttu-id="dcdff-175">Indique que si une tâche interne spécifie l'option `AttachedToParent`, cette tâche ne sera pas une tâche enfant attachée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-175">Specifies that if an inner task specifies the `AttachedToParent` option, that task will not become an attached child task.</span></span>|
|<xref:System.Threading.Tasks.TaskCreationOptions.HideScheduler>|<span data-ttu-id="dcdff-176">Spécifie que le planificateur de tâches pour les tâches créées en appelant des méthodes comme <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> ou <xref:System.Threading.Tasks.Task%601.ContinueWith%2A?displayProperty=nameWithType> à partir d'une tâche particulière est le planificateur par défaut au lieu du planificateur sur lequel cette tâche s'exécute.</span><span class="sxs-lookup"><span data-stu-id="dcdff-176">Specifies that the task scheduler for tasks created by calling methods like <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> or <xref:System.Threading.Tasks.Task%601.ContinueWith%2A?displayProperty=nameWithType> from within a particular task is the default scheduler instead of the scheduler on which this task is running.</span></span>|

<span data-ttu-id="dcdff-177">Les options peuvent être combinées avec une opération de bits **OR**.</span><span class="sxs-lookup"><span data-stu-id="dcdff-177">The options may be combined by using a bitwise **OR** operation.</span></span> <span data-ttu-id="dcdff-178">L’exemple suivant montre une tâche avec les options <xref:System.Threading.Tasks.TaskCreationOptions.LongRunning> et <xref:System.Threading.Tasks.TaskContinuationOptions.PreferFairness>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-178">The following example shows a task that has the <xref:System.Threading.Tasks.TaskCreationOptions.LongRunning> and <xref:System.Threading.Tasks.TaskContinuationOptions.PreferFairness> option.</span></span>

[!code-csharp[TPL_TaskIntro#03](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/taskintro.cs#03)]
[!code-vb[TPL_TaskIntro#03](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/tpl_intro.vb#03)]

## <a name="tasks-threads-and-culture"></a><span data-ttu-id="dcdff-179">Tâches, threads et culture</span><span class="sxs-lookup"><span data-stu-id="dcdff-179">Tasks, threads, and culture</span></span>

<span data-ttu-id="dcdff-180">Chaque thread possède une culture associée et une culture d'interface utilisateur, respectivement définies par les propriétés <xref:System.Threading.Thread.CurrentCulture%2A?displayProperty=nameWithType> et <xref:System.Threading.Thread.CurrentUICulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-180">Each thread has an associated culture and UI culture, which is defined by the <xref:System.Threading.Thread.CurrentCulture%2A?displayProperty=nameWithType> and <xref:System.Threading.Thread.CurrentUICulture%2A?displayProperty=nameWithType> properties, respectively.</span></span> <span data-ttu-id="dcdff-181">La culture d'un thread est utilisée dans des opérations telles que la mise en forme, l'analyse, le tri et la comparaison de chaînes.</span><span class="sxs-lookup"><span data-stu-id="dcdff-181">A thread's culture is used in such operations as formatting, parsing, sorting, and string comparison.</span></span> <span data-ttu-id="dcdff-182">La culture d'interface utilisateur d'un thread est utilisée dans la recherche de ressources.</span><span class="sxs-lookup"><span data-stu-id="dcdff-182">A thread's UI culture is used in resource lookup.</span></span> <span data-ttu-id="dcdff-183">En règle générale, sauf si vous spécifiez une culture par défaut pour tous les threads dans un domaine d'application à l'aide des propriétés <xref:System.Globalization.CultureInfo.DefaultThreadCurrentCulture%2A?displayProperty=nameWithType> et <xref:System.Globalization.CultureInfo.DefaultThreadCurrentUICulture%2A?displayProperty=nameWithType>, la culture par défaut et la culture d'interface utilisateur d'un thread sont définies par la culture du système.</span><span class="sxs-lookup"><span data-stu-id="dcdff-183">Ordinarily, unless you specify a default culture for all the threads in an application domain by using the <xref:System.Globalization.CultureInfo.DefaultThreadCurrentCulture%2A?displayProperty=nameWithType> and <xref:System.Globalization.CultureInfo.DefaultThreadCurrentUICulture%2A?displayProperty=nameWithType> properties, the default culture and UI culture of a thread is defined by the system culture.</span></span> <span data-ttu-id="dcdff-184">Si vous définissez explicitement la culture d'un thread et lancez un nouveau thread, ce dernier n'hérite pas de la culture du thread appelant ; au lieu de cela, sa culture est la culture du système par défaut.</span><span class="sxs-lookup"><span data-stu-id="dcdff-184">If you explicitly set a thread's culture and launch a new thread, the new thread does not inherit the culture of the calling thread; instead, its culture is the default system culture.</span></span> <span data-ttu-id="dcdff-185">Le modèle de programmation basé sur les tâches pour les applications qui ciblent des versions du .NET Framework antérieures à .NET Framework 4.6 respecte cette pratique.</span><span class="sxs-lookup"><span data-stu-id="dcdff-185">The task-based programming model for apps that target versions of the .NET Framework prior to .NET Framework 4.6 adhere to this practice.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="dcdff-186">Notez que la culture du thread appelant dans le cadre du contexte d’une tâche s’applique aux applications qui *ciblent* .NET Framework 4.6, et non celles qui *s’exécutent sous* .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="dcdff-186">Note that the calling thread's culture as part of a task's context applies to apps that *target* the .NET Framework 4.6, not apps that *run under* the .NET Framework 4.6.</span></span> <span data-ttu-id="dcdff-187">Vous pouvez cibler une version particulière du .NET Framework quand vous créez votre projet dans Visual Studio en sélectionnant une version dans la liste déroulante située en haut de la boîte de dialogue **Nouveau projet**. Sinon, en dehors de Visual Studio, vous pouvez utiliser l’attribut <xref:System.Runtime.Versioning.TargetFrameworkAttribute>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-187">You can target a particular version of the .NET Framework when you create your project in Visual Studio by selecting that version from the dropdown list at the top of the **New Project** dialog box, or outside of Visual Studio you can use the <xref:System.Runtime.Versioning.TargetFrameworkAttribute> attribute.</span></span> <span data-ttu-id="dcdff-188">Pour les applications qui ciblent des versions du .NET Framework antérieures à .NET Framework 4.6, ou qui ne ciblent pas une version spécifique du .NET Framework, la culture d’une tâche demeure déterminée par la culture du thread sur lequel la tâche s’exécute.</span><span class="sxs-lookup"><span data-stu-id="dcdff-188">For apps that target versions of the .NET Framework prior to the .NET Framework 4.6, or that do not target a specific version of the .NET Framework, a task's culture continues to be determined by the culture of the thread on which it runs.</span></span>

<span data-ttu-id="dcdff-189">À compter des applications qui ciblent .NET Framework 4.6, la culture du thread appelant est héritée par chaque tâche, même si la tâche s’exécute de façon asynchrone sur un thread de pool de threads.</span><span class="sxs-lookup"><span data-stu-id="dcdff-189">Starting with apps that target the .NET Framework 4.6, the calling thread's culture is inherited by each task, even if the task runs asynchronously on a thread pool thread.</span></span>

<span data-ttu-id="dcdff-190">L'exemple suivant illustre cette situation de façon simple.</span><span class="sxs-lookup"><span data-stu-id="dcdff-190">The following example provides a simple illustration.</span></span> <span data-ttu-id="dcdff-191">Il utilise l’attribut <xref:System.Runtime.Versioning.TargetFrameworkAttribute> pour cibler .NET Framework 4.6 et définit la culture actuelle de l’application sur Français (France) ou, si Français (France) est déjà la culture actuelle, sur Anglais (États-Unis).</span><span class="sxs-lookup"><span data-stu-id="dcdff-191">It uses the <xref:System.Runtime.Versioning.TargetFrameworkAttribute> attribute to target the .NET Framework 4.6 and changes the app's current culture to either French (France) or, if French (France) is already the current culture, English (United States).</span></span> <span data-ttu-id="dcdff-192">Il appelle ensuite un délégué nommé `formatDelegate` qui retourne des nombres mis en forme en tant que valeurs de devise dans la nouvelle culture.</span><span class="sxs-lookup"><span data-stu-id="dcdff-192">It then invokes a delegate named `formatDelegate` that returns some numbers formatted as currency values in the new culture.</span></span> <span data-ttu-id="dcdff-193">Que le délégué exécute une tâche de manière synchrone ou asynchrone, il retourne le résultat attendu, car la culture du thread appelant est héritée par la tâche asynchrone.</span><span class="sxs-lookup"><span data-stu-id="dcdff-193">Note that whether the delegate as a task either synchronously or asynchronously, it returns the expected result because the culture of the calling thread is inherited by the asynchronous task.</span></span>

[!code-csharp[System.Globalization.CultureInfo.Class.Async#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.globalization.cultureinfo.class.async/cs/asyncculture1.cs#5)]
[!code-vb[System.Globalization.CultureInfo.Class.Async#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.globalization.cultureinfo.class.async/vb/asyncculture1.vb#5)]

<span data-ttu-id="dcdff-194">Si vous utilisez Visual Studio, vous pouvez omettre l'attribut <xref:System.Runtime.Versioning.TargetFrameworkAttribute>. Pour cela, vous devez sélectionner le .NET Framework 4.6 comme cible au moment de la création du projet dans la boîte de dialogue **Nouveau projet**.</span><span class="sxs-lookup"><span data-stu-id="dcdff-194">If you are using Visual Studio, you can omit the <xref:System.Runtime.Versioning.TargetFrameworkAttribute> attribute and instead select the .NET Framework 4.6 as the target when you create the project in the **New Project** dialog.</span></span>

<span data-ttu-id="dcdff-195">Pour la sortie qui reflète le comportement des applications ciblant des versions du .NET Framework antérieures à .NET Framework 4.6, supprimez l’attribut <xref:System.Runtime.Versioning.TargetFrameworkAttribute> du code source.</span><span class="sxs-lookup"><span data-stu-id="dcdff-195">For output that reflects the behavior of apps the target versions of the .NET Framework prior to .NET Framework 4.6, remove the <xref:System.Runtime.Versioning.TargetFrameworkAttribute> attribute from the source code.</span></span> <span data-ttu-id="dcdff-196">La sortie reflète les conventions de mise en forme de la culture du système par défaut, pas de la culture du thread appelant.</span><span class="sxs-lookup"><span data-stu-id="dcdff-196">The output will reflect the formatting conventions of the default system culture, not the culture of the calling thread.</span></span>

<span data-ttu-id="dcdff-197">Pour plus d'informations sur les tâches asynchrones et la culture, consultez la section « Culture et opérations asynchrones basées sur les tâches » dans la rubrique <xref:System.Globalization.CultureInfo>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-197">For more information on asynchronous tasks and culture, see the "Culture and asynchronous task-based operations" section in the <xref:System.Globalization.CultureInfo> topic.</span></span>

## <a name="creating-task-continuations"></a><span data-ttu-id="dcdff-198">Création de continuations de tâches</span><span class="sxs-lookup"><span data-stu-id="dcdff-198">Creating task continuations</span></span>

<span data-ttu-id="dcdff-199">Les méthodes <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> et <xref:System.Threading.Tasks.Task%601.ContinueWith%2A?displayProperty=nameWithType> vous permettent de spécifier une tâche à démarrer lorsque l’*antécédent* est terminé.</span><span class="sxs-lookup"><span data-stu-id="dcdff-199">The <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task%601.ContinueWith%2A?displayProperty=nameWithType> methods let you specify a task to start when the *antecedent task* finishes.</span></span> <span data-ttu-id="dcdff-200">Une référence à la tâche antécédente est passée au délégué de la tâche de continuation afin qu’il puisse examiner l’état de la tâche antécédente et, en récupérant la valeur de la propriété <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType>, utiliser la sortie de l’antécédent comme entrée pour la continuation.</span><span class="sxs-lookup"><span data-stu-id="dcdff-200">The delegate of the continuation task is passed a reference to the antecedent task so that it can examine the antecedent task's status and, by retrieving the value of the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property, can use the output of the antecedent as input for the continuation.</span></span>

<span data-ttu-id="dcdff-201">Dans l'exemple suivant, la tâche `getData` est démarrée par un appel à la méthode <xref:System.Threading.Tasks.TaskFactory.StartNew%60%601%28System.Func%7B%60%600%7D%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-201">In the following example, the `getData` task is started by a call to the <xref:System.Threading.Tasks.TaskFactory.StartNew%60%601%28System.Func%7B%60%600%7D%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="dcdff-202">La tâche `processData` démarre automatiquement lorsque `getData` est terminé, et `displayData` commence lorsque `processData` est terminé.</span><span class="sxs-lookup"><span data-stu-id="dcdff-202">The `processData` task is started automatically when `getData` finishes, and `displayData` is started when `processData` finishes.</span></span> <span data-ttu-id="dcdff-203">`getData` produit un tableau d'entiers, accessible à la tâche `processData` via la propriété `getData` de la tâche <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-203">`getData` produces an integer array, which is accessible to the `processData` task through the `getData` task's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="dcdff-204">La tâche `processData` traite ce tableau et retourne un résultat dont le type est déduit du type de retour de l'expression lambda passée à la méthode <xref:System.Threading.Tasks.Task%601.ContinueWith%60%601%28System.Func%7BSystem.Threading.Tasks.Task%7B%600%7D%2C%60%600%7D%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-204">The `processData` task processes that array and returns a result whose type is inferred from the return type of the lambda expression passed to the <xref:System.Threading.Tasks.Task%601.ContinueWith%60%601%28System.Func%7BSystem.Threading.Tasks.Task%7B%600%7D%2C%60%600%7D%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="dcdff-205">La tâche `displayData` s'exécute automatiquement lorsque `processData` est terminé, et l'objet <xref:System.Tuple%603> retourné par l'expression lambda `processData` est accessible à la tâche `displayData` via la propriété `processData` de la tâche <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-205">The `displayData` task executes automatically when `processData` finishes, and the <xref:System.Tuple%603> object returned by the `processData` lambda expression is accessible to the `displayData` task through the `processData` task's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="dcdff-206">La tâche `displayData` prend le résultat de la tâche `processData` et produit un résultat dont le type est déduit de façon semblable et mis à disposition du programme dans la propriété <xref:System.Threading.Tasks.Task%601.Result%2A>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-206">The `displayData` task takes the result of the `processData` task and produces a result whose type is inferred in a similar manner and which is made available to the program in the <xref:System.Threading.Tasks.Task%601.Result%2A> property.</span></span>

[!code-csharp[TPL_TaskIntro#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/continuations1.cs#5)]
[!code-vb[TPL_TaskIntro#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/continuations1.vb#5)]

<span data-ttu-id="dcdff-207">Comme <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> est une méthode d‘instance, vous pouvez concaténer les appels de méthode ensemble au lieu d‘instancier un objet <xref:System.Threading.Tasks.Task%601> pour chaque antécédent.</span><span class="sxs-lookup"><span data-stu-id="dcdff-207">Because <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> is an instance method, you can chain method calls together instead of instantiating a <xref:System.Threading.Tasks.Task%601> object for each antecedent task.</span></span> <span data-ttu-id="dcdff-208">L'exemple suivant est fonctionnellement identique à l'exemple précédent, sauf qu'il chaîne ensemble les appels à la méthode <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-208">The following example is functionally identical to the previous example, except that it chains together calls to the <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="dcdff-209">Notez que l'objet <xref:System.Threading.Tasks.Task%601> retourné par la chaîne d'appels de méthode est la tâche de continuation finale.</span><span class="sxs-lookup"><span data-stu-id="dcdff-209">Note that the <xref:System.Threading.Tasks.Task%601> object returned by the chain of method calls is the final continuation task.</span></span>

[!code-csharp[TPL_TaskIntro#24](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/continuations2.cs#24)]
[!code-vb[TPL_TaskIntro#24](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/continuations2.vb#24)]

<span data-ttu-id="dcdff-210">Les méthodes <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A> et <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A> vous permettent de continuer avec plusieurs tâches.</span><span class="sxs-lookup"><span data-stu-id="dcdff-210">The <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A> and <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A> methods enable you to continue from multiple tasks.</span></span>

<span data-ttu-id="dcdff-211">Pour plus d’informations, consultez [Chaînage des tâches à l’aide de tâches de continuation](../../../docs/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-211">For more information, see [Chaining Tasks by Using Continuation Tasks](../../../docs/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks.md).</span></span>

## <a name="creating-detached-child-tasks"></a><span data-ttu-id="dcdff-212">Création de tâches enfants détachées</span><span class="sxs-lookup"><span data-stu-id="dcdff-212">Creating detached child tasks</span></span>

<span data-ttu-id="dcdff-213">Lorsque le code utilisateur qui s'exécute dans une tâche crée une tâche sans spécifier l'option <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent>, la nouvelle tâche n'est pas synchronisée avec la tâche parent externe.</span><span class="sxs-lookup"><span data-stu-id="dcdff-213">When user code that is running in a task creates a new task and does not specify the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent> option, the new task is not synchronized with the parent task in any special way.</span></span> <span data-ttu-id="dcdff-214">Ce type de tâche non synchronisée est appelé *tâche imbriquée détachée* ou *tâche enfant détachée*.</span><span class="sxs-lookup"><span data-stu-id="dcdff-214">This type of non-synchronized task is called a *detached nested task* or *detached child task*.</span></span> <span data-ttu-id="dcdff-215">L’exemple suivant montre une tâche qui crée une tâche enfant détachée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-215">The following example shows a task that creates one detached child task.</span></span>

[!code-csharp[TPL_TaskIntro#07](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/taskintro.cs#07)]
[!code-vb[TPL_TaskIntro#07](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/tpl_intro.vb#07)]

<span data-ttu-id="dcdff-216">Notez que la tâche parent n’attend pas que la tâche enfant détachée soit terminée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-216">Note that the parent task does not wait for the detached child task to finish.</span></span>

## <a name="creating-child-tasks"></a><span data-ttu-id="dcdff-217">Création de tâches enfants</span><span class="sxs-lookup"><span data-stu-id="dcdff-217">Creating child tasks</span></span>

<span data-ttu-id="dcdff-218">Lorsque le code utilisateur qui s’exécute dans une tâche crée une tâche avec l’option <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent>, la nouvelle tâche est une *tâche enfant attachée* de la tâche d’origine, appelée tâche parent.</span><span class="sxs-lookup"><span data-stu-id="dcdff-218">When user code that is running in a task creates a task with the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent> option, the new task is known as a *attached child task* of the parent task.</span></span> <span data-ttu-id="dcdff-219">Vous pouvez utiliser l’option <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent> pour exprimer le parallélisme des tâches structuré, car la tâche parent attend implicitement que toutes les tâches enfants attachées soient terminées.</span><span class="sxs-lookup"><span data-stu-id="dcdff-219">You can use the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent> option to express structured task parallelism, because the parent task implicitly waits for all attached child tasks to finish.</span></span> <span data-ttu-id="dcdff-220">L’exemple suivant affiche une tâche parent qui crée dix tâches enfants attachées.</span><span class="sxs-lookup"><span data-stu-id="dcdff-220">The following example shows a parent task that creates ten attached child tasks.</span></span> <span data-ttu-id="dcdff-221">Notez que l'exemple appelle la méthode <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> pour attendre la fin de la tâche parente, il ne doit pas explicitement attendre la fin des tâches enfants attachées.</span><span class="sxs-lookup"><span data-stu-id="dcdff-221">Note that although the example calls the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method to wait for the parent task to finish, it does not have to explicitly wait for the attached child tasks to complete.</span></span>

[!code-csharp[TPL_TaskIntro#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/child1.cs#8)]
[!code-vb[TPL_TaskIntro#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/child1.vb#8)]

<span data-ttu-id="dcdff-222">Une tâche parent peut utiliser l’option <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> pour empêcher d’autres tâches de s’attacher à la tâche parent.</span><span class="sxs-lookup"><span data-stu-id="dcdff-222">A parent task can use the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option to prevent other tasks from attaching to the parent task.</span></span> <span data-ttu-id="dcdff-223">Pour plus d'informations, consultez [Tâches enfants attachées et détachées](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-223">For more information, see [Attached and Detached Child Tasks](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md).</span></span>

## <a name="waiting-for-tasks-to-finish"></a><span data-ttu-id="dcdff-224">Attente de fin d’exécution de tâches</span><span class="sxs-lookup"><span data-stu-id="dcdff-224">Waiting for tasks to finish</span></span>

<span data-ttu-id="dcdff-225">Les types <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> et <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> fournissent plusieurs surcharges des méthodes <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> qui vous permettent d’attendre qu’une tâche soit terminée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-225">The <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> types provide several overloads of the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> methods that enable you to wait for a task to finish.</span></span> <span data-ttu-id="dcdff-226">De plus, les surcharges des méthodes statiques <xref:System.Threading.Tasks.Task.WaitAll%2A?displayProperty=nameWithType> et <xref:System.Threading.Tasks.Task.WaitAny%2A?displayProperty=nameWithType> vous permettent d’attendre que certaines ou toutes les tâches soient terminées.</span><span class="sxs-lookup"><span data-stu-id="dcdff-226">In addition, overloads of the static <xref:System.Threading.Tasks.Task.WaitAll%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task.WaitAny%2A?displayProperty=nameWithType> methods let you wait for any or all of an array of tasks to finish.</span></span>

<span data-ttu-id="dcdff-227">En général, il est nécessaire d’attendre une tâche pour l’une des raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="dcdff-227">Typically, you would wait for a task for one of these reasons:</span></span>

- <span data-ttu-id="dcdff-228">Le thread principal dépend du résultat final calculé par une tâche.</span><span class="sxs-lookup"><span data-stu-id="dcdff-228">The main thread depends on the final result computed by a task.</span></span>

- <span data-ttu-id="dcdff-229">Vous devez gérer les exceptions pouvant être levées depuis la tâche.</span><span class="sxs-lookup"><span data-stu-id="dcdff-229">You have to handle exceptions that might be thrown from the task.</span></span>

- <span data-ttu-id="dcdff-230">L'application peut se fermer avant que l'exécution de toutes les tâches ne soit terminée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-230">The application may terminate before all tasks have completed execution.</span></span> <span data-ttu-id="dcdff-231">Par exemple, les applications de console s'arrêtent dès que l'intégralité du code synchrone dans `Main` (point d'entrée de l'application) est exécutée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-231">For example, console applications will terminate as soon as all synchronous code in `Main` (the application entry point) has executed.</span></span>

<span data-ttu-id="dcdff-232">L’exemple suivant affiche le modèle de base qui n’implique pas la gestion des exceptions.</span><span class="sxs-lookup"><span data-stu-id="dcdff-232">The following example shows the basic pattern that does not involve exception handling.</span></span>

[!code-csharp[TPL_TaskIntro#06](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/taskintro.cs#06)]
[!code-vb[TPL_TaskIntro#06](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/tpl_intro.vb#06)]

<span data-ttu-id="dcdff-233">Pour obtenir un exemple illustrant la gestion des exceptions, consultez [Gestion des exceptions](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-233">For an example that shows exception handling, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>

<span data-ttu-id="dcdff-234">Certaines surcharges vous permettent de spécifier un délai d'attente, et d'autres prennent un <xref:System.Threading.CancellationToken> supplémentaire en tant que paramètre d'entrée, afin que l'attente puisse être annulée soit par programmation, soit en réponse à l'entrée utilisateur.</span><span class="sxs-lookup"><span data-stu-id="dcdff-234">Some overloads let you specify a time-out, and others take an additional <xref:System.Threading.CancellationToken> as an input parameter, so that the wait itself can be canceled either programmatically or in response to user input.</span></span>

<span data-ttu-id="dcdff-235">Lorsque vous attendez une tâche, vous attendez implicitement tous les enfants de cette tâche créés à l'aide de l'option <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-235">When you wait for a task, you implicitly wait for all children of that task that were created by using the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="dcdff-236"><xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> est retourné immédiatement si la tâche est déjà terminée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-236"><xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> returns immediately if the task has already completed.</span></span> <span data-ttu-id="dcdff-237">Toutes les exceptions déclenchées par une tâche seront levées par une méthode <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType>, même si la méthode <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> a été appelée une fois la tâche terminée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-237">Any exceptions raised by a task will be thrown by a <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method, even if the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method was called after the task completed.</span></span>

## <a name="composing-tasks"></a><span data-ttu-id="dcdff-238">Composition des tâches</span><span class="sxs-lookup"><span data-stu-id="dcdff-238">Composing tasks</span></span>

<span data-ttu-id="dcdff-239">Les classes <xref:System.Threading.Tasks.Task> et <xref:System.Threading.Tasks.Task%601> fournissent plusieurs méthodes qui peuvent vous aider à composer plusieurs tâches pour implémenter des modèles courants et améliorer l’utilisation des fonctionnalités de langage asynchrones fournies par C#, Visual Basic et F#.</span><span class="sxs-lookup"><span data-stu-id="dcdff-239">The <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> classes provide several methods that can help you compose multiple tasks to implement common patterns and to better use the asynchronous language features that are provided by C#, Visual Basic, and F#.</span></span> <span data-ttu-id="dcdff-240">Cette section décrit les méthodes <xref:System.Threading.Tasks.Task.WhenAll%2A>, <xref:System.Threading.Tasks.Task.WhenAny%2A>, <xref:System.Threading.Tasks.Task.Delay%2A> et <xref:System.Threading.Tasks.Task.FromResult%2A>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-240">This section describes the <xref:System.Threading.Tasks.Task.WhenAll%2A>, <xref:System.Threading.Tasks.Task.WhenAny%2A>, <xref:System.Threading.Tasks.Task.Delay%2A>, and <xref:System.Threading.Tasks.Task.FromResult%2A> methods.</span></span>

### <a name="taskwhenall"></a><span data-ttu-id="dcdff-241">Task.WhenAll</span><span class="sxs-lookup"><span data-stu-id="dcdff-241">Task.WhenAll</span></span>

<span data-ttu-id="dcdff-242">La méthode <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> attend de façon asynchrone que plusieurs objets <xref:System.Threading.Tasks.Task> ou <xref:System.Threading.Tasks.Task%601> se terminent.</span><span class="sxs-lookup"><span data-stu-id="dcdff-242">The <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> method asynchronously waits for multiple <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> objects to finish.</span></span> <span data-ttu-id="dcdff-243">Elle fournit des versions surchargées qui vous permettent d’attendre des ensembles de tâches non-uniformes.</span><span class="sxs-lookup"><span data-stu-id="dcdff-243">It provides overloaded versions that enable you to wait for non-uniform sets of tasks.</span></span> <span data-ttu-id="dcdff-244">Par exemple, vous pouvez attendre que plusieurs objets <xref:System.Threading.Tasks.Task> et <xref:System.Threading.Tasks.Task%601> soient terminés à partir d'un appel de méthode.</span><span class="sxs-lookup"><span data-stu-id="dcdff-244">For example, you can wait for multiple <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> objects to complete from one method call.</span></span>

### <a name="taskwhenany"></a><span data-ttu-id="dcdff-245">Task.WhenAny</span><span class="sxs-lookup"><span data-stu-id="dcdff-245">Task.WhenAny</span></span>

<span data-ttu-id="dcdff-246">La méthode <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> attend de façon asynchrone qu'un des objets <xref:System.Threading.Tasks.Task> ou <xref:System.Threading.Tasks.Task%601> se termine.</span><span class="sxs-lookup"><span data-stu-id="dcdff-246">The <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> method asynchronously waits for one of multiple <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> objects to finish.</span></span> <span data-ttu-id="dcdff-247">À l’instar de la méthode <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType>, cette méthode fournit des versions surchargées qui vous permettent d’attendre des jeux de tâches non-uniformes.</span><span class="sxs-lookup"><span data-stu-id="dcdff-247">As in the <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> method, this method provides overloaded versions that enable you to wait for non-uniform sets of tasks.</span></span> <span data-ttu-id="dcdff-248">La méthode <xref:System.Threading.Tasks.Task.WhenAny%2A> est spécialement utile dans les scénarios suivants.</span><span class="sxs-lookup"><span data-stu-id="dcdff-248">The <xref:System.Threading.Tasks.Task.WhenAny%2A> method is especially useful in the following scenarios.</span></span>

- <span data-ttu-id="dcdff-249">Opérations redondantes.</span><span class="sxs-lookup"><span data-stu-id="dcdff-249">Redundant operations.</span></span> <span data-ttu-id="dcdff-250">Considérez un algorithme ou une opération pouvant être exécutée plusieurs façons.</span><span class="sxs-lookup"><span data-stu-id="dcdff-250">Consider an algorithm or operation that can be performed in many ways.</span></span> <span data-ttu-id="dcdff-251">Vous pouvez utiliser la méthode <xref:System.Threading.Tasks.Task.WhenAny%2A> pour sélectionner l'opération qui se termine en premier et annuler les opérations restantes.</span><span class="sxs-lookup"><span data-stu-id="dcdff-251">You can use the <xref:System.Threading.Tasks.Task.WhenAny%2A> method to select the operation that finishes first and then cancel the remaining operations.</span></span>

- <span data-ttu-id="dcdff-252">Opérations entrelacées.</span><span class="sxs-lookup"><span data-stu-id="dcdff-252">Interleaved operations.</span></span> <span data-ttu-id="dcdff-253">Vous pouvez démarrer plusieurs opérations qui doivent toutes se terminer et utiliser la méthode <xref:System.Threading.Tasks.Task.WhenAny%2A> pour traiter les résultats à mesure que chaque opération se termine.</span><span class="sxs-lookup"><span data-stu-id="dcdff-253">You can start multiple operations that must all finish and use the <xref:System.Threading.Tasks.Task.WhenAny%2A> method to process results as each operation finishes.</span></span> <span data-ttu-id="dcdff-254">Lorsqu’une opération se termine, vous pouvez démarrer une ou plusieurs autres tâches.</span><span class="sxs-lookup"><span data-stu-id="dcdff-254">After one operation finishes, you can start one or more additional tasks.</span></span>

- <span data-ttu-id="dcdff-255">Opérations limitées.</span><span class="sxs-lookup"><span data-stu-id="dcdff-255">Throttled operations.</span></span> <span data-ttu-id="dcdff-256">Vous pouvez utiliser la méthode <xref:System.Threading.Tasks.Task.WhenAny%2A> pour étendre le scénario précédent en limitant le nombre d'opérations simultanées.</span><span class="sxs-lookup"><span data-stu-id="dcdff-256">You can use the <xref:System.Threading.Tasks.Task.WhenAny%2A> method to extend the previous scenario by limiting the number of concurrent operations.</span></span>

- <span data-ttu-id="dcdff-257">Opérations expirées.</span><span class="sxs-lookup"><span data-stu-id="dcdff-257">Expired operations.</span></span> <span data-ttu-id="dcdff-258">Vous pouvez utiliser la méthode <xref:System.Threading.Tasks.Task.WhenAny%2A> pour sélectionner entre une ou plusieurs tâches et une tâche qui se termine après une heure spécifique, telle qu’une tâche retournée par la méthode <xref:System.Threading.Tasks.Task.Delay%2A>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-258">You can use the <xref:System.Threading.Tasks.Task.WhenAny%2A> method to select between one or more tasks and a task that finishes after a specific time, such as a task that is returned by the <xref:System.Threading.Tasks.Task.Delay%2A> method.</span></span> <span data-ttu-id="dcdff-259">La méthode <xref:System.Threading.Tasks.Task.Delay%2A> est décrite dans la section suivante.</span><span class="sxs-lookup"><span data-stu-id="dcdff-259">The <xref:System.Threading.Tasks.Task.Delay%2A> method is described in the following section.</span></span>

### <a name="taskdelay"></a><span data-ttu-id="dcdff-260">Task.Delay</span><span class="sxs-lookup"><span data-stu-id="dcdff-260">Task.Delay</span></span>

<span data-ttu-id="dcdff-261">La méthode <xref:System.Threading.Tasks.Task.Delay%2A?displayProperty=nameWithType> produit un objet <xref:System.Threading.Tasks.Task> qui se termine après le délai spécifié.</span><span class="sxs-lookup"><span data-stu-id="dcdff-261">The <xref:System.Threading.Tasks.Task.Delay%2A?displayProperty=nameWithType> method produces a <xref:System.Threading.Tasks.Task> object that finishes after the specified time.</span></span> <span data-ttu-id="dcdff-262">Vous pouvez utiliser cette méthode pour générer des boucles qui, occasionnellement, sondent les données, introduisent des délais, diffèrent la gestion des entrées d'utilisateur pendant une durée prédéterminé, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="dcdff-262">You can use this method to build loops that occasionally poll for data, introduce time-outs, delay the handling of user input for a predetermined time, and so on.</span></span>

### <a name="tasktfromresult"></a><span data-ttu-id="dcdff-263">Task(T).FromResult</span><span class="sxs-lookup"><span data-stu-id="dcdff-263">Task(T).FromResult</span></span>

<span data-ttu-id="dcdff-264">En utilisant la méthode <xref:System.Threading.Tasks.Task.FromResult%2A?displayProperty=nameWithType>, vous pouvez créer un objet <xref:System.Threading.Tasks.Task%601> qui contient un résultat précalculé.</span><span class="sxs-lookup"><span data-stu-id="dcdff-264">By using the <xref:System.Threading.Tasks.Task.FromResult%2A?displayProperty=nameWithType> method, you can create a <xref:System.Threading.Tasks.Task%601> object that holds a pre-computed result.</span></span> <span data-ttu-id="dcdff-265">Cette méthode est utile lorsque vous exécutez une opération asynchrone qui retourne un objet <xref:System.Threading.Tasks.Task%601>, et que le résultat de cet objet <xref:System.Threading.Tasks.Task%601> est déjà calculé.</span><span class="sxs-lookup"><span data-stu-id="dcdff-265">This method is useful when you perform an asynchronous operation that returns a <xref:System.Threading.Tasks.Task%601> object, and the result of that <xref:System.Threading.Tasks.Task%601> object is already computed.</span></span> <span data-ttu-id="dcdff-266">Pour obtenir un exemple qui utilise <xref:System.Threading.Tasks.Task.FromResult%2A> pour récupérer les résultats des opérations de téléchargement asynchrones qui sont conservées dans un cache, consultez [Procédure : création de tâches précalculées](../../../docs/standard/parallel-programming/how-to-create-pre-computed-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-266">For an example that uses <xref:System.Threading.Tasks.Task.FromResult%2A> to retrieve the results of asynchronous download operations that are held in a cache, see [How to: Create Pre-Computed Tasks](../../../docs/standard/parallel-programming/how-to-create-pre-computed-tasks.md).</span></span>

## <a name="handling-exceptions-in-tasks"></a><span data-ttu-id="dcdff-267">Gestion des exceptions des tâches</span><span class="sxs-lookup"><span data-stu-id="dcdff-267">Handling exceptions in tasks</span></span>

<span data-ttu-id="dcdff-268">Lorsqu’une tâche lève une ou plusieurs exceptions, les exceptions sont encapsulées dans une exception <xref:System.AggregateException>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-268">When a task throws one or more exceptions, the exceptions are wrapped in an <xref:System.AggregateException> exception.</span></span> <span data-ttu-id="dcdff-269">Cette exception est propagée vers le thread joint à la tâche, qui est en général le thread qui attend la fin de la tâche, ou le thread qui accède à la propriété <xref:System.Threading.Tasks.Task%601.Result%2A>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-269">That exception is propagated back to the thread that joins with the task, which is typically the thread that is waiting for the task to finish or the thread that accesses the <xref:System.Threading.Tasks.Task%601.Result%2A> property.</span></span> <span data-ttu-id="dcdff-270">Ce comportement permet d'appliquer la stratégie .NET Framework selon laquelle toutes les exceptions non gérées doivent par défaut détruire le processus.</span><span class="sxs-lookup"><span data-stu-id="dcdff-270">This behavior serves to enforce the .NET Framework policy that all unhandled exceptions by default should terminate the process.</span></span> <span data-ttu-id="dcdff-271">Le code appelant peut gérer les exceptions en utilisant l’un des éléments suivants dans un bloc `try`/`catch` :</span><span class="sxs-lookup"><span data-stu-id="dcdff-271">The calling code can handle the exceptions by using any of the following in a `try`/`catch` block:</span></span>

- <span data-ttu-id="dcdff-272">Méthode <xref:System.Threading.Tasks.Task.Wait%2A></span><span class="sxs-lookup"><span data-stu-id="dcdff-272">The <xref:System.Threading.Tasks.Task.Wait%2A> method</span></span>

- <span data-ttu-id="dcdff-273">Méthode <xref:System.Threading.Tasks.Task.WaitAll%2A></span><span class="sxs-lookup"><span data-stu-id="dcdff-273">The <xref:System.Threading.Tasks.Task.WaitAll%2A> method</span></span>

- <span data-ttu-id="dcdff-274">Méthode <xref:System.Threading.Tasks.Task.WaitAny%2A></span><span class="sxs-lookup"><span data-stu-id="dcdff-274">The <xref:System.Threading.Tasks.Task.WaitAny%2A> method</span></span>

- <span data-ttu-id="dcdff-275">La propriété <xref:System.Threading.Tasks.Task%601.Result%2A></span><span class="sxs-lookup"><span data-stu-id="dcdff-275">The <xref:System.Threading.Tasks.Task%601.Result%2A> property</span></span>

<span data-ttu-id="dcdff-276">Le thread joint peut également gérer des exceptions en accédant à la propriété <xref:System.Threading.Tasks.Task.Exception%2A> avant que la tâche ne soit récupérée par le garbage collector.</span><span class="sxs-lookup"><span data-stu-id="dcdff-276">The joining thread can also handle exceptions by accessing the <xref:System.Threading.Tasks.Task.Exception%2A> property before the task is garbage-collected.</span></span> <span data-ttu-id="dcdff-277">En accédant à cette propriété, vous empêchez l'exception non gérée de déclencher le comportement de propagation de l'exception qui termine le processus lorsque l'objet est finalisé.</span><span class="sxs-lookup"><span data-stu-id="dcdff-277">By accessing this property, you prevent the unhandled exception from triggering the exception propagation behavior that terminates the process when the object is finalized.</span></span>

<span data-ttu-id="dcdff-278">Pour plus d’informations sur les exceptions et les tâches, consultez [Gestion des exceptions](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-278">For more information about exceptions and tasks, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>

## <a name="canceling-tasks"></a><span data-ttu-id="dcdff-279">Annulation des tâches</span><span class="sxs-lookup"><span data-stu-id="dcdff-279">Canceling tasks</span></span>

<span data-ttu-id="dcdff-280">La classe <xref:System.Threading.Tasks.Task> prend en charge l'annulation coopérative et s'intègre pleinement aux classes <xref:System.Threading.CancellationTokenSource?displayProperty=nameWithType> et <xref:System.Threading.CancellationToken?displayProperty=nameWithType>, qui ont été introduites dans .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="dcdff-280">The <xref:System.Threading.Tasks.Task> class supports cooperative cancellation and is fully integrated with the <xref:System.Threading.CancellationTokenSource?displayProperty=nameWithType> and <xref:System.Threading.CancellationToken?displayProperty=nameWithType> classes, which were introduced in the .NET Framework 4.</span></span> <span data-ttu-id="dcdff-281">De nombreux constructeurs de la classe <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> prennent un objet <xref:System.Threading.CancellationToken> en tant que paramètre d'entrée.</span><span class="sxs-lookup"><span data-stu-id="dcdff-281">Many of the constructors in the <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> class take a <xref:System.Threading.CancellationToken> object as an input parameter.</span></span> <span data-ttu-id="dcdff-282">La plupart des surcharges <xref:System.Threading.Tasks.TaskFactory.StartNew%2A> et <xref:System.Threading.Tasks.Task.Run%2A> incluent également un paramètre <xref:System.Threading.CancellationToken>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-282">Many of the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A> and <xref:System.Threading.Tasks.Task.Run%2A> overloads also include a <xref:System.Threading.CancellationToken> parameter.</span></span>

<span data-ttu-id="dcdff-283">Vous pouvez créer le jeton et la requête d'annulation ultérieurement, à l'aide de la classe <xref:System.Threading.CancellationTokenSource>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-283">You can create the token, and issue the cancellation request at some later time, by using the <xref:System.Threading.CancellationTokenSource> class.</span></span> <span data-ttu-id="dcdff-284">Passez le jeton au <xref:System.Threading.Tasks.Task> en tant qu'argument et référencez ce même jeton dans votre délégué d'utilisateur, qui répond à une requête d'annulation.</span><span class="sxs-lookup"><span data-stu-id="dcdff-284">Pass the token to the <xref:System.Threading.Tasks.Task> as an argument, and also reference the same token in your user delegate, which does the work of responding to a cancellation request.</span></span>

<span data-ttu-id="dcdff-285">Pour plus d’informations, consultez [Annulation de tâches](../../../docs/standard/parallel-programming/task-cancellation.md) et [Comment : annuler une tâche et ses enfants](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-285">For more information, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md) and [How to: Cancel a Task and Its Children](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md).</span></span>

## <a name="the-taskfactory-class"></a><span data-ttu-id="dcdff-286">Classe TaskFactory</span><span class="sxs-lookup"><span data-stu-id="dcdff-286">The TaskFactory class</span></span>

<span data-ttu-id="dcdff-287">La classe <xref:System.Threading.Tasks.TaskFactory> fournit des méthodes statiques qui encapsulent des modèles communs pour la création et le lancement des tâches et des tâches de continuation.</span><span class="sxs-lookup"><span data-stu-id="dcdff-287">The <xref:System.Threading.Tasks.TaskFactory> class provides static methods that encapsulate some common patterns for creating and starting tasks and continuation tasks.</span></span>

- <span data-ttu-id="dcdff-288">Le modèle le plus commun est <xref:System.Threading.Tasks.TaskFactory.StartNew%2A>, qui crée et lance une tâche dans une instruction.</span><span class="sxs-lookup"><span data-stu-id="dcdff-288">The most common pattern is <xref:System.Threading.Tasks.TaskFactory.StartNew%2A>, which creates and starts a task in one statement.</span></span>

- <span data-ttu-id="dcdff-289">Lorsque vous créez des tâches de continuation à partir de plusieurs antécédents, utilisez la méthode <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A> ou <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A>, ou leurs équivalents de la classe <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-289">When you create continuation tasks from multiple antecedents, use the <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A> method or <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A> method or their equivalents in the <xref:System.Threading.Tasks.Task%601> class.</span></span> <span data-ttu-id="dcdff-290">Pour plus d’informations, consultez [Chaînage des tâches à l’aide de tâches de continuation](../../../docs/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-290">For more information, see [Chaining Tasks by Using Continuation Tasks](../../../docs/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks.md).</span></span>

- <span data-ttu-id="dcdff-291">Pour encapsuler le modèle de programmation asynchrone `BeginX` et des méthodes `EndX` dans une instance <xref:System.Threading.Tasks.Task> ou <xref:System.Threading.Tasks.Task%601>, utilisez les méthodes <xref:System.Threading.Tasks.TaskFactory.FromAsync%2A>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-291">To encapsulate Asynchronous Programming Model `BeginX` and `EndX` methods in a <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> instance, use the <xref:System.Threading.Tasks.TaskFactory.FromAsync%2A> methods.</span></span> <span data-ttu-id="dcdff-292">Pour plus d’informations, consultez [Bibliothèque parallèle de tâches (TPL) et programmation asynchrone](../../../docs/standard/parallel-programming/tpl-and-traditional-async-programming.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-292">For more information, see [TPL and Traditional .NET Framework Asynchronous Programming](../../../docs/standard/parallel-programming/tpl-and-traditional-async-programming.md).</span></span>

<span data-ttu-id="dcdff-293"><xref:System.Threading.Tasks.TaskFactory> par défaut est accessible en tant que propriété statique dans la classe <xref:System.Threading.Tasks.Task> ou <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-293">The default <xref:System.Threading.Tasks.TaskFactory> can be accessed as a static property on the <xref:System.Threading.Tasks.Task> class or <xref:System.Threading.Tasks.Task%601> class.</span></span> <span data-ttu-id="dcdff-294">Vous pouvez également instancier directement un <xref:System.Threading.Tasks.TaskFactory> et spécifier différentes options qui incluent une option <xref:System.Threading.CancellationToken>, <xref:System.Threading.Tasks.TaskCreationOptions>, <xref:System.Threading.Tasks.TaskContinuationOptions> ou <xref:System.Threading.Tasks.TaskScheduler>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-294">You can also instantiate a <xref:System.Threading.Tasks.TaskFactory> directly and specify various options that include a <xref:System.Threading.CancellationToken>, a <xref:System.Threading.Tasks.TaskCreationOptions> option, a <xref:System.Threading.Tasks.TaskContinuationOptions> option, or a <xref:System.Threading.Tasks.TaskScheduler>.</span></span> <span data-ttu-id="dcdff-295">Toutes les options spécifiées lors de la création de la fabrique de tâches seront appliquées à toutes les tâches qu'elle crée, à moins que la tâche <xref:System.Threading.Tasks.Task> ne soit créée à l'aide de l'énumération <xref:System.Threading.Tasks.TaskCreationOptions>, auquel cas les options de la tâche remplacent celles de la fabrique de tâches.</span><span class="sxs-lookup"><span data-stu-id="dcdff-295">Whatever options are specified when you create the task factory will be applied to all tasks that it creates, unless the <xref:System.Threading.Tasks.Task> is created by using the <xref:System.Threading.Tasks.TaskCreationOptions> enumeration, in which case the task's options override those of the task factory.</span></span>

## <a name="tasks-without-delegates"></a><span data-ttu-id="dcdff-296">Tâches sans délégués</span><span class="sxs-lookup"><span data-stu-id="dcdff-296">Tasks without delegates</span></span>

<span data-ttu-id="dcdff-297">Dans certains cas, vous pouvez utiliser un <xref:System.Threading.Tasks.Task> pour encapsuler une opération asynchrone exécutée par un composant externe au lieu de votre propre délégué utilisateur.</span><span class="sxs-lookup"><span data-stu-id="dcdff-297">In some cases, you may want to use a <xref:System.Threading.Tasks.Task> to encapsulate some asynchronous operation that is performed by an external component instead of your own user delegate.</span></span> <span data-ttu-id="dcdff-298">Si l’opération est basée sur le modèle de programmation asynchrone Begin/End, vous pouvez utiliser les méthodes <xref:System.Threading.Tasks.TaskFactory.FromAsync%2A>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-298">If the operation is based on the Asynchronous Programming Model Begin/End pattern, you can use the <xref:System.Threading.Tasks.TaskFactory.FromAsync%2A> methods.</span></span> <span data-ttu-id="dcdff-299">Si ce n’est pas le cas, vous pouvez utiliser l’objet <xref:System.Threading.Tasks.TaskCompletionSource%601> pour encapsuler l’opération dans une tâche et, de cette façon, bénéficier de certains des avantages de programmabilité <xref:System.Threading.Tasks.Task>, comme par exemple, la prise en charge de la propagation et des continuations d’exceptions.</span><span class="sxs-lookup"><span data-stu-id="dcdff-299">If that is not the case, you can use the <xref:System.Threading.Tasks.TaskCompletionSource%601> object to wrap the operation in a task and thereby gain some of the benefits of <xref:System.Threading.Tasks.Task> programmability, for example, support for exception propagation and continuations.</span></span> <span data-ttu-id="dcdff-300">Pour plus d'informations, consultez <xref:System.Threading.Tasks.TaskCompletionSource%601>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-300">For more information, see <xref:System.Threading.Tasks.TaskCompletionSource%601>.</span></span>

## <a name="custom-schedulers"></a><span data-ttu-id="dcdff-301">Planificateurs personnalisés</span><span class="sxs-lookup"><span data-stu-id="dcdff-301">Custom schedulers</span></span>

<span data-ttu-id="dcdff-302">La plupart des développeurs d'applications ou de bibliothèques ne se soucient pas du processeur sur lequel s'exécute la tâche, ni de la manière dont il synchronise son travail avec d'autres tâches ou de la façon dont il est planifié sur le <xref:System.Threading.ThreadPool?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-302">Most application or library developers do not care which processor the task runs on, how it synchronizes its work with other tasks, or how it is scheduled on the <xref:System.Threading.ThreadPool?displayProperty=nameWithType>.</span></span> <span data-ttu-id="dcdff-303">Ils demandent simplement à ce qu'il s'exécute aussi efficacement que possible sur l'ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="dcdff-303">They only require that it execute as efficiently as possible on the host computer.</span></span> <span data-ttu-id="dcdff-304">Si vous avez besoin d’un contrôle plus affiné sur les détails de la planification, la bibliothèque parallèle de tâches vous permet de configurer des paramètres dans le planificateur de tâches par défaut et vous permet même de fournir un planificateur personnalisé.</span><span class="sxs-lookup"><span data-stu-id="dcdff-304">If you require more fine-grained control over the scheduling details, the Task Parallel Library lets you configure some settings on the default task scheduler, and even lets you supply a custom scheduler.</span></span> <span data-ttu-id="dcdff-305">Pour plus d'informations, consultez <xref:System.Threading.Tasks.TaskScheduler>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-305">For more information, see <xref:System.Threading.Tasks.TaskScheduler>.</span></span>

## <a name="related-data-structures"></a><span data-ttu-id="dcdff-306">Structures de données associées</span><span class="sxs-lookup"><span data-stu-id="dcdff-306">Related data structures</span></span>

<span data-ttu-id="dcdff-307">La bibliothèque parallèle de tâches possède plusieurs nouveaux types publics qui sont utiles dans les scénarios parallèles et séquentiels.</span><span class="sxs-lookup"><span data-stu-id="dcdff-307">The TPL has several new public types that are useful in both parallel and sequential scenarios.</span></span> <span data-ttu-id="dcdff-308">Ces derniers incluent plusieurs classes de collection thread-safe, rapides et évolutives dans l'espace de noms <xref:System.Collections.Concurrent?displayProperty=nameWithType>, et plusieurs nouveaux types de synchronisation, tels que <xref:System.Threading.Semaphore?displayProperty=nameWithType> et <xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType>, qui sont plus efficaces que leurs prédécesseurs pour certains genres de charges de travail.</span><span class="sxs-lookup"><span data-stu-id="dcdff-308">These include several thread-safe, fast and scalable collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace, and several new synchronization types, for example, <xref:System.Threading.Semaphore?displayProperty=nameWithType> and <xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType>, which are more efficient than their predecessors for specific kinds of workloads.</span></span> <span data-ttu-id="dcdff-309">D'autres types nouveaux dans .NET Framework 4, tels que <xref:System.Threading.Barrier?displayProperty=nameWithType> et <xref:System.Threading.SpinLock?displayProperty=nameWithType>, fournissent des fonctionnalités qui n'étaient pas disponibles dans les versions précédentes.</span><span class="sxs-lookup"><span data-stu-id="dcdff-309">Other new types in the .NET Framework 4, for example, <xref:System.Threading.Barrier?displayProperty=nameWithType> and <xref:System.Threading.SpinLock?displayProperty=nameWithType>, provide functionality that was not available in earlier releases.</span></span> <span data-ttu-id="dcdff-310">Pour plus d’informations, consultez [Structures de données pour la programmation parallèle](../../../docs/standard/parallel-programming/data-structures-for-parallel-programming.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-310">For more information, see [Data Structures for Parallel Programming](../../../docs/standard/parallel-programming/data-structures-for-parallel-programming.md).</span></span>

## <a name="custom-task-types"></a><span data-ttu-id="dcdff-311">Types de tâches personnalisés</span><span class="sxs-lookup"><span data-stu-id="dcdff-311">Custom task types</span></span>

<span data-ttu-id="dcdff-312">Nous vous recommandons de ne pas hériter de <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> ou <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-312">We recommend that you do not inherit from <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> or <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="dcdff-313">Nous vous recommandons d'utiliser plutôt la propriété <xref:System.Threading.Tasks.Task.AsyncState%2A> pour associer d'autres données ou états à un objet <xref:System.Threading.Tasks.Task> ou <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-313">Instead, we recommend that you use the <xref:System.Threading.Tasks.Task.AsyncState%2A> property to associate additional data or state with a <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> object.</span></span> <span data-ttu-id="dcdff-314">Vous pouvez également utiliser des méthodes d'extension pour étendre les fonctionnalités des classes <xref:System.Threading.Tasks.Task> et <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-314">You can also use extension methods to extend the functionality of the <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> classes.</span></span> <span data-ttu-id="dcdff-315">Pour plus d’informations sur les méthodes d’extension, consultez [Méthodes d’extension](../../csharp/programming-guide/classes-and-structs/extension-methods.md) et [Méthodes d’extension](../../visual-basic/programming-guide/language-features/procedures/extension-methods.md).</span><span class="sxs-lookup"><span data-stu-id="dcdff-315">For more information about extension methods, see [Extension Methods](../../csharp/programming-guide/classes-and-structs/extension-methods.md) and [Extension Methods](../../visual-basic/programming-guide/language-features/procedures/extension-methods.md).</span></span>

<span data-ttu-id="dcdff-316">If you must inherit from <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601>, you cannot use <xref:System.Threading.Tasks.Task.Run%2A>, or the <xref:System.Threading.Tasks.TaskFactory?displayProperty=nameWithType>, <xref:System.Threading.Tasks.TaskFactory%601?displayProperty=nameWithType>, or <xref:System.Threading.Tasks.TaskCompletionSource%601?displayProperty=nameWithType> classes to create instances of your custom task type because these mechanisms create only <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> objects.</span><span class="sxs-lookup"><span data-stu-id="dcdff-316">If you must inherit from <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601>, you cannot use <xref:System.Threading.Tasks.Task.Run%2A>, or the <xref:System.Threading.Tasks.TaskFactory?displayProperty=nameWithType>, <xref:System.Threading.Tasks.TaskFactory%601?displayProperty=nameWithType>, or <xref:System.Threading.Tasks.TaskCompletionSource%601?displayProperty=nameWithType> classes to create instances of your custom task type because these mechanisms create only <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> objects.</span></span> <span data-ttu-id="dcdff-317">En outre, vous ne pouvez pas utiliser les mécanismes de continuation des tâches fournis par <xref:System.Threading.Tasks.Task>, <xref:System.Threading.Tasks.Task%601><xref:System.Threading.Tasks.TaskFactory> et <xref:System.Threading.Tasks.TaskFactory%601> pour créer des instances de votre type de tâche personnalisé parce que ces mécanismes créent également uniquement des objets <xref:System.Threading.Tasks.Task> et <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-317">In addition, you cannot use the task continuation mechanisms that are provided by <xref:System.Threading.Tasks.Task>, <xref:System.Threading.Tasks.Task%601>, <xref:System.Threading.Tasks.TaskFactory>, and  <xref:System.Threading.Tasks.TaskFactory%601> to create instances of your custom task type because these mechanisms also create only <xref:System.Threading.Tasks.Task> and  <xref:System.Threading.Tasks.Task%601> objects.</span></span>

## <a name="related-topics"></a><span data-ttu-id="dcdff-318">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="dcdff-318">Related topics</span></span>

|<span data-ttu-id="dcdff-319">Titre</span><span class="sxs-lookup"><span data-stu-id="dcdff-319">Title</span></span>|<span data-ttu-id="dcdff-320">Description</span><span class="sxs-lookup"><span data-stu-id="dcdff-320">Description</span></span>|
|-|-|
|[<span data-ttu-id="dcdff-321">Chaînage des tâches à l’aide de tâches de continuation</span><span class="sxs-lookup"><span data-stu-id="dcdff-321">Chaining Tasks by Using Continuation Tasks</span></span>](../../../docs/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks.md)|<span data-ttu-id="dcdff-322">Décrit le fonctionnement des continuations.</span><span class="sxs-lookup"><span data-stu-id="dcdff-322">Describes how continuations work.</span></span>|
|[<span data-ttu-id="dcdff-323">Tâches enfants attachées et détachées</span><span class="sxs-lookup"><span data-stu-id="dcdff-323">Attached and Detached Child Tasks</span></span>](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md)|<span data-ttu-id="dcdff-324">Décrit la différence entre les tâches enfants attachées et les tâches enfants détachées.</span><span class="sxs-lookup"><span data-stu-id="dcdff-324">Describes the difference between attached and detached child tasks.</span></span>|
|[<span data-ttu-id="dcdff-325">Annulation de tâches</span><span class="sxs-lookup"><span data-stu-id="dcdff-325">Task Cancellation</span></span>](../../../docs/standard/parallel-programming/task-cancellation.md)|<span data-ttu-id="dcdff-326">Décrit la prise en charge de l'annulation intégrée dans l'objet <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-326">Describes the cancellation support that is built into the <xref:System.Threading.Tasks.Task> object.</span></span>|
|[<span data-ttu-id="dcdff-327">Gestion des exceptions</span><span class="sxs-lookup"><span data-stu-id="dcdff-327">Exception Handling</span></span>](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md)|<span data-ttu-id="dcdff-328">Décrit comment les exceptions sur les threads simultanés sont gérées.</span><span class="sxs-lookup"><span data-stu-id="dcdff-328">Describes how exceptions on concurrent threads are handled.</span></span>|
|[<span data-ttu-id="dcdff-329">Comment : utiliser parallel_invoke pour exécuter des opérations parallèles</span><span class="sxs-lookup"><span data-stu-id="dcdff-329">How to: Use Parallel.Invoke to Execute Parallel Operations</span></span>](../../../docs/standard/parallel-programming/how-to-use-parallel-invoke-to-execute-parallel-operations.md)|<span data-ttu-id="dcdff-330">Explique comment utiliser <xref:System.Threading.Tasks.Parallel.Invoke%2A>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-330">Describes how to use <xref:System.Threading.Tasks.Parallel.Invoke%2A>.</span></span>|
|[<span data-ttu-id="dcdff-331">Comment : retourner une valeur à partir d’une tâche</span><span class="sxs-lookup"><span data-stu-id="dcdff-331">How to: Return a Value from a Task</span></span>](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md)|<span data-ttu-id="dcdff-332">Décrit comment retourner des valeurs à partir de tâches.</span><span class="sxs-lookup"><span data-stu-id="dcdff-332">Describes how to return values from tasks.</span></span>|
|[<span data-ttu-id="dcdff-333">Comment : annuler une tâche et ses enfants</span><span class="sxs-lookup"><span data-stu-id="dcdff-333">How to: Cancel a Task and Its Children</span></span>](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md)|<span data-ttu-id="dcdff-334">Décrit comment annuler des tâches.</span><span class="sxs-lookup"><span data-stu-id="dcdff-334">Describes how to cancel tasks.</span></span>|
|[<span data-ttu-id="dcdff-335">Comment : créer des tâches précalculées</span><span class="sxs-lookup"><span data-stu-id="dcdff-335">How to: Create Pre-Computed Tasks</span></span>](../../../docs/standard/parallel-programming/how-to-create-pre-computed-tasks.md)|<span data-ttu-id="dcdff-336">Décrit comment utiliser la méthode <xref:System.Threading.Tasks.Task.FromResult%2A?displayProperty=nameWithType> pour récupérer les résultats d'opérations de téléchargement asynchrones qui sont conservées dans un cache.</span><span class="sxs-lookup"><span data-stu-id="dcdff-336">Describes how to use the <xref:System.Threading.Tasks.Task.FromResult%2A?displayProperty=nameWithType> method to retrieve the results of asynchronous download operations that are held in a cache.</span></span>|
|[<span data-ttu-id="dcdff-337">Comment : parcourir une arborescence binaire avec des tâches parallèles</span><span class="sxs-lookup"><span data-stu-id="dcdff-337">How to: Traverse a Binary Tree with Parallel Tasks</span></span>](../../../docs/standard/parallel-programming/how-to-traverse-a-binary-tree-with-parallel-tasks.md)|<span data-ttu-id="dcdff-338">Décrit comment utiliser des tâches pour parcourir un arbre binaire.</span><span class="sxs-lookup"><span data-stu-id="dcdff-338">Describes how to use tasks to traverse a binary tree.</span></span>|
|[<span data-ttu-id="dcdff-339">Comment : désencapsuler une tâche imbriquée</span><span class="sxs-lookup"><span data-stu-id="dcdff-339">How to: Unwrap a Nested Task</span></span>](../../../docs/standard/parallel-programming/how-to-unwrap-a-nested-task.md)|<span data-ttu-id="dcdff-340">Montre également comment utiliser la méthode d'extension <xref:System.Threading.Tasks.TaskExtensions.Unwrap%2A>.</span><span class="sxs-lookup"><span data-stu-id="dcdff-340">Demonstrates how to use the <xref:System.Threading.Tasks.TaskExtensions.Unwrap%2A> extension method.</span></span>|
|[<span data-ttu-id="dcdff-341">Parallélisme de données</span><span class="sxs-lookup"><span data-stu-id="dcdff-341">Data Parallelism</span></span>](../../../docs/standard/parallel-programming/data-parallelism-task-parallel-library.md)|<span data-ttu-id="dcdff-342">Décrit comment utiliser <xref:System.Threading.Tasks.Parallel.For%2A> et <xref:System.Threading.Tasks.Parallel.ForEach%2A> pour créer des boucles parallèles sur des données.</span><span class="sxs-lookup"><span data-stu-id="dcdff-342">Describes how to use <xref:System.Threading.Tasks.Parallel.For%2A> and <xref:System.Threading.Tasks.Parallel.ForEach%2A> to create parallel loops over data.</span></span>|
|[<span data-ttu-id="dcdff-343">Programmation parallèle</span><span class="sxs-lookup"><span data-stu-id="dcdff-343">Parallel Programming</span></span>](../../../docs/standard/parallel-programming/index.md)|<span data-ttu-id="dcdff-344">Nœud de niveau supérieur pour la programmation parallèle .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="dcdff-344">Top level node for .NET Framework parallel programming.</span></span>|

## <a name="see-also"></a><span data-ttu-id="dcdff-345">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="dcdff-345">See also</span></span>

- [<span data-ttu-id="dcdff-346">Programmation parallèle</span><span class="sxs-lookup"><span data-stu-id="dcdff-346">Parallel Programming</span></span>](../../../docs/standard/parallel-programming/index.md)
- [<span data-ttu-id="dcdff-347">Exemples de programmation parallèle avec .NET Framework</span><span class="sxs-lookup"><span data-stu-id="dcdff-347">Samples for Parallel Programming with the .NET Framework</span></span>](https://code.msdn.microsoft.com/Samples-for-Parallel-b4b76364)
