---
title: Tâches enfants attachées et détachées
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- tasks, child tasks
ms.assetid: c95788bf-90a6-4e96-b7bc-58e36a228cc5
ms.openlocfilehash: 8f15ee4f136e3e2df1a4e1c7683467f2a4bc9bc0
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/15/2020
ms.locfileid: "73123186"
---
# <a name="attached-and-detached-child-tasks"></a><span data-ttu-id="bb82b-102">Tâches enfants attachées et détachées</span><span class="sxs-lookup"><span data-stu-id="bb82b-102">Attached and Detached Child Tasks</span></span>
<span data-ttu-id="bb82b-103">Une *tâche enfant* (ou *tâche imbriquée*) est une instance <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> créée dans le délégué utilisateur d’une autre tâche, appelée *tâche parent*.</span><span class="sxs-lookup"><span data-stu-id="bb82b-103">A *child task* (or *nested task*) is a <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> instance that is created in the user delegate of another task, which is known as the *parent task*.</span></span> <span data-ttu-id="bb82b-104">Une tâche enfant peut être détachée ou attachée.</span><span class="sxs-lookup"><span data-stu-id="bb82b-104">A child task can be either detached or attached.</span></span> <span data-ttu-id="bb82b-105">Une *tâche enfant détachée* est une tâche qui s’exécute indépendamment de son parent.</span><span class="sxs-lookup"><span data-stu-id="bb82b-105">A *detached child task* is a task that executes independently of its parent.</span></span> <span data-ttu-id="bb82b-106">Une *tâche enfant attachée* est une tâche imbriquée créée avec l’option <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> dont le parent ne l’empêche pas explicitement ou par défaut d’être attachée.</span><span class="sxs-lookup"><span data-stu-id="bb82b-106">An *attached child task* is a nested task that is created with the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option whose parent does not explicitly or by default prohibit it from being attached.</span></span> <span data-ttu-id="bb82b-107">Une tâche peut créer autant de tâches enfants attachées et détachées que le permettent les ressources système.</span><span class="sxs-lookup"><span data-stu-id="bb82b-107">A task may create any number of attached and detached child tasks, limited only by system resources.</span></span>  
  
 <span data-ttu-id="bb82b-108">Le tableau suivant répertorie les principales différences entre les deux types de tâches enfants.</span><span class="sxs-lookup"><span data-stu-id="bb82b-108">The following table lists the basic differences between the two kinds of child tasks.</span></span>  
  
|<span data-ttu-id="bb82b-109">Category</span><span class="sxs-lookup"><span data-stu-id="bb82b-109">Category</span></span>|<span data-ttu-id="bb82b-110">Tâches enfants détachées</span><span class="sxs-lookup"><span data-stu-id="bb82b-110">Detached child tasks</span></span>|<span data-ttu-id="bb82b-111">Tâches enfants attachées</span><span class="sxs-lookup"><span data-stu-id="bb82b-111">Attached child tasks</span></span>|  
|--------------|--------------------------|--------------------------|  
|<span data-ttu-id="bb82b-112">Le parent attend que les tâches enfants soient terminées.</span><span class="sxs-lookup"><span data-stu-id="bb82b-112">Parent waits for child tasks to complete.</span></span>|<span data-ttu-id="bb82b-113">Non </span><span class="sxs-lookup"><span data-stu-id="bb82b-113">No</span></span>|<span data-ttu-id="bb82b-114">Oui</span><span class="sxs-lookup"><span data-stu-id="bb82b-114">Yes</span></span>|  
|<span data-ttu-id="bb82b-115">Le parent propage les exceptions levées par les tâches enfants.</span><span class="sxs-lookup"><span data-stu-id="bb82b-115">Parent propagates exceptions thrown by child tasks.</span></span>|<span data-ttu-id="bb82b-116">Non </span><span class="sxs-lookup"><span data-stu-id="bb82b-116">No</span></span>|<span data-ttu-id="bb82b-117">Oui</span><span class="sxs-lookup"><span data-stu-id="bb82b-117">Yes</span></span>|  
|<span data-ttu-id="bb82b-118">Le statut du parent dépend du statut de l'enfant.</span><span class="sxs-lookup"><span data-stu-id="bb82b-118">Status of parent depends on status of child.</span></span>|<span data-ttu-id="bb82b-119">Non </span><span class="sxs-lookup"><span data-stu-id="bb82b-119">No</span></span>|<span data-ttu-id="bb82b-120">Oui</span><span class="sxs-lookup"><span data-stu-id="bb82b-120">Yes</span></span>|  
  
 <span data-ttu-id="bb82b-121">Dans la plupart des scénarios, nous vous recommandons d’utiliser des tâches enfants détachées, car leurs relations avec les autres tâches sont moins complexes.</span><span class="sxs-lookup"><span data-stu-id="bb82b-121">In most scenarios, we recommend that you use detached child tasks, because their relationships with other tasks are less complex.</span></span> <span data-ttu-id="bb82b-122">C'est pourquoi les tâches créées à l'intérieur de tâches parentes sont détachées par défaut et vous devez spécifier explicitement l'option <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> pour créer une tâche enfant attachée.</span><span class="sxs-lookup"><span data-stu-id="bb82b-122">That is why tasks created inside parent tasks are detached by default, and you must explicitly specify the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option to create an attached child task.</span></span>  
  
## <a name="detached-child-tasks"></a><span data-ttu-id="bb82b-123">Tâches enfants détachées</span><span class="sxs-lookup"><span data-stu-id="bb82b-123">Detached child tasks</span></span>  
 <span data-ttu-id="bb82b-124">Même si une tâche enfant est créée par une tâche parente, par défaut, elle est indépendante de celle-ci.</span><span class="sxs-lookup"><span data-stu-id="bb82b-124">Although a child task is created by a parent task, by default it is independent of the parent task.</span></span> <span data-ttu-id="bb82b-125">Dans l'exemple suivant, une tâche parente crée une tâche enfant simple.</span><span class="sxs-lookup"><span data-stu-id="bb82b-125">In the following example, a parent task creates one simple child task.</span></span> <span data-ttu-id="bb82b-126">Si vous exécutez l'exemple de code plusieurs fois, vous pouvez remarquer que la sortie de l'exemple diffère de celle indiquée et éventuellement d'une exécution à l'autre.</span><span class="sxs-lookup"><span data-stu-id="bb82b-126">If you run the example code multiple times, you may notice that the output from the example differs from that shown, and also that the output may change each time you run the code.</span></span> <span data-ttu-id="bb82b-127">En effet, la tâche parente et les tâches enfants s'exécutent indépendamment les unes des autres ; l'enfant est une tâche détachée.</span><span class="sxs-lookup"><span data-stu-id="bb82b-127">This occurs because the parent task and child tasks execute independently of each other; the child is a detached task.</span></span> <span data-ttu-id="bb82b-128">L'exemple attend seulement que la tâche parente se termine, et la tâche enfant ne peut pas s'exécuter ou s'achever avant la fin de l'application console.</span><span class="sxs-lookup"><span data-stu-id="bb82b-128">The example waits only for the parent task to complete, and the child task may not execute or complete before the console app terminates.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/nested1.cs#1)]
 [!code-vb[TPL_ChildTasks#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/nested1.vb#1)]  
  
 <span data-ttu-id="bb82b-129">Si la tâche enfant est représentée par un objet <xref:System.Threading.Tasks.Task%601> plutôt que par un objet <xref:System.Threading.Tasks.Task>, vous pouvez vous assurer que la tâche parente attend la fin de la tâche enfant en accédant à la propriété <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> de celle-ci, même s'il s'agit d'une tâche enfant détachée.</span><span class="sxs-lookup"><span data-stu-id="bb82b-129">If the child task is represented by a <xref:System.Threading.Tasks.Task%601> object rather than a <xref:System.Threading.Tasks.Task> object, you can ensure that the parent task will wait for the child to complete by accessing the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the child even if it is a detached child task.</span></span> <span data-ttu-id="bb82b-130">La propriété <xref:System.Threading.Tasks.Task%601.Result%2A> bloque jusqu’à ce que sa tâche se termine, comme le montre l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="bb82b-130">The <xref:System.Threading.Tasks.Task%601.Result%2A> property blocks until its task completes, as the following example shows.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/childtasks.cs#4)]
 [!code-vb[TPL_ChildTasks#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/tpl_childtasks.vb#4)]  
  
## <a name="attached-child-tasks"></a><span data-ttu-id="bb82b-131">Tâches enfants attachées</span><span class="sxs-lookup"><span data-stu-id="bb82b-131">Attached child tasks</span></span>  
 <span data-ttu-id="bb82b-132">Contrairement aux tâches enfants détachées, les tâches enfants attachées sont étroitement synchronisées avec le parent.</span><span class="sxs-lookup"><span data-stu-id="bb82b-132">Unlike detached child tasks, attached child tasks are closely synchronized with the parent.</span></span> <span data-ttu-id="bb82b-133">Vous pouvez convertir la tâche enfant détachée dans l'exemple précédent en tâche enfant attachée à l'aide de l'option <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> dans l'instruction de création de tâche, comme illustré dans l'exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="bb82b-133">You can change the detached child task in the previous example to an attached child task by using the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option in the task creation statement, as shown in the following example.</span></span> <span data-ttu-id="bb82b-134">Dans ce code, la tâche enfant attachée se termine avant son parent.</span><span class="sxs-lookup"><span data-stu-id="bb82b-134">In this code, the attached child task completes before its parent.</span></span> <span data-ttu-id="bb82b-135">La sortie de l'exemple est donc la même chaque fois que vous exécutez le code.</span><span class="sxs-lookup"><span data-stu-id="bb82b-135">As a result, the output from the example is the same each time you run the code.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/child1.cs#2)]
 [!code-vb[TPL_ChildTasks#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/child1.vb#2)]  
  
 <span data-ttu-id="bb82b-136">Vous pouvez utiliser des tâches enfants attachées pour créer des graphiques étroitement synchronisés d’opérations asynchrones.</span><span class="sxs-lookup"><span data-stu-id="bb82b-136">You can use attached child tasks to create tightly synchronized graphs of asynchronous operations.</span></span>  
  
 <span data-ttu-id="bb82b-137">Toutefois, une tâche enfant ne peut s’attacher à son parent que si celui-ci n’interdit pas les tâches enfants attachées.</span><span class="sxs-lookup"><span data-stu-id="bb82b-137">However, a child task can attach to its parent only if its parent does not prohibit attached child tasks.</span></span> <span data-ttu-id="bb82b-138">Pour empêcher explicitement l’attachement de tâches enfants à une tâche parente, vous devez spécifier l’option <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> dans le constructeur de classe de la tâche parente ou la méthode <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="bb82b-138">Parent tasks can explicitly prevent child tasks from attaching to them by specifying the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option in the parent task's class constructor or the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="bb82b-139">Pour une interdiction implicite, vous devez créer les tâches parentes en appelant la méthode <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="bb82b-139">Parent tasks implicitly prevent child tasks from attaching to them if they are created by calling the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="bb82b-140">L'exemple suivant illustre ce comportement.</span><span class="sxs-lookup"><span data-stu-id="bb82b-140">The following example illustrates this.</span></span> <span data-ttu-id="bb82b-141">Il est identique à l’exemple précédent, même si la tâche parente est créée en appelant la méthode <xref:System.Threading.Tasks.Task.Run%28System.Action%29?displayProperty=nameWithType> plutôt que la méthode <xref:System.Threading.Tasks.TaskFactory.StartNew%28System.Action%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="bb82b-141">It is identical to the previous example, except that the parent task is created by calling the <xref:System.Threading.Tasks.Task.Run%28System.Action%29?displayProperty=nameWithType> method rather than the <xref:System.Threading.Tasks.TaskFactory.StartNew%28System.Action%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="bb82b-142">Étant donné que la tâche enfant n’est pas en mesure de s’attacher à son parent, la sortie de l’exemple est imprévisible.</span><span class="sxs-lookup"><span data-stu-id="bb82b-142">Because the child task is not able to attach to its parent, the output from the example is unpredictable.</span></span> <span data-ttu-id="bb82b-143">Étant donné que les options de création de tâches par défaut pour les surcharges <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> incluent <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, cet exemple est fonctionnellement équivalent au premier exemple dans la section « Tâches enfants détachées ».</span><span class="sxs-lookup"><span data-stu-id="bb82b-143">Because the default task creation options for the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> overloads include <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, this example is functionally equivalent to the first example in the "Detached child tasks" section.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/child1a.cs#3)]
 [!code-vb[TPL_ChildTasks#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/child1a.vb#3)]  
  
## <a name="exceptions-in-child-tasks"></a><span data-ttu-id="bb82b-144">Exceptions dans les tâches enfants</span><span class="sxs-lookup"><span data-stu-id="bb82b-144">Exceptions in child tasks</span></span>  
 <span data-ttu-id="bb82b-145">Si une tâche enfant détachée lève une exception, celle-ci doit être observée ou gérée directement dans la tâche parente, comme dans le cas de n’importe quelle tâche non imbriquée.</span><span class="sxs-lookup"><span data-stu-id="bb82b-145">If a detached child task throws an exception, that exception must be observed or handled directly in the parent task just as with any non-nested task.</span></span> <span data-ttu-id="bb82b-146">Si une tâche enfant attachée lève une exception, celle-ci est automatiquement propagée vers la tâche parente, puis vers le thread qui attend ou essaie d’accéder à la propriété <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> de la tâche.</span><span class="sxs-lookup"><span data-stu-id="bb82b-146">If an attached child task throws an exception, the exception is automatically propagated to the parent task and back to the thread that waits or tries to access the task's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="bb82b-147">Ainsi, en utilisant des tâches enfants attachées, vous pouvez gérer toutes les exceptions en un seul point dans l’appel à <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> sur le thread appelant.</span><span class="sxs-lookup"><span data-stu-id="bb82b-147">Therefore, by using attached child tasks, you can handle all exceptions at just one point in the call to <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> on the calling thread.</span></span> <span data-ttu-id="bb82b-148">Pour plus d’informations, consultez l’article [Gestion des exceptions](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="bb82b-148">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>  
  
## <a name="cancellation-and-child-tasks"></a><span data-ttu-id="bb82b-149">Annulation et tâches enfants</span><span class="sxs-lookup"><span data-stu-id="bb82b-149">Cancellation and child tasks</span></span>  
 <span data-ttu-id="bb82b-150">L'annulation de tâche est coopérative.</span><span class="sxs-lookup"><span data-stu-id="bb82b-150">Task cancellation is cooperative.</span></span> <span data-ttu-id="bb82b-151">Autrement dit, pour être annulable, chaque tâche enfant attachée ou détachée doit surveiller l'état du jeton d'annulation.</span><span class="sxs-lookup"><span data-stu-id="bb82b-151">That is, to be cancelable, every attached or detached child task must monitor the status of the cancellation token.</span></span> <span data-ttu-id="bb82b-152">Pour annuler un parent et tous ses enfants à l'aide d'une demande d'annulation, vous passez le même jeton en tant qu'argument à toutes les tâches et fournissez dans chaque tâche la logique pour répondre à la demande.</span><span class="sxs-lookup"><span data-stu-id="bb82b-152">If you want to cancel a parent and all its children by using one cancellation request, you pass the same token as an argument to all tasks and provide in each task the logic to respond to the request in each task.</span></span> <span data-ttu-id="bb82b-153">Pour plus d’informations, consultez [Annulation de tâches](../../../docs/standard/parallel-programming/task-cancellation.md) et [Comment : annuler une tâche et ses enfants](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md).</span><span class="sxs-lookup"><span data-stu-id="bb82b-153">For more information, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md) and [How to: Cancel a Task and Its Children](../../../docs/standard/parallel-programming/how-to-cancel-a-task-and-its-children.md).</span></span>  
  
### <a name="when-the-parent-cancels"></a><span data-ttu-id="bb82b-154">Annulation d'un parent</span><span class="sxs-lookup"><span data-stu-id="bb82b-154">When the parent cancels</span></span>  
 <span data-ttu-id="bb82b-155">Si un parent s’annule avant le démarrage de sa tâche enfant, celle-ci ne démarre jamais.</span><span class="sxs-lookup"><span data-stu-id="bb82b-155">If a parent cancels itself before its child task is started, the child never starts.</span></span> <span data-ttu-id="bb82b-156">Si un parent s’annule une fois que sa tâche enfant a démarré, celle-ci s’exécute jusqu’à son terme sauf si elle possède sa propre logique d’annulation.</span><span class="sxs-lookup"><span data-stu-id="bb82b-156">If a parent cancels itself after its child task has already started, the child runs to completion unless it has its own cancellation logic.</span></span> <span data-ttu-id="bb82b-157">Pour plus d'informations, consultez [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md).</span><span class="sxs-lookup"><span data-stu-id="bb82b-157">For more information, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md).</span></span>  
  
### <a name="when-a-detached-child-task-cancels"></a><span data-ttu-id="bb82b-158">Annulation d’une tâche enfant détachée</span><span class="sxs-lookup"><span data-stu-id="bb82b-158">When a detached child task cancels</span></span>  
 <span data-ttu-id="bb82b-159">Si une tâche enfant détachée s’annule à l’aide du jeton passé au parent et que celui-ci n’attend pas la tâche enfant, aucune exception n’est propagée, car l’exception est traitée comme une annulation de coopération bénigne.</span><span class="sxs-lookup"><span data-stu-id="bb82b-159">If a detached child task cancels itself by using the same token that was passed to the parent, and the parent does not wait for the child task, no exception is propagated, because the exception is treated as benign cooperation cancellation.</span></span> <span data-ttu-id="bb82b-160">Ce comportement est identique à celui de toute tâche de niveau supérieur.</span><span class="sxs-lookup"><span data-stu-id="bb82b-160">This behavior is the same as that of any top-level task.</span></span>  
  
### <a name="when-an-attached-child-task-cancels"></a><span data-ttu-id="bb82b-161">Annulation d’une tâche enfant attachée</span><span class="sxs-lookup"><span data-stu-id="bb82b-161">When an attached child task cancels</span></span>  
 <span data-ttu-id="bb82b-162">Quand une tâche enfant attachée s’annule à l’aide du jeton passé à sa tâche parente, une <xref:System.Threading.Tasks.TaskCanceledException> est propagée vers le thread intermédiaire à l’intérieur d’une <xref:System.AggregateException>.</span><span class="sxs-lookup"><span data-stu-id="bb82b-162">When an attached child task cancels itself by using the same token that was passed to its parent task, a <xref:System.Threading.Tasks.TaskCanceledException> is propagated to the joining thread inside an <xref:System.AggregateException>.</span></span> <span data-ttu-id="bb82b-163">Vous devez attendre la tâche parente pour pouvoir gérer toutes les exceptions bénignes, en plus de toute exception d’erreur propagée vers un graphique de tâches enfants attachées.</span><span class="sxs-lookup"><span data-stu-id="bb82b-163">You must wait for the parent task so that you can handle all benign exceptions in addition to all faulting exceptions that are propagated up through a graph of attached child tasks.</span></span>  
  
 <span data-ttu-id="bb82b-164">Pour plus d’informations, consultez l’article [Gestion des exceptions](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="bb82b-164">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>  
  
## <a name="preventing-a-child-task-from-attaching-to-its-parent"></a><span data-ttu-id="bb82b-165">Empêcher qu'une tâche enfant ne s'attache à son parent</span><span class="sxs-lookup"><span data-stu-id="bb82b-165">Preventing a child task from attaching to its parent</span></span>  
 <span data-ttu-id="bb82b-166">Une exception non gérée levée par une tâche enfant est propagée vers la tâche parente.</span><span class="sxs-lookup"><span data-stu-id="bb82b-166">An unhandled exception that is thrown by a child task is propagated to the parent task.</span></span> <span data-ttu-id="bb82b-167">Vous pouvez vous baser sur ce comportement pour observer toutes les exceptions de tâche enfant à partir d'une seule tâche racine au lieu de parcourir une arborescence de tâches.</span><span class="sxs-lookup"><span data-stu-id="bb82b-167">You can use this behavior to observe all child task exceptions from one root task instead of traversing a tree of tasks.</span></span> <span data-ttu-id="bb82b-168">Toutefois, la propagation d’exception peut être problématique quand une tâche parente n’attend pas d’attachement de la part d’un autre code.</span><span class="sxs-lookup"><span data-stu-id="bb82b-168">However, exception propagation can be problematic when a parent task does not expect attachment from other code.</span></span> <span data-ttu-id="bb82b-169">Par exemple, imaginez une application qui appelle un composant de bibliothèque tierce à partir d'un objet <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="bb82b-169">For example, consider an app that calls a third-party library component from a <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="bb82b-170">Si ce composant crée également un objet <xref:System.Threading.Tasks.Task> et spécifie <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> pour l’attacher à la tâche parente, les exceptions non gérées qui se produisent dans la tâche enfant se propagent vers le parent.</span><span class="sxs-lookup"><span data-stu-id="bb82b-170">If the third-party library component also creates a <xref:System.Threading.Tasks.Task> object and specifies <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> to attach it to the parent task, any unhandled exceptions that occur in the child task propagate to the parent.</span></span> <span data-ttu-id="bb82b-171">Cela peut entraîner un comportement inattendu dans l'application principale.</span><span class="sxs-lookup"><span data-stu-id="bb82b-171">This could lead to unexpected behavior in the main app.</span></span>  
  
 <span data-ttu-id="bb82b-172">Pour empêcher une tâche enfant de s'attacher à sa tâche parente, spécifiez l'option <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> quand vous créez l'objet <xref:System.Threading.Tasks.Task> ou <xref:System.Threading.Tasks.Task%601> parent.</span><span class="sxs-lookup"><span data-stu-id="bb82b-172">To prevent a child task from attaching to its parent task, specify the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option when you create the parent <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> object.</span></span> <span data-ttu-id="bb82b-173">Si une tâche enfant tente de s’attacher à son parent alors que celui-ci spécifie l’option <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, elle échoue et s’exécute comme si l’option <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> n’était pas spécifiée.</span><span class="sxs-lookup"><span data-stu-id="bb82b-173">When a task tries to attach to its parent and the parent specifies the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option, the child task will not be able to attach to a parent and will execute just as if the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option was not specified.</span></span>  
  
 <span data-ttu-id="bb82b-174">Vous pourriez également empêcher une tâche enfant de s'attacher à son parent quand la tâche enfant ne se termine pas en temps voulu.</span><span class="sxs-lookup"><span data-stu-id="bb82b-174">You might also want to prevent a child task from attaching to its parent when the child task does not finish in a timely manner.</span></span> <span data-ttu-id="bb82b-175">Étant donné qu’une tâche parente ne se termine pas tant que toutes les tâches enfants ne sont pas achevées, une tâche enfant à exécution longue peut entraîner des performances médiocres de la part de l’application globale.</span><span class="sxs-lookup"><span data-stu-id="bb82b-175">Because a parent task does not finish until all child tasks finish, a long-running child task can cause the overall app to perform poorly.</span></span> <span data-ttu-id="bb82b-176">Pour obtenir un exemple qui montre comment améliorer les performances de l’application en empêchant une tâche de s’attacher à sa tâche parente, consultez [Procédure : empêcher une tâche enfant de s’attacher à son parent](../../../docs/standard/parallel-programming/how-to-prevent-a-child-task-from-attaching-to-its-parent.md).</span><span class="sxs-lookup"><span data-stu-id="bb82b-176">For an example that shows how to improve app performance by preventing a task from attaching to its parent task, see [How to: Prevent a Child Task from Attaching to its Parent](../../../docs/standard/parallel-programming/how-to-prevent-a-child-task-from-attaching-to-its-parent.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bb82b-177">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="bb82b-177">See also</span></span>

- [<span data-ttu-id="bb82b-178">Programmation parallèle</span><span class="sxs-lookup"><span data-stu-id="bb82b-178">Parallel Programming</span></span>](../../../docs/standard/parallel-programming/index.md)
- [<span data-ttu-id="bb82b-179">Parallélisme de données</span><span class="sxs-lookup"><span data-stu-id="bb82b-179">Data Parallelism</span></span>](../../../docs/standard/parallel-programming/data-parallelism-task-parallel-library.md)
