---
title: Bonnes pratiques pour l’utilisation de chaînes dans .NET
description: Découvrez comment utiliser efficacement les chaînes dans les applications .NET.
ms.date: 05/01/2019
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- strings [.NET Framework],searching
- best practices,string comparison and sorting
- strings [.NET Framework],best practices
- strings [.NET Framework],basic string operations
- sorting strings
- strings [.NET Framework],sorting
- string comparison [.NET Framework],best practices
- string sorting
- comparing strings
- strings [.NET Framework],comparing
ms.assetid: b9f0bf53-e2de-4116-8ce9-d4f91a1df4f7
ms.openlocfilehash: 0fb7ec8d9de8fae7a0443984511e538d38d93c7a
ms.sourcegitcommit: 7b1497c1927cb449cefd313bc5126ae37df30746
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/16/2020
ms.locfileid: "83441004"
---
# <a name="best-practices-for-using-strings-in-net"></a><span data-ttu-id="e08a2-103">Bonnes pratiques pour l’utilisation de chaînes dans .NET</span><span class="sxs-lookup"><span data-stu-id="e08a2-103">Best Practices for Using Strings in .NET</span></span>

<span data-ttu-id="e08a2-104">.NET offre une prise en charge complète du développement d’applications localisées et globalisées, et facilite l’application des conventions de la culture actuelle ou d’une culture spécifique lors de l’exécution d’opérations courantes telles que le tri et l’affichage de chaînes.</span><span class="sxs-lookup"><span data-stu-id="e08a2-104">.NET provides extensive support for developing localized and globalized applications, and makes it easy to apply the conventions of either the current culture or a specific culture when performing common operations such as sorting and displaying strings.</span></span> <span data-ttu-id="e08a2-105">Toutefois, le tri ou la comparaison de chaînes n'est pas toujours une opération dépendante de la culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-105">But sorting or comparing strings is not always a culture-sensitive operation.</span></span> <span data-ttu-id="e08a2-106">Par exemple, les chaînes utilisées en interne par une application doivent généralement être gérées de la même manière dans toutes les cultures.</span><span class="sxs-lookup"><span data-stu-id="e08a2-106">For example, strings that are used internally by an application typically should be handled identically across all cultures.</span></span> <span data-ttu-id="e08a2-107">Quand des données de type chaîne culturellement indépendantes, telles que des balises XML, des balises HTML, des noms d'utilisateurs, des chemins d'accès aux fichiers et des noms d'objets système, sont interprétées comme si elles étaient dépendantes de la culture, le code d'application peut faire l'objet de bogues subtils, de performances médiocres et, dans certains cas, de problèmes de sécurité.</span><span class="sxs-lookup"><span data-stu-id="e08a2-107">When culturally independent string data, such as XML tags, HTML tags, user names, file paths, and the names of system objects, are interpreted as if they were culture-sensitive, application code can be subject to subtle bugs, poor performance, and, in some cases, security issues.</span></span>

<span data-ttu-id="e08a2-108">Cette rubrique examine les méthodes de tri, de comparaison et d’application de la casse pour les chaînes dans .NET, présente des recommandations pour sélectionner une méthode appropriée de gestion des chaînes et fournit des informations supplémentaires sur les méthodes de gestion des chaînes.</span><span class="sxs-lookup"><span data-stu-id="e08a2-108">This topic examines the string sorting, comparison, and casing methods in .NET, presents recommendations for selecting an appropriate string-handling method, and provides additional information about string-handling methods.</span></span> <span data-ttu-id="e08a2-109">Elle décrit également comment les données mises en forme, telles que les données numériques et les données de date et d'heure, sont traitées pour l'affichage et pour le stockage.</span><span class="sxs-lookup"><span data-stu-id="e08a2-109">It also examines how formatted data, such as numeric data and date and time data, is handled for display and for storage.</span></span>

## <a name="recommendations-for-string-usage"></a><span data-ttu-id="e08a2-110">Recommandations relatives à l’utilisation de chaînes</span><span class="sxs-lookup"><span data-stu-id="e08a2-110">Recommendations for string usage</span></span>

<span data-ttu-id="e08a2-111">Dans le cadre du développement à l’aide de .NET, suivez les recommandations simples ci-après quand vous utilisez des chaînes :</span><span class="sxs-lookup"><span data-stu-id="e08a2-111">When you develop with .NET, follow these simple recommendations when you use strings:</span></span>

- <span data-ttu-id="e08a2-112">Utilisez des surcharges qui spécifient explicitement les règles de comparaison de chaînes pour les opérations de chaînes.</span><span class="sxs-lookup"><span data-stu-id="e08a2-112">Use overloads that explicitly specify the string comparison rules for string operations.</span></span> <span data-ttu-id="e08a2-113">Cela implique généralement l'appel d'une surcharge de méthode avec un paramètre de type <xref:System.StringComparison>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-113">Typically, this involves calling a method overload that has a parameter of type <xref:System.StringComparison>.</span></span>
- <span data-ttu-id="e08a2-114">Utilisez <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> ou <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> pour les comparaisons comme valeur par défaut sécurisée pour la correspondance de chaînes de culture non spécifiée.</span><span class="sxs-lookup"><span data-stu-id="e08a2-114">Use <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> for comparisons as your safe default for culture-agnostic string matching.</span></span>
- <span data-ttu-id="e08a2-115">Pour obtenir de meilleures performances, utilisez des comparaisons avec <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> ou <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-115">Use comparisons with <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> for better performance.</span></span>
- <span data-ttu-id="e08a2-116">Utilisez des opérations de chaînes basées sur <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType> quand vous affichez la sortie à l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="e08a2-116">Use string operations that are based on <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType> when you display output to the user.</span></span>
- <span data-ttu-id="e08a2-117">Utilisez les valeurs <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> ou <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> non linguistiques plutôt que des opérations de chaînes basées sur <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> quand la comparaison est linguistiquement non pertinente (symbolique, par exemple).</span><span class="sxs-lookup"><span data-stu-id="e08a2-117">Use the non-linguistic <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> values instead of string operations based on <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> when the comparison is linguistically irrelevant (symbolic, for example).</span></span>
- <span data-ttu-id="e08a2-118">Utilisez la méthode <xref:System.String.ToUpperInvariant%2A?displayProperty=nameWithType> à la place de la méthode <xref:System.String.ToLowerInvariant%2A?displayProperty=nameWithType> quand vous normalisez des chaînes pour la comparaison.</span><span class="sxs-lookup"><span data-stu-id="e08a2-118">Use the <xref:System.String.ToUpperInvariant%2A?displayProperty=nameWithType> method instead of the <xref:System.String.ToLowerInvariant%2A?displayProperty=nameWithType> method when you normalize strings for comparison.</span></span>
- <span data-ttu-id="e08a2-119">Utilisez une surcharge de la méthode <xref:System.String.Equals%2A?displayProperty=nameWithType> pour tester si deux chaînes sont égales.</span><span class="sxs-lookup"><span data-stu-id="e08a2-119">Use an overload of the <xref:System.String.Equals%2A?displayProperty=nameWithType> method to test whether two strings are equal.</span></span>
- <span data-ttu-id="e08a2-120">Utilisez les méthodes <xref:System.String.Compare%2A?displayProperty=nameWithType> et <xref:System.String.CompareTo%2A?displayProperty=nameWithType> pour trier les chaînes, et non pour en vérifier l'égalité.</span><span class="sxs-lookup"><span data-stu-id="e08a2-120">Use the <xref:System.String.Compare%2A?displayProperty=nameWithType> and <xref:System.String.CompareTo%2A?displayProperty=nameWithType> methods to sort strings, not to check for equality.</span></span>
- <span data-ttu-id="e08a2-121">Utilisez la mise en forme en fonction de la culture pour afficher des données non-chaînées, telles que les nombres et les dates, dans une interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="e08a2-121">Use culture-sensitive formatting to display non-string data, such as numbers and dates, in a user interface.</span></span> <span data-ttu-id="e08a2-122">Utilisez la mise en forme avec la [culture invariante](xref:System.Globalization.CultureInfo.InvariantCulture) pour conserver les données qui ne sont pas des chaînes sous forme de chaîne.</span><span class="sxs-lookup"><span data-stu-id="e08a2-122">Use formatting with the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture) to persist non-string data in string form.</span></span>

<span data-ttu-id="e08a2-123">Quand vous utilisez des chaînes, évitez les pratiques suivantes :</span><span class="sxs-lookup"><span data-stu-id="e08a2-123">Avoid the following practices when you use strings:</span></span>

- <span data-ttu-id="e08a2-124">N'utilisez pas de surcharges qui ne spécifient pas explicitement ou implicitement les règles de comparaison de chaînes pour les opérations de chaînes.</span><span class="sxs-lookup"><span data-stu-id="e08a2-124">Do not use overloads that do not explicitly or implicitly specify the string comparison rules for string operations.</span></span>
- <span data-ttu-id="e08a2-125">N'utilisez pas d'opérations de chaînes basées sur <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> dans la plupart des cas.</span><span class="sxs-lookup"><span data-stu-id="e08a2-125">Do not use string operations based on <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> in most cases.</span></span> <span data-ttu-id="e08a2-126">L'une des rares exceptions est quand vous rendez persistantes des données linguistiquement explicites, mais dont la culture n'est pas spécifiée.</span><span class="sxs-lookup"><span data-stu-id="e08a2-126">One of the few exceptions is when you are persisting linguistically meaningful but culturally agnostic data.</span></span>
- <span data-ttu-id="e08a2-127">N'utilisez pas une surcharge de la méthode <xref:System.String.Compare%2A?displayProperty=nameWithType> ou <xref:System.String.CompareTo%2A> , et testez une valeur de retour de zéro pour déterminer si deux chaînes sont égales.</span><span class="sxs-lookup"><span data-stu-id="e08a2-127">Do not use an overload of the <xref:System.String.Compare%2A?displayProperty=nameWithType> or <xref:System.String.CompareTo%2A> method and test for a return value of zero to determine whether two strings are equal.</span></span>
- <span data-ttu-id="e08a2-128">N'utilisez pas la mise en forme qui tient compte de la culture pour rendre des données numériques ou les données de date et d'heure sous forme de chaîne.</span><span class="sxs-lookup"><span data-stu-id="e08a2-128">Do not use culture-sensitive formatting to persist numeric data or date and time data in string form.</span></span>

## <a name="specifying-string-comparisons-explicitly"></a><span data-ttu-id="e08a2-129">Spécification explicite de comparaisons de chaînes</span><span class="sxs-lookup"><span data-stu-id="e08a2-129">Specifying string comparisons explicitly</span></span>

<span data-ttu-id="e08a2-130">La plupart des méthodes de manipulation de chaînes dans .NET sont surchargées.</span><span class="sxs-lookup"><span data-stu-id="e08a2-130">Most of the string manipulation methods in .NET are overloaded.</span></span> <span data-ttu-id="e08a2-131">Une ou plusieurs surcharges acceptent généralement des paramètres par défaut, contrairement à d'autres qui définissent avec précision la façon dont les chaînes doivent être comparées ou manipulées.</span><span class="sxs-lookup"><span data-stu-id="e08a2-131">Typically, one or more overloads accept default settings, whereas others accept no defaults and instead define the precise way in which strings are to be compared or manipulated.</span></span> <span data-ttu-id="e08a2-132">La plupart des méthodes qui ne s'appuient pas sur des valeurs par défaut incluent un paramètre de type <xref:System.StringComparison>, qui est une énumération spécifiant explicitement des règles pour la comparaison de chaînes selon la culture et la casse.</span><span class="sxs-lookup"><span data-stu-id="e08a2-132">Most of the methods that do not rely on defaults include a parameter of type <xref:System.StringComparison>, which is an enumeration that explicitly specifies rules for string comparison by culture and case.</span></span> <span data-ttu-id="e08a2-133">Le tableau suivant décrit les membres de l'énumération <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-133">The following table describes the <xref:System.StringComparison> enumeration members.</span></span>

|<span data-ttu-id="e08a2-134">Membre StringComparison</span><span class="sxs-lookup"><span data-stu-id="e08a2-134">StringComparison member</span></span>|<span data-ttu-id="e08a2-135">Description</span><span class="sxs-lookup"><span data-stu-id="e08a2-135">Description</span></span>|
|-----------------------------|-----------------|
|<xref:System.StringComparison.CurrentCulture>|<span data-ttu-id="e08a2-136">Effectue une comparaison respectant la casse à l'aide de la culture actuelle.</span><span class="sxs-lookup"><span data-stu-id="e08a2-136">Performs a case-sensitive comparison using the current culture.</span></span>|
|<xref:System.StringComparison.CurrentCultureIgnoreCase>|<span data-ttu-id="e08a2-137">Effectue une comparaison ne respectant pas la casse à l'aide de la culture actuelle.</span><span class="sxs-lookup"><span data-stu-id="e08a2-137">Performs a case-insensitive comparison using the current culture.</span></span>|
|<xref:System.StringComparison.InvariantCulture>|<span data-ttu-id="e08a2-138">Effectue une comparaison respectant la casse à l'aide de la culture dite indifférente.</span><span class="sxs-lookup"><span data-stu-id="e08a2-138">Performs a case-sensitive comparison using the invariant culture.</span></span>|
|<xref:System.StringComparison.InvariantCultureIgnoreCase>|<span data-ttu-id="e08a2-139">Effectue une comparaison ne respectant pas la casse à l'aide de la culture dite indifférente.</span><span class="sxs-lookup"><span data-stu-id="e08a2-139">Performs a case-insensitive comparison using the invariant culture.</span></span>|
|<xref:System.StringComparison.Ordinal>|<span data-ttu-id="e08a2-140">Effectue une comparaison ordinale.</span><span class="sxs-lookup"><span data-stu-id="e08a2-140">Performs an ordinal comparison.</span></span>|
|<xref:System.StringComparison.OrdinalIgnoreCase>|<span data-ttu-id="e08a2-141">Effectue une comparaison ordinale ne respectant pas la casse.</span><span class="sxs-lookup"><span data-stu-id="e08a2-141">Performs a case-insensitive ordinal comparison.</span></span>|

<span data-ttu-id="e08a2-142">Par exemple, la méthode <xref:System.String.IndexOf%2A> , qui retourne l'index d'une sous-chaîne contenue dans un objet <xref:System.String> correspondant à un caractère ou à une chaîne, a neuf surcharges :</span><span class="sxs-lookup"><span data-stu-id="e08a2-142">For example, the <xref:System.String.IndexOf%2A> method, which returns the index of a substring in a <xref:System.String> object that matches either a character or a string, has nine overloads:</span></span>

- <span data-ttu-id="e08a2-143"><xref:System.String.IndexOf%28System.Char%29>, <xref:System.String.IndexOf%28System.Char%2CSystem.Int32%29>et <xref:System.String.IndexOf%28System.Char%2CSystem.Int32%2CSystem.Int32%29>, qui effectuent par défaut une recherche ordinale (respectant la casse et indépendante de la culture) d'un caractère dans la chaîne.</span><span class="sxs-lookup"><span data-stu-id="e08a2-143"><xref:System.String.IndexOf%28System.Char%29>, <xref:System.String.IndexOf%28System.Char%2CSystem.Int32%29>, and <xref:System.String.IndexOf%28System.Char%2CSystem.Int32%2CSystem.Int32%29>, which by default perform an ordinal (case-sensitive and culture-insensitive) search for a character in the string.</span></span>
- <span data-ttu-id="e08a2-144"><xref:System.String.IndexOf%28System.String%29>, <xref:System.String.IndexOf%28System.String%2CSystem.Int32%29>et <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.Int32%29>, qui effectuent par défaut une recherche respectant la casse et dépendante de la culture d'une sous-chaîne dans la chaîne.</span><span class="sxs-lookup"><span data-stu-id="e08a2-144"><xref:System.String.IndexOf%28System.String%29>, <xref:System.String.IndexOf%28System.String%2CSystem.Int32%29>, and <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.Int32%29>, which by default perform a case-sensitive and culture-sensitive search for a substring in the string.</span></span>
- <span data-ttu-id="e08a2-145"><xref:System.String.IndexOf%28System.String%2CSystem.StringComparison%29>, <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.StringComparison%29>et <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.StringComparison%29>, qui incluent un paramètre de type <xref:System.StringComparison> permettant la spécification de la forme de la comparaison.</span><span class="sxs-lookup"><span data-stu-id="e08a2-145"><xref:System.String.IndexOf%28System.String%2CSystem.StringComparison%29>, <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.StringComparison%29>, and <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.StringComparison%29>, which include a parameter of type <xref:System.StringComparison> that allows the form of the comparison to be specified.</span></span>

<span data-ttu-id="e08a2-146">Nous vous recommandons de sélectionner une surcharge qui n'utilise pas de valeurs par défaut, pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="e08a2-146">We recommend that you select an overload that does not use default values, for the following reasons:</span></span>

- <span data-ttu-id="e08a2-147">Certaines surcharges ayant des paramètres par défaut (celles qui recherchent un <xref:System.Char> dans l'instance de chaîne) effectuent une comparaison ordinale, tandis que d'autres (celles qui recherchent une chaîne dans l'instance de chaîne) sont dépendantes de la culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-147">Some overloads with default parameters (those that search for a <xref:System.Char> in the string instance) perform an ordinal comparison, whereas others (those that search for a string in the string instance) are culture-sensitive.</span></span> <span data-ttu-id="e08a2-148">Il est difficile de mémoriser quelle méthode utilise quelle valeur par défaut, et les surcharges peuvent être facilement confondues.</span><span class="sxs-lookup"><span data-stu-id="e08a2-148">It is difficult to remember which method uses which default value, and easy to confuse the overloads.</span></span>
- <span data-ttu-id="e08a2-149">L'objectif du code qui s'appuie sur des valeurs par défaut pour les appels de méthode n'est pas clair.</span><span class="sxs-lookup"><span data-stu-id="e08a2-149">The intent of the code that relies on default values for method calls is not clear.</span></span> <span data-ttu-id="e08a2-150">Dans l’exemple suivant, qui est basé sur des valeurs par défaut, il est difficile de savoir si le développeur voulait en fait une comparaison ordinale ou linguistique de deux chaînes, ou si une différence de casse entre `protocol` et "http" peut entraîner le retour de `false`.</span><span class="sxs-lookup"><span data-stu-id="e08a2-150">In the following example, which relies on defaults, it is difficult to know whether the developer actually intended an ordinal or a linguistic comparison of two strings, or whether a case difference between `protocol` and "http" might cause the test for equality to return `false`.</span></span>

     [!code-csharp[Conceptual.Strings.BestPractices#1](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/explicitargs1.cs#1)]
     [!code-vb[Conceptual.Strings.BestPractices#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/explicitargs1.vb#1)]

<span data-ttu-id="e08a2-151">En général, nous vous recommandons d'appeler une méthode qui ne s'appuie pas sur des valeurs par défaut, car elle rend l'objectif du code non équivoque.</span><span class="sxs-lookup"><span data-stu-id="e08a2-151">In general, we recommend that you call a method that does not rely on defaults, because it makes the intent of the code unambiguous.</span></span> <span data-ttu-id="e08a2-152">Cela rend ensuite le code plus lisible et plus facile à déboguer et à gérer.</span><span class="sxs-lookup"><span data-stu-id="e08a2-152">This, in turn, makes the code more readable and easier to debug and maintain.</span></span> <span data-ttu-id="e08a2-153">L'exemple suivant aborde les questions soulevées à propos de l'exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="e08a2-153">The following example addresses the questions raised about the previous example.</span></span> <span data-ttu-id="e08a2-154">Il explique que la comparaison ordinale est utilisée et que les différences de casse sont ignorées.</span><span class="sxs-lookup"><span data-stu-id="e08a2-154">It makes it clear that ordinal comparison is used and that differences in case are ignored.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#2](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/explicitargs1.cs#2)]
[!code-vb[Conceptual.Strings.BestPractices#2](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/explicitargs1.vb#2)]

## <a name="the-details-of-string-comparison"></a><span data-ttu-id="e08a2-155">Détails de la comparaison de chaînes</span><span class="sxs-lookup"><span data-stu-id="e08a2-155">The details of string comparison</span></span>

<span data-ttu-id="e08a2-156">La comparaison de chaînes est le cœur de nombreuses opérations liées aux chaînes, en particulier le tri et le test d'égalité.</span><span class="sxs-lookup"><span data-stu-id="e08a2-156">String comparison is the heart of many string-related operations, particularly sorting and testing for equality.</span></span> <span data-ttu-id="e08a2-157">Les chaînes sont triées dans un ordre déterminé : si "my" s'affiche avant "string" dans une liste triée de chaînes, "my" doit être considéré comme inférieur ou égal à "string".</span><span class="sxs-lookup"><span data-stu-id="e08a2-157">Strings sort in a determined order: If "my" appears before "string" in a sorted list of strings, "my" must compare less than or equal to "string".</span></span> <span data-ttu-id="e08a2-158">En outre, la comparaison définit implicitement l'égalité.</span><span class="sxs-lookup"><span data-stu-id="e08a2-158">Additionally, comparison implicitly defines equality.</span></span> <span data-ttu-id="e08a2-159">L'opération de comparaison retourne zéro pour les chaînes qu'il estime égales.</span><span class="sxs-lookup"><span data-stu-id="e08a2-159">The comparison operation returns zero for strings it deems equal.</span></span> <span data-ttu-id="e08a2-160">Considérer qu'aucune chaîne n'est inférieure à l'autre constitue une bonne interprétation.</span><span class="sxs-lookup"><span data-stu-id="e08a2-160">A good interpretation is that neither string is less than the other.</span></span> <span data-ttu-id="e08a2-161">La plupart des opérations significatives impliquant des chaînes incluent l'une des procédures suivantes, ou les deux : comparaison avec une autre chaîne et exécution d'une opération de tri bien définie.</span><span class="sxs-lookup"><span data-stu-id="e08a2-161">Most meaningful operations involving strings include one or both of these procedures: comparing with another string, and executing a well-defined sort operation.</span></span>

> [!NOTE]
> <span data-ttu-id="e08a2-162">Vous pouvez télécharger les [Sorting Weight Tables](https://www.microsoft.com/download/details.aspx?id=10921), un ensemble de fichiers texte qui contiennent des informations sur les poids des caractères utilisés dans les opérations de tri et de comparaison pour les systèmes d’exploitation Windows et la [Default Unicode Collation Element Table](https://www.unicode.org/Public/UCA/latest/allkeys.txt), la version la plus récente de la table de pondération de tri pour Linux et macOS.</span><span class="sxs-lookup"><span data-stu-id="e08a2-162">You can download the [Sorting Weight Tables](https://www.microsoft.com/download/details.aspx?id=10921), a set of text files that contain information on the character weights used in sorting and comparison operations for Windows operating systems, and the [Default Unicode Collation Element Table](https://www.unicode.org/Public/UCA/latest/allkeys.txt), the latest version of the sort weight table for Linux and macOS.</span></span> <span data-ttu-id="e08a2-163">La version spécifique de la table de pondération de tri sur Linux et macOS varie selon la version des bibliothèques [International Components for Unicode](http://site.icu-project.org/) installées sur le système.</span><span class="sxs-lookup"><span data-stu-id="e08a2-163">The specific version of the sort weight table on Linux and macOS depends on the version of the [International Components for Unicode](http://site.icu-project.org/) libraries installed on the system.</span></span> <span data-ttu-id="e08a2-164">Pour plus d’informations sur les versions ICU et les versions Unicode qu’elles implémentent, consultez [Téléchargement d’ICU](http://site.icu-project.org/download).</span><span class="sxs-lookup"><span data-stu-id="e08a2-164">For information on ICU versions and the Unicode versions that they implement, see [Downloading ICU](http://site.icu-project.org/download).</span></span>

<span data-ttu-id="e08a2-165">Toutefois, l'évaluation de l'égalité ou de l'ordre de tri de deux chaînes ne produit pas un résultat correct unique ; le résultat dépend des critères utilisés pour comparer les chaînes.</span><span class="sxs-lookup"><span data-stu-id="e08a2-165">However, evaluating two strings for equality or sort order does not yield a single, correct result; the outcome depends on the criteria used to compare the strings.</span></span> <span data-ttu-id="e08a2-166">En particulier, les comparaisons de chaînes qui sont ordinales ou basées sur les conventions de casse et de tri de la culture actuelle ou la [culture invariante](xref:System.Globalization.CultureInfo.InvariantCulture) (culture aux paramètres régionaux non spécifiés basée sur la langue anglaise) peuvent produire des résultats différents.</span><span class="sxs-lookup"><span data-stu-id="e08a2-166">In particular, string comparisons that are ordinal or that are based on the casing and sorting conventions of the current culture or the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture) (a locale-agnostic culture based on the English language) may produce different results.</span></span>

<span data-ttu-id="e08a2-167">En outre, les comparaisons de chaînes à l’aide de différentes versions de .NET ou à l’aide de .NET sur différents systèmes d’exploitation ou des versions différentes de système d’exploitation peuvent retourner des résultats différents.</span><span class="sxs-lookup"><span data-stu-id="e08a2-167">In addition, string comparisons using different versions of .NET or using .NET on different operating systems or operating system versions may return different results.</span></span> <span data-ttu-id="e08a2-168">Pour plus d’informations, consultez [Chaînes et norme Unicode](xref:System.String#Unicode).</span><span class="sxs-lookup"><span data-stu-id="e08a2-168">For more information, see [Strings and the Unicode Standard](xref:System.String#Unicode).</span></span>

### <a name="string-comparisons-that-use-the-current-culture"></a><span data-ttu-id="e08a2-169">Comparaisons de chaînes qui utilisent la culture actuelle</span><span class="sxs-lookup"><span data-stu-id="e08a2-169">String comparisons that use the current culture</span></span>

<span data-ttu-id="e08a2-170">L'un des critères à prendre en compte est l'utilisation des conventions de la culture actuelle lors de la comparaison de chaînes.</span><span class="sxs-lookup"><span data-stu-id="e08a2-170">One criterion involves using the conventions of the current culture when comparing strings.</span></span> <span data-ttu-id="e08a2-171">Les comparaisons basées sur la culture actuelle utilisent la culture ou les paramètres régionaux actuels du thread.</span><span class="sxs-lookup"><span data-stu-id="e08a2-171">Comparisons that are based on the current culture use the thread's current culture or locale.</span></span> <span data-ttu-id="e08a2-172">Si la culture n'est pas définie par l'utilisateur, sa valeur par défaut est le paramètre défini dans la fenêtre **Options régionales** du Panneau de configuration.</span><span class="sxs-lookup"><span data-stu-id="e08a2-172">If the culture is not set by the user, it defaults to the setting in the **Regional Options** window in Control Panel.</span></span> <span data-ttu-id="e08a2-173">Vous devez toujours utiliser des comparaisons basées sur la culture actuelle quand les données sont linguistiquement pertinentes et quand elles reflètent l'intervention de l'utilisateur dépendante de la culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-173">You should always use comparisons that are based on the current culture when data is linguistically relevant, and when it reflects culture-sensitive user interaction.</span></span>

<span data-ttu-id="e08a2-174">Toutefois, le comportement de la comparaison et de la casse dans .NET change en fonction de la culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-174">However, comparison and casing behavior in .NET changes when the culture changes.</span></span> <span data-ttu-id="e08a2-175">Cela se produit quand une application s'exécute sur un ordinateur dont la culture est différente de celle de l'ordinateur sur lequel l'application a été développée, ou quand le thread en cours d'exécution change sa culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-175">This happens when an application executes on a computer that has a different culture than the computer on which the application was developed, or when the executing thread changes its culture.</span></span> <span data-ttu-id="e08a2-176">Ce comportement est intentionnel, mais il reste peu évident à de nombreux développeurs.</span><span class="sxs-lookup"><span data-stu-id="e08a2-176">This behavior is intentional, but it remains non-obvious to many developers.</span></span> <span data-ttu-id="e08a2-177">L'exemple suivant illustre les différences au niveau de l'ordre de tri entre les cultures Anglais (États-Unis) ("en-US") et Suédois ("sv-SE").</span><span class="sxs-lookup"><span data-stu-id="e08a2-177">The following example illustrates differences in sort order between the U.S. English ("en-US") and Swedish ("sv-SE") cultures.</span></span> <span data-ttu-id="e08a2-178">Notez que les mots « ångström », « Windows » et « Visual Studio » s’affichent à des positions différentes dans les tableaux de chaînes triées.</span><span class="sxs-lookup"><span data-stu-id="e08a2-178">Note that the words "ångström", "Windows", and "Visual Studio" appear in different positions in the sorted string arrays.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#3](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/comparison1.cs#3)]
[!code-vb[Conceptual.Strings.BestPractices#3](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/comparison1.vb#3)]

<span data-ttu-id="e08a2-179">Les comparaisons ne respectant pas la casse qui utilisent la culture actuelle sont identiques aux comparaisons dépendantes de la culture, mais elles ignorent la casse, comme défini par la culture actuelle du thread.</span><span class="sxs-lookup"><span data-stu-id="e08a2-179">Case-insensitive comparisons that use the current culture are the same as culture-sensitive comparisons, except that they ignore case as dictated by the thread's current culture.</span></span> <span data-ttu-id="e08a2-180">Ce comportement peut également se manifester dans les ordres de tri.</span><span class="sxs-lookup"><span data-stu-id="e08a2-180">This behavior may manifest itself in sort orders as well.</span></span>

<span data-ttu-id="e08a2-181">Les comparaisons qui utilisent la sémantique de la culture actuelle sont la valeur par défaut pour les méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="e08a2-181">Comparisons that use current culture semantics are the default for the following methods:</span></span>

- <span data-ttu-id="e08a2-182">les surcharges<xref:System.String.Compare%2A?displayProperty=nameWithType> qui n'incluent pas de paramètre <xref:System.StringComparison> ;</span><span class="sxs-lookup"><span data-stu-id="e08a2-182"><xref:System.String.Compare%2A?displayProperty=nameWithType> overloads that do not include a <xref:System.StringComparison> parameter.</span></span>
- <span data-ttu-id="e08a2-183">les surcharges<xref:System.String.CompareTo%2A?displayProperty=nameWithType> ;</span><span class="sxs-lookup"><span data-stu-id="e08a2-183"><xref:System.String.CompareTo%2A?displayProperty=nameWithType> overloads.</span></span>
- <span data-ttu-id="e08a2-184">la méthode <xref:System.String.StartsWith%28System.String%29?displayProperty=nameWithType> par défaut et la méthode <xref:System.String.StartsWith%28System.String%2CSystem.Boolean%2CSystem.Globalization.CultureInfo%29?displayProperty=nameWithType> avec un paramètre `null`<xref:System.Globalization.CultureInfo> ;</span><span class="sxs-lookup"><span data-stu-id="e08a2-184">The default <xref:System.String.StartsWith%28System.String%29?displayProperty=nameWithType> method, and the <xref:System.String.StartsWith%28System.String%2CSystem.Boolean%2CSystem.Globalization.CultureInfo%29?displayProperty=nameWithType> method with a `null`<xref:System.Globalization.CultureInfo> parameter.</span></span>
- <span data-ttu-id="e08a2-185">la méthode <xref:System.String.EndsWith%28System.String%29?displayProperty=nameWithType> par défaut et la méthode <xref:System.String.EndsWith%28System.String%2CSystem.Boolean%2CSystem.Globalization.CultureInfo%29?displayProperty=nameWithType> avec un paramètre `null`<xref:System.Globalization.CultureInfo> ;</span><span class="sxs-lookup"><span data-stu-id="e08a2-185">The default <xref:System.String.EndsWith%28System.String%29?displayProperty=nameWithType> method, and the <xref:System.String.EndsWith%28System.String%2CSystem.Boolean%2CSystem.Globalization.CultureInfo%29?displayProperty=nameWithType> method with a `null`<xref:System.Globalization.CultureInfo> parameter.</span></span>
- <span data-ttu-id="e08a2-186">les surcharges<xref:System.String.IndexOf%2A?displayProperty=nameWithType> qui acceptent un <xref:System.String> comme paramètre de recherche et qui n'ont pas de paramètre <xref:System.StringComparison> ;</span><span class="sxs-lookup"><span data-stu-id="e08a2-186"><xref:System.String.IndexOf%2A?displayProperty=nameWithType> overloads that accept a <xref:System.String> as a search parameter and that do not have a <xref:System.StringComparison> parameter.</span></span>
- <span data-ttu-id="e08a2-187">les surcharges<xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> qui acceptent un <xref:System.String> comme paramètre de recherche et qui n'ont pas de paramètre <xref:System.StringComparison> ;</span><span class="sxs-lookup"><span data-stu-id="e08a2-187"><xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> overloads that accept a <xref:System.String> as a search parameter and that do not have a <xref:System.StringComparison> parameter.</span></span>

<span data-ttu-id="e08a2-188">Dans tous les cas, nous vous recommandons d'appeler une surcharge qui a un paramètre <xref:System.StringComparison> , afin que l'objectif de l'appel de la méthode soit clair.</span><span class="sxs-lookup"><span data-stu-id="e08a2-188">In any case, we recommend that you call an overload that has a <xref:System.StringComparison> parameter to make the intent of the method call clear.</span></span>

<span data-ttu-id="e08a2-189">Des bogues, plus ou moins subtils, peuvent émerger quand des données de type chaîne non linguistiques sont interprétées linguistiquement, ou quand des données de type chaîne d'une culture particulière sont interprétées à l'aide des conventions d'une autre culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-189">Subtle and not so subtle bugs can emerge when non-linguistic string data is interpreted linguistically, or when string data from a particular culture is interpreted using the conventions of another culture.</span></span> <span data-ttu-id="e08a2-190">L'exemple canonique est le problème du caractère I en turc.</span><span class="sxs-lookup"><span data-stu-id="e08a2-190">The canonical example is the Turkish-I problem.</span></span>

<span data-ttu-id="e08a2-191">Dans presque tous les alphabets latins, y compris l'anglais (États-Unis), le caractère "i" (\u0069) est la version en minuscule du caractère "I" (\u0049).</span><span class="sxs-lookup"><span data-stu-id="e08a2-191">For nearly all Latin alphabets, including U.S. English, the character "i" (\u0069) is the lowercase version of the character "I" (\u0049).</span></span> <span data-ttu-id="e08a2-192">Cette règle de casse devient rapidement la valeur par défaut pour quelqu'un qui effectue de la programmation dans une telle culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-192">This casing rule quickly becomes the default for someone programming in such a culture.</span></span> <span data-ttu-id="e08a2-193">Toutefois, l’alphabet turc ("tr-TR") inclut un caractère "I avec un point", "İ" (\u0130), qui est la version en majuscule de "i".</span><span class="sxs-lookup"><span data-stu-id="e08a2-193">However, the Turkish ("tr-TR") alphabet includes an "I with a dot" character "İ" (\u0130), which is the capital version of "i".</span></span> <span data-ttu-id="e08a2-194">Le turc comprend également un caractère "i sans point" minuscule, "ı" (\u0131), dont la majuscule est "I".</span><span class="sxs-lookup"><span data-stu-id="e08a2-194">Turkish also includes a lowercase "i without a dot" character, "ı" (\u0131), which capitalizes to "I".</span></span> <span data-ttu-id="e08a2-195">Ce comportement se produit également dans la culture azérie ("az").</span><span class="sxs-lookup"><span data-stu-id="e08a2-195">This behavior occurs in the Azerbaijani ("az") culture as well.</span></span>

<span data-ttu-id="e08a2-196">Par conséquent, les suppositions faites sur la mise en majuscule du "i" ou de la mise en minuscule du "I" ne sont pas valides dans toutes les cultures.</span><span class="sxs-lookup"><span data-stu-id="e08a2-196">Therefore, assumptions made about capitalizing "i" or lowercasing "I" are not valid among all cultures.</span></span> <span data-ttu-id="e08a2-197">Si vous utilisez les surcharges par défaut pour les routines de comparaison de chaînes, elles varieront suivant les cultures.</span><span class="sxs-lookup"><span data-stu-id="e08a2-197">If you use the default overloads for string comparison routines, they will be subject to variance between cultures.</span></span> <span data-ttu-id="e08a2-198">Si les données à comparer sont non linguistiques, l'utilisation de surcharges par défaut peut produire des résultats indésirables, comme le montre la tentative suivante d'exécution d'une comparaison ne respectant pas la casse des chaînes "file" et "FILE".</span><span class="sxs-lookup"><span data-stu-id="e08a2-198">If the data to be compared is non-linguistic, using the default overloads can produce undesirable results, as the following attempt to perform a case-insensitive comparison of the strings "file" and "FILE" illustrates.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#11](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/turkish1.cs#11)]
[!code-vb[Conceptual.Strings.BestPractices#11](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/turkish1.vb#11)]

<span data-ttu-id="e08a2-199">Cette comparaison peut provoquer de sérieux problèmes si la culture est utilisée par inadvertance dans des paramètres de sécurité sensibles, comme dans l'exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="e08a2-199">This comparison could cause significant problems if the culture is inadvertently used in security-sensitive settings, as in the following example.</span></span> <span data-ttu-id="e08a2-200">Un appel de méthode comme `IsFileURI("file:")` retourne `true` si la culture actuelle est Anglais (États-Unis), mais `false` si la culture actuelle est Turc.</span><span class="sxs-lookup"><span data-stu-id="e08a2-200">A method call such as `IsFileURI("file:")` returns `true` if the current culture is U.S. English, but `false` if the current culture is Turkish.</span></span> <span data-ttu-id="e08a2-201">Par conséquent, sur les systèmes turcs, quelqu'un pourrait contourner les mesures de sécurité qui bloquent l'accès aux URI ne respectant pas la casse qui commencent par "FILE:".</span><span class="sxs-lookup"><span data-stu-id="e08a2-201">Thus, on Turkish systems, someone could circumvent security measures that block access to case-insensitive URIs that begin with "FILE:".</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#12](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/turkish1.cs#12)]
[!code-vb[Conceptual.Strings.BestPractices#12](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/turkish1.vb#12)]

<span data-ttu-id="e08a2-202">Dans ce cas, étant donné que « file : » est destiné à être interprété comme un identificateur non linguistique et indépendant de la culture, le code doit plutôt être écrit comme indiqué dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="e08a2-202">In this case, because "file:" is meant to be interpreted as a non-linguistic, culture-insensitive identifier, the code should instead be written as shown in the following example:</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#13](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/turkish1.cs#13)]
[!code-vb[Conceptual.Strings.BestPractices#13](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/turkish1.vb#13)]

### <a name="ordinal-string-operations"></a><span data-ttu-id="e08a2-203">Opérations de chaînes ordinales</span><span class="sxs-lookup"><span data-stu-id="e08a2-203">Ordinal string operations</span></span>

<span data-ttu-id="e08a2-204">La spécification de la valeur <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> ou <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> dans un appel de méthode correspond à une comparaison non linguistique dans laquelle les fonctionnalités de langages naturels sont ignorées.</span><span class="sxs-lookup"><span data-stu-id="e08a2-204">Specifying the <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> value in a method call signifies a non-linguistic comparison in which the features of natural languages are ignored.</span></span> <span data-ttu-id="e08a2-205">Les méthodes qui sont appelées avec ces valeurs <xref:System.StringComparison> font reposer les décisions d'opération de chaîne sur de simples comparaisons d'octets plutôt que sur la casse ou des tables d'équivalences paramétrables par la culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-205">Methods that are invoked with these <xref:System.StringComparison> values base string operation decisions on simple byte comparisons instead of casing or equivalence tables that are parameterized by culture.</span></span> <span data-ttu-id="e08a2-206">Dans la plupart des cas, cette approche correspond le mieux à l'interprétation de chaînes prévue tout en rendant le code plus rapide et plus fiable.</span><span class="sxs-lookup"><span data-stu-id="e08a2-206">In most cases, this approach best fits the intended interpretation of strings while making code faster and more reliable.</span></span>

<span data-ttu-id="e08a2-207">Les comparaisons ordinales sont des comparaisons de chaînes dans lesquelles chaque octet de chaque chaîne est comparé sans interprétation linguistique ; par exemple, "windows" ne correspond pas à "Windows".</span><span class="sxs-lookup"><span data-stu-id="e08a2-207">Ordinal comparisons are string comparisons in which each byte of each string is compared without linguistic interpretation; for example, "windows" does not match "Windows".</span></span> <span data-ttu-id="e08a2-208">Il s’agit fondamentalement d’un appel à la fonction `strcmp` du runtime C.</span><span class="sxs-lookup"><span data-stu-id="e08a2-208">This is essentially a call to the C runtime `strcmp` function.</span></span> <span data-ttu-id="e08a2-209">Utilisez cette comparaison quand le contexte indique que les chaînes doivent correspondre exactement ou demande une stratégie de correspondance classique.</span><span class="sxs-lookup"><span data-stu-id="e08a2-209">Use this comparison when the context dictates that strings should be matched exactly or demands conservative matching policy.</span></span> <span data-ttu-id="e08a2-210">En outre, la comparaison ordinale est l'opération de comparaison la plus rapide, car elle n'applique aucune règle linguistique lors de la détermination d'un résultat.</span><span class="sxs-lookup"><span data-stu-id="e08a2-210">Additionally, ordinal comparison is the fastest comparison operation because it applies no linguistic rules when determining a result.</span></span>

<span data-ttu-id="e08a2-211">Les chaînes dans .NET peuvent contenir des caractères Null incorporés.</span><span class="sxs-lookup"><span data-stu-id="e08a2-211">Strings in .NET can contain embedded null characters.</span></span> <span data-ttu-id="e08a2-212">L'une des différences les plus évidentes entre la comparaison ordinale et la comparaison dépendante de la culture (y compris les comparaisons qui utilisent la culture dite indifférente) concerne la gestion des caractères Null incorporés dans une chaîne.</span><span class="sxs-lookup"><span data-stu-id="e08a2-212">One of the clearest differences between ordinal and culture-sensitive comparison (including comparisons that use the invariant culture) concerns the handling of embedded null characters in a string.</span></span> <span data-ttu-id="e08a2-213">Ces caractères sont ignorés quand vous utilisez les méthodes <xref:System.String.Compare%2A?displayProperty=nameWithType> et <xref:System.String.Equals%2A?displayProperty=nameWithType> pour effectuer des comparaisons dépendantes de la culture (notamment des comparaisons qui utilisent la culture dite indifférente).</span><span class="sxs-lookup"><span data-stu-id="e08a2-213">These characters are ignored when you use the <xref:System.String.Compare%2A?displayProperty=nameWithType> and <xref:System.String.Equals%2A?displayProperty=nameWithType> methods to perform culture-sensitive comparisons (including comparisons that use the invariant culture).</span></span> <span data-ttu-id="e08a2-214">Par conséquent, dans les comparaisons dépendantes de la culture, les chaînes qui contiennent des caractères Null incorporés peuvent être considérées comme égales à des chaînes qui n'en contiennent pas.</span><span class="sxs-lookup"><span data-stu-id="e08a2-214">As a result, in culture-sensitive comparisons, strings that contain embedded null characters can be considered equal to strings that do not.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e08a2-215">Les méthodes de comparaison de chaînes ignorent les caractères Null incorporés, contrairement aux méthodes de recherche de chaînes telles que <xref:System.String.Contains%2A?displayProperty=nameWithType>, <xref:System.String.EndsWith%2A?displayProperty=nameWithType>, <xref:System.String.IndexOf%2A?displayProperty=nameWithType>, <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType>et <xref:System.String.StartsWith%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-215">Although string comparison methods disregard embedded null characters, string search methods such as <xref:System.String.Contains%2A?displayProperty=nameWithType>, <xref:System.String.EndsWith%2A?displayProperty=nameWithType>, <xref:System.String.IndexOf%2A?displayProperty=nameWithType>, <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType>, and <xref:System.String.StartsWith%2A?displayProperty=nameWithType> do not.</span></span>

<span data-ttu-id="e08a2-216">L’exemple suivant effectue une comparaison dépendante de la culture de la chaîne "AA" avec une chaîne semblable qui contient plusieurs caractères null incorporés entre "A" et "a", et montre comment les deux chaînes sont considérées comme égales :</span><span class="sxs-lookup"><span data-stu-id="e08a2-216">The following example performs a culture-sensitive comparison of the string "Aa" with a similar string that contains several embedded null characters between "A" and "a", and shows how the two strings are considered equal:</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#19](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/embeddednulls1.cs#19)]
 [!code-vb[Conceptual.Strings.BestPractices#19](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/embeddednulls1.vb#19)]

<span data-ttu-id="e08a2-217">Toutefois, les chaînes ne sont pas considérées comme égales quand vous utilisez la comparaison ordinale, comme le montre l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="e08a2-217">However, the strings are not considered equal when you use ordinal comparison, as the following example shows:</span></span>
  
[!code-csharp[Conceptual.Strings.BestPractices#20](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/embeddednulls2.cs#20)]
[!code-vb[Conceptual.Strings.BestPractices#20](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/embeddednulls2.vb#20)]

<span data-ttu-id="e08a2-218">Les comparaisons ordinales ne respectant pas la casse sont l'approche la plus conservatrice suivante.</span><span class="sxs-lookup"><span data-stu-id="e08a2-218">Case-insensitive ordinal comparisons are the next most conservative approach.</span></span> <span data-ttu-id="e08a2-219">Ces comparaisons ignorent la plus grande partie de la casse ; par exemple, "windows" correspond à "Windows".</span><span class="sxs-lookup"><span data-stu-id="e08a2-219">These comparisons ignore most casing; for example, "windows" matches "Windows".</span></span> <span data-ttu-id="e08a2-220">Lors du traitement de caractères ASCII, cette stratégie est équivalente à <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>, excepté qu'elle ignore la casse ASCII habituelle.</span><span class="sxs-lookup"><span data-stu-id="e08a2-220">When dealing with ASCII characters, this policy is equivalent to <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>, except that it ignores the usual ASCII casing.</span></span> <span data-ttu-id="e08a2-221">Par conséquent, tout caractère de la plage [A, Z] (\u0041-\u005A) correspond au caractère correspondant de la plage [a,z] (\u0061-\007A).</span><span class="sxs-lookup"><span data-stu-id="e08a2-221">Therefore, any character in [A, Z] (\u0041-\u005A) matches the corresponding character in [a,z] (\u0061-\007A).</span></span> <span data-ttu-id="e08a2-222">La casse hors de la plage ASCII utilise les tables de la culture dite indifférente.</span><span class="sxs-lookup"><span data-stu-id="e08a2-222">Casing outside the ASCII range uses the invariant culture's tables.</span></span> <span data-ttu-id="e08a2-223">Par conséquent, la comparaison suivante :</span><span class="sxs-lookup"><span data-stu-id="e08a2-223">Therefore, the following comparison:</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#4](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/comparison2.cs#4)]
[!code-vb[Conceptual.Strings.BestPractices#4](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/comparison2.vb#4)]

<span data-ttu-id="e08a2-224">est équivalente à la comparaison suivante (mais plus rapide) :</span><span class="sxs-lookup"><span data-stu-id="e08a2-224">is equivalent to (but faster than) this comparison:</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#5](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/comparison2.cs#5)]
[!code-vb[Conceptual.Strings.BestPractices#5](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/comparison2.vb#5)]

<span data-ttu-id="e08a2-225">Ces comparaisons restent très rapides.</span><span class="sxs-lookup"><span data-stu-id="e08a2-225">These comparisons are still very fast.</span></span>

> [!NOTE]
> <span data-ttu-id="e08a2-226"><xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType>constitue la meilleure représentation du comportement de chaîne du système de fichiers, des clés de Registre et des valeurs, ainsi que des variables d'environnement.</span><span class="sxs-lookup"><span data-stu-id="e08a2-226">The string behavior of the file system, registry keys and values, and environment variables is best represented by <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="e08a2-227"><xref:System.StringComparison.Ordinal?displayProperty=nameWithType> et <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> utilisent tous les deux directement les valeurs binaires et sont les plus adaptés à la mise en correspondance.</span><span class="sxs-lookup"><span data-stu-id="e08a2-227">Both <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> and <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> use the binary values directly, and are best suited for matching.</span></span> <span data-ttu-id="e08a2-228">Quand vous n'êtes pas sûr de vos paramètres de comparaison, utilisez l'une de ces deux valeurs.</span><span class="sxs-lookup"><span data-stu-id="e08a2-228">When you are not sure about your comparison settings, use one of these two values.</span></span> <span data-ttu-id="e08a2-229">Toutefois, étant donné qu'elles effectuent une comparaison octet par octet, elles n'effectuent pas le tri selon un ordre de tri linguistique (comme un dictionnaire français), mais selon un ordre de tri binaire.</span><span class="sxs-lookup"><span data-stu-id="e08a2-229">However, because they perform a byte-by-byte comparison, they do not sort by a linguistic sort order (like an English dictionary) but by a binary sort order.</span></span> <span data-ttu-id="e08a2-230">Les résultats peuvent sembler étranges dans la plupart des contextes s'ils sont affichés aux utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="e08a2-230">The results may look odd in most contexts if displayed to users.</span></span>

<span data-ttu-id="e08a2-231">La sémantique ordinale est la valeur par défaut pour les surcharges de <xref:System.String.Equals%2A?displayProperty=nameWithType> qui n'incluent pas d'argument <xref:System.StringComparison> (notamment l'opérateur d'égalité).</span><span class="sxs-lookup"><span data-stu-id="e08a2-231">Ordinal semantics are the default for <xref:System.String.Equals%2A?displayProperty=nameWithType> overloads that do not include a <xref:System.StringComparison> argument (including the equality operator).</span></span> <span data-ttu-id="e08a2-232">Dans tous les cas, nous vous recommandons d'appeler une surcharge ayant un paramètre <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-232">In any case, we recommend that you call an overload that has a <xref:System.StringComparison> parameter.</span></span>

### <a name="string-operations-that-use-the-invariant-culture"></a><span data-ttu-id="e08a2-233">opérations de chaîne qui utilisent la culture dite indifférente</span><span class="sxs-lookup"><span data-stu-id="e08a2-233">string operations that use the invariant culture</span></span>

<span data-ttu-id="e08a2-234">Les comparaisons avec la culture dite indifférente utilisent la propriété <xref:System.Globalization.CultureInfo.CompareInfo%2A> retournée par la propriété <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> statique.</span><span class="sxs-lookup"><span data-stu-id="e08a2-234">Comparisons with the invariant culture use the <xref:System.Globalization.CultureInfo.CompareInfo%2A> property returned by the static <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="e08a2-235">Ce comportement est le même sur tous les systèmes ; il traduit tous les caractères en dehors de sa plage en ce qu'il suppose être des caractères invariants équivalents.</span><span class="sxs-lookup"><span data-stu-id="e08a2-235">This behavior is the same on all systems; it translates any characters outside its range into what it believes are equivalent invariant characters.</span></span> <span data-ttu-id="e08a2-236">Cette stratégie peut être utile pour la gestion d'un jeu de comportements de chaîne dans toutes les cultures, mais elle donne souvent des résultats inattendus.</span><span class="sxs-lookup"><span data-stu-id="e08a2-236">This policy can be useful for maintaining one set of string behavior across cultures, but it often provides unexpected results.</span></span>

<span data-ttu-id="e08a2-237">Les comparaisons ne respectant pas la casse avec la culture dite indifférente utilisent également la propriété <xref:System.Globalization.CultureInfo.CompareInfo%2A> statique retournée également par la propriété <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> statique pour les informations de comparaison.</span><span class="sxs-lookup"><span data-stu-id="e08a2-237">Case-insensitive comparisons with the invariant culture use the static <xref:System.Globalization.CultureInfo.CompareInfo%2A> property returned by the static <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property for comparison information as well.</span></span> <span data-ttu-id="e08a2-238">Toutes les différences de casse entre ces caractères traduits sont ignorées.</span><span class="sxs-lookup"><span data-stu-id="e08a2-238">Any case differences among these translated characters are ignored.</span></span>

<span data-ttu-id="e08a2-239">Les comparaisons qui utilisent <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> et <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> fonctionnent de la même manière sur les chaînes ASCII.</span><span class="sxs-lookup"><span data-stu-id="e08a2-239">Comparisons that use <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> and <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> work identically on ASCII strings.</span></span> <span data-ttu-id="e08a2-240">Toutefois, <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> prend des décisions linguistiques qui peuvent ne pas être appropriées pour les chaînes qui doivent être interprétées comme un jeu d'octets.</span><span class="sxs-lookup"><span data-stu-id="e08a2-240">However, <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> makes linguistic decisions that might not be appropriate for strings that have to be interpreted as a set of bytes.</span></span> <span data-ttu-id="e08a2-241">L’objet `CultureInfo.InvariantCulture.CompareInfo` entraîne l’interprétation par la méthode <xref:System.String.Compare%2A> de certains jeux de caractères comme étant équivalents.</span><span class="sxs-lookup"><span data-stu-id="e08a2-241">The `CultureInfo.InvariantCulture.CompareInfo` object makes the <xref:System.String.Compare%2A> method interpret certain sets of characters as equivalent.</span></span> <span data-ttu-id="e08a2-242">Par exemple, l'équivalence suivante est valide dans la culture dite indifférente :</span><span class="sxs-lookup"><span data-stu-id="e08a2-242">For example, the following equivalence is valid under the invariant culture:</span></span>

<span data-ttu-id="e08a2-243">InvariantCulture: a + ̊ = å</span><span class="sxs-lookup"><span data-stu-id="e08a2-243">InvariantCulture: a + ̊ = å</span></span>

<span data-ttu-id="e08a2-244">Le caractère LETTRE MINUSCULE LATINE A "a" (\u0061), quand il se trouve à côté du caractère DIACRITIQUE ROND EN CHEF " + " ̊" (\u030a), est interprété comme une LETTRE MINUSCULE LATINE A AVEC DIACRITIQUE ROND EN CHEF "å" (\u00e5).</span><span class="sxs-lookup"><span data-stu-id="e08a2-244">The LATIN SMALL LETTER A character "a"  (\u0061), when it is next to the COMBINING RING ABOVE character "+ " ̊" (\u030a), is interpreted as the LATIN SMALL LETTER A WITH RING ABOVE character "å" (\u00e5).</span></span> <span data-ttu-id="e08a2-245">Comme le montre l'exemple suivant, ce comportement diffère de la comparaison ordinale.</span><span class="sxs-lookup"><span data-stu-id="e08a2-245">As the following example shows, this behavior differs from ordinal comparison.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#15](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/comparison3.cs#15)]
[!code-vb[Conceptual.Strings.BestPractices#15](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/comparison3.vb#15)]

<span data-ttu-id="e08a2-246">Lors de l’interprétation de noms de fichiers, de cookies ou de tout autre élément dans lequel peut s’afficher une combinaison telle que "å", les comparaisons ordinales offrent toujours le comportement le plus transparent et le plus approprié.</span><span class="sxs-lookup"><span data-stu-id="e08a2-246">When interpreting file names, cookies, or anything else where a combination such as "å" can appear, ordinal comparisons still offer the most transparent and fitting behavior.</span></span>

<span data-ttu-id="e08a2-247">En définitive, la culture dite indifférente a très peu de propriétés qui la rendent utile pour la comparaison.</span><span class="sxs-lookup"><span data-stu-id="e08a2-247">On balance, the invariant culture has very few properties that make it useful for comparison.</span></span> <span data-ttu-id="e08a2-248">Elle effectue la comparaison d'une manière linguistiquement pertinente, qui l'empêche de garantir une équivalence symbolique complète, mais elle ne constitue pas le choix approprié pour l'affichage dans n'importe quelle culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-248">It does comparison in a linguistically relevant manner, which prevents it from guaranteeing full symbolic equivalence, but it is not the choice for display in any culture.</span></span> <span data-ttu-id="e08a2-249">L'une des rares raisons justifiant l'utilisation de <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> pour la comparaison est de rendre persistantes des données classées pour un affichage identique dans toutes les cultures.</span><span class="sxs-lookup"><span data-stu-id="e08a2-249">One of the few reasons to use <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> for comparison is to persist ordered data for a cross-culturally identical display.</span></span> <span data-ttu-id="e08a2-250">Par exemple, si un fichier de données volumineux qui contient une liste d'identificateurs triés à des fins d'affichage accompagne une application, un ajout à cette liste nécessiterait une insertion avec un tri de style invariant.</span><span class="sxs-lookup"><span data-stu-id="e08a2-250">For example, if a large data file that contains a list of sorted identifiers for display accompanies an application, adding to this list would require an insertion with invariant-style sorting.</span></span>

## <a name="choosing-a-stringcomparison-member-for-your-method-call"></a><span data-ttu-id="e08a2-251">Choix d’un membre StringComparison pour votre appel de méthode</span><span class="sxs-lookup"><span data-stu-id="e08a2-251">Choosing a StringComparison member for your method call</span></span>

<span data-ttu-id="e08a2-252">Le tableau suivant présente le mappage du contexte de chaîne sémantique à un membre de l' <xref:System.StringComparison> énumération :</span><span class="sxs-lookup"><span data-stu-id="e08a2-252">The following table outlines the mapping from semantic string context to a <xref:System.StringComparison> enumeration member:</span></span>

|<span data-ttu-id="e08a2-253">Données</span><span class="sxs-lookup"><span data-stu-id="e08a2-253">Data</span></span>|<span data-ttu-id="e08a2-254">Comportement</span><span class="sxs-lookup"><span data-stu-id="e08a2-254">Behavior</span></span>|<span data-ttu-id="e08a2-255">Valeur System.StringComparison</span><span class="sxs-lookup"><span data-stu-id="e08a2-255">Corresponding System.StringComparison</span></span><br /><br /> <span data-ttu-id="e08a2-256">value</span><span class="sxs-lookup"><span data-stu-id="e08a2-256">value</span></span>|
|----------|--------------|-----------------------------------------------------|
|<span data-ttu-id="e08a2-257">Identificateurs internes respectant la casse.</span><span class="sxs-lookup"><span data-stu-id="e08a2-257">Case-sensitive internal identifiers.</span></span><br /><br /> <span data-ttu-id="e08a2-258">Identificateurs respectant la casse dans des normes telles que XML et HTTP.</span><span class="sxs-lookup"><span data-stu-id="e08a2-258">Case-sensitive identifiers in standards such as XML and HTTP.</span></span><br /><br /> <span data-ttu-id="e08a2-259">Paramètres liés à la sécurité respectant la casse.</span><span class="sxs-lookup"><span data-stu-id="e08a2-259">Case-sensitive security-related settings.</span></span>|<span data-ttu-id="e08a2-260">Identificateur non linguistique, où les octets correspondent exactement.</span><span class="sxs-lookup"><span data-stu-id="e08a2-260">A non-linguistic identifier, where bytes match exactly.</span></span>|<xref:System.StringComparison.Ordinal>|
|<span data-ttu-id="e08a2-261">Identificateurs internes ne respectant pas la casse.</span><span class="sxs-lookup"><span data-stu-id="e08a2-261">Case-insensitive internal identifiers.</span></span><br /><br /> <span data-ttu-id="e08a2-262">Identificateurs ne respectant pas la casse dans des normes telles que XML et HTTP.</span><span class="sxs-lookup"><span data-stu-id="e08a2-262">Case-insensitive identifiers in standards such as XML and HTTP.</span></span><br /><br /> <span data-ttu-id="e08a2-263">Chemins d'accès aux fichiers.</span><span class="sxs-lookup"><span data-stu-id="e08a2-263">File paths.</span></span><br /><br /> <span data-ttu-id="e08a2-264">Clés et valeurs de Registre.</span><span class="sxs-lookup"><span data-stu-id="e08a2-264">Registry keys and values.</span></span><br /><br /> <span data-ttu-id="e08a2-265">Variables d'environnement.</span><span class="sxs-lookup"><span data-stu-id="e08a2-265">Environment variables.</span></span><br /><br /> <span data-ttu-id="e08a2-266">Identificateurs de ressource (par exemple, noms de handles).</span><span class="sxs-lookup"><span data-stu-id="e08a2-266">Resource identifiers (for example, handle names).</span></span><br /><br /> <span data-ttu-id="e08a2-267">Paramètres liés à la sécurité ne respectant pas la casse.</span><span class="sxs-lookup"><span data-stu-id="e08a2-267">Case-insensitive security-related settings.</span></span>|<span data-ttu-id="e08a2-268">Identificateur non linguistique, où la casse n'est pas pertinente ; en particulier, les données stockées dans la plupart des services système Windows.</span><span class="sxs-lookup"><span data-stu-id="e08a2-268">A non-linguistic identifier, where case is irrelevant; especially data stored in most Windows system services.</span></span>|<xref:System.StringComparison.OrdinalIgnoreCase>|
|<span data-ttu-id="e08a2-269">Certaines données rendues persistantes et linguistiquement pertinentes.</span><span class="sxs-lookup"><span data-stu-id="e08a2-269">Some persisted, linguistically relevant data.</span></span><br /><br /> <span data-ttu-id="e08a2-270">Affichage de données linguistiques qui nécessitent un ordre de tri fixe.</span><span class="sxs-lookup"><span data-stu-id="e08a2-270">Display of linguistic data that requires a fixed sort order.</span></span>|<span data-ttu-id="e08a2-271">Données dont la culture n'est pas spécifiée qui sont toutefois linguistiquement pertinentes.</span><span class="sxs-lookup"><span data-stu-id="e08a2-271">Culturally agnostic data that still is linguistically relevant.</span></span>|<xref:System.StringComparison.InvariantCulture><br /><br /> <span data-ttu-id="e08a2-272">-ou-</span><span class="sxs-lookup"><span data-stu-id="e08a2-272">-or-</span></span><br /><br /> <xref:System.StringComparison.InvariantCultureIgnoreCase>|
|<span data-ttu-id="e08a2-273">Données affichées à l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="e08a2-273">Data displayed to the user.</span></span><br /><br /> <span data-ttu-id="e08a2-274">La plupart des entrées d'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="e08a2-274">Most user input.</span></span>|<span data-ttu-id="e08a2-275">Données qui nécessitent des usages linguistiques locaux.</span><span class="sxs-lookup"><span data-stu-id="e08a2-275">Data that requires local linguistic customs.</span></span>|<xref:System.StringComparison.CurrentCulture><br /><br /> <span data-ttu-id="e08a2-276">-ou-</span><span class="sxs-lookup"><span data-stu-id="e08a2-276">-or-</span></span><br /><br /> <xref:System.StringComparison.CurrentCultureIgnoreCase>|

## <a name="common-string-comparison-methods-in-net"></a><span data-ttu-id="e08a2-277">Méthodes courantes de comparaison de chaînes dans .NET</span><span class="sxs-lookup"><span data-stu-id="e08a2-277">Common string comparison methods in .NET</span></span>

<span data-ttu-id="e08a2-278">Les sections suivantes décrivent les méthodes le plus souvent utilisées pour la comparaison de chaînes.</span><span class="sxs-lookup"><span data-stu-id="e08a2-278">The following sections describe the methods that are most commonly used for string comparison.</span></span>

### <a name="stringcompare"></a><span data-ttu-id="e08a2-279">String.Compare</span><span class="sxs-lookup"><span data-stu-id="e08a2-279">String.Compare</span></span>

<span data-ttu-id="e08a2-280">Interprétation par défaut : <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-280">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="e08a2-281">En tant qu'opération la plus centrale de l'interprétation de chaînes, toutes les instances de ces appels de méthode doivent être examinées pour déterminer si les chaînes doivent être interprétées d'après la culture actuelle ou être dissociées de la culture (symboliquement).</span><span class="sxs-lookup"><span data-stu-id="e08a2-281">As the operation most central to string interpretation, all instances of these method calls should be examined to determine whether strings should be interpreted according to the current culture, or dissociated from the culture (symbolically).</span></span> <span data-ttu-id="e08a2-282">L'opération appropriée est, en général, la dernière, et une comparaison <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> doit être utilisée à la place.</span><span class="sxs-lookup"><span data-stu-id="e08a2-282">Typically, it is the latter, and a <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> comparison should be used instead.</span></span>

<span data-ttu-id="e08a2-283">La classe <xref:System.Globalization.CompareInfo?displayProperty=nameWithType> , retournée par la propriété <xref:System.Globalization.CultureInfo.CompareInfo%2A?displayProperty=nameWithType> , inclut également une méthode <xref:System.Globalization.CompareInfo.Compare%2A> qui fournit un grand nombre d'options de correspondance (ordinale, ignorance des espaces blancs, ignorance du type Kana, etc.) au moyen de l'énumération d'indicateur <xref:System.Globalization.CompareOptions> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-283">The <xref:System.Globalization.CompareInfo?displayProperty=nameWithType> class, which is returned by the <xref:System.Globalization.CultureInfo.CompareInfo%2A?displayProperty=nameWithType> property, also includes a <xref:System.Globalization.CompareInfo.Compare%2A> method that provides a large number of matching options (ordinal, ignoring white space, ignoring kana type, and so on) by means of the <xref:System.Globalization.CompareOptions> flag enumeration.</span></span>

### <a name="stringcompareto"></a><span data-ttu-id="e08a2-284">String.CompareTo</span><span class="sxs-lookup"><span data-stu-id="e08a2-284">String.CompareTo</span></span>

<span data-ttu-id="e08a2-285">Interprétation par défaut : <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-285">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="e08a2-286">Cette méthode n'offre actuellement pas de surcharge spécifiant un type <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-286">This method does not currently offer an overload that specifies a <xref:System.StringComparison> type.</span></span> <span data-ttu-id="e08a2-287">Il est généralement possible de convertir cette méthode dans la forme <xref:System.String.Compare%28System.String%2CSystem.String%2CSystem.StringComparison%29?displayProperty=nameWithType> recommandée.</span><span class="sxs-lookup"><span data-stu-id="e08a2-287">It is usually possible to convert this method to the recommended <xref:System.String.Compare%28System.String%2CSystem.String%2CSystem.StringComparison%29?displayProperty=nameWithType> form.</span></span>

<span data-ttu-id="e08a2-288">Les types qui implémentent les interfaces <xref:System.IComparable> et <xref:System.IComparable%601> implémentent cette méthode.</span><span class="sxs-lookup"><span data-stu-id="e08a2-288">Types that implement the <xref:System.IComparable> and <xref:System.IComparable%601> interfaces implement this method.</span></span> <span data-ttu-id="e08a2-289">Étant donné qu'elle n'offre pas la possibilité d'un paramètre <xref:System.StringComparison> , les types d'implémentation permettent souvent à l'utilisateur de spécifier un <xref:System.StringComparer> dans leur constructeur.</span><span class="sxs-lookup"><span data-stu-id="e08a2-289">Because it does not offer the option of a <xref:System.StringComparison> parameter, implementing types often let the user specify a <xref:System.StringComparer> in their constructor.</span></span> <span data-ttu-id="e08a2-290">L'exemple suivant définit une classe `FileName` dont le constructeur de classe inclut un paramètre <xref:System.StringComparer> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-290">The following example defines a `FileName` class whose class constructor includes a <xref:System.StringComparer> parameter.</span></span> <span data-ttu-id="e08a2-291">Cet objet <xref:System.StringComparer> est ensuite utilisé dans la méthode `FileName.CompareTo` .</span><span class="sxs-lookup"><span data-stu-id="e08a2-291">This <xref:System.StringComparer> object is then used in the `FileName.CompareTo` method.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#6](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/api1.cs#6)]
[!code-vb[Conceptual.Strings.BestPractices#6](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/api1.vb#6)]

### <a name="stringequals"></a><span data-ttu-id="e08a2-292">String.Equals</span><span class="sxs-lookup"><span data-stu-id="e08a2-292">String.Equals</span></span>

<span data-ttu-id="e08a2-293">Interprétation par défaut : <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-293">Default interpretation: <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="e08a2-294">La classe <xref:System.String> vous permet de tester l'égalité en appelant les surcharges de méthode <xref:System.String.Equals%2A> statique ou d'instance, ou en utilisant l'opérateur d'égalité statique.</span><span class="sxs-lookup"><span data-stu-id="e08a2-294">The <xref:System.String> class lets you test for equality by calling either the static or instance <xref:System.String.Equals%2A> method overloads, or by using the static equality operator.</span></span> <span data-ttu-id="e08a2-295">Par défaut, les surcharges et l'opérateur utilisent la comparaison ordinale.</span><span class="sxs-lookup"><span data-stu-id="e08a2-295">The overloads and operator use ordinal comparison by default.</span></span> <span data-ttu-id="e08a2-296">Toutefois, nous vous recommandons quand même d'appeler une surcharge qui spécifie explicitement le type <xref:System.StringComparison> , même si vous voulez effectuer une comparaison ordinale ; cela le simplifie la recherche d'une interprétation de chaîne particulière dans du code.</span><span class="sxs-lookup"><span data-stu-id="e08a2-296">However, we still recommend that you call an overload that explicitly specifies the <xref:System.StringComparison> type even if you want to perform an ordinal comparison; this makes it easier to search code for a certain string interpretation.</span></span>

### <a name="stringtoupper-and-stringtolower"></a><span data-ttu-id="e08a2-297">String.ToUpper et String.ToLower</span><span class="sxs-lookup"><span data-stu-id="e08a2-297">String.ToUpper and String.ToLower</span></span>

<span data-ttu-id="e08a2-298">Interprétation par défaut : <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-298">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="e08a2-299">Vous devez faire preuve de prudence quand vous utilisez ces méthodes, car imposer une majuscule ou une minuscule dans une chaîne est souvent utilisé comme une petite normalisation pour la comparaison de chaînes indépendamment de la casse.</span><span class="sxs-lookup"><span data-stu-id="e08a2-299">You should be careful when you use these methods, because forcing a string to a uppercase or lowercase is often used as a small normalization for comparing strings regardless of case.</span></span> <span data-ttu-id="e08a2-300">Si tel est le cas, vous devez envisager d'utiliser une comparaison ne respectant pas la casse.</span><span class="sxs-lookup"><span data-stu-id="e08a2-300">If so, consider using a case-insensitive comparison.</span></span>

<span data-ttu-id="e08a2-301">Les méthodes <xref:System.String.ToUpperInvariant%2A?displayProperty=nameWithType> et <xref:System.String.ToLowerInvariant%2A?displayProperty=nameWithType> sont également disponibles.</span><span class="sxs-lookup"><span data-stu-id="e08a2-301">The <xref:System.String.ToUpperInvariant%2A?displayProperty=nameWithType> and <xref:System.String.ToLowerInvariant%2A?displayProperty=nameWithType> methods are also available.</span></span> <span data-ttu-id="e08a2-302"><xref:System.String.ToUpperInvariant%2A> est le moyen standard de normaliser la casse.</span><span class="sxs-lookup"><span data-stu-id="e08a2-302"><xref:System.String.ToUpperInvariant%2A> is the standard way to normalize case.</span></span> <span data-ttu-id="e08a2-303">Les comparaisons faites à l'aide de <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> sont, sur le plan comportemental, la composition de deux appels : appel à <xref:System.String.ToUpperInvariant%2A> sur les deux arguments de chaîne, et exécution d'une comparaison à l'aide de <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-303">Comparisons made using <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> are behaviorally the composition of two calls: calling <xref:System.String.ToUpperInvariant%2A> on both string arguments, and doing a comparison using <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="e08a2-304">Des surcharges sont également disponibles pour la conversion en majuscules et en minuscules dans une culture spécifique, en passant à la méthode un objet <xref:System.Globalization.CultureInfo> qui représente cette culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-304">Overloads are also available for converting to uppercase and lowercase in a specific culture, by passing a <xref:System.Globalization.CultureInfo> object that represents that culture to the method.</span></span>

### <a name="chartoupper-and-chartolower"></a><span data-ttu-id="e08a2-305">Char.ToUpper et Char.ToLower</span><span class="sxs-lookup"><span data-stu-id="e08a2-305">Char.ToUpper and Char.ToLower</span></span>

<span data-ttu-id="e08a2-306">Interprétation par défaut : <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-306">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="e08a2-307">Ces méthodes fonctionnent de la même façon que les méthodes <xref:System.String.ToUpper%2A?displayProperty=nameWithType> et <xref:System.String.ToLower%2A?displayProperty=nameWithType> décrites dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="e08a2-307">These methods work similarly to the <xref:System.String.ToUpper%2A?displayProperty=nameWithType> and <xref:System.String.ToLower%2A?displayProperty=nameWithType> methods described in the previous section.</span></span>

### <a name="stringstartswith-and-stringendswith"></a><span data-ttu-id="e08a2-308">String.StartsWith et String.EndsWith</span><span class="sxs-lookup"><span data-stu-id="e08a2-308">String.StartsWith and String.EndsWith</span></span>

<span data-ttu-id="e08a2-309">Interprétation par défaut : <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-309">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="e08a2-310">Par défaut, ces deux méthodes effectuent une comparaison dépendante de la culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-310">By default, both of these methods perform a culture-sensitive comparison.</span></span>

### <a name="stringindexof-and-stringlastindexof"></a><span data-ttu-id="e08a2-311">String.IndexOf et String.LastIndexOf</span><span class="sxs-lookup"><span data-stu-id="e08a2-311">String.IndexOf and String.LastIndexOf</span></span>

<span data-ttu-id="e08a2-312">Interprétation par défaut : <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-312">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="e08a2-313">La façon dont les surcharges par défaut de ces méthodes effectuent les comparaisons n'est pas cohérente.</span><span class="sxs-lookup"><span data-stu-id="e08a2-313">There is a lack of consistency in how the default overloads of these methods perform comparisons.</span></span> <span data-ttu-id="e08a2-314">Toutes les méthodes <xref:System.String.IndexOf%2A?displayProperty=nameWithType> et <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> qui incluent un paramètre <xref:System.Char> effectuent une comparaison ordinale, mais les méthodes <xref:System.String.IndexOf%2A?displayProperty=nameWithType> et <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> par défaut qui incluent un paramètre <xref:System.String> effectuent une comparaison dépendante de la culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-314">All <xref:System.String.IndexOf%2A?displayProperty=nameWithType> and <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> methods that include a <xref:System.Char> parameter perform an ordinal comparison, but the default <xref:System.String.IndexOf%2A?displayProperty=nameWithType> and <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> methods that include a <xref:System.String> parameter perform a culture-sensitive comparison.</span></span>

<span data-ttu-id="e08a2-315">Si vous appelez la méthode <xref:System.String.IndexOf%28System.String%29?displayProperty=nameWithType> ou <xref:System.String.LastIndexOf%28System.String%29?displayProperty=nameWithType> et que vous lui passez une chaîne à localiser dans l'instance actuelle, nous vous recommandons d'appeler une surcharge qui spécifie explicitement le type <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-315">If you call the <xref:System.String.IndexOf%28System.String%29?displayProperty=nameWithType> or <xref:System.String.LastIndexOf%28System.String%29?displayProperty=nameWithType> method and pass it a string to locate in the current instance, we recommend that you call an overload that explicitly specifies the <xref:System.StringComparison> type.</span></span> <span data-ttu-id="e08a2-316">Les surcharges qui incluent un argument <xref:System.Char> ne vous permettent pas de spécifier un type <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-316">The overloads that include a <xref:System.Char> argument do not allow you to specify a <xref:System.StringComparison> type.</span></span>

## <a name="methods-that-perform-string-comparison-indirectly"></a><span data-ttu-id="e08a2-317">Méthodes qui effectuent indirectement la comparaison de chaînes</span><span class="sxs-lookup"><span data-stu-id="e08a2-317">Methods that perform string comparison indirectly</span></span>

<span data-ttu-id="e08a2-318">Certaines méthodes autres que les méthodes de chaîne dont l'opération centrale est la comparaison de chaînes utilisent le type <xref:System.StringComparer> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-318">Some non-string methods that have string comparison as a central operation use the <xref:System.StringComparer> type.</span></span> <span data-ttu-id="e08a2-319">La classe <xref:System.StringComparer> inclut six propriétés statiques qui retournent des instances de <xref:System.StringComparer> dont les méthodes <xref:System.StringComparer.Compare%2A?displayProperty=nameWithType> effectuent les types de comparaisons de chaînes suivants :</span><span class="sxs-lookup"><span data-stu-id="e08a2-319">The <xref:System.StringComparer> class includes six static properties that return <xref:System.StringComparer> instances whose <xref:System.StringComparer.Compare%2A?displayProperty=nameWithType> methods perform the following types of string comparisons:</span></span>

- <span data-ttu-id="e08a2-320">Comparaisons de chaînes dépendantes de la culture à l'aide de la culture actuelle.</span><span class="sxs-lookup"><span data-stu-id="e08a2-320">Culture-sensitive string comparisons using the current culture.</span></span> <span data-ttu-id="e08a2-321">Cet objet <xref:System.StringComparer> est retourné par la propriété <xref:System.StringComparer.CurrentCulture%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-321">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.CurrentCulture%2A?displayProperty=nameWithType> property.</span></span>
- <span data-ttu-id="e08a2-322">Comparaisons ne respectant pas la casse à l'aide de la culture actuelle.</span><span class="sxs-lookup"><span data-stu-id="e08a2-322">Case-insensitive comparisons using the current culture.</span></span> <span data-ttu-id="e08a2-323">Cet objet <xref:System.StringComparer> est retourné par la propriété <xref:System.StringComparer.CurrentCultureIgnoreCase%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-323">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.CurrentCultureIgnoreCase%2A?displayProperty=nameWithType> property.</span></span>
- <span data-ttu-id="e08a2-324">Comparaisons indépendantes de la culture à l'aide des règles de comparaison de mots de la culture dite indifférente.</span><span class="sxs-lookup"><span data-stu-id="e08a2-324">Culture-insensitive comparisons using the word comparison rules of the invariant culture.</span></span> <span data-ttu-id="e08a2-325">Cet objet <xref:System.StringComparer> est retourné par la propriété <xref:System.StringComparer.InvariantCulture%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-325">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span>
- <span data-ttu-id="e08a2-326">Comparaisons ne respectant pas la casse et indépendantes de la culture à l'aide des règles de comparaison des mots de la culture dite indifférente.</span><span class="sxs-lookup"><span data-stu-id="e08a2-326">Case-insensitive and culture-insensitive comparisons using the word comparison rules of the invariant culture.</span></span> <span data-ttu-id="e08a2-327">Cet objet <xref:System.StringComparer> est retourné par la propriété <xref:System.StringComparer.InvariantCultureIgnoreCase%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-327">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.InvariantCultureIgnoreCase%2A?displayProperty=nameWithType> property.</span></span>
- <span data-ttu-id="e08a2-328">Comparaison ordinale.</span><span class="sxs-lookup"><span data-stu-id="e08a2-328">Ordinal comparison.</span></span> <span data-ttu-id="e08a2-329">Cet objet <xref:System.StringComparer> est retourné par la propriété <xref:System.StringComparer.Ordinal%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-329">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.Ordinal%2A?displayProperty=nameWithType> property.</span></span>
- <span data-ttu-id="e08a2-330">Comparaison ordinale ne respectant pas la casse.</span><span class="sxs-lookup"><span data-stu-id="e08a2-330">Case-insensitive ordinal comparison.</span></span> <span data-ttu-id="e08a2-331">Cet objet <xref:System.StringComparer> est retourné par la propriété <xref:System.StringComparer.OrdinalIgnoreCase%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-331">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.OrdinalIgnoreCase%2A?displayProperty=nameWithType> property.</span></span>

### <a name="arraysort-and-arraybinarysearch"></a><span data-ttu-id="e08a2-332">Array.Sort et Array.BinarySearch</span><span class="sxs-lookup"><span data-stu-id="e08a2-332">Array.Sort and Array.BinarySearch</span></span>

<span data-ttu-id="e08a2-333">Interprétation par défaut : <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-333">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="e08a2-334">Quand vous stockez des données dans une collection ou quand vous lisez des données persistantes à partir d’un fichier ou d’une base de données dans une collection, le changement de culture actuelle peut invalider les invariants de la collection.</span><span class="sxs-lookup"><span data-stu-id="e08a2-334">When you store any data in a collection, or read persisted data from a file or database into a collection, switching the current culture can invalidate the invariants in the collection.</span></span> <span data-ttu-id="e08a2-335">La méthode <xref:System.Array.BinarySearch%2A?displayProperty=nameWithType> suppose que les éléments du tableau dans lequel effectuer la recherche sont déjà triés.</span><span class="sxs-lookup"><span data-stu-id="e08a2-335">The <xref:System.Array.BinarySearch%2A?displayProperty=nameWithType> method assumes that the elements in the array to be searched are already sorted.</span></span> <span data-ttu-id="e08a2-336">Pour trier tout élément de chaîne dans le tableau, la méthode <xref:System.Array.Sort%2A?displayProperty=nameWithType> appelle la méthode <xref:System.String.Compare%2A?displayProperty=nameWithType> pour classer les éléments individuels.</span><span class="sxs-lookup"><span data-stu-id="e08a2-336">To sort any string element in the array, the <xref:System.Array.Sort%2A?displayProperty=nameWithType> method calls the <xref:System.String.Compare%2A?displayProperty=nameWithType> method to order individual elements.</span></span> <span data-ttu-id="e08a2-337">L'utilisation d'un comparateur dépendant de la culture peut s'avérer dangereux si la culture change entre le moment où le tableau est trié et le moment où son contenu fait l'objet d'une recherche.</span><span class="sxs-lookup"><span data-stu-id="e08a2-337">Using a culture-sensitive comparer can be dangerous if the culture changes between the time that the array is sorted and its contents are searched.</span></span> <span data-ttu-id="e08a2-338">Par exemple, dans le code suivant, le stockage et la récupération fonctionnent sur le comparateur fourni implicitement par la propriété `Thread.CurrentThread.CurrentCulture` statique.</span><span class="sxs-lookup"><span data-stu-id="e08a2-338">For example, in the following code, storage and retrieval operate on the comparer that is provided implicitly by the `Thread.CurrentThread.CurrentCulture` property.</span></span> <span data-ttu-id="e08a2-339">Si la culture peut changer entre les appels à `StoreNames` et `DoesNameExist`, et surtout si le contenu du tableau est rendu persistant à un moment donné entre les deux appels de méthode, la recherche binaire peut échouer.</span><span class="sxs-lookup"><span data-stu-id="e08a2-339">If the culture can change between the calls to `StoreNames` and `DoesNameExist`, and especially if the array contents are persisted somewhere between the two method calls, the binary search may fail.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#7](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/indirect1.cs#7)]
 [!code-vb[Conceptual.Strings.BestPractices#7](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/indirect1.vb#7)]

<span data-ttu-id="e08a2-340">L'exemple suivant, qui utilise la même méthode de comparaison ordinale (indépendante de la culture) pour trier le tableau et pour effectuer une recherche, présente une variation recommandée.</span><span class="sxs-lookup"><span data-stu-id="e08a2-340">A recommended variation appears in the following example, which uses the same ordinal (culture-insensitive) comparison method both to sort and to search the array.</span></span> <span data-ttu-id="e08a2-341">Le code de modification est reflété dans les lignes libellées `Line A` et `Line B` dans les deux exemples.</span><span class="sxs-lookup"><span data-stu-id="e08a2-341">The change code is reflected in the lines labeled `Line A` and `Line B` in the two examples.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#8](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/indirect1.cs#8)]
[!code-vb[Conceptual.Strings.BestPractices#8](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/indirect1.vb#8)]

<span data-ttu-id="e08a2-342">Si ces données sont rendues persistantes et déplacées dans toutes les cultures, et que le tri est utilisé pour présenter ces données à l'utilisateur, vous pouvez envisager d'utiliser <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType>, qui fonctionne linguistiquement pour une meilleure sortie d'utilisateur mais n'est pas affecté par les modifications apportées à la culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-342">If this data is persisted and moved across cultures, and sorting is used to present this data to the user, you might consider using <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType>, which operates linguistically for better user output but is unaffected by changes in culture.</span></span> <span data-ttu-id="e08a2-343">L'exemple suivant modifie les deux exemples précédents pour utiliser la culture dite indifférente pour le tri du tableau et la recherche dans celui-ci.</span><span class="sxs-lookup"><span data-stu-id="e08a2-343">The following example modifies the two previous examples to use the invariant culture for sorting and searching the array.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#9](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/indirect1.cs#9)]
[!code-vb[Conceptual.Strings.BestPractices#9](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/indirect1.vb#9)]

### <a name="collections-example-hashtable-constructor"></a><span data-ttu-id="e08a2-344">Exemple de collections : constructeur Hashtable</span><span class="sxs-lookup"><span data-stu-id="e08a2-344">Collections example: Hashtable constructor</span></span>

<span data-ttu-id="e08a2-345">Le hachage de chaînes constitue un deuxième exemple d'opération qui est affectée par la façon dont des chaînes sont comparées.</span><span class="sxs-lookup"><span data-stu-id="e08a2-345">Hashing strings provides a second example of an operation that is affected by the way in which strings are compared.</span></span>

<span data-ttu-id="e08a2-346">L'exemple suivant instancie un objet <xref:System.Collections.Hashtable> en lui passant l'objet <xref:System.StringComparer> qui est retourné par la propriété <xref:System.StringComparer.OrdinalIgnoreCase%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-346">The following example instantiates a <xref:System.Collections.Hashtable> object by passing it the <xref:System.StringComparer> object that is returned by the <xref:System.StringComparer.OrdinalIgnoreCase%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="e08a2-347">Étant donné qu'une classe <xref:System.StringComparer> dérivée de <xref:System.StringComparer> implémente l'interface <xref:System.Collections.IEqualityComparer> , sa méthode <xref:System.Collections.IEqualityComparer.GetHashCode%2A> est utilisée pour calculer le code de hachage de chaînes dans la table de hachage.</span><span class="sxs-lookup"><span data-stu-id="e08a2-347">Because a class <xref:System.StringComparer> that is derived from <xref:System.StringComparer> implements the <xref:System.Collections.IEqualityComparer> interface, its <xref:System.Collections.IEqualityComparer.GetHashCode%2A> method is used to compute the hash code of strings in the hash table.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#10](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/indirect2.cs#10)]
[!code-vb[Conceptual.Strings.BestPractices#10](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/indirect2.vb#10)]

## <a name="displaying-and-persisting-formatted-data"></a><span data-ttu-id="e08a2-348">Affichage et persistance des données mises en forme</span><span class="sxs-lookup"><span data-stu-id="e08a2-348">Displaying and persisting formatted data</span></span>

<span data-ttu-id="e08a2-349">Lorsque vous affichez des données non-chaînées telles que les nombres et les dates et heures aux utilisateurs, mettez-les en forme en utilisant les paramètres de la culture de l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="e08a2-349">When you display non-string data such as numbers and dates and times to users, format them by using the user's cultural settings.</span></span> <span data-ttu-id="e08a2-350">Par défaut, tous les éléments suivants utilisent la culture du thread actuelle dans les opérations de mise en forme :</span><span class="sxs-lookup"><span data-stu-id="e08a2-350">By default, the following all use the current thread culture in formatting operations:</span></span>

- <span data-ttu-id="e08a2-351">Chaînes interpolées prises en charge par les compilateurs [C#](../../csharp/language-reference/tokens/interpolated.md) et [Visual Basic](../../visual-basic/programming-guide/language-features/strings/interpolated-strings.md).</span><span class="sxs-lookup"><span data-stu-id="e08a2-351">Interpolated strings supported by the [C#](../../csharp/language-reference/tokens/interpolated.md) and [Visual Basic](../../visual-basic/programming-guide/language-features/strings/interpolated-strings.md) compilers.</span></span>
- <span data-ttu-id="e08a2-352">Opérations de concaténation de chaîne qui utilisent les opérateurs de concaténation [C#](../../csharp/language-reference/operators/addition-operator.md#string-concatenation) ou [Visual Basic](../../visual-basic/programming-guide/language-features/operators-and-expressions/concatenation-operators.md ), ou qui appellent directement la méthode <xref:System.String.Concat%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-352">String concatenation operations that use the [C#](../../csharp/language-reference/operators/addition-operator.md#string-concatenation) or [Visual Basic](../../visual-basic/programming-guide/language-features/operators-and-expressions/concatenation-operators.md ) concatenation operators or that call the <xref:System.String.Concat%2A?displayProperty=nameWithType> method directly.</span></span>
- <span data-ttu-id="e08a2-353">Méthode <xref:System.String.Format%2A?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="e08a2-353">The <xref:System.String.Format%2A?displayProperty=nameWithType> method.</span></span>
- <span data-ttu-id="e08a2-354">Méthodes `ToString` des types numériques et des types de date et d’heure.</span><span class="sxs-lookup"><span data-stu-id="e08a2-354">The `ToString` methods of the numeric types and the date and time types.</span></span>

<span data-ttu-id="e08a2-355">Pour spécifier explicitement qu’une chaîne doit être mise en forme en utilisant les conventions d’une culture désignée ou de la [culture invariante](xref:System.Globalization.CultureInfo.InvariantCulture), vous pouvez procéder comme suit :</span><span class="sxs-lookup"><span data-stu-id="e08a2-355">To explicitly specify that a string should be formatted by using the conventions of a designated culture or the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture), you can do the following:</span></span>

- <span data-ttu-id="e08a2-356">Quand vous utilisez les méthodes <xref:System.String.Format%2A?displayProperty=nameWithType> et `ToString`, appelez une surcharge qui a un paramètre `provider`, tel que <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> ou <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType> et passez-lui la propriété <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>, une instance <xref:System.Globalization.CultureInfo> qui représente la culture souhaitée, ou la propriété <xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-356">When using the <xref:System.String.Format%2A?displayProperty=nameWithType> and `ToString` methods, call an overload that has a `provider` parameter, such as <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> or <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType>, and pass it the <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> property, a <xref:System.Globalization.CultureInfo> instance that represents the desired culture, or the <xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="e08a2-357">Pour la concaténation de chaîne, n’autorisez pas le compilateur à effectuer de conversions implicites.</span><span class="sxs-lookup"><span data-stu-id="e08a2-357">For string concatenation, do not allow the compiler to perform any implicit conversions.</span></span> <span data-ttu-id="e08a2-358">Au lieu de cela, effectuez une conversion explicite en appelant une surcharge `ToString` ayant un paramètre `provider`.</span><span class="sxs-lookup"><span data-stu-id="e08a2-358">Instead, perform an explicit conversion by calling a `ToString` overload that has a `provider` parameter.</span></span> <span data-ttu-id="e08a2-359">Par exemple, le compilateur utilise implicitement la culture actuelle lors de la conversion <xref:System.Double> d’une valeur en une chaîne dans le code suivant :</span><span class="sxs-lookup"><span data-stu-id="e08a2-359">For example, the compiler implicitly uses the current culture when converting a <xref:System.Double> value to a string in the following code:</span></span>

  [!code-csharp[Implicit String Conversion](./snippets/best-practices-strings/csharp/tostring/Program.cs#1)]
  [!code-vb[Implicit String Conversion](./snippets/best-practices-strings/vb/tostring/Program.vb#1)]

  <span data-ttu-id="e08a2-360">Au lieu de cela, vous pouvez spécifier explicitement la culture dont les conventions de mise en forme sont utilisées lors de la conversion en appelant la <xref:System.Double.ToString(System.IFormatProvider)?displayProperty=nameWithType> méthode, comme le montre le code suivant :</span><span class="sxs-lookup"><span data-stu-id="e08a2-360">Instead, you can explicitly specify the culture whose formatting conventions are used in the conversion by calling the <xref:System.Double.ToString(System.IFormatProvider)?displayProperty=nameWithType> method, as the following code does:</span></span>

  [!code-csharp[Explicit String Conversion](./snippets/best-practices-strings/csharp/tostring/Program.cs#2)]
  [!code-vb[Implicit String Conversion](./snippets/best-practices-strings/vb/tostring/Program.vb#2)]

- <span data-ttu-id="e08a2-361">Pour l’interpolation de chaîne, plutôt que d’affecter une chaîne interpolée à une instance <xref:System.String>, affectez-la à un élément <xref:System.FormattableString>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-361">For string interpolation, rather than assigning an interpolated string to a <xref:System.String> instance, assign it to a <xref:System.FormattableString>.</span></span> <span data-ttu-id="e08a2-362">Vous pouvez ensuite appeler sa méthode <xref:System.FormattableString.ToString?displayProperty=nameWithType> pour produire une chaîne de résultat qui reflète les conventions de la culture actuelle, ou vous pouvez appeler la méthode <xref:System.FormattableString.ToString(System.IFormatProvider)?displayProperty=nameWithType> pour produire une chaîne de résultat qui reflète les conventions d’une culture spécifiée.</span><span class="sxs-lookup"><span data-stu-id="e08a2-362">You can then call its <xref:System.FormattableString.ToString?displayProperty=nameWithType> method produce a result string that reflects the conventions of the current culture, or you can call the <xref:System.FormattableString.ToString(System.IFormatProvider)?displayProperty=nameWithType> method to produce a result string that reflects the conventions of a specified culture.</span></span> <span data-ttu-id="e08a2-363">Vous pouvez également transmettre la chaîne pouvant être mise en forme à la méthode <xref:System.FormattableString.Invariant%2A?displayProperty=nameWithType> statique pour produire une chaîne de résultat qui reflète les conventions de la culture invariante.</span><span class="sxs-lookup"><span data-stu-id="e08a2-363">You can also pass the formattable string to the static <xref:System.FormattableString.Invariant%2A?displayProperty=nameWithType> method to produce a result string that reflects the conventions of the invariant culture.</span></span> <span data-ttu-id="e08a2-364">L'exemple suivant illustre cette approche.</span><span class="sxs-lookup"><span data-stu-id="e08a2-364">The following example illustrates this approach.</span></span> <span data-ttu-id="e08a2-365">(La sortie de l’exemple correspond à la culture actuelle en-US.)</span><span class="sxs-lookup"><span data-stu-id="e08a2-365">(The output from the example reflects a current culture of en-US.)</span></span>

  [!code-csharp[String interpolation](./snippets/best-practices-strings/csharp/formattable/Program.cs)]
  [!code-vb[String interpolation](./snippets/best-practices-strings/vb/formattable/Program.vb)]

<span data-ttu-id="e08a2-366">Vous pouvez rendre persistantes des données non-chaînées soit comme données binaires, soit comme données mises en forme.</span><span class="sxs-lookup"><span data-stu-id="e08a2-366">You can persist non-string data either as binary data or as formatted data.</span></span> <span data-ttu-id="e08a2-367">Si vous choisissez de l'enregistrer en tant que données mises en forme, vous devez appeler une surcharge de méthode de mise en forme qui inclut un paramètre `provider` et le passer à la propriété <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="e08a2-367">If you choose to save it as formatted data, you should call a formatting method overload that includes a `provider` parameter and pass it the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="e08a2-368">La culture dite indifférente fournit un format cohérent pour les données mises en forme qui est indépendant de la culture et de l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="e08a2-368">The invariant culture provides a consistent format for formatted data that is independent of culture and machine.</span></span> <span data-ttu-id="e08a2-369">En revanche, assurer la persistance de données mises en forme à l'aide de cultures autres que la culture dite indifférente a plusieurs limites :</span><span class="sxs-lookup"><span data-stu-id="e08a2-369">In contrast, persisting data that is formatted by using cultures other than the invariant culture has a number of limitations:</span></span>

- <span data-ttu-id="e08a2-370">Les données seront vraisemblablement inutilisables si elles sont récupérées sur un système ayant une autre culture, ou si l'utilisateur du système actuel change la culture actuelle et essaie de récupérer les données.</span><span class="sxs-lookup"><span data-stu-id="e08a2-370">The data is likely to be unusable if it is retrieved on a system that has a different culture, or if the user of the current system changes the current culture and tries to retrieve the data.</span></span>
- <span data-ttu-id="e08a2-371">Les propriétés d'une culture sur un ordinateur spécifique peuvent différer des valeurs standard.</span><span class="sxs-lookup"><span data-stu-id="e08a2-371">The properties of a culture on a specific computer can differ from standard values.</span></span> <span data-ttu-id="e08a2-372">À tout moment, un utilisateur peut personnaliser les paramètres d'affichage selon la culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-372">At any time, a user can customize culture-sensitive display settings.</span></span> <span data-ttu-id="e08a2-373">De ce fait, les données mises en forme sont stockées sur un système et peuvent ne pas être lisibles lorsque l'utilisateur personnalise les paramètres de culture.</span><span class="sxs-lookup"><span data-stu-id="e08a2-373">Because of this, formatted data that is saved on a system may not be readable after the user customizes cultural settings.</span></span> <span data-ttu-id="e08a2-374">La portabilité des données mises en forme sur différents ordinateurs peut être encore plus limitée.</span><span class="sxs-lookup"><span data-stu-id="e08a2-374">The portability of formatted data across computers is likely to be even more limited.</span></span>
- <span data-ttu-id="e08a2-375">Des normes internationales, régionales ou nationales qui régissent la mise en forme des nombres ou des dates et heures évoluent au fil du temps, et ces modifications sont intégrées dans les mises à jour du système d'exploitation Windows.</span><span class="sxs-lookup"><span data-stu-id="e08a2-375">International, regional, or national standards that govern the formatting of numbers or dates and times change over time, and these changes are incorporated into Windows operating system updates.</span></span> <span data-ttu-id="e08a2-376">Quand les conventions de mise en forme changent, les données qui ont été mises en forme en utilisant les conventions antérieures peuvent devenir illisibles.</span><span class="sxs-lookup"><span data-stu-id="e08a2-376">When formatting conventions change, data that was formatted by using the previous conventions may become unreadable.</span></span>

<span data-ttu-id="e08a2-377">L'exemple suivant illustre la portabilité limitée qui résulte de l'utilisation de la mise en forme qui tient compte de la culture pour assurer la persistance des données.</span><span class="sxs-lookup"><span data-stu-id="e08a2-377">The following example illustrates the limited portability that results from using culture-sensitive formatting to persist data.</span></span> <span data-ttu-id="e08a2-378">L'exemple enregistre un tableau de valeurs de date et d'heure dans un fichier.</span><span class="sxs-lookup"><span data-stu-id="e08a2-378">The example saves an array of date and time values to a file.</span></span> <span data-ttu-id="e08a2-379">Celles-ci sont mises en forme en utilisant les conventions culturelles de l'anglais (États-Unis).</span><span class="sxs-lookup"><span data-stu-id="e08a2-379">These are formatted by using the conventions of the English (United States) culture.</span></span> <span data-ttu-id="e08a2-380">Une fois que l'application change la culture du thread actuel pour appliquer le français (Suisse), elle essaie de lire les valeurs enregistrées en utilisant les conventions de mise en forme de la culture actuelle.</span><span class="sxs-lookup"><span data-stu-id="e08a2-380">After the application changes the current thread culture to French (Switzerland), it tries to read the saved values by using the formatting conventions of the current culture.</span></span> <span data-ttu-id="e08a2-381">La tentative de lecture des éléments de données par deux fois renvoie une exception <xref:System.FormatException> , et le tableau de dates contient maintenant deux éléments incorrects qui sont identiques à <xref:System.DateTime.MinValue>.</span><span class="sxs-lookup"><span data-stu-id="e08a2-381">The attempt to read two of the data items throws a <xref:System.FormatException> exception, and the array of dates now contains two incorrect elements that are equal to <xref:System.DateTime.MinValue>.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#21](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/persistence.cs#21)]
[!code-vb[Conceptual.Strings.BestPractices#21](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/persistence.vb#21)]

<span data-ttu-id="e08a2-382">Toutefois, si vous remplacez la <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> propriété par <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> dans les appels à <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> et <xref:System.DateTime.Parse%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> , les données de date et d’heure persistantes sont correctement restaurées, comme le montre la sortie suivante :</span><span class="sxs-lookup"><span data-stu-id="e08a2-382">However, if you replace the <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> property with <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> in the calls to <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> and <xref:System.DateTime.Parse%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType>,   the persisted date and time data is successfully restored, as the following output shows:</span></span>

```console
06.05.1758 21:26
05.05.1818 07:19
22.04.1870 23:54
08.09.1890 06:47
18.02.1905 15:12
```
