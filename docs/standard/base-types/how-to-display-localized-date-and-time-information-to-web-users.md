---
title: 'Procédure : afficher des informations de date et d’heure localisées pour les utilisateurs du web'
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- formatting [.NET Framework], dates
- parsing strings [.NET Framework], date and time strings
- localization [.NET Framework], date and time displays
- formatting [.NET Framework], localized data
- displaying date and time data
- localized date displays [.NET Framework]
ms.assetid: 377fe93c-32be-421a-a30a-be639a46ede8
dev_langs:
- csharp
- vb
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 4c50cdf93d8cfcefeffd35290d26dfa432a241e1
ms.sourcegitcommit: c4e9d05644c9cb89de5ce6002723de107ea2e2c4
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/19/2019
ms.locfileid: "65882486"
---
# <a name="how-to-display-localized-date-and-time-information-to-web-users"></a><span data-ttu-id="8e5da-102">Procédure : afficher des informations de date et d’heure localisées pour les utilisateurs du web</span><span class="sxs-lookup"><span data-stu-id="8e5da-102">How to: Display Localized Date and Time Information to Web Users</span></span>
<span data-ttu-id="8e5da-103">Une page Web pouvant être affichée n’importe où dans le monde, les opérations qui analysent et mettent en forme les valeurs de date et d’heure ne doivent pas s’appuyer sur un format par défaut (généralement le format de la culture locale du serveur Web) lors de l’interaction avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-103">Because a Web page can be displayed anywhere in the world, operations that parse and format date and time values should not rely on a default format (which most often is the format of the Web server's local culture) when interacting with the user.</span></span> <span data-ttu-id="8e5da-104">Au lieu de cela, les formulaires Web qui gèrent les chaînes de date et d’heure saisies par l’utilisateur doivent analyser les chaînes en utilisant la culture préférée de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-104">Instead, Web forms that handle date and time strings input by the user should parse the strings using the user's preferred culture.</span></span> <span data-ttu-id="8e5da-105">De même, les données de date et d’heure doivent être affichées à l’utilisateur dans un format conforme à sa culture.</span><span class="sxs-lookup"><span data-stu-id="8e5da-105">Similarly, date and time data should be displayed to the user in a format that conforms to the user's culture.</span></span> <span data-ttu-id="8e5da-106">Cette rubrique montre comment procéder.</span><span class="sxs-lookup"><span data-stu-id="8e5da-106">This topic shows how to do this.</span></span>  
  
## <a name="to-parse-date-and-time-strings-input-by-the-user"></a><span data-ttu-id="8e5da-107">Pour analyser les chaînes de date et d’heure saisies par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="8e5da-107">To parse date and time strings input by the user</span></span>  
  
1. <span data-ttu-id="8e5da-108">Déterminez si le tableau de chaînes retourné par la propriété <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> est rempli.</span><span class="sxs-lookup"><span data-stu-id="8e5da-108">Determine whether the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated.</span></span> <span data-ttu-id="8e5da-109">Si ce n’est pas le cas, passez à l’étape 6.</span><span class="sxs-lookup"><span data-stu-id="8e5da-109">If it is not, continue to step 6.</span></span>  
  
2. <span data-ttu-id="8e5da-110">Si le tableau de chaînes retourné par la propriété <xref:System.Web.HttpRequest.UserLanguages%2A> est rempli, récupérez son premier élément.</span><span class="sxs-lookup"><span data-stu-id="8e5da-110">If the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is populated, retrieve its first element.</span></span> <span data-ttu-id="8e5da-111">Le premier élément indique la langue et la région par défaut ou préférées de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-111">The first element indicates the user's default or preferred language and region.</span></span>  
  
3. <span data-ttu-id="8e5da-112">Instanciez un objet <xref:System.Globalization.CultureInfo> représentant la culture préférée de l’utilisateur en appelant le constructeur <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-112">Instantiate a <xref:System.Globalization.CultureInfo> object that represents the user's preferred culture by calling the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span></span>  
  
4. <span data-ttu-id="8e5da-113">Appelez la méthode `TryParse` ou `Parse` de type <xref:System.DateTime> ou <xref:System.DateTimeOffset> pour tester la conversion.</span><span class="sxs-lookup"><span data-stu-id="8e5da-113">Call either the `TryParse` or the `Parse` method of the <xref:System.DateTime> or <xref:System.DateTimeOffset> type to try the conversion.</span></span> <span data-ttu-id="8e5da-114">Utilisez une surcharge de la méthode `TryParse` ou `Parse` avec un paramètre `provider` et transférez-y un des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="8e5da-114">Use an overload of the `TryParse` or the `Parse` method with a `provider` parameter, and pass it either of the following:</span></span>  
  
    - <span data-ttu-id="8e5da-115">L’objet <xref:System.Globalization.CultureInfo> créé à l’étape 3</span><span class="sxs-lookup"><span data-stu-id="8e5da-115">The <xref:System.Globalization.CultureInfo> object created in step 3.</span></span>  
  
    - <span data-ttu-id="8e5da-116">L’objet <xref:System.Globalization.DateTimeFormatInfo> retourné par la propriété <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> de l’objet <xref:System.Globalization.CultureInfo> créé à l’étape 3</span><span class="sxs-lookup"><span data-stu-id="8e5da-116">The <xref:System.Globalization.DateTimeFormatInfo> object that is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> property of the <xref:System.Globalization.CultureInfo> object created in step 3.</span></span>  
  
5. <span data-ttu-id="8e5da-117">Si la conversion échoue, répétez les étapes 2 à 4 pour chaque élément restant dans le tableau de chaînes retourné par la propriété <xref:System.Web.HttpRequest.UserLanguages%2A>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-117">If the conversion fails, repeat steps 2 through 4 for each remaining element in the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property.</span></span>  
  
6. <span data-ttu-id="8e5da-118">Si la conversion échoue toujours ou si le tableau de chaînes retourné par la propriété <xref:System.Web.HttpRequest.UserLanguages%2A> est vide, analysez la chaîne à l’aide de la culture invariante retournée par la propriété <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-118">If the conversion still fails or if the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is empty, parse the string by using the invariant culture, which is returned by the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span>  
  
## <a name="to-parse-the-local-date-and-time-of-the-users-request"></a><span data-ttu-id="8e5da-119">Pour analyser la date et l’heure locales de la demande de l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="8e5da-119">To parse the local date and time of the user's request</span></span>  
  
1. <span data-ttu-id="8e5da-120">Ajoutez un contrôle <xref:System.Web.UI.WebControls.HiddenField> à votre formulaire Web.</span><span class="sxs-lookup"><span data-stu-id="8e5da-120">Add a <xref:System.Web.UI.WebControls.HiddenField> control to a Web form.</span></span>  
  
2. <span data-ttu-id="8e5da-121">Créez une fonction JavaScript qui gère l’événement `onClick` d’un bouton `Submit` en inscrivant la date et l’heure actuelles ainsi que le décalage de fuseau horaire par rapport au temps universel coordonné (UTC) pour la propriété <xref:System.Web.UI.WebControls.HiddenField.Value%2A>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-121">Create a JavaScript function that handles the `onClick` event of a `Submit` button by writing the current date and time and the local time zone's offset from Coordinated Universal Time (UTC) to the <xref:System.Web.UI.WebControls.HiddenField.Value%2A> property.</span></span> <span data-ttu-id="8e5da-122">Utilisez un délimiteur (par exemple, un point-virgule) pour séparer les deux composants de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="8e5da-122">Use a delimiter (such as a semicolon) to separate the two components of the string.</span></span>  
  
3. <span data-ttu-id="8e5da-123">Utilisez l’événement <xref:System.Web.UI.Control.PreRender> du formulaire Web pour injecter la fonction dans le flux sortant HTML en transférant le texte du script à la méthode <xref:System.Web.UI.ClientScriptManager.RegisterClientScriptBlock%28System.Type%2CSystem.String%2CSystem.String%2CSystem.Boolean%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-123">Use the Web form's <xref:System.Web.UI.Control.PreRender> event to inject the function into the HTML output stream by passing the text of the script to the <xref:System.Web.UI.ClientScriptManager.RegisterClientScriptBlock%28System.Type%2CSystem.String%2CSystem.String%2CSystem.Boolean%29?displayProperty=nameWithType> method.</span></span>  
  
4. <span data-ttu-id="8e5da-124">Connectez le gestionnaire d’événements à l’événement `onClick` du bouton `Submit` en communiquant le nom de la fonction JavaScript à l’attribut `OnClientClick` du bouton `Submit`.</span><span class="sxs-lookup"><span data-stu-id="8e5da-124">Connect the event handler to the `Submit` button's `onClick` event by providing the name of the JavaScript function to the `OnClientClick` attribute of the `Submit` button.</span></span>  
  
5. <span data-ttu-id="8e5da-125">Créez un gestionnaire pour l’événement <xref:System.Web.UI.WebControls.Button.Click> du bouton `Submit`.</span><span class="sxs-lookup"><span data-stu-id="8e5da-125">Create a handler for the `Submit` button's <xref:System.Web.UI.WebControls.Button.Click> event.</span></span>  
  
6. <span data-ttu-id="8e5da-126">Dans le Gestionnaire d’événements, déterminez si le tableau de chaînes retourné par la propriété <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> est rempli.</span><span class="sxs-lookup"><span data-stu-id="8e5da-126">In the event handler, determine whether the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated.</span></span> <span data-ttu-id="8e5da-127">Si ce n’est pas le cas, passez à l’étape 14.</span><span class="sxs-lookup"><span data-stu-id="8e5da-127">If it is not, continue to step 14.</span></span>  
  
7. <span data-ttu-id="8e5da-128">Si le tableau de chaînes retourné par la propriété <xref:System.Web.HttpRequest.UserLanguages%2A> est rempli, récupérez son premier élément.</span><span class="sxs-lookup"><span data-stu-id="8e5da-128">If the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is populated, retrieve its first element.</span></span> <span data-ttu-id="8e5da-129">Le premier élément indique la langue et la région par défaut ou préférées de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-129">The first element indicates the user's default or preferred language and region.</span></span>  
  
8. <span data-ttu-id="8e5da-130">Instanciez un objet <xref:System.Globalization.CultureInfo> représentant la culture préférée de l’utilisateur en appelant le constructeur <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-130">Instantiate a <xref:System.Globalization.CultureInfo> object that represents the user's preferred culture by calling the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span></span>  
  
9. <span data-ttu-id="8e5da-131">Transférez la chaîne affectée à la propriété <xref:System.Web.UI.WebControls.HiddenField.Value%2A> à la méthode <xref:System.String.Split%2A> pour stocker la représentation de la chaîne de l’heure et de la date locales de l’utilisateur ainsi que la représentation de la chaîne du décalage de fuseau horaire de l’utilisateur dans des éléments de tableau distincts.</span><span class="sxs-lookup"><span data-stu-id="8e5da-131">Pass the string assigned to the <xref:System.Web.UI.WebControls.HiddenField.Value%2A> property to the <xref:System.String.Split%2A> method to store the string representation of the user's local date and time and the string representation of the user's local time zone offset in separate array elements.</span></span>  
  
10. <span data-ttu-id="8e5da-132">Appelez la méthode <xref:System.DateTime.Parse%2A?displayProperty=nameWithType> ou <xref:System.DateTime.TryParse%28System.String%2CSystem.IFormatProvider%2CSystem.Globalization.DateTimeStyles%2CSystem.DateTime%40%29?displayProperty=nameWithType> pour convertir la date et l’heure de la demande de l’utilisateur en une valeur <xref:System.DateTime>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-132">Call either the <xref:System.DateTime.Parse%2A?displayProperty=nameWithType> or <xref:System.DateTime.TryParse%28System.String%2CSystem.IFormatProvider%2CSystem.Globalization.DateTimeStyles%2CSystem.DateTime%40%29?displayProperty=nameWithType> method to convert the date and time of the user's request to a <xref:System.DateTime> value.</span></span> <span data-ttu-id="8e5da-133">Utilisez une surcharge de la méthode `provider` avec un paramètre et transférez-y un des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="8e5da-133">Use an overload of the method with a `provider` parameter, and pass it either of the following:</span></span>  
  
    - <span data-ttu-id="8e5da-134">L’objet <xref:System.Globalization.CultureInfo> créé à l’étape 8.</span><span class="sxs-lookup"><span data-stu-id="8e5da-134">The <xref:System.Globalization.CultureInfo> object created in step 8.</span></span>  
  
    - <span data-ttu-id="8e5da-135">L’objet <xref:System.Globalization.DateTimeFormatInfo> retourné par la propriété <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> de l’objet <xref:System.Globalization.CultureInfo> créé à l’étape 8.</span><span class="sxs-lookup"><span data-stu-id="8e5da-135">The <xref:System.Globalization.DateTimeFormatInfo> object that is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> property of the <xref:System.Globalization.CultureInfo> object created in step 8.</span></span>  
  
11. <span data-ttu-id="8e5da-136">Si l’opération d’analyse à l’étape 10 échoue, passez à l’étape 13.</span><span class="sxs-lookup"><span data-stu-id="8e5da-136">If the parse operation in step 10 fails, go to step 13.</span></span> <span data-ttu-id="8e5da-137">Sinon, appelez la méthode <xref:System.UInt32.Parse%28System.String%29?displayProperty=nameWithType> pour convertir la représentation de la chaîne du décalage de fuseau horaire de l’utilisateur en un entier.</span><span class="sxs-lookup"><span data-stu-id="8e5da-137">Otherwise, call the <xref:System.UInt32.Parse%28System.String%29?displayProperty=nameWithType> method to convert the string representation of the user's time zone offset to an integer.</span></span>  
  
12. <span data-ttu-id="8e5da-138">Instanciez un objet <xref:System.DateTimeOffset> représentant l’heure locale de l’utilisateur en appelant le constructeur <xref:System.DateTimeOffset.%23ctor%28System.DateTime%2CSystem.TimeSpan%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-138">Instantiate a <xref:System.DateTimeOffset> that represents the user's local time by calling the <xref:System.DateTimeOffset.%23ctor%28System.DateTime%2CSystem.TimeSpan%29?displayProperty=nameWithType> constructor.</span></span>  
  
13. <span data-ttu-id="8e5da-139">Si la conversion de l’étape 10 échoue, répétez les étapes 7 à 12 pour chaque élément restant dans le tableau de chaînes retourné par la propriété <xref:System.Web.HttpRequest.UserLanguages%2A>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-139">If the conversion in step 10 fails, repeat steps 7 through 12 for each remaining element in the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property.</span></span>  
  
14. <span data-ttu-id="8e5da-140">Si la conversion échoue toujours ou si le tableau de chaînes retourné par la propriété <xref:System.Web.HttpRequest.UserLanguages%2A> est vide, analysez la chaîne à l’aide de la culture invariante retournée par la propriété <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-140">If the conversion still fails or if the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is empty, parse the string by using the invariant culture, which is returned by the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="8e5da-141">Puis répétez les étapes 7 à 12.</span><span class="sxs-lookup"><span data-stu-id="8e5da-141">Then repeat steps 7 through 12.</span></span>  
  
 <span data-ttu-id="8e5da-142">Vous obtenez un objet <xref:System.DateTimeOffset> qui représente l’heure locale de l’utilisateur de votre page Web.</span><span class="sxs-lookup"><span data-stu-id="8e5da-142">The result is a <xref:System.DateTimeOffset> object that represents the local time of the user of your Web page.</span></span> <span data-ttu-id="8e5da-143">Vous pouvez ensuite déterminer l’heure UTC équivalente en appelant la méthode <xref:System.DateTimeOffset.ToUniversalTime%2A>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-143">You can then determine the equivalent UTC by calling the <xref:System.DateTimeOffset.ToUniversalTime%2A> method.</span></span> <span data-ttu-id="8e5da-144">Vous pouvez également déterminer la date et l’heure équivalentes sur votre serveur Web en appelant la méthode <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> puis en transférant la valeur <xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType> comme fuseau horaire dans lequel l’heure doit être convertie.</span><span class="sxs-lookup"><span data-stu-id="8e5da-144">You can also determine the equivalent date and time on your Web server by calling the <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> method and passing a value of <xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType> as the time zone to convert the time to.</span></span>  
  
## <a name="example"></a><span data-ttu-id="8e5da-145">Exemple</span><span class="sxs-lookup"><span data-stu-id="8e5da-145">Example</span></span>  
 <span data-ttu-id="8e5da-146">L’exemple suivant contient la source HTML et le code d’un formulaire Web ASP.NET qui invite l’utilisateur à entrer une valeur de date et d’heure.</span><span class="sxs-lookup"><span data-stu-id="8e5da-146">The following example contains both the HTML source and the code for an ASP.NET Web form that asks the user to input a date and time value.</span></span> <span data-ttu-id="8e5da-147">Un script côté client inscrit également dans un champ masqué des informations sur la date et l’heure locales de la demande de l’utilisateur ainsi que décalage du fuseau horaire de l’utilisateur par rapport à l’heure UTC.</span><span class="sxs-lookup"><span data-stu-id="8e5da-147">A client-side script also writes information on the local date and time of the user's request and the offset of the user's time zone from UTC to a hidden field.</span></span> <span data-ttu-id="8e5da-148">Ces informations sont ensuite analysées par le serveur, qui retourne une page Web affichant l’entrée de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-148">This information is then parsed by the server, which returns a Web page that displays the user's input.</span></span> <span data-ttu-id="8e5da-149">Il affiche également la date et l’heure de la demande de l’utilisateur en utilisant l’heure locale de l’utilisateur, l’heure sur le serveur et l’heure UTC.</span><span class="sxs-lookup"><span data-stu-id="8e5da-149">It also displays the date and time of the user's request using the user's local time, the time on the server, and UTC.</span></span>  
  
 [!code-aspx-csharp[Formatting.HowTo.ParseDateInput#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.ParseDateInput/cs/GetDateInfo.aspx#1)]
 [!code-aspx-vb[Formatting.HowTo.ParseDateInput#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.ParseDateInput/vb/GetDateInfo.aspx#1)]
  
 <span data-ttu-id="8e5da-150">Le script côté client appelle la méthode JavaScript `toLocaleString`.</span><span class="sxs-lookup"><span data-stu-id="8e5da-150">The client-side script calls the JavaScript `toLocaleString` method.</span></span> <span data-ttu-id="8e5da-151">Il génère une chaîne qui suit les conventions de mise en forme des paramètres régionaux de l’utilisateur, les plus susceptibles d’être correctement analysés sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-151">This produces a string that follows the formatting conventions of the user's locale, which is more likely to be successfully parsed on the server.</span></span>  
  
 <span data-ttu-id="8e5da-152">La propriété <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> est remplie par les noms de la culture qui figurent dans les en-têtes `Accept-Language` inclus dans une requête HTTP.</span><span class="sxs-lookup"><span data-stu-id="8e5da-152">The <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated from the culture names that are contained in `Accept-Language` headers included in an HTTP request.</span></span> <span data-ttu-id="8e5da-153">Toutefois, certains navigateurs n’incluent pas les en-têtes `Accept-Language` dans leurs demandes, et les utilisateurs peuvent également supprimer totalement ces en-têtes.</span><span class="sxs-lookup"><span data-stu-id="8e5da-153">However, not all browsers include `Accept-Language` headers in their requests, and users can also suppress the headers completely.</span></span> <span data-ttu-id="8e5da-154">Il est donc important de disposer d’une culture de secours lorsque vous analysez l’entrée de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-154">This makes it important to have a fallback culture when parsing user input.</span></span> <span data-ttu-id="8e5da-155">En général, la culture de secours est la culture invariante retournée par <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-155">Typically the fallback culture is the invariant culture returned by <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="8e5da-156">Les utilisateurs peuvent également fournir à Internet Explorer des noms de cultures qu’ils entrent dans une zone de texte, avec la possibilité que ces noms de cultures ne sont pas valides.</span><span class="sxs-lookup"><span data-stu-id="8e5da-156">Users can also provide Internet Explorer with culture names that they input in a text box, which creates the possibility that the culture names may not be valid.</span></span> <span data-ttu-id="8e5da-157">Il est donc important d’utiliser la gestion des exceptions quand vous instanciez un objet <xref:System.Globalization.CultureInfo>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-157">This makes it important to use exception handling when instantiating a <xref:System.Globalization.CultureInfo> object.</span></span>  
  
 <span data-ttu-id="8e5da-158">Quand il est extrait d’une requête HTTP soumise par Internet Explorer, le tableau <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> est rempli selon l’ordre de préférence de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-158">When retrieved from an HTTP request submitted by Internet Explorer, the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> array is populated in order of user preference.</span></span> <span data-ttu-id="8e5da-159">Le premier élément du tableau contient le nom de la culture/région principale de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-159">The first element in the array contains the name of the user's primary culture/region.</span></span> <span data-ttu-id="8e5da-160">Si le tableau contient d’autres éléments, Internet Explorer leur assigne arbitrairement un spécificateur de qualité, séparé du nom de culture par un point virgule.</span><span class="sxs-lookup"><span data-stu-id="8e5da-160">If the array contains any additional items, Internet Explorer arbitrarily assigns them a quality specifier, which is delimited from the culture name by a semicolon.</span></span> <span data-ttu-id="8e5da-161">Par exemple, une entrée pour la culture fr-FR peut prendre la forme `fr-FR;q=0.7`.</span><span class="sxs-lookup"><span data-stu-id="8e5da-161">For example, an entry for the fr-FR culture might take the form `fr-FR;q=0.7`.</span></span>  
  
 <span data-ttu-id="8e5da-162">L’exemple appelle le constructeur <xref:System.Globalization.CultureInfo.%23ctor%2A> avec son paramètre `useUserOverride` défini sur `false` pour créer un nouvel objet <xref:System.Globalization.CultureInfo>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-162">The example calls the <xref:System.Globalization.CultureInfo.%23ctor%2A> constructor with its `useUserOverride` parameter set to `false` to create a new <xref:System.Globalization.CultureInfo> object.</span></span> <span data-ttu-id="8e5da-163">Cela garantit que, si le nom de la culture est le nom de la culture par défaut sur le serveur, le nouvel objet <xref:System.Globalization.CultureInfo> créé par le constructeur de classe contient les paramètres par défaut d’une culture et ne reflète pas les paramètres substitués en utilisant l’application **Options régionales et linguistiques du serveur**.</span><span class="sxs-lookup"><span data-stu-id="8e5da-163">This ensures that, if the culture name is the default culture name on the server, the new <xref:System.Globalization.CultureInfo> object created by the class constructor contains a culture's default settings and does not reflect any settings overridden by using the server's **Regional and Language Options** application.</span></span> <span data-ttu-id="8e5da-164">Les valeurs des paramètres substitués sur le serveur sont peu susceptibles d’exister sur le système de l’utilisateur ou d’apparaître dans l’entrée de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-164">The values from any overridden settings on the server are unlikely to exist on the user's system or to be reflected in the user's input.</span></span>  
  
 <span data-ttu-id="8e5da-165">Comme cet exemple analyse deux représentations d’une chaîne de date et d’heure (une entrée par l’utilisateur, et l’autre stockée dans le champ masqué), il définit les objets <xref:System.Globalization.CultureInfo> qui peuvent être nécessaires par avance.</span><span class="sxs-lookup"><span data-stu-id="8e5da-165">Because this example parses two string representations of a date and time (one input by the user, the other stored to the hidden field), it defines the possible <xref:System.Globalization.CultureInfo> objects that may be required in advance.</span></span> <span data-ttu-id="8e5da-166">Il crée un tableau d’objets <xref:System.Globalization.CultureInfo> supérieur d’une unité au nombre d’éléments retournés par la propriété <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-166">It creates an array of <xref:System.Globalization.CultureInfo> objects that is one greater than the number of elements returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="8e5da-167">Il instancie ensuite un objet <xref:System.Globalization.CultureInfo> pour chaque chaîne de langue/région, ainsi qu’un objet <xref:System.Globalization.CultureInfo> représentant <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-167">It then instantiates a <xref:System.Globalization.CultureInfo> object for each language/region string, and also instantiates a <xref:System.Globalization.CultureInfo> object that represents <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="8e5da-168">Votre code peut appeler la méthode <xref:System.DateTime.Parse%2A> ou <xref:System.DateTime.TryParse%2A> pour convertir la représentation de chaîne de date et d’heure de l’utilisateur en une valeur <xref:System.DateTime>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-168">Your code can call either the <xref:System.DateTime.Parse%2A> or the <xref:System.DateTime.TryParse%2A> method to convert the user's string representation of a date and time to a <xref:System.DateTime> value.</span></span> <span data-ttu-id="8e5da-169">Des appels répétés à une méthode d’analyse peuvent être nécessaires pour une opération d’analyse unique.</span><span class="sxs-lookup"><span data-stu-id="8e5da-169">Repeated calls to a parse method may be required for a single parsing operation.</span></span> <span data-ttu-id="8e5da-170">Par conséquent, la méthode <xref:System.DateTime.TryParse%2A> est préférable car elle retourne `false` si une opération d’analyse échoue.</span><span class="sxs-lookup"><span data-stu-id="8e5da-170">As a result, the <xref:System.DateTime.TryParse%2A> method is better because it returns `false` if a parse operation fails.</span></span> <span data-ttu-id="8e5da-171">En revanche, la gestion d’exceptions répétées générées par la méthode <xref:System.DateTime.Parse%2A> peut se révéler très coûteuse dans une application Web.</span><span class="sxs-lookup"><span data-stu-id="8e5da-171">In contrast, handling the repeated exceptions that may be thrown by the <xref:System.DateTime.Parse%2A> method can be a very expensive proposition in a Web application.</span></span>  
  
## <a name="compiling-the-code"></a><span data-ttu-id="8e5da-172">Compilation du code</span><span class="sxs-lookup"><span data-stu-id="8e5da-172">Compiling the Code</span></span>  
 <span data-ttu-id="8e5da-173">Pour compiler le code, créez une page web ASP.NET sans code-behind.</span><span class="sxs-lookup"><span data-stu-id="8e5da-173">To compile the code, create an ASP.NET Web page without a code-behind.</span></span> <span data-ttu-id="8e5da-174">Copiez ensuite l’exemple dans la page Web pour qu’il remplace tout le code existant.</span><span class="sxs-lookup"><span data-stu-id="8e5da-174">Then copy the example into the Web page so that it replaces all the existing code.</span></span> <span data-ttu-id="8e5da-175">La page web ASP.NET doit contenir les contrôles suivants :</span><span class="sxs-lookup"><span data-stu-id="8e5da-175">The ASP.NET Web page should contain the following controls:</span></span>  
  
- <span data-ttu-id="8e5da-176">Un contrôle <xref:System.Web.UI.WebControls.Label>, qui n’est pas référencé dans le code.</span><span class="sxs-lookup"><span data-stu-id="8e5da-176">A <xref:System.Web.UI.WebControls.Label> control, which is not referenced in code.</span></span> <span data-ttu-id="8e5da-177">Définissez sa propriété <xref:System.Web.UI.WebControls.TextBox.Text%2A> sur « Entrez un nombre : ».</span><span class="sxs-lookup"><span data-stu-id="8e5da-177">Set its <xref:System.Web.UI.WebControls.TextBox.Text%2A> property to "Enter a Number:".</span></span>  
  
- <span data-ttu-id="8e5da-178">un contrôle <xref:System.Web.UI.WebControls.TextBox> nommé `DateString` ;</span><span class="sxs-lookup"><span data-stu-id="8e5da-178">A <xref:System.Web.UI.WebControls.TextBox> control named `DateString`.</span></span>  
  
- <span data-ttu-id="8e5da-179">un contrôle <xref:System.Web.UI.WebControls.Button> nommé `OKButton` ;</span><span class="sxs-lookup"><span data-stu-id="8e5da-179">A <xref:System.Web.UI.WebControls.Button> control named `OKButton`.</span></span> <span data-ttu-id="8e5da-180">Définissez sa propriété <xref:System.Web.UI.WebControls.Button.Text%2A> sur « OK ».</span><span class="sxs-lookup"><span data-stu-id="8e5da-180">Set its <xref:System.Web.UI.WebControls.Button.Text%2A> property to "OK".</span></span>  
  
- <span data-ttu-id="8e5da-181">un contrôle <xref:System.Web.UI.WebControls.HiddenField> nommé `DateInfo` ;</span><span class="sxs-lookup"><span data-stu-id="8e5da-181">A <xref:System.Web.UI.WebControls.HiddenField> control named `DateInfo`.</span></span>  
  
## <a name="net-framework-security"></a><span data-ttu-id="8e5da-182">Sécurité .NET Framework</span><span class="sxs-lookup"><span data-stu-id="8e5da-182">.NET Framework Security</span></span>  
 <span data-ttu-id="8e5da-183">Pour empêcher un utilisateur d’injecter un script dans le flux de données HTML, l’entrée de l’utilisateur ne doit jamais être renvoyée directement dans la réponse du serveur.</span><span class="sxs-lookup"><span data-stu-id="8e5da-183">To prevent a user from injecting script into the HTML stream, user input should never be directly echoed back in the server response.</span></span> <span data-ttu-id="8e5da-184">Elle doit être encodée à l’aide de la méthode <xref:System.Web.HttpServerUtility.HtmlEncode%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e5da-184">Instead, it should be encoded by using the <xref:System.Web.HttpServerUtility.HtmlEncode%2A?displayProperty=nameWithType> method.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8e5da-185">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8e5da-185">See also</span></span>

- [<span data-ttu-id="8e5da-186">Exécution d’opérations de mise en forme</span><span class="sxs-lookup"><span data-stu-id="8e5da-186">Performing Formatting Operations</span></span>](../../../docs/standard/base-types/performing-formatting-operations.md)
- [<span data-ttu-id="8e5da-187">Standard Date and Time Format Strings</span><span class="sxs-lookup"><span data-stu-id="8e5da-187">Standard Date and Time Format Strings</span></span>](../../../docs/standard/base-types/standard-date-and-time-format-strings.md)
- [<span data-ttu-id="8e5da-188">Custom Date and Time Format Strings</span><span class="sxs-lookup"><span data-stu-id="8e5da-188">Custom Date and Time Format Strings</span></span>](../../../docs/standard/base-types/custom-date-and-time-format-strings.md)
- [<span data-ttu-id="8e5da-189">Analyse de chaînes de date et d’heure</span><span class="sxs-lookup"><span data-stu-id="8e5da-189">Parsing Date and Time Strings</span></span>](../../../docs/standard/base-types/parsing-datetime.md)
