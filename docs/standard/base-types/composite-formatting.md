---
title: Mise en forme composite
ms.date: 10/26/2018
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- parameter specifiers
- strings [.NET Framework], alignment
- format specifiers, composite formatting
- strings [.NET Framework], composite
- composite formatting
- objects [.NET Framework], formatting multiple objects
ms.assetid: 87b7d528-73f6-43c6-b71a-f23043039a49
ms.openlocfilehash: b1ec8cfc0f8c6e660d716c51bf3c3387b73a278f
ms.sourcegitcommit: 00aa62e2f469c2272a457b04e66b4cc3c97a800b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/28/2020
ms.locfileid: "78159310"
---
# <a name="composite-formatting"></a><span data-ttu-id="32b17-102">Mise en forme composite</span><span class="sxs-lookup"><span data-stu-id="32b17-102">Composite formatting</span></span>

<span data-ttu-id="32b17-103">La fonctionnalité de mise en forme composite du .NET utilise une liste d’objets et une chaîne de format composite comme entrée.</span><span class="sxs-lookup"><span data-stu-id="32b17-103">The .NET composite formatting feature takes a list of objects and a composite format string as input.</span></span> <span data-ttu-id="32b17-104">Une chaîne de format composite se compose de texte fixe mélangé à des espaces réservés indexés, appelés éléments de format, qui correspondent aux objets de la liste.</span><span class="sxs-lookup"><span data-stu-id="32b17-104">A composite format string consists of fixed text intermixed with indexed placeholders, called format items, that correspond to the objects in the list.</span></span> <span data-ttu-id="32b17-105">L'opération de mise en forme produit une chaîne résultante qui se compose du texte fixe d'origine mélangé à la représentation sous forme de chaîne des objets de la liste.</span><span class="sxs-lookup"><span data-stu-id="32b17-105">The formatting operation yields a result string that consists of the original fixed text intermixed with the string representation of the objects in the list.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="32b17-106">Au lieu d’utiliser des chaînes de format composite, vous pouvez utiliser des *chaînes interpolées* si le langage et la version du langage que vous utilisez les prennent en charge.</span><span class="sxs-lookup"><span data-stu-id="32b17-106">Instead of using composite format strings, you can use *interpolated strings* if the language and language version that you're using support them.</span></span> <span data-ttu-id="32b17-107">Une chaîne interpolée est une chaîne contenant des *expressions interpolées*.</span><span class="sxs-lookup"><span data-stu-id="32b17-107">An interpolated string is a string that contains *interpolated expressions*.</span></span> <span data-ttu-id="32b17-108">Chaque expression interpolée est résolue avec la valeur de l’expression et incluse dans la chaîne du résultat quand la chaîne est affectée.</span><span class="sxs-lookup"><span data-stu-id="32b17-108">Each interpolated expression is resolved with the expression's value and included in the result string when the string is assigned.</span></span> <span data-ttu-id="32b17-109">Pour plus d’informations, consultez [Interpolation de chaîne (Informations de référence sur C#)](../../csharp/language-reference/tokens/interpolated.md) et [Chaînes interpolées (Informations de référence sur Visual Basic)](../../visual-basic/programming-guide/language-features/strings/interpolated-strings.md).</span><span class="sxs-lookup"><span data-stu-id="32b17-109">For more information, see [String interpolation (C# Reference)](../../csharp/language-reference/tokens/interpolated.md) and [Interpolated strings (Visual Basic Reference)](../../visual-basic/programming-guide/language-features/strings/interpolated-strings.md).</span></span>

<span data-ttu-id="32b17-110">La fonctionnalité de mise en forme composite est prise en charge par les méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="32b17-110">The composite formatting feature is supported by methods such as the following:</span></span>  
  
- <span data-ttu-id="32b17-111"><xref:System.String.Format%2A?displayProperty=nameWithType>, qui retourne une chaîne de résultat mise en forme.</span><span class="sxs-lookup"><span data-stu-id="32b17-111"><xref:System.String.Format%2A?displayProperty=nameWithType>, which returns a formatted result string.</span></span>  
  
- <span data-ttu-id="32b17-112"><xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType>, qui ajoute une chaîne de résultat mise en forme à un objet <xref:System.Text.StringBuilder>.</span><span class="sxs-lookup"><span data-stu-id="32b17-112"><xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType>, which appends a formatted result string to a <xref:System.Text.StringBuilder> object.</span></span>
- <span data-ttu-id="32b17-113">Certaines surcharges de la méthode <xref:System.Console.WriteLine%2A?displayProperty=nameWithType>, qui affichent une chaîne de résultat mise en forme sur la console.</span><span class="sxs-lookup"><span data-stu-id="32b17-113">Some overloads of the <xref:System.Console.WriteLine%2A?displayProperty=nameWithType> method, which display a formatted result string to the console.</span></span>  
  
- <span data-ttu-id="32b17-114">Certaines surcharges de la méthode <xref:System.IO.TextWriter.WriteLine%2A?displayProperty=nameWithType>, qui écrivent la chaîne de résultat mise en forme dans un flux ou un fichier.</span><span class="sxs-lookup"><span data-stu-id="32b17-114">Some overloads of the <xref:System.IO.TextWriter.WriteLine%2A?displayProperty=nameWithType> method, which write the formatted result string to a stream or file.</span></span> <span data-ttu-id="32b17-115">Les classes dérivées de <xref:System.IO.TextWriter>, telles que <xref:System.IO.StreamWriter> et <xref:System.Web.UI.HtmlTextWriter>, partagent également ces fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="32b17-115">The classes derived from <xref:System.IO.TextWriter>, such as <xref:System.IO.StreamWriter> and <xref:System.Web.UI.HtmlTextWriter>, also share this functionality.</span></span>  
  
- <span data-ttu-id="32b17-116"><xref:System.Diagnostics.Debug.WriteLine%28System.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType>, qui génère un message mis en forme pour les écouteurs Trace.</span><span class="sxs-lookup"><span data-stu-id="32b17-116"><xref:System.Diagnostics.Debug.WriteLine%28System.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType>, which outputs a formatted message to trace listeners.</span></span>  
  
- <span data-ttu-id="32b17-117">Les méthodes <xref:System.Diagnostics.Trace.TraceError%28System.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType>, <xref:System.Diagnostics.Trace.TraceInformation%28System.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> et <xref:System.Diagnostics.Trace.TraceWarning%28System.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> qui génèrent des messages mis en forme pour les écouteurs Trace.</span><span class="sxs-lookup"><span data-stu-id="32b17-117">The <xref:System.Diagnostics.Trace.TraceError%28System.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType>, <xref:System.Diagnostics.Trace.TraceInformation%28System.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType>, and <xref:System.Diagnostics.Trace.TraceWarning%28System.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> methods, which output formatted messages to trace listeners.</span></span>  
  
- <span data-ttu-id="32b17-118">La méthode <xref:System.Diagnostics.TraceSource.TraceInformation%28System.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType>, qui écrit une méthode à caractère informatif pour les écouteurs Trace.</span><span class="sxs-lookup"><span data-stu-id="32b17-118">The <xref:System.Diagnostics.TraceSource.TraceInformation%28System.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> method, which writes an informational method to trace listeners.</span></span>  
  
## <a name="composite-format-string"></a><span data-ttu-id="32b17-119">Chaîne de format composite</span><span class="sxs-lookup"><span data-stu-id="32b17-119">Composite Format String</span></span>  
 <span data-ttu-id="32b17-120">Une chaîne de format composite et une liste d'objets sont utilisées comme arguments des méthodes qui prennent en charge la fonctionnalité de mise en forme composite.</span><span class="sxs-lookup"><span data-stu-id="32b17-120">A composite format string and object list are used as arguments of methods that support the composite formatting feature.</span></span> <span data-ttu-id="32b17-121">Une chaîne de format composite se compose de zéro ou plusieurs séquences de texte fixe mélangées à un ou plusieurs éléments de format.</span><span class="sxs-lookup"><span data-stu-id="32b17-121">A composite format string consists of zero or more runs of fixed text intermixed with one or more format items.</span></span> <span data-ttu-id="32b17-122">Le texte fixe correspond à toute chaîne que vous choisissez, et chaque élément de format correspond à un objet ou une structure boxed dans la liste.</span><span class="sxs-lookup"><span data-stu-id="32b17-122">The fixed text is any string that you choose, and each format item corresponds to an object or boxed structure in the list.</span></span> <span data-ttu-id="32b17-123">La fonctionnalité de mise en forme composite retourne une nouvelle chaîne résultante, dans laquelle chaque élément de format est remplacé par la représentation sous forme de chaîne de l’objet correspondant dans la liste.</span><span class="sxs-lookup"><span data-stu-id="32b17-123">The composite formatting feature returns a new result string where each format item is replaced by the string representation of the corresponding object in the list.</span></span>  
  
 <span data-ttu-id="32b17-124">Prenons le fragment de code <xref:System.String.Format%2A> suivant.</span><span class="sxs-lookup"><span data-stu-id="32b17-124">Consider the following <xref:System.String.Format%2A> code fragment.</span></span>  
  
 [!code-csharp[Formatting.Composite#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.Composite/cs/Composite1.cs#1)]
 [!code-vb[Formatting.Composite#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.Composite/vb/Composite1.vb#1)]  
  
 <span data-ttu-id="32b17-125">Le texte fixe est `Name =` et `, hours =`.</span><span class="sxs-lookup"><span data-stu-id="32b17-125">The fixed text is "`Name =` " and "`, hours =` ".</span></span> <span data-ttu-id="32b17-126">Les éléments de format sont `{0}`, dont l’index est 0, ce qui correspond à l’objet `name`, et `{1:hh}`, dont l’index est 1, ce qui correspond à l’objet `DateTime.Now`.</span><span class="sxs-lookup"><span data-stu-id="32b17-126">The format items are "`{0}`", whose index is 0, which corresponds to the object `name`, and "`{1:hh}`", whose index is 1, which corresponds to the object `DateTime.Now`.</span></span>  
  
## <a name="format-item-syntax"></a><span data-ttu-id="32b17-127">Syntaxe des éléments de format</span><span class="sxs-lookup"><span data-stu-id="32b17-127">Format Item Syntax</span></span>  
 <span data-ttu-id="32b17-128">Chaque élément de format prend la forme suivante et comprend les composants suivants :</span><span class="sxs-lookup"><span data-stu-id="32b17-128">Each format item takes the following form and consists of the following components:</span></span>  
  
 <span data-ttu-id="32b17-129">*index*`{` [ *alignement*`,`] [`:`*FormatString*]`}`</span><span class="sxs-lookup"><span data-stu-id="32b17-129">`{` *index*[`,`*alignment*][`:`*formatString*]`}`</span></span>  
  
 <span data-ttu-id="32b17-130">Les accolades correspondantes (« { » et « } ») sont nécessaires.</span><span class="sxs-lookup"><span data-stu-id="32b17-130">The matching braces ("{" and "}") are required.</span></span>  
  
### <a name="index-component"></a><span data-ttu-id="32b17-131">Composant d'index</span><span class="sxs-lookup"><span data-stu-id="32b17-131">Index Component</span></span>  
 <span data-ttu-id="32b17-132">Le composant obligatoire *index*, également appelé « spécificateur de paramètre », est un nombre à partir de 0 qui permet d’identifier un élément correspondant dans la liste des objets.</span><span class="sxs-lookup"><span data-stu-id="32b17-132">The mandatory *index* component, also called a parameter specifier, is a number starting from 0 that identifies a corresponding item in the list of objects.</span></span> <span data-ttu-id="32b17-133">En d'autres termes, l'élément de format dont le spécificateur de format est 0 met en forme le premier objet de la liste, l'élément de format dont le spécificateur de paramètres est 1 met en forme le deuxième objet de la liste, etc.</span><span class="sxs-lookup"><span data-stu-id="32b17-133">That is, the format item whose parameter specifier is 0 formats the first object in the list, the format item whose parameter specifier is 1 formats the second object in the list, and so on.</span></span> <span data-ttu-id="32b17-134">L’exemple suivant comprend quatre spécificateurs de paramètres, numérotés de 0 à 3, pour représenter les nombres premiers inférieurs à 10 :</span><span class="sxs-lookup"><span data-stu-id="32b17-134">The following example includes four parameter specifiers, numbered zero through three,  to represent prime numbers less than ten:</span></span>  
  
 [!code-csharp[Formatting.Composite#7](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.Composite/cs/index1.cs#7)]
 [!code-vb[Formatting.Composite#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.Composite/vb/index1.vb#7)]  
  
 <span data-ttu-id="32b17-135">Plusieurs éléments de format peuvent faire référence au même élément de la liste d'objets en indiquant le même spécificateur de paramètre.</span><span class="sxs-lookup"><span data-stu-id="32b17-135">Multiple format items can refer to the same element in the list of objects by specifying the same parameter specifier.</span></span> <span data-ttu-id="32b17-136">Par exemple, vous pouvez mettre en forme la même valeur numérique au format hexadécimal, scientifique et numérique en spécifiant une chaîne de format composite telle que : « 0x{0:X} {0:E} {0:N}», comme le montre l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="32b17-136">For example, you can format the same numeric value in hexadecimal, scientific, and number format by specifying a composite format string such as : "0x{0:X} {0:E} {0:N}", as the following example shows.</span></span>  
  
 [!code-csharp[Formatting.Composite#10](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.Composite/cs/index1.cs#10)]
 [!code-vb[Formatting.Composite#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.Composite/vb/index1.vb#10)]  
  
 <span data-ttu-id="32b17-137">Chaque élément de format peut faire référence à n'importe quel objet de la liste.</span><span class="sxs-lookup"><span data-stu-id="32b17-137">Each format item can refer to any object in the list.</span></span> <span data-ttu-id="32b17-138">Par exemple, s’il y a trois objets, vous pouvez mettre en forme le deuxième, le premier et le troisième objet en spécifiant une chaîne de format composite comme suit : «{1} {0} {2}».</span><span class="sxs-lookup"><span data-stu-id="32b17-138">For example, if there are three objects, you can format the second, first, and third object by specifying a composite format string like this: "{1} {0} {2}".</span></span> <span data-ttu-id="32b17-139">Un objet qui n'est pas référencé par un élément de format est ignoré.</span><span class="sxs-lookup"><span data-stu-id="32b17-139">An object that is not referenced by a format item is ignored.</span></span> <span data-ttu-id="32b17-140">Une exception <xref:System.FormatException> est levée à l'exécution si un spécificateur de paramètres désigne un élément situé en dehors des limites de la liste d'objets.</span><span class="sxs-lookup"><span data-stu-id="32b17-140">A <xref:System.FormatException> is thrown at runtime if a parameter specifier designates an item outside the bounds of the list of objects.</span></span>  
  
### <a name="alignment-component"></a><span data-ttu-id="32b17-141">Composant d'alignement</span><span class="sxs-lookup"><span data-stu-id="32b17-141">Alignment Component</span></span>  
 <span data-ttu-id="32b17-142">Le composant facultatif *alignment* est un entier signé indiquant la largeur préférée du champ mis en forme.</span><span class="sxs-lookup"><span data-stu-id="32b17-142">The optional *alignment* component is a signed integer indicating the preferred formatted field width.</span></span> <span data-ttu-id="32b17-143">Si la valeur du composant *alignment* est inférieure à la longueur de la chaîne mise en forme, *alignment*est ignoré et la longueur de la chaîne mise en forme est utilisée comme largeur de champ.</span><span class="sxs-lookup"><span data-stu-id="32b17-143">If the value of *alignment* is less than the length of the formatted string, *alignment* is ignored and the length of the formatted string is used as the field width.</span></span> <span data-ttu-id="32b17-144">Les données mises en forme dans le champ sont alignées à droite si *alignment* est positif et alignées à gauche si *alignment* est négatif.</span><span class="sxs-lookup"><span data-stu-id="32b17-144">The formatted data in the field is right-aligned if *alignment* is positive and left-aligned if *alignment* is negative.</span></span> <span data-ttu-id="32b17-145">Si un remplissage est nécessaire, des espaces blancs sont utilisés.</span><span class="sxs-lookup"><span data-stu-id="32b17-145">If padding is necessary, white space is used.</span></span> <span data-ttu-id="32b17-146">La virgule est obligatoire si *alignment* est spécifié.</span><span class="sxs-lookup"><span data-stu-id="32b17-146">The comma is required if *alignment*  is specified.</span></span>  
  
 <span data-ttu-id="32b17-147">L'exemple suivant définit deux tableaux, l'un contenant les noms des employés et l'autre contenant les heures qu'ils ont prestées sur une période de deux semaines.</span><span class="sxs-lookup"><span data-stu-id="32b17-147">The following example defines two arrays, one containing the names of employees and the other containing the hours they worked over a two-week period.</span></span> <span data-ttu-id="32b17-148">La chaîne de format composite aligne les noms à gauche dans un champ de 20 caractères et aligne leurs heures à droite dans un champ de 5 caractères.</span><span class="sxs-lookup"><span data-stu-id="32b17-148">The composite format string left-aligns the names in a 20-character field, and right-aligns their hours in a 5-character field.</span></span> <span data-ttu-id="32b17-149">Notez que la chaîne de format standard "N1" est également utilisée pour mettre les heures sous la forme d'un nombre avec une décimale.</span><span class="sxs-lookup"><span data-stu-id="32b17-149">Note that the "N1" standard format string is also used to format the hours with one fractional digit.</span></span>  
  
 [!code-csharp[Formatting.Composite#8](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.Composite/cs/alignment1.cs#8)]
 [!code-vb[Formatting.Composite#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.Composite/vb/alignment1.vb#8)]  
  
### <a name="format-string-component"></a><span data-ttu-id="32b17-150">Composant de chaîne de format</span><span class="sxs-lookup"><span data-stu-id="32b17-150">Format String Component</span></span>  
 <span data-ttu-id="32b17-151">Le composant facultatif *formatString* est une chaîne de format appropriée pour le type d’objet mis en forme.</span><span class="sxs-lookup"><span data-stu-id="32b17-151">The optional *formatString* component is a format string that is appropriate for the type of object being formatted.</span></span> <span data-ttu-id="32b17-152">Spécifiez une chaîne de format numérique standard ou personnalisée si l'objet correspondant est une valeur numérique, une chaîne de format de date et d'heure standard ou personnalisée si l'objet correspondant est un objet <xref:System.DateTime>, ou une [chaîne de format d'énumération](../../../docs/standard/base-types/enumeration-format-strings.md) si l'objet correspondant est une valeur d'énumération.</span><span class="sxs-lookup"><span data-stu-id="32b17-152">Specify a standard or custom numeric format string if the corresponding object is a numeric value, a standard or custom date and time format string if the corresponding object is a <xref:System.DateTime> object, or an [enumeration format string](../../../docs/standard/base-types/enumeration-format-strings.md) if the corresponding object is an enumeration value.</span></span> <span data-ttu-id="32b17-153">Si *formatString* n’est pas spécifié, le spécificateur de format général (« G ») pour un type numérique, de date et d’heure ou d’énumération est utilisé.</span><span class="sxs-lookup"><span data-stu-id="32b17-153">If *formatString* is not specified, the general ("G") format specifier for a numeric, date and time, or enumeration type is used.</span></span> <span data-ttu-id="32b17-154">Le point est obligatoire si *formatString* est spécifié.</span><span class="sxs-lookup"><span data-stu-id="32b17-154">The colon is required if *formatString* is specified.</span></span>  
  
 <span data-ttu-id="32b17-155">Le tableau suivant répertorie les types ou les catégories de types dans la bibliothèque de classes .NET Framework qui prennent en charge un ensemble prédéfini de chaînes de format, et fournit des liens vers les rubriques qui répertorient les chaînes de format prises en charge.</span><span class="sxs-lookup"><span data-stu-id="32b17-155">The following table lists types or categories of types in the .NET Framework class library that support a predefined set of format strings, and provides links to the topics that list the supported format strings.</span></span> <span data-ttu-id="32b17-156">Notez que la mise en forme de chaînes est un mécanisme extensible qui permet de définir de nouvelles chaînes de format pour tous les types existants et de définir un ensemble de chaînes de format pris en charge par un type défini par l'application.</span><span class="sxs-lookup"><span data-stu-id="32b17-156">Note that string formatting is an extensible mechanism that makes it possible to define new format strings for all existing types as well as to define a set of format strings supported by an application-defined type.</span></span> <span data-ttu-id="32b17-157">Pour plus d'informations, consultez les rubriques sur l'interface <xref:System.IFormattable> et <xref:System.ICustomFormatter>.</span><span class="sxs-lookup"><span data-stu-id="32b17-157">For more information, see the <xref:System.IFormattable> and <xref:System.ICustomFormatter> interface topics.</span></span>  
  
|<span data-ttu-id="32b17-158">Type ou catégorie de type</span><span class="sxs-lookup"><span data-stu-id="32b17-158">Type or type category</span></span>|<span data-ttu-id="32b17-159">Consultez</span><span class="sxs-lookup"><span data-stu-id="32b17-159">See</span></span>|  
|---------------------------|---------|  
|<span data-ttu-id="32b17-160">Types de date et d'heure (<xref:System.DateTime>, <xref:System.DateTimeOffset>)</span><span class="sxs-lookup"><span data-stu-id="32b17-160">Date and time types (<xref:System.DateTime>, <xref:System.DateTimeOffset>)</span></span>|[<span data-ttu-id="32b17-161">Standard Date and Time Format Strings</span><span class="sxs-lookup"><span data-stu-id="32b17-161">Standard Date and Time Format Strings</span></span>](../../../docs/standard/base-types/standard-date-and-time-format-strings.md)<br /><br /> [<span data-ttu-id="32b17-162">Chaînes de format de date et d'heure personnalisées</span><span class="sxs-lookup"><span data-stu-id="32b17-162">Custom Date and Time Format Strings</span></span>](../../../docs/standard/base-types/custom-date-and-time-format-strings.md)|  
|<span data-ttu-id="32b17-163">Types d'énumération (tous les types dérivés de <xref:System.Enum?displayProperty=nameWithType>)</span><span class="sxs-lookup"><span data-stu-id="32b17-163">Enumeration types (all types derived from <xref:System.Enum?displayProperty=nameWithType>)</span></span>|[<span data-ttu-id="32b17-164">Chaînes de format d’énumération</span><span class="sxs-lookup"><span data-stu-id="32b17-164">Enumeration Format Strings</span></span>](../../../docs/standard/base-types/enumeration-format-strings.md)|  
|<span data-ttu-id="32b17-165">Types numériques (<xref:System.Numerics.BigInteger>, <xref:System.Byte>, <xref:System.Decimal>, <xref:System.Double>, <xref:System.Int16>, <xref:System.Int32>, <xref:System.Int64>, <xref:System.SByte>, <xref:System.Single>, <xref:System.UInt16>, <xref:System.UInt32>, <xref:System.UInt64>)</span><span class="sxs-lookup"><span data-stu-id="32b17-165">Numeric types (<xref:System.Numerics.BigInteger>, <xref:System.Byte>, <xref:System.Decimal>, <xref:System.Double>, <xref:System.Int16>, <xref:System.Int32>, <xref:System.Int64>, <xref:System.SByte>, <xref:System.Single>, <xref:System.UInt16>, <xref:System.UInt32>, <xref:System.UInt64>)</span></span>|[<span data-ttu-id="32b17-166">Chaînes de format numériques standard</span><span class="sxs-lookup"><span data-stu-id="32b17-166">Standard Numeric Format Strings</span></span>](../../../docs/standard/base-types/standard-numeric-format-strings.md)<br /><br /> [<span data-ttu-id="32b17-167">Chaînes de format numériques personnalisées</span><span class="sxs-lookup"><span data-stu-id="32b17-167">Custom Numeric Format Strings</span></span>](../../../docs/standard/base-types/custom-numeric-format-strings.md)|  
|<xref:System.Guid>|<xref:System.Guid.ToString%28System.String%29?displayProperty=nameWithType>|  
|<xref:System.TimeSpan>|[<span data-ttu-id="32b17-168">Chaînes de format TimeSpan standard</span><span class="sxs-lookup"><span data-stu-id="32b17-168">Standard TimeSpan Format Strings</span></span>](../../../docs/standard/base-types/standard-timespan-format-strings.md)<br /><br /> [<span data-ttu-id="32b17-169">Chaînes de format TimeSpan personnalisées</span><span class="sxs-lookup"><span data-stu-id="32b17-169">Custom TimeSpan Format Strings</span></span>](../../../docs/standard/base-types/custom-timespan-format-strings.md)|  
  
### <a name="escaping-braces"></a><span data-ttu-id="32b17-170">Accolades d'échappement</span><span class="sxs-lookup"><span data-stu-id="32b17-170">Escaping Braces</span></span>  
 <span data-ttu-id="32b17-171">Les accolades ouvrantes et fermantes sont interprétées comme le début et la fin d'un élément de format.</span><span class="sxs-lookup"><span data-stu-id="32b17-171">Opening and closing braces are interpreted as starting and ending a format item.</span></span> <span data-ttu-id="32b17-172">Par conséquent, vous devez utiliser une séquence d'échappement pour afficher une accolade ouvrante ou fermante littérale.</span><span class="sxs-lookup"><span data-stu-id="32b17-172">Consequently, you must use an escape sequence to display a literal opening brace or closing brace.</span></span> <span data-ttu-id="32b17-173">Spécifiez deux accolades ouvrantes (« {{ ») dans le texte fixe pour afficher une accolade ouvrante (« { ») ou deux accolades fermantes (« }} ») pour afficher une accolade fermante (« } »).</span><span class="sxs-lookup"><span data-stu-id="32b17-173">Specify two opening braces ("{{") in the fixed text to display one opening brace ("{"), or two closing braces ("}}") to display one closing brace ("}").</span></span> <span data-ttu-id="32b17-174">Les accolades d'un élément de format sont interprétées séquentiellement dans l'ordre dans lequel elles sont rencontrées.</span><span class="sxs-lookup"><span data-stu-id="32b17-174">Braces in a format item are interpreted sequentially in the order they are encountered.</span></span> <span data-ttu-id="32b17-175">L'interprétation des accolades imbriquées n'est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="32b17-175">Interpreting nested braces is not supported.</span></span>  
  
 <span data-ttu-id="32b17-176">La façon dont les accolades d'échappement sont interprétées peut générer des résultats inattendus.</span><span class="sxs-lookup"><span data-stu-id="32b17-176">The way escaped braces are interpreted can lead to unexpected results.</span></span> <span data-ttu-id="32b17-177">Par exemple, considérez l'élément de format « {{{0:D}}} » destiné à afficher une accolade ouvrante, une valeur numérique mise en forme en tant que nombre décimal et une accolade fermante.</span><span class="sxs-lookup"><span data-stu-id="32b17-177">For example, consider the format item "{{{0:D}}}", which is intended to display an opening brace, a numeric value formatted as a decimal number, and a closing brace.</span></span> <span data-ttu-id="32b17-178">Toutefois, l'élément de format est réellement interprété de la manière suivante :</span><span class="sxs-lookup"><span data-stu-id="32b17-178">However, the format item is actually interpreted in the following manner:</span></span>  
  
1. <span data-ttu-id="32b17-179">Les deux premières accolades ouvrantes (« {{ ») font l'objet d'un échappement et produisent une accolade ouvrante.</span><span class="sxs-lookup"><span data-stu-id="32b17-179">The first two opening braces ("{{") are escaped and yield one opening brace.</span></span>  
  
2. <span data-ttu-id="32b17-180">Les trois caractères suivants (« {0: ») sont interprétés comme le début d'un élément de format.</span><span class="sxs-lookup"><span data-stu-id="32b17-180">The next three characters ("{0:") are interpreted as the start of a format item.</span></span>  
  
3. <span data-ttu-id="32b17-181">Le caractère suivant (« D ») devrait être interprété comme le spécificateur de format numérique standard Decimal, mais les deux accolades d'échappement suivantes (« }} ») produisent une seule accolade.</span><span class="sxs-lookup"><span data-stu-id="32b17-181">The next character ("D") would be interpreted as the Decimal standard numeric format specifier, but the next two escaped braces ("}}") yield a single brace.</span></span> <span data-ttu-id="32b17-182">Comme la chaîne résultante (« D} ») n'est pas un spécificateur de format numérique standard, elle est interprétée comme une chaîne de mise en forme personnalisée qui sous-entend l'affichage de la chaîne littérale « D} ».</span><span class="sxs-lookup"><span data-stu-id="32b17-182">Because the resulting string ("D}") is not a standard numeric format specifier, the resulting string is interpreted as a custom format string that means display the literal string "D}".</span></span>  
  
4. <span data-ttu-id="32b17-183">La dernière accolade (« } ») est interprétée comme la fin de l'élément de format.</span><span class="sxs-lookup"><span data-stu-id="32b17-183">The last brace ("}") is interpreted as the end of the format item.</span></span>  
  
5. <span data-ttu-id="32b17-184">Le résultat final affiché est la chaîne littérale, « {D} ».</span><span class="sxs-lookup"><span data-stu-id="32b17-184">The final result that is displayed is the literal string, "{D}".</span></span> <span data-ttu-id="32b17-185">La valeur numérique qui devait être mise en forme n'est pas affichée.</span><span class="sxs-lookup"><span data-stu-id="32b17-185">The numeric value that was to be formatted is not displayed.</span></span>  
  
 <span data-ttu-id="32b17-186">Pour éviter une mauvaise interprétation des accolades d'échappement et des éléments de format, mettez en forme séparément les accolades et l'élément de format.</span><span class="sxs-lookup"><span data-stu-id="32b17-186">One way to write your code to avoid misinterpreting escaped braces and format items is to format the braces and format item separately.</span></span> <span data-ttu-id="32b17-187">Autrement dit, dans la première opération de formatage, affichez une accolade ouvrante littérale, dans l'opération suivante, affichez le résultat de l'élément de format, puis dans la dernière opération, affichez une accolade fermante littérale.</span><span class="sxs-lookup"><span data-stu-id="32b17-187">That is, in the first format operation display a literal opening brace, in the next operation display the result of the format item, then in the final operation display a literal closing brace.</span></span> <span data-ttu-id="32b17-188">L'exemple suivant illustre cette approche.</span><span class="sxs-lookup"><span data-stu-id="32b17-188">The following example illustrates this approach.</span></span>  
  
 [!code-csharp[Formatting.Composite#2](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.Composite/cs/Escaping1.cs#2)]
 [!code-vb[Formatting.Composite#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.Composite/vb/Escaping1.vb#2)]  
  
### <a name="processing-order"></a><span data-ttu-id="32b17-189">Ordre de traitement</span><span class="sxs-lookup"><span data-stu-id="32b17-189">Processing Order</span></span>  
 <span data-ttu-id="32b17-190">Si l'appel à la méthode de mise en forme composite comprend un argument <xref:System.IFormatProvider> dont la valeur n'est pas `null`, le runtime appelle sa méthode <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> pour demander une implémentation de <xref:System.ICustomFormatter>.</span><span class="sxs-lookup"><span data-stu-id="32b17-190">If the call to the composite formatting method includes an <xref:System.IFormatProvider> argument whose value is not `null`, the runtime calls its <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> method to request an <xref:System.ICustomFormatter> implementation.</span></span> <span data-ttu-id="32b17-191">Si la méthode est en mesure de retourner une implémentation de <xref:System.ICustomFormatter>, elle est mise en cache durant l’appel de la méthode de mise en forme composite.</span><span class="sxs-lookup"><span data-stu-id="32b17-191">If the method is able to return an <xref:System.ICustomFormatter> implementation, it's cached for the duration of the call of the composite formatting method.</span></span>
  
 <span data-ttu-id="32b17-192">Chaque valeur de la liste de paramètres qui correspond à un élément de mise en forme est convertie en une chaîne de la manière suivante :</span><span class="sxs-lookup"><span data-stu-id="32b17-192">Each value in the parameter list that corresponds to a format item is converted to a string as follows:</span></span>  
  
1. <span data-ttu-id="32b17-193">Si la valeur à mettre en forme est `null`, une chaîne vide <xref:System.String.Empty?displayProperty=nameWithType> est retournée.</span><span class="sxs-lookup"><span data-stu-id="32b17-193">If the value to be formatted is `null`, an empty string <xref:System.String.Empty?displayProperty=nameWithType> is returned.</span></span>  
  
2. <span data-ttu-id="32b17-194">Si une implémentation de <xref:System.ICustomFormatter> est disponible, le runtime appelle sa méthode <xref:System.ICustomFormatter.Format%2A>.</span><span class="sxs-lookup"><span data-stu-id="32b17-194">If an <xref:System.ICustomFormatter> implementation is available, the runtime calls its <xref:System.ICustomFormatter.Format%2A> method.</span></span> <span data-ttu-id="32b17-195">Il passe à la méthode la valeur *formatString* de l’élément de mise en forme, s’il en existe une, ou `null` si ce n’est pas le cas, ainsi que l’implémentation de <xref:System.IFormatProvider>.</span><span class="sxs-lookup"><span data-stu-id="32b17-195">It passes the method the format item's *formatString* value, if one is present, or `null` if it's not, along with the <xref:System.IFormatProvider> implementation.</span></span> <span data-ttu-id="32b17-196">Si l’appel à la méthode <xref:System.ICustomFormatter.Format%2A?displayProperty=nameWithType> retourne `null`, l’exécution se poursuit à l’étape suivante. Sinon, le résultat de l’appel à <xref:System.ICustomFormatter.Format%2A?displayProperty=nameWithType> est retourné.</span><span class="sxs-lookup"><span data-stu-id="32b17-196">If the call to the <xref:System.ICustomFormatter.Format%2A?displayProperty=nameWithType> method returns `null`, execution proceeds to the next step; otherwise, the result of the <xref:System.ICustomFormatter.Format%2A?displayProperty=nameWithType> call is returned.</span></span>
  
3. <span data-ttu-id="32b17-197">Si la valeur implémente l'interface <xref:System.IFormattable>, la méthode de l'interface <xref:System.IFormattable.ToString%28System.String%2CSystem.IFormatProvider%29> est appelée.</span><span class="sxs-lookup"><span data-stu-id="32b17-197">If the value implements the <xref:System.IFormattable> interface, the interface's <xref:System.IFormattable.ToString%28System.String%2CSystem.IFormatProvider%29> method is called.</span></span> <span data-ttu-id="32b17-198">La valeur *formatString*, s’il en existe une dans l’élément de mise en forme, est passée à la méthode, ou bien la valeur `null` si ce n’est pas le cas.</span><span class="sxs-lookup"><span data-stu-id="32b17-198">The method is passed the *formatString* value, if one is present in the format item, or `null` if it's not.</span></span> <span data-ttu-id="32b17-199">L'argument <xref:System.IFormatProvider> est déterminé comme suit :</span><span class="sxs-lookup"><span data-stu-id="32b17-199">The <xref:System.IFormatProvider> argument is determined as follows:</span></span>  
  
    - <span data-ttu-id="32b17-200">Pour une valeur numérique, si une méthode de mise en forme composite avec l’argument non null <xref:System.IFormatProvider> est appelée, le runtime demande un objet <xref:System.Globalization.NumberFormatInfo> de sa méthode <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="32b17-200">For a numeric value, if a composite formatting method with a non-null <xref:System.IFormatProvider> argument is called, the runtime requests a <xref:System.Globalization.NumberFormatInfo> object from its <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="32b17-201">S’il ne peut pas en fournir un, si la valeur de l’argument est `null` ou si la méthode de mise en forme composite n’a pas de paramètre <xref:System.IFormatProvider>, l’objet <xref:System.Globalization.NumberFormatInfo> de la culture actuelle du thread est utilisé.</span><span class="sxs-lookup"><span data-stu-id="32b17-201">If it's unable to supply one, if the value of the argument is `null`, or if the composite formatting method doesn't have an <xref:System.IFormatProvider> parameter, the <xref:System.Globalization.NumberFormatInfo> object for the current thread culture is used.</span></span>  
  
    - <span data-ttu-id="32b17-202">Pour une valeur de date et d’heure, si une méthode de mise en forme composite avec l’argument non null <xref:System.IFormatProvider> est appelée, le runtime demande un objet <xref:System.Globalization.DateTimeFormatInfo> de sa méthode <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="32b17-202">For a date and time value, if a composite formatting method with a non-null <xref:System.IFormatProvider> argument is called, the runtime requests a <xref:System.Globalization.DateTimeFormatInfo> object from its <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="32b17-203">S’il ne peut pas en fournir un, si la valeur de l’argument est `null` ou si la méthode de mise en forme composite n’a pas de paramètre <xref:System.IFormatProvider>, l’objet <xref:System.Globalization.DateTimeFormatInfo> de la culture actuelle du thread est utilisé.</span><span class="sxs-lookup"><span data-stu-id="32b17-203">If it's unable to supply one, if the value of the argument is `null`, or if the composite formatting method doesn't have an <xref:System.IFormatProvider> parameter, the <xref:System.Globalization.DateTimeFormatInfo> object for the current thread culture is used.</span></span>  
  
    - <span data-ttu-id="32b17-204">Pour les objets d'autres types, si une méthode de mise en forme composite est appelée avec un argument <xref:System.IFormatProvider>, sa valeur est transmise directement à l'implémentation de <xref:System.IFormattable.ToString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="32b17-204">For objects of other types, if a composite formatting method is called with an <xref:System.IFormatProvider> argument, its value is passed directly to the <xref:System.IFormattable.ToString%2A?displayProperty=nameWithType> implementation.</span></span> <span data-ttu-id="32b17-205">Dans le cas contraire, `null` est transmis à l’implémentation de <xref:System.IFormattable.ToString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="32b17-205">Otherwise, `null` is passed to the <xref:System.IFormattable.ToString%2A?displayProperty=nameWithType> implementation.</span></span>  
  
4. <span data-ttu-id="32b17-206">La méthode `ToString` sans paramètre du type, qui remplace <xref:System.Object.ToString?displayProperty=nameWithType> ou hérite du comportement de la classe de base, est appelée.</span><span class="sxs-lookup"><span data-stu-id="32b17-206">The type's parameterless `ToString` method, which either overrides <xref:System.Object.ToString?displayProperty=nameWithType> or inherits the behavior of its base class, is called.</span></span> <span data-ttu-id="32b17-207">Dans ce cas, la chaîne de format spécifiée par le composant *formatString* dans l’élément de mise en forme, si elle est présente, est ignorée.</span><span class="sxs-lookup"><span data-stu-id="32b17-207">In this case, the format string specified by the *formatString* component in the format item, if it's present, is ignored.</span></span>  
  
 <span data-ttu-id="32b17-208">L'alignement est appliqué une fois les précédentes étapes effectuées.</span><span class="sxs-lookup"><span data-stu-id="32b17-208">Alignment is applied after the preceding steps have been performed.</span></span>  
  
## <a name="code-examples"></a><span data-ttu-id="32b17-209">Exemples de code</span><span class="sxs-lookup"><span data-stu-id="32b17-209">Code Examples</span></span>  
 <span data-ttu-id="32b17-210">L'exemple suivant illustre une chaîne créée à l'aide de la mise en forme composite et une autre chaîne créée à l'aide de la méthode `ToString` d'un objet.</span><span class="sxs-lookup"><span data-stu-id="32b17-210">The following example shows one string created using composite formatting and another created using an object's `ToString` method.</span></span> <span data-ttu-id="32b17-211">Les deux types de mise en forme produisent des résultats équivalents.</span><span class="sxs-lookup"><span data-stu-id="32b17-211">Both types of formatting produce equivalent results.</span></span>  
  
 [!code-csharp[Formatting.Composite#3](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.Composite/cs/Composite1.cs#3)]
 [!code-vb[Formatting.Composite#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.Composite/vb/Composite1.vb#3)]  
  
 <span data-ttu-id="32b17-212">En supposant que le jour actuel soit un jeudi du mois de mai, la valeur des deux chaînes de l'exemple précédent est `Thursday May` dans la culture américaine.</span><span class="sxs-lookup"><span data-stu-id="32b17-212">Assuming that the current day is a Thursday in May, the value of both strings in the preceding example is `Thursday May` in the U.S. English culture.</span></span>  
  
 <span data-ttu-id="32b17-213"><xref:System.Console.WriteLine%2A?displayProperty=nameWithType> présente les mêmes fonctionnalités que <xref:System.String.Format%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="32b17-213"><xref:System.Console.WriteLine%2A?displayProperty=nameWithType> exposes the same functionality as <xref:System.String.Format%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="32b17-214">La seule différence entre les deux méthodes est que <xref:System.String.Format%2A?displayProperty=nameWithType> retourne son résultat sous la forme d'une chaîne, alors que <xref:System.Console.WriteLine%2A?displayProperty=nameWithType> écrit le résultat dans le flux de sortie associé à l'objet <xref:System.Console>.</span><span class="sxs-lookup"><span data-stu-id="32b17-214">The only difference between the two methods is that <xref:System.String.Format%2A?displayProperty=nameWithType> returns its result as a string, while <xref:System.Console.WriteLine%2A?displayProperty=nameWithType> writes the result to the output stream associated with the <xref:System.Console> object.</span></span> <span data-ttu-id="32b17-215">L'exemple suivant utilise la méthode <xref:System.Console.WriteLine%2A?displayProperty=nameWithType> pour mettre en forme la valeur de `MyInt` en une valeur monétaire.</span><span class="sxs-lookup"><span data-stu-id="32b17-215">The following example uses the <xref:System.Console.WriteLine%2A?displayProperty=nameWithType> method to format the value of `MyInt` to a currency value.</span></span>  
  
 [!code-csharp[Formatting.Composite#4](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.Composite/cs/Composite1.cs#4)]
 [!code-vb[Formatting.Composite#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.Composite/vb/Composite1.vb#4)]  
  
 <span data-ttu-id="32b17-216">L'exemple suivant illustre la mise en forme de plusieurs objets, y compris la mise en forme d'un objet de deux manières différentes.</span><span class="sxs-lookup"><span data-stu-id="32b17-216">The following example demonstrates formatting multiple objects, including formatting one object two different ways.</span></span>  
  
 [!code-csharp[Formatting.Composite#5](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.Composite/cs/Composite1.cs#5)]
 [!code-vb[Formatting.Composite#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.Composite/vb/Composite1.vb#5)]  
  
 <span data-ttu-id="32b17-217">L'exemple suivant illustre l'utilisation de l'alignement lors de la mise en forme.</span><span class="sxs-lookup"><span data-stu-id="32b17-217">The following example demonstrates the use of alignment in formatting.</span></span> <span data-ttu-id="32b17-218">Les arguments mis en forme sont placés entre des barres verticales (&#124;) pour mettre en évidence l’alignement en résultant.</span><span class="sxs-lookup"><span data-stu-id="32b17-218">The arguments that are formatted are placed between vertical bar characters (&#124;) to highlight the resulting alignment.</span></span>  
  
 [!code-csharp[Formatting.Composite#6](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.Composite/cs/Composite1.cs#6)]
 [!code-vb[Formatting.Composite#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.Composite/vb/Composite1.vb#6)]  
  
## <a name="see-also"></a><span data-ttu-id="32b17-219">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="32b17-219">See also</span></span>

- <xref:System.Console.WriteLine%2A>
- <xref:System.String.Format%2A?displayProperty=nameWithType>
- [<span data-ttu-id="32b17-220">Interpolation de chaîne (C#)</span><span class="sxs-lookup"><span data-stu-id="32b17-220">String interpolation (C#)</span></span>](../../csharp/language-reference/tokens/interpolated.md)
- [<span data-ttu-id="32b17-221">Interpolation de chaîne (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="32b17-221">String interpolation (Visual Basic)</span></span>](../../visual-basic/programming-guide/language-features/strings/interpolated-strings.md)
- [<span data-ttu-id="32b17-222">Mise en forme des types</span><span class="sxs-lookup"><span data-stu-id="32b17-222">Formatting Types</span></span>](../../../docs/standard/base-types/formatting-types.md)
- [<span data-ttu-id="32b17-223">Chaînes de format numériques standard</span><span class="sxs-lookup"><span data-stu-id="32b17-223">Standard Numeric Format Strings</span></span>](../../../docs/standard/base-types/standard-numeric-format-strings.md)
- [<span data-ttu-id="32b17-224">Chaînes de format numériques personnalisées</span><span class="sxs-lookup"><span data-stu-id="32b17-224">Custom Numeric Format Strings</span></span>](../../../docs/standard/base-types/custom-numeric-format-strings.md)
- [<span data-ttu-id="32b17-225">Standard Date and Time Format Strings</span><span class="sxs-lookup"><span data-stu-id="32b17-225">Standard Date and Time Format Strings</span></span>](../../../docs/standard/base-types/standard-date-and-time-format-strings.md)
- [<span data-ttu-id="32b17-226">Chaînes de format de date et d'heure personnalisées</span><span class="sxs-lookup"><span data-stu-id="32b17-226">Custom Date and Time Format Strings</span></span>](../../../docs/standard/base-types/custom-date-and-time-format-strings.md)
- [<span data-ttu-id="32b17-227">Chaînes de format TimeSpan standard</span><span class="sxs-lookup"><span data-stu-id="32b17-227">Standard TimeSpan Format Strings</span></span>](../../../docs/standard/base-types/standard-timespan-format-strings.md)
- [<span data-ttu-id="32b17-228">Chaînes de format TimeSpan personnalisées</span><span class="sxs-lookup"><span data-stu-id="32b17-228">Custom TimeSpan Format Strings</span></span>](../../../docs/standard/base-types/custom-timespan-format-strings.md)
- [<span data-ttu-id="32b17-229">Chaînes de format d’énumération</span><span class="sxs-lookup"><span data-stu-id="32b17-229">Enumeration Format Strings</span></span>](../../../docs/standard/base-types/enumeration-format-strings.md)
