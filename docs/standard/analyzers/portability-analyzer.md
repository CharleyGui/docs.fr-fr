---
title: Analyseur de portabilité .NET – .NET
description: Découvrez comment utiliser l’outil Analyseur de portabilité .NET pour évaluer la portabilité de votre code sur les différentes implémentations de .NET, notamment .NET Core, .NET Standard, UWP et Xamarin.
ms.date: 09/13/2019
ms.technology: dotnet-standard
ms.assetid: 0375250f-5704-4993-a6d5-e21c499cea1e
ms.openlocfilehash: a3979d792b4cfd1f7949a3c8e14c6f856e9e3e21
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/15/2019
ms.locfileid: "72320114"
---
# <a name="the-net-portability-analyzer"></a><span data-ttu-id="2d8b3-103">Analyseur de portabilité .NET</span><span class="sxs-lookup"><span data-stu-id="2d8b3-103">The .NET Portability Analyzer</span></span>

<span data-ttu-id="2d8b3-104">Vous voulez que vos bibliothèques prennent en charge plusieurs plateformes ?</span><span class="sxs-lookup"><span data-stu-id="2d8b3-104">Want to make your libraries support multi-platform?</span></span> <span data-ttu-id="2d8b3-105">Vous voulez savoir quelle quantité de travail est nécessaire pour que votre application .NET Framework s’exécute sur .NET Core ?</span><span class="sxs-lookup"><span data-stu-id="2d8b3-105">Want to see how much work is required to make your .NET Framework application to run on .NET Core?</span></span>  <span data-ttu-id="2d8b3-106">L' [Analyseur de portabilité .net](https://github.com/microsoft/dotnet-apiport) est un outil qui vous fournit un rapport détaillé sur les API .net manquantes pour que vos applications ou bibliothèques soient portables sur les plateformes .net ciblées spécifiées en analysant les assemblys.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-106">The [.NET Portability Analyzer](https://github.com/microsoft/dotnet-apiport) is a tool that provides you with a detailed report  on missing .NET APIs for your applications or libraries to be portable on your specified targeted .NET platforms by analyzing the assemblies.</span></span> <span data-ttu-id="2d8b3-107">L’Analyseur de portabilité est proposé comme [Extension Visual Studio](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer), qui analyse les assemblys par projet, et comme [application console ApiPort](https://aka.ms/apiportdownload), qui analyse les assemblys par fichier ou répertoire spécifié.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-107">The Portability Analyzer is offered as a [Visual Studio Extension](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer), which analyzes assembly per project, and as a [ApiPort console app](https://aka.ms/apiportdownload), which analyzes assemblies by specified files or directory.</span></span>

<span data-ttu-id="2d8b3-108">Une fois que votre projet a été converti pour cibler votre plateforme ciblée, comme .NET Core, vous pouvez utiliser Roslyn [API Analyzer Tool] ([https://docs.microsoft.com/en-us/dotnet/standard/analyzers/api-analyzer](api-analyzer.md) pour identifier les API levant PlatformNotSupportedException et d’autres problèmes de compatibilité.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-108">Once your converted your project to target your targeted platform, like .NET Core, you may use Roslyn based [API Analyzer tool]([https://docs.microsoft.com/en-us/dotnet/standard/analyzers/api-analyzer](api-analyzer.md) to identify APIs throwing PlatformNotSupportedException and some other compatibility issues.</span></span>

## <a name="common-targets"></a><span data-ttu-id="2d8b3-109">Cibles courantes</span><span class="sxs-lookup"><span data-stu-id="2d8b3-109">Common targets</span></span>

- <span data-ttu-id="2d8b3-110">[.NET Core](../../core/index.md) : possède une conception modulaire, emploie le mode côte-à-côte et cible des scénarios multiplateformes.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-110">[.NET Core](../../core/index.md): Has a modular design, employs side-by-side, and targets cross-platform scenarios.</span></span> <span data-ttu-id="2d8b3-111">Le mode côte-à-côte vous permet d’adopter de nouvelles versions de .NET Core sans interrompre les autres applications.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-111">Side-by-side allows you to adopt new .NET Core versions without breaking other apps.</span></span> <span data-ttu-id="2d8b3-112">Si votre objectif est de porter votre application vers plusieurs plateformes prises en charge par .NET Core, c’est la cible recommandée.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-112">If your goal is to port your app to .NET Core supporting cross-platforms, this is the recommended target.</span></span> 
- <span data-ttu-id="2d8b3-113">. [NET standard](../../standard/net-standard.md): comprend les API .NET standard disponibles sur toutes les implémentations .net.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-113">.[NET Standard](../../standard/net-standard.md): Includes the .NET Standard APIs available on all .NET implementations.</span></span> <span data-ttu-id="2d8b3-114">Si votre objectif consiste à faire en sorte que votre bibliothèque s’exécute sur toutes les plateformes prises en charge par .NET, c’est la cible recommandée.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-114">If your goal is to make your library to run on all .NET supported platforms, this is recommended target.</span></span>  
- <span data-ttu-id="2d8b3-115">[ASP.net Core](/aspnet/core): une infrastructure Web moderne reposant sur .net core.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-115">[ASP.NET Core](/aspnet/core): A modern web-framework built on .NET Core.</span></span> <span data-ttu-id="2d8b3-116">Si votre objectif est de porter votre application web vers .NET Core pour prendre en charge plusieurs plateformes, c’est la cible recommandée.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-116">If your goal is to port your web app to .NET Core to support multiple platforms, this is the recommended target.</span></span>
- <span data-ttu-id="2d8b3-117">.NET Core + [extensions de plateforme](../../core/porting/windows-compat-pack.md): inclut les API .net core en plus du Pack de compatibilité Windows, qui fournit un grand nombre des .NET Framework technologies disponibles.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-117">.NET Core + [Platform Extensions](../../core/porting/windows-compat-pack.md): Includes the .NET Core APIs in addition to the Windows Compatibility Pack, which provides many of the .NET Framework available technologies.</span></span> <span data-ttu-id="2d8b3-118">Il s’agit d’une cible recommandée pour le portage de votre application depuis le .NET Framework vers .NET Core sur Windows.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-118">This is a recommended target for porting your app from .NET Framework to .NET Core on Windows.</span></span>
- <span data-ttu-id="2d8b3-119">.NET Standard + [extensions de plateforme](../../core/porting/windows-compat-pack.md): inclut les API .NET standard en plus du Pack de compatibilité Windows, qui fournit une grande partie des .NET Framework technologies disponibles.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-119">.NET Standard + [Platform Extensions](../../core/porting/windows-compat-pack.md): Includes the .NET Standard APIs in addition to the Windows Compatibility Pack, which provides many of the .NET Framework available technologies.</span></span> <span data-ttu-id="2d8b3-120">Il s’agit d’une cible recommandée pour le portage de votre bibliothèque depuis le .NET Framework vers .NET Core sur Windows.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-120">This is a recommended target for porting your library from .NET Framework to .NET Core on Windows.</span></span>

## <a name="how-to-use-the-net-portability-analyzer"></a><span data-ttu-id="2d8b3-121">Comment utiliser l’Analyseur de portabilité .NET</span><span class="sxs-lookup"><span data-stu-id="2d8b3-121">How to use the .NET Portability Analyzer</span></span>

<span data-ttu-id="2d8b3-122">Pour commencer à utiliser l’Analyseur de portabilité .NET dans Visual Studio, vous devez d’abord télécharger l’extension à partir du [Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer) et l’installer.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-122">To begin using the .NET Portability Analyzer in Visual Studio, you first need to download and install the extension from the [Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer).</span></span> <span data-ttu-id="2d8b3-123">Elle fonctionne sur Visual Studio 2017 et les versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-123">It works on Visual Studio 2017 and later versions.</span></span> <span data-ttu-id="2d8b3-124">Vous pouvez la configurer dans Visual Studio via **Analyser** > **Paramètres de l’Analyseur de portabilité** et choisir vos plateformes cibles, c'est-à-dire les plateformes/versions .NET dont vous souhaitez évaluer les écarts de portabilité en les comparant à la plateforme/version avec laquelle votre assembly actuel est créé.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-124">You can configure it in Visual Studio via **Analyze** > **Portability Analyzer Settings** and select your Target Platforms, which is the .NET platforms/versions that you want to evaluate the portability gaps comparing with the platform/version that your current assembly is built with.</span></span>

![Capture d’écran de l’analyseur de portabilité.](./media/portability-analyzer/portability-screenshot.png)

<span data-ttu-id="2d8b3-126">Vous pouvez aussi utiliser l’application console ApiPort et la télécharger à partir du [référentiel ApiPort](https://aka.ms/apiportdownload).</span><span class="sxs-lookup"><span data-stu-id="2d8b3-126">You can also use the ApiPort console application, download it from [ApiPort repository](https://aka.ms/apiportdownload).</span></span> <span data-ttu-id="2d8b3-127">Vous pouvez utiliser l’option de commande `listTargets` pour afficher la liste des cibles disponibles, puis sélectionner les plateformes cibles en spécifiant l’option de commande `-t` ou `--target`.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-127">You can use `listTargets` command option to display the available target list, then pick target platforms by specifying `-t` or `--target` command option.</span></span> 

### <a name="analyze-portability"></a><span data-ttu-id="2d8b3-128">Analyser la portabilité</span><span class="sxs-lookup"><span data-stu-id="2d8b3-128">Analyze portability</span></span>
<span data-ttu-id="2d8b3-129">Pour analyser l’ensemble de votre projet dans Visual Studio, cliquez avec le bouton droit sur votre projet dans l’**Explorateur de solutions** et sélectionnez **Analyser la portabilité des assemblys**.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-129">To analyze your entire project in Visual Studio, right-click on your project in **Solution Explorer** and select **Analyze Assembly Portability**.</span></span> <span data-ttu-id="2d8b3-130">Sinon, accédez au menu **Analyser** et sélectionnez **Analyser la portabilité des assemblys**.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-130">Otherwise, go to the **Analyze** menu and select **Analyze Assembly Portability**.</span></span> <span data-ttu-id="2d8b3-131">À partir de là, sélectionnez l’exécutable ou la DLL de votre projet.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-131">From there, select your project’s executable or DLL.</span></span>

![Capture d’écran de l’analyseur de portabilité de Explorateur de solutions.](./media/portability-analyzer/portability-solution-explorer.png)

<span data-ttu-id="2d8b3-133">Vous pouvez également utiliser l’[application console ApiPort](https://aka.ms/apiportdownload).</span><span class="sxs-lookup"><span data-stu-id="2d8b3-133">You can also use the [ApiPort console app](https://aka.ms/apiportdownload).</span></span> 

- <span data-ttu-id="2d8b3-134">Tapez la commande suivante pour analyser le répertoire actif : `ApiPort.exe analyze -f .`</span><span class="sxs-lookup"><span data-stu-id="2d8b3-134">Type the following command to analyze the current directory: `ApiPort.exe analyze -f .`</span></span>
- <span data-ttu-id="2d8b3-135">Pour analyser une liste spécifique de fichiers .dll, tapez la commande suivante : `ApiPort.exe analyze -f first.dll -f second.dll -f third.dll`</span><span class="sxs-lookup"><span data-stu-id="2d8b3-135">To analyze a specific list of .dll files, type the following command: `ApiPort.exe analyze -f first.dll -f second.dll -f third.dll`</span></span>
- <span data-ttu-id="2d8b3-136">Exécuter `ApiPort.exe -?` pour obtenir plus d’aide</span><span class="sxs-lookup"><span data-stu-id="2d8b3-136">Run `ApiPort.exe -?` to get more help</span></span>

<span data-ttu-id="2d8b3-137">Il est recommandé d’inclure tous les fichiers exe et dll associés dont vous êtes propriétaire et que vous souhaitez porter, et d’exclure les fichiers dont dépend votre application, mais dont vous n’êtes pas propriétaire et que vous ne pouvez pas porter.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-137">It is recommended that you include all the related exe and dll files that you own and want to port, and exclude the files that your app depends on, but you don't own and can't port.</span></span> <span data-ttu-id="2d8b3-138">Vous obtiendrez ainsi le rapport de portabilité le plus pertinent possible.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-138">This will give you most relevant portability report.</span></span>  

### <a name="view-and-interpret-portability-result"></a><span data-ttu-id="2d8b3-139">Consulter et interpréter les résultats de portabilité</span><span class="sxs-lookup"><span data-stu-id="2d8b3-139">View and interpret portability result</span></span>

<span data-ttu-id="2d8b3-140">Seules les API qui ne sont pas prises en charge par une plateforme cible apparaissent dans le rapport.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-140">Only APIs that are unsupported by a Target Platform appear in the report.</span></span> <span data-ttu-id="2d8b3-141">Après avoir exécuté l’analyse dans Visual Studio, vous verrez s’afficher un lien vers le fichier du rapport de portabilité .NET.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-141">After running the analysis in Visual Studio, you'll see your .NET Portability report file link pops up.</span></span> <span data-ttu-id="2d8b3-142">Si vous avez utilisé l’[application console ApiPort](https://aka.ms/apiportdownload), votre rapport de portabilité de .NET est enregistré en tant que fichier dans le format que vous avez spécifié.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-142">If you used the [ApiPort console app](https://aka.ms/apiportdownload), your .NET Portability report is saved as a file in the format you specified.</span></span> <span data-ttu-id="2d8b3-143">Le format par défaut est un fichier Excel ( *.xlsx*) dans votre répertoire actuel.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-143">The default is in an Excel file (*.xlsx*) in your current directory.</span></span>

#### <a name="portability-summary"></a><span data-ttu-id="2d8b3-144">Synthèse de la portabilité</span><span class="sxs-lookup"><span data-stu-id="2d8b3-144">Portability Summary</span></span> 

![Capture d’écran de la synthèse de la portabilité.](./media/portability-analyzer/api-catalog-portablility-summary.png)

<span data-ttu-id="2d8b3-146">La section sur la synthèse de la portabilité du rapport montre le pourcentage de portabilité de chaque assembly inclus lors de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-146">The Portability Summary section of the report shows the portability percentage for each assembly included in the run.</span></span> <span data-ttu-id="2d8b3-147">Dans l’exemple précédent, 71,24 % des API .NET Framework utilisées dans l’application `svcutil` sont disponibles dans .NET Core + Extensions de plateforme.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-147">In the previous example, 71.24% of the .NET Framework APIs used in the `svcutil` app are available in .NET Core + Platform Extensions.</span></span> <span data-ttu-id="2d8b3-148">Si vous exécutez l’outil Analyseur de portabilité .NET sur plusieurs assemblys, chaque assembly doit avoir une ligne dans le rapport de synthèse de la portabilité.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-148">If you run the .NET Portability Analyzer tool against multiple assemblies, each assembly should have a row in the Portability Summary report.</span></span>

#### <a name="details"></a><span data-ttu-id="2d8b3-149">Détails</span><span class="sxs-lookup"><span data-stu-id="2d8b3-149">Details</span></span>

![Capture d’écran des détails de la portabilité.](./media/portability-analyzer/api-catalog-portablility-details.png)

<span data-ttu-id="2d8b3-151">La section **Détails** du rapport répertorie les API manquantes dans les **plateformes ciblées**sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-151">The **Details** section of the report lists the APIs missing from any of the selected **Targeted Platforms**.</span></span> 

- <span data-ttu-id="2d8b3-152">Type cible : le type a une API manquante dans une plateforme cible</span><span class="sxs-lookup"><span data-stu-id="2d8b3-152">Target type: the type has missing API from a Target Platform</span></span> 
- <span data-ttu-id="2d8b3-153">Membre cible : la méthode est manquante dans une plateforme cible</span><span class="sxs-lookup"><span data-stu-id="2d8b3-153">Target member: the method is missing from a Target Platform</span></span> 
- <span data-ttu-id="2d8b3-154">Nom de l’assembly : assembly .NET Framework dans lequel réside l’API manquante.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-154">Assembly name: the .NET Framework assembly that the missing API lives in.</span></span> 
- <span data-ttu-id="2d8b3-155">Chacune des plateformes cibles sélectionnées est une colonne, par exemple « .NET Core » : la valeur « non pris en charge » signifie que l’API n’est pas prise en charge sur cette plateforme cible.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-155">Each of the selected Target Platforms is one column, such as ".NET Core": "Not supported" value means the API is not supported on this Target Platform.</span></span> 
- <span data-ttu-id="2d8b3-156">Changements recommandés : API ou technologie de remplacement recommandée.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-156">Recommended Changes: recommended API or technology to change to.</span></span> <span data-ttu-id="2d8b3-157">Actuellement, ce champ est vide ou obsolète pour un grand nombre d’API.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-157">Currently, this field is empty or out of date for a lot of APIs.</span></span> <span data-ttu-id="2d8b3-158">En raison du grand nombre d’API, il est très difficile de le maintenir à jour.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-158">Due to the large number of APIs, we have big challenge to keep it up.</span></span> <span data-ttu-id="2d8b3-159">Nous étudions d’autres solutions pour fournir des informations utiles aux clients.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-159">We are looking at alternate solutions to provide helpful information to customers.</span></span>

#### <a name="missing-assemblies"></a><span data-ttu-id="2d8b3-160">Assemblys manquants</span><span class="sxs-lookup"><span data-stu-id="2d8b3-160">Missing Assemblies</span></span>

![Capture d’écran des assemblys manquants.](./media/portability-analyzer/api-catalog-missing-assemblies.png)

<span data-ttu-id="2d8b3-162">Vous trouverez peut-être une section sur les assemblys manquants dans votre rapport.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-162">You may find a Missing Assemblies section in your report.</span></span> <span data-ttu-id="2d8b3-163">Elle vous indique que cette liste d’assemblys est référencée par vos assemblys analysés et qu’ils n’ont pas été analysés.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-163">It tells you that this list of assemblies are referenced by your analyzed assemblies and were not analyzed.</span></span> <span data-ttu-id="2d8b3-164">Si c’est un assembly qui vous appartient, incluez-le dans l’exécution de l’Analyseur de portabilité d’Api afin d’obtenir un rapport de portabilité détaillé au niveau de l’API.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-164">If it's an assembly that you own, include it in the Api portability analyzer run so that you can get API level detailed portability report for it.</span></span> <span data-ttu-id="2d8b3-165">S’il s’agit d’une bibliothèque tierce, regardez si elle a une version plus récente prenant en charge votre plateforme cible.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-165">If it's third party library, looks for if they have newer version supporting your target platform.</span></span> <span data-ttu-id="2d8b3-166">Si oui, passez à la version plus récente.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-166">If so, consider moving to the newer version.</span></span> <span data-ttu-id="2d8b3-167">Au final, vous devriez obtenir une liste qui inclut tous les assemblys tiers dont dépend votre application et qui confirme qu’ils ont une version prenant en charge votre plateforme cible.</span><span class="sxs-lookup"><span data-stu-id="2d8b3-167">Eventually, you would expect this list includes all the third party assemblies that your app depends on and confirmed that they have a version supporting your target platform.</span></span>  

<span data-ttu-id="2d8b3-168">Pour plus d’informations sur l’Analyseur de portabilité .NET, consultez la [documentation GitHub](https://github.com/Microsoft/dotnet-apiport#documentation) et la vidéo Channel 9 [A brief look at the .NET Portability Analyzer](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer) (Aperçu rapide de l’Analyseur de portabilité .NET).</span><span class="sxs-lookup"><span data-stu-id="2d8b3-168">For more information on the .NET Portability Analyzer, visit the [GitHub documentation](https://github.com/Microsoft/dotnet-apiport#documentation) and [A Brief Look at the .NET Portability Analyzer](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer) Channel 9 video.</span></span>
