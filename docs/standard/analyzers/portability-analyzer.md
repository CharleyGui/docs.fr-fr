---
title: Analyseur de portabilité .NET – .NET
description: Découvrez comment utiliser l’outil Analyseur de portabilité .NET pour évaluer la portabilité de votre code sur les différentes implémentations de .NET, notamment .NET Core, .NET Standard, UWP et Xamarin.
ms.date: 09/13/2019
ms.technology: dotnet-standard
ms.assetid: 0375250f-5704-4993-a6d5-e21c499cea1e
ms.openlocfilehash: d2a9551565e9ef0a2ed76960c869829fc2e86a1f
ms.sourcegitcommit: 3824ff187947572b274b9715b60c11269335c181
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/17/2020
ms.locfileid: "84903608"
---
# <a name="the-net-portability-analyzer"></a><span data-ttu-id="0dc01-103">Analyseur de portabilité .NET</span><span class="sxs-lookup"><span data-stu-id="0dc01-103">The .NET Portability Analyzer</span></span>

<span data-ttu-id="0dc01-104">Vous voulez que vos bibliothèques prennent en charge plusieurs plateformes ?</span><span class="sxs-lookup"><span data-stu-id="0dc01-104">Want to make your libraries support multi-platform?</span></span> <span data-ttu-id="0dc01-105">Vous voulez savoir quelle quantité de travail est nécessaire pour que votre application .NET Framework s’exécute sur .NET Core ?</span><span class="sxs-lookup"><span data-stu-id="0dc01-105">Want to see how much work is required to make your .NET Framework application run on .NET Core?</span></span> <span data-ttu-id="0dc01-106">L' [Analyseur de portabilité .net](https://github.com/microsoft/dotnet-apiport) est un outil qui analyse les assemblys et fournit un rapport détaillé sur les API .net qui manquent pour que les applications ou les bibliothèques soient portables sur les plateformes .net ciblées spécifiées.</span><span class="sxs-lookup"><span data-stu-id="0dc01-106">The [.NET Portability Analyzer](https://github.com/microsoft/dotnet-apiport) is a tool that analyzes assemblies and provides a detailed report on .NET APIs that are missing for the applications or libraries to be portable on your specified targeted .NET platforms.</span></span> <span data-ttu-id="0dc01-107">L’analyseur de portabilité est proposé sous la forme d’une [extension Visual Studio](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer), qui analyse un assembly par projet, et en tant qu' [application console ApiPort](https://aka.ms/apiportdownload), qui analyse les assemblys par fichiers ou répertoires spécifiés.</span><span class="sxs-lookup"><span data-stu-id="0dc01-107">The Portability Analyzer is offered as a [Visual Studio Extension](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer), which analyzes one assembly per project, and as a [ApiPort console app](https://aka.ms/apiportdownload), which analyzes assemblies by specified files or directory.</span></span>

<span data-ttu-id="0dc01-108">Une fois que vous avez converti votre projet pour cibler la nouvelle plateforme, comme .NET Core, vous pouvez utiliser l' [outil Analyseur d’API](api-analyzer.md) basé sur Roslyn pour identifier les API levant <xref:System.PlatformNotSupportedException> des exceptions et d’autres problèmes de compatibilité.</span><span class="sxs-lookup"><span data-stu-id="0dc01-108">Once you've converted your project to target the new platform, like .NET Core, you can use the Roslyn-based [API Analyzer tool](api-analyzer.md) to identify APIs throwing <xref:System.PlatformNotSupportedException> exceptions and other compatibility issues.</span></span>

## <a name="common-targets"></a><span data-ttu-id="0dc01-109">Cibles courantes</span><span class="sxs-lookup"><span data-stu-id="0dc01-109">Common targets</span></span>

- <span data-ttu-id="0dc01-110">[.Net Core](../../core/index.yml): possède une conception modulaire, prend en charge l’installation côte à côte et cible des scénarios multiplateformes.</span><span class="sxs-lookup"><span data-stu-id="0dc01-110">[.NET Core](../../core/index.yml): Has a modular design, supports side-by-side installation, and targets cross-platform scenarios.</span></span> <span data-ttu-id="0dc01-111">L’installation côte à côte vous permet d’adopter de nouvelles versions de .NET Core sans interrompre les autres applications.</span><span class="sxs-lookup"><span data-stu-id="0dc01-111">Side-by-side installation allows you to adopt new .NET Core versions without breaking other apps.</span></span> <span data-ttu-id="0dc01-112">Si votre objectif est de porter votre application sur .NET Core et de prendre en charge plusieurs plateformes, il s’agit de la cible recommandée.</span><span class="sxs-lookup"><span data-stu-id="0dc01-112">If your goal is to port your app to .NET Core and support multiple platforms, this is the recommended target.</span></span>
- <span data-ttu-id="0dc01-113">. [NET standard](../net-standard.md): comprend les API .NET standard disponibles sur toutes les implémentations .net.</span><span class="sxs-lookup"><span data-stu-id="0dc01-113">.[NET Standard](../net-standard.md): Includes the .NET Standard APIs available on all .NET implementations.</span></span> <span data-ttu-id="0dc01-114">Si votre objectif est de faire en sorte que votre bibliothèque s’exécute sur toutes les plates-formes prises en charge par .NET, il s’agit de la cible recommandée.</span><span class="sxs-lookup"><span data-stu-id="0dc01-114">If your goal is to make your library run on all .NET supported platforms, this is recommended target.</span></span>
- <span data-ttu-id="0dc01-115">[ASP.net Core](/aspnet/core): une infrastructure Web moderne reposant sur .net core.</span><span class="sxs-lookup"><span data-stu-id="0dc01-115">[ASP.NET Core](/aspnet/core): A modern web-framework built on .NET Core.</span></span> <span data-ttu-id="0dc01-116">Si votre objectif est de porter votre application web vers .NET Core pour prendre en charge plusieurs plateformes, c’est la cible recommandée.</span><span class="sxs-lookup"><span data-stu-id="0dc01-116">If your goal is to port your web app to .NET Core to support multiple platforms, this is the recommended target.</span></span>
- <span data-ttu-id="0dc01-117">.NET Core + [extensions de plateforme](../../core/porting/windows-compat-pack.md): inclut les API .net core en plus du Pack de compatibilité Windows, qui fournit un grand nombre des .NET Framework technologies disponibles.</span><span class="sxs-lookup"><span data-stu-id="0dc01-117">.NET Core + [Platform Extensions](../../core/porting/windows-compat-pack.md): Includes the .NET Core APIs in addition to the Windows Compatibility Pack, which provides many of the .NET Framework available technologies.</span></span> <span data-ttu-id="0dc01-118">Il s’agit d’une cible recommandée pour le portage de votre application depuis le .NET Framework vers .NET Core sur Windows.</span><span class="sxs-lookup"><span data-stu-id="0dc01-118">This is a recommended target for porting your app from .NET Framework to .NET Core on Windows.</span></span>
- <span data-ttu-id="0dc01-119">.NET Standard + [extensions de plateforme](../../core/porting/windows-compat-pack.md): inclut les API .NET standard en plus du Pack de compatibilité Windows, qui fournit une grande partie des .NET Framework technologies disponibles.</span><span class="sxs-lookup"><span data-stu-id="0dc01-119">.NET Standard + [Platform Extensions](../../core/porting/windows-compat-pack.md): Includes the .NET Standard APIs in addition to the Windows Compatibility Pack, which provides many of the .NET Framework available technologies.</span></span> <span data-ttu-id="0dc01-120">Il s’agit d’une cible recommandée pour le portage de votre bibliothèque depuis le .NET Framework vers .NET Core sur Windows.</span><span class="sxs-lookup"><span data-stu-id="0dc01-120">This is a recommended target for porting your library from .NET Framework to .NET Core on Windows.</span></span>

## <a name="how-to-use-the-net-portability-analyzer"></a><span data-ttu-id="0dc01-121">Comment utiliser l’Analyseur de portabilité .NET</span><span class="sxs-lookup"><span data-stu-id="0dc01-121">How to use the .NET Portability Analyzer</span></span>

<span data-ttu-id="0dc01-122">Pour commencer à utiliser l’Analyseur de portabilité .NET dans Visual Studio, vous devez d’abord télécharger l’extension à partir du [Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer) et l’installer.</span><span class="sxs-lookup"><span data-stu-id="0dc01-122">To begin using the .NET Portability Analyzer in Visual Studio, you first need to download and install the extension from the [Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer).</span></span> <span data-ttu-id="0dc01-123">Elle fonctionne sur Visual Studio 2017 et les versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="0dc01-123">It works on Visual Studio 2017 and later versions.</span></span> <span data-ttu-id="0dc01-124">Configurez-le dans Visual Studio via **analyser**les  >  paramètres de l'**Analyseur de portabilité** et sélectionnez vos plateformes cibles, qui correspondent aux plateformes/versions .net dont vous souhaitez évaluer les écarts de portabilité comparés à la plateforme/version avec laquelle votre assembly actuel est généré.</span><span class="sxs-lookup"><span data-stu-id="0dc01-124">Configure it in Visual Studio via **Analyze** > **Portability Analyzer Settings** and select your Target Platforms, which are the .NET platforms/versions that you want to evaluate the portability gaps comparing with the platform/version that your current assembly is built with.</span></span>

![Capture d’écran de l’analyseur de portabilité.](./media/portability-analyzer/portability-screenshot.png)

<span data-ttu-id="0dc01-126">Vous pouvez aussi utiliser l’application console ApiPort et la télécharger à partir du [référentiel ApiPort](https://aka.ms/apiportdownload).</span><span class="sxs-lookup"><span data-stu-id="0dc01-126">You can also use the ApiPort console application, download it from [ApiPort repository](https://aka.ms/apiportdownload).</span></span> <span data-ttu-id="0dc01-127">Vous pouvez utiliser l’option de commande `listTargets` pour afficher la liste des cibles disponibles, puis sélectionner les plateformes cibles en spécifiant l’option de commande `-t` ou `--target`.</span><span class="sxs-lookup"><span data-stu-id="0dc01-127">You can use `listTargets` command option to display the available target list, then pick target platforms by specifying `-t` or `--target` command option.</span></span>

### <a name="solution-wide-view"></a><span data-ttu-id="0dc01-128">Vue étendue de la solution</span><span class="sxs-lookup"><span data-stu-id="0dc01-128">Solution wide view</span></span>

<span data-ttu-id="0dc01-129">Une étape utile pour analyser une solution avec de nombreux projets consiste à visualiser les dépendances pour comprendre quel sous-ensemble d’assemblys dépend de quoi.</span><span class="sxs-lookup"><span data-stu-id="0dc01-129">A useful step in analyzing a solution with many projects would be to visualize the dependencies to understand which subset of assemblies depend on what.</span></span> <span data-ttu-id="0dc01-130">La recommandation générale consiste à appliquer les résultats de l’analyse dans une approche ascendante, en commençant par les nœuds terminaux dans un graphique de dépendance.</span><span class="sxs-lookup"><span data-stu-id="0dc01-130">The general recommendation is to apply the results of the analysis in a bottom-up approach starting with the leaf nodes in a dependency graph.</span></span>

<span data-ttu-id="0dc01-131">Pour récupérer ce code, vous pouvez exécuter la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="0dc01-131">To retrieve this, you may run the following command:</span></span>

```
ApiPort.exe analyze -r DGML -f [directory or file]
```

<span data-ttu-id="0dc01-132">Un résultat de ce type ressemble à ce qui suit quand il est ouvert dans Visual Studio :</span><span class="sxs-lookup"><span data-stu-id="0dc01-132">A result of this would look like the following when opened in Visual Studio:</span></span>

![Capture d’écran de l’analyse DGML.](./media/portability-analyzer/dgml-example.png)

### <a name="analyze-portability"></a><span data-ttu-id="0dc01-134">Analyser la portabilité</span><span class="sxs-lookup"><span data-stu-id="0dc01-134">Analyze portability</span></span>
<span data-ttu-id="0dc01-135">Pour analyser l’ensemble de votre projet dans Visual Studio, cliquez avec le bouton droit sur votre projet dans l’**Explorateur de solutions** et sélectionnez **Analyser la portabilité des assemblys**.</span><span class="sxs-lookup"><span data-stu-id="0dc01-135">To analyze your entire project in Visual Studio, right-click on your project in **Solution Explorer** and select **Analyze Assembly Portability**.</span></span> <span data-ttu-id="0dc01-136">Sinon, accédez au menu **Analyser** et sélectionnez **Analyser la portabilité des assemblys**.</span><span class="sxs-lookup"><span data-stu-id="0dc01-136">Otherwise, go to the **Analyze** menu and select **Analyze Assembly Portability**.</span></span> <span data-ttu-id="0dc01-137">À partir de là, sélectionnez l’exécutable ou la DLL de votre projet.</span><span class="sxs-lookup"><span data-stu-id="0dc01-137">From there, select your project's executable or DLL.</span></span>

![Capture d’écran de l’analyseur de portabilité de Explorateur de solutions.](./media/portability-analyzer/portability-solution-explorer.png)

<span data-ttu-id="0dc01-139">Vous pouvez également utiliser l’[application console ApiPort](https://aka.ms/apiportdownload).</span><span class="sxs-lookup"><span data-stu-id="0dc01-139">You can also use the [ApiPort console app](https://aka.ms/apiportdownload).</span></span>

- <span data-ttu-id="0dc01-140">Tapez la commande suivante pour analyser le répertoire actif : `ApiPort.exe analyze -f .`</span><span class="sxs-lookup"><span data-stu-id="0dc01-140">Type the following command to analyze the current directory: `ApiPort.exe analyze -f .`</span></span>
- <span data-ttu-id="0dc01-141">Pour analyser une liste spécifique de fichiers .dll, tapez la commande suivante : `ApiPort.exe analyze -f first.dll -f second.dll -f third.dll`</span><span class="sxs-lookup"><span data-stu-id="0dc01-141">To analyze a specific list of .dll files, type the following command: `ApiPort.exe analyze -f first.dll -f second.dll -f third.dll`</span></span>
- <span data-ttu-id="0dc01-142">Exécuter `ApiPort.exe -?` pour obtenir plus d’aide</span><span class="sxs-lookup"><span data-stu-id="0dc01-142">Run `ApiPort.exe -?` to get more help</span></span>

<span data-ttu-id="0dc01-143">Il est recommandé d’inclure tous les fichiers exe et dll associés dont vous êtes propriétaire et que vous souhaitez porter, et d’exclure les fichiers dont dépend votre application, mais dont vous n’êtes pas propriétaire et que vous ne pouvez pas porter.</span><span class="sxs-lookup"><span data-stu-id="0dc01-143">It is recommended that you include all the related exe and dll files that you own and want to port, and exclude the files that your app depends on, but you don't own and can't port.</span></span> <span data-ttu-id="0dc01-144">Vous obtiendrez ainsi le rapport de portabilité le plus pertinent possible.</span><span class="sxs-lookup"><span data-stu-id="0dc01-144">This will give you most relevant portability report.</span></span>

### <a name="view-and-interpret-portability-result"></a><span data-ttu-id="0dc01-145">Consulter et interpréter les résultats de portabilité</span><span class="sxs-lookup"><span data-stu-id="0dc01-145">View and interpret portability result</span></span>

<span data-ttu-id="0dc01-146">Seules les API qui ne sont pas prises en charge par une plateforme cible apparaissent dans le rapport.</span><span class="sxs-lookup"><span data-stu-id="0dc01-146">Only APIs that are unsupported by a Target Platform appear in the report.</span></span>
<span data-ttu-id="0dc01-147">Après avoir exécuté l’analyse dans Visual Studio, vous verrez s’afficher un lien vers le fichier du rapport de portabilité .NET.</span><span class="sxs-lookup"><span data-stu-id="0dc01-147">After running the analysis in Visual Studio, you'll see your .NET Portability report file link pops up.</span></span> <span data-ttu-id="0dc01-148">Si vous avez utilisé l’[application console ApiPort](https://aka.ms/apiportdownload), votre rapport de portabilité de .NET est enregistré en tant que fichier dans le format que vous avez spécifié.</span><span class="sxs-lookup"><span data-stu-id="0dc01-148">If you used the [ApiPort console app](https://aka.ms/apiportdownload), your .NET Portability report is saved as a file in the format you specified.</span></span> <span data-ttu-id="0dc01-149">Le format par défaut est un fichier Excel (*.xlsx*) dans votre répertoire actuel.</span><span class="sxs-lookup"><span data-stu-id="0dc01-149">The default is in an Excel file (*.xlsx*) in your current directory.</span></span>

#### <a name="portability-summary"></a><span data-ttu-id="0dc01-150">Synthèse de la portabilité</span><span class="sxs-lookup"><span data-stu-id="0dc01-150">Portability Summary</span></span>

![Capture d’écran de la synthèse de la portabilité.](./media/portability-analyzer/api-catalog-portablility-summary.png)

<span data-ttu-id="0dc01-152">La section sur la synthèse de la portabilité du rapport montre le pourcentage de portabilité de chaque assembly inclus lors de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="0dc01-152">The Portability Summary section of the report shows the portability percentage for each assembly included in the run.</span></span> <span data-ttu-id="0dc01-153">Dans l’exemple précédent, 71,24 % des API .NET Framework utilisées dans l’application `svcutil` sont disponibles dans .NET Core + Extensions de plateforme.</span><span class="sxs-lookup"><span data-stu-id="0dc01-153">In the previous example, 71.24% of the .NET Framework APIs used in the `svcutil` app are available in .NET Core + Platform Extensions.</span></span> <span data-ttu-id="0dc01-154">Si vous exécutez l’outil Analyseur de portabilité .NET sur plusieurs assemblys, chaque assembly doit avoir une ligne dans le rapport de synthèse de la portabilité.</span><span class="sxs-lookup"><span data-stu-id="0dc01-154">If you run the .NET Portability Analyzer tool against multiple assemblies, each assembly should have a row in the Portability Summary report.</span></span>

#### <a name="details"></a><span data-ttu-id="0dc01-155">Détails</span><span class="sxs-lookup"><span data-stu-id="0dc01-155">Details</span></span>

![Capture d’écran des détails de la portabilité.](./media/portability-analyzer/api-catalog-portablility-details.png)

<span data-ttu-id="0dc01-157">La section **Détails** du rapport répertorie les API manquantes dans les **plateformes ciblées**sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="0dc01-157">The **Details** section of the report lists the APIs missing from any of the selected **Targeted Platforms**.</span></span>

- <span data-ttu-id="0dc01-158">Type cible : le type a une API manquante dans une plateforme cible</span><span class="sxs-lookup"><span data-stu-id="0dc01-158">Target type: the type has missing API from a Target Platform</span></span>
- <span data-ttu-id="0dc01-159">Membre cible : la méthode est manquante dans une plateforme cible</span><span class="sxs-lookup"><span data-stu-id="0dc01-159">Target member: the method is missing from a Target Platform</span></span>
- <span data-ttu-id="0dc01-160">Nom de l’assembly : assembly .NET Framework dans lequel réside l’API manquante.</span><span class="sxs-lookup"><span data-stu-id="0dc01-160">Assembly name: the .NET Framework assembly that the missing API lives in.</span></span>
- <span data-ttu-id="0dc01-161">Chacune des plateformes cibles sélectionnées est une colonne, par exemple « .NET Core » : la valeur « non pris en charge » signifie que l’API n’est pas prise en charge sur cette plateforme cible.</span><span class="sxs-lookup"><span data-stu-id="0dc01-161">Each of the selected Target Platforms is one column, such as ".NET Core": "Not supported" value means the API is not supported on this Target Platform.</span></span>
- <span data-ttu-id="0dc01-162">Modifications recommandées : l’API ou la technologie recommandée pour passer à.</span><span class="sxs-lookup"><span data-stu-id="0dc01-162">Recommended Changes: the recommended API or technology to change to.</span></span> <span data-ttu-id="0dc01-163">Actuellement, ce champ est vide ou obsolète pour de nombreuses API.</span><span class="sxs-lookup"><span data-stu-id="0dc01-163">Currently, this field is empty or out of date for many APIs.</span></span> <span data-ttu-id="0dc01-164">En raison du grand nombre d’API, nous avons un défi important à rester à jour.</span><span class="sxs-lookup"><span data-stu-id="0dc01-164">Due to the large number of APIs, we have a significant challenge to keep it up to date.</span></span> <span data-ttu-id="0dc01-165">Nous examinons d’autres solutions pour fournir des informations utiles aux clients.</span><span class="sxs-lookup"><span data-stu-id="0dc01-165">We're looking at alternative solutions to provide helpful information to customers.</span></span>

#### <a name="missing-assemblies"></a><span data-ttu-id="0dc01-166">Assemblys manquants</span><span class="sxs-lookup"><span data-stu-id="0dc01-166">Missing Assemblies</span></span>

![Capture d’écran des assemblys manquants.](./media/portability-analyzer/api-catalog-missing-assemblies.png)

<span data-ttu-id="0dc01-168">Vous trouverez peut-être une section sur les assemblys manquants dans votre rapport.</span><span class="sxs-lookup"><span data-stu-id="0dc01-168">You may find a Missing Assemblies section in your report.</span></span> <span data-ttu-id="0dc01-169">Cette section contient la liste des assemblys qui sont référencés par vos assemblys analysés et qui n’ont pas été analysés.</span><span class="sxs-lookup"><span data-stu-id="0dc01-169">This section contains a list of assemblies that are referenced by your analyzed assemblies and were not analyzed.</span></span> <span data-ttu-id="0dc01-170">S’il s’agit d’un assembly dont vous êtes propriétaire, incluez-le dans l’exécution de l’analyseur de portabilité des API pour obtenir un rapport de portabilité détaillé au niveau de l’API.</span><span class="sxs-lookup"><span data-stu-id="0dc01-170">If it's an assembly that you own, include it in the API portability analyzer run so that you can get a detailed, API-level portability report for it.</span></span> <span data-ttu-id="0dc01-171">S’il s’agit d’une bibliothèque tierce, vérifiez s’il existe une version plus récente qui prend en charge votre plateforme cible et passez à la version plus récente.</span><span class="sxs-lookup"><span data-stu-id="0dc01-171">If it's a third-party library, check if there is a newer version that supports your target platform, and consider moving to the newer version.</span></span> <span data-ttu-id="0dc01-172">Finalement, la liste doit inclure tous les assemblys tiers dont dépend votre application et qui ont une version prenant en charge votre plateforme cible.</span><span class="sxs-lookup"><span data-stu-id="0dc01-172">Eventually, the list should include all the third-party assemblies that your app depends on that have a version supporting your target platform.</span></span>

<span data-ttu-id="0dc01-173">Pour plus d’informations sur l’Analyseur de portabilité .NET, consultez la [documentation GitHub](https://github.com/Microsoft/dotnet-apiport#documentation) et la vidéo Channel 9 [A brief look at the .NET Portability Analyzer](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer) (Aperçu rapide de l’Analyseur de portabilité .NET).</span><span class="sxs-lookup"><span data-stu-id="0dc01-173">For more information on the .NET Portability Analyzer, visit the [GitHub documentation](https://github.com/Microsoft/dotnet-apiport#documentation) and [A Brief Look at the .NET Portability Analyzer](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer) Channel 9 video.</span></span>
