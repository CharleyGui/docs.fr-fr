---
title: Architecture d’applications conteneur et basées sur des microservices
description: L’architecture d’applications conteneur et basées sur des microservices n’est pas une mince affaire et ne doit pas être prise à la légère. Découvrez les concepts fondamentaux dans ce chapitre.
ms.date: 09/20/2018
ms.openlocfilehash: aff30c907f1140b94dbcae330ed7cb633b0a744b
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/15/2019
ms.locfileid: "65644151"
---
# <a name="architecting-container-and-microservice-based-applications"></a><span data-ttu-id="6b5a9-104">Architecture d’applications conteneur et basées sur des microservices</span><span class="sxs-lookup"><span data-stu-id="6b5a9-104">Architecting container and microservice-based applications</span></span>

<span data-ttu-id="6b5a9-105">*Si les microservices offrent de nombreux avantages, ils soulèvent aussi de nouveaux problèmes de taille. Les modèles d’architecture des microservices sont les piliers fondamentaux de la création d’une application basée sur des microservices.*</span><span class="sxs-lookup"><span data-stu-id="6b5a9-105">*Microservices offer great benefits but also raise huge new challenges. Microservice architecture patterns are fundamental pillars when creating a microservice-based application.*</span></span>

<span data-ttu-id="6b5a9-106">Plus haut dans ce guide, vous avez découvert les concepts de base des conteneurs et de Docker.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-106">Earlier in this guide, you learned basic concepts about containers and Docker.</span></span> <span data-ttu-id="6b5a9-107">Il s’agissait du minimum à savoir pour commencer à utiliser des conteneurs.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-107">That was the minimum information you needed to get started with containers.</span></span> <span data-ttu-id="6b5a9-108">Encore que, même si les conteneurs sont des facilitateurs et des compléments parfaits pour les microservices, ils ne sont pas obligatoires dans une architecture de microservices. D’ailleurs, la plupart des concepts architecturaux évoqués dans cette section valent aussi sans conteneurs.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-108">Although, even when containers are enablers and a great fit for microservices, they aren't mandatory for a microservice architecture and many architectural concepts in this architecture section could be applied without containers, too.</span></span> <span data-ttu-id="6b5a9-109">Cependant, ces recommandations portent sur la confluence des deux du fait de l’importance déjà évoquée des conteneurs.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-109">However, this guidance focuses on the intersection of both due to the already introduced importance of containers.</span></span>

<span data-ttu-id="6b5a9-110">Les applications d’entreprise peuvent être complexes et sont souvent composées non pas d’un mais de plusieurs services.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-110">Enterprise applications can be complex and are often composed of multiple services instead of a single service-based application.</span></span> <span data-ttu-id="6b5a9-111">En pareils cas, vous devez bien comprendre d’autres approches en matière d’architecture, comme les microservices et certains modèles de conception déterminés par le domaine (DDD), ainsi que les concepts de l’orchestration de conteneurs.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-111">For those cases, you need to understand additional architectural approaches, such as the microservices and certain Domain-Driven Design (DDD) patterns plus container orchestration concepts.</span></span> <span data-ttu-id="6b5a9-112">Notez que ce chapitre concerne non seulement les microservices présents dans les conteneurs, mais aussi n’importe quelle application en conteneur.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-112">Note that this chapter describes not just microservices on containers, but any containerized application, as well.</span></span>

## <a name="container-design-principles"></a><span data-ttu-id="6b5a9-113">Principes de conception basée sur des conteneurs</span><span class="sxs-lookup"><span data-stu-id="6b5a9-113">Container design principles</span></span>

<span data-ttu-id="6b5a9-114">Dans le modèle à base de conteneurs, une instance d’image de conteneur représente un processus unique.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-114">In the container model, a container image instance represents a single process.</span></span> <span data-ttu-id="6b5a9-115">En définissant une image de conteneur en tant que limite de processus, vous pouvez créer des primitives pouvant servir à mettre à l’échelle le processus ou à le traiter par lots.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-115">By defining a container image as a process boundary, you can create primitives that can be used to scale the process or to batch it.</span></span>

<span data-ttu-id="6b5a9-116">Quand vous concevez une image de conteneur, vous constaterez que le fichier Dockerfile contient une définition [ENTRYPOINT](https://docs.docker.com/engine/reference/builder/#entrypoint).</span><span class="sxs-lookup"><span data-stu-id="6b5a9-116">When you design a container image, you'll see an [ENTRYPOINT](https://docs.docker.com/engine/reference/builder/#entrypoint) definition in the Dockerfile.</span></span> <span data-ttu-id="6b5a9-117">Celle-ci définit le processus dont la durée de vie contrôle celle du conteneur.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-117">This defines the process whose lifetime controls the lifetime of the container.</span></span> <span data-ttu-id="6b5a9-118">Une fois le processus terminé, le cycle de vie du conteneur prend fin.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-118">When the process completes, the container lifecycle ends.</span></span> <span data-ttu-id="6b5a9-119">Les conteneurs peuvent représenter des processus de longue durée comme des serveurs web, mais peuvent aussi représentent des processus de courte durée comme les programmes de traitement par lots, qui auraient pu auparavant être implémentés comme des tâches web Azure [WebJobs](https://github.com/Azure/azure-webjobs-sdk/wiki).</span><span class="sxs-lookup"><span data-stu-id="6b5a9-119">Containers might represent long-running processes like web servers, but can also represent short-lived processes like batch jobs, which formerly might have been implemented as Azure [WebJobs](https://github.com/Azure/azure-webjobs-sdk/wiki).</span></span>

<span data-ttu-id="6b5a9-120">Si le processus échoue, le conteneur prend fin et l’orchestrateur prend le contrôle.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-120">If the process fails, the container ends, and the orchestrator takes over.</span></span> <span data-ttu-id="6b5a9-121">Si l’orchestrateur a été configuré pour maintenir cinq instances en exécution et qu’une défaillance touche l’une d’elles, l’orchestrateur crée une autre instance de conteneur pour remplacer le processus défaillant.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-121">If the orchestrator was configured to keep five instances running and one fails, the orchestrator will create another container instance to replace the failed process.</span></span> <span data-ttu-id="6b5a9-122">Dans un programme de traitement par lots, le processus démarre avec des paramètres.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-122">In a batch job, the process is started with parameters.</span></span> <span data-ttu-id="6b5a9-123">Quand le processus prend fin, le travail est terminé.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-123">When the process completes, the work is complete.</span></span> <span data-ttu-id="6b5a9-124">Ces considérations s’attachent ultérieurement plus en détails aux orchestrateurs.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-124">This guidance drills-down on orchestrators, later on.</span></span>

<span data-ttu-id="6b5a9-125">Le cas peut se présenter où vous voulez que plusieurs processus s’exécutent dans un même conteneur.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-125">You might find a scenario where you want multiple processes running in a single container.</span></span> <span data-ttu-id="6b5a9-126">Pour ce scénario, comme il ne peut y avoir qu’un seul point d’entrée par conteneur, vous pouvez exécuter un script dans le conteneur qui lance le nombre de programmes voulu.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-126">For that scenario, since there can be only one entry point per container, you could run a script within the container that launches as many programs as needed.</span></span> <span data-ttu-id="6b5a9-127">Par exemple, vous pouvez utiliser [Supervisor](http://supervisord.org/) ou un outil similaire pour prendre en charge le lancement de plusieurs processus à l’intérieur d’un même conteneur.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-127">For example, you can use [Supervisor](http://supervisord.org/) or a similar tool to take care of launching multiple processes inside a single container.</span></span> <span data-ttu-id="6b5a9-128">Toutefois, même s’il existe des architectures qui contiennent plusieurs processus par conteneur, cette approche n’est pas très courante.</span><span class="sxs-lookup"><span data-stu-id="6b5a9-128">However, even though you can find architectures that hold multiple processes per container, that approach isn't very common.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="6b5a9-129">[Précédent](../net-core-net-framework-containers/official-net-docker-images.md)
>[Suivant](containerize-monolithic-applications.md)</span><span class="sxs-lookup"><span data-stu-id="6b5a9-129">[Previous](../net-core-net-framework-containers/official-net-docker-images.md)
[Next](containerize-monolithic-applications.md)</span></span>
