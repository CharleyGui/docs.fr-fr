---
title: Sécurité LINQ to XML-LINQ to XML
description: En savoir plus sur les problèmes de sécurité LINQ to XML et les moyens d’atténuer les risques de sécurité.
ms.date: 07/20/2015
ms.assetid: ef2c0dc9-ecf9-4c17-b24e-144184ab725f
ms.openlocfilehash: 72dd2bfe2a3f0edb69645daf4625ba24fb56732b
ms.sourcegitcommit: 0c3ce6d2e7586d925a30f231f32046b7b3934acb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/08/2020
ms.locfileid: "89553332"
---
# <a name="linq-to-xml-security"></a><span data-ttu-id="513b9-103">Sécurité LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="513b9-103">LINQ to XML security</span></span>

<span data-ttu-id="513b9-104">Cet article décrit les problèmes de sécurité associés à LINQ to XML et fournit des conseils pour réduire l’exposition à la sécurité.</span><span class="sxs-lookup"><span data-stu-id="513b9-104">This article describes security issues associated with LINQ to XML, and provides guidance for mitigating security exposure.</span></span>

## <a name="linq-to-xml-security-overview"></a><span data-ttu-id="513b9-105">Vue d’ensemble de la sécurité LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="513b9-105">LINQ to XML security overview</span></span>

<span data-ttu-id="513b9-106">LINQ to XML est conçu plus à des fins de commodité de programmation que pour les applications côté serveur présentant des exigences de sécurité strictes.</span><span class="sxs-lookup"><span data-stu-id="513b9-106">LINQ to XML is designed more for programming convenience than for server-side applications with stringent security requirements.</span></span> <span data-ttu-id="513b9-107">La plupart des scénarios XML impliquent le traitement de documents XML approuvés plutôt que le traitement de documents XML non approuvés chargés sur un serveur.</span><span class="sxs-lookup"><span data-stu-id="513b9-107">Most XML scenarios consist of processing trusted XML documents, rather than processing untrusted XML documents that are uploaded to a server.</span></span> <span data-ttu-id="513b9-108">LINQ to XML est optimisé pour ces scénarios.</span><span class="sxs-lookup"><span data-stu-id="513b9-108">LINQ to XML is optimized for these scenarios.</span></span>

<span data-ttu-id="513b9-109">Si vous devez traiter des données non approuvées provenant de sources inconnues, Microsoft vous recommande d'utiliser une instance de la classe <xref:System.Xml.XmlReader> qui a été configurée pour filtrer les attaques par déni de service XML connues.</span><span class="sxs-lookup"><span data-stu-id="513b9-109">If you must process untrusted data from unknown sources, Microsoft recommends that you use an instance of the <xref:System.Xml.XmlReader> class that has been configured to filter out known XML denial of service (DoS) attacks.</span></span>

<span data-ttu-id="513b9-110">Si vous avez configuré un <xref:System.Xml.XmlReader> pour limiter les attaques par déni de service, vous pouvez utiliser ce lecteur pour remplir un LINQ to XML arborescence tout en profitant des améliorations de la productivité des programmeurs de LINQ to XML.</span><span class="sxs-lookup"><span data-stu-id="513b9-110">If you've configured an <xref:System.Xml.XmlReader> to mitigate denial of service attacks, you can use that reader to populate a LINQ to XML tree and still benefit from the programmer productivity enhancements of LINQ to XML.</span></span> <span data-ttu-id="513b9-111">De nombreuses techniques d'atténuation des risques nécessitent la création de lecteurs configurés pour limiter le problème de sécurité, puis l'instanciation d'une arborescence XML par le biais du lecteur configuré.</span><span class="sxs-lookup"><span data-stu-id="513b9-111">Many mitigation techniques involve creating readers that are configured to mitigate the security issue, and then instantiating an XML tree through the configured reader.</span></span>

<span data-ttu-id="513b9-112">Le langage XML est intrinsèquement vulnérable aux attaques par déni de service car les documents ne sont pas limités en termes de taille, de profondeur, de taille de nom d'élément, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="513b9-112">XML is intrinsically vulnerable to denial of service attacks because documents are unbounded in size, depth, element name size, and more.</span></span> <span data-ttu-id="513b9-113">Quel que soit le composant que vous utilisez pour traiter le code XML, vous devez toujours être prêt à recycler le domaine d'application s'il utilise des ressources excessives.</span><span class="sxs-lookup"><span data-stu-id="513b9-113">Regardless of the component that you use to process XML, you should always be prepared to recycle the application domain if it uses excessive resources.</span></span>

## <a name="mitigation-of-xml-xsd-xpath-and-xslt-attacks"></a><span data-ttu-id="513b9-114">Atténuation des attaques XML, XSD, XPath et XSLT</span><span class="sxs-lookup"><span data-stu-id="513b9-114">Mitigation of XML, XSD, XPath, and XSLT attacks</span></span>

<span data-ttu-id="513b9-115">LINQ to XML est basé sur les objets <xref:System.Xml.XmlReader> et <xref:System.Xml.XmlWriter>.</span><span class="sxs-lookup"><span data-stu-id="513b9-115">LINQ to XML is built upon <xref:System.Xml.XmlReader> and <xref:System.Xml.XmlWriter>.</span></span> <span data-ttu-id="513b9-116">LINQ to XML prend en charge XSD et XPath via les méthodes d'extension dans les espaces de noms <xref:System.Xml.Schema?displayProperty=nameWithType> et <xref:System.Xml.XPath?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="513b9-116">LINQ to XML supports XSD and XPath through extension methods in the <xref:System.Xml.Schema?displayProperty=nameWithType> and <xref:System.Xml.XPath?displayProperty=nameWithType> namespaces.</span></span> <span data-ttu-id="513b9-117">En utilisant les <xref:System.Xml.XmlReader> <xref:System.Xml.XPath.XPathNavigator> classes, et <xref:System.Xml.XmlWriter> conjointement à LINQ to XML, vous pouvez appeler XSLT pour transformer des arborescences XML.</span><span class="sxs-lookup"><span data-stu-id="513b9-117">By using the <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator>, and <xref:System.Xml.XmlWriter> classes in conjunction with LINQ to XML, you can invoke XSLT to transform XML trees.</span></span>

<span data-ttu-id="513b9-118">Si vous utilisez un environnement moins sécurisé, un certain nombre de problèmes de sécurité sont associés au XML et à l’utilisation des classes dans <xref:System.Xml?displayProperty=nameWithType> , <xref:System.Xml.Schema?displayProperty=nameWithType> , <xref:System.Xml.XPath?displayProperty=nameWithType> et <xref:System.Xml.Xsl?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="513b9-118">If you're  operating in a less secure environment, there are a number of security issues that are associated with XML and the use of the classes in <xref:System.Xml?displayProperty=nameWithType>, <xref:System.Xml.Schema?displayProperty=nameWithType>, <xref:System.Xml.XPath?displayProperty=nameWithType>, and <xref:System.Xml.Xsl?displayProperty=nameWithType>.</span></span> <span data-ttu-id="513b9-119">Ces problèmes incluent, mais ne sont pas limités à, les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="513b9-119">These issues include, but aren't limited to, the following:</span></span>

- <span data-ttu-id="513b9-120">XSD, Xpath et XSLT sont des langages basés sur des chaînes dans lesquels vous spécifiez des opérations qui consomment beaucoup de temps ou de mémoire.</span><span class="sxs-lookup"><span data-stu-id="513b9-120">XSD, XPath, and XSLT are string-based languages in which you can specify operations that consume a lot of time or memory.</span></span> <span data-ttu-id="513b9-121">C’est la responsabilité des programmeurs d’applications qui utilisent des chaînes XSD, XPath ou XSLT provenant de sources non approuvées pour valider que les chaînes ne sont pas malveillantes, ou pour analyser et atténuer la possibilité que l’évaluation de ces chaînes entraîne une consommation excessive des ressources système.</span><span class="sxs-lookup"><span data-stu-id="513b9-121">It's the responsibility of application programmers who take XSD, XPath, or XSLT strings from untrusted sources to validate that the strings aren't malicious, or to monitor and mitigate the possibility that evaluating these strings will lead to excessive system resource consumption.</span></span>
- <span data-ttu-id="513b9-122">Les schémas XSD (y compris les schémas inline) sont fondamentalement vulnérables aux attaques par déni de service. vous ne devez pas accepter de schémas provenant de sources non approuvées.</span><span class="sxs-lookup"><span data-stu-id="513b9-122">XSD schemas (including inline schemas) are inherently vulnerable to denial of service attacks; you shouldn't accept schemas from untrusted sources.</span></span>
- <span data-ttu-id="513b9-123">XSD et XSLT peuvent inclure des références à d'autres fichiers, et ces références peuvent entraîner des attaques inter-zones ou inter-domaines.</span><span class="sxs-lookup"><span data-stu-id="513b9-123">XSD and XSLT can include references to other files, and such references can result in cross-zone and cross-domain attacks.</span></span>
- <span data-ttu-id="513b9-124">Les entités externes dans les DTD peuvent entraîner des attaques inter-zones ou inter-domaines.</span><span class="sxs-lookup"><span data-stu-id="513b9-124">External entities in DTDs can result in cross-zone and cross-domain attacks.</span></span>
- <span data-ttu-id="513b9-125">Les DTD sont vulnérables aux attaques par déni de service.</span><span class="sxs-lookup"><span data-stu-id="513b9-125">DTDs are vulnerable to denial of service attacks.</span></span>
- <span data-ttu-id="513b9-126">Les documents XML extrêmement profonds peuvent présenter des risques de déni de service ; il peut être préférable de limiter la profondeur des documents XML.</span><span class="sxs-lookup"><span data-stu-id="513b9-126">Exceptionally deep XML documents can pose denial of service issues; you might want to limit the depth of XML documents.</span></span>
- <span data-ttu-id="513b9-127">N’acceptez pas de composants de prise en charge, tels que les <xref:System.Xml.NameTable> <xref:System.Xml.XmlNamespaceManager> objets, et, <xref:System.Xml.XmlResolver> provenant d’assemblys non approuvés.</span><span class="sxs-lookup"><span data-stu-id="513b9-127">Don't accept supporting components, such as <xref:System.Xml.NameTable>, <xref:System.Xml.XmlNamespaceManager>, and <xref:System.Xml.XmlResolver> objects, from untrusted assemblies.</span></span>
- <span data-ttu-id="513b9-128">Lisez les données en bloc afin de limiter les risques d'attaques sur les grands documents.</span><span class="sxs-lookup"><span data-stu-id="513b9-128">Read data in chunks to mitigate large document attacks.</span></span>
- <span data-ttu-id="513b9-129">Les blocs de scripts dans des feuilles de style XSLT peuvent donner lieu à de nombreuses attaques.</span><span class="sxs-lookup"><span data-stu-id="513b9-129">Script blocks in XSLT style sheets can expose a number of attacks.</span></span>
- <span data-ttu-id="513b9-130">Effectuez une validation soigneuse avant de construire des expressions XPath dynamiques.</span><span class="sxs-lookup"><span data-stu-id="513b9-130">Validate carefully before constructing dynamic XPath expressions.</span></span>

## <a name="linq-to-xml-security-issues"></a><span data-ttu-id="513b9-131">LINQ to XML les problèmes de sécurité</span><span class="sxs-lookup"><span data-stu-id="513b9-131">LINQ to XML security issues</span></span>

<span data-ttu-id="513b9-132">Les problèmes de sécurité de cet article ne sont pas présentés dans un ordre particulier.</span><span class="sxs-lookup"><span data-stu-id="513b9-132">The security issues in this article aren't presented in any particular order.</span></span> <span data-ttu-id="513b9-133">Tous ces problèmes sont importants et doivent être traités en conséquence.</span><span class="sxs-lookup"><span data-stu-id="513b9-133">All issues are important and should be addressed as appropriate.</span></span>

<span data-ttu-id="513b9-134">Une attaque par élévation de privilège réussie procure à un assembly malveillant davantage de contrôle sur son environnement.</span><span class="sxs-lookup"><span data-stu-id="513b9-134">A successful elevation of privilege attack gives a malicious assembly more control over its environment.</span></span> <span data-ttu-id="513b9-135">Une attaque par élévation de privilège réussie peut entraîner une divulgation des données, un déni de service et plus encore.</span><span class="sxs-lookup"><span data-stu-id="513b9-135">A successful elevation of privilege attack can result in disclosure of data, denial of service, and more.</span></span>

<span data-ttu-id="513b9-136">Les applications ne doivent pas divulguer de données aux utilisateurs qui ne sont pas autorisés à afficher ces données.</span><span class="sxs-lookup"><span data-stu-id="513b9-136">Applications shouldn't disclose data to users who aren't authorized to see that data.</span></span>

<span data-ttu-id="513b9-137">Les attaques par déni de service font en sorte que l'analyseur XML ou LINQ to XML consomment des quantités de mémoire ou un temps processeur excessifs.</span><span class="sxs-lookup"><span data-stu-id="513b9-137">Denial of service attacks cause the XML parser or LINQ to XML to consume excessive amounts of memory or CPU time.</span></span> <span data-ttu-id="513b9-138">Les attaques par déni de service sont considérés comme étant moins graves que les attaques par élévation de privilège ou les attaques par divulgation de données.</span><span class="sxs-lookup"><span data-stu-id="513b9-138">Denial of service attacks are considered to be less severe than elevation of privilege attacks or disclosure of data attacks.</span></span> <span data-ttu-id="513b9-139">Toutefois, elles sont importantes dans un scénario dans lequel un serveur doit traiter des documents XML provenant de sources non approuvées.</span><span class="sxs-lookup"><span data-stu-id="513b9-139">However, they're important in a scenario where a server needs to process XML documents from untrusted sources.</span></span>

### <a name="dont-expose-error-messages-to-untrusted-callers"></a><span data-ttu-id="513b9-140">N’exposez pas de messages d’erreur à des appelants non fiables</span><span class="sxs-lookup"><span data-stu-id="513b9-140">Don't expose error messages to untrusted callers</span></span>

<span data-ttu-id="513b9-141">La description d'une erreur peut révéler des données, par exemple les données transformées, des noms de fichiers ou des détails d'implémentation.</span><span class="sxs-lookup"><span data-stu-id="513b9-141">The description of an error might reveal data, such as the data being transformed, file names, or implementation details.</span></span> <span data-ttu-id="513b9-142">Les messages d’erreur ne doivent pas être exposés aux appelants qui ne sont pas approuvés.</span><span class="sxs-lookup"><span data-stu-id="513b9-142">Error messages shouldn't be exposed to callers that aren't trusted.</span></span> <span data-ttu-id="513b9-143">Vous devez intercepter toutes les erreurs et les signaler avec vos propres messages d'erreur personnalisés.</span><span class="sxs-lookup"><span data-stu-id="513b9-143">You should catch all errors and report errors with your own custom error messages.</span></span>

### <a name="dont-call-codeaccesspermissionsassert-in-an-event-handler"></a><span data-ttu-id="513b9-144">N’appelez pas CodeAccessPermissions. Assert dans un gestionnaire d’événements</span><span class="sxs-lookup"><span data-stu-id="513b9-144">Don't call CodeAccessPermissions.Assert in an event handler</span></span>

<span data-ttu-id="513b9-145">Un assembly peut avoir des autorisations inférieures ou supérieures.</span><span class="sxs-lookup"><span data-stu-id="513b9-145">An assembly can have lesser or greater permissions.</span></span> <span data-ttu-id="513b9-146">Un assembly qui a des autorisations supérieures dispose d'un meilleur contrôle sur l'ordinateur et ses environnements.</span><span class="sxs-lookup"><span data-stu-id="513b9-146">An assembly that has greater permissions has greater control over the computer and its environments.</span></span>

<span data-ttu-id="513b9-147">Si du code dans un assembly disposant d'autorisations supérieures appelle <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> dans un gestionnaire d'événements et que l'arborescence XML est ensuite passée à un assembly malveillant disposant d'autorisations limitées, l'assembly malveillant peut provoquer le déclenchement d'un événement.</span><span class="sxs-lookup"><span data-stu-id="513b9-147">If code in an assembly with greater permissions calls <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler, and then the XML tree is passed to a malicious assembly that has restricted permissions, the malicious assembly can cause an event to be raised.</span></span> <span data-ttu-id="513b9-148">Étant donné que l’événement exécute du code qui se trouve dans l’assembly avec des autorisations supérieures, l’assembly malveillant peut alors fonctionner avec des privilèges élevés.</span><span class="sxs-lookup"><span data-stu-id="513b9-148">Because the event runs code that's in the assembly with greater permissions, the malicious assembly would then be operating with elevated privileges.</span></span>

<span data-ttu-id="513b9-149">Microsoft recommande de ne jamais appeler <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> dans un gestionnaire d'événements.</span><span class="sxs-lookup"><span data-stu-id="513b9-149">Microsoft recommends that you never call <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler.</span></span>

### <a name="dont-accept-dtds-from-untrusted-sources"></a><span data-ttu-id="513b9-150">N’acceptez pas de DTD provenant de sources non approuvées</span><span class="sxs-lookup"><span data-stu-id="513b9-150">Don't accept DTDs from untrusted sources</span></span>

<span data-ttu-id="513b9-151">Les entités dans les DTD, par nature, ne sont pas sécurisées.</span><span class="sxs-lookup"><span data-stu-id="513b9-151">Entities in DTDs are inherently not secure.</span></span> <span data-ttu-id="513b9-152">Il est possible qu’un document XML malveillant contenant un DTD oblige l’analyseur à utiliser toute la mémoire et le temps processeur, ce qui provoque une attaque par déni de service.</span><span class="sxs-lookup"><span data-stu-id="513b9-152">It's possible for a malicious XML document that contains a DTD to cause the parser to use all memory and CPU time, causing a denial of service attack.</span></span> <span data-ttu-id="513b9-153">Par conséquent, dans LINQ to XML, le traitement des DTD est désactivé par défaut.</span><span class="sxs-lookup"><span data-stu-id="513b9-153">Therefore, in LINQ to XML, DTD processing is turned off by default.</span></span> <span data-ttu-id="513b9-154">Vous ne devez pas accepter de DTD provenant de sources non approuvées.</span><span class="sxs-lookup"><span data-stu-id="513b9-154">You shouldn't accept DTDs from untrusted sources.</span></span>

<span data-ttu-id="513b9-155">L'un des exemples de l'acceptation de DTD provenant de sources non approuvées est une application Web qui autorise les utilisateurs Web à télécharger un fichier XML qui fait référence à un DTD et un fichier DTD.</span><span class="sxs-lookup"><span data-stu-id="513b9-155">One example of accepting DTDs from untrusted sources is a Web application that allows Web users to upload an XML file that references a DTD and a DTD file.</span></span> <span data-ttu-id="513b9-156">Lors de la validation du fichier, un DTD malveillant pourrait déclencher une attaque par déni de service sur votre serveur.</span><span class="sxs-lookup"><span data-stu-id="513b9-156">Upon validation of the file, a malicious DTD could execute a denial of service attack on your server.</span></span> <span data-ttu-id="513b9-157">Un autre exemple consiste à faire référence à un DTD sur un partage réseau qui autorise également l'accès FTP anonyme.</span><span class="sxs-lookup"><span data-stu-id="513b9-157">Another example of accepting DTDs from untrusted sources is to reference a DTD on a network share that also allows anonymous FTP access.</span></span>

### <a name="avoid-excessive-buffer-allocation"></a><span data-ttu-id="513b9-158">Éviter une allocation de mémoire tampon excessive</span><span class="sxs-lookup"><span data-stu-id="513b9-158">Avoid excessive buffer allocation</span></span>

<span data-ttu-id="513b9-159">Les développeurs d'applications doivent savoir que les sources de données extrêmement volumineuses peuvent entraîner un épuisement des ressources et des attaques par déni de service.</span><span class="sxs-lookup"><span data-stu-id="513b9-159">Application developers should be aware that extremely large data sources can lead to resource exhaustion and denial of service attacks.</span></span>

<span data-ttu-id="513b9-160">Si un utilisateur malveillant soumet ou télécharge un très grand document XML, il pourrait utiliser LINQ to XML pour consommer des ressources système excessives.</span><span class="sxs-lookup"><span data-stu-id="513b9-160">If a malicious user submits or uploads a very large XML document, it could cause LINQ to XML to consume excessive system resources.</span></span> <span data-ttu-id="513b9-161">Cela peut constituer une attaque par déni de service.</span><span class="sxs-lookup"><span data-stu-id="513b9-161">This can constitute a denial of service attack.</span></span> <span data-ttu-id="513b9-162">Pour éviter cela, vous pouvez définir la <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> propriété et créer un lecteur qui est alors limité dans la taille du document qu’il peut charger.</span><span class="sxs-lookup"><span data-stu-id="513b9-162">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> property, and create a reader that's then limited in the size of document that it can load.</span></span> <span data-ttu-id="513b9-163">Vous utilisez ensuite le lecteur pour créer l'arborescence XML.</span><span class="sxs-lookup"><span data-stu-id="513b9-163">You then use the reader to create the XML tree.</span></span>

<span data-ttu-id="513b9-164">Par exemple, si vous savez que la taille maximale attendue de vos documents XML provenant d'une source non approuvée sera inférieure à 50 Ko, affectez à la propriété <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> la valeur 100 000.</span><span class="sxs-lookup"><span data-stu-id="513b9-164">For example, if you know that the maximum expected size of your XML documents coming from an untrusted source will be less than 50K bytes, set <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> to 100,000.</span></span> <span data-ttu-id="513b9-165">Cela ne gênera pas le traitement de vos documents XML mais atténuera les menaces d'attaques par déni de service dans lesquelles des documents téléchargés pourraient consommer de grandes quantités de mémoire.</span><span class="sxs-lookup"><span data-stu-id="513b9-165">This will not encumber your processing of XML documents, and at the same time it will mitigate denial of service threats where documents might be uploaded that would consume large amounts of memory.</span></span>

### <a name="avoid-excess-entity-expansion"></a><span data-ttu-id="513b9-166">Évitez l’extension d’entité excédentaire</span><span class="sxs-lookup"><span data-stu-id="513b9-166">Avoid excess entity expansion</span></span>

<span data-ttu-id="513b9-167">L'une des attaques par déni de service connues en cas d'utilisation d'un DTD est un document qui provoque une extension d'entité excessive.</span><span class="sxs-lookup"><span data-stu-id="513b9-167">One of the known denial of service attacks when using a DTD is a document that causes excessive entity expansion.</span></span> <span data-ttu-id="513b9-168">Pour éviter cela, vous pouvez définir la <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> propriété et créer un lecteur qui est alors limité dans le nombre de caractères résultant de l’extension d’entité.</span><span class="sxs-lookup"><span data-stu-id="513b9-168">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> property, and create a reader that's then limited in the number of characters that result from entity expansion.</span></span> <span data-ttu-id="513b9-169">Vous utilisez ensuite le lecteur pour créer l'arborescence XML.</span><span class="sxs-lookup"><span data-stu-id="513b9-169">You then use the reader to create the XML tree.</span></span>

### <a name="limit-the-depth-of-the-xml-hierarchy"></a><span data-ttu-id="513b9-170">Limiter la profondeur de la hiérarchie XML</span><span class="sxs-lookup"><span data-stu-id="513b9-170">Limit the depth of the XML hierarchy</span></span>

<span data-ttu-id="513b9-171">Une attaque par déni de service peut également se produire lorsqu'un document soumis possède une profondeur de hiérarchie excessive.</span><span class="sxs-lookup"><span data-stu-id="513b9-171">One possible denial of service attack is when a document is submitted that has excessive depth of hierarchy.</span></span> <span data-ttu-id="513b9-172">Pour éviter cela, vous pouvez encapsuler un <xref:System.Xml.XmlReader> dans votre propre classe qui compte la profondeur d’éléments.</span><span class="sxs-lookup"><span data-stu-id="513b9-172">To prevent this, you can wrap an <xref:System.Xml.XmlReader> in your own class that counts the depth of elements.</span></span> <span data-ttu-id="513b9-173">Si la profondeur dépasse un niveau raisonnable prédéterminé, vous pouvez terminer le traitement du document malveillant.</span><span class="sxs-lookup"><span data-stu-id="513b9-173">If the depth exceeds a predetermined reasonable level, you can terminate the processing of the malicious document.</span></span>

### <a name="protect-against-untrusted-xmlreader-or-xmlwriter-implementations"></a><span data-ttu-id="513b9-174">Protection contre les implémentations XmlReader ou XmlWriter non approuvées</span><span class="sxs-lookup"><span data-stu-id="513b9-174">Protect against untrusted XmlReader or XmlWriter implementations</span></span>

<span data-ttu-id="513b9-175">Les administrateurs doivent vérifier que toute implémentation <xref:System.Xml.XmlReader> ou <xref:System.Xml.XmlWriter> fournie par une source externe possède des noms forts et a été inscrite dans la configuration de l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="513b9-175">Administrators should verify that any externally supplied <xref:System.Xml.XmlReader> or <xref:System.Xml.XmlWriter> implementations have strong names and have been registered in the machine configuration.</span></span> <span data-ttu-id="513b9-176">Cela empêche le chargement de tout code malveillant se faisant passer pour un lecteur ou un writer.</span><span class="sxs-lookup"><span data-stu-id="513b9-176">This prevents malicious code masquerading as a reader or writer from being loaded.</span></span>

### <a name="periodically-free-objects-that-reference-xname"></a><span data-ttu-id="513b9-177">Libérer périodiquement les objets qui font référence à XName</span><span class="sxs-lookup"><span data-stu-id="513b9-177">Periodically free objects that reference XName</span></span>

<span data-ttu-id="513b9-178">Pour se protéger contre certains types d'attaques, les programmeurs d'applications doivent libérer régulièrement tous les objets qui font référence à un objet <xref:System.Xml.Linq.XName> dans le domaine d'application.</span><span class="sxs-lookup"><span data-stu-id="513b9-178">To protect against certain kinds of attacks, application programmers should free all objects that reference an <xref:System.Xml.Linq.XName> object in the application domain on a regular basis.</span></span>

### <a name="protect-against-random-xml-names"></a><span data-ttu-id="513b9-179">Protéger contre les noms XML aléatoires</span><span class="sxs-lookup"><span data-stu-id="513b9-179">Protect against random XML names</span></span>

<span data-ttu-id="513b9-180">Les applications qui prennent des données de sources non approuvées doivent envisager d’utiliser un <xref:System.Xml.XmlReader> encapsulé dans du code personnalisé pour inspecter la possibilité de noms et d’espaces de noms XML aléatoires.</span><span class="sxs-lookup"><span data-stu-id="513b9-180">Applications that take data from untrusted sources should consider using an <xref:System.Xml.XmlReader> that's wrapped in custom code to inspect for the possibility of random XML names and namespaces.</span></span> <span data-ttu-id="513b9-181">En cas de détection de noms et d'espaces de noms XML aléatoires, l'application peut alors terminer le traitement du document malveillant.</span><span class="sxs-lookup"><span data-stu-id="513b9-181">If such random XML names and namespaces are detected, the application can then terminate the processing of the malicious document.</span></span>

<span data-ttu-id="513b9-182">Vous souhaiterez peut-être limiter la quantité de noms dans tout espace de noms donné (y compris les noms qui n'appartiennent à aucun espace de noms) à un niveau raisonnable.</span><span class="sxs-lookup"><span data-stu-id="513b9-182">You might want to limit the number of names in any given namespace (including names in no namespace) to a reasonable limit.</span></span>

### <a name="serialize-linq-to-xml-objects-to-xml-text-before-passing-the-data-to-an-untrusted-component"></a><span data-ttu-id="513b9-183">Sérialiser les objets LINQ to XML en texte XML avant de passer les données à un composant non fiable</span><span class="sxs-lookup"><span data-stu-id="513b9-183">Serialize LINQ to XML objects to XML text before passing the data to an untrusted component</span></span>

<span data-ttu-id="513b9-184">LINQ to XML peut être utilisé pour générer des pipelines de traitement dans lesquels différents composants de l’application chargent, valident, interrogent, transforment, mettent à jour et enregistrent des données XML qui sont passées entre les composants sous forme d’arborescences XML.</span><span class="sxs-lookup"><span data-stu-id="513b9-184">LINQ to XML could be used to build processing pipelines in which different application components load, validate, query, transform, update, and save XML data that's passed between components as XML trees.</span></span> <span data-ttu-id="513b9-185">Cela peut aider à optimiser les performances car le traitement lié au chargement et à la sérialisation des objets en texte XML n'est effectué qu'aux extrémités du pipeline.</span><span class="sxs-lookup"><span data-stu-id="513b9-185">This can help optimize performance, because the overhead of loading and serializing objects to XML text is done only at the ends of the pipeline.</span></span> <span data-ttu-id="513b9-186">Les développeurs doivent cependant savoir que toutes les annotations et gestionnaires d'événements créés par un composant sont accessibles aux autres composants.</span><span class="sxs-lookup"><span data-stu-id="513b9-186">Developers must be aware, however, that all annotations and event handlers created by one component are accessible to other components.</span></span> <span data-ttu-id="513b9-187">Cela peut créer un certain nombre de vulnérabilités si les composants ont différents niveaux de confiance.</span><span class="sxs-lookup"><span data-stu-id="513b9-187">This can create a number of vulnerabilities if the components have different levels of trust.</span></span> <span data-ttu-id="513b9-188">Pour générer des pipelines sécurisés entre des composants à faible approbation, vous devez sérialiser les objets LINQ to XML en texte XML avant de passer les données à un composant non approuvé.</span><span class="sxs-lookup"><span data-stu-id="513b9-188">To build secure pipelines across less trusted components, you must serialize LINQ to XML objects to XML text before passing the data to an untrusted component.</span></span>

<span data-ttu-id="513b9-189">Une certaine sécurité est fournie par le Common Language Runtime (CLR).</span><span class="sxs-lookup"><span data-stu-id="513b9-189">Some security is provided by the common language runtime (CLR).</span></span> <span data-ttu-id="513b9-190">Par exemple, un composant qui n’inclut pas une classe privée ne peut pas accéder aux annotations indexées par cette classe.</span><span class="sxs-lookup"><span data-stu-id="513b9-190">For example, a component that doesn't include a private class can't access annotations keyed by that class.</span></span> <span data-ttu-id="513b9-191">Toutefois, les annotations peuvent être supprimées par des composants qui ne peuvent pas les lire.</span><span class="sxs-lookup"><span data-stu-id="513b9-191">However, annotations can be deleted by components that can't read them.</span></span> <span data-ttu-id="513b9-192">Cela pourrait être utilisée pour provoquer une attaque de falsification.</span><span class="sxs-lookup"><span data-stu-id="513b9-192">This could be used as a tampering attack.</span></span>

## <a name="see-also"></a><span data-ttu-id="513b9-193">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="513b9-193">See also</span></span>

- [<span data-ttu-id="513b9-194">Présentation de LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="513b9-194">LINQ to XML overview</span></span>](linq-xml-overview.md)
