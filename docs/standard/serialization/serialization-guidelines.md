---
title: Indications concernant la sérialisation
description: Ce document fournit des instructions à prendre en compte lors de la conception d’une API à sérialiser, ainsi qu’un résumé des trois principales technologies de sérialisation offertes par .NET.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- serialization, guidelines
- binary serialization, guidelines
ms.assetid: ebbeddff-179d-443f-bf08-9c373199a73a
ms.openlocfilehash: 32d71aba5d8a650293a4d8653fb2a2e383b8a800
ms.sourcegitcommit: 74d05613d6c57106f83f82ce8ee71176874ea3f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/03/2020
ms.locfileid: "93282381"
---
# <a name="serialization-guidelines"></a><span data-ttu-id="da38f-103">Indications concernant la sérialisation</span><span class="sxs-lookup"><span data-stu-id="da38f-103">Serialization guidelines</span></span>

<span data-ttu-id="da38f-104">Cet article répertorie les recommandations à prendre en compte lors de la conception d’une API à sérialiser.</span><span class="sxs-lookup"><span data-stu-id="da38f-104">This article lists the guidelines to consider when designing an API to be serialized.</span></span>

[!INCLUDE [binary-serialization-warning](../../../includes/binary-serialization-warning.md)]

 <span data-ttu-id="da38f-105">.NET offre trois technologies de sérialisation principales qui sont optimisées pour différents scénarios de sérialisation.</span><span class="sxs-lookup"><span data-stu-id="da38f-105">.NET offers three main serialization technologies that are optimized for various serialization scenarios.</span></span> <span data-ttu-id="da38f-106">Le tableau suivant répertorie ces technologies et les principaux types .NET qui leur sont associés.</span><span class="sxs-lookup"><span data-stu-id="da38f-106">The following table lists these technologies and the main .NET types related to these technologies.</span></span>

|<span data-ttu-id="da38f-107">Technologie</span><span class="sxs-lookup"><span data-stu-id="da38f-107">Technology</span></span>|<span data-ttu-id="da38f-108">Classes concernées</span><span class="sxs-lookup"><span data-stu-id="da38f-108">Relevant Classes</span></span>|<span data-ttu-id="da38f-109">Notes</span><span class="sxs-lookup"><span data-stu-id="da38f-109">Notes</span></span>|
|----------------|----------------------|-----------|
|<span data-ttu-id="da38f-110">Sérialisation du contrat de données</span><span class="sxs-lookup"><span data-stu-id="da38f-110">Data Contract Serialization</span></span>|<xref:System.Runtime.Serialization.DataContractAttribute><br /><br /> <xref:System.Runtime.Serialization.DataMemberAttribute><br /><br /> <xref:System.Runtime.Serialization.DataContractSerializer><br /><br /> <xref:System.Runtime.Serialization.NetDataContractSerializer><br /><br /> <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer><br /><br /> <xref:System.Runtime.Serialization.ISerializable>|<span data-ttu-id="da38f-111">Persistance générale</span><span class="sxs-lookup"><span data-stu-id="da38f-111">General persistence</span></span><br /><br /> <span data-ttu-id="da38f-112">Services Web</span><span class="sxs-lookup"><span data-stu-id="da38f-112">Web Services</span></span><br /><br /> <span data-ttu-id="da38f-113">JSON</span><span class="sxs-lookup"><span data-stu-id="da38f-113">JSON</span></span>|
|<span data-ttu-id="da38f-114">Sérialisation XML</span><span class="sxs-lookup"><span data-stu-id="da38f-114">XML Serialization</span></span>|<xref:System.Xml.Serialization.XmlSerializer>|<span data-ttu-id="da38f-115">Format XML</span><span class="sxs-lookup"><span data-stu-id="da38f-115">XML format</span></span> <br /><span data-ttu-id="da38f-116">avec contrôle total</span><span class="sxs-lookup"><span data-stu-id="da38f-116">with full control</span></span>|
|<span data-ttu-id="da38f-117">Sérialisation du runtime (binaire et SOAP)</span><span class="sxs-lookup"><span data-stu-id="da38f-117">Runtime -Serialization (Binary and SOAP)</span></span>|<xref:System.SerializableAttribute><br /><br /> <xref:System.Runtime.Serialization.ISerializable><br /><br /> <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter><br /><br /> <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>|<span data-ttu-id="da38f-118">.NET Remoting</span><span class="sxs-lookup"><span data-stu-id="da38f-118">.NET Remoting</span></span>|

 <span data-ttu-id="da38f-119">Lorsque vous concevez de nouveaux types, vous devez décider laquelle de ces technologies, le cas échéant, doit être prise en charge par ces types.</span><span class="sxs-lookup"><span data-stu-id="da38f-119">When you design new types, you should decide which, if any, of these technologies those types need to support.</span></span> <span data-ttu-id="da38f-120">Les indications suivantes expliquent comment effectuer ce choix et fournir cette prise en charge.</span><span class="sxs-lookup"><span data-stu-id="da38f-120">The following guidelines describe how to make that choice and how to provide such support.</span></span> <span data-ttu-id="da38f-121">Elles ne sont pas destinées à vous aider à choisir la technologie de sérialisation que vous devez utiliser dans l'implémentation de votre application ou bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="da38f-121">These guidelines are not meant to help you choose which serialization technology you should use in the implementation of your application or library.</span></span> <span data-ttu-id="da38f-122">Elles ne sont pas non plus directement liées à la conception d'une API et par conséquent, elles ne relèvent pas du propos de cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="da38f-122">Such guidelines are not directly related to API design and thus are not within the scope of this topic.</span></span>

## <a name="guidelines"></a><span data-ttu-id="da38f-123">Consignes</span><span class="sxs-lookup"><span data-stu-id="da38f-123">Guidelines</span></span>

- <span data-ttu-id="da38f-124">PENSEZ à la sérialisation lorsque vous concevez de nouveaux types.</span><span class="sxs-lookup"><span data-stu-id="da38f-124">DO think about serialization when you design new types.</span></span>

  <span data-ttu-id="da38f-125">La sérialisation constitue une considération de conception importante pour tout type, car les programmes devront peut-être rendre persistantes ou transmettre des instances du type.</span><span class="sxs-lookup"><span data-stu-id="da38f-125">Serialization is an important design consideration for any type, because programs might need to persist or transmit instances of the type.</span></span>

### <a name="choosing-the-right-serialization-technology-to-support"></a><span data-ttu-id="da38f-126">Choix de la technologie de sérialisation appropriée à prendre en charge</span><span class="sxs-lookup"><span data-stu-id="da38f-126">Choosing the right serialization technology to support</span></span>
 <span data-ttu-id="da38f-127">Tout type donné peut prendre en charge une ou plusieurs des technologies de sérialisation ou aucune d'entre elles.</span><span class="sxs-lookup"><span data-stu-id="da38f-127">Any given type can support none, one, or more of the serialization technologies.</span></span>

- <span data-ttu-id="da38f-128">ENVISAGEZ la prise en charge de la *sérialisation du contrat de données* si des instances de votre type doivent être rendues persistantes ou utilisées dans des services web.</span><span class="sxs-lookup"><span data-stu-id="da38f-128">CONSIDER supporting *data contract serialization* if instances of your type might need to be persisted or used in Web Services.</span></span>

- <span data-ttu-id="da38f-129">ENVISAGEZ la prise en charge de la *sérialisation XML* à la place ou en plus de la sérialisation du contrat de données si vous devez davantage contrôler le format XML généré lors de la sérialisation du type.</span><span class="sxs-lookup"><span data-stu-id="da38f-129">CONSIDER supporting the *XML serialization* instead of or in addition to data contract serialization if you need more control over the XML format that is produced when the type is serialized.</span></span>

     <span data-ttu-id="da38f-130">Cela peut être nécessaire dans certains scénarios d'interopérabilité où vous devez utiliser une construction XML qui n'est pas prise en charge par la sérialisation du contrat de données, par exemple, pour générer des attributs XML.</span><span class="sxs-lookup"><span data-stu-id="da38f-130">This may be necessary in some interoperability scenarios where you need to use an XML construct that is not supported by data contract serialization, for example, to produce XML attributes.</span></span>

- <span data-ttu-id="da38f-131">ENVISAGEZ la prise en charge de la *sérialisation du runtime* si des instances de votre type doivent passer des limites .NET Remoting.</span><span class="sxs-lookup"><span data-stu-id="da38f-131">CONSIDER supporting *runtime serialization* if instances of your type need to travel across .NET Remoting boundaries.</span></span>

- <span data-ttu-id="da38f-132">ÉVITEZ de prendre en charge la sérialisation XML ou du runtime uniquement pour des raisons de persistance.</span><span class="sxs-lookup"><span data-stu-id="da38f-132">AVOID supporting runtime serialization or XML serialization just for general persistence reasons.</span></span> <span data-ttu-id="da38f-133">Préférez plutôt la sérialisation du contrat de données.</span><span class="sxs-lookup"><span data-stu-id="da38f-133">Prefer data contract serialization instead</span></span>

#### <a name="data-contract-serialization"></a><span data-ttu-id="da38f-134">Sérialisation du contrat de données</span><span class="sxs-lookup"><span data-stu-id="da38f-134">Data contract serialization</span></span>
 <span data-ttu-id="da38f-135">Les types peuvent prendre en charge la sérialisation du contrat de données en appliquant <xref:System.Runtime.Serialization.DataContractAttribute> au type et <xref:System.Runtime.Serialization.DataMemberAttribute> aux membres (champs et propriétés) du type.</span><span class="sxs-lookup"><span data-stu-id="da38f-135">Types can support data contract serialization by applying the <xref:System.Runtime.Serialization.DataContractAttribute> to the type and the <xref:System.Runtime.Serialization.DataMemberAttribute> to the members (fields and properties) of the type.</span></span>

 [!code-csharp[SerializationGuidelines#1](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#1)]
 [!code-vb[SerializationGuidelines#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#1)]

1. <span data-ttu-id="da38f-136">ENVISAGEZ de marquer les données membres de votre type public si le type peut être utilisé en mode de confiance partielle.</span><span class="sxs-lookup"><span data-stu-id="da38f-136">CONSIDER marking data members of your type public if the type can be used in partial trust.</span></span> <span data-ttu-id="da38f-137">En mode de confiance totale, les sérialiseurs de contrat de données peuvent sérialiser et désérialiser les types et les membres non publics, mais seuls les membres publics peuvent être sérialisés et désérialisés en mode de confiance partielle.</span><span class="sxs-lookup"><span data-stu-id="da38f-137">In full trust, data contract serializers can serialize and deserialize nonpublic types and members, but only public members can be serialized and deserialized in partial trust.</span></span>

2. <span data-ttu-id="da38f-138">IMPLÉMENTEZ un accesseur Get et Set sur toutes les propriétés pour lesquelles Data-MemberAttribute est défini.</span><span class="sxs-lookup"><span data-stu-id="da38f-138">DO implement a getter and setter on all properties that have Data-MemberAttribute.</span></span> <span data-ttu-id="da38f-139">Les sérialiseurs de contrat de données nécessitent à la fois l'accesseur Get et Set pour que le type soit considéré comme étant sérialisable.</span><span class="sxs-lookup"><span data-stu-id="da38f-139">Data contract serializers require both the getter and the setter for the type to be considered serializable.</span></span> <span data-ttu-id="da38f-140">Si le type n’est pas utilisé en confiance partielle, l’un des accesseurs de propriété, ou les deux, peuvent être non publics.</span><span class="sxs-lookup"><span data-stu-id="da38f-140">If the type won't be used in partial trust, one or both of the property accessors can be nonpublic.</span></span>

     [!code-csharp[SerializationGuidelines#2](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#2)]
     [!code-vb[SerializationGuidelines#2](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#2)]

3. <span data-ttu-id="da38f-141">ENVISAGEZ d'utiliser les rappels de sérialisation pour l'initialisation des instances désérialisées.</span><span class="sxs-lookup"><span data-stu-id="da38f-141">CONSIDER using the serialization callbacks for initialization of deserialized instances.</span></span>

     <span data-ttu-id="da38f-142">Les constructeurs ne sont pas appelés lorsque les objets sont désérialisés.</span><span class="sxs-lookup"><span data-stu-id="da38f-142">Constructors are not called when objects are deserialized.</span></span> <span data-ttu-id="da38f-143">Par conséquent, toute logique qui s’exécute pendant une construction normale doit être implémentée comme l’un des *rappels de sérialisation*.</span><span class="sxs-lookup"><span data-stu-id="da38f-143">Therefore, any logic that executes during normal construction needs to be implemented as one of the *serialization callbacks*.</span></span>

     [!code-csharp[SerializationGuidelines#3](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#3)]
     [!code-vb[SerializationGuidelines#3](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#3)]

     <span data-ttu-id="da38f-144">L'attribut <xref:System.Runtime.Serialization.OnDeserializedAttribute> est l'attribut de rappel le plus communément utilisé.</span><span class="sxs-lookup"><span data-stu-id="da38f-144">The <xref:System.Runtime.Serialization.OnDeserializedAttribute> attribute is the most commonly used callback attribute.</span></span> <span data-ttu-id="da38f-145">Les autres attributs de la famille sont <xref:System.Runtime.Serialization.OnDeserializingAttribute> , <xref:System.Runtime.Serialization.OnSerializingAttribute> et <xref:System.Runtime.Serialization.OnSerializedAttribute> .</span><span class="sxs-lookup"><span data-stu-id="da38f-145">The other attributes in the family are <xref:System.Runtime.Serialization.OnDeserializingAttribute>, <xref:System.Runtime.Serialization.OnSerializingAttribute>, and <xref:System.Runtime.Serialization.OnSerializedAttribute>.</span></span> <span data-ttu-id="da38f-146">Ils peuvent être utilisés pour marquer les rappels exécutés avant la désérialisation, avant la sérialisation et enfin, après la sérialisation, respectivement.</span><span class="sxs-lookup"><span data-stu-id="da38f-146">They can be used to mark callbacks that get executed before deserialization, before serialization, and finally, after serialization, respectively.</span></span>

4. <span data-ttu-id="da38f-147">ENVISAGEZ d'utiliser <xref:System.Runtime.Serialization.KnownTypeAttribute> pour indiquer les types concrets qui doivent être utilisés lors de la désérialisation d'un graphique d'objet complexe.</span><span class="sxs-lookup"><span data-stu-id="da38f-147">CONSIDER using the <xref:System.Runtime.Serialization.KnownTypeAttribute> to indicate concrete types that should be used when deserializing a complex object graph.</span></span>

     <span data-ttu-id="da38f-148">Par exemple, si un type de données membres désérialisées est représenté par une classe abstraite, le sérialiseur a besoin des informations sur le *type connu* pour décider quel type concret doit être instancié et assigné au membre.</span><span class="sxs-lookup"><span data-stu-id="da38f-148">For example, if a type of a deserialized data member is represented by an abstract class, the serializer will need the *known type* information to decide what concrete type to instantiate and assign to the member.</span></span> <span data-ttu-id="da38f-149">Si le type connu n'est pas spécifié à l'aide de l'attribut, il devra être passé au sérialiseur explicitement (par exemple, en passant des types connus au constructeur du sérialiseur) ou être spécifié dans le fichier de configuration.</span><span class="sxs-lookup"><span data-stu-id="da38f-149">If the known type is not specified using the attribute, it will need to be passed to the serializer explicitly (you can do it by passing known types to the serializer constructor) or it will need to be specified in the configuration file.</span></span>

     [!code-csharp[SerializationGuidelines#4](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#4)]
     [!code-vb[SerializationGuidelines#4](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#4)]

     <span data-ttu-id="da38f-150">Dans les cas où la liste de types connus n’est pas connue de façon statique (lorsque la classe **Person** est compilée), **KnownTypeAttribute** peut également pointer vers une méthode qui retourne une liste de types connus au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="da38f-150">In cases where the list of known types is not known statically (when the **Person** class is compiled), the **KnownTypeAttribute** can also point to a method that returns a list of known types at run time.</span></span>

5. <span data-ttu-id="da38f-151">TENEZ COMPTE de la compatibilité ascendante et descendante lors de la création ou modification de types sérialisables.</span><span class="sxs-lookup"><span data-stu-id="da38f-151">DO consider backward and forward compatibility when creating or changing serializable types.</span></span>

     <span data-ttu-id="da38f-152">Gardez à l'esprit que les flux sérialisés de futures versions de votre type peuvent être désérialisés dans la version actuelle du type, et inversement.</span><span class="sxs-lookup"><span data-stu-id="da38f-152">Keep in mind that serialized streams of future versions of your type can be deserialized into the current version of the type, and vice versa.</span></span> <span data-ttu-id="da38f-153">Assurez-vous que vous avez bien assimilé que les données membres, même privées et internes, ne peuvent pas modifier leurs nom, type ou ordre dans les futures versions du type, sauf si vous veillez à conserver le contrat à l'aide de paramètres explicites dans les attributs du contrat de données. Testez la compatibilité de la sérialisation lorsque vous apportez des modifications aux types sérialisables.</span><span class="sxs-lookup"><span data-stu-id="da38f-153">Make sure you understand that data members, even private and internal, cannot change their names, types, or even their order in future versions of the type unless special care is taken to preserve the contract using explicit parameters to the data contract attributes.Test compatibility of serialization when making changes to serializable types.</span></span> <span data-ttu-id="da38f-154">Essayez de désérialiser la nouvelle version dans une ancienne version, et inversement.</span><span class="sxs-lookup"><span data-stu-id="da38f-154">Try deserializing the new version into an old version, and vice versa.</span></span>

6. <span data-ttu-id="da38f-155">ENVISAGEZ d'implémenter l'interface <xref:System.Runtime.Serialization.IExtensibleDataObject> pour permettre l'aller-retour entre les différentes versions du type.</span><span class="sxs-lookup"><span data-stu-id="da38f-155">CONSIDER implementing <xref:System.Runtime.Serialization.IExtensibleDataObject> interface to allow round-tripping between different versions of the type.</span></span>

     <span data-ttu-id="da38f-156">L'interface permet au sérialiseur de garantir qu'aucune donnée n'est perdue lors de l'aller-retour.</span><span class="sxs-lookup"><span data-stu-id="da38f-156">The interface allows the serializer to ensure that no data is lost during round-tripping.</span></span> <span data-ttu-id="da38f-157">La propriété <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> stocke les données de la future version du type qui est inconnu de la version actuelle.</span><span class="sxs-lookup"><span data-stu-id="da38f-157">The <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> property stores any data from the future version of the type that is unknown to the current version.</span></span> <span data-ttu-id="da38f-158">Quand la version actuelle est par la suite sérialisée et désérialisée dans une version ultérieure, les données supplémentaires sont disponibles dans le flux sérialisé via la valeur de la propriété **ExtensionData**.</span><span class="sxs-lookup"><span data-stu-id="da38f-158">When the current version is subsequently serialized and deserialized into a future version, the additional data will be available in the serialized stream through the **ExtensionData** property value.</span></span>

     [!code-csharp[SerializationGuidelines#5](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#5)]
     [!code-vb[SerializationGuidelines#5](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#5)]

     <span data-ttu-id="da38f-159">Pour plus d’informations, consultez [Contrats de données compatibles avec des versions ultérieures](../../framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="da38f-159">For more information, see [Forward-Compatible Data Contracts](../../framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span>

#### <a name="xml-serialization"></a><span data-ttu-id="da38f-160">sérialisation XML</span><span class="sxs-lookup"><span data-stu-id="da38f-160">XML serialization</span></span>
 <span data-ttu-id="da38f-161">La sérialisation de contrat de données est la technologie de sérialisation principale (par défaut) dans .NET Framework, mais il existe des scénarios de sérialisation que la sérialisation de contrat de données ne prend pas en charge.</span><span class="sxs-lookup"><span data-stu-id="da38f-161">Data contract serialization is the main (default) serialization technology in .NET Framework, but there are serialization scenarios that data contract serialization does not support.</span></span> <span data-ttu-id="da38f-162">Par exemple, vous n'avez pas le contrôle total sur la forme du XML généré ou consommé par le sérialiseur.</span><span class="sxs-lookup"><span data-stu-id="da38f-162">For example, it does not give you full control over the shape of XML produced or consumed by the serializer.</span></span> <span data-ttu-id="da38f-163">Si ce contrôle renforcé est nécessaire, vous devez utiliser la *sérialisation XML* , et concevoir vos types pour prendre en charge cette technologie de sérialisation.</span><span class="sxs-lookup"><span data-stu-id="da38f-163">If such fine control is required, *XML serialization* has to be used, and you need to design your types to support this serialization technology.</span></span>

1. <span data-ttu-id="da38f-164">ÉVITEZ de concevoir vos types spécifiquement pour la sérialisation XML, sauf si vous avez une bonne raison de contrôler la forme du XML généré.</span><span class="sxs-lookup"><span data-stu-id="da38f-164">AVOID designing your types specifically for XML Serialization, unless you have a very strong reason to control the shape of the XML produced.</span></span> <span data-ttu-id="da38f-165">Cette technologie de sérialisation a été remplacée par la sérialisation du contrat de données présentée dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="da38f-165">This serialization technology has been superseded by the Data Contract Serialization discussed in the previous section.</span></span>

     <span data-ttu-id="da38f-166">En d’autres termes, n’appliquez pas d’attributs de l' <xref:System.Xml.Serialization> espace de noms à de nouveaux types, sauf si vous savez que le type sera utilisé avec la SÉRIALISATION XML.</span><span class="sxs-lookup"><span data-stu-id="da38f-166">In other words, don't apply attributes from the <xref:System.Xml.Serialization> namespace to new types, unless you know that the type will be used with XML Serialization.</span></span> <span data-ttu-id="da38f-167">L’exemple suivant montre comment utiliser **System.Xml.Serialization** pour contrôler la forme du XML généré.</span><span class="sxs-lookup"><span data-stu-id="da38f-167">The following example shows how **System.Xml.Serialization** can be used to control the shape of the XML -produced.</span></span>

     [!code-csharp[SerializationGuidelines#6](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#6)]
     [!code-vb[SerializationGuidelines#6](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#6)]

2. <span data-ttu-id="da38f-168">Envisagez d’implémenter l' <xref:System.Xml.Serialization.IXmlSerializable> interface si vous voulez encore plus de contrôle sur la forme du code XML sérialisé que ce qui est proposé en appliquant les attributs de SÉRIALISATION XML.</span><span class="sxs-lookup"><span data-stu-id="da38f-168">CONSIDER implementing the <xref:System.Xml.Serialization.IXmlSerializable> interface if you want even more control over the shape of the serialized XML than what's offered by applying the XML Serialization attributes.</span></span> <span data-ttu-id="da38f-169">Deux méthodes de l’interface, <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> et <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A> , vous permettent de contrôler entièrement le flux XML sérialisé.</span><span class="sxs-lookup"><span data-stu-id="da38f-169">Two methods of the interface, <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> and <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A>, allow you to fully control the serialized XML stream.</span></span> <span data-ttu-id="da38f-170">Vous pouvez aussi contrôler le schéma XML qui est généré pour le type en appliquant l'attribut <xref:System.Xml.Serialization.XmlSchemaProviderAttribute>.</span><span class="sxs-lookup"><span data-stu-id="da38f-170">You can also control the XML schema that gets generated for the type by applying the <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> attribute.</span></span>

#### <a name="runtime-serialization"></a><span data-ttu-id="da38f-171">Sérialisation du Runtime</span><span class="sxs-lookup"><span data-stu-id="da38f-171">Runtime serialization</span></span>
 <span data-ttu-id="da38f-172">La technologie de *sérialisation du runtime* est utilisée par .NET Remoting.</span><span class="sxs-lookup"><span data-stu-id="da38f-172">*Runtime serialization* is a technology used by .NET Remoting.</span></span> <span data-ttu-id="da38f-173">Si vous pensez que vos types seront transportés à l’aide de .NET Remoting, assurez-vous qu’ils prennent en charge la sérialisation du Runtime.</span><span class="sxs-lookup"><span data-stu-id="da38f-173">If you think your types will be transported using .NET Remoting, make sure they support runtime serialization.</span></span>

 <span data-ttu-id="da38f-174">La prise en charge de base de la *sérialisation du runtime* peut être fournie en appliquant l’attribut <xref:System.SerializableAttribute>. Des scénarios plus avancés nécessitent l’implémentation d’un *modèle sérialisable du runtime* simple (implémentez -<xref:System.Runtime.Serialization.ISerializable> et fournissez un constructeur de sérialisation).</span><span class="sxs-lookup"><span data-stu-id="da38f-174">The basic support for *runtime serialization* can be provided by applying the <xref:System.SerializableAttribute> attribute, and more advanced scenarios involve implementing a simple *runtime serializable pattern* (implement -<xref:System.Runtime.Serialization.ISerializable> and provide a serialization constructor).</span></span>

1. <span data-ttu-id="da38f-175">ENVISAGEZ la prise en charge de la sérialisation du runtime si vos types doivent être utilisés avec .NET Remoting.</span><span class="sxs-lookup"><span data-stu-id="da38f-175">CONSIDER supporting runtime serialization if your types will be used with .NET Remoting.</span></span> <span data-ttu-id="da38f-176">Par exemple, l’espace de noms <xref:System.AddIn> utilise .NET Remoting et, par conséquent, tous les types échangés entre les compléments **System.AddIn** doivent prendre en charge la sérialisation du runtime.</span><span class="sxs-lookup"><span data-stu-id="da38f-176">For example, the <xref:System.AddIn> namespace uses .NET Remoting, and so all types exchanged between **System.AddIn** add-ins need to support runtime serialization.</span></span>

     [!code-csharp[SerializationGuidelines#7](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#7)]
     [!code-vb[SerializationGuidelines#7](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#7)]

2. <span data-ttu-id="da38f-177">ENVISAGEZ d’implémenter le *modèle sérialisable du runtime* si vous souhaitez avoir un contrôle total sur le processus de sérialisation.</span><span class="sxs-lookup"><span data-stu-id="da38f-177">CONSIDER implementing the *runtime serializable pattern* if you want complete control over the serialization process.</span></span> <span data-ttu-id="da38f-178">Par exemple, si vous souhaitez transformer des données à mesure qu'elles sont sérialisées ou désérialisées.</span><span class="sxs-lookup"><span data-stu-id="da38f-178">For example, if you want to transform data as it gets serialized or deserialized.</span></span>

     <span data-ttu-id="da38f-179">Le modèle est très simple.</span><span class="sxs-lookup"><span data-stu-id="da38f-179">The pattern is very simple.</span></span> <span data-ttu-id="da38f-180">Il suffit d'implémenter l'interface <xref:System.Runtime.Serialization.ISerializable> et de fournir un constructeur spécial qui est utilisé lorsque l'objet est désérialisé.</span><span class="sxs-lookup"><span data-stu-id="da38f-180">All you need to do is implement the <xref:System.Runtime.Serialization.ISerializable> interface and provide a special constructor that is used when the object is deserialized.</span></span>

     [!code-csharp[SerializationGuidelines#8](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#8)]
     [!code-vb[SerializationGuidelines#8](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#8)]

3. <span data-ttu-id="da38f-181">SÉCURISEZ le constructeur de sérialisation et fournissez deux paramètres typés et nommés de la même façon que dans l'exemple disponible ici.</span><span class="sxs-lookup"><span data-stu-id="da38f-181">DO make the serialization constructor protected and provide two parameters typed and named exactly as shown in the sample here.</span></span>

     [!code-csharp[SerializationGuidelines#9](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#9)]
     [!code-vb[SerializationGuidelines#9](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#9)]

4. <span data-ttu-id="da38f-182">IMPLÉMENTEZ explicitement les membres ISerializable.</span><span class="sxs-lookup"><span data-stu-id="da38f-182">DO implement the ISerializable members explicitly.</span></span>

     [!code-csharp[SerializationGuidelines#10](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#10)]
     [!code-vb[SerializationGuidelines#10](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#10)]

5. <span data-ttu-id="da38f-183">EFFECTUEZ une demande de liaison pour l’implémentation **ISerializable.GetObjectData**.</span><span class="sxs-lookup"><span data-stu-id="da38f-183">DO apply a link demand to **ISerializable.GetObjectData** implementation.</span></span> <span data-ttu-id="da38f-184">Cela garantit que seuls le code d'un niveau de confiance totale et le sérialiseur du runtime ont accès au membre.</span><span class="sxs-lookup"><span data-stu-id="da38f-184">This ensures that only fully trusted core and the runtime serializer have access to the member.</span></span>

     [!code-csharp[SerializationGuidelines#11](../../../samples/snippets/csharp/VS_Snippets_CFX/serializationguidelines/cs/source.cs#11)]
     [!code-vb[SerializationGuidelines#11](../../../samples/snippets/visualbasic/VS_Snippets_CFX/serializationguidelines/vb/source.vb#11)]

## <a name="see-also"></a><span data-ttu-id="da38f-185">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="da38f-185">See also</span></span>

- [<span data-ttu-id="da38f-186">Utilisation de contrats de données</span><span class="sxs-lookup"><span data-stu-id="da38f-186">Using Data Contracts</span></span>](../../framework/wcf/feature-details/using-data-contracts.md)
- [<span data-ttu-id="da38f-187">Sérialiseur de contrat de données</span><span class="sxs-lookup"><span data-stu-id="da38f-187">Data Contract Serializer</span></span>](../../framework/wcf/feature-details/data-contract-serializer.md)
- [<span data-ttu-id="da38f-188">Types pris en charge par le sérialiseur de contrat de données</span><span class="sxs-lookup"><span data-stu-id="da38f-188">Types Supported by the Data Contract Serializer</span></span>](../../framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md)
- [<span data-ttu-id="da38f-189">Sérialisation binaire</span><span class="sxs-lookup"><span data-stu-id="da38f-189">Binary Serialization</span></span>](binary-serialization.md)
- <span data-ttu-id="da38f-190">[.NET Remoting](/previous-versions/dotnet/netframework-4.0/72x4h507(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="da38f-190">[.NET Remoting](/previous-versions/dotnet/netframework-4.0/72x4h507(v=vs.100))</span></span>
- [<span data-ttu-id="da38f-191">Sérialisation XML et SOAP</span><span class="sxs-lookup"><span data-stu-id="da38f-191">XML and SOAP Serialization</span></span>](xml-and-soap-serialization.md)
- [<span data-ttu-id="da38f-192">Sécurité et sérialisation</span><span class="sxs-lookup"><span data-stu-id="da38f-192">Security and Serialization</span></span>](../../framework/misc/security-and-serialization.md)
