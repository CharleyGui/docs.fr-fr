---
title: Détails de la sérialisation XML
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- XML serialization, about XML serialization
- ICollection interface, serializing
- XmlSerializer class, serializing
- serialization, about serialization
- DataSet class, serializing
- XML Schema, serializing
ms.assetid: 8c63200d-db63-4a03-a93d-21641623df62
ms.openlocfilehash: d644e80cbf5ac17fca4df039d915c847a1936217
ms.sourcegitcommit: 961ec21c22d2f1d55c9cc8a7edf2ade1d1fd92e3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/02/2020
ms.locfileid: "80588455"
---
# <a name="xml-serialization"></a><span data-ttu-id="acfd7-102">sérialisation XML</span><span class="sxs-lookup"><span data-stu-id="acfd7-102">XML serialization</span></span>

<span data-ttu-id="acfd7-103">La sérialisation correspond au processus de conversion d'un objet en un formulaire facilement transportable.</span><span class="sxs-lookup"><span data-stu-id="acfd7-103">Serialization is the process of converting an object into a form that can be readily transported.</span></span> <span data-ttu-id="acfd7-104">Par exemple, vous pouvez sérialiser un objet et le transporter par Internet via HTTP entre un client et un serveur.</span><span class="sxs-lookup"><span data-stu-id="acfd7-104">For example, you can serialize an object and transport it over the Internet using HTTP between a client and a server.</span></span> <span data-ttu-id="acfd7-105">À l'autre extrémité, la désérialisation reconstruit l'objet du flux de données.</span><span class="sxs-lookup"><span data-stu-id="acfd7-105">On the other end, deserialization reconstructs the object from the stream.</span></span>

 <span data-ttu-id="acfd7-106">La sérialisation XML sérialise uniquement les champs publics et les valeurs de propriété d'un objet dans un flux de données XML.</span><span class="sxs-lookup"><span data-stu-id="acfd7-106">XML serialization serializes only the public fields and property values of an object into an XML stream.</span></span> <span data-ttu-id="acfd7-107">La sérialisation XML n'inclut pas d'informations de type.</span><span class="sxs-lookup"><span data-stu-id="acfd7-107">XML serialization does not include type information.</span></span> <span data-ttu-id="acfd7-108">Par exemple, si un objet **Book** se trouve dans l’espace de noms **Library**, il n’y a aucune garantie qu’il soit désérialisé dans un objet du même type.</span><span class="sxs-lookup"><span data-stu-id="acfd7-108">For example, if you have a **Book** object that exists in the **Library** namespace, there is no guarantee that it is deserialized into an object of the same type.</span></span>

> [!NOTE]
> <span data-ttu-id="acfd7-109">La sérialisation XML ne convertit pas les méthodes, les indexeurs, les champs privés ni les propriétés en lecture seule (à l'exception des collections en lecture seule).</span><span class="sxs-lookup"><span data-stu-id="acfd7-109">XML serialization does not convert methods, indexers, private fields, or read-only properties (except read-only collections).</span></span> <span data-ttu-id="acfd7-110">Pour sérialiser la totalité des champs et des propriétés d'un objet, publics et privés, utilisez <xref:System.Runtime.Serialization.DataContractSerializer> au lieu de la sérialisation XML.</span><span class="sxs-lookup"><span data-stu-id="acfd7-110">To serialize all an object's fields and properties, both public and private, use the <xref:System.Runtime.Serialization.DataContractSerializer> instead of XML serialization.</span></span>

 <span data-ttu-id="acfd7-111">La classe centrale de la sérialisation XML est la classe <xref:System.Xml.Serialization.XmlSerializer>, et les méthodes les plus importantes de cette classe sont les méthodes **Serialize** et **Deserialize**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-111">The central class in XML serialization is the <xref:System.Xml.Serialization.XmlSerializer> class, and the most important methods in this class are the **Serialize** and **Deserialize** methods.</span></span> <span data-ttu-id="acfd7-112"><xref:System.Xml.Serialization.XmlSerializer> crée des fichiers C# et les compile dans des fichiers .dll pour exécuter cette sérialisation.</span><span class="sxs-lookup"><span data-stu-id="acfd7-112">The <xref:System.Xml.Serialization.XmlSerializer> creates C# files and compiles them into .dll files to perform this serialization.</span></span> <span data-ttu-id="acfd7-113">Dans .NET Framework 2.0, l’[outil XML Serializer Generator (Sgen.exe)](xml-serializer-generator-tool-sgen-exe.md) est conçu pour générer préalablement les assemblys de sérialisation à déployer avec votre application et pour améliorer les performances de démarrage.</span><span class="sxs-lookup"><span data-stu-id="acfd7-113">In .NET Framework 2.0, the [XML Serializer Generator Tool (Sgen.exe)](xml-serializer-generator-tool-sgen-exe.md) is designed to generate these serialization assemblies in advance to be deployed with your application and improve startup performance.</span></span> <span data-ttu-id="acfd7-114">Le flux XML généré par le **XmlSerializer** est conforme à la World Wide Web Consortium (W3C) [XML Schema definition language (XSD) 1.0 recommandation](https://www.w3.org/TR/xslt).</span><span class="sxs-lookup"><span data-stu-id="acfd7-114">The XML stream generated by the **XmlSerializer** is compliant with the World Wide Web Consortium (W3C) [XML Schema definition language (XSD) 1.0 recommendation](https://www.w3.org/TR/xslt).</span></span> <span data-ttu-id="acfd7-115">En outre, les types de données générés sont conformes au document intitulé « XML Schema Part 2: Datatypes ».</span><span class="sxs-lookup"><span data-stu-id="acfd7-115">Furthermore, the data types generated are compliant with the document titled "XML Schema Part 2: Datatypes."</span></span>

 <span data-ttu-id="acfd7-116">Les données de vos objets sont décrites à l’aide des constructions du langage de programmation, telles que les classes, les champs, les propriétés, les types primitifs, les tableaux et même du code XML incorporé sous forme d’objets **XmlElement** ou **XmlAttribute**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-116">The data in your objects is described using programming language constructs like classes, fields, properties, primitive types, arrays, and even embedded XML in the form of **XmlElement** or **XmlAttribute** objects.</span></span> <span data-ttu-id="acfd7-117">Vous pouvez créer vos propres classes, annotées avec des attributs ou utiliser l'outil XML Schema Definition pour générer des classes à partir d'un schéma XML existant.</span><span class="sxs-lookup"><span data-stu-id="acfd7-117">You have the option of creating your own classes, annotated with attributes, or using the XML Schema Definition tool to generate the classes based on an existing XML Schema.</span></span>

 <span data-ttu-id="acfd7-118">Si vous disposez d'un schéma XML, vous pouvez exécuter l'outil XML Schema Definition pour générer un ensemble de classes fortement typées sur le schéma et annotées avec des attributs.</span><span class="sxs-lookup"><span data-stu-id="acfd7-118">If you have an XML Schema, you can run the XML Schema Definition tool to produce a set of classes that are strongly typed to the schema and annotated with attributes.</span></span> <span data-ttu-id="acfd7-119">Lorsqu'une instance d'une telle classe est sérialisée, le code XML généré respecte le schéma XML.</span><span class="sxs-lookup"><span data-stu-id="acfd7-119">When an instance of such a class is serialized, the generated XML adheres to the XML Schema.</span></span> <span data-ttu-id="acfd7-120">Lorsque vous disposez d'une telle classe, vous pouvez programmer à l'aide d'un modèle d'objet manipulé facilement tout en garantissant que le code XML généré se conforme au schéma XML.</span><span class="sxs-lookup"><span data-stu-id="acfd7-120">Provided with such a class, you can program against an easily manipulated object model while being assured that the generated XML conforms to the XML schema.</span></span> <span data-ttu-id="acfd7-121">Vous pouvez également utiliser d’autres classes dans .NET Framework, telles que les classes **XmlReader** et **XmlWriter**, pour analyser et écrire un flux de données XML.</span><span class="sxs-lookup"><span data-stu-id="acfd7-121">This is an alternative to using other classes in the .NET Framework, such as the **XmlReader** and **XmlWriter** classes, to parse and write an XML stream.</span></span> <span data-ttu-id="acfd7-122">Pour plus d’informations, consultez [Documents et données XML](../../../docs/standard/data/xml/index.md).</span><span class="sxs-lookup"><span data-stu-id="acfd7-122">For more information, see [XML Documents and Data](../../../docs/standard/data/xml/index.md).</span></span> <span data-ttu-id="acfd7-123">Ces classes vous permettent d'analyser tout flux de données XML.</span><span class="sxs-lookup"><span data-stu-id="acfd7-123">These classes allow you to parse any XML stream.</span></span> <span data-ttu-id="acfd7-124">À l’inverse, utilisez **XmlSerializer** si le flux de données XML est supposé se conformer à un schéma XML connu.</span><span class="sxs-lookup"><span data-stu-id="acfd7-124">In contrast, use the **XmlSerializer** when the XML stream is expected to conform to a known XML Schema.</span></span>

 <span data-ttu-id="acfd7-125">Les attributs contrôlent le flux de données XML généré par la classe **XmlSerializer**, en vous permettant de définir l’espace de noms XML, le nom d’élément, le nom de l’attribut, etc. du flux de données XML.</span><span class="sxs-lookup"><span data-stu-id="acfd7-125">Attributes control the XML stream generated by the **XmlSerializer** class, allowing you to set the XML namespace, element name, attribute name, and so on, of the XML stream.</span></span> <span data-ttu-id="acfd7-126">Pour plus d’informations sur ces attributs et sur la manière dont ils contrôlent la sérialisation XML, consultez [Contrôle de la sérialisation XML à l’aide d’attributs](controlling-xml-serialization-using-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="acfd7-126">For more information about these attributes and how they control XML serialization, see [Controlling XML Serialization Using Attributes](controlling-xml-serialization-using-attributes.md).</span></span> <span data-ttu-id="acfd7-127">Pour obtenir une liste des attributs utilisés pour contrôler le code XML généré, consultez [Attributs qui contrôlent la sérialisation XML](attributes-that-control-xml-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="acfd7-127">For a table of those attributes that are used to control the generated XML, see [Attributes That Control XML Serialization](attributes-that-control-xml-serialization.md).</span></span>

 <span data-ttu-id="acfd7-128">De plus, la classe **XmlSerializer** peut sérialiser un objet et générer un flux de données XML encodé selon le protocole SOAP.</span><span class="sxs-lookup"><span data-stu-id="acfd7-128">The **XmlSerializer** class can further serialize an object and generate an encoded SOAP XML stream.</span></span> <span data-ttu-id="acfd7-129">Le XML généré est conforme à la section 5 du document World Wide Web Consortium intitulé « Protocole SOAP (Simple Object Access Protocol) 1.1 ».</span><span class="sxs-lookup"><span data-stu-id="acfd7-129">The generated XML adheres to section 5 of the World Wide Web Consortium document titled "Simple Object Access Protocol (SOAP) 1.1."</span></span> <span data-ttu-id="acfd7-130">Pour plus d’informations sur ce processus, consultez [Guide pratique pour sérialiser un objet en tant que flux XML encodé selon le protocole SOAP](how-to-serialize-an-object-as-a-soap-encoded-xml-stream.md).</span><span class="sxs-lookup"><span data-stu-id="acfd7-130">For more information about this process, see [How to: Serialize an Object as a SOAP-Encoded XML Stream](how-to-serialize-an-object-as-a-soap-encoded-xml-stream.md).</span></span> <span data-ttu-id="acfd7-131">Pour obtenir une liste des attributs utilisés pour contrôler le code XML généré, consultez [Attributs qui contrôlent la sérialisation encodée selon le protocole SOAP](attributes-that-control-encoded-soap-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="acfd7-131">For a table of the attributes that control the generated XML, see [Attributes That Control Encoded SOAP Serialization](attributes-that-control-encoded-soap-serialization.md).</span></span>

 <span data-ttu-id="acfd7-132">La classe **XmlSerializer** génère les messages SOAP créés par les services web XML et passés à ces derniers.</span><span class="sxs-lookup"><span data-stu-id="acfd7-132">The **XmlSerializer** class generates the SOAP messages created by, and passed to, XML Web services.</span></span> <span data-ttu-id="acfd7-133">Pour contrôler les messages SOAP, vous pouvez appliquer des attributs aux classes, valeurs de retour, paramètres et champs trouvés dans un fichier de services Web XML (.asmx).</span><span class="sxs-lookup"><span data-stu-id="acfd7-133">To control the SOAP messages, you can apply attributes to the classes, return values, parameters, and fields found in an XML Web service file (.asmx).</span></span> <span data-ttu-id="acfd7-134">Vous pouvez utiliser les attributs répertoriés dans « Attributs qui contrôlent la sérialisation XML » et « Attributs qui contrôlent la sérialisation encodée selon le protocole SOAP » car un service Web XML peut utiliser le style SOAP littéral ou encodé.</span><span class="sxs-lookup"><span data-stu-id="acfd7-134">You can use both the attributes listed in "Attributes That Control XML Serialization" and "Attributes That Control Encoded SOAP Serialization" because an XML Web service can use either the literal or encoded SOAP style.</span></span> <span data-ttu-id="acfd7-135">Pour plus d’informations sur l’utilisation d’attributs pour contrôler le code XML généré par un service web XML, consultez [Sérialisation XML avec les services web XML](xml-serialization-with-xml-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="acfd7-135">For more information about using attributes to control the XML generated by an XML Web service, see [XML Serialization with XML Web Services](xml-serialization-with-xml-web-services.md).</span></span> <span data-ttu-id="acfd7-136">Pour plus d’informations sur les services Web SOAP et XML, voir [Customizing SOAP Message Formatting](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dkwy2d72(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="acfd7-136">For more information about SOAP and XML Web services, see [Customizing SOAP Message Formatting](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dkwy2d72(v=vs.100)).</span></span>

## <a name="security-considerations-for-xmlserializer-applications"></a><span data-ttu-id="acfd7-137">Considérations relatives à la sécurité des applications XmlSerializer</span><span class="sxs-lookup"><span data-stu-id="acfd7-137">Security Considerations for XmlSerializer Applications</span></span>

<span data-ttu-id="acfd7-138">Lors de la création d’une application qui utilise le **XmlSerializer**, être conscient des éléments suivants et leurs implications:</span><span class="sxs-lookup"><span data-stu-id="acfd7-138">When creating an application that uses the **XmlSerializer**, be aware of the following items and their implications:</span></span>

- <span data-ttu-id="acfd7-139">**XmlSerializer** crée des fichiers C# (.cs) et les compile dans des fichiers .dll dans le répertoire nommé par la variable d’environnement TEMP. La sérialisation s’effectue ensuite avec ces DLL.</span><span class="sxs-lookup"><span data-stu-id="acfd7-139">The **XmlSerializer** creates C# (.cs) files and compiles them into .dll files in the directory named by the TEMP environment variable; serialization occurs with those DLLs.</span></span>

  > [!NOTE]
  > <span data-ttu-id="acfd7-140">Ces assemblys de sérialisation peuvent être générés en avance et signés à l'aide de l'outil SGen.exe.</span><span class="sxs-lookup"><span data-stu-id="acfd7-140">These serialization assemblies can be generated in advance and signed by using the SGen.exe tool.</span></span> <span data-ttu-id="acfd7-141">Cela ne fonctionne pas avec un serveur de services Web.</span><span class="sxs-lookup"><span data-stu-id="acfd7-141">This does not work a server of Web services.</span></span> <span data-ttu-id="acfd7-142">En d'autres termes, ces assemblys sont réservés à une utilisation par le client et à une sérialisation manuelle.</span><span class="sxs-lookup"><span data-stu-id="acfd7-142">In other words, it is only for client use and for manual serialization.</span></span>

  <span data-ttu-id="acfd7-143">Le code et les dll sont vulnérables face à un processus malveillant lors de leur création et de leur compilation.</span><span class="sxs-lookup"><span data-stu-id="acfd7-143">The code and the DLLs are vulnerable to a malicious process at the time of creation and compilation.</span></span> <span data-ttu-id="acfd7-144">Lors de l'utilisation d'un ordinateur qui exécute Microsoft Windows NT 4.0 ou version ultérieure, deux utilisateurs ou plus peuvent partager le répertoire TEMP.</span><span class="sxs-lookup"><span data-stu-id="acfd7-144">When using a computer running Microsoft Windows NT 4.0 or later, it might be possible for two or more users to share the TEMP directory.</span></span> <span data-ttu-id="acfd7-145">Le partage d’un répertoire TEMP est dangereux si les deux comptes ont des privilèges de sécurité différents et que le compte doté des privilèges les plus élevés exécute une application utilisant **XmlSerializer**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-145">Sharing a TEMP directory is dangerous if the two accounts have different security privileges and the higher-privilege account runs an application using the **XmlSerializer**.</span></span> <span data-ttu-id="acfd7-146">Dans ce cas, un utilisateur peut percer la sécurité de l'ordinateur en remplaçant le fichier .cs ou .dll compilé.</span><span class="sxs-lookup"><span data-stu-id="acfd7-146">In this case, one user can breach the computer's security by replacing either the .cs or .dll file that is compiled.</span></span> <span data-ttu-id="acfd7-147">Pour éliminer ce problème, vérifiez toujours que chaque compte de l'ordinateur dispose de son propre profil.</span><span class="sxs-lookup"><span data-stu-id="acfd7-147">To eliminate this concern, always be sure that each account on the computer has its own profile.</span></span> <span data-ttu-id="acfd7-148">Par défaut, la variable d'environnement TEMP pointe vers un répertoire différent pour chaque compte.</span><span class="sxs-lookup"><span data-stu-id="acfd7-148">By default, the TEMP environment variable points to a different directory for each account.</span></span>

- <span data-ttu-id="acfd7-149">Si un utilisateur malveillant envoie un flux de données XML continu à un serveur web (attaque par déni de service), **XmlSerializer** continue de traiter les données jusqu’à ce que l’ordinateur manque de ressources.</span><span class="sxs-lookup"><span data-stu-id="acfd7-149">If a malicious user sends a continuous stream of XML data to a Web server (a denial of service attack), then the **XmlSerializer** continues to process the data until the computer runs low on resources.</span></span>

  <span data-ttu-id="acfd7-150">Ce type d'attaque est éliminé si vous utilisez un ordinateur qui exécute des Services Internet (IIS) et que votre application s'exécute dans IIS.</span><span class="sxs-lookup"><span data-stu-id="acfd7-150">This kind of attack is eliminated if you are using a computer running Internet Information Services (IIS), and your application is running within IIS.</span></span> <span data-ttu-id="acfd7-151">IIS comprend une porte qui ne traite pas les flux de données supérieurs à une quantité définie (la valeur par défaut correspond à 4 Ko).</span><span class="sxs-lookup"><span data-stu-id="acfd7-151">IIS features a gate that does not process streams longer than a set amount (the default is 4 KB).</span></span> <span data-ttu-id="acfd7-152">Si vous créez une application qui n’utilise pas IIS et qui désérialise les données à l’aide de **XmlSerializer**, vous devez implémenter une porte semblable pour empêcher une attaque par déni de service.</span><span class="sxs-lookup"><span data-stu-id="acfd7-152">If you create an application that does not use IIS and deserializes with the **XmlSerializer**, you should implement a similar gate that prevents a denial of service attack.</span></span>

- <span data-ttu-id="acfd7-153">**XmlSerializer** sérialise les données et exécute tout type de code.</span><span class="sxs-lookup"><span data-stu-id="acfd7-153">The **XmlSerializer** serializes data and runs any code using any type given to it.</span></span>

  <span data-ttu-id="acfd7-154">Un objet malveillant présente une menace dans deux situations.</span><span class="sxs-lookup"><span data-stu-id="acfd7-154">There are two ways in which a malicious object presents a threat.</span></span> <span data-ttu-id="acfd7-155">Il peut exécuter du code malveillant ou injecter du code malveillant dans le fichier C# créé par **XmlSerializer**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-155">It could run malicious code or it could inject malicious code into the C# file created by the **XmlSerializer**.</span></span> <span data-ttu-id="acfd7-156">Dans le premier cas, si un objet malveillant essaie d'exécuter une procédure destructrice, la sécurité d'accès du code empêche tout préjudice éventuel.</span><span class="sxs-lookup"><span data-stu-id="acfd7-156">In the first case, if a malicious object tries to run a destructive procedure, code access security helps prevent any damage from being done.</span></span> <span data-ttu-id="acfd7-157">Dans le deuxième cas, il est possible, en théorie, qu’un objet malveillant puisse injecter d’une façon ou d’une autre du code dans le fichier C# créé par **XmlSerializer**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-157">In the second case, there is a theoretical possibility that a malicious object may somehow inject code into the C# file created by the **XmlSerializer**.</span></span> <span data-ttu-id="acfd7-158">Bien que ce problème ait été étudié de manière approfondie et qu'une telle attaque soit considérée comme improbable, veillez à ne jamais sérialiser de données de type inconnu et non fiable.</span><span class="sxs-lookup"><span data-stu-id="acfd7-158">Although this issue has been examined thoroughly, and such an attack is considered unlikely, you should take the precaution of never serializing data with an unknown and untrusted type.</span></span>

- <span data-ttu-id="acfd7-159">Les données sensibles sérialisées peuvent être vulnérables.</span><span class="sxs-lookup"><span data-stu-id="acfd7-159">Serialized sensitive data might be vulnerable.</span></span>

  <span data-ttu-id="acfd7-160">Une fois que le **XmlSerializer** a des données sérialisées, il peut être stocké sous forme de fichier XML ou autre magasin de données.</span><span class="sxs-lookup"><span data-stu-id="acfd7-160">After the **XmlSerializer** has serialized data, it can be stored as an XML file or other data store.</span></span> <span data-ttu-id="acfd7-161">Si d'autres processus peuvent accéder à votre magasin de données, ou que celui-ci est visible sur un intranet ou sur Internet, les données peuvent être volées et utilisées de manière malveillante.</span><span class="sxs-lookup"><span data-stu-id="acfd7-161">If your data store is available to other processes, or is visible on an intranet or the Internet, the data can be stolen and used maliciously.</span></span> <span data-ttu-id="acfd7-162">Par exemple, si vous créez une application qui sérialise des commandes qui incluent des numéros de carte de crédit, les données sont très sensibles.</span><span class="sxs-lookup"><span data-stu-id="acfd7-162">For example, if you create an application that serializes orders that include credit card numbers, the data is highly sensitive.</span></span> <span data-ttu-id="acfd7-163">Pour empêcher cela, protégez toujours votre magasin de données et prenez les mesures nécessaires pour assurer sa confidentialité.</span><span class="sxs-lookup"><span data-stu-id="acfd7-163">To help prevent this, always protect the store for your data and take steps to keep it private.</span></span>

## <a name="serialization-of-a-simple-class"></a><span data-ttu-id="acfd7-164">Sérialisation d'une classe simple</span><span class="sxs-lookup"><span data-stu-id="acfd7-164">Serialization of a Simple Class</span></span>

<span data-ttu-id="acfd7-165">L'exemple de code suivant affiche une classe de base avec un champ public.</span><span class="sxs-lookup"><span data-stu-id="acfd7-165">The following code example shows a basic class with a public field.</span></span>

```vb
Public Class OrderForm
    Public OrderDate As DateTime
End Class
```

```csharp
public class OrderForm
{
    public DateTime OrderDate;
}
```

<span data-ttu-id="acfd7-166">Lorsqu'une instance de cette classe est sérialisée, elle peut se présenter comme suit.</span><span class="sxs-lookup"><span data-stu-id="acfd7-166">When an instance of this class is serialized, it might resemble the following.</span></span>

```xml
<OrderForm>
    <OrderDate>12/12/01</OrderDate>
</OrderForm>
```

<span data-ttu-id="acfd7-167">Pour obtenir plus d’exemples de sérialisation, consultez [Exemples de sérialisation XML](examples-of-xml-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="acfd7-167">For more examples of serialization, see [Examples of XML Serialization](examples-of-xml-serialization.md).</span></span>

## <a name="items-that-can-be-serialized"></a><span data-ttu-id="acfd7-168">Éléments qui peuvent être sérialisés</span><span class="sxs-lookup"><span data-stu-id="acfd7-168">Items That Can Be Serialized</span></span>

<span data-ttu-id="acfd7-169">Les éléments suivants peuvent être sérialisés à l’aide de la classe **XmLSerializer** :</span><span class="sxs-lookup"><span data-stu-id="acfd7-169">The following items can be serialized using the **XmLSerializer** class:</span></span>

- <span data-ttu-id="acfd7-170">Propriétés publiques de lecture/écriture et champs de classes publiques.</span><span class="sxs-lookup"><span data-stu-id="acfd7-170">Public read/write properties and fields of public classes.</span></span>

- <span data-ttu-id="acfd7-171">Classes qui implémentent **ICollection** ou **IEnumerable**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-171">Classes that implement **ICollection** or **IEnumerable**.</span></span>

  > [!NOTE]
  > <span data-ttu-id="acfd7-172">Seules les collections sont sérialisées, pas les propriétés publiques.</span><span class="sxs-lookup"><span data-stu-id="acfd7-172">Only collections are serialized, not public properties.</span></span>

- <span data-ttu-id="acfd7-173">Objets **XmlElement**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-173">**XmlElement** objects.</span></span>

- <span data-ttu-id="acfd7-174">Objets **XmlNode**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-174">**XmlNode** objects.</span></span>

- <span data-ttu-id="acfd7-175">Objets **DataSet**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-175">**DataSet** objects.</span></span>

 <span data-ttu-id="acfd7-176">Pour plus d’informations sur la sérialisation et la désérialisation d’objets, consultez [Guide pratique pour sérialiser un objet](how-to-serialize-an-object.md) et [Guide pratique pour désérialiser un objet](how-to-deserialize-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="acfd7-176">For more information about serializing or deserializing objects, see [How to: Serialize an Object](how-to-serialize-an-object.md) and [How to: Deserialize an Object](how-to-deserialize-an-object.md).</span></span>

## <a name="advantages-of-using-xml-serialization"></a><span data-ttu-id="acfd7-177">Avantages de l'utilisation de la sérialisation XML</span><span class="sxs-lookup"><span data-stu-id="acfd7-177">Advantages of Using XML Serialization</span></span>

<span data-ttu-id="acfd7-178">La classe **XmlSerializer** vous donne un contrôle complet et flexible lorsque vous sérialisez un objet sous le titre XML.</span><span class="sxs-lookup"><span data-stu-id="acfd7-178">The **XmlSerializer** class gives you complete and flexible control when you serialize an object as XML.</span></span> <span data-ttu-id="acfd7-179">Si vous créez un service Web XML, vous pouvez appliquer des attributs qui contrôlent la sérialisation des classes et des membres pour garantir que le résultat XML se conforme à un schéma spécifique.</span><span class="sxs-lookup"><span data-stu-id="acfd7-179">If you are creating an XML Web service, you can apply attributes that control serialization to classes and members to ensure that the XML output conforms to a specific schema.</span></span>

<span data-ttu-id="acfd7-180">Par exemple, **XmlSerializer** vous permet d’effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="acfd7-180">For example, **XmlSerializer** enables you to:</span></span>

- <span data-ttu-id="acfd7-181">Spécifier si un champ ou une propriété doit être encodé comme un attribut ou un élément.</span><span class="sxs-lookup"><span data-stu-id="acfd7-181">Specify whether a field or property should be encoded as an attribute or an element.</span></span>

- <span data-ttu-id="acfd7-182">Spécifier un espace de noms XML à utiliser.</span><span class="sxs-lookup"><span data-stu-id="acfd7-182">Specify an XML namespace to use.</span></span>

- <span data-ttu-id="acfd7-183">Spécifier le nom d'un élément ou d'un attribut si le nom d'un champ ou d'une propriété n'est pas approprié.</span><span class="sxs-lookup"><span data-stu-id="acfd7-183">Specify the name of an element or attribute if a field or property name is inappropriate.</span></span>

<span data-ttu-id="acfd7-184">Un autre avantage de la sérialisation XML est qu'aucune contrainte n'est définie sur les applications que vous développez, tant que le flux de données XML généré se conforme à un schéma donné.</span><span class="sxs-lookup"><span data-stu-id="acfd7-184">Another advantage of XML serialization is that you have no constraints on the applications you develop, as long as the XML stream that is generated conforms to a given schema.</span></span> <span data-ttu-id="acfd7-185">Imaginez un schéma utilisé pour décrire des livres.</span><span class="sxs-lookup"><span data-stu-id="acfd7-185">Imagine a schema that is used to describe books.</span></span> <span data-ttu-id="acfd7-186">Il comprend un titre, un auteur, un éditeur et un élément de numéro ISBN.</span><span class="sxs-lookup"><span data-stu-id="acfd7-186">It features a title, author, publisher, and ISBN number element.</span></span> <span data-ttu-id="acfd7-187">Vous pouvez développer une application qui traite les données XML de la manière dont vous le souhaitez, par exemple, comme une commande ou un inventaire de livres.</span><span class="sxs-lookup"><span data-stu-id="acfd7-187">You can develop an application that processes the XML data in any way you want, for example, as a book order, or as an inventory of books.</span></span> <span data-ttu-id="acfd7-188">Dans les deux cas, la seule spécification consiste en ce que le flux de données XML se conforme au schéma XSD spécifié.</span><span class="sxs-lookup"><span data-stu-id="acfd7-188">In either case, the only requirement is that the XML stream conforms to the specified XML Schema definition language (XSD) schema.</span></span>

## <a name="xml-serialization-considerations"></a><span data-ttu-id="acfd7-189">Considérations sur la sérialisation XML</span><span class="sxs-lookup"><span data-stu-id="acfd7-189">XML Serialization Considerations</span></span>

<span data-ttu-id="acfd7-190">Si vous utilisez la classe **XmlSerializer**, tenez compte des points suivants :</span><span class="sxs-lookup"><span data-stu-id="acfd7-190">The following should be considered when using the **XmlSerializer** class:</span></span>

- <span data-ttu-id="acfd7-191">L'outil Sgen.exe est conçu expressément pour générer des assemblys de sérialisation en vue d'obtenir des performances optimales.</span><span class="sxs-lookup"><span data-stu-id="acfd7-191">The Sgen.exe tool is expressly designed to generate serialization assemblies for optimum performance.</span></span>

- <span data-ttu-id="acfd7-192">Les données sérialisées ne contiennent que les données elles-mêmes et la structure de vos classes.</span><span class="sxs-lookup"><span data-stu-id="acfd7-192">The serialized data contains only the data itself and the structure of your classes.</span></span> <span data-ttu-id="acfd7-193">Les informations relatives à l'identité et aux assemblys ne sont pas incluses.</span><span class="sxs-lookup"><span data-stu-id="acfd7-193">Type identity and assembly information are not included.</span></span>

- <span data-ttu-id="acfd7-194">Seuls les champs et les propriétés publics peuvent être sérialisés.</span><span class="sxs-lookup"><span data-stu-id="acfd7-194">Only public properties and fields can be serialized.</span></span> <span data-ttu-id="acfd7-195">Les propriétés doivent disposer d'accesseurs publics (méthodes get et set).</span><span class="sxs-lookup"><span data-stu-id="acfd7-195">Properties must have public accessors (get and set methods).</span></span> <span data-ttu-id="acfd7-196">Si vous devez sérialiser des données non publiques, utilisez la classe <xref:System.Runtime.Serialization.DataContractSerializer> plutôt que la sérialisation XML.</span><span class="sxs-lookup"><span data-stu-id="acfd7-196">If you must serialize non-public data, use the <xref:System.Runtime.Serialization.DataContractSerializer> class rather than XML serialization.</span></span>

- <span data-ttu-id="acfd7-197">Une classe doit avoir un constructeur sans paramètres pour être sérialisé par **XmlSerializer**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-197">A class must have a parameterless constructor to be serialized by **XmlSerializer**.</span></span>

- <span data-ttu-id="acfd7-198">Les méthodes ne peuvent pas être sérialisées.</span><span class="sxs-lookup"><span data-stu-id="acfd7-198">Methods cannot be serialized.</span></span>

- <span data-ttu-id="acfd7-199">**XmlSerializer** peut traiter des classes qui implémentent différemment **IEnumerable** ou **ICollection** si elles répondent aux exigences ci-après.</span><span class="sxs-lookup"><span data-stu-id="acfd7-199">**XmlSerializer** can process classes that implement **IEnumerable** or **ICollection** differently if they meet certain requirements, as follows.</span></span>

  <span data-ttu-id="acfd7-200">Une classe qui implémente **IEnumerable** doit implémenter une méthode **Add** publique qui accepte un seul paramètre.</span><span class="sxs-lookup"><span data-stu-id="acfd7-200">A class that implements **IEnumerable** must implement a public **Add** method that takes a single parameter.</span></span> <span data-ttu-id="acfd7-201">Le paramètre de la méthode **Add** doit être cohérent (polymorphe) avec le type retourné par la propriété **IEnumerator.Current** qui est retournée par la méthode **GetEnumerator**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-201">The **Add** method's parameter must be consistent (polymorphic) with the type returned from the **IEnumerator.Current** property returned from the **GetEnumerator** method.</span></span>

  <span data-ttu-id="acfd7-202">Une classe qui implémente **ICollection** en plus de **IEnumerable** (comme **CollectionBase**) doit avoir une propriété **Item** publique indexée (un indexeur dans C#) qui accepte un entier et avoir une propriété **Count** publique de type **integer**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-202">A class that implements **ICollection** in addition to **IEnumerable** (such as **CollectionBase**) must have a public **Item** indexed property (an indexer in C#) that takes an integer and it must have a public **Count** property of type **integer**.</span></span> <span data-ttu-id="acfd7-203">Le paramètre passé à la méthode **Add** doit être du même type que celui retourné par la propriété **Item** ou correspondre à l’une des bases de ce type.</span><span class="sxs-lookup"><span data-stu-id="acfd7-203">The parameter passed to the **Add** method must be the same type as that returned from the **Item** property, or one of that type's bases.</span></span>

  <span data-ttu-id="acfd7-204">Dans le cas de classes qui implémentent **ICollection**, les valeurs à sérialiser sont récupérées à partir de la propriété **Item** indexée et non en appelant **GetEnumerator**.</span><span class="sxs-lookup"><span data-stu-id="acfd7-204">For classes that implement **ICollection**, values to be serialized are retrieved from the indexed **Item** property rather than by calling **GetEnumerator**.</span></span> <span data-ttu-id="acfd7-205">Par ailleurs, les propriétés et les champs publics ne sont pas sérialisés, à l’exception des champs publics qui retournent une autre classe de collection (une classe qui implémente **ICollection**).</span><span class="sxs-lookup"><span data-stu-id="acfd7-205">Also, public fields and properties are not serialized, with the exception of public fields that return another collection class (one that implements **ICollection**).</span></span> <span data-ttu-id="acfd7-206">Pour obtenir un exemple, consultez [Exemples de sérialisation XML](examples-of-xml-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="acfd7-206">For an example, see [Examples of XML Serialization](examples-of-xml-serialization.md).</span></span>

## <a name="xsd-data-type-mapping"></a><span data-ttu-id="acfd7-207">Mappage de type de données XSD</span><span class="sxs-lookup"><span data-stu-id="acfd7-207">XSD Data Type Mapping</span></span>

<span data-ttu-id="acfd7-208">Le document W3C intitulé [XML Schema Part 2: Datatypes](https://www.w3.org/TR/xmlschema-2/) spécifie les types de données simples qui sont autorisés dans un schéma de définition XML Schema (XSD).</span><span class="sxs-lookup"><span data-stu-id="acfd7-208">The W3C document titled [XML Schema Part 2: Datatypes](https://www.w3.org/TR/xmlschema-2/) specifies the simple data types that are allowed in an XML Schema definition language (XSD) schema.</span></span> <span data-ttu-id="acfd7-209">Pour la plupart d’entre eux (par exemple, **int** et **decimal**), il existe un type de données correspondant dans .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="acfd7-209">For many of these (for example, **int** and **decimal**), there is a corresponding data type in the .NET Framework.</span></span> <span data-ttu-id="acfd7-210">Toutefois, ce n’est pas le cas pour certains types de données XML (par exemple, le type de données **NMTOKEN**).</span><span class="sxs-lookup"><span data-stu-id="acfd7-210">However, some XML data types do not have a corresponding data type in the .NET Framework (for example, the **NMTOKEN** data type).</span></span> <span data-ttu-id="acfd7-211">Dans de tels cas, si vous utilisez l’[outil XML Schema Definition (Xsd.exe)](xml-schema-definition-tool-xsd-exe.md) pour créer des classes à partir d’un schéma, un attribut approprié est appliqué à un membre de type String et sa propriété **DataType** a pour valeur le nom du type de données XML.</span><span class="sxs-lookup"><span data-stu-id="acfd7-211">In such cases, if you use the XML Schema Definition tool ([XML Schema Definition Tool (Xsd.exe)](xml-schema-definition-tool-xsd-exe.md)) to generate classes from a schema, an appropriate attribute is applied to a member of type string, and its **DataType** property is set to the XML data type name.</span></span> <span data-ttu-id="acfd7-212">Par exemple, si un schéma contient un élément nommé « MyToken » et ayant le type de données XML **NMTOKEN**, la nouvelle classe peut contenir un membre tel qu’illustré dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="acfd7-212">For example, if a schema contains an element named "MyToken" with the XML data type **NMTOKEN**, the generated class might contain a member as shown in the following example.</span></span>

```vb
<XmlElement(DataType:="NMTOKEN")> _
Public MyToken As String
```

```csharp
[XmlElement(DataType = "NMTOKEN")]
public string MyToken;
```

<span data-ttu-id="acfd7-213">De la même façon, si vous créez une classe qui doit se conformer à un schéma XML spécifique (XSD), vous devez appliquer l’attribut approprié et assigner à sa propriété **DataType** le nom de type de données XML souhaité.</span><span class="sxs-lookup"><span data-stu-id="acfd7-213">Similarly, if you are creating a class that must conform to a specific XML Schema (XSD), you should apply the appropriate attribute and set its **DataType** property to the desired XML data type name.</span></span>

<span data-ttu-id="acfd7-214">Pour obtenir une liste complète des mappages de types, consultez la propriété **DataType** pour chacune des classes d’attributs suivantes :</span><span class="sxs-lookup"><span data-stu-id="acfd7-214">For a complete list of type mappings, see the **DataType** property for any of the following attribute classes:</span></span>

- <xref:System.Xml.Serialization.SoapAttributeAttribute>

- <xref:System.Xml.Serialization.SoapElementAttribute>

- <xref:System.Xml.Serialization.XmlArrayItemAttribute>

- <xref:System.Xml.Serialization.XmlAttributeAttribute>

- <xref:System.Xml.Serialization.XmlElementAttribute>

- <xref:System.Xml.Serialization.XmlRootAttribute>

## <a name="see-also"></a><span data-ttu-id="acfd7-215">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="acfd7-215">See also</span></span>

- <xref:System.Xml.Serialization.XmlSerializer>
- <xref:System.Runtime.Serialization.DataContractSerializer>
- <xref:System.IO.FileStream>
- [<span data-ttu-id="acfd7-216">Sérialisation XML et SOAP</span><span class="sxs-lookup"><span data-stu-id="acfd7-216">XML and SOAP Serialization</span></span>](xml-and-soap-serialization.md)
- [<span data-ttu-id="acfd7-217">Sérialisation binaire</span><span class="sxs-lookup"><span data-stu-id="acfd7-217">Binary Serialization</span></span>](binary-serialization.md)
- [<span data-ttu-id="acfd7-218">Sérialisation</span><span class="sxs-lookup"><span data-stu-id="acfd7-218">Serialization</span></span>](index.md)
- <xref:System.Xml.Serialization.XmlSerializer>
- [<span data-ttu-id="acfd7-219">Exemples de sérialisation XML</span><span class="sxs-lookup"><span data-stu-id="acfd7-219">Examples of XML Serialization</span></span>](examples-of-xml-serialization.md)
- [<span data-ttu-id="acfd7-220">Guide pratique pour sérialiser un objet</span><span class="sxs-lookup"><span data-stu-id="acfd7-220">How to: Serialize an Object</span></span>](how-to-serialize-an-object.md)
- [<span data-ttu-id="acfd7-221">Guide pratique pour désérialiser un objet</span><span class="sxs-lookup"><span data-stu-id="acfd7-221">How to: Deserialize an Object</span></span>](how-to-deserialize-an-object.md)
