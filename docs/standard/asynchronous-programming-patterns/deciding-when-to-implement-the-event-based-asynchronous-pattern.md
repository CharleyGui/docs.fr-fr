---
title: Choix du moment auquel implémenter le modèle asynchrone basé sur les événements
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- Event-based Asynchronous Pattern
- ProgressChangedEventArgs class
- BackgroundWorker component
- events [.NET Framework], asynchronous
- AsyncOperationManager class
- threading [.NET Framework], asynchronous features
- AsyncOperation class
- AsyncCompletedEventArgs class
ms.assetid: a00046aa-785d-4f7f-a8e5-d06475ea50da
ms.openlocfilehash: f07b68abecd237b2b378f00efbf2097c9416b487
ms.sourcegitcommit: c7a7e1468bf0fa7f7065de951d60dfc8d5ba89f5
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/14/2019
ms.locfileid: "65593142"
---
# <a name="deciding-when-to-implement-the-event-based-asynchronous-pattern"></a><span data-ttu-id="bb3d7-102">Choix du moment auquel implémenter le modèle asynchrone basé sur les événements</span><span class="sxs-lookup"><span data-stu-id="bb3d7-102">Deciding When to Implement the Event-based Asynchronous Pattern</span></span>
<span data-ttu-id="bb3d7-103">Le modèle asynchrone basé sur des événements fournit un modèle pour exposer le comportement asynchrone d’une classe.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-103">The Event-based Asynchronous Pattern provides a pattern for exposing the asynchronous behavior of a class.</span></span> <span data-ttu-id="bb3d7-104">Avec l’introduction de ce modèle, le .NET Framework définit deux modèles pour exposer le comportement asynchrone : le modèle asynchrone basé sur l’interface <xref:System.IAsyncResult?displayProperty=nameWithType> et le modèle basé sur les événements.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-104">With the introduction of this pattern, the .NET Framework defines two patterns for exposing asynchronous behavior: the Asynchronous Pattern based on the <xref:System.IAsyncResult?displayProperty=nameWithType> interface, and the event-based pattern.</span></span> <span data-ttu-id="bb3d7-105">Cette rubrique décrit les cas où il convient d’implémenter les deux modèles.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-105">This topic describes when it is appropriate for you to implement both patterns.</span></span>  
  
 <span data-ttu-id="bb3d7-106">Pour plus d’informations sur la programmation asynchrone avec l’interface <xref:System.IAsyncResult>, consultez [Modèle de programmation asynchrone](../../../docs/standard/asynchronous-programming-patterns/asynchronous-programming-model-apm.md).</span><span class="sxs-lookup"><span data-stu-id="bb3d7-106">For more information about asynchronous programming with the <xref:System.IAsyncResult> interface, see [Asynchronous Programming Model (APM)](../../../docs/standard/asynchronous-programming-patterns/asynchronous-programming-model-apm.md).</span></span>  
  
## <a name="general-principles"></a><span data-ttu-id="bb3d7-107">Principes généraux</span><span class="sxs-lookup"><span data-stu-id="bb3d7-107">General Principles</span></span>  
 <span data-ttu-id="bb3d7-108">En règle générale, vous devez, dans la mesure du possible, exposer les fonctionnalités asynchrones à l’aide du modèle asynchrone basé sur les événements.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-108">In general, you should expose asynchronous features using the Event-based Asynchronous Pattern whenever possible.</span></span> <span data-ttu-id="bb3d7-109">Ce modèle ne répond toutefois pas à certaines exigences spécifiques.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-109">However, there are some requirements that the event-based pattern cannot meet.</span></span> <span data-ttu-id="bb3d7-110">Dans ces cas particuliers, vous devez implémenter le modèle <xref:System.IAsyncResult> en plus du modèle basé sur les événements.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-110">In those cases, you may need to implement the <xref:System.IAsyncResult> pattern in addition to the event-based pattern.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bb3d7-111">Il est rare d’implémenter le modèle <xref:System.IAsyncResult> sans implémenter également le modèle basé sur les événements.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-111">It is rare for the <xref:System.IAsyncResult> pattern to be implemented without the event-based pattern also being implemented.</span></span>  
  
## <a name="guidelines"></a><span data-ttu-id="bb3d7-112">Recommandations</span><span class="sxs-lookup"><span data-stu-id="bb3d7-112">Guidelines</span></span>  
 <span data-ttu-id="bb3d7-113">La liste suivante décrit les instructions à suivre si vous devez implémenter le modèle asynchrone basé sur les événements :</span><span class="sxs-lookup"><span data-stu-id="bb3d7-113">The following list describes the guidelines for when you should implement Event-based Asynchronous Pattern:</span></span>  
  
- <span data-ttu-id="bb3d7-114">Utilisez le modèle basé sur les événements comme API par défaut pour exposer le comportement asynchrone de votre classe.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-114">Use the event-based pattern as the default API to expose asynchronous behavior for your class.</span></span>  
  
- <span data-ttu-id="bb3d7-115">N’exposez pas le modèle <xref:System.IAsyncResult> si votre classe est principalement utilisée dans une application cliente, par exemple Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-115">Do not expose the <xref:System.IAsyncResult> pattern when your class is primarily used in a client application, for example Windows Forms.</span></span>  
  
- <span data-ttu-id="bb3d7-116">Exposez uniquement le modèle <xref:System.IAsyncResult> s’il est nécessaire pour répondre à vos exigences.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-116">Only expose the <xref:System.IAsyncResult> pattern when it is necessary for meeting your requirements.</span></span> <span data-ttu-id="bb3d7-117">Par exemple, la compatibilité avec une API existante peut nécessiter l’exposition du modèle <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-117">For example, compatibility with an existing API may require you to expose the <xref:System.IAsyncResult> pattern.</span></span>  
  
- <span data-ttu-id="bb3d7-118">N’exposez pas le modèle <xref:System.IAsyncResult> sans exposer également le modèle basé sur les événements.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-118">Do not expose the <xref:System.IAsyncResult> pattern without also exposing the event-based pattern.</span></span>  
  
- <span data-ttu-id="bb3d7-119">Si vous devez exposer le modèle <xref:System.IAsyncResult>, faites-le en tant qu’option avancée.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-119">If you must expose the <xref:System.IAsyncResult> pattern, do so as an advanced option.</span></span> <span data-ttu-id="bb3d7-120">Par exemple, si vous générez un objet proxy, générez le modèle basé sur les événements par défaut, avec une option pour générer le modèle <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-120">For example, if you generate a proxy object, generate the event-based pattern by default, with an option to generate the <xref:System.IAsyncResult> pattern.</span></span>  
  
- <span data-ttu-id="bb3d7-121">Effectuez votre implémentation du modèle basé sur les événements à partir de votre implémentation du modèle <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-121">Build your event-based pattern implementation on your <xref:System.IAsyncResult> pattern implementation.</span></span>  
  
- <span data-ttu-id="bb3d7-122">Évitez d’exposer à la fois le modèle basé sur les événements et le modèle <xref:System.IAsyncResult> sur la même classe.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-122">Avoid exposing both the event-based pattern and the <xref:System.IAsyncResult> pattern on the same class.</span></span> <span data-ttu-id="bb3d7-123">Exposez le modèle basé sur les événements sur des classes de « niveau supérieur », et le modèle <xref:System.IAsyncResult> sur des classes de « niveau inférieur ».</span><span class="sxs-lookup"><span data-stu-id="bb3d7-123">Expose the event-based pattern on "higher level" classes and the <xref:System.IAsyncResult> pattern on "lower level" classes.</span></span> <span data-ttu-id="bb3d7-124">Par exemple, comparez le modèle basé sur les événements sur le composant <xref:System.Net.WebClient> avec le modèle <xref:System.IAsyncResult> sur la classe <xref:System.Web.HttpRequest>.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-124">For example, compare the event-based pattern on the <xref:System.Net.WebClient> component with the <xref:System.IAsyncResult> pattern on the <xref:System.Web.HttpRequest> class.</span></span>  
  
    - <span data-ttu-id="bb3d7-125">Exposez le modèle basé sur les événements et le modèle <xref:System.IAsyncResult> sur la même classe quand la compatibilité l’exige.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-125">Expose the event-based pattern and the <xref:System.IAsyncResult> pattern on the same class when compatibility requires it.</span></span> <span data-ttu-id="bb3d7-126">Par exemple, si vous avez déjà publié une API qui utilise le modèle <xref:System.IAsyncResult>, vous devez conserver le modèle <xref:System.IAsyncResult> pour la compatibilité descendante.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-126">For example, if you have already released an API that uses the <xref:System.IAsyncResult> pattern, you would need to retain the <xref:System.IAsyncResult> pattern for backward compatibility.</span></span>  
  
    - <span data-ttu-id="bb3d7-127">Exposez le modèle basé sur les événements et le modèle <xref:System.IAsyncResult> sur la même classe si la complexité du modèle objet résultant empêche de tirer avantage de la séparation des implémentations.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-127">Expose the event-based pattern and the <xref:System.IAsyncResult> pattern on the same class if the resulting object model complexity outweighs the benefit of separating the implementations.</span></span> <span data-ttu-id="bb3d7-128">Il vaut mieux exposer les deux modèles sur une même classe que de ne pas exposer le modèle basé sur les événements.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-128">It is better to expose both patterns on a single class than to avoid exposing the event-based pattern.</span></span>  
  
    - <span data-ttu-id="bb3d7-129">Si vous devez exposer à la fois le modèle basé sur les événements et le modèle <xref:System.IAsyncResult> sur une même classe, utilisez l’attribut <xref:System.ComponentModel.EditorBrowsableAttribute> défini sur <xref:System.ComponentModel.EditorBrowsableState.Advanced> pour marquer l’implémentation du modèle <xref:System.IAsyncResult> comme une fonctionnalité avancée.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-129">If you must expose both the event-based pattern and <xref:System.IAsyncResult> pattern on a single class, use <xref:System.ComponentModel.EditorBrowsableAttribute> set to <xref:System.ComponentModel.EditorBrowsableState.Advanced> to mark the <xref:System.IAsyncResult> pattern implementation as an advanced feature.</span></span> <span data-ttu-id="bb3d7-130">Cela indique aux environnements de conception, comme Visual Studio IntelliSense, de ne pas afficher les méthodes et les propriétés <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-130">This indicates to design environments, such as Visual Studio IntelliSense, not to display the <xref:System.IAsyncResult> properties and methods.</span></span> <span data-ttu-id="bb3d7-131">Ces méthodes et propriétés sont toujours utilisables, mais le développeur qui travaille avec IntelliSense a une vue plus claire de l’API.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-131">These properties and methods are still fully usable, but the developer working through IntelliSense has a clearer view of the API.</span></span>  
  
## <a name="criteria-for-exposing-the-iasyncresult-pattern-in-addition-to-the-event-based-pattern"></a><span data-ttu-id="bb3d7-132">Critères pour l’exposition du modèle IAsyncResult en plus du modèle basé sur les événements</span><span class="sxs-lookup"><span data-stu-id="bb3d7-132">Criteria for Exposing the IAsyncResult Pattern in Addition to the Event-based Pattern</span></span>  
 <span data-ttu-id="bb3d7-133">Le modèle asynchrone basé sur les événements présente de nombreux avantages dans les cas mentionnés précédemment, mais également quelques inconvénients que vous devez prendre en compte si les performances sont essentielles pour vous.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-133">While the Event-based Asynchronous Pattern has many benefits under the previously mentioned scenarios, it does have some drawbacks, which you should be aware of if performance is your most important requirement.</span></span>  
  
 <span data-ttu-id="bb3d7-134">Il existe trois scénarios dans lesquels le modèle basé sur les événements et le modèle <xref:System.IAsyncResult> ne fonctionnent pas :</span><span class="sxs-lookup"><span data-stu-id="bb3d7-134">There are three scenarios that the event-based pattern does not address as well as the <xref:System.IAsyncResult> pattern:</span></span>  
  
- <span data-ttu-id="bb3d7-135">Blocage de l’attente sur un <xref:System.IAsyncResult></span><span class="sxs-lookup"><span data-stu-id="bb3d7-135">Blocking wait on one <xref:System.IAsyncResult></span></span>  
  
- <span data-ttu-id="bb3d7-136">Blocage de l’attente sur de nombreux objets <xref:System.IAsyncResult></span><span class="sxs-lookup"><span data-stu-id="bb3d7-136">Blocking wait on many <xref:System.IAsyncResult> objects</span></span>  
  
- <span data-ttu-id="bb3d7-137">Interrogation pour connaître l’état d’avancement sur le <xref:System.IAsyncResult></span><span class="sxs-lookup"><span data-stu-id="bb3d7-137">Polling for completion on the <xref:System.IAsyncResult></span></span>  
  
 <span data-ttu-id="bb3d7-138">Vous pouvez gérer ces scénarios à l’aide du modèle basé sur les événements, mais cela s’avère plus fastidieux que d’utiliser du modèle <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-138">You can address these scenarios by using the event-based pattern, but doing so is more cumbersome than using the <xref:System.IAsyncResult> pattern.</span></span>  
  
 <span data-ttu-id="bb3d7-139">Les développeurs utilisent souvent le modèle <xref:System.IAsyncResult> pour les services qui exigent généralement de très hautes performances.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-139">Developers often use the <xref:System.IAsyncResult> pattern for services that typically have very high performance requirements.</span></span> <span data-ttu-id="bb3d7-140">Par exemple, l’interrogation pour connaître l’état d’avancement est une technique serveur hautes performances.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-140">For example, the polling for completion scenario is a high-performance server technique.</span></span>  
  
 <span data-ttu-id="bb3d7-141">Par ailleurs, le modèle basé sur les événements est moins efficace que le modèle <xref:System.IAsyncResult> parce qu’il crée davantage d’objets, en particulier d’arguments <xref:System.EventArgs>, et qu’il se synchronise à travers les différents threads.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-141">Additionally, the event-based pattern is less efficient than the <xref:System.IAsyncResult> pattern because it creates more objects, especially <xref:System.EventArgs>, and because it synchronizes across threads.</span></span>  
  
 <span data-ttu-id="bb3d7-142">La liste suivante fournit quelques recommandations à suivre si vous décidez d’utiliser le modèle <xref:System.IAsyncResult> :</span><span class="sxs-lookup"><span data-stu-id="bb3d7-142">The following list shows some recommendations to follow if you decide to use the <xref:System.IAsyncResult> pattern:</span></span>  
  
- <span data-ttu-id="bb3d7-143">Exposez uniquement le modèle <xref:System.IAsyncResult> si vous avez besoin de prendre spécifiquement en charge des objets <xref:System.Threading.WaitHandle> ou <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-143">Only expose the <xref:System.IAsyncResult> pattern when you specifically require support for <xref:System.Threading.WaitHandle> or <xref:System.IAsyncResult> objects.</span></span>  
  
- <span data-ttu-id="bb3d7-144">Exposez uniquement le modèle <xref:System.IAsyncResult> si vous avez une API existante qui utilise le modèle <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-144">Only expose the <xref:System.IAsyncResult> pattern when you have an existing API that uses the <xref:System.IAsyncResult> pattern.</span></span>  
  
- <span data-ttu-id="bb3d7-145">Si vous avez une API existante basée sur le modèle <xref:System.IAsyncResult>, vous pouvez également exposer le modèle basé sur les événements dans votre prochaine version.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-145">If you have an existing API based on the <xref:System.IAsyncResult> pattern, consider also exposing the event-based pattern in your next release.</span></span>  
  
- <span data-ttu-id="bb3d7-146">Exposez uniquement le modèle <xref:System.IAsyncResult> si vous exigez de hautes performances qui ne peuvent pas être atteintes avec le modèle basé sur les événements, mais qui peuvent l’être avec le modèle <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="bb3d7-146">Only expose <xref:System.IAsyncResult> pattern if you have high performance requirements which you have verified cannot be met by the event-based pattern but can be met by the <xref:System.IAsyncResult> pattern.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bb3d7-147">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="bb3d7-147">See also</span></span>

- [<span data-ttu-id="bb3d7-148">Guide pratique pour implémenter un composant qui prend en charge le modèle asynchrone basé sur des événements</span><span class="sxs-lookup"><span data-stu-id="bb3d7-148">How to: Implement a Component That Supports the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="bb3d7-149">Modèle asynchrone basé sur les événements (EAP)</span><span class="sxs-lookup"><span data-stu-id="bb3d7-149">Event-based Asynchronous Pattern (EAP)</span></span>](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md)
- [<span data-ttu-id="bb3d7-150">Implémentation du modèle asynchrone basé sur les événements</span><span class="sxs-lookup"><span data-stu-id="bb3d7-150">Implementing the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/implementing-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="bb3d7-151">Meilleures pratiques pour implémenter le modèle asynchrone basé sur les événements</span><span class="sxs-lookup"><span data-stu-id="bb3d7-151">Best Practices for Implementing the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/best-practices-for-implementing-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="bb3d7-152">Vue d’ensemble du modèle asynchrone basé sur les événements</span><span class="sxs-lookup"><span data-stu-id="bb3d7-152">Event-based Asynchronous Pattern Overview</span></span>](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-overview.md)
