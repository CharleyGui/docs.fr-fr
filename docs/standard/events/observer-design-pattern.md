---
title: Modèle de design observateur
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- IObserver(Of T) interface
- IObservable<T> interface
- IObserver<T> interface
- IObservable(Of T) interface
- observer design pattern [.NET Framework]
ms.assetid: 3680171f-f522-453c-aa4a-54f755a78f88
ms.openlocfilehash: 5794cd1ec9b63a6e151b35c28e09e29f86dcfac6
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/02/2020
ms.locfileid: "84291264"
---
# <a name="observer-design-pattern"></a><span data-ttu-id="d5a12-102">Modèle de design observateur</span><span class="sxs-lookup"><span data-stu-id="d5a12-102">Observer Design Pattern</span></span>

<span data-ttu-id="d5a12-103">Le modèle de design Observateur permet à un abonné de s’inscrire auprès d’un fournisseur et d’en recevoir des notifications.</span><span class="sxs-lookup"><span data-stu-id="d5a12-103">The observer design pattern enables a subscriber to register with and receive notifications from a provider.</span></span> <span data-ttu-id="d5a12-104">Il convient pour les scénarios nécessitant des notifications selon le modèle push.</span><span class="sxs-lookup"><span data-stu-id="d5a12-104">It is suitable for any scenario that requires push-based notification.</span></span> <span data-ttu-id="d5a12-105">Le modèle définit un *fournisseur* (également appelé un *sujet* ou un *observable*) et zéro, un ou plusieurs *observateurs*.</span><span class="sxs-lookup"><span data-stu-id="d5a12-105">The pattern defines a *provider* (also known as a *subject* or an *observable*) and zero, one, or more *observers*.</span></span> <span data-ttu-id="d5a12-106">Les observateurs s'inscrivent auprès du fournisseur et, chaque fois qu'une condition prédéfinie, un événement ou un changement d'état se produit, le fournisseur notifie automatiquement tous les observateurs en appelant l'une de leurs méthodes.</span><span class="sxs-lookup"><span data-stu-id="d5a12-106">Observers register with the provider, and whenever a predefined condition, event, or state change occurs, the provider automatically notifies all observers by calling one of their methods.</span></span> <span data-ttu-id="d5a12-107">Dans cet appel de méthode, le fournisseur peut également fournir des informations sur l'état actuel aux observateurs.</span><span class="sxs-lookup"><span data-stu-id="d5a12-107">In this method call, the provider can also provide current state information to observers.</span></span> <span data-ttu-id="d5a12-108">Dans le .NET Framework, le modèle de design Observateur est appliqué en implémentant les interfaces génériques <xref:System.IObservable%601?displayProperty=nameWithType> et <xref:System.IObserver%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="d5a12-108">In the .NET Framework, the observer design pattern is applied by implementing the generic <xref:System.IObservable%601?displayProperty=nameWithType> and <xref:System.IObserver%601?displayProperty=nameWithType> interfaces.</span></span> <span data-ttu-id="d5a12-109">Le paramètre de type générique représente le type qui fournit les informations de notification.</span><span class="sxs-lookup"><span data-stu-id="d5a12-109">The generic type parameter represents the type that provides notification information.</span></span>

## <a name="applying-the-pattern"></a><span data-ttu-id="d5a12-110">Application du modèle</span><span class="sxs-lookup"><span data-stu-id="d5a12-110">Applying the Pattern</span></span>

<span data-ttu-id="d5a12-111">Le modèle de design Observateur convient pour les notifications push distribuées, car il prend en charge une séparation nette entre deux composants différents ou deux couches applicatives différentes, comme une couche de source de données (logique métier) et une couche d'interface utilisateur (affichage).</span><span class="sxs-lookup"><span data-stu-id="d5a12-111">The observer design pattern is suitable for distributed push-based notifications, because it supports a clean separation between two different components or application layers, such as a data source (business logic) layer and a user interface (display) layer.</span></span> <span data-ttu-id="d5a12-112">Le modèle peut être implémenté chaque fois qu’un fournisseur utilise des rappels pour fournir les informations actuelles à ses clients.</span><span class="sxs-lookup"><span data-stu-id="d5a12-112">The pattern can be implemented whenever a provider uses callbacks to supply its clients with current information.</span></span>

<span data-ttu-id="d5a12-113">Vous devez fournir les éléments suivants pour l’implémentation du modèle :</span><span class="sxs-lookup"><span data-stu-id="d5a12-113">Implementing the pattern requires that you provide the following:</span></span>

- <span data-ttu-id="d5a12-114">Un fournisseur ou un sujet, qui est l'objet qui envoie les notifications aux observateurs.</span><span class="sxs-lookup"><span data-stu-id="d5a12-114">A provider or subject, which is the object that sends notifications to observers.</span></span> <span data-ttu-id="d5a12-115">Un fournisseur est une classe ou une structure qui implémente l'interface <xref:System.IObservable%601>.</span><span class="sxs-lookup"><span data-stu-id="d5a12-115">A provider is a class or structure that implements the <xref:System.IObservable%601> interface.</span></span> <span data-ttu-id="d5a12-116">Le fournisseur doit implémenter une seule méthode, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, qui est appelée par les observateurs qui veulent recevoir des notifications du fournisseur.</span><span class="sxs-lookup"><span data-stu-id="d5a12-116">The provider must implement a single method, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, which is called by observers that wish to receive notifications from the provider.</span></span>

- <span data-ttu-id="d5a12-117">Un observateur, qui est un objet qui reçoit des notifications d'un fournisseur.</span><span class="sxs-lookup"><span data-stu-id="d5a12-117">An observer, which is an object that receives notifications from a provider.</span></span> <span data-ttu-id="d5a12-118">Un observateur est une classe ou une structure qui implémente l'interface <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="d5a12-118">An observer is a class or structure that implements the <xref:System.IObserver%601> interface.</span></span> <span data-ttu-id="d5a12-119">L'observateur doit implémenter trois méthodes, toutes étant appelées par le fournisseur :</span><span class="sxs-lookup"><span data-stu-id="d5a12-119">The observer must implement three methods, all of which are called by the provider:</span></span>

  - <span data-ttu-id="d5a12-120"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, qui fournit des informations nouvelles ou actuelles à l'observateur.</span><span class="sxs-lookup"><span data-stu-id="d5a12-120"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, which supplies the observer with new or current information.</span></span>

  - <span data-ttu-id="d5a12-121"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, qui informe l'observateur qu'une erreur s'est produite.</span><span class="sxs-lookup"><span data-stu-id="d5a12-121"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, which informs the observer that an error has occurred.</span></span>

  - <span data-ttu-id="d5a12-122"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, qui indique que le fournisseur a terminé l'envoi des notifications.</span><span class="sxs-lookup"><span data-stu-id="d5a12-122"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, which indicates that the provider has finished sending notifications.</span></span>

- <span data-ttu-id="d5a12-123">Un mécanisme qui permet au fournisseur d'effectuer le suivi des observateurs.</span><span class="sxs-lookup"><span data-stu-id="d5a12-123">A mechanism that allows the provider to keep track of observers.</span></span> <span data-ttu-id="d5a12-124">En règle générale, le fournisseur utilise un objet conteneur, comme un objet <xref:System.Collections.Generic.List%601?displayProperty=nameWithType>, pour y placer les références aux implémentations de <xref:System.IObserver%601> qui se sont abonnées aux notifications.</span><span class="sxs-lookup"><span data-stu-id="d5a12-124">Typically, the provider uses a container object, such as a <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> object, to hold references to the <xref:System.IObserver%601> implementations that have subscribed to notifications.</span></span> <span data-ttu-id="d5a12-125">L'utilisation d'un conteneur de stockage à cet effet permet au fournisseur de gérer de zéro à un nombre illimité d'observateurs.</span><span class="sxs-lookup"><span data-stu-id="d5a12-125">Using a storage container for this purpose enables the provider to handle zero to an unlimited number of observers.</span></span> <span data-ttu-id="d5a12-126">L'ordre dans lequel les observateurs reçoivent les notifications n'est pas défini ; le fournisseur est libre d'utiliser n'importe quelle méthode pour déterminer l'ordre.</span><span class="sxs-lookup"><span data-stu-id="d5a12-126">The order in which observers receive notifications is not defined; the provider is free to use any method to determine the order.</span></span>

- <span data-ttu-id="d5a12-127">Une implémentation de <xref:System.IDisposable> qui permet au fournisseur de supprimer les observateurs quand la notification est effectuée.</span><span class="sxs-lookup"><span data-stu-id="d5a12-127">An <xref:System.IDisposable> implementation that enables the provider to remove observers when notification is complete.</span></span> <span data-ttu-id="d5a12-128">Les observateurs reçoivent une référence à l'implémentation de <xref:System.IDisposable> de la part de la méthode <xref:System.IObservable%601.Subscribe%2A>, et ils peuvent donc également appeler la méthode <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> pour se désabonner avant que le fournisseur ait terminé l'envoi des notifications.</span><span class="sxs-lookup"><span data-stu-id="d5a12-128">Observers receive a reference to the <xref:System.IDisposable> implementation from the <xref:System.IObservable%601.Subscribe%2A> method, so they can also call the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method to unsubscribe before the provider has finished sending notifications.</span></span>

- <span data-ttu-id="d5a12-129">Un objet qui contient les données que le fournisseur envoie à ses observateurs.</span><span class="sxs-lookup"><span data-stu-id="d5a12-129">An object that contains the data that the provider sends to its observers.</span></span> <span data-ttu-id="d5a12-130">Le type de cet objet correspond au paramètre de type générique des interfaces <xref:System.IObservable%601> et <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="d5a12-130">The type of this object corresponds to the generic type parameter of the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="d5a12-131">Bien que cet objet puisse être le même que l'implémentation de <xref:System.IObservable%601>, il s'agit généralement d'un type distinct.</span><span class="sxs-lookup"><span data-stu-id="d5a12-131">Although this object can be the same as the <xref:System.IObservable%601> implementation, most commonly it is a separate type.</span></span>

> [!NOTE]
> <span data-ttu-id="d5a12-132">En plus d’implémenter le modèle de design Observateur, vous pouvez être intéressé par l’exploration des bibliothèques générées à l’aide des interfaces <xref:System.IObservable%601> et <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="d5a12-132">In addition to implementing the observer design pattern, you may be interested in exploring libraries that are built using the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="d5a12-133">Par exemple, les [Extensions réactives pour .NET (Rx)](https://docs.microsoft.com/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) se composent d’un ensemble de méthodes d’extension et d’opérateurs de séquence standard LINQ pour prendre en charge la programmation asynchrone.</span><span class="sxs-lookup"><span data-stu-id="d5a12-133">For example, [Reactive Extensions for .NET (Rx)](https://docs.microsoft.com/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) consist of a set of extension methods and LINQ standard sequence operators to support asynchronous programming.</span></span>

## <a name="implementing-the-pattern"></a><span data-ttu-id="d5a12-134">Implémentation du modèle</span><span class="sxs-lookup"><span data-stu-id="d5a12-134">Implementing the Pattern</span></span>

<span data-ttu-id="d5a12-135">L'exemple suivant utilise le modèle de design Observateur pour implémenter un système de restitution des bagages d'un aéroport.</span><span class="sxs-lookup"><span data-stu-id="d5a12-135">The following example uses the observer design pattern to implement an airport baggage claim information system.</span></span> <span data-ttu-id="d5a12-136">Une classe `BaggageInfo` fournit des informations sur les vols arrivés et sur les tapis roulants où les bagages de chaque vol peuvent être récupérés.</span><span class="sxs-lookup"><span data-stu-id="d5a12-136">A `BaggageInfo` class provides information about arriving flights and the carousels where baggage from each flight is available for pickup.</span></span> <span data-ttu-id="d5a12-137">Elle est montrée dans l'exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="d5a12-137">It is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#1)]
[!code-vb[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#1)]

<span data-ttu-id="d5a12-138">Une classe `BaggageHandler` est responsable de la réception des informations sur les vols arrivés et sur les tapis roulants de récupération des bagages.</span><span class="sxs-lookup"><span data-stu-id="d5a12-138">A `BaggageHandler` class is responsible for receiving information about arriving flights and baggage claim carousels.</span></span> <span data-ttu-id="d5a12-139">En interne, elle gère deux collections :</span><span class="sxs-lookup"><span data-stu-id="d5a12-139">Internally, it maintains two collections:</span></span>

- <span data-ttu-id="d5a12-140">`observers` : une collection des clients qui recevront les informations mises à jour.</span><span class="sxs-lookup"><span data-stu-id="d5a12-140">`observers` - A collection of clients that will receive updated information.</span></span>

- <span data-ttu-id="d5a12-141">`flights` : une collection des vols et des tapis roulants qui leur sont affectés.</span><span class="sxs-lookup"><span data-stu-id="d5a12-141">`flights` - A collection of flights and their assigned carousels.</span></span>

<span data-ttu-id="d5a12-142">Les deux collections sont représentées par des objets <xref:System.Collections.Generic.List%601> génériques qui sont instanciés dans le constructeur de classe `BaggageHandler`.</span><span class="sxs-lookup"><span data-stu-id="d5a12-142">Both collections are represented by generic <xref:System.Collections.Generic.List%601> objects that are instantiated in the `BaggageHandler` class constructor.</span></span> <span data-ttu-id="d5a12-143">Le code source de la classe `BaggageHandler` est montré dans l'exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="d5a12-143">The source code for the `BaggageHandler` class is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#2)]
[!code-vb[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#2)]

<span data-ttu-id="d5a12-144">Les clients qui veulent recevoir des informations mises à jour appellent la méthode `BaggageHandler.Subscribe`.</span><span class="sxs-lookup"><span data-stu-id="d5a12-144">Clients that wish to receive updated information call the `BaggageHandler.Subscribe` method.</span></span> <span data-ttu-id="d5a12-145">Si le client ne s'est pas auparavant abonné aux notifications, une référence à l'implémentation de <xref:System.IObserver%601> du client est ajoutée à la collection `observers`.</span><span class="sxs-lookup"><span data-stu-id="d5a12-145">If the client has not previously subscribed to notifications, a reference to the client's <xref:System.IObserver%601> implementation is added to the `observers` collection.</span></span>

<span data-ttu-id="d5a12-146">La méthode `BaggageHandler.BaggageStatus` surchargée peut être appelée pour indiquer que les bagages d'un vol sont en cours de déchargement ou que leur déchargement est terminé.</span><span class="sxs-lookup"><span data-stu-id="d5a12-146">The overloaded `BaggageHandler.BaggageStatus` method can be called to indicate that baggage from a flight either is being unloaded or is no longer being unloaded.</span></span> <span data-ttu-id="d5a12-147">Dans le premier cas, les informations suivantes sont passées à la méthode : un numéro de vol, l'aéroport de provenance du vol et le tapis roulant où les bagages sont déchargés.</span><span class="sxs-lookup"><span data-stu-id="d5a12-147">In the first case, the method is passed a flight number, the airport from which the flight originated, and the carousel where baggage is being unloaded.</span></span> <span data-ttu-id="d5a12-148">Dans le deuxième cas, seul un numéro de vol est passé à la méthode.</span><span class="sxs-lookup"><span data-stu-id="d5a12-148">In the second case, the method is passed only a flight number.</span></span> <span data-ttu-id="d5a12-149">Pour les bagages en cours de déchargement, la méthode vérifie si les informations `BaggageInfo` passées à la méthode existent dans la collection `flights`.</span><span class="sxs-lookup"><span data-stu-id="d5a12-149">For baggage that is being unloaded, the method checks whether the `BaggageInfo` information passed to the method exists in the `flights` collection.</span></span> <span data-ttu-id="d5a12-150">Si elles n'y existent pas, la méthode ajoute les informations et appelle la méthode `OnNext` de chaque observateur.</span><span class="sxs-lookup"><span data-stu-id="d5a12-150">If it does not, the method adds the information and calls each observer's `OnNext` method.</span></span> <span data-ttu-id="d5a12-151">Pour les vols dont le déchargement des bagages est terminé, la méthode vérifie si les informations de ce vol sont stockées dans la collection `flights`.</span><span class="sxs-lookup"><span data-stu-id="d5a12-151">For flights whose baggage is no longer being unloaded, the method checks whether information on that flight is stored in the `flights` collection.</span></span> <span data-ttu-id="d5a12-152">Si c’est le cas, la méthode appelle la méthode `OnNext` de chaque observateur et supprime l’objet `BaggageInfo` de la collection `flights`.</span><span class="sxs-lookup"><span data-stu-id="d5a12-152">If it is, the method calls each observer's `OnNext` method and removes the `BaggageInfo` object from the `flights` collection.</span></span>

<span data-ttu-id="d5a12-153">Quand le dernier vol de la journée a atterri et que ses bagages ont été traités, la méthode `BaggageHandler.LastBaggageClaimed` est appelée.</span><span class="sxs-lookup"><span data-stu-id="d5a12-153">When the last flight of the day has landed and its baggage has been processed, the `BaggageHandler.LastBaggageClaimed` method is called.</span></span> <span data-ttu-id="d5a12-154">Cette méthode appelle la méthode `OnCompleted` de chaque observateur pour indiquer que toutes les notifications ont été effectuées, puis supprime la collection `observers`.</span><span class="sxs-lookup"><span data-stu-id="d5a12-154">This method calls each observer's `OnCompleted` method to indicate that all notifications have completed, and then clears the `observers` collection.</span></span>

<span data-ttu-id="d5a12-155">La méthode <xref:System.IObservable%601.Subscribe%2A> du fournisseur retourne une implémentation de <xref:System.IDisposable> qui permet aux observateurs d'arrêter de recevoir des notifications avant que la méthode <xref:System.IObserver%601.OnCompleted%2A> soit appelée.</span><span class="sxs-lookup"><span data-stu-id="d5a12-155">The provider's <xref:System.IObservable%601.Subscribe%2A> method returns an <xref:System.IDisposable> implementation that enables observers to stop receiving notifications before the <xref:System.IObserver%601.OnCompleted%2A> method is called.</span></span> <span data-ttu-id="d5a12-156">Le code source de cette classe `Unsubscriber(Of BaggageInfo)` est montré dans l'exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="d5a12-156">The source code for this `Unsubscriber(Of BaggageInfo)` class is shown in the following example.</span></span> <span data-ttu-id="d5a12-157">Quand la classe est instanciée dans la méthode `BaggageHandler.Subscribe`, deux références lui sont passées : une référence à la collection `observers` et une référence à l’observateur qui est ajouté à la collection.</span><span class="sxs-lookup"><span data-stu-id="d5a12-157">When the class is instantiated in the `BaggageHandler.Subscribe` method, it is passed a reference to the `observers` collection and a reference to the observer that is added to the collection.</span></span> <span data-ttu-id="d5a12-158">Ces références sont affectées à des variables locales.</span><span class="sxs-lookup"><span data-stu-id="d5a12-158">These references are assigned to local variables.</span></span> <span data-ttu-id="d5a12-159">Quand la méthode `Dispose` de l’objet est appelée, elle vérifie si l’observateur existe toujours dans la collection `observers` et, le cas échéant, elle supprime l’observateur.</span><span class="sxs-lookup"><span data-stu-id="d5a12-159">When the object's `Dispose` method is called, it checks whether the observer still exists in the `observers` collection, and, if it does, removes the observer.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#3)]
[!code-vb[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#3)]

<span data-ttu-id="d5a12-160">L'exemple suivant fournit une implémentation de <xref:System.IObserver%601> nommée `ArrivalsMonitor`, qui est une classe de base qui affiche les informations sur la récupération des bagages.</span><span class="sxs-lookup"><span data-stu-id="d5a12-160">The following example provides an <xref:System.IObserver%601> implementation named `ArrivalsMonitor`, which is a base class that displays baggage claim information.</span></span> <span data-ttu-id="d5a12-161">Les informations sont affichées par ordre alphabétique, selon le nom de la ville d'origine.</span><span class="sxs-lookup"><span data-stu-id="d5a12-161">The information is displayed alphabetically, by the name of the originating city.</span></span> <span data-ttu-id="d5a12-162">Les méthodes de `ArrivalsMonitor` sont marquées `overridable` (en Visual Basic) ou `virtual` (en C#), et elles peuvent donc toutes être remplacées par une classe dérivée.</span><span class="sxs-lookup"><span data-stu-id="d5a12-162">The methods of `ArrivalsMonitor` are marked as `overridable` (in Visual Basic) or `virtual` (in C#), so they can all be overridden by a derived class.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/observer.cs#4)]
[!code-vb[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/observer.vb#4)]

<span data-ttu-id="d5a12-163">La classe `ArrivalsMonitor` comprend les méthodes `Subscribe` et `Unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="d5a12-163">The `ArrivalsMonitor` class includes the `Subscribe` and `Unsubscribe` methods.</span></span> <span data-ttu-id="d5a12-164">La méthode `Subscribe` permet à la classe d'enregistrer l'implémentation de <xref:System.IDisposable> retournée par l'appel à <xref:System.IObservable%601.Subscribe%2A> dans une variable privée.</span><span class="sxs-lookup"><span data-stu-id="d5a12-164">The `Subscribe` method enables the class to save the <xref:System.IDisposable> implementation returned by the call to <xref:System.IObservable%601.Subscribe%2A> to a private variable.</span></span> <span data-ttu-id="d5a12-165">La méthode `Unsubscribe` permet à la classe de se désabonner des notifications en appelant l'implémentation de <xref:System.IDisposable.Dispose%2A> du fournisseur.</span><span class="sxs-lookup"><span data-stu-id="d5a12-165">The `Unsubscribe` method enables the class to unsubscribe from notifications by calling the provider's <xref:System.IDisposable.Dispose%2A> implementation.</span></span> <span data-ttu-id="d5a12-166">`ArrivalsMonitor` fournit également des implémentations des méthodes <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A> et <xref:System.IObserver%601.OnCompleted%2A>.</span><span class="sxs-lookup"><span data-stu-id="d5a12-166">`ArrivalsMonitor` also provides implementations of the <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A>, and <xref:System.IObserver%601.OnCompleted%2A> methods.</span></span> <span data-ttu-id="d5a12-167">Seule l'implémentation de <xref:System.IObserver%601.OnNext%2A> contient une quantité importante de code.</span><span class="sxs-lookup"><span data-stu-id="d5a12-167">Only the <xref:System.IObserver%601.OnNext%2A> implementation contains a significant amount of code.</span></span> <span data-ttu-id="d5a12-168">La méthode fonctionne avec un objet <xref:System.Collections.Generic.List%601> privé, trié et générique, qui gère les informations sur les aéroports d'origine des vols arrivés et sur les tapis roulants où leurs bagages sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="d5a12-168">The method works with a private, sorted, generic <xref:System.Collections.Generic.List%601> object that maintains information about the airports of origin for arriving flights and the carousels on which their baggage is available.</span></span> <span data-ttu-id="d5a12-169">Si la classe `BaggageHandler` signale l'arrivée d'un nouveau vol, l'implémentation de la méthode <xref:System.IObserver%601.OnNext%2A> ajoute des informations sur ce vol à la liste.</span><span class="sxs-lookup"><span data-stu-id="d5a12-169">If the `BaggageHandler` class reports a new flight arrival, the <xref:System.IObserver%601.OnNext%2A> method implementation adds information about that flight to the list.</span></span> <span data-ttu-id="d5a12-170">Si la classe `BaggageHandler` signale que les bagages du vol ont été déchargées, la méthode <xref:System.IObserver%601.OnNext%2A> supprime ce vol de la liste.</span><span class="sxs-lookup"><span data-stu-id="d5a12-170">If the `BaggageHandler` class reports that the flight's baggage has been unloaded, the <xref:System.IObserver%601.OnNext%2A> method removes that flight from the list.</span></span> <span data-ttu-id="d5a12-171">Chaque fois qu'une modification est apportée, la liste est triée et affichée sur la console.</span><span class="sxs-lookup"><span data-stu-id="d5a12-171">Whenever a change is made, the list is sorted and displayed to the console.</span></span>

<span data-ttu-id="d5a12-172">L'exemple suivant contient le point d'entrée de l'application qui instancie la classe `BaggageHandler` ainsi que deux instances de la classe `ArrivalsMonitor`, et qui utilise la méthode `BaggageHandler.BaggageStatus` pour ajouter et supprimer des informations sur les vols arrivés.</span><span class="sxs-lookup"><span data-stu-id="d5a12-172">The following example contains the application entry point that instantiates the `BaggageHandler` class as well as two instances of the `ArrivalsMonitor` class, and uses the `BaggageHandler.BaggageStatus` method to add and remove information about arriving flights.</span></span> <span data-ttu-id="d5a12-173">Dans chaque cas, les observateurs reçoivent des mises à jour et affichent correctement les informations de récupération des bagages.</span><span class="sxs-lookup"><span data-stu-id="d5a12-173">In each case, the observers receive updates and correctly display baggage claim information.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/program.cs#5)]
[!code-vb[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/module1.vb#5)]

## <a name="related-topics"></a><span data-ttu-id="d5a12-174">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="d5a12-174">Related Topics</span></span>

|<span data-ttu-id="d5a12-175">Intitulé</span><span class="sxs-lookup"><span data-stu-id="d5a12-175">Title</span></span>|<span data-ttu-id="d5a12-176">Description</span><span class="sxs-lookup"><span data-stu-id="d5a12-176">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="d5a12-177">Meilleures pratiques du modèle de design observateur</span><span class="sxs-lookup"><span data-stu-id="d5a12-177">Observer Design Pattern Best Practices</span></span>](observer-design-pattern-best-practices.md)|<span data-ttu-id="d5a12-178">Décrit les meilleures pratiques à adopter lors du développement d'applications qui implémentent le modèle de design Observateur.</span><span class="sxs-lookup"><span data-stu-id="d5a12-178">Describes best practices to adopt when developing applications that implement the observer design pattern.</span></span>|
|[<span data-ttu-id="d5a12-179">Comment : implémenter un fournisseur</span><span class="sxs-lookup"><span data-stu-id="d5a12-179">How to: Implement a Provider</span></span>](how-to-implement-a-provider.md)|<span data-ttu-id="d5a12-180">Fournit une implémentation pas à pas d'un fournisseur pour une application de surveillance de la température.</span><span class="sxs-lookup"><span data-stu-id="d5a12-180">Provides a step-by-step implementation of a provider for a temperature monitoring application.</span></span>|
|[<span data-ttu-id="d5a12-181">Comment : implémenter un observateur</span><span class="sxs-lookup"><span data-stu-id="d5a12-181">How to: Implement an Observer</span></span>](how-to-implement-an-observer.md)|<span data-ttu-id="d5a12-182">Fournit une implémentation pas à pas d'un observateur pour une application de surveillance de la température.</span><span class="sxs-lookup"><span data-stu-id="d5a12-182">Provides a step-by-step implementation of an observer for a temperature monitoring application.</span></span>|
