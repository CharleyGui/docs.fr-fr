---
title: Éléments ignorés - Guide C#
description: Décrit la prise en charge par C# des éléments ignorés, qui sont des variables qui peuvent être ignorées, et les différentes façons dont les éléments ignorés peuvent être utilisés.
ms.technology: csharp-fundamentals
ms.date: 09/22/2020
ms.openlocfilehash: 7562da880ff3136dfc04ce4061bafa8ed55f5a23
ms.sourcegitcommit: 38999dc0ec4f7c4404de5ce0951b64c55997d9ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/02/2021
ms.locfileid: "99426916"
---
# <a name="discards---c-guide"></a><span data-ttu-id="821dc-103">Éléments ignorés - Guide C#</span><span class="sxs-lookup"><span data-stu-id="821dc-103">Discards - C# Guide</span></span>

<span data-ttu-id="821dc-104">À compter de C# 7,0, C# prend en charge les éléments ignorés, qui sont des variables d’espace réservé qui sont intentionnellement inutilisées dans le code de l’application.</span><span class="sxs-lookup"><span data-stu-id="821dc-104">Starting with C# 7.0, C# supports discards, which are placeholder variables that are intentionally unused in application code.</span></span> <span data-ttu-id="821dc-105">Les éléments ignorés sont équivalents aux variables non affectées ; ils n’ont pas de valeur.</span><span class="sxs-lookup"><span data-stu-id="821dc-105">Discards are equivalent to unassigned variables; they don't have a value.</span></span> <span data-ttu-id="821dc-106">Un abandon communique l’intention au compilateur et d’autres personnes qui lisent votre code : vous avez prévu d’ignorer le résultat d’une expression.</span><span class="sxs-lookup"><span data-stu-id="821dc-106">A discard communicates intent to the compiler and others that read your code: You intended to ignore the result of an expression.</span></span> <span data-ttu-id="821dc-107">Vous pouvez ignorer le résultat d’une expression, d’un ou de plusieurs membres d’une expression de tuple, d’un `out` paramètre d’une méthode ou de la cible d’une expression de critères spéciaux.</span><span class="sxs-lookup"><span data-stu-id="821dc-107">You may want to ignore the result of an expression, one or more members of a tuple expression, an `out` parameter to a method, or the target of a pattern matching expression.</span></span>

<span data-ttu-id="821dc-108">Étant donné qu’il n’y a qu’une seule variable à rejet, cette variable ne peut même pas être allouée au stockage.</span><span class="sxs-lookup"><span data-stu-id="821dc-108">Because there's only a single discard variable, that variable may not even be allocated storage.</span></span> <span data-ttu-id="821dc-109">Les éléments ignorés peuvent réduire les allocations de mémoire.</span><span class="sxs-lookup"><span data-stu-id="821dc-109">Discards can reduce memory allocations.</span></span> <span data-ttu-id="821dc-110">Les éléments ignorés rendent l’objectif de votre code clair.</span><span class="sxs-lookup"><span data-stu-id="821dc-110">Discards make the intent of your code clear.</span></span> <span data-ttu-id="821dc-111">Ils améliorent la lisibilité et la maintenabilité.</span><span class="sxs-lookup"><span data-stu-id="821dc-111">They enhance its readability and maintainability.</span></span>

<span data-ttu-id="821dc-112">Vous indiquez qu’une variable est un élément ignoré en lui affectant comme nom le trait de soulignement (`_`).</span><span class="sxs-lookup"><span data-stu-id="821dc-112">You indicate that a variable is a discard by assigning it the underscore (`_`) as its name.</span></span> <span data-ttu-id="821dc-113">Par exemple, l’appel de méthode suivant retourne un tuple dans lequel les première et deuxième valeurs sont ignorées.</span><span class="sxs-lookup"><span data-stu-id="821dc-113">For example, the following method call returns a tuple in which the first and second values are discards.</span></span> <span data-ttu-id="821dc-114">`area` est une variable déclarée précédemment définie sur le troisième composant retourné par `GetCityInformation` :</span><span class="sxs-lookup"><span data-stu-id="821dc-114">`area` is a previously declared variable set to the third component returned by `GetCityInformation`:</span></span>

```csharp
(_, _, area) = city.GetCityInformation(cityName);
```

<span data-ttu-id="821dc-115">À compter de C# 9,0, vous pouvez utiliser des éléments ignorés pour spécifier les paramètres d’entrée inutilisés d’une expression lambda.</span><span class="sxs-lookup"><span data-stu-id="821dc-115">Beginning with C# 9.0, you can use discards to specify unused input parameters of a lambda expression.</span></span> <span data-ttu-id="821dc-116">Pour plus d’informations, consultez la section [paramètres d’entrée d’une expression lambda](language-reference/operators/lambda-expressions.md#input-parameters-of-a-lambda-expression) de l’article [expressions lambda](language-reference/operators/lambda-expressions.md) .</span><span class="sxs-lookup"><span data-stu-id="821dc-116">For more information, see the [Input parameters of a lambda expression](language-reference/operators/lambda-expressions.md#input-parameters-of-a-lambda-expression) section of the [Lambda expressions](language-reference/operators/lambda-expressions.md) article.</span></span>

<span data-ttu-id="821dc-117">Lorsque `_` est un ignore valide, toute tentative de récupération de sa valeur ou son utilisation dans une opération d’assignation génère l’erreur de compilateur CS0301, « le nom' \_ 'n’existe pas dans le contexte actuel ».</span><span class="sxs-lookup"><span data-stu-id="821dc-117">When `_` is a valid discard, attempting to retrieve its value or use it in an assignment operation generates compiler error CS0301, "The name '\_' doesn't exist in the current context".</span></span> <span data-ttu-id="821dc-118">Cette erreur est due `_` au fait qu’une valeur n’est pas affectée à et peut même ne pas être affectée à un emplacement de stockage.</span><span class="sxs-lookup"><span data-stu-id="821dc-118">This error is because `_` isn't assigned a value, and may not even be assigned a storage location.</span></span> <span data-ttu-id="821dc-119">S’il s’agit d’une variable réelle, vous ne pouviez pas ignorer plus d’une valeur, comme le faisait l’exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="821dc-119">If it were an actual variable, you couldn't discard more than one value, as the previous example did.</span></span>

## <a name="tuple-and-object-deconstruction"></a><span data-ttu-id="821dc-120">Déconstruction de tuple et d’objet</span><span class="sxs-lookup"><span data-stu-id="821dc-120">Tuple and object deconstruction</span></span>

<span data-ttu-id="821dc-121">Les éléments ignorés sont utiles lors de l’utilisation de tuples lorsque votre code d’application utilise des éléments tuples, mais en ignore d’autres.</span><span class="sxs-lookup"><span data-stu-id="821dc-121">Discards are useful in working with tuples when your application code uses some tuple elements but ignores others.</span></span> <span data-ttu-id="821dc-122">Par exemple, la `QueryCityDataForYears` méthode suivante retourne un tuple avec le nom d’une ville, sa zone, une année, la population de la ville pour cette année, une seconde année et la population de la ville pour cette seconde année.</span><span class="sxs-lookup"><span data-stu-id="821dc-122">For example, the following `QueryCityDataForYears` method returns a tuple with the name of a city, its area, a year, the city's population for that year, a second year, and the city's population for that second year.</span></span> <span data-ttu-id="821dc-123">L’exemple montre la différence de population entre ces deux années.</span><span class="sxs-lookup"><span data-stu-id="821dc-123">The example shows the change in population between those two years.</span></span> <span data-ttu-id="821dc-124">Parmi les données disponibles dans le tuple, nous ne sommes pas intéressés par la région de la ville, et nous connaissons le nom de la ville et les deux dates au moment du design.</span><span class="sxs-lookup"><span data-stu-id="821dc-124">Of the data available from the tuple, we're unconcerned with the city area, and we know the city name and the two dates at design-time.</span></span> <span data-ttu-id="821dc-125">Par conséquent, nous sommes intéressés seulement par les deux valeurs de la population stockées dans le tuple et nous pouvons gérer ses valeurs restantes comme éléments ignorés.</span><span class="sxs-lookup"><span data-stu-id="821dc-125">As a result, we're only interested in the two population values stored in the tuple, and can handle its remaining values as discards.</span></span>  

:::code language="csharp" source="snippets/discards/discard-tuple.cs" ID="DiscardTupleMember" :::

<span data-ttu-id="821dc-126">Pour plus d’informations sur la déconstruction de tuples avec des éléments ignorés, consultez [Déconstruction de tuples et d’autres types](deconstruct.md#deconstructing-tuple-elements-with-discards).</span><span class="sxs-lookup"><span data-stu-id="821dc-126">For more information on deconstructing tuples with discards, see [Deconstructing tuples and other types](deconstruct.md#deconstructing-tuple-elements-with-discards).</span></span>

<span data-ttu-id="821dc-127">La méthode `Deconstruct` d’une classe, d’un struct ou d’une interface vous permet aussi de récupérer et de déconstruire un ensemble spécifique de données d’un objet.</span><span class="sxs-lookup"><span data-stu-id="821dc-127">The `Deconstruct` method of a class, structure, or interface also allows you to retrieve and deconstruct a specific set of data from an object.</span></span> <span data-ttu-id="821dc-128">Vous pouvez utiliser des éléments ignorés lorsque vous êtes intéressé par l’utilisation d’un seul sous-ensemble des valeurs déconstruites.</span><span class="sxs-lookup"><span data-stu-id="821dc-128">You can use discards when you're interested in working with only a subset of the deconstructed values.</span></span> <span data-ttu-id="821dc-129">L’exemple suivant déconstruit un objet `Person` en quatre chaînes (le prénom, le nom, la ville et l’État), mais ignore le nom et l’État.</span><span class="sxs-lookup"><span data-stu-id="821dc-129">The following example deconstructs a `Person` object into four strings (the first and last names, the city, and the state), but discards the last name and the state.</span></span>

:::code language="csharp" source="snippets/discards/discard-class.cs" :::

<span data-ttu-id="821dc-130">Pour plus d’informations sur la déconstruction de types définis par l’utilisateur avec des éléments ignorés, consultez [Déconstruction de tuples et d’autres types](deconstruct.md#deconstructing-a-user-defined-type-with-discards).</span><span class="sxs-lookup"><span data-stu-id="821dc-130">For more information on deconstructing user-defined types with discards, see [Deconstructing tuples and other types](deconstruct.md#deconstructing-a-user-defined-type-with-discards).</span></span>

## <a name="pattern-matching-with-switch"></a><span data-ttu-id="821dc-131">Critères spéciaux avec « switch »</span><span class="sxs-lookup"><span data-stu-id="821dc-131">Pattern matching with \`switch</span></span>

<span data-ttu-id="821dc-132">Le *modèle d’abandon* peut être utilisé dans les critères spéciaux avec le mot clé [switch](language-reference/keywords/switch.md) .</span><span class="sxs-lookup"><span data-stu-id="821dc-132">The *discard pattern* can be used in pattern matching with the [switch](language-reference/keywords/switch.md) keyword.</span></span> <span data-ttu-id="821dc-133">Chaque expression correspond toujours au modèle d’élément ignoré.</span><span class="sxs-lookup"><span data-stu-id="821dc-133">Every expression always matches the discard pattern.</span></span> <span data-ttu-id="821dc-134">(Il peut être utilisé avec des expressions [is](language-reference/keywords/is.md) .</span><span class="sxs-lookup"><span data-stu-id="821dc-134">(It can be used with [is](language-reference/keywords/is.md) expressions.</span></span> <span data-ttu-id="821dc-135">Toutefois, cette utilisation est rare, car elle peut être supprimée sans changer sa signification).</span><span class="sxs-lookup"><span data-stu-id="821dc-135">However, that use is rare because the discard can be removed without changing its meaning).</span></span>

<span data-ttu-id="821dc-136">L’exemple suivant définit une méthode `ProvidesFormatInfo` qui utilise des instructions [is](language-reference/keywords/is.md) pour déterminer si un objet fournit une implémentation de <xref:System.IFormatProvider> et teste si l’objet est `null`.</span><span class="sxs-lookup"><span data-stu-id="821dc-136">The following example defines a `ProvidesFormatInfo` method that uses [is](language-reference/keywords/is.md) statements to determine whether an object provides an <xref:System.IFormatProvider> implementation and tests whether the object is `null`.</span></span> <span data-ttu-id="821dc-137">Il utilise également le modèle d’élément ignoré pour gérer les objets non null de n’importe quel autre type.</span><span class="sxs-lookup"><span data-stu-id="821dc-137">It also uses the discard pattern to handle non-null objects of any other type.</span></span>

:::code language="csharp" source="snippets/discards/discard-pattern2.cs" ID="DiscardSwitchExample" :::

## <a name="calls-to-methods-with-out-parameters"></a><span data-ttu-id="821dc-138">Appels à des méthodes avec des `out` paramètres</span><span class="sxs-lookup"><span data-stu-id="821dc-138">Calls to methods with `out` parameters</span></span>

<span data-ttu-id="821dc-139">Quand vous appelez la méthode `Deconstruct` pour déconstruire un type défini par l’utilisateur (une instance d’une classe, d’une structure ou d’une interface), vous pouvez ignorer les valeurs d’arguments `out` individuels.</span><span class="sxs-lookup"><span data-stu-id="821dc-139">When calling the `Deconstruct` method to deconstruct a user-defined type (an instance of a class, structure, or interface), you can discard the values of individual `out` arguments.</span></span> <span data-ttu-id="821dc-140">Toutefois, vous pouvez également ignorer la valeur des `out` arguments lors de l’appel d’une méthode avec un `out` paramètre.</span><span class="sxs-lookup"><span data-stu-id="821dc-140">But you can also discard the value of `out` arguments when calling any method with an `out` parameter.</span></span>

<span data-ttu-id="821dc-141">L’exemple suivant appelle la méthode [DateTime.TryParse (String, out DateTime)](<xref:System.DateTime.TryParse(System.String,System.DateTime@)>) pour déterminer si la représentation sous forme de chaîne d’une date est valide dans la culture actuelle.</span><span class="sxs-lookup"><span data-stu-id="821dc-141">The following example calls the [DateTime.TryParse(String, out DateTime)](<xref:System.DateTime.TryParse(System.String,System.DateTime@)>) method to determine whether the string representation of a date is valid in the current culture.</span></span> <span data-ttu-id="821dc-142">Comme l’exemple concerne ici uniquement la validation de la chaîne de date et pas son analyse pour extraire la date, l’argument `out` de la méthode est un élément ignoré.</span><span class="sxs-lookup"><span data-stu-id="821dc-142">Because the example is concerned only with validating the date string and not with parsing it to extract the date, the `out` argument to the method is a discard.</span></span>

:::code language="csharp" source="snippets/discards/discard-out1.cs" ID="DiscardOutParameter" :::

## <a name="a-standalone-discard"></a><span data-ttu-id="821dc-143">Élément ignoré autonome</span><span class="sxs-lookup"><span data-stu-id="821dc-143">A standalone discard</span></span>

<span data-ttu-id="821dc-144">Vous pouvez utiliser un élément ignoré autonome pour indiquer une variable que vous choisissez d’ignorer.</span><span class="sxs-lookup"><span data-stu-id="821dc-144">You can use a standalone discard to indicate any variable that you choose to ignore.</span></span> <span data-ttu-id="821dc-145">Une utilisation classique consiste à utiliser une assignation pour garantir qu’un argument n’a pas la valeur null.</span><span class="sxs-lookup"><span data-stu-id="821dc-145">One typical use is to use an assignment to ensure that an argument isn't null.</span></span> <span data-ttu-id="821dc-146">Le code suivant utilise un ignore pour forcer une assignation.</span><span class="sxs-lookup"><span data-stu-id="821dc-146">The following code uses a discard to force an assignment.</span></span> <span data-ttu-id="821dc-147">La partie droite de l’assignation utilise l' [opérateur de fusion Null](language-reference/operators/null-coalescing-operator.md) pour lever une <xref:System.ArgumentNullException?displayProperty=nameWithType> lorsque l’argument a la valeur `null` .</span><span class="sxs-lookup"><span data-stu-id="821dc-147">The right side of the assignment uses the [null coalescing operator](language-reference/operators/null-coalescing-operator.md) to throw an <xref:System.ArgumentNullException?displayProperty=nameWithType> when the argument is `null`.</span></span> <span data-ttu-id="821dc-148">Le code n’a pas besoin du résultat de l’assignation. il est donc ignoré.</span><span class="sxs-lookup"><span data-stu-id="821dc-148">The code doesn't need the result of the assignment, so it's discarded.</span></span> <span data-ttu-id="821dc-149">L’expression force une vérification de valeur null.</span><span class="sxs-lookup"><span data-stu-id="821dc-149">The expression forces a null check.</span></span> <span data-ttu-id="821dc-150">L’abandon clarifie votre intention : le résultat de l’assignation n’est pas nécessaire ou utilisé.</span><span class="sxs-lookup"><span data-stu-id="821dc-150">The discard clarifies your intent: the result of the assignment isn't needed or used.</span></span>

:::code language="csharp" source="snippets/discards/standalone-discard1.cs" ID="ArgNullCheck" :::

<span data-ttu-id="821dc-151">L’exemple suivant utilise un élément ignoré autonome pour ignorer l’objet <xref:System.Threading.Tasks.Task> retourné par une opération asynchrone.</span><span class="sxs-lookup"><span data-stu-id="821dc-151">The following example uses a standalone discard to ignore the <xref:System.Threading.Tasks.Task> object returned by an asynchronous operation.</span></span> <span data-ttu-id="821dc-152">L’assignation de la tâche a pour effet de supprimer l’exception levée par l’opération, car elle est sur le paragraphe de se terminer.</span><span class="sxs-lookup"><span data-stu-id="821dc-152">Assigning the task has the effect of suppressing the exception that the operation throws as it is about to complete.</span></span> <span data-ttu-id="821dc-153">L’objectif est clair : vous voulez ignorer le `Task` et ignorer les erreurs générées à partir de cette opération asynchrone.</span><span class="sxs-lookup"><span data-stu-id="821dc-153">It makes your intent clear: You want to discard the `Task`, and ignore any errors generated from that asynchronous operation.</span></span>

:::code language="csharp" source="snippets/discards/standalone-discard1.cs" ID="SnippetDiscardTask" :::

<span data-ttu-id="821dc-154">Sans affecter la tâche à un ignore, le code suivant génère un avertissement du compilateur :</span><span class="sxs-lookup"><span data-stu-id="821dc-154">Without assigning the task to a discard, the following code generates a compiler warning:</span></span>

:::code language="csharp" source="snippets/discards/standalone-discard1.cs" ID="SnippetNoDiscardTask" :::

> [!NOTE]
> <span data-ttu-id="821dc-155">Si vous exécutez l’un des deux exemples précédents à l’aide d’un débogueur, le débogueur arrêtera le programme quand l’exception sera levée.</span><span class="sxs-lookup"><span data-stu-id="821dc-155">If you run either of the preceding two samples using a debugger, the debugger will stop the program when the exception is thrown.</span></span> <span data-ttu-id="821dc-156">Si le débogueur n’est pas attaché, l’exception est ignorée silencieusement dans les deux cas.</span><span class="sxs-lookup"><span data-stu-id="821dc-156">Without a debugger attached, the exception is silently ignored in both cases.</span></span>

<span data-ttu-id="821dc-157">`_` est également un identificateur valide.</span><span class="sxs-lookup"><span data-stu-id="821dc-157">`_` is also a valid identifier.</span></span> <span data-ttu-id="821dc-158">Quand il est utilisé en dehors d’un contexte pris en charge, `_` est traité non pas comme élément ignoré, mais comme variable valide.</span><span class="sxs-lookup"><span data-stu-id="821dc-158">When used outside of a supported context, `_` is treated not as a discard but as a valid variable.</span></span> <span data-ttu-id="821dc-159">Si un identificateur nommé `_` est déjà dans l’étendue, l’utilisation de `_` comme élément ignoré autonome peut provoquer :</span><span class="sxs-lookup"><span data-stu-id="821dc-159">If an identifier named `_` is already in scope, the use of `_` as a standalone discard can result in:</span></span>

- <span data-ttu-id="821dc-160">Une modification accidentelle de la valeur de la variable `_` dans l’étendue en lui affectant la valeur de l’élément ignoré prévu.</span><span class="sxs-lookup"><span data-stu-id="821dc-160">Accidental modification of the value of the in-scope `_` variable by assigning it the value of the intended discard.</span></span> <span data-ttu-id="821dc-161">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="821dc-161">For example:</span></span>
   :::code language="csharp" source="snippets/discards/standalone-discard2.cs" ID="VariableIdentifier" :::
- <span data-ttu-id="821dc-162">Une erreur de compilateur pour violation de sécurité du type.</span><span class="sxs-lookup"><span data-stu-id="821dc-162">A compiler error for violating type safety.</span></span> <span data-ttu-id="821dc-163">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="821dc-163">For example:</span></span>
   :::code language="csharp" source="snippets/discards/standalone-discard2.cs" ID="VariableTypeInference" :::
- <span data-ttu-id="821dc-164">Erreur du compilateur CS0136 : « Impossible de déclarer une variable locale ou un paramètre nommé ‘\_’ dans cette portée, car ce nom est utilisé dans une portée locale englobante pour définir une variable locale ou un paramètre. »</span><span class="sxs-lookup"><span data-stu-id="821dc-164">Compiler error CS0136, "A local or parameter named '\_' cannot be declared in this scope because that name is used in an enclosing local scope to define a local or parameter."</span></span> <span data-ttu-id="821dc-165">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="821dc-165">For example:</span></span>
   :::code language="csharp" source="snippets/discards/standalone-discard2.cs" ID="CannotRedeclare" :::

## <a name="see-also"></a><span data-ttu-id="821dc-166">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="821dc-166">See also</span></span>

- [<span data-ttu-id="821dc-167">Déconstruction de tuples et d’autres types</span><span class="sxs-lookup"><span data-stu-id="821dc-167">Deconstructing tuples and other types</span></span>](deconstruct.md)
- [<span data-ttu-id="821dc-168">`is` mot</span><span class="sxs-lookup"><span data-stu-id="821dc-168">`is` keyword</span></span>](language-reference/keywords/is.md)
- [<span data-ttu-id="821dc-169">`switch` mot</span><span class="sxs-lookup"><span data-stu-id="821dc-169">`switch` keyword</span></span>](language-reference/keywords/switch.md)
