---
title: expression de commutateur - référence de C
description: Apprenez à utiliser l’expression de commutateur CMD pour l’appariement des modèles et d’autres introspections de données
ms.date: 03/19/2020
ms.openlocfilehash: 9e609bcea0f92f492b5f9b07840e47f75c1b71e4
ms.sourcegitcommit: 99b153b93bf94d0fecf7c7bcecb58ac424dfa47c
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/25/2020
ms.locfileid: "80249787"
---
# <a name="switch-expression-c-reference"></a><span data-ttu-id="82b5b-103">expression de commutateur (référence de C)</span><span class="sxs-lookup"><span data-stu-id="82b5b-103">switch expression (C# reference)</span></span>

<span data-ttu-id="82b5b-104">Cet article `switch` couvre l’expression, introduite dans C 8.0.</span><span class="sxs-lookup"><span data-stu-id="82b5b-104">This article covers the `switch` expression, introduced in C# 8.0.</span></span> <span data-ttu-id="82b5b-105">Pour plus `switch` d’informations sur la déclaration, voir l’article sur la [ `switch` déclaration](../keywords/switch.md) dans la section [des déclarations.](../keywords/index.md)</span><span class="sxs-lookup"><span data-stu-id="82b5b-105">For information on the `switch` statement, see the article on the [`switch` statement](../keywords/switch.md) in the [statements](../keywords/index.md) section.</span></span>

## <a name="basic-example"></a><span data-ttu-id="82b5b-106">Exemple de base</span><span class="sxs-lookup"><span data-stu-id="82b5b-106">Basic example</span></span>

<span data-ttu-id="82b5b-107">L’expression `switch` `switch`prévoit -comme la sémantique dans un contexte d’expression.</span><span class="sxs-lookup"><span data-stu-id="82b5b-107">The `switch` expression provides for `switch`-like semantics in an expression context.</span></span> <span data-ttu-id="82b5b-108">Il fournit une syntaxe concise lorsque les bras de commutation produisent une valeur.</span><span class="sxs-lookup"><span data-stu-id="82b5b-108">It provides a concise syntax when the switch arms produce a value.</span></span> <span data-ttu-id="82b5b-109">L’exemple suivant montre la structure d’une expression de commutateur.</span><span class="sxs-lookup"><span data-stu-id="82b5b-109">The following example shows the structure of a switch expression.</span></span> <span data-ttu-id="82b5b-110">Il traduit les `enum` valeurs d’une direction visuelle représentante dans une carte en ligne à la direction cardinale correspondante :</span><span class="sxs-lookup"><span data-stu-id="82b5b-110">It translates values from an `enum` representing visual directions in an online map to the corresponding cardinal direction:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetBasicStructure":::

<span data-ttu-id="82b5b-111">L’échantillon précédent montre les éléments de base d’une expression de commutateur :</span><span class="sxs-lookup"><span data-stu-id="82b5b-111">The preceding sample shows the basic elements of a switch expression:</span></span>

- <span data-ttu-id="82b5b-112">*L’expression de gamme*: `direction` L’exemple précédent utilise la variable comme expression de gamme.</span><span class="sxs-lookup"><span data-stu-id="82b5b-112">The *range expression*: The preceding example uses the variable `direction` as the range expression.</span></span>
- <span data-ttu-id="82b5b-113">Les *bras d’expression de commutateur*: Chaque bras d’expression de commutateur contient un *modèle,* un garde de *cas*optionnel, le `=>` jeton, et une *expression.*</span><span class="sxs-lookup"><span data-stu-id="82b5b-113">The *switch expression arms*: Each switch expression arm contains a *pattern*, an optional *case guard*, the `=>` token, and an *expression*.</span></span>

<span data-ttu-id="82b5b-114">Le résultat de l’expression *de commutateur* est la valeur de l’expression du premier *bras d’expression de commutateur* dont le *modèle* correspond à l’expression de *la gamme* et dont la garde *de cause,* si elle est présente, évalue à `true`.</span><span class="sxs-lookup"><span data-stu-id="82b5b-114">The result of the *switch expression* is the value of the expression of the first *switch expression arm* whose *pattern* matches the *range expression* and whose *cause guard*, if present, evaluates to `true`.</span></span> <span data-ttu-id="82b5b-115">*L’expression* `=>` à droite du jeton ne peut pas être une déclaration d’expression.</span><span class="sxs-lookup"><span data-stu-id="82b5b-115">The *expression* on the right of the `=>` token can't be an expression statement.</span></span>

<span data-ttu-id="82b5b-116">Les *bras d’expression de commutateur* sont évalués dans l’ordre de texte.</span><span class="sxs-lookup"><span data-stu-id="82b5b-116">The *switch expression arms* are evaluated in text order.</span></span> <span data-ttu-id="82b5b-117">Le compilateur émet une erreur lorsqu’un *bras d’expression de commutateur* inférieur ne peut pas être choisi parce qu’un bras *d’expression de commutateur* plus élevé correspond à toutes ses valeurs.</span><span class="sxs-lookup"><span data-stu-id="82b5b-117">The compiler issues an error when a lower *switch expression arm* can't be chosen because a higher *switch expression arm* matches all its values.</span></span>

## <a name="patterns-and-case-guards"></a><span data-ttu-id="82b5b-118">Modèles et gardiens de cas</span><span class="sxs-lookup"><span data-stu-id="82b5b-118">Patterns and case guards</span></span>

<span data-ttu-id="82b5b-119">De nombreux modèles sont soutenus dans les bras d’expression de commutateur.</span><span class="sxs-lookup"><span data-stu-id="82b5b-119">Many patterns are supported in switch expression arms.</span></span> <span data-ttu-id="82b5b-120">L’exemple précédent a utilisé un *modèle de valeur*.</span><span class="sxs-lookup"><span data-stu-id="82b5b-120">The preceding example used a *value pattern*.</span></span> <span data-ttu-id="82b5b-121">Un *modèle de valeur* compare l’expression de la gamme à une valeur.</span><span class="sxs-lookup"><span data-stu-id="82b5b-121">A *value pattern* compares the range expression to a value.</span></span> <span data-ttu-id="82b5b-122">Cette valeur doit être une constante de temps de compilation.</span><span class="sxs-lookup"><span data-stu-id="82b5b-122">That value must be a compile time constant.</span></span> <span data-ttu-id="82b5b-123">Le *modèle de type* compare l’expression de gamme à un type connu.</span><span class="sxs-lookup"><span data-stu-id="82b5b-123">The *type pattern* compares the range expression to a known type.</span></span> <span data-ttu-id="82b5b-124">L’exemple suivant récupère le troisième élément d’une séquence.</span><span class="sxs-lookup"><span data-stu-id="82b5b-124">The following example retrieves the third element from a sequence.</span></span> <span data-ttu-id="82b5b-125">Il utilise différentes méthodes basées sur le type de séquence :</span><span class="sxs-lookup"><span data-stu-id="82b5b-125">It uses different methods based on the type of the sequence:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetTypePattern":::

<span data-ttu-id="82b5b-126">Les modèles peuvent être récursifs, lorsqu’un modèle teste un type, et si ce type correspond, le modèle correspond à une ou plusieurs valeurs de propriété sur l’expression de la gamme.</span><span class="sxs-lookup"><span data-stu-id="82b5b-126">Patterns can be recursive, where a pattern tests a type, and if that type matches, the pattern matches one or more property values on the range expression.</span></span> <span data-ttu-id="82b5b-127">Vous pouvez utiliser des modèles récursifs pour étendre l’exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="82b5b-127">You can use recursive patterns to extend the preceding example.</span></span> <span data-ttu-id="82b5b-128">Vous ajoutez des bras d’expression de commutateur pour les tableaux qui ont moins de 3 éléments.</span><span class="sxs-lookup"><span data-stu-id="82b5b-128">You add switch expression arms for arrays that have fewer than 3 elements.</span></span> <span data-ttu-id="82b5b-129">Les modèles récursifs sont indiqués dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="82b5b-129">Recursive patterns are shown in the following example:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetRecursivePattern":::

<span data-ttu-id="82b5b-130">Les modèles récursifs peuvent examiner les propriétés de l’expression de la plage, mais ne peuvent pas exécuter le code arbitraire.</span><span class="sxs-lookup"><span data-stu-id="82b5b-130">Recursive patterns can examine properties of the range expression, but can't execute arbitrary code.</span></span> <span data-ttu-id="82b5b-131">Vous pouvez utiliser un garde `when` de *cas,* spécifié dans une clause, pour fournir des contrôles similaires pour d’autres types de séquences:</span><span class="sxs-lookup"><span data-stu-id="82b5b-131">You can use a *case guard*, specified in a `when` clause, to provide similar checks for other sequence types:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetGuardCase":::

<span data-ttu-id="82b5b-132">Enfin, vous pouvez `_` ajouter `null` le modèle et le modèle pour attraper les arguments qui ne sont pas traités par n’importe quel autre bras d’expression de commutateur.</span><span class="sxs-lookup"><span data-stu-id="82b5b-132">Finally, you can add the `_` pattern and the `null` pattern to catch arguments that aren't processed by any other switch expression arm.</span></span> <span data-ttu-id="82b5b-133">Cela rend l’expression de commutateur *exhaustive,* ce qui signifie que toute valeur possible de l’expression de la gamme est manipulée.</span><span class="sxs-lookup"><span data-stu-id="82b5b-133">That makes the switch expression *exhaustive*, meaning any possible value of the range expression is handled.</span></span> <span data-ttu-id="82b5b-134">L’exemple suivant ajoute ces bras d’expression :</span><span class="sxs-lookup"><span data-stu-id="82b5b-134">The following example adds those expression arms:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetExhaustive":::

<span data-ttu-id="82b5b-135">L’exemple précédent `null` ajoute un `IEnumerable<T>` modèle, et `_` change le modèle de type à un modèle.</span><span class="sxs-lookup"><span data-stu-id="82b5b-135">The preceding example adds a `null` pattern, and changes the `IEnumerable<T>` type pattern to a `_` pattern.</span></span> <span data-ttu-id="82b5b-136">Le `null` modèle fournit une vérification nulle comme un bras d’expression de commutateur.</span><span class="sxs-lookup"><span data-stu-id="82b5b-136">The `null` pattern provides a null check as a switch expression arm.</span></span> <span data-ttu-id="82b5b-137">L’expression de ce <xref:System.ArgumentNullException>bras jette un .</span><span class="sxs-lookup"><span data-stu-id="82b5b-137">The expression for that arm throws an <xref:System.ArgumentNullException>.</span></span> <span data-ttu-id="82b5b-138">Le `_` modèle correspond à toutes les entrées qui n’ont pas été égalées par les bras précédents.</span><span class="sxs-lookup"><span data-stu-id="82b5b-138">The `_` pattern matches all inputs that haven't been matched by previous arms.</span></span> <span data-ttu-id="82b5b-139">Il doit venir `null` après le chèque, ou il correspondrait aux `null` entrées.</span><span class="sxs-lookup"><span data-stu-id="82b5b-139">It must come after the `null` check, or it would match `null` inputs.</span></span>

<span data-ttu-id="82b5b-140">Vous pouvez en savoir plus dans la proposition de spécifications linguistiques C pour [les modèles récursifs](~/_csharplang/proposals/csharp-8.0/patterns.md#switch-expression).</span><span class="sxs-lookup"><span data-stu-id="82b5b-140">You can read more in the C# language spec proposal for [recursive patterns](~/_csharplang/proposals/csharp-8.0/patterns.md#switch-expression).</span></span>

## <a name="see-also"></a><span data-ttu-id="82b5b-141">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="82b5b-141">See also</span></span>

- [<span data-ttu-id="82b5b-142">Référence C#</span><span class="sxs-lookup"><span data-stu-id="82b5b-142">C# reference</span></span>](../index.md)
- [<span data-ttu-id="82b5b-143">Opérateurs CMD</span><span class="sxs-lookup"><span data-stu-id="82b5b-143">C# operators</span></span>](index.md)
- [<span data-ttu-id="82b5b-144">Critères spéciaux</span><span class="sxs-lookup"><span data-stu-id="82b5b-144">Pattern matching</span></span>](../../pattern-matching.md)
