---
title: Utiliser les types d’enregistrements-didacticiel C#
description: Découvrez comment utiliser les types d’enregistrements, créer des hiérarchies d’enregistrements et quand choisir des enregistrements sur des classes.
ms.date: 11/12/2020
ms.openlocfilehash: 8a2cb6966ab4f93432723fd6f82618efa86b26aa
ms.sourcegitcommit: 34968a61e9bac0f6be23ed6ffb837f52d2390c85
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/17/2020
ms.locfileid: "94688586"
---
# <a name="create-record-types"></a><span data-ttu-id="681ec-103">Créer des types d’enregistrements</span><span class="sxs-lookup"><span data-stu-id="681ec-103">Create record types</span></span>

<span data-ttu-id="681ec-104">C# 9 introduit les *enregistrements*, un nouveau type de référence que vous pouvez créer à la place des classes ou des structs.</span><span class="sxs-lookup"><span data-stu-id="681ec-104">C# 9 introduces *records*, a new reference type that you can create instead of classes or structs.</span></span> <span data-ttu-id="681ec-105">Les enregistrements sont distincts des classes dans les types d’enregistrements utilisant l' *égalité basée sur les valeurs*.</span><span class="sxs-lookup"><span data-stu-id="681ec-105">Records are distinct from classes in that record types use *value-based equality*.</span></span> <span data-ttu-id="681ec-106">Deux variables d’un type d’enregistrement sont égales si les définitions de type d’enregistrement sont identiques et, si pour chaque champ, les valeurs des deux enregistrements sont égales.</span><span class="sxs-lookup"><span data-stu-id="681ec-106">Two variables of a record type are equal if the record type definitions are identical, and if for every field, the values in both records are equal.</span></span> <span data-ttu-id="681ec-107">Deux variables d’un type de classe sont égales si les objets référencés sont du même type de classe et que les variables font référence au même objet.</span><span class="sxs-lookup"><span data-stu-id="681ec-107">Two variables of a class type are equal if the objects referred to are the same class type and the variables refer to the same object.</span></span> <span data-ttu-id="681ec-108">L’égalité basée sur la valeur implique d’autres fonctionnalités que vous souhaiterez probablement dans les types d’enregistrements.</span><span class="sxs-lookup"><span data-stu-id="681ec-108">Value-based equality implies other capabilities you'll probably want in record types.</span></span> <span data-ttu-id="681ec-109">Le compilateur génère un grand nombre de ces membres lorsque vous déclarez un `record` au lieu d’un `class` .</span><span class="sxs-lookup"><span data-stu-id="681ec-109">The compiler generates many of those members when you declare a `record` instead of a `class`.</span></span>

<span data-ttu-id="681ec-110">Ce didacticiel vous montre comment effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="681ec-110">In this tutorial, you'll learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="681ec-111">Déterminez si vous devez déclarer un `class` ou un `record` .</span><span class="sxs-lookup"><span data-stu-id="681ec-111">Decide if you should declare a `class` or a `record`.</span></span>
> - <span data-ttu-id="681ec-112">Déclarez les types d’enregistrements et les types d’enregistrements positionnels.</span><span class="sxs-lookup"><span data-stu-id="681ec-112">Declare record types and positional record types.</span></span>
> - <span data-ttu-id="681ec-113">Remplacez les méthodes générées par le compilateur dans les enregistrements par vos méthodes.</span><span class="sxs-lookup"><span data-stu-id="681ec-113">Substitute your methods for compiler generated methods in records.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="681ec-114">Prérequis</span><span class="sxs-lookup"><span data-stu-id="681ec-114">Prerequisites</span></span>

<span data-ttu-id="681ec-115">Vous devez configurer votre ordinateur pour exécuter .NET 5 ou une version ultérieure, y compris le compilateur C# 9,0 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="681ec-115">You’ll need to set up your machine to run .NET 5 or later, including the C# 9.0 or later compiler.</span></span> <span data-ttu-id="681ec-116">Le compilateur C# 9,0 est disponible à partir de [Visual Studio 2019 version 16,8](https://visualstudio.microsoft.com/vs) ou du [Kit de développement logiciel (SDK) .net 5,0](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="681ec-116">The C# 9.0 compiler is available starting with [Visual Studio 2019 version 16.8](https://visualstudio.microsoft.com/vs) or the [.NET 5.0 SDK](https://dotnet.microsoft.com/download).</span></span>

## <a name="characteristics-of-records"></a><span data-ttu-id="681ec-117">Caractéristiques des enregistrements</span><span class="sxs-lookup"><span data-stu-id="681ec-117">Characteristics of records</span></span>

<span data-ttu-id="681ec-118">Vous définissez un *enregistrement* en déclarant un type avec le `record` mot clé, au lieu du `class` `struct` mot clé ou.</span><span class="sxs-lookup"><span data-stu-id="681ec-118">You define a *record* by declaring a type with the `record` keyword, instead of the `class` or `struct` keyword.</span></span> <span data-ttu-id="681ec-119">Un enregistrement est un type référence et suit la sémantique d’égalité basée sur les valeurs.</span><span class="sxs-lookup"><span data-stu-id="681ec-119">A record is a reference type and follows value-based equality semantics.</span></span> <span data-ttu-id="681ec-120">Pour appliquer la sémantique de valeur, le compilateur génère plusieurs méthodes pour votre type d’enregistrement :</span><span class="sxs-lookup"><span data-stu-id="681ec-120">To enforce value semantics, the compiler generates several methods for your record type:</span></span>

- <span data-ttu-id="681ec-121">Substitution de <xref:System.Object.Equals(System.Object)?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="681ec-121">An override of <xref:System.Object.Equals(System.Object)?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="681ec-122">Méthode virtuelle `Equals` dont le paramètre est le type d’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="681ec-122">A virtual `Equals` method whose parameter is the record type.</span></span>
- <span data-ttu-id="681ec-123">Substitution de <xref:System.Object.GetHashCode?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="681ec-123">An override of <xref:System.Object.GetHashCode?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="681ec-124">Méthodes pour `operator ==` et `operator !=` .</span><span class="sxs-lookup"><span data-stu-id="681ec-124">Methods for `operator ==` and `operator !=`.</span></span>
- <span data-ttu-id="681ec-125">Les types d’enregistrements implémentent <xref:System.IEquatable%601?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="681ec-125">Record types implement <xref:System.IEquatable%601?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="681ec-126">En outre, les enregistrements fournissent une substitution de <xref:System.Object.ToString?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="681ec-126">In addition, records provide an override of <xref:System.Object.ToString?displayProperty=nameWithType>.</span></span> <span data-ttu-id="681ec-127">Le compilateur synthétise les méthodes pour afficher les enregistrements à l’aide de <xref:System.Object.ToString?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="681ec-127">The compiler synthesizes methods for displaying records using <xref:System.Object.ToString?displayProperty=nameWithType>.</span></span> <span data-ttu-id="681ec-128">Vous allez explorer ces membres au fur et à mesure que vous écrirez le code pour ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="681ec-128">You'll explore those members as you write the code for this tutorial.</span></span> <span data-ttu-id="681ec-129">Enregistre les `with` expressions de prise en charge pour permettre une mutation non destructrice des enregistrements.</span><span class="sxs-lookup"><span data-stu-id="681ec-129">Records support `with` expressions to enable non-destructive mutation of records.</span></span>

<span data-ttu-id="681ec-130">Vous pouvez également déclarer des *enregistrements positionnels* à l’aide d’une syntaxe plus concise.</span><span class="sxs-lookup"><span data-stu-id="681ec-130">You can also declare *positional records* using a more concise syntax.</span></span> <span data-ttu-id="681ec-131">Le compilateur synthétise davantage de méthodes lorsque vous déclarez des enregistrements positionnels :</span><span class="sxs-lookup"><span data-stu-id="681ec-131">The compiler synthesizes more methods for you when you declare positional records:</span></span>

- <span data-ttu-id="681ec-132">Constructeur principal dont les paramètres correspondent aux paramètres positionnels de la déclaration d’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="681ec-132">A primary constructor whose parameters match the positional parameters on the record declaration.</span></span>
- <span data-ttu-id="681ec-133">Propriétés public init-only pour chaque paramètre d’un constructeur principal.</span><span class="sxs-lookup"><span data-stu-id="681ec-133">Public init-only properties for each parameter of a primary constructor.</span></span>
- <span data-ttu-id="681ec-134">`Deconstruct`Méthode permettant d’extraire des propriétés de l’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="681ec-134">A `Deconstruct` method to extract properties from the record.</span></span>

## <a name="build-temperature-data"></a><span data-ttu-id="681ec-135">Données de température de build</span><span class="sxs-lookup"><span data-stu-id="681ec-135">Build temperature data</span></span>

<span data-ttu-id="681ec-136">Les données et les statistiques font partie des scénarios dans lesquels vous souhaiterez utiliser des enregistrements.</span><span class="sxs-lookup"><span data-stu-id="681ec-136">Data and statistics are among the scenarios where you'll want to use records.</span></span> <span data-ttu-id="681ec-137">Pour ce didacticiel, vous allez créer une application qui calcule le *degré de jours* pour différentes utilisations.</span><span class="sxs-lookup"><span data-stu-id="681ec-137">For this tutorial, you'll build an application that computes *degree days* for different uses.</span></span> <span data-ttu-id="681ec-138">Les *jours de degré* sont une mesure de chaleur (ou de l’absence de chaleur) sur une période de jours, de semaines ou de mois.</span><span class="sxs-lookup"><span data-stu-id="681ec-138">*Degree days* are a measure of heat (or lack of heat) over a period of days, weeks, or months.</span></span> <span data-ttu-id="681ec-139">Degré de suivi et prédiction de l’utilisation de l’énergie.</span><span class="sxs-lookup"><span data-stu-id="681ec-139">Degree days track and predict energy usage.</span></span> <span data-ttu-id="681ec-140">Plus de plus chaud jours signifie plus de climatisation, et plus de jours plus froids signifient une utilisation plus grande du four.</span><span class="sxs-lookup"><span data-stu-id="681ec-140">More hotter days means more air conditioning, and more colder days means more furnace usage.</span></span> <span data-ttu-id="681ec-141">Degree Days aident à gérer les populations d’usines.</span><span class="sxs-lookup"><span data-stu-id="681ec-141">Degree days help manage plant populations.</span></span> <span data-ttu-id="681ec-142">Les jours sont corrélés à la croissance de la plante au fur et à mesure que les saisons évoluent.</span><span class="sxs-lookup"><span data-stu-id="681ec-142">Degree days correlate to plant growth as the seasons change.</span></span> <span data-ttu-id="681ec-143">Le degree Days aide à effectuer le suivi des migrations animales pour les espèces qui voyagent pour correspondre au climat.</span><span class="sxs-lookup"><span data-stu-id="681ec-143">Degree days help track animal migrations for species that travel to match climate.</span></span>

<span data-ttu-id="681ec-144">La formule est basée sur la température moyenne d’un jour donné et sur une température de ligne de base.</span><span class="sxs-lookup"><span data-stu-id="681ec-144">The formula is based on the mean temperature on a given day and a baseline temperature.</span></span> <span data-ttu-id="681ec-145">Pour calculer le degré des jours dans le temps, vous avez besoin des températures haute et basse chaque jour pendant une période donnée.</span><span class="sxs-lookup"><span data-stu-id="681ec-145">To compute degree days over time, you'll need the high and low temperature each day for a period of time.</span></span> <span data-ttu-id="681ec-146">Commençons par créer une nouvelle application.</span><span class="sxs-lookup"><span data-stu-id="681ec-146">Let's start by creating a new application.</span></span> <span data-ttu-id="681ec-147">Créez une nouvelle application console.</span><span class="sxs-lookup"><span data-stu-id="681ec-147">Make a new console application.</span></span> <span data-ttu-id="681ec-148">Créez un nouveau type d’enregistrement dans un nouveau fichier nommé « DailyTemperature.cs » :</span><span class="sxs-lookup"><span data-stu-id="681ec-148">Create a new record type in a new file named "DailyTemperature.cs":</span></span>

:::code language="csharp" source="snippets/record-types/InterimSteps.cs" ID="DailyRecord":::

<span data-ttu-id="681ec-149">Le code précédent définit un *enregistrement positionnel*.</span><span class="sxs-lookup"><span data-stu-id="681ec-149">The preceding code defines a *positional record*.</span></span> <span data-ttu-id="681ec-150">Vous avez créé un type référence qui contient deux propriétés : `HighTemp` , et `LowTemp` .</span><span class="sxs-lookup"><span data-stu-id="681ec-150">You've created a reference type that contains two properties: `HighTemp`, and `LowTemp`.</span></span> <span data-ttu-id="681ec-151">Ces propriétés sont des *Propriétés init uniquement*, ce qui signifie qu’elles peuvent être définies dans le constructeur ou à l’aide d’un initialiseur de propriété.</span><span class="sxs-lookup"><span data-stu-id="681ec-151">Those properties are *init only properties*, meaning they can be set in the constructor or using a property initializer.</span></span> <span data-ttu-id="681ec-152">Le `DailyTemperature` type a également un *constructeur principal* qui a deux paramètres qui correspondent aux deux propriétés.</span><span class="sxs-lookup"><span data-stu-id="681ec-152">The `DailyTemperature` type also has a *primary constructor* that has two parameters that match the two properties.</span></span> <span data-ttu-id="681ec-153">Vous utilisez le constructeur principal pour initialiser un `DailyTemperature` enregistrement :</span><span class="sxs-lookup"><span data-stu-id="681ec-153">You use the primary constructor to initialize a `DailyTemperature` record:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="DeclareData":::

<span data-ttu-id="681ec-154">Vous pouvez ajouter vos propres propriétés ou méthodes à des enregistrements, y compris des enregistrements positionnels.</span><span class="sxs-lookup"><span data-stu-id="681ec-154">You can add your own properties or methods to records, including positional records.</span></span> <span data-ttu-id="681ec-155">Vous devez calculer la température moyenne pour chaque jour.</span><span class="sxs-lookup"><span data-stu-id="681ec-155">You'll need to compute the mean temperature for each day.</span></span> <span data-ttu-id="681ec-156">Vous pouvez ajouter cette propriété à l' `DailyTemperature` enregistrement :</span><span class="sxs-lookup"><span data-stu-id="681ec-156">You can add that property to the `DailyTemperature` record:</span></span>

:::code language="csharp" source="snippets/record-types/DailyTemperature.cs" ID="TemperatureRecord":::

<span data-ttu-id="681ec-157">Vérifions que vous pouvez utiliser ces données.</span><span class="sxs-lookup"><span data-stu-id="681ec-157">Let's make sure you can use this data.</span></span> <span data-ttu-id="681ec-158">Ajoutez le code suivant à votre méthode `Main` :</span><span class="sxs-lookup"><span data-stu-id="681ec-158">Add the following code to your `Main` method:</span></span>

```csharp
foreach (var item in data)
    Console.WriteLine(item);
```

<span data-ttu-id="681ec-159">Exécutez votre application. vous verrez une sortie similaire à l’affichage suivant (plusieurs lignes supprimées pour l’espace) :</span><span class="sxs-lookup"><span data-stu-id="681ec-159">Run your application, and you'll see output that looks similar to the following display (several rows removed for space):</span></span>

```dotnetcli
DailyTemperature { HighTemp = 57, LowTemp = 30, Mean = 43.5 }
DailyTemperature { HighTemp = 60, LowTemp = 35, Mean = 47.5 }


DailyTemperature { HighTemp = 80, LowTemp = 60, Mean = 70 }
DailyTemperature { HighTemp = 85, LowTemp = 66, Mean = 75.5 }
```

<span data-ttu-id="681ec-160">Le code précédent montre la sortie de la substitution de `ToString` synthétisé par le compilateur.</span><span class="sxs-lookup"><span data-stu-id="681ec-160">The preceding code shows the output from the override of `ToString` synthesized by the compiler.</span></span> <span data-ttu-id="681ec-161">Si vous préférez du texte différent, vous pouvez écrire votre propre version de `ToString` .</span><span class="sxs-lookup"><span data-stu-id="681ec-161">If you prefer different text, you can write your own version of `ToString`.</span></span> <span data-ttu-id="681ec-162">Cela empêche le compilateur de synthétiser une version pour vous.</span><span class="sxs-lookup"><span data-stu-id="681ec-162">That prevents the compiler from synthesizing a version for you.</span></span>

## <a name="compute-degree-days"></a><span data-ttu-id="681ec-163">Degré de calcul en jours</span><span class="sxs-lookup"><span data-stu-id="681ec-163">Compute degree days</span></span>

<span data-ttu-id="681ec-164">Pour calculer les jours, vous prenez la différence par rapport à une température de référence et la température moyenne d’un jour donné.</span><span class="sxs-lookup"><span data-stu-id="681ec-164">To compute degree days, you take the difference from a baseline temperature and the mean temperature on a given day.</span></span> <span data-ttu-id="681ec-165">Pour mesurer la chaleur dans le temps, vous supprimez tous les jours où la température moyenne est inférieure à la ligne de base.</span><span class="sxs-lookup"><span data-stu-id="681ec-165">To measure heat over time, you discard any days where the mean temperature is below the baseline.</span></span> <span data-ttu-id="681ec-166">Pour mesurer le froid au fil du temps, vous devez ignorer les jours où la température moyenne est supérieure à la ligne de base.</span><span class="sxs-lookup"><span data-stu-id="681ec-166">To measure cold over time, you discard any days where the mean temperature is above the baseline.</span></span> <span data-ttu-id="681ec-167">Par exemple, les États-Unis utilisent 65F comme base pour les jours de chauffage et de refroidissement.</span><span class="sxs-lookup"><span data-stu-id="681ec-167">For example, the U.S. uses 65F as the base for both heating  and cooling degree days.</span></span> <span data-ttu-id="681ec-168">Il s’agit de la température à laquelle aucun chauffage ou refroidissement n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="681ec-168">That's the temperature where no heating or cooling is needed.</span></span> <span data-ttu-id="681ec-169">Si un jour a une température moyenne de 70F, ce jour est de 5 jours de refroidissement et 0 jour de chauffage.</span><span class="sxs-lookup"><span data-stu-id="681ec-169">If a day has a mean temperature of 70F, that day is 5 cooling degree days and 0 heating degree days.</span></span> <span data-ttu-id="681ec-170">À l’inverse, si la température moyenne est 55F, ce jour correspond à 10 jours de chauffage et 0 jour de refroidissement.</span><span class="sxs-lookup"><span data-stu-id="681ec-170">Conversely, if the mean temperature is 55F, that day is 10 heating degree days and 0 cooling degree days.</span></span>

<span data-ttu-id="681ec-171">Vous pouvez exprimer ces formules sous la forme d’une petite hiérarchie de types d’enregistrements : un type de jour abstrait et deux types concrets pour le chauffage des jours et le degré de refroidissement.</span><span class="sxs-lookup"><span data-stu-id="681ec-171">You can express these formulas as a small hierarchy of record types: an abstract degree day type and two concrete types for heating degree days and cooling degree days.</span></span> <span data-ttu-id="681ec-172">Ces types peuvent également être des enregistrements positionnels.</span><span class="sxs-lookup"><span data-stu-id="681ec-172">These types can also be positional records.</span></span> <span data-ttu-id="681ec-173">Ils prennent une température de référence et une séquence d’enregistrements de température quotidiens comme arguments pour le constructeur principal :</span><span class="sxs-lookup"><span data-stu-id="681ec-173">They take a baseline temperature and a sequence of daily temperature records as arguments to the primary constructor:</span></span>

:::code language="csharp" source="snippets/record-types/InterimSteps.cs" ID="DegreeDaysRecords":::

<span data-ttu-id="681ec-174">L' `DegreeDays` enregistrement abstrait est la classe de base partagée pour les `HeatingDegreeDays` `CoolingDegreeDays` enregistrements et.</span><span class="sxs-lookup"><span data-stu-id="681ec-174">The abstract `DegreeDays` record is the shared base class for both the `HeatingDegreeDays` and `CoolingDegreeDays` records.</span></span> <span data-ttu-id="681ec-175">Les déclarations de constructeur principales sur les enregistrements dérivés montrent comment gérer l’initialisation des enregistrements de base.</span><span class="sxs-lookup"><span data-stu-id="681ec-175">The primary constructor declarations on the derived records show how to manage base record initialization.</span></span> <span data-ttu-id="681ec-176">Votre enregistrement dérivé déclare des paramètres pour tous les paramètres dans le constructeur principal d’enregistrement de base.</span><span class="sxs-lookup"><span data-stu-id="681ec-176">Your derived record declares parameters for all the parameters in the base record primary constructor.</span></span> <span data-ttu-id="681ec-177">L’enregistrement de base déclare et initialise ces propriétés.</span><span class="sxs-lookup"><span data-stu-id="681ec-177">The base record declares and initializes those properties.</span></span> <span data-ttu-id="681ec-178">L’enregistrement dérivé ne les masque pas, mais crée et initialise uniquement les propriétés des paramètres qui ne sont pas déclarés dans son enregistrement de base.</span><span class="sxs-lookup"><span data-stu-id="681ec-178">The derived record doesn't hide them, but only creates and initializes properties for parameters that aren't declared in its base record.</span></span> <span data-ttu-id="681ec-179">Dans cet exemple, les enregistrements dérivés n’ajoutent pas de nouveaux paramètres de constructeur principal.</span><span class="sxs-lookup"><span data-stu-id="681ec-179">In this example, the derived records don't add new primary constructor parameters.</span></span> <span data-ttu-id="681ec-180">Testez votre code en ajoutant le code suivant à votre `Main` méthode :</span><span class="sxs-lookup"><span data-stu-id="681ec-180">Test your code by adding the following code to your `Main` method:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="HeatingAndCooling":::

<span data-ttu-id="681ec-181">Vous obtenez une sortie similaire à l’affichage suivant :</span><span class="sxs-lookup"><span data-stu-id="681ec-181">You'll get output like the following display:</span></span>

```dotnetcli
HeatingDegreeDays { BaseTemperature = 65, TempRecords = record_types.DailyTemperature[], DegreeDays = 85 }
CoolingDegreeDays { BaseTemperature = 65, TempRecords = record_types.DailyTemperature[], DegreeDays = 71.5 }
```

## <a name="define-compiler-synthesized-methods"></a><span data-ttu-id="681ec-182">Définir des méthodes synthétisées par le compilateur</span><span class="sxs-lookup"><span data-stu-id="681ec-182">Define compiler-synthesized methods</span></span>

<span data-ttu-id="681ec-183">Votre code calcule le nombre correct de jours de chauffage et de refroidissement pendant cette période.</span><span class="sxs-lookup"><span data-stu-id="681ec-183">Your code calculates the correct number of heating and cooling degree days over that period of time.</span></span> <span data-ttu-id="681ec-184">Mais cet exemple montre pourquoi vous souhaiterez peut-être remplacer certaines des méthodes synthétisées pour les enregistrements.</span><span class="sxs-lookup"><span data-stu-id="681ec-184">But this example shows why you may want to replace some of the synthesized methods for records.</span></span> <span data-ttu-id="681ec-185">Vous pouvez déclarer votre propre version de l’une des méthodes synthétisées par le compilateur dans un type d’enregistrement, à l’exception de la méthode Clone.</span><span class="sxs-lookup"><span data-stu-id="681ec-185">You can declare your own version of any of the compiler-synthesized methods in a record type except the clone method.</span></span> <span data-ttu-id="681ec-186">La méthode Clone a un nom généré par le compilateur et vous ne pouvez pas fournir une implémentation différente.</span><span class="sxs-lookup"><span data-stu-id="681ec-186">The clone method has a compiler generated name and you cannot provide a different implementation.</span></span> <span data-ttu-id="681ec-187">Ces méthodes synthétisées incluent un constructeur de copie, les membres de l' <xref:System.IEquatable%601?displayProperty=nameWithType> interface, les tests d’égalité et d’inégalité, et <xref:System.Object.GetHashCode> .</span><span class="sxs-lookup"><span data-stu-id="681ec-187">These synthesized methods include a copy constructor, the members of the <xref:System.IEquatable%601?displayProperty=nameWithType> interface, equality and inequality tests, and <xref:System.Object.GetHashCode>.</span></span> <span data-ttu-id="681ec-188">À cet effet, vous allez synthétiser `PrintMembers` .</span><span class="sxs-lookup"><span data-stu-id="681ec-188">For this purpose, you'll synthesize `PrintMembers`.</span></span> <span data-ttu-id="681ec-189">Vous pouvez également déclarer votre propre `ToString` , mais `PrintMembers` offre une meilleure option pour les scénarios d’héritage.</span><span class="sxs-lookup"><span data-stu-id="681ec-189">You could also declare your own `ToString`, but `PrintMembers` provides a better option for inheritance scenarios.</span></span> <span data-ttu-id="681ec-190">Pour fournir votre propre version d’une méthode synthétisée, la signature doit correspondre à la méthode synthétisée.</span><span class="sxs-lookup"><span data-stu-id="681ec-190">To provide your own version of a synthesized method, the signature must match the synthesized method.</span></span>

<span data-ttu-id="681ec-191">L' `TempRecords` élément dans la sortie de la console n’est pas utile.</span><span class="sxs-lookup"><span data-stu-id="681ec-191">The `TempRecords` element in the console output isn't useful.</span></span> <span data-ttu-id="681ec-192">Elle affiche le type, mais rien d’autre.</span><span class="sxs-lookup"><span data-stu-id="681ec-192">It displays the type, but nothing else.</span></span> <span data-ttu-id="681ec-193">Vous pouvez modifier ce comportement en fournissant votre propre implémentation de la méthode synthétisée `PrintMembers` .</span><span class="sxs-lookup"><span data-stu-id="681ec-193">You can change this behavior by providing your own implementation of the synthesized `PrintMembers` method.</span></span> <span data-ttu-id="681ec-194">La signature dépend des modificateurs appliqués à la `record` déclaration :</span><span class="sxs-lookup"><span data-stu-id="681ec-194">The signature depends on modifiers applied to the `record` declaration:</span></span>

- <span data-ttu-id="681ec-195">Si un type d’enregistrement est `sealed` , la signature est `private bool PrintMembers(StringBuilder builder);`</span><span class="sxs-lookup"><span data-stu-id="681ec-195">If a record type is `sealed`, the signature is `private bool PrintMembers(StringBuilder builder);`</span></span>
- <span data-ttu-id="681ec-196">Si un type d’enregistrement n’est pas `sealed` et dérive de `object` (c’est-à-dire qu’il ne déclare pas d’enregistrement de base), la signature est `protected virtual bool PrintMembers(StringBuilder builder);`</span><span class="sxs-lookup"><span data-stu-id="681ec-196">If a record type isn't `sealed` and derives from `object` (that is, it doesn't declare a base record), the signature is `protected virtual bool PrintMembers(StringBuilder builder);`</span></span>
- <span data-ttu-id="681ec-197">Si un type d’enregistrement n’est pas `sealed` et qu’il dérive d’un autre enregistrement, la signature est `protected override bool PrintMembers(StringBuilder builder);`</span><span class="sxs-lookup"><span data-stu-id="681ec-197">If a record type isn't `sealed` and derives from another record, the signature is `protected override bool PrintMembers(StringBuilder builder);`</span></span>

<span data-ttu-id="681ec-198">Ces règles sont plus faciles à comprendre pour comprendre l’objectif de `PrintMembers` .</span><span class="sxs-lookup"><span data-stu-id="681ec-198">These rules are easiest to comprehend through understanding the purpose of `PrintMembers`.</span></span> <span data-ttu-id="681ec-199">`PrintMembers` ajoute à une chaîne des informations sur chaque propriété d’un type d’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="681ec-199">`PrintMembers` adds information about each property in a record type to a string.</span></span> <span data-ttu-id="681ec-200">Le contrat requiert des enregistrements de base pour ajouter leurs membres à l’affichage et suppose que les membres dérivés ajouteront leurs membres.</span><span class="sxs-lookup"><span data-stu-id="681ec-200">The contract requires base records to add their members to the display and assumes derived members will add their members.</span></span> <span data-ttu-id="681ec-201">Chaque type d’enregistrement synthétise un `ToString` remplacement qui ressemble à l’exemple suivant pour `HeatingDegreeDays` :</span><span class="sxs-lookup"><span data-stu-id="681ec-201">Each record type synthesizes a `ToString` override that looks similar to the following example for `HeatingDegreeDays`:</span></span>

```csharp
public override string ToString()
{
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.Append("HeatingDegreeDays");
    stringBuilder.Append(" { ");
    if (PrintMembers(stringBuilder))
    {
        stringBuilder.Append(" ");
    }
    stringBuilder.Append("}");
    return stringBuilder.ToString();
}
```

<span data-ttu-id="681ec-202">Vous déclarez une `PrintMembers` méthode dans l' `DegreeDays` enregistrement qui n’imprime pas le type de la collection :</span><span class="sxs-lookup"><span data-stu-id="681ec-202">You declare a `PrintMembers` method in the `DegreeDays` record that doesn't print the type of the collection:</span></span>

:::code language="csharp" source="snippets/record-types/DegreeDays.cs" ID="AddPrintMembers":::

<span data-ttu-id="681ec-203">La signature déclare une `virtual protected` méthode pour qu’elle corresponde à la version du compilateur.</span><span class="sxs-lookup"><span data-stu-id="681ec-203">The signature declares a `virtual protected` method to match the compiler's version.</span></span> <span data-ttu-id="681ec-204">Ne vous inquiétez pas si vous recevez les accesseurs erronés ; le langage applique la signature correcte.</span><span class="sxs-lookup"><span data-stu-id="681ec-204">Don't worry if you get the accessors wrong; the language enforces the correct signature.</span></span> <span data-ttu-id="681ec-205">Si vous oubliez les modificateurs corrects pour toute méthode synthétisée, le compilateur émet des avertissements ou des erreurs qui vous aident à obtenir la signature appropriée.</span><span class="sxs-lookup"><span data-stu-id="681ec-205">If you forget the correct modifiers for any synthesized method, the compiler issues warnings or errors that help you get the right signature.</span></span>

## <a name="non-destructive-mutation"></a><span data-ttu-id="681ec-206">Mutation non destructrice</span><span class="sxs-lookup"><span data-stu-id="681ec-206">Non-destructive mutation</span></span>

<span data-ttu-id="681ec-207">Les membres synthétisés dans un enregistrement positionnel ne modifient pas l’état de l’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="681ec-207">The synthesized members in a positional record don't modify the state of the record.</span></span> <span data-ttu-id="681ec-208">L’objectif est que vous pouvez créer plus facilement des enregistrements immuables.</span><span class="sxs-lookup"><span data-stu-id="681ec-208">The goal is that you can more easily create immutable records.</span></span> <span data-ttu-id="681ec-209">Examinez à nouveau les déclarations précédentes pour `HeatingDegreeDays` et `CoolingDegreeDays` .</span><span class="sxs-lookup"><span data-stu-id="681ec-209">Look again at the preceding declarations for `HeatingDegreeDays` and `CoolingDegreeDays`.</span></span> <span data-ttu-id="681ec-210">Les membres ajoutés effectuent des calculs sur les valeurs de l’enregistrement, mais ne changent pas d’État.</span><span class="sxs-lookup"><span data-stu-id="681ec-210">The members added perform computations on the values for the record, but don't mutate state.</span></span> <span data-ttu-id="681ec-211">Les enregistrements positionnels facilitent la création de types référence immuables.</span><span class="sxs-lookup"><span data-stu-id="681ec-211">Positional records make it easier for you to create immutable reference types.</span></span>

<span data-ttu-id="681ec-212">La création de types référence immuables signifie que vous souhaiterez utiliser une mutation non destructrice.</span><span class="sxs-lookup"><span data-stu-id="681ec-212">Creating immutable reference types means you'll want to use non-destructive mutation.</span></span> <span data-ttu-id="681ec-213">Vous créez des instances d’enregistrement similaires aux instances d’enregistrement existantes à l’aide d' [ `with` expressions](../../language-reference/operators/with-expression.md).</span><span class="sxs-lookup"><span data-stu-id="681ec-213">You  create new record instances that are similar to existing record instances using [`with` expressions](../../language-reference/operators/with-expression.md).</span></span> <span data-ttu-id="681ec-214">Ces expressions sont une construction de copie avec des affectations supplémentaires qui modifient la copie.</span><span class="sxs-lookup"><span data-stu-id="681ec-214">These expressions are a copy construction with additional assignments that modify the copy.</span></span> <span data-ttu-id="681ec-215">Le résultat est une nouvelle instance d’enregistrement dans laquelle chaque propriété a été copiée à partir de l’enregistrement existant et éventuellement modifiée.</span><span class="sxs-lookup"><span data-stu-id="681ec-215">The result is a new record instance where each property has been copied from the existing record and optionally modified.</span></span> <span data-ttu-id="681ec-216">L’enregistrement d’origine est inchangé.</span><span class="sxs-lookup"><span data-stu-id="681ec-216">The original record is unchanged.</span></span>

<span data-ttu-id="681ec-217">Nous allons ajouter quelques fonctionnalités à votre programme qui illustrent des `with` expressions.</span><span class="sxs-lookup"><span data-stu-id="681ec-217">Let's add a couple features to your program that demonstrate `with` expressions.</span></span> <span data-ttu-id="681ec-218">Tout d’abord, nous allons créer un nouvel enregistrement pour calculer le nombre de jours croissants à l’aide des mêmes données.</span><span class="sxs-lookup"><span data-stu-id="681ec-218">First, let's create a new record to compute growing degree days using the same data.</span></span> <span data-ttu-id="681ec-219">Le nombre de *jours croissants* utilise généralement 41F comme ligne de base et mesure les températures au-dessus de la ligne de base.</span><span class="sxs-lookup"><span data-stu-id="681ec-219">*Growing degree days* typically uses 41F as the baseline and measures temperatures above the baseline.</span></span> <span data-ttu-id="681ec-220">Pour utiliser les mêmes données, vous pouvez créer un nouvel enregistrement similaire à `coolingDegreeDays` , mais avec une température de base différente :</span><span class="sxs-lookup"><span data-stu-id="681ec-220">To use the same data, you can create a new record that is similar to the `coolingDegreeDays`, but with a different base temperature:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="GrowingDegreeDays":::

<span data-ttu-id="681ec-221">Vous pouvez comparer le nombre de degrés calculés aux nombres générés à l’aide d’une température de référence supérieure.</span><span class="sxs-lookup"><span data-stu-id="681ec-221">You can compare the number of degrees computed to the numbers generated with a higher baseline temperature.</span></span> <span data-ttu-id="681ec-222">N’oubliez pas que les enregistrements sont des *types référence* et que ces copies sont des copies superficielles.</span><span class="sxs-lookup"><span data-stu-id="681ec-222">Remember that records are *reference types* and these copies are shallow copies.</span></span> <span data-ttu-id="681ec-223">Le tableau des données n’est pas copié, mais les deux enregistrements font référence aux mêmes données.</span><span class="sxs-lookup"><span data-stu-id="681ec-223">The array for the data isn't copied, but both records refer to the same data.</span></span> <span data-ttu-id="681ec-224">Ce fait est un avantage dans un autre scénario.</span><span class="sxs-lookup"><span data-stu-id="681ec-224">That fact is an advantage in one other scenario.</span></span> <span data-ttu-id="681ec-225">Pour des jours de plus en bout, il est utile d’effectuer le suivi du total des 5 jours précédents.</span><span class="sxs-lookup"><span data-stu-id="681ec-225">For growing degree days, it's useful to keep track of the total for the previous 5 days.</span></span> <span data-ttu-id="681ec-226">Vous pouvez créer des enregistrements avec différentes données sources à l’aide d' `with` expressions.</span><span class="sxs-lookup"><span data-stu-id="681ec-226">You can create new records with different source data using `with` expressions.</span></span> <span data-ttu-id="681ec-227">Le code suivant génère une collection de ces accumulations, puis affiche les valeurs :</span><span class="sxs-lookup"><span data-stu-id="681ec-227">The following code builds a collection of these accumulations, then displays the values:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="RunningFiveDayTotal":::

<span data-ttu-id="681ec-228">Vous pouvez également utiliser `with` des expressions pour créer des copies d’enregistrements.</span><span class="sxs-lookup"><span data-stu-id="681ec-228">You can also use `with` expressions to create copies of records.</span></span> <span data-ttu-id="681ec-229">Ne spécifiez aucune propriété entre les accolades de l' `with` expression.</span><span class="sxs-lookup"><span data-stu-id="681ec-229">Don't specify any properties between the braces for the `with` expression.</span></span> <span data-ttu-id="681ec-230">Cela signifie créer une copie et ne pas modifier les propriétés :</span><span class="sxs-lookup"><span data-stu-id="681ec-230">That means create a copy, and don't change any properties:</span></span>

```csharp
var growingDegreeDaysCopy = growingDegreeDays with { };
```

<span data-ttu-id="681ec-231">Exécutez l’application finie pour afficher les résultats.</span><span class="sxs-lookup"><span data-stu-id="681ec-231">Run the finished application to see the results.</span></span>

## <a name="summary"></a><span data-ttu-id="681ec-232">Résumé</span><span class="sxs-lookup"><span data-stu-id="681ec-232">Summary</span></span>

<span data-ttu-id="681ec-233">Ce didacticiel a présenté plusieurs aspects des enregistrements.</span><span class="sxs-lookup"><span data-stu-id="681ec-233">This tutorial showed several aspects of records.</span></span> <span data-ttu-id="681ec-234">Les enregistrements fournissent une syntaxe concise pour les types de référence où l’utilisation fondamentale est le stockage des données.</span><span class="sxs-lookup"><span data-stu-id="681ec-234">Records provide concise syntax for reference types where the fundamental use is storing data.</span></span> <span data-ttu-id="681ec-235">Pour les classes orientées objet, l’utilisation fondamentale est la définition des responsabilités.</span><span class="sxs-lookup"><span data-stu-id="681ec-235">For object-oriented classes, the fundamental use is defining responsibilities.</span></span> <span data-ttu-id="681ec-236">Ce didacticiel se concentre sur les *enregistrements positionnels*, où vous pouvez utiliser une syntaxe concise pour déclarer les propriétés d’initialisation uniquement pour un enregistrement.</span><span class="sxs-lookup"><span data-stu-id="681ec-236">This tutorial focused on *positional records*, where you can use a concise syntax to declare the init-only properties for a record.</span></span> <span data-ttu-id="681ec-237">Le compilateur synthétise plusieurs membres de l’enregistrement pour copier et comparer des enregistrements.</span><span class="sxs-lookup"><span data-stu-id="681ec-237">The compiler synthesizes several members of the record for copying and comparing records.</span></span> <span data-ttu-id="681ec-238">Vous pouvez ajouter tous les autres membres dont vous avez besoin pour vos types d’enregistrements.</span><span class="sxs-lookup"><span data-stu-id="681ec-238">You can add any other members you need for your record types.</span></span> <span data-ttu-id="681ec-239">Vous pouvez créer des types d’enregistrements immuables sachant qu’aucun des membres générés par le compilateur ne fera passer l’État.</span><span class="sxs-lookup"><span data-stu-id="681ec-239">You can create immutable record types knowing that none of the compiler-generated members would mutate state.</span></span> <span data-ttu-id="681ec-240">Pour les enregistrements positionnels, les expressions facilitent la `with` prise en charge de la mutation non destructrice.</span><span class="sxs-lookup"><span data-stu-id="681ec-240">For positional records, `with` expressions make it easy to support non-destructive mutation.</span></span>

<span data-ttu-id="681ec-241">Les enregistrements ajoutent une autre façon de définir des types.</span><span class="sxs-lookup"><span data-stu-id="681ec-241">Records add another way to define types.</span></span> <span data-ttu-id="681ec-242">`class`Les définitions vous permettent de créer des hiérarchies orientées objet qui se concentrent sur les responsabilités et le comportement des objets.</span><span class="sxs-lookup"><span data-stu-id="681ec-242">You use `class` definitions to create object-oriented hierarchies that focus on the responsibilities and behavior of objects.</span></span> <span data-ttu-id="681ec-243">Vous créez `struct` des types pour les structures de données qui stockent les données et sont suffisamment petits pour être copiés efficacement.</span><span class="sxs-lookup"><span data-stu-id="681ec-243">You create `struct` types for data structures that store data and are small enough to copy efficiently.</span></span> <span data-ttu-id="681ec-244">Vous créez des enregistrements lorsque vous souhaitez une comparaison et une égalité basée sur les valeurs, que vous ne voulez pas copier de valeurs et que vous souhaitez utiliser des variables de référence.</span><span class="sxs-lookup"><span data-stu-id="681ec-244">You create records when you want value-based equality and comparison, don't want to copy values, and want to use reference variables.</span></span>

<span data-ttu-id="681ec-245">Vous pouvez apprendre la description complète des enregistrements en lisant la [spécification de type d’enregistrement proposé](~/_csharplang/proposals/csharp-9.0/records.md).</span><span class="sxs-lookup"><span data-stu-id="681ec-245">You can learn the complete description of records by reading the [proposed record type specification](~/_csharplang/proposals/csharp-9.0/records.md).</span></span>
