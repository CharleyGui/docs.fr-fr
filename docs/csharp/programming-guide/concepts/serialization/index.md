---
title: Sérialisation (C#)
ms.date: 01/02/2020
ms.openlocfilehash: b2532ccf281fdfaa951d56675066f1e239f9f480
ms.sourcegitcommit: a241301495a84cc8c64fe972330d16edd619868b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/01/2020
ms.locfileid: "84241979"
---
# <a name="serialization-c"></a><span data-ttu-id="e1a37-102">Sérialisation (C#)</span><span class="sxs-lookup"><span data-stu-id="e1a37-102">Serialization (C#)</span></span>

<span data-ttu-id="e1a37-103">La sérialisation est le processus de conversion d’un objet en flux d’octets pour stocker l’objet ou le transmettre à la mémoire, une base de données ou un fichier.</span><span class="sxs-lookup"><span data-stu-id="e1a37-103">Serialization is the process of converting an object into a stream of bytes to store the object or transmit it to memory, a database, or a file.</span></span> <span data-ttu-id="e1a37-104">Son principal objectif est d’enregistrer l’état d’un objet afin de pouvoir le recréer si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="e1a37-104">Its main purpose is to save the state of an object in order to be able to recreate it when needed.</span></span> <span data-ttu-id="e1a37-105">Le processus inverse est appelé désérialisation.</span><span class="sxs-lookup"><span data-stu-id="e1a37-105">The reverse process is called deserialization.</span></span>

## <a name="how-serialization-works"></a><span data-ttu-id="e1a37-106">Fonctionnement de la sérialisation</span><span class="sxs-lookup"><span data-stu-id="e1a37-106">How serialization works</span></span>

<span data-ttu-id="e1a37-107">Cette illustration montre le processus global de sérialisation :</span><span class="sxs-lookup"><span data-stu-id="e1a37-107">This illustration shows the overall process of serialization:</span></span>

![Graphique sérialisation](./media/index/serialization-process.gif)

<span data-ttu-id="e1a37-109">L’objet est sérialisé en un flux qui contient les données.</span><span class="sxs-lookup"><span data-stu-id="e1a37-109">The object is serialized to a stream that carries the data.</span></span> <span data-ttu-id="e1a37-110">Le flux peut également contenir des informations sur le type de l’objet, telles que sa version, sa culture et son nom d’assembly.</span><span class="sxs-lookup"><span data-stu-id="e1a37-110">The stream may also have information about the object's type, such as its version, culture, and assembly name.</span></span> <span data-ttu-id="e1a37-111">À partir de ce flux, l’objet peut être stocké dans une base de données, un fichier ou une mémoire.</span><span class="sxs-lookup"><span data-stu-id="e1a37-111">From that stream, the object can be stored in a database, a file, or memory.</span></span>

### <a name="uses-for-serialization"></a><span data-ttu-id="e1a37-112">Usages de la sérialisation</span><span class="sxs-lookup"><span data-stu-id="e1a37-112">Uses for serialization</span></span>

<span data-ttu-id="e1a37-113">La sérialisation permet au développeur d’enregistrer l’état d’un objet et de le recréer en fonction des besoins, en fournissant le stockage des objets ainsi que l’échange de données.</span><span class="sxs-lookup"><span data-stu-id="e1a37-113">Serialization allows the developer to save the state of an object and re-create it as needed, providing storage of objects as well as data exchange.</span></span> <span data-ttu-id="e1a37-114">Par le biais de la sérialisation, un développeur peut effectuer des actions telles que :</span><span class="sxs-lookup"><span data-stu-id="e1a37-114">Through serialization, a developer can perform actions such as:</span></span>

* <span data-ttu-id="e1a37-115">Envoi de l’objet à une application distante à l’aide d’un service Web</span><span class="sxs-lookup"><span data-stu-id="e1a37-115">Sending the object to a remote application by using a web service</span></span>
* <span data-ttu-id="e1a37-116">Passage d’un objet d’un domaine à un autre</span><span class="sxs-lookup"><span data-stu-id="e1a37-116">Passing an object from one domain to another</span></span>
* <span data-ttu-id="e1a37-117">Passage d’un objet via un pare-feu sous forme de chaîne JSON ou XML</span><span class="sxs-lookup"><span data-stu-id="e1a37-117">Passing an object through a firewall as a JSON or XML string</span></span>
* <span data-ttu-id="e1a37-118">Gestion des informations relatives à la sécurité ou aux utilisateurs entre les applications</span><span class="sxs-lookup"><span data-stu-id="e1a37-118">Maintaining security or user-specific information across applications</span></span>

## <a name="json-serialization"></a><span data-ttu-id="e1a37-119">Sérialisation JSON</span><span class="sxs-lookup"><span data-stu-id="e1a37-119">JSON serialization</span></span>

<span data-ttu-id="e1a37-120">L' <xref:System.Text.Json> espace de noms contient des classes pour la sérialisation et la désérialisation JavaScript Object Notation (JSON).</span><span class="sxs-lookup"><span data-stu-id="e1a37-120">The <xref:System.Text.Json> namespace contains classes for JavaScript Object Notation (JSON) serialization and deserialization.</span></span> <span data-ttu-id="e1a37-121">JSON est une norme ouverte qui est couramment utilisée pour partager des données sur le Web.</span><span class="sxs-lookup"><span data-stu-id="e1a37-121">JSON is an open standard that is commonly used for sharing data across the web.</span></span>

<span data-ttu-id="e1a37-122">La sérialisation JSON sérialise les propriétés publiques d’un objet dans une chaîne, un tableau d’octets ou un flux conforme à [la spécification JSON RFC 8259](https://tools.ietf.org/html/rfc8259).</span><span class="sxs-lookup"><span data-stu-id="e1a37-122">JSON serialization serializes the public properties of an object into a string, byte array, or stream that conforms to [the RFC 8259 JSON specification](https://tools.ietf.org/html/rfc8259).</span></span> <span data-ttu-id="e1a37-123">Pour contrôler la manière dont <xref:System.Text.Json.JsonSerializer> sérialise ou désérialise une instance de la classe :</span><span class="sxs-lookup"><span data-stu-id="e1a37-123">To control the way <xref:System.Text.Json.JsonSerializer> serializes or deserializes an instance of the class:</span></span>

* <span data-ttu-id="e1a37-124">Utiliser un <xref:System.Text.Json.JsonSerializerOptions> objet</span><span class="sxs-lookup"><span data-stu-id="e1a37-124">Use a <xref:System.Text.Json.JsonSerializerOptions> object</span></span>
* <span data-ttu-id="e1a37-125">Appliquer des attributs de l' <xref:System.Text.Json.Serialization> espace de noms à des classes ou des propriétés</span><span class="sxs-lookup"><span data-stu-id="e1a37-125">Apply attributes from the <xref:System.Text.Json.Serialization> namespace to classes or properties</span></span>
* [<span data-ttu-id="e1a37-126">Implémenter des convertisseurs personnalisés</span><span class="sxs-lookup"><span data-stu-id="e1a37-126">Implement custom converters</span></span>](../../../../standard/serialization/system-text-json-converters-how-to.md)

## <a name="binary-and-xml-serialization"></a><span data-ttu-id="e1a37-127">Sérialisation binaire et XML</span><span class="sxs-lookup"><span data-stu-id="e1a37-127">Binary and XML serialization</span></span>

<span data-ttu-id="e1a37-128">L' <xref:System.Runtime.Serialization> espace de noms contient des classes pour la sérialisation et la désérialisation binaires et XML.</span><span class="sxs-lookup"><span data-stu-id="e1a37-128">The <xref:System.Runtime.Serialization> namespace contains classes for binary and XML serialization and deserialization.</span></span>

<span data-ttu-id="e1a37-129">La sérialisation binaire utilise l’encodage binaire pour produire une sérialisation compacte qui peut servir notamment aux flux réseau par socket ou stockage.</span><span class="sxs-lookup"><span data-stu-id="e1a37-129">Binary serialization uses binary encoding to produce compact serialization for uses such as storage or socket-based network streams.</span></span> <span data-ttu-id="e1a37-130">Dans la sérialisation binaire, tous les membres, y compris en lecture seule, sont sérialisés et les performances sont améliorées.</span><span class="sxs-lookup"><span data-stu-id="e1a37-130">In binary serialization, all members, even members that are read-only, are serialized, and performance is enhanced.</span></span>

<span data-ttu-id="e1a37-131">La sérialisation XML sérialise les champs et les propriétés publics d’un objet ou les paramètres et valeurs renvoyés de méthodes, en un flux XML conforme à un document XSD (langage de définition de schéma XML) spécifique.</span><span class="sxs-lookup"><span data-stu-id="e1a37-131">XML serialization serializes the public fields and properties of an object, or the parameters and return values of methods, into an XML stream that conforms to a specific XML Schema definition language (XSD) document.</span></span> <span data-ttu-id="e1a37-132">La sérialisation XML permet d’obtenir des classes fortement typées avec des propriétés et des champs publics convertis au format XML.</span><span class="sxs-lookup"><span data-stu-id="e1a37-132">XML serialization results in strongly typed classes with public properties and fields that are converted to XML.</span></span> <span data-ttu-id="e1a37-133"><xref:System.Xml.Serialization>contient des classes pour sérialiser et désérialiser du code XML.</span><span class="sxs-lookup"><span data-stu-id="e1a37-133"><xref:System.Xml.Serialization> contains classes for serializing and deserializing XML.</span></span> <span data-ttu-id="e1a37-134">Vous pouvez appliquer des attributs à des classes et des membres de classes pour contrôler la manière dont <xref:System.Xml.Serialization.XmlSerializer> sérialise ou désérialise une instance de la classe.</span><span class="sxs-lookup"><span data-stu-id="e1a37-134">You apply attributes to classes and class members to control the way the <xref:System.Xml.Serialization.XmlSerializer> serializes or deserializes an instance of the class.</span></span>

### <a name="making-an-object-serializable"></a><span data-ttu-id="e1a37-135">Rendre un objet sérialisable</span><span class="sxs-lookup"><span data-stu-id="e1a37-135">Making an object serializable</span></span>

<span data-ttu-id="e1a37-136">Pour la sérialisation binaire ou XML, vous avez besoin des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="e1a37-136">For binary or XML serialization, you need:</span></span>

* <span data-ttu-id="e1a37-137">Objet à sérialiser.</span><span class="sxs-lookup"><span data-stu-id="e1a37-137">The object to be serialized</span></span>
* <span data-ttu-id="e1a37-138">Flux destiné à contenir l’objet sérialisé</span><span class="sxs-lookup"><span data-stu-id="e1a37-138">A stream to contain the serialized object</span></span>
* <span data-ttu-id="e1a37-139">Une <xref:System.Runtime.Serialization.Formatter?displayProperty=fullName> instance</span><span class="sxs-lookup"><span data-stu-id="e1a37-139">A <xref:System.Runtime.Serialization.Formatter?displayProperty=fullName> instance</span></span>

<span data-ttu-id="e1a37-140">Appliquez l' <xref:System.SerializableAttribute> attribut à un type pour indiquer que les instances du type peuvent être sérialisées.</span><span class="sxs-lookup"><span data-stu-id="e1a37-140">Apply the <xref:System.SerializableAttribute> attribute to a type to indicate that instances of the type can be serialized.</span></span> <span data-ttu-id="e1a37-141">Une exception est levée si vous tentez une sérialisation alors que le type n’a pas l’attribut <xref:System.SerializableAttribute>.</span><span class="sxs-lookup"><span data-stu-id="e1a37-141">An  exception is thrown if you attempt to serialize but the type doesn't have the <xref:System.SerializableAttribute> attribute.</span></span>

<span data-ttu-id="e1a37-142">Pour empêcher la sérialisation d’un champ, appliquez l' <xref:System.NonSerializedAttribute> attribut.</span><span class="sxs-lookup"><span data-stu-id="e1a37-142">To prevent a field from being serialized, apply the <xref:System.NonSerializedAttribute> attribute.</span></span> <span data-ttu-id="e1a37-143">Si un champ d’un type sérialisable contient un pointeur, un handle ou une autre structure de données propre à un environnement particulier et qu’il n’est pas possible de le reconstituer de manière significative dans un autre environnement, vous pouvez le rendre non sérialisable.</span><span class="sxs-lookup"><span data-stu-id="e1a37-143">If a field of a serializable type contains a pointer, a handle, or some other data structure that is specific to a particular environment, and the field cannot be meaningfully reconstituted in a different environment, then you may want to make it nonserializable.</span></span>

<span data-ttu-id="e1a37-144">Si une classe sérialisée contient des références à des objets d’autres classes marqués par <xref:System.SerializableAttribute>, ces objets seront également sérialisés.</span><span class="sxs-lookup"><span data-stu-id="e1a37-144">If a serialized class contains references to objects of other classes that are marked <xref:System.SerializableAttribute>, those objects will also be serialized.</span></span>

### <a name="basic-and-custom-serialization"></a><span data-ttu-id="e1a37-145">Sérialisation de base et sérialisation personnalisée</span><span class="sxs-lookup"><span data-stu-id="e1a37-145">Basic and custom serialization</span></span>

<span data-ttu-id="e1a37-146">La sérialisation binaire et XML peut être effectuée de deux manières, de base et personnalisée.</span><span class="sxs-lookup"><span data-stu-id="e1a37-146">Binary and XML serialization can be performed in two ways, basic and custom.</span></span>

<span data-ttu-id="e1a37-147">La sérialisation de base utilise .NET pour sérialiser automatiquement l’objet.</span><span class="sxs-lookup"><span data-stu-id="e1a37-147">Basic serialization uses .NET to automatically serialize the object.</span></span> <span data-ttu-id="e1a37-148">La seule exigence est que l’attribut est appliqué à la classe <xref:System.SerializableAttribute> .</span><span class="sxs-lookup"><span data-stu-id="e1a37-148">The only requirement is that the class has the <xref:System.SerializableAttribute> attribute applied.</span></span> <span data-ttu-id="e1a37-149"><xref:System.NonSerializedAttribute> peut être utilisé pour empêcher que certains champs ne soient sérialisés.</span><span class="sxs-lookup"><span data-stu-id="e1a37-149">The <xref:System.NonSerializedAttribute> can be used to keep specific fields from being serialized.</span></span>

<span data-ttu-id="e1a37-150">Quand vous utilisez la sérialisation de base, le contrôle de version des objets peut créer des problèmes.</span><span class="sxs-lookup"><span data-stu-id="e1a37-150">When you use basic serialization, the versioning of objects may create problems.</span></span> <span data-ttu-id="e1a37-151">Vous pouvez utiliser la sérialisation personnalisée quand les problèmes de contrôle de version sont importants.</span><span class="sxs-lookup"><span data-stu-id="e1a37-151">You would use custom serialization when versioning issues are important.</span></span> <span data-ttu-id="e1a37-152">La sérialisation de base est le moyen le plus simple d’effectuer la sérialisation, mais elle ne fournit pas beaucoup de contrôle sur le processus.</span><span class="sxs-lookup"><span data-stu-id="e1a37-152">Basic serialization is the easiest way to perform serialization, but it does not provide much control over the process.</span></span>

<span data-ttu-id="e1a37-153">Dans la sérialisation personnalisée, vous pouvez spécifier exactement quels objets sont sérialisés et de quelle façon.</span><span class="sxs-lookup"><span data-stu-id="e1a37-153">In custom serialization, you can specify exactly which objects will be serialized and how it will be done.</span></span> <span data-ttu-id="e1a37-154">La classe doit être marquée <xref:System.SerializableAttribute> et implémenter l’interface <xref:System.Runtime.Serialization.ISerializable>.</span><span class="sxs-lookup"><span data-stu-id="e1a37-154">The class must be marked <xref:System.SerializableAttribute> and implement the <xref:System.Runtime.Serialization.ISerializable> interface.</span></span> <span data-ttu-id="e1a37-155">Si vous souhaitez également que votre objet soit désérialisé de manière personnalisée, utilisez un constructeur personnalisé.</span><span class="sxs-lookup"><span data-stu-id="e1a37-155">If you want your object to be deserialized in a custom manner as well, use a custom constructor.</span></span>

## <a name="designer-serialization"></a><span data-ttu-id="e1a37-156">Sérialisation du concepteur</span><span class="sxs-lookup"><span data-stu-id="e1a37-156">Designer serialization</span></span>

<span data-ttu-id="e1a37-157">La sérialisation du concepteur est une forme particulière de sérialisation qui implique le type de persistance d’objets associé aux outils de développement.</span><span class="sxs-lookup"><span data-stu-id="e1a37-157">Designer serialization is a special form of serialization that involves the kind of object persistence associated with development tools.</span></span> <span data-ttu-id="e1a37-158">La sérialisation du concepteur est le processus qui consiste à convertir un graphique d’objet en un fichier source utilisable ultérieurement pour récupérer le graphique d’objet.</span><span class="sxs-lookup"><span data-stu-id="e1a37-158">Designer serialization is the process of converting an object graph into a source file that can later be used to recover the object graph.</span></span> <span data-ttu-id="e1a37-159">Un fichier source peut contenir du code, des balises ou même des tables SQL.</span><span class="sxs-lookup"><span data-stu-id="e1a37-159">A source file can contain code, markup, or even SQL table information.</span></span>

## <a name="related-topics-and-examples"></a><a name="BKMK_RelatedTopics"></a> <span data-ttu-id="e1a37-160">Rubriques connexes et exemples</span><span class="sxs-lookup"><span data-stu-id="e1a37-160">Related Topics and Examples</span></span>  

<span data-ttu-id="e1a37-161">[Vue d’ensemble de System. Text. JSON](../../../../standard/serialization/system-text-json-overview.md) Montre comment récupérer la `System.Text.Json` bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="e1a37-161">[System.Text.Json overview](../../../../standard/serialization/system-text-json-overview.md) Shows how to get the `System.Text.Json` library.</span></span>

<span data-ttu-id="e1a37-162">[Comment sérialiser et désérialiser JSON dans .net](../../../../standard/serialization/system-text-json-how-to.md).</span><span class="sxs-lookup"><span data-stu-id="e1a37-162">[How to serialize and deserialize JSON in .NET](../../../../standard/serialization/system-text-json-how-to.md).</span></span>
<span data-ttu-id="e1a37-163">Montre comment lire et écrire des données d’objet dans et à partir de JSON à l’aide de la <xref:System.Text.Json.JsonSerializer> classe.</span><span class="sxs-lookup"><span data-stu-id="e1a37-163">Shows how to read and write object data to and from JSON using the <xref:System.Text.Json.JsonSerializer> class.</span></span>

[<span data-ttu-id="e1a37-164">Procédure pas à pas : persistance d’un objet dans Visual Studio (C#)</span><span class="sxs-lookup"><span data-stu-id="e1a37-164">Walkthrough: Persisting an Object in Visual Studio (C#)</span></span>](walkthrough-persisting-an-object-in-visual-studio.md)  
<span data-ttu-id="e1a37-165">Montre comment utiliser la sérialisation pour rendre les données d’un objet persistantes entre les instances, afin de stocker des valeurs et de les récupérer lors de la prochaine instanciation de l’objet.</span><span class="sxs-lookup"><span data-stu-id="e1a37-165">Demonstrates how serialization can be used to persist an object's data between instances, allowing you to store values and retrieve them the next time the object is instantiated.</span></span>

[<span data-ttu-id="e1a37-166">Comment lire des données d’objet à partir d’un fichier XML (C#)</span><span class="sxs-lookup"><span data-stu-id="e1a37-166">How to read object data from an XML file (C#)</span></span>](how-to-read-object-data-from-an-xml-file.md)  
<span data-ttu-id="e1a37-167">Montre comment lire les données d’objet écrites précédemment dans un fichier XML en utilisant la classe <xref:System.Xml.Serialization.XmlSerializer>.</span><span class="sxs-lookup"><span data-stu-id="e1a37-167">Shows how to read object data that was previously written to an XML file using the <xref:System.Xml.Serialization.XmlSerializer> class.</span></span>

[<span data-ttu-id="e1a37-168">Comment écrire des données d’objet dans un fichier XML (C#)</span><span class="sxs-lookup"><span data-stu-id="e1a37-168">How to write object data to an XML file (C#)</span></span>](how-to-write-object-data-to-an-xml-file.md)  
<span data-ttu-id="e1a37-169">Montre comment écrire l’objet depuis une classe vers un fichier XML en utilisant la classe <xref:System.Xml.Serialization.XmlSerializer>.</span><span class="sxs-lookup"><span data-stu-id="e1a37-169">Shows how to write the object from a class to an XML file using the <xref:System.Xml.Serialization.XmlSerializer> class.</span></span>
