---
title: Mettre à niveau les API avec des attributs pour définir des attentes null
description: Cet article explique les motivations et les techniques permettant d’ajouter des attributs descriptifs pour décrire l’État null des arguments et les valeurs de retour des API
ms.date: 07/31/2019
ms.openlocfilehash: b6c6be213cb920459e5f1adbe3ee822ff6ddbf33
ms.sourcegitcommit: 8a0fe8a2227af612f8b8941bdb8b19d6268748e7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/03/2019
ms.locfileid: "71834196"
---
# <a name="update-libraries-to-use-nullable-reference-types-and-communicate-nullable-rules-to-callers"></a><span data-ttu-id="5d9cc-103">Mettre à jour les bibliothèques pour utiliser des types référence Nullable et communiquer des règles Nullable aux appelants.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-103">Update libraries to use nullable reference types and communicate nullable rules to callers.</span></span>

<span data-ttu-id="5d9cc-104">L’ajout de [types de référence Nullable](nullable-references.md) signifie que vous pouvez déclarer si une valeur `null` est autorisée ou non pour chaque variable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-104">The addition of [nullable reference types](nullable-references.md) means you can declare whether or not a `null` value is allowed or expected for every variable.</span></span> <span data-ttu-id="5d9cc-105">Cela offre une excellente expérience lorsque vous écrivez du code.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-105">That provides a great experience as you write code.</span></span> <span data-ttu-id="5d9cc-106">Vous recevez des avertissements si une variable qui n’accepte pas les valeurs NULL peut avoir la valeur `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-106">You get warnings if a non-nullable variable might be set to `null`.</span></span> <span data-ttu-id="5d9cc-107">Vous recevez des avertissements si une variable Nullable n’est pas vérifiée par null avant d’être déréférencée.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-107">You get warnings if a nullable variable isn't null-checked before you dereference it.</span></span> <span data-ttu-id="5d9cc-108">La mise à jour de vos bibliothèques peut prendre du temps, mais les avantages le justifient.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-108">Updating your libraries can take time, but the payoffs are worth it.</span></span> <span data-ttu-id="5d9cc-109">Plus d’informations que vous fournissez au compilateur sur le *moment où* une valeur `null` est autorisée ou interdite, les meilleurs avertissements que les utilisateurs de votre API obtiendront.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-109">The more information you provide to the compiler about *when* a `null` value is allowed or prohibited, the better warnings users of your API will get.</span></span> <span data-ttu-id="5d9cc-110">Commençons par un exemple familier.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-110">Let's start with a familiar example.</span></span> <span data-ttu-id="5d9cc-111">Imaginez que votre bibliothèque possède l’API suivante pour récupérer une chaîne de ressource :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-111">Imagine your library has the following API to retrieve a resource string:</span></span>

```csharp
bool TryGetMessage(string key, out string message)
```

<span data-ttu-id="5d9cc-112">L’exemple précédent suit le modèle `Try*` familier dans .NET.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-112">The preceding example follows the familiar `Try*` pattern in .NET.</span></span> <span data-ttu-id="5d9cc-113">Il existe deux arguments de référence pour cette API : le `key` et le paramètre `message`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-113">There are two reference arguments for this API: the `key` and the `message` parameter.</span></span> <span data-ttu-id="5d9cc-114">Cette API comporte les règles suivantes relatives à la valeur null de ces arguments :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-114">This API has the following rules relating to the nullness of these arguments:</span></span>

- <span data-ttu-id="5d9cc-115">Les appelants ne doivent pas passer `null` comme argument pour `key`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-115">Callers shouldn't pass `null` as the argument for `key`.</span></span>
- <span data-ttu-id="5d9cc-116">Les appelants peuvent passer une variable dont la valeur est `null` comme argument pour `message`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-116">Callers can pass a variable whose value is `null` as the argument for `message`.</span></span>
- <span data-ttu-id="5d9cc-117">Si la méthode `TryGetMessage` retourne `true`, la valeur de `message` n’est pas null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-117">If the `TryGetMessage` method returns `true`, the value of `message` isn't null.</span></span> <span data-ttu-id="5d9cc-118">Si la valeur de retour est `false,`, la valeur de `message` (et son état null) est null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-118">If the return value is `false,` the value of `message` (and its null state) is null.</span></span>

<span data-ttu-id="5d9cc-119">La règle pour `key` peut être entièrement exprimée par le type de variable : `key` doit être un type de référence qui n’accepte pas les valeurs NULL.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-119">The rule for `key` can be completely expressed by the variable type: `key` should be a non-nullable reference type.</span></span> <span data-ttu-id="5d9cc-120">Le paramètre `message` est plus complexe.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-120">The `message` parameter is more complex.</span></span> <span data-ttu-id="5d9cc-121">Elle autorise `null` comme argument, mais garantit que, en cas de réussite, cet argument `out` n’est pas null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-121">It allows `null` as the argument, but guarantees that, on success, that `out` argument isn't null.</span></span> <span data-ttu-id="5d9cc-122">Pour ces scénarios, vous avez besoin d’un vocabulaire plus riche pour décrire les attentes.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-122">For these scenarios, you need a richer vocabulary to describe the expectations.</span></span>

<span data-ttu-id="5d9cc-123">La mise à jour de votre bibliothèque pour les références Nullable nécessite plus que la désarrosage `?` sur certaines variables et certains noms de types.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-123">Updating your library for nullable references requires more than sprinkling `?` on some of the variables and type names.</span></span> <span data-ttu-id="5d9cc-124">L’exemple précédent montre que vous devez examiner vos API et prendre en compte vos attentes pour chaque argument d’entrée.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-124">The preceding example shows that you need to examine your APIs and consider your expectations for each input argument.</span></span> <span data-ttu-id="5d9cc-125">Examinez les garanties pour la valeur de retour, ainsi que tous les arguments `out` ou `ref` sur le retour de la méthode.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-125">Consider the guarantees for the return value, and any `out` or `ref` arguments upon the method's return.</span></span> <span data-ttu-id="5d9cc-126">Ensuite, communiquez ces règles au compilateur et le compilateur fournira des avertissements quand les appelants ne respectent pas ces règles.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-126">Then communicate those rules to the compiler, and the compiler will provide warnings when callers don't abide by those rules.</span></span>

<span data-ttu-id="5d9cc-127">Ce travail prend du temps.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-127">This work takes time.</span></span> <span data-ttu-id="5d9cc-128">Commençons par des stratégies pour rendre votre bibliothèque ou votre application prenant en charge les valeurs NULL, tout en équilibrant d’autres exigences et livrables.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-128">Let's start with strategies to make your library or application nullable-aware, while balancing other requirements and deliverables.</span></span> <span data-ttu-id="5d9cc-129">Vous verrez comment équilibrer le développement en cours et activer les types de référence Nullable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-129">You'll see how to balance ongoing development enabling nullable reference types.</span></span> <span data-ttu-id="5d9cc-130">Vous découvrirez les défis liés aux définitions de type générique.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-130">You'll learn challenges for generic type definitions.</span></span> <span data-ttu-id="5d9cc-131">Vous apprendrez à appliquer des attributs pour décrire des conditions préalables et postérieures à des API individuelles.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-131">You'll learn to apply attributes to describe pre- and post-conditions on individual APIs.</span></span>

## <a name="choose-a-nullable-strategy"></a><span data-ttu-id="5d9cc-132">Choisir une stratégie Nullable</span><span class="sxs-lookup"><span data-stu-id="5d9cc-132">Choose a nullable strategy</span></span>

<span data-ttu-id="5d9cc-133">Le premier choix est si les types de référence Nullable doivent être activés ou désactivés par défaut.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-133">The first choice is whether nullable reference types should be on or off by default.</span></span> <span data-ttu-id="5d9cc-134">Vous avez deux stratégies :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-134">You have two strategies:</span></span>

- <span data-ttu-id="5d9cc-135">Activez les types de référence Nullable pour l’ensemble du projet et désactivez-le dans le code qui n’est pas prêt.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-135">Enable nullable reference types for the entire project, and disable it in code that's not ready.</span></span>
- <span data-ttu-id="5d9cc-136">Activez uniquement les types référence Nullable pour le code qui a été annoté pour les types référence Nullable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-136">Only enable nullable reference types for code that's been annotated for nullable reference types.</span></span>

<span data-ttu-id="5d9cc-137">La première stratégie fonctionne mieux lorsque vous ajoutez d’autres fonctionnalités à la bibliothèque lors de sa mise à jour pour les types de référence Nullable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-137">The first strategy works best when you're adding other features to the library as you update it for nullable reference types.</span></span> <span data-ttu-id="5d9cc-138">Tout nouveau développement prend en charge les valeurs NULL.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-138">All new development is nullable aware.</span></span> <span data-ttu-id="5d9cc-139">Lorsque vous mettez à jour le code existant, vous activez les types de référence Nullable dans ces classes.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-139">As you update existing code, you enable nullable reference types in those classes.</span></span>

<span data-ttu-id="5d9cc-140">Après cette première stratégie, vous procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-140">Following this first strategy, you do the following:</span></span>

1. <span data-ttu-id="5d9cc-141">Activez les types Nullable pour l’ensemble du projet en ajoutant l’élément `<Nullable>enable</Nullable>` à vos fichiers *csproj* .</span><span class="sxs-lookup"><span data-stu-id="5d9cc-141">Enable nullable types for the entire project by adding the `<Nullable>enable</Nullable>` element to your *csproj* files.</span></span> 
1. <span data-ttu-id="5d9cc-142">Ajoutez le pragma `#nullable disable` à chaque fichier source de votre projet.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-142">Add the `#nullable disable` pragma to every source file in your project.</span></span> 
1. <span data-ttu-id="5d9cc-143">Lorsque vous travaillez sur chaque fichier, supprimez le pragma et résolvez tous les avertissements.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-143">As you work on each file, remove the pragma and address any warnings.</span></span>

<span data-ttu-id="5d9cc-144">Cette première stratégie a plus de travail initial pour ajouter le pragma à chaque fichier.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-144">This first strategy has more up-front work to add the pragma to every file.</span></span> <span data-ttu-id="5d9cc-145">L’avantage est que chaque nouveau fichier de code ajouté au projet sera activé pour la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-145">The advantage is that every new code file added to the project will be nullable enabled.</span></span> <span data-ttu-id="5d9cc-146">Tout nouveau travail prend en charge les valeurs null ; seul le code existant doit être mis à jour.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-146">Any new work will be nullable aware; only existing code must be updated.</span></span>

<span data-ttu-id="5d9cc-147">La deuxième stratégie fonctionne mieux si la bibliothèque est généralement stable, et l’objectif principal du développement est d’adopter des types de référence Nullable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-147">The second strategy works better if the library is generally stable, and the main focus of the development is to adopt nullable reference types.</span></span> <span data-ttu-id="5d9cc-148">Vous activez les types de référence Nullable quand vous annotez des API.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-148">You turn on nullable reference types as you annotate APIs.</span></span> <span data-ttu-id="5d9cc-149">Lorsque vous avez terminé, vous activez les types de référence Nullable pour l’ensemble du projet.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-149">When you've finished, you enable nullable reference types for the entire project.</span></span>

<span data-ttu-id="5d9cc-150">Après cette seconde stratégie, vous effectuez les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-150">Following this second strategy you do the following:</span></span>

1. <span data-ttu-id="5d9cc-151">Ajoutez le pragma `#nullable enable` au fichier que vous souhaitez rendre compatible avec la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-151">Add the `#nullable enable` pragma to the file you want to make nullable aware.</span></span>
1. <span data-ttu-id="5d9cc-152">Résolvez tous les avertissements.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-152">Address any warnings.</span></span>
1. <span data-ttu-id="5d9cc-153">Poursuivez ces deux premières étapes jusqu’à ce que vous ayez pris en charge la valeur null de la bibliothèque entière.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-153">Continue these first two steps until you've made the entire library nullable aware.</span></span>
1. <span data-ttu-id="5d9cc-154">Activez les types Nullable pour l’ensemble du projet en ajoutant l’élément `<Nullable>enable</Nullable>` à vos fichiers *csproj* .</span><span class="sxs-lookup"><span data-stu-id="5d9cc-154">Enable nullable types for the entire project by adding the `<Nullable>enable</Nullable>` element to your *csproj* files.</span></span> 
1. <span data-ttu-id="5d9cc-155">Supprimez les pragmas `#nullable enable`, car ils ne sont plus nécessaires.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-155">Remove the `#nullable enable` pragmas, as they're no longer needed.</span></span>

<span data-ttu-id="5d9cc-156">Cette deuxième stratégie a moins de travail avant.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-156">This second strategy has less work up-front.</span></span> <span data-ttu-id="5d9cc-157">Le compromis est que la première tâche lorsque vous créez un nouveau fichier consiste à ajouter le pragma et à le rendre compatible avec la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-157">The tradeoff is that the first task when you create a new file is to add the pragma and make it nullable aware.</span></span> <span data-ttu-id="5d9cc-158">Si des développeurs de votre équipe oublient, ce nouveau code est désormais dans le backlog de travail pour rendre tout le code prenant en charge la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-158">If any developers on your team forget, that new code is now in the backlog of work to make all code nullable aware.</span></span>

<span data-ttu-id="5d9cc-159">Les stratégies que vous choisissez dépendent de la quantité de développement actif dans votre projet.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-159">Which of these strategies you pick depends on how much active development is taking place in your project.</span></span> <span data-ttu-id="5d9cc-160">Plus votre projet est mature et stable, plus la seconde stratégie est performante.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-160">The more mature and stable your project, the better the second strategy.</span></span> <span data-ttu-id="5d9cc-161">Plus vous développez de fonctionnalités, mieux la première stratégie.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-161">The more features being developed, the better the first strategy.</span></span>

## <a name="should-nullable-warnings-introduce-breaking-changes"></a><span data-ttu-id="5d9cc-162">Les avertissements de type Nullable introduisent-ils des modifications avec rupture ?</span><span class="sxs-lookup"><span data-stu-id="5d9cc-162">Should nullable warnings introduce breaking changes?</span></span>

<span data-ttu-id="5d9cc-163">Avant d’activer les types de référence Nullable, les variables sont considérées comme *Nullable oublie*.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-163">Before you enable nullable reference types, variables are considered *nullable oblivious*.</span></span> <span data-ttu-id="5d9cc-164">Une fois que vous activez les types de référence Nullable, toutes ces variables ne peuvent pas avoir la valeur *null*.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-164">Once you enable nullable reference types, all those variables are *non-nullable*.</span></span> <span data-ttu-id="5d9cc-165">Le compilateur émet des avertissements si ces variables ne sont pas initialisées à des valeurs non null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-165">The compiler will issue warnings if those variables aren't initialized to non-null values.</span></span>

<span data-ttu-id="5d9cc-166">Une autre source probable d’avertissements est celle des valeurs de retour lorsque la valeur n’a pas été initialisée.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-166">Another likely source of warnings is return values when the value hasn't been initialized.</span></span>

<span data-ttu-id="5d9cc-167">La première étape dans la résolution des avertissements du compilateur consiste à utiliser des annotations `?` sur des types de paramètres et de retour pour indiquer quand les arguments ou les valeurs de retour peuvent être null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-167">The first step in addressing the compiler warnings is to use `?` annotations on parameter and return types to indicate when arguments or return values may be null.</span></span> <span data-ttu-id="5d9cc-168">Lorsque les variables de référence ne doivent pas avoir la valeur null, la déclaration d’origine est correcte.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-168">When reference variables must not be null, the original declaration is correct.</span></span> <span data-ttu-id="5d9cc-169">Dans ce cas, votre objectif n’est pas simplement de corriger les avertissements.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-169">As you do this, your goal isn't just to fix warnings.</span></span> <span data-ttu-id="5d9cc-170">L’objectif le plus important est de faire en sorte que le compilateur comprenne votre intention pour les valeurs NULL potentielles.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-170">The more important goal is to make the compiler understand your intent for potential null values.</span></span> <span data-ttu-id="5d9cc-171">Lorsque vous examinez les avertissements, vous atteignez votre prochaine décision majeure pour votre bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-171">As you examine the warnings, you reach your next major decision for your library.</span></span> <span data-ttu-id="5d9cc-172">Voulez-vous envisager de modifier les signatures d’API pour communiquer plus clairement votre intention de conception ?</span><span class="sxs-lookup"><span data-stu-id="5d9cc-172">Do you want to consider modifying API signatures to more clearly communicate your design intent?</span></span> <span data-ttu-id="5d9cc-173">Une meilleure signature d’API pour la méthode `TryGetMessage` examinée précédemment peut être :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-173">A better API signature for the `TryGetMessage` method examined earlier could be:</span></span>

```csharp
string? TryGetMessage(string key);
```

<span data-ttu-id="5d9cc-174">La valeur de retour indique la réussite ou l’échec et transporte la valeur si la valeur a été trouvée.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-174">The return value indicates success or failure, and carries the value if the value was found.</span></span> <span data-ttu-id="5d9cc-175">Dans de nombreux cas, la modification des signatures d’API peut améliorer la façon dont elles communiquent les valeurs NULL.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-175">In many cases, changing API signatures can improve how they communicate null values.</span></span>

<span data-ttu-id="5d9cc-176">Toutefois, pour les bibliothèques publiques ou les bibliothèques avec des bases d’utilisateurs volumineuses, vous préférerez peut-être ne pas introduire de modifications de signature d’API.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-176">However, for public libraries, or libraries with large user bases, you may prefer not introducing any API signature changes.</span></span> <span data-ttu-id="5d9cc-177">Dans ces cas-là, et d’autres modèles courants, vous pouvez appliquer des attributs pour définir plus clairement quand un argument ou une valeur de retour peut être `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-177">For those cases, and other common patterns, you can apply attributes to more clearly define when an argument or return value may be `null`.</span></span> <span data-ttu-id="5d9cc-178">Si vous envisagez de modifier la surface de votre API, vous constaterez sans doute que les annotations de type ne suffisent pas pour décrire les valeurs `null` pour les arguments ou les valeurs de retour.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-178">Whether or not you consider changing the surface of your API, you'll likely find that type annotations alone aren't sufficient for describing `null` values for arguments or return values.</span></span> <span data-ttu-id="5d9cc-179">Dans ces instances, vous pouvez appliquer des attributs pour décrire plus clairement une API.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-179">In those instances, you can apply attributes to more clearly describe an API.</span></span> 

## <a name="attributes-extend-type-annotations"></a><span data-ttu-id="5d9cc-180">Les attributs étendent les annotations de type</span><span class="sxs-lookup"><span data-stu-id="5d9cc-180">Attributes extend type annotations</span></span>

<span data-ttu-id="5d9cc-181">Plusieurs attributs ont été ajoutés pour exprimer des informations supplémentaires sur l’État null des variables.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-181">Several attributes have been added to express additional information about the null state of variables.</span></span> <span data-ttu-id="5d9cc-182">Tout le code que vous C# avez écrit avant 8 introduit les types de référence Nullable était *null oublie*.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-182">All code you wrote before C# 8 introduced nullable reference types was *null oblivious*.</span></span> <span data-ttu-id="5d9cc-183">Cela signifie que toute variable de type référence peut avoir la valeur null, mais que les vérifications de valeur NULL ne sont pas requises.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-183">That means any reference type variable may be null, but null checks aren't required.</span></span> <span data-ttu-id="5d9cc-184">Une fois que votre code prend en *charge les valeurs NULL*, ces règles changent.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-184">Once your code is *nullable aware*, those rules change.</span></span> <span data-ttu-id="5d9cc-185">Les types référence ne doivent jamais être la valeur `null`, et les types référence Nullable doivent être vérifiés par rapport à `null` avant d’être déréférencés.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-185">Reference types should never be the `null` value, and nullable reference types must be checked against `null` before being dereferenced.</span></span>

<span data-ttu-id="5d9cc-186">Les règles de vos API sont probablement plus compliquées, comme vous l’avez vu dans le scénario d’API `TryGetValue`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-186">The rules for your APIs are likely more complicated, as you saw with the `TryGetValue` API scenario.</span></span> <span data-ttu-id="5d9cc-187">La plupart de vos API ont des règles plus complexes pour les cas où les variables peuvent ou ne peuvent pas être `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-187">Many of your APIs have more complex rules for when variables can or can't be `null`.</span></span> <span data-ttu-id="5d9cc-188">Dans ce cas, vous allez utiliser l’un des attributs suivants pour exprimer ces règles :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-188">In these cases, you'll use one of the following attributes to express those rules:</span></span>

- <span data-ttu-id="5d9cc-189">[AllowNull a](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Un argument d’entrée n’acceptant pas les valeurs NULL peut avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-189">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="5d9cc-190">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Un argument d’entrée Nullable ne doit jamais avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-190">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>
- <span data-ttu-id="5d9cc-191">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Une valeur de retour qui n’accepte pas les valeurs NULL peut être null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-191">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="5d9cc-192">[NOTNULL](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Une valeur de retour Nullable ne sera jamais null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-192">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>
- <span data-ttu-id="5d9cc-193">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Un argument non Nullable `out` ou `ref` peut être NULL lorsque la valeur de retour remplit une condition.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-193">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="5d9cc-194">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Un argument Nullable `out` ou `ref` ne peut pas être NULL lorsque la valeur de retour remplit une condition.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-194">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="5d9cc-195">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Une valeur de retour n’est pas null si l’argument d’entrée pour le paramètre spécifié n’est pas null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-195">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>

<span data-ttu-id="5d9cc-196">Les descriptions précédentes sont une référence rapide à ce que fait chaque attribut.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-196">The preceding descriptions are a quick reference to what each attribute does.</span></span> <span data-ttu-id="5d9cc-197">Chaque section suivante décrit le comportement et la signification de manière plus approfondie.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-197">Each following section describes the behavior and meaning more thoroughly.</span></span>

<span data-ttu-id="5d9cc-198">L’ajout de ces attributs donne au compilateur plus d’informations sur les règles de votre API.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-198">Adding these attributes gives the compiler more information about the rules for your API.</span></span> <span data-ttu-id="5d9cc-199">Quand le code appelant est compilé dans un contexte compatible avec la valeur null, le compilateur avertit les appelants lorsqu’ils enfreignent ces règles.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-199">When calling code is compiled in a nullable enabled context, the compiler will warn callers when they violate those rules.</span></span> <span data-ttu-id="5d9cc-200">Ces attributs n’autorisent pas de vérifications supplémentaires sur votre implémentation.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-200">These attributes don't enable additional checks on your implementation.</span></span>

## <a name="specify-preconditions-allownull-and-disallownull"></a><span data-ttu-id="5d9cc-201">Spécifier des conditions préalables : `AllowNull` et `DisallowNull`</span><span class="sxs-lookup"><span data-stu-id="5d9cc-201">Specify preconditions: `AllowNull` and `DisallowNull`</span></span>

<span data-ttu-id="5d9cc-202">Prenons l’exemple d’une propriété en lecture/écriture qui ne retourne jamais `null`, car elle a une valeur par défaut raisonnable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-202">Consider a read/write property that never returns `null` because it has a reasonable default value.</span></span> <span data-ttu-id="5d9cc-203">Les appelants passent `null` à l’accesseur Set lors de sa définition sur cette valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-203">Callers pass `null` to the set accessor when setting it to that default value.</span></span> <span data-ttu-id="5d9cc-204">Par exemple, imaginez un système de messagerie qui demande un nom d’écran dans une salle de conversation.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-204">For example, consider a messaging system that asks for a screen name in a chat room.</span></span> <span data-ttu-id="5d9cc-205">Si aucune valeur n’est fournie, le système génère un nom aléatoire :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-205">If none is provided, the system generates a random name:</span></span>

```csharp
public string ScreenName
{
   get => screenName;
   set => screenName = value ?? GenerateRandomScreenName();
}
private string screenName;
```

<span data-ttu-id="5d9cc-206">Quand vous compilez le code précédent dans un contexte oublie Nullable, tout est parfait.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-206">When you compile the preceding code in a nullable oblivious context, everything is fine.</span></span> <span data-ttu-id="5d9cc-207">Une fois que vous activez les types de référence Nullable, la propriété `ScreenName` devient une référence qui n’accepte pas les valeurs NULL.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-207">Once you enable nullable reference types, the `ScreenName` property becomes a non-nullable reference.</span></span> <span data-ttu-id="5d9cc-208">C’est correct pour l’accesseur `get` : il ne retourne jamais `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-208">That's correct for the `get` accessor: it never returns `null`.</span></span> <span data-ttu-id="5d9cc-209">Les appelants n’ont pas besoin de vérifier la propriété retournée pour `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-209">Callers don't need to check the returned property for `null`.</span></span> <span data-ttu-id="5d9cc-210">Mais maintenant, la définition de la propriété à `null` génère un avertissement.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-210">But now setting the property to `null` generates a warning.</span></span> <span data-ttu-id="5d9cc-211">Pour continuer à prendre en charge ce type de code, ajoutez l’attribut <xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute?displayProperty=nameWithType> à la propriété, comme indiqué dans le code suivant :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-211">In order to continue to support this type of code, you add the <xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute?displayProperty=nameWithType> attribute to the property, as shown in the following code:</span></span> 

```csharp
[AllowNull]
public string ScreenName
{
   get => screenName;
   set => screenName = value ?? GenerateRandomScreenName();
}
private string screenName = GenerateRandomScreenName();
```

<span data-ttu-id="5d9cc-212">Vous devrez peut-être ajouter une directive `using` pour <xref:System.Diagnostics.CodeAnalysis> afin de l’utiliser et d’autres attributs abordés dans cet article.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-212">You may need to add a `using` directive for <xref:System.Diagnostics.CodeAnalysis> to use this and other attributes discussed in this article.</span></span> <span data-ttu-id="5d9cc-213">L’attribut est appliqué à la propriété, et non à l’accesseur `set`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-213">The attribute is applied to the property, not the `set` accessor.</span></span> <span data-ttu-id="5d9cc-214">L’attribut `AllowNull` spécifie des *conditions préalables*et s’applique uniquement aux entrées.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-214">The `AllowNull` attribute specifies *pre-conditions*, and only applies to inputs.</span></span> <span data-ttu-id="5d9cc-215">L’accesseur `get` a une valeur de retour, mais aucun argument d’entrée.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-215">The `get` accessor has a return value, but no input arguments.</span></span> <span data-ttu-id="5d9cc-216">Par conséquent, l’attribut `AllowNull` s’applique uniquement à l’accesseur `set`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-216">Therefore, the `AllowNull` attribute only applies to the `set` accessor.</span></span>

<span data-ttu-id="5d9cc-217">L’exemple précédent montre ce qu’il faut rechercher lors de l’ajout de l’attribut `AllowNull` sur un argument :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-217">The preceding example demonstrates what to look for when adding the `AllowNull` attribute on an argument:</span></span>

1. <span data-ttu-id="5d9cc-218">Le contrat général pour cette variable est qu’elle ne doit pas être `null`, donc vous souhaitez un type de référence qui n’accepte pas les valeurs NULL.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-218">The general contract for that variable is that it shouldn't be `null`, so you want a non-nullable reference type.</span></span>
1. <span data-ttu-id="5d9cc-219">Il existe des scénarios pour la variable d’entrée `null`, bien qu’ils ne soient pas l’utilisation la plus courante.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-219">There are scenarios for the input variable to be `null`, though they aren't the most common usage.</span></span>

<span data-ttu-id="5d9cc-220">La plupart du temps, vous aurez besoin de cet attribut pour les propriétés, ou `in`, `out` et les arguments `ref`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-220">Most often you'll need this attribute for properties, or `in`, `out`, and `ref` arguments.</span></span> <span data-ttu-id="5d9cc-221">L’attribut `AllowNull` est le meilleur choix lorsqu’une variable est généralement non null, mais que vous devez autoriser `null` comme condition préalable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-221">The `AllowNull` attribute is the best choice when a variable is typically non-null, but you need to allow `null` as a precondition.</span></span>

<span data-ttu-id="5d9cc-222">Comparez cela aux scénarios d’utilisation de `DisallowNull` : Vous utilisez cet attribut pour spécifier qu’une variable d’entrée d’un type Nullable ne doit pas être `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-222">Contrast that with scenarios for using `DisallowNull`: You use this attribute to specify that an input variable of a nullable type shouldn't be `null`.</span></span> <span data-ttu-id="5d9cc-223">Prenons l’exemple d’une propriété où `null` est la valeur par défaut, mais les clients peuvent uniquement la définir sur une valeur non null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-223">Consider a property where `null` is the default value, but clients can only set it to a non-null value.</span></span> <span data-ttu-id="5d9cc-224">Examinons le code ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-224">Consider the following code:</span></span>

```csharp
public string ReviewComment
{
    get => _comment;
    set => _comment = value ?? throw new ArgumentNullException(nameof(value), "Cannot set to null");
}
string _comment;
```

<span data-ttu-id="5d9cc-225">Le code précédent est la meilleure façon d’exprimer votre conception que le `ReviewComment` peut être `null`, mais ne peut pas être défini sur `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-225">The preceding code is the best way to express your design that the `ReviewComment` could be `null`, but can't be set to `null`.</span></span> <span data-ttu-id="5d9cc-226">Une fois que ce code prend en charge les valeurs NULL, vous pouvez exprimer ce concept plus clairement aux appelants à l’aide du <xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute?displayProperty=nameWithType> :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-226">Once this code is nullable aware, you can express this concept more clearly to callers using the <xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute?displayProperty=nameWithType>:</span></span>

```csharp
[DisallowNull] 
public string? ReviewComment
{
    get => _comment;
    set => _comment = value ?? throw new ArgumentNullException(nameof(value), "Cannot set to null");
}
string? _comment;
```

<span data-ttu-id="5d9cc-227">Dans un contexte Nullable, l’accesseur `ReviewComment` `get` peut retourner la valeur par défaut `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-227">In a nullable context, the `ReviewComment` `get` accessor could return the default value of `null`.</span></span> <span data-ttu-id="5d9cc-228">Le compilateur vous avertit qu’il doit être vérifié avant l’accès.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-228">The compiler warns that it must be checked before access.</span></span> <span data-ttu-id="5d9cc-229">En outre, il avertit les appelants que, même s’il peut être `null`, les appelants ne doivent pas le définir explicitement sur `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-229">Furthermore, it warns callers that, even though it could be `null`, callers shouldn't explicitly set it to `null`.</span></span> <span data-ttu-id="5d9cc-230">L’attribut `DisallowNull` spécifie également une *condition préalable*, il n’affecte pas l’accesseur `get`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-230">The `DisallowNull` attribute also specifies a *pre-condition*, it does not affect the `get` accessor.</span></span> <span data-ttu-id="5d9cc-231">Vous devez choisir d’utiliser l’attribut `DisallowNull` lorsque vous observez ces caractéristiques sur :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-231">You should choose to use the `DisallowNull` attribute when you observe these characteristics about:</span></span>

1. <span data-ttu-id="5d9cc-232">La variable peut être `null` dans les scénarios de base, souvent lors de la première instanciation.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-232">The variable could be `null` in core scenarios, often when first instantiated.</span></span>
1. <span data-ttu-id="5d9cc-233">La variable ne doit pas être explicitement définie sur `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-233">The variable shouldn't be explicitly set to `null`.</span></span>

<span data-ttu-id="5d9cc-234">Ces situations sont courantes dans le code qui a été initialement *null oublie*.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-234">These situations are common in code that was originally *null oblivious*.</span></span> <span data-ttu-id="5d9cc-235">Les propriétés de l’objet sont peut-être définies dans deux opérations d’initialisation distinctes.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-235">It may be that object properties are set in two distinct initialization operations.</span></span> <span data-ttu-id="5d9cc-236">Il se peut que certaines propriétés soient définies uniquement après la fin d’un travail asynchrone.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-236">It may be that some properties are set only after some asynchronous work has completed.</span></span>

<span data-ttu-id="5d9cc-237">Les attributs `AllowNull` et `DisallowNull` vous permettent de spécifier que les conditions préalables sur les variables peuvent ne pas correspondre aux annotations Nullable sur ces variables.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-237">The `AllowNull` and `DisallowNull` attributes enable you to specify that preconditions on variables may not match the nullable annotations on those variables.</span></span> <span data-ttu-id="5d9cc-238">Celles-ci fournissent des informations plus détaillées sur les caractéristiques de votre API.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-238">These provide more detail about the characteristics of your API.</span></span> <span data-ttu-id="5d9cc-239">Ces informations supplémentaires permettent aux appelants d’utiliser correctement votre API.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-239">This additional information helps callers use your API correctly.</span></span> <span data-ttu-id="5d9cc-240">N’oubliez pas de spécifier des conditions préalables à l’aide des attributs suivants :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-240">Remember you specify preconditions using the following attributes:</span></span>

- <span data-ttu-id="5d9cc-241">[AllowNull a](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Un argument d’entrée n’acceptant pas les valeurs NULL peut avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-241">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="5d9cc-242">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Un argument d’entrée Nullable ne doit jamais avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-242">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>

## <a name="specify-post-conditions-maybenull-and-notnull"></a><span data-ttu-id="5d9cc-243">Spécifier les conditions postérieures : `MaybeNull` et `NotNull`</span><span class="sxs-lookup"><span data-stu-id="5d9cc-243">Specify post-conditions: `MaybeNull` and `NotNull`</span></span>

<span data-ttu-id="5d9cc-244">Supposons que vous avez une méthode avec la signature suivante :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-244">Suppose you have a method with the following signature:</span></span>

```csharp
public Customer FindCustomer(string lastName, string firstName)
```

<span data-ttu-id="5d9cc-245">Vous avez probablement écrit une méthode comme celle-ci pour retourner `null` lorsque le nom recherché n’a pas été trouvé.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-245">You've likely written a method like this to return `null` when the name sought wasn't found.</span></span> <span data-ttu-id="5d9cc-246">La `null` indique clairement que l’enregistrement est introuvable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-246">The `null` clearly indicates that the record wasn't found.</span></span> <span data-ttu-id="5d9cc-247">Dans cet exemple, vous modifiez probablement le type de retour de `Customer` à `Customer?`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-247">In this example, you'd likely change the return type from `Customer` to `Customer?`.</span></span> <span data-ttu-id="5d9cc-248">La déclaration de la valeur de retour en tant que type référence Nullable spécifie clairement l’objectif de cette API.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-248">Declaring the return value as a nullable reference type specifies the intent of this API clearly.</span></span> 

<span data-ttu-id="5d9cc-249">Pour les raisons couvertes par les [définitions génériques et la possibilité de valeur null](#generic-definitions-and-nullability) , cette technique ne fonctionne pas avec les méthodes génériques.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-249">For reasons covered under [Generic definitions and nullability](#generic-definitions-and-nullability) that technique does not work with generic methods.</span></span> <span data-ttu-id="5d9cc-250">Vous pouvez avoir une méthode générique qui suit un modèle similaire :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-250">You may have a generic method that follows a similar pattern:</span></span>

```csharp
public T Find<T>(IEnumerable<T> sequence, Func<T, bool> match)
```

<span data-ttu-id="5d9cc-251">Vous ne pouvez pas spécifier que la valeur de retour est `T?`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-251">You can't specify that the return value is `T?`.</span></span> <span data-ttu-id="5d9cc-252">La méthode retourne `null` lorsque l’élément recherché est introuvable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-252">The method returns `null` when the sought item isn't found.</span></span> <span data-ttu-id="5d9cc-253">Étant donné que vous ne pouvez pas déclarer un type de retour `T?`, vous ajoutez l’annotation `MaybeNull` à la méthode Return :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-253">Since you can't declare a `T?` return type, you add the `MaybeNull` annotation to the method return:</span></span>

```csharp
[return: MaybeNull]
public T Find<T>(IEnumerable<T> sequence, Func<T, bool> match)
```

<span data-ttu-id="5d9cc-254">Le code précédent informe les appelants que le contrat implique un type non Nullable, mais la valeur de retour *peut* en fait être null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-254">The preceding code informs callers that the contract implies a non-nullable type, but the return value *may* actually be null.</span></span>  <span data-ttu-id="5d9cc-255">Utilisez l’attribut `MaybeNull` quand votre API doit être un type non Nullable, en général un paramètre de type générique, mais il peut y avoir des instances où `null` est retourné.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-255">Use the `MaybeNull` attribute when your API should be a non-nullable type, typically a generic type parameter, but there may be instances where `null` would be returned.</span></span>

<span data-ttu-id="5d9cc-256">Vous pouvez également spécifier qu’une valeur de retour ou un argument `out` ou `ref` n’est pas NULL même si le type est un type Nullable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-256">You can also specify that a return value or an `out` or `ref` argument isn't null even though the type is a nullable type.</span></span> <span data-ttu-id="5d9cc-257">Prenons l’exemple d’une méthode qui garantit qu’un tableau est suffisamment grand pour contenir un certain nombre d’éléments.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-257">Consider a method that ensures an array is large enough to hold a number of elements.</span></span> <span data-ttu-id="5d9cc-258">Si l’argument d’entrée n’a pas de capacité, la routine alloue un nouveau tableau et copie tous les éléments existants dans celui-ci.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-258">If the input argument doesn't have capacity, the routine would allocate a new array and copy all the existing elements into it.</span></span> <span data-ttu-id="5d9cc-259">Si l’argument d’entrée est `null`, la routine allouera un nouveau stockage.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-259">If the input argument is `null`, the routine would allocate new storage.</span></span> <span data-ttu-id="5d9cc-260">Si la capacité est suffisante, la routine ne fait rien :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-260">If there's sufficient capacity, the routine does nothing:</span></span>

```csharp
public void EnsureCapacity<T>(ref T[] storage, int size)
```

<span data-ttu-id="5d9cc-261">Vous pouvez appeler cette routine comme suit :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-261">You could call this routine as follows:</span></span>

```csharp
// messages has the default value (null) when EnsureCapacity is called:
EnsureCapacity<string>(ref messages, 10);
// messages is not null.
EnsureCapacity<string>(messages, 50);
```

<span data-ttu-id="5d9cc-262">Après avoir activé les types référence null, vous souhaitez vous assurer que le code précédent se compile sans avertissements.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-262">After enabling null reference types, you want to ensure that the preceding code compiles without warnings.</span></span> <span data-ttu-id="5d9cc-263">Lorsque la méthode retourne, l’argument `storage` est garanti comme non null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-263">When the method returns, the `storage` argument is guaranteed to be not null.</span></span> <span data-ttu-id="5d9cc-264">Toutefois, il est acceptable d’appeler `EnsureCapacity` avec une référence null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-264">However, it's acceptable to call `EnsureCapacity` with a null reference.</span></span> <span data-ttu-id="5d9cc-265">Vous pouvez faire de `storage` un type de référence Nullable, puis ajouter la `NotNull` après condition à la déclaration du paramètre :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-265">You can make `storage` a nullable reference type, and add the `NotNull` post-condition to the parameter declaration:</span></span>

```csharp
public void EnsureCapacity<T>([NotNull]ref T[]? storage, int size)
```

<span data-ttu-id="5d9cc-266">Le code précédent exprime très clairement le contrat existant : Les appelants peuvent passer une variable avec la valeur `null`, mais la valeur de retour est garantie pour ne jamais avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-266">The preceding code expresses the existing contract very clearly: Callers can pass a variable with the `null` value, but the return value is guaranteed to never be null.</span></span> <span data-ttu-id="5d9cc-267">L’attribut `NotNull` est particulièrement utile pour les arguments `ref` et `out` lorsque `null` peut être passé comme argument, mais que cet argument est garanti comme non NULL lorsque la méthode est retournée.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-267">The `NotNull` attribute is most useful for `ref` and `out` arguments where `null` may be passed as an argument, but that argument is guaranteed to be not null when the method returns.</span></span>

<span data-ttu-id="5d9cc-268">Vous spécifiez des post-conditions inconditionnelles à l’aide des attributs suivants :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-268">You specify unconditional postconditions using the following attributes:</span></span>

- <span data-ttu-id="5d9cc-269">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Une valeur de retour qui n’accepte pas les valeurs NULL peut être null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-269">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="5d9cc-270">[NOTNULL](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Une valeur de retour Nullable ne sera jamais null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-270">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>

## <a name="specify-conditional-post-conditions-notnullwhen-and-maybenullwhen"></a><span data-ttu-id="5d9cc-271">Spécifier les conditions de publication conditionnelles : `NotNullWhen` et `MaybeNullWhen`</span><span class="sxs-lookup"><span data-stu-id="5d9cc-271">Specify conditional post-conditions: `NotNullWhen` and `MaybeNullWhen`</span></span>

<span data-ttu-id="5d9cc-272">Vous êtes probablement familiarisé avec la méthode `string` <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-272">You're likely familiar with the `string` method <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType>.</span></span> <span data-ttu-id="5d9cc-273">Cette méthode retourne `true` lorsque l’argument a la valeur null ou est une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-273">This method returns `true` when the argument is null or an empty string.</span></span> <span data-ttu-id="5d9cc-274">Il s’agit d’une forme de contrôle de valeur NULL : Les appelants n’ont pas besoin de vérifier la valeur null si la méthode retourne `false`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-274">It's a form of null-check: Callers don't need to null-check the argument if the method returns `false`.</span></span> <span data-ttu-id="5d9cc-275">Pour rendre une méthode comme cette prise en charge de Nullable, vous devez définir l’argument sur un type Nullable et ajouter l’attribut `NotNullWhen` :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-275">To make a method like this nullable aware, you'd set the argument to a nullable type, and add the `NotNullWhen` attribute:</span></span>

```csharp
bool IsNullOrEmpty([NotNullWhen(false)]string? value);
```

<span data-ttu-id="5d9cc-276">Cela indique au compilateur que tout code où la valeur de retour est `false` n’a pas besoin d’être vérifié par null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-276">That informs the compiler that any code where the return value is `false` need not be null-checked.</span></span> <span data-ttu-id="5d9cc-277">L’ajout de l’attribut informe l’analyse statique du compilateur que `IsNullOrEmpty` effectue la vérification de la valeur null nécessaire : lorsqu’il retourne `false`, l’argument d’entrée n’est pas `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-277">The addition of the attribute informs the compiler's static analysis that `IsNullOrEmpty` performs the necessary null check: when it returns `false`, the input argument is not `null`.</span></span>

```csharp
string? userInput = GetUserInput();
if (!(string.IsNullOrEmpty(userInput))
{
   int messageLength = userInput.Length; // no null check needed.
}
// null check needed on userInput here.
```

<span data-ttu-id="5d9cc-278">La méthode <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType> sera annotée comme indiqué ci-dessus pour .NET Core 3,0.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-278">The <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType> method will be annotated as shown above for .NET Core 3.0.</span></span> <span data-ttu-id="5d9cc-279">Vous pouvez avoir des méthodes similaires dans votre code base, qui vérifient l’état des objets pour les valeurs NULL.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-279">You may have similar methods in your codebase that check the state of objects for null values.</span></span> <span data-ttu-id="5d9cc-280">Le compilateur ne reconnaîtra pas les méthodes de vérification null personnalisées, et vous devrez ajouter vous-même les annotations.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-280">The compiler won't recognize custom null check methods, and you'll need to add the annotations yourself.</span></span> <span data-ttu-id="5d9cc-281">Lorsque vous ajoutez l’attribut, l’analyse statique du compilateur sait quand la variable testée a été vérifiée avec la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-281">When you add the attribute, the compiler's static analysis knows when the tested variable has been null checked.</span></span>

<span data-ttu-id="5d9cc-282">Une autre utilisation de ces attributs est le modèle `Try*`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-282">Another use for these attributes is the `Try*` pattern.</span></span> <span data-ttu-id="5d9cc-283">Les post-conditions pour les variables `ref` et `out` sont communiquées par le biais de la valeur de retour.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-283">The postconditions for `ref` and `out` variables are communicated through the return value.</span></span> <span data-ttu-id="5d9cc-284">Prenons l’exemple de cette méthode ci-dessus :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-284">Consider this method shown earlier:</span></span>

```csharp
bool TryGetMessage(string key, out string message)
```

<span data-ttu-id="5d9cc-285">La méthode précédente suit un idiome .NET typique : la valeur de retour indique si `message` a été défini sur la valeur trouvée ou, si aucun message n’est trouvé, à la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-285">The preceding method follows a typical .NET idiom: the return value indicates if `message` was set to the found value or, if no message is found, to the default value.</span></span> <span data-ttu-id="5d9cc-286">Si la méthode retourne `true`, la valeur de `message` n’est pas null ; dans le cas contraire, la méthode définit `message` sur la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-286">If the method returns `true`, the value of `message` isn't null; otherwise, the method sets `message` to null.</span></span>

<span data-ttu-id="5d9cc-287">Vous pouvez communiquer cet idiome à l’aide de l’attribut `NotNullWhen`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-287">You can communicate that idiom using the `NotNullWhen` attribute.</span></span> <span data-ttu-id="5d9cc-288">Quand vous mettez à jour la signature pour les types de référence Nullable, effectuez `message` un `string?` et ajoutez un attribut :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-288">When you update the signature for nullable reference types, make `message` a `string?` and add an attribute:</span></span>

```csharp
bool TryGetMessage(string key, [NotNullWhen(true)] out string? message)
```

<span data-ttu-id="5d9cc-289">Dans l’exemple précédent, la valeur de `message` est dite NOT NULL lorsque `TryGetMessage` retourne `true`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-289">In the preceding example, the value of `message` is known to be not null when `TryGetMessage` returns `true`.</span></span> <span data-ttu-id="5d9cc-290">Vous devez annoter des méthodes similaires dans votre code base de la même façon : les arguments peuvent être `null`, et sont connus pour ne pas avoir la valeur NULL lorsque la méthode retourne `true`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-290">You should annotate similar methods in your codebase in the same way: the arguments could be `null`, and are known to be not null when the method returns `true`.</span></span>

<span data-ttu-id="5d9cc-291">Vous pouvez également avoir un attribut final.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-291">There's one final attribute you may also need.</span></span> <span data-ttu-id="5d9cc-292">Parfois, l’État null d’une valeur de retour dépend de l’État null d’un ou plusieurs arguments d’entrée.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-292">Sometimes the null state of a return value depends on the null state of one or more input arguments.</span></span> <span data-ttu-id="5d9cc-293">Ces méthodes retournent une valeur non null chaque fois que certains arguments d’entrée ne sont pas `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-293">These methods will return a non-null value whenever certain input arguments aren't `null`.</span></span> <span data-ttu-id="5d9cc-294">Pour annoter correctement ces méthodes, vous utilisez l’attribut `NotNullIfNotNull`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-294">To correctly annotate these methods, you use the `NotNullIfNotNull` attribute.</span></span> <span data-ttu-id="5d9cc-295">Considérez la méthode suivante :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-295">Consider the following method:</span></span>

```csharp
string GetTopLevelDomainFromFullUrl(string url);
```

<span data-ttu-id="5d9cc-296">Si l’argument `url` n’est pas null, la sortie n’est pas `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-296">If the `url` argument isn't null, the output isn't `null`.</span></span> <span data-ttu-id="5d9cc-297">Une fois que les références Nullable sont activées, cette signature fonctionne correctement, à condition que votre API n’accepte jamais une entrée null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-297">Once nullable references are enabled, that signature works correctly, provided your API never accepts a null input.</span></span> <span data-ttu-id="5d9cc-298">Toutefois, si l’entrée peut être null, la valeur de retour peut également être null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-298">However, if the input could be null, then return value could also be null.</span></span> <span data-ttu-id="5d9cc-299">Par conséquent, vous pouvez remplacer la signature par le code suivant :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-299">Therefore, you could change the signature to the following code:</span></span>

```csharp
string? GetTopLevelDomainFromFullUrl(string? url);
```

<span data-ttu-id="5d9cc-300">Cela fonctionne également, mais obligent souvent les appelants à implémenter des contrôles `null` supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-300">That also works, but will often force callers to implement extra `null` checks.</span></span> <span data-ttu-id="5d9cc-301">Le contrat est que la valeur de retour serait `null` uniquement lorsque l’argument d’entrée `url` est `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-301">The contract is that the return value would be `null` only when the input argument `url` is `null`.</span></span> <span data-ttu-id="5d9cc-302">Pour exprimer ce contrat, vous devez annoter cette méthode comme indiqué dans le code suivant :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-302">To express that contract, you would annotate this method as shown in the following code:</span></span>

```csharp
[return: NotNullIfNotNull("url")]
string? GetTopLevelDomainFromFullUrl(string? url);
```

<span data-ttu-id="5d9cc-303">La valeur de retour et l’argument ont tous deux été annotés avec le `?`, ce qui signifie que peut être `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-303">The return value and the argument have both been annotated with the `?` indicating that either could be `null`.</span></span> <span data-ttu-id="5d9cc-304">L’attribut clarifie davantage que la valeur de retour n’est pas NULL lorsque l’argument `url` n’est pas `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-304">The attribute further clarifies that the return value won't be null when the `url` argument isn't `null`.</span></span>

<span data-ttu-id="5d9cc-305">Vous spécifiez des post-conditions conditionnelles à l’aide des attributs suivants :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-305">You specify conditional postconditions using these attributes:</span></span>

- <span data-ttu-id="5d9cc-306">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Un argument non Nullable `out` ou `ref` peut être NULL lorsque la valeur de retour remplit une condition.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-306">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="5d9cc-307">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Un argument Nullable `out` ou `ref` ne peut pas être NULL lorsque la valeur de retour remplit une condition.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-307">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="5d9cc-308">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Une valeur de retour n’est pas null si l’argument d’entrée pour le paramètre spécifié n’est pas null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-308">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>

## <a name="generic-definitions-and-nullability"></a><span data-ttu-id="5d9cc-309">Définitions génériques et possibilité de valeur null</span><span class="sxs-lookup"><span data-stu-id="5d9cc-309">Generic definitions and nullability</span></span>

<span data-ttu-id="5d9cc-310">La communication correcte de l’État null des types génériques et des méthodes génériques requiert une attention particulière.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-310">Correctly communicating the null state of generic types and generic methods requires special care.</span></span> <span data-ttu-id="5d9cc-311">Cela découle du fait qu’un type valeur Nullable et un type référence Nullable sont fondamentalement différents.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-311">This stems from the fact that a nullable value type and a nullable reference type are fundamentally different.</span></span> <span data-ttu-id="5d9cc-312">Un `int?` est un synonyme de `Nullable<int>`, tandis que `string?` est `string` avec un attribut ajouté par le compilateur.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-312">An `int?` is a synonym for `Nullable<int>`, whereas `string?` is `string` with an attribute added by the compiler.</span></span> <span data-ttu-id="5d9cc-313">Le résultat est que le compilateur ne peut pas générer de code correct pour `T?` sans savoir si `T` est un `class` ou un `struct`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-313">The result is that the compiler can't generate correct code for `T?` without knowing if `T` is a `class` or a `struct`.</span></span> 

<span data-ttu-id="5d9cc-314">Cela ne signifie pas que vous ne pouvez pas utiliser un type Nullable (type valeur ou type référence) comme argument de type pour un type générique fermé.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-314">This doesn't mean you can't use a nullable type (either value type or reference type) as the type argument for a closed generic type.</span></span> <span data-ttu-id="5d9cc-315">@No__t-0 et `List<int?>` sont des instanciations valides de `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-315">Both `List<string?>` and `List<int?>` are valid instantiations of `List<T>`.</span></span> 

<span data-ttu-id="5d9cc-316">Cela signifie que vous ne pouvez pas utiliser `T?` dans une déclaration de classe ou de méthode générique sans contraintes.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-316">What it does mean is that you can't use `T?` in a generic class or method declaration without constraints.</span></span> <span data-ttu-id="5d9cc-317">Par exemple, <xref:System.Linq.Enumerable.FirstOrDefault%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D)?displayProperty=nameWithType> ne sera pas modifié pour retourner `T?`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-317">For example, <xref:System.Linq.Enumerable.FirstOrDefault%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D)?displayProperty=nameWithType> won't be changed to return `T?`.</span></span> <span data-ttu-id="5d9cc-318">Vous pouvez contourner cette limitation en ajoutant la contrainte `struct` ou `class`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-318">You can overcome this limitation by adding either the `struct` or `class` constraint.</span></span> <span data-ttu-id="5d9cc-319">Avec l’une de ces contraintes, le compilateur sait comment générer du code pour `T` et `T?`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-319">With either of those constraints, the compiler knows how to generate code for both `T` and `T?`.</span></span>

<span data-ttu-id="5d9cc-320">Vous pouvez restreindre les types utilisés pour un argument de type générique à des types non nullables.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-320">You may want to restrict the types used for a generic type argument to be non-nullable types.</span></span> <span data-ttu-id="5d9cc-321">Pour ce faire, vous pouvez ajouter la contrainte `notnull` sur cet argument de type.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-321">You can do that by adding the `notnull` constraint on that type argument.</span></span> <span data-ttu-id="5d9cc-322">Quand cette contrainte est appliquée, l’argument de type ne doit pas être un type Nullable.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-322">When that constraint is applied, the type argument must not be a nullable type.</span></span>

## <a name="conclusions"></a><span data-ttu-id="5d9cc-323">Conclusions</span><span class="sxs-lookup"><span data-stu-id="5d9cc-323">Conclusions</span></span>

<span data-ttu-id="5d9cc-324">L’ajout de types de référence Nullable fournit un vocabulaire initial pour décrire les attentes des API pour les variables qui pourraient être `null`.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-324">Adding nullable reference types provides an initial vocabulary to describe your APIs expectations for variables that could be `null`.</span></span> <span data-ttu-id="5d9cc-325">Les attributs supplémentaires fournissent un vocabulaire plus riche pour décrire l’État null des variables en tant que conditions préalables et post-conditions.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-325">The additional attributes provide a richer vocabulary to describe the null state of variables as preconditions and postconditions.</span></span> <span data-ttu-id="5d9cc-326">Ces attributs décrivent plus clairement vos attentes et offrent une meilleure expérience aux développeurs qui utilisent vos API.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-326">These attributes more clearly describe your expectations and provide a better experience for the developers using your APIs.</span></span>

<span data-ttu-id="5d9cc-327">Lorsque vous mettez à jour des bibliothèques pour un contexte Nullable, ajoutez ces attributs pour guider les utilisateurs de vos API vers l’utilisation correcte.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-327">As you update libraries for a nullable context, add these attributes to guide users of your APIs to the correct usage.</span></span> <span data-ttu-id="5d9cc-328">Ces attributs vous aident à décrire complètement l’État null des arguments d’entrée et les valeurs de retour :</span><span class="sxs-lookup"><span data-stu-id="5d9cc-328">These attributes help you fully describe the null-state of input arguments and return values:</span></span>

- <span data-ttu-id="5d9cc-329">[AllowNull a](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Un argument d’entrée n’acceptant pas les valeurs NULL peut avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-329">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="5d9cc-330">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Un argument d’entrée Nullable ne doit jamais avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-330">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>
- <span data-ttu-id="5d9cc-331">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Une valeur de retour qui n’accepte pas les valeurs NULL peut être null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-331">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="5d9cc-332">[NOTNULL](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Une valeur de retour Nullable ne sera jamais null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-332">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>
- <span data-ttu-id="5d9cc-333">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Un argument non Nullable `out` ou `ref` peut être NULL lorsque la valeur de retour remplit une condition.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-333">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="5d9cc-334">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Un argument Nullable `out` ou `ref` ne peut pas être NULL lorsque la valeur de retour remplit une condition.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-334">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="5d9cc-335">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Une valeur de retour n’est pas null si l’argument d’entrée pour le paramètre spécifié n’est pas null.</span><span class="sxs-lookup"><span data-stu-id="5d9cc-335">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>
