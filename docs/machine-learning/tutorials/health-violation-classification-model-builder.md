---
title: 'Didacticiel : classer les violations d’intégrité avec le générateur de modèles'
description: Ce didacticiel explique comment créer un modèle de classification multiclasse à l’aide du générateur de modèles ML.NET pour classifier le niveau de gravité de violation de l’intégrité d’un restaurant à San Francisco.
author: luisquintanilla
ms.author: luquinta
ms.date: 11/21/2019
ms.topic: tutorial
ms.custom: mvc
ms.openlocfilehash: 90abbc9ffe5765880d18d0d29c8e13bc1330ddc3
ms.sourcegitcommit: 30a558d23e3ac5a52071121a52c305c85fe15726
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/25/2019
ms.locfileid: "75341555"
---
# <a name="tutorial-classify-the-severity-of-restaurant-health-violations-with-model-builder"></a><span data-ttu-id="85363-103">Didacticiel : classer la gravité des violations d’intégrité d’un restaurant avec le générateur de modèles</span><span class="sxs-lookup"><span data-stu-id="85363-103">Tutorial: Classify the severity of restaurant health violations with Model Builder</span></span>

<span data-ttu-id="85363-104">Découvrez comment créer un modèle de classification multiclasse à l’aide du générateur de modèles pour catégoriser le niveau de risque des violations de restaurant détectées lors des inspections de l’intégrité.</span><span class="sxs-lookup"><span data-stu-id="85363-104">Learn how to build a multiclass classification model using Model Builder to categorize the risk level of restaurant violations found during health inspections.</span></span>

<span data-ttu-id="85363-105">Dans ce didacticiel, vous apprendrez à :</span><span class="sxs-lookup"><span data-stu-id="85363-105">In this tutorial, you learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="85363-106">Préparer et comprendre les données</span><span class="sxs-lookup"><span data-stu-id="85363-106">Prepare and understand the data</span></span>
> - <span data-ttu-id="85363-107">Choisir un scénario</span><span class="sxs-lookup"><span data-stu-id="85363-107">Choose a scenario</span></span>
> - <span data-ttu-id="85363-108">Charger des données à partir d’une base de données</span><span class="sxs-lookup"><span data-stu-id="85363-108">Load data from a database</span></span>
> - <span data-ttu-id="85363-109">Effectuer l’apprentissage du modèle</span><span class="sxs-lookup"><span data-stu-id="85363-109">Train the model</span></span>
> - <span data-ttu-id="85363-110">Évaluer le modèle</span><span class="sxs-lookup"><span data-stu-id="85363-110">Evaluate the model</span></span>
> - <span data-ttu-id="85363-111">Utiliser le modèle pour les prévisions</span><span class="sxs-lookup"><span data-stu-id="85363-111">Use the model for predictions</span></span>

> [!NOTE]
> <span data-ttu-id="85363-112">Model Builder est actuellement en préversion.</span><span class="sxs-lookup"><span data-stu-id="85363-112">Model Builder is currently in Preview.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="85363-113">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="85363-113">Prerequisites</span></span>

<span data-ttu-id="85363-114">Pour obtenir la liste des conditions préalables et des instructions d’installation, consultez le [Guide d’installation du générateur de modèles](../how-to-guides/install-model-builder.md).</span><span class="sxs-lookup"><span data-stu-id="85363-114">For a list of prerequisites and installation instructions, visit the [Model Builder installation guide](../how-to-guides/install-model-builder.md).</span></span>

## <a name="model-builder-multiclass-classification-overview"></a><span data-ttu-id="85363-115">Vue d’ensemble de la classification multiclasse de générateur de modèles</span><span class="sxs-lookup"><span data-stu-id="85363-115">Model Builder multiclass classification overview</span></span>

<span data-ttu-id="85363-116">Cet exemple crée une C# application console .net core qui catégorise les risques de violations d’intégrité à l’aide d’un modèle de machine learning généré avec le générateur de modèles.</span><span class="sxs-lookup"><span data-stu-id="85363-116">This sample creates a C# .NET Core console application that categorizes the risk of health violations using a machine learning model built with Model Builder.</span></span> <span data-ttu-id="85363-117">Vous pouvez trouver le code source de ce didacticiel dans le référentiel GitHub [dotnet/machinelearning-Samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) .</span><span class="sxs-lookup"><span data-stu-id="85363-117">You can find the source code for this tutorial at the [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) GitHub repository.</span></span>

## <a name="create-a-console-application"></a><span data-ttu-id="85363-118">Créer une application console</span><span class="sxs-lookup"><span data-stu-id="85363-118">Create a console application</span></span>

1. <span data-ttu-id="85363-119">Créez une  **C# application console .net Core** appelée « RestaurantViolations ».</span><span class="sxs-lookup"><span data-stu-id="85363-119">Create a **C# .NET Core console application** called "RestaurantViolations".</span></span> <span data-ttu-id="85363-120">Vérifiez que la case à cocher **Placer la solution et le projet dans le même répertoire** est **désactivée** (vs 2019) ou que l’option **créer le répertoire pour la solution** est **cochée** (vs 2017).</span><span class="sxs-lookup"><span data-stu-id="85363-120">Make sure **Place solution and project in the same directory** is **unchecked** (VS 2019), or **Create directory for solution** is **checked** (VS 2017).</span></span>

## <a name="prepare-and-understand-the-data"></a><span data-ttu-id="85363-121">Préparer et comprendre les données</span><span class="sxs-lookup"><span data-stu-id="85363-121">Prepare and understand the data</span></span>

> <span data-ttu-id="85363-122">Le jeu de données utilisé pour l’apprentissage et l’évaluation du modèle de Machine Learning provient à l’origine du [département San Francisco des scores de sécurité du restaurant Public Health](https://www.sfdph.org/dph/EH/Food/score/default.asp).</span><span class="sxs-lookup"><span data-stu-id="85363-122">The data set used to train and evaluate the machine learning model is originally from the [San Francisco Department of Public Health Restaurant Safety Scores](https://www.sfdph.org/dph/EH/Food/score/default.asp).</span></span> <span data-ttu-id="85363-123">Pour plus de commodité, le jeu de données a été condensé pour inclure uniquement les colonnes pertinentes pour l’apprentissage du modèle et la création de prédictions.</span><span class="sxs-lookup"><span data-stu-id="85363-123">For convenience, the dataset has been condensed to only include the columns relevant to train the model and make predictions.</span></span> <span data-ttu-id="85363-124">Visitez le site Web suivant pour en savoir plus sur le [jeu de données](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i?row_index=0).</span><span class="sxs-lookup"><span data-stu-id="85363-124">Visit the following website to learn more about the [dataset](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i?row_index=0).</span></span>

<span data-ttu-id="85363-125">[Téléchargez le jeu de données des scores de sécurité de restaurant](https://github.com/luisquintanilla/machinelearning-samples/raw/AB1608219/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantScores.zip) et décompressez-le.</span><span class="sxs-lookup"><span data-stu-id="85363-125">[Download the Restaurant Safety Scores dataset](https://github.com/luisquintanilla/machinelearning-samples/raw/AB1608219/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantScores.zip) and unzip it.</span></span>

<span data-ttu-id="85363-126">Chaque ligne du jeu de données contient des informations relatives aux violations observées au cours d’une inspection du service de contrôle d’intégrité et une évaluation des risques de la menace que ces violations présentent à la santé publique et à la sécurité.</span><span class="sxs-lookup"><span data-stu-id="85363-126">Each row in the dataset contains information regarding violations observed during an inspection from the Health Department and a risk assessment of the threat those violations present to public health and safety.</span></span>

| <span data-ttu-id="85363-127">InspectionType</span><span class="sxs-lookup"><span data-stu-id="85363-127">InspectionType</span></span> | <span data-ttu-id="85363-128">ViolationDescription</span><span class="sxs-lookup"><span data-stu-id="85363-128">ViolationDescription</span></span> | <span data-ttu-id="85363-129">RiskCategory</span><span class="sxs-lookup"><span data-stu-id="85363-129">RiskCategory</span></span> |
| --- | --- | --- |
| <span data-ttu-id="85363-130">Routine non planifiée</span><span class="sxs-lookup"><span data-stu-id="85363-130">Routine - Unscheduled</span></span> | <span data-ttu-id="85363-131">Surfaces de contact alimentaire nettoyées ou désinfectées de manière inappropriée</span><span class="sxs-lookup"><span data-stu-id="85363-131">Inadequately cleaned or sanitized food contact surfaces</span></span> | <span data-ttu-id="85363-132">Risque modéré</span><span class="sxs-lookup"><span data-stu-id="85363-132">Moderate Risk</span></span> |
| <span data-ttu-id="85363-133">Nouvelle propriété</span><span class="sxs-lookup"><span data-stu-id="85363-133">New Ownership</span></span> | <span data-ttu-id="85363-134">Infestation des vermines à risque élevé</span><span class="sxs-lookup"><span data-stu-id="85363-134">High risk vermin infestation</span></span> | <span data-ttu-id="85363-135">Risque élevé</span><span class="sxs-lookup"><span data-stu-id="85363-135">High Risk</span></span> |
| <span data-ttu-id="85363-136">Routine non planifiée</span><span class="sxs-lookup"><span data-stu-id="85363-136">Routine - Unscheduled</span></span> | <span data-ttu-id="85363-137">Les chiffons de nettoyage ne sont pas nettoyés ou correctement stockés ou expurgés</span><span class="sxs-lookup"><span data-stu-id="85363-137">Wiping cloths not clean or properly stored or inadequate sanitizer</span></span> | <span data-ttu-id="85363-138">Risque faible</span><span class="sxs-lookup"><span data-stu-id="85363-138">Low Risk</span></span> |

- <span data-ttu-id="85363-139">**InspectionType**: type d’inspection.</span><span class="sxs-lookup"><span data-stu-id="85363-139">**InspectionType**: the type of inspection.</span></span> <span data-ttu-id="85363-140">Il peut s’agir de la première inspection d’un nouvel établissement, d’une inspection de routine, d’une inspection des plaintes et de nombreux autres types.</span><span class="sxs-lookup"><span data-stu-id="85363-140">This can either be a first-time inspection for a new establishment, a routine inspection, a complaint inspection, and many other types.</span></span>
- <span data-ttu-id="85363-141">**ViolationDescription**: description de la violation trouvée lors de l’inspection.</span><span class="sxs-lookup"><span data-stu-id="85363-141">**ViolationDescription**: a description of the violation found during inspection.</span></span>
- <span data-ttu-id="85363-142">**RiskCategory**: gravité du risque qu’une violation pose à la sécurité et à la santé publique.</span><span class="sxs-lookup"><span data-stu-id="85363-142">**RiskCategory**: the risk severity a violation poses to public health and safety.</span></span>

<span data-ttu-id="85363-143">`label` est la colonne à prédire.</span><span class="sxs-lookup"><span data-stu-id="85363-143">The `label` is the column you want to predict.</span></span> <span data-ttu-id="85363-144">Lors de l’exécution d’une tâche de classification, l’objectif est d’affecter une catégorie (texte ou numérique).</span><span class="sxs-lookup"><span data-stu-id="85363-144">When performing a classification task, the goal is to assign a category (text or numerical).</span></span> <span data-ttu-id="85363-145">Dans ce scénario de classification, la gravité de la violation se voit affecter la valeur de risque faible, modéré ou élevé.</span><span class="sxs-lookup"><span data-stu-id="85363-145">In this classification scenario, the severity of the violation is assigned the value of low, moderate, or high risk.</span></span> <span data-ttu-id="85363-146">Par conséquent, **RiskCategory** est l’étiquette.</span><span class="sxs-lookup"><span data-stu-id="85363-146">Therefore, the **RiskCategory** is the label.</span></span> <span data-ttu-id="85363-147">Les `features` sont les entrées que vous fournissez au modèle pour prédire les `label`.</span><span class="sxs-lookup"><span data-stu-id="85363-147">The `features` are the inputs you give the model to predict the `label`.</span></span> <span data-ttu-id="85363-148">Dans ce cas, les **InspectionType** et **ViolationDescription** sont utilisés en tant que fonctionnalités ou entrées pour prédire le **RiskCategory**.</span><span class="sxs-lookup"><span data-stu-id="85363-148">In this case, the **InspectionType** and **ViolationDescription** are used as features or inputs to predict the **RiskCategory**.</span></span>

## <a name="choose-a-scenario"></a><span data-ttu-id="85363-149">Choisir un scénario</span><span class="sxs-lookup"><span data-stu-id="85363-149">Choose a scenario</span></span>

![Assistant Générateur de modèles dans Visual Studio](./media/sentiment-analysis-model-builder/model-builder-screen.png)

<span data-ttu-id="85363-151">Pour effectuer l’apprentissage de votre modèle, sélectionnez dans la liste des scénarios de Machine Learning disponibles fournis par le générateur de modèles.</span><span class="sxs-lookup"><span data-stu-id="85363-151">To train your model, select from the list of available machine learning scenarios provided by Model Builder.</span></span> <span data-ttu-id="85363-152">Dans ce cas, le scénario est la *classification des problèmes*.</span><span class="sxs-lookup"><span data-stu-id="85363-152">In this case, the scenario is *Issue Classification*.</span></span>

1. <span data-ttu-id="85363-153">Dans **Explorateur de solutions**, cliquez avec le bouton droit sur le projet *RestaurantViolations* , puis sélectionnez **Ajouter** > **machine learning**.</span><span class="sxs-lookup"><span data-stu-id="85363-153">In **Solution Explorer**, right-click the *RestaurantViolations* project, and select **Add** > **Machine Learning**.</span></span>
1. <span data-ttu-id="85363-154">Pour cet exemple, le scénario est la classification multiclasse.</span><span class="sxs-lookup"><span data-stu-id="85363-154">For this sample, the scenario is multiclass classification.</span></span> <span data-ttu-id="85363-155">Dans l’étape *scénario* du générateur de modèles, sélectionnez le scénario de **classification des problèmes** .</span><span class="sxs-lookup"><span data-stu-id="85363-155">In the *Scenario* step of Model Builder, select the **Issue Classification** scenario.</span></span>

## <a name="load-the-data"></a><span data-ttu-id="85363-156">Charger les données</span><span class="sxs-lookup"><span data-stu-id="85363-156">Load the data</span></span>

<span data-ttu-id="85363-157">Le générateur de modèles accepte les données d’une base de données SQL Server ou d’un fichier local au format `csv` ou `tsv`.</span><span class="sxs-lookup"><span data-stu-id="85363-157">Model Builder accepts data from a SQL Server database or a local file in `csv` or `tsv` format.</span></span>

1. <span data-ttu-id="85363-158">Dans l’étape données de l’outil générateur de modèles, sélectionnez **SQL Server** dans la liste déroulante source de données.</span><span class="sxs-lookup"><span data-stu-id="85363-158">In the data step of the Model Builder tool, select **SQL Server** from the data source dropdown.</span></span>
1. <span data-ttu-id="85363-159">Sélectionnez le bouton en regard de la zone **de texte connexion à SQL Server base de données** .</span><span class="sxs-lookup"><span data-stu-id="85363-159">Select the button next to the **Connect to SQL Server database** text box.</span></span>
    1. <span data-ttu-id="85363-160">Dans la boîte de dialogue **choisir des données** , sélectionnez **Microsoft SQL Server fichier de base de données**.</span><span class="sxs-lookup"><span data-stu-id="85363-160">In the **Choose Data** dialog, select **Microsoft SQL Server Database File**.</span></span>
    1. <span data-ttu-id="85363-161">Désactivez la case à cocher **toujours utiliser cette sélection** , puis sélectionnez **Continuer**.</span><span class="sxs-lookup"><span data-stu-id="85363-161">Uncheck the **Always use this selection** checkbox and select **Continue**.</span></span>
    1. <span data-ttu-id="85363-162">Dans la boîte de dialogue **Propriétés de connexion** , sélectionnez **Parcourir** , puis sélectionnez le fichier *RestaurantScores. mdf* téléchargé.</span><span class="sxs-lookup"><span data-stu-id="85363-162">In the **Connection Properties** dialog, select **Browse** and select the downloaded *RestaurantScores.mdf* file.</span></span>
    1. <span data-ttu-id="85363-163">Sélectionnez **OK**.</span><span class="sxs-lookup"><span data-stu-id="85363-163">Select **OK**.</span></span>
1. <span data-ttu-id="85363-164">Choisissez **violations** dans la liste déroulante nom de la **table** .</span><span class="sxs-lookup"><span data-stu-id="85363-164">Choose **Violations** from the **Table Name** dropdown.</span></span>
1. <span data-ttu-id="85363-165">Choisissez **RiskCategory** dans la liste déroulante **colonne à prédire (étiquette)** .</span><span class="sxs-lookup"><span data-stu-id="85363-165">Choose **RiskCategory** in the **Column to Predict (Label)** dropdown.</span></span>
1. <span data-ttu-id="85363-166">Laissez les sélections de colonnes par défaut, **InspectionType** et **ViolationDescription**, cochées dans la liste déroulante **colonnes d’entrée (fonctionnalités)** .</span><span class="sxs-lookup"><span data-stu-id="85363-166">Leave the default column selections, **InspectionType** and **ViolationDescription**, checked in the **Input Columns (Features)** dropdown.</span></span>
1. <span data-ttu-id="85363-167">Sélectionnez le lien **train** pour passer à l’étape suivante dans le générateur de modèles.</span><span class="sxs-lookup"><span data-stu-id="85363-167">Select the **Train** link to move to the next step in Model Builder.</span></span>

## <a name="train-the-model"></a><span data-ttu-id="85363-168">Effectuer l’apprentissage du modèle</span><span class="sxs-lookup"><span data-stu-id="85363-168">Train the model</span></span>

<span data-ttu-id="85363-169">La tâche de Machine Learning utilisée pour l’apprentissage du modèle de classification des problèmes dans ce didacticiel est la classification multiclasse.</span><span class="sxs-lookup"><span data-stu-id="85363-169">The machine learning task used to train the issue classification model in this tutorial is multiclass classification.</span></span> <span data-ttu-id="85363-170">Pendant le processus d’apprentissage du modèle, le générateur de modèles forme des modèles distincts à l’aide de différents algorithmes et paramètres de classification multiclasse pour trouver le modèle le plus performant pour votre jeu de données.</span><span class="sxs-lookup"><span data-stu-id="85363-170">During the model training process, Model Builder trains separate models using different multiclass classification algorithms and settings to find the best performing model for your dataset.</span></span>

<span data-ttu-id="85363-171">Le temps nécessaire à l’apprentissage du modèle est proportionnel à la quantité de données.</span><span class="sxs-lookup"><span data-stu-id="85363-171">The time required for the model to train is proportional to the amount of data.</span></span> <span data-ttu-id="85363-172">Le générateur de modèles sélectionne automatiquement une valeur par défaut pour le **temps de formation (en secondes)** en fonction de la taille de votre source de données.</span><span class="sxs-lookup"><span data-stu-id="85363-172">Model Builder automatically selects a default value for **Time to train (seconds)** based on the size of your data source.</span></span>

1. <span data-ttu-id="85363-173">Bien que le générateur de modèles définisse la valeur de **temps à former (secondes)** à 10 secondes, augmentez-le à 30 secondes.</span><span class="sxs-lookup"><span data-stu-id="85363-173">Although Model Builder sets the value of **Time to train (seconds)** to 10 seconds, increase it to 30 seconds.</span></span> <span data-ttu-id="85363-174">La formation sur une période plus longue permet au générateur de modèles d’explorer un plus grand nombre d’algorithmes et une combinaison de paramètres dans la recherche du meilleur modèle.</span><span class="sxs-lookup"><span data-stu-id="85363-174">Training for a longer period of time allows Model Builder to explore a larger number of algorithms and combination of parameters in search of the best model.</span></span>
1. <span data-ttu-id="85363-175">Sélectionnez **Commencer l’entraînement**.</span><span class="sxs-lookup"><span data-stu-id="85363-175">Select **Start Training**.</span></span>

    <span data-ttu-id="85363-176">Tout au long du processus d’entraînement, des données sur la progression s’affichent dans la section `Progress` de l’étape d’entraînement.</span><span class="sxs-lookup"><span data-stu-id="85363-176">Throughout the training process, progress data is displayed in the `Progress` section of the train step.</span></span>

    - <span data-ttu-id="85363-177">**État** affiche l’état d’achèvement du processus d’apprentissage.</span><span class="sxs-lookup"><span data-stu-id="85363-177">**Status** displays the completion status of the training process.</span></span>
    - <span data-ttu-id="85363-178">**Meilleure précision** affiche la précision du modèle le plus performant trouvé par le générateur de modèles jusqu’à présent.</span><span class="sxs-lookup"><span data-stu-id="85363-178">**Best accuracy** displays the accuracy of the best performing model found by Model Builder so far.</span></span> <span data-ttu-id="85363-179">Une précision plus élevée signifie que le modèle a prédit plus correctement sur les données de test.</span><span class="sxs-lookup"><span data-stu-id="85363-179">Higher accuracy means the model predicted more correctly on test data.</span></span>
    - <span data-ttu-id="85363-180">**Best algorithm** affiche le nom de l’algorithme le plus performant trouvé par le générateur de modèles jusqu’à présent.</span><span class="sxs-lookup"><span data-stu-id="85363-180">**Best algorithm** displays the name of the best-performing algorithm found by Model Builder so far.</span></span>
    - <span data-ttu-id="85363-181">**Dernier algorithme** affiche le nom de l’algorithme le plus récemment utilisé par le générateur de modèles pour effectuer l’apprentissage du modèle.</span><span class="sxs-lookup"><span data-stu-id="85363-181">**Last algorithm** displays the name of the algorithm most recently used by Model Builder to train the model.</span></span>

1. <span data-ttu-id="85363-182">Une fois l’apprentissage terminé, sélectionnez le lien **évaluer** pour passer à l’étape suivante.</span><span class="sxs-lookup"><span data-stu-id="85363-182">Once training is complete, select the **Evaluate** link to move to the next step.</span></span>

## <a name="evaluate-the-model"></a><span data-ttu-id="85363-183">Évaluer le modèle</span><span class="sxs-lookup"><span data-stu-id="85363-183">Evaluate the model</span></span>

<span data-ttu-id="85363-184">Le résultat de l’étape de formation est le seul modèle qui avait les meilleures performances.</span><span class="sxs-lookup"><span data-stu-id="85363-184">The result of the training step is the one model that had the best performance.</span></span> <span data-ttu-id="85363-185">Dans l’étape évaluer du générateur de modèles, la section de sortie contient l’algorithme utilisé par le modèle le mieux adapté à l’entrée de **modèle la plus** performante, ainsi que les métriques dans la **meilleure précision de modèle**.</span><span class="sxs-lookup"><span data-stu-id="85363-185">In the evaluate step of Model Builder, the output section contains the algorithm used by the best performing model in the **Best Model** entry along with metrics in **Best Model Accuracy**.</span></span> <span data-ttu-id="85363-186">En outre, une table de résumé contenant jusqu’à cinq modèles qui ont été explorés et leurs métriques s’affiche.</span><span class="sxs-lookup"><span data-stu-id="85363-186">Additionally, a summary table containing up to five models that were explored and their metrics is displayed.</span></span>

<span data-ttu-id="85363-187">Si vous n’êtes pas satisfait de vos mesures de précision, vous pouvez facilement essayer d’améliorer la précision du modèle en augmentant la durée nécessaire à l’apprentissage du modèle ou à l’utilisation de plus de données.</span><span class="sxs-lookup"><span data-stu-id="85363-187">If you're not satisfied with your accuracy metrics, some easy ways to try to improve model accuracy are to increase the amount of time to train the model or use more data.</span></span> <span data-ttu-id="85363-188">Sinon, sélectionnez le lien de **code** pour passer à l’étape finale dans le générateur de modèles.</span><span class="sxs-lookup"><span data-stu-id="85363-188">Otherwise, select the **code** link to move to the final step in Model Builder.</span></span>

## <a name="add-the-code-to-make-predictions"></a><span data-ttu-id="85363-189">Ajouter le code pour effectuer des prédictions</span><span class="sxs-lookup"><span data-stu-id="85363-189">Add the code to make predictions</span></span>

<span data-ttu-id="85363-190">Deux projets sont créés à la suite du processus d’apprentissage.</span><span class="sxs-lookup"><span data-stu-id="85363-190">Two projects are created as a result of the training process.</span></span>

- <span data-ttu-id="85363-191">RestaurantViolationsML. ConsoleApp : application C# console .net core qui contient l’apprentissage du modèle et le code de consommation des exemples.</span><span class="sxs-lookup"><span data-stu-id="85363-191">RestaurantViolationsML.ConsoleApp: A C# .NET Core Console application that contains the model training and sample consumption code.</span></span>
- <span data-ttu-id="85363-192">RestaurantViolationsML. Model : bibliothèque de classes .NET Standard contenant les modèles de données qui définissent le schéma des données de modèle d’entrée et de sortie, la version enregistrée du modèle le plus performant au cours de l’apprentissage et une classe d’assistance appelée `ConsumeModel` pour effectuer des prédictions.</span><span class="sxs-lookup"><span data-stu-id="85363-192">RestaurantViolationsML.Model: A .NET Standard class library containing the data models that define the schema of input and output model data, the saved version of the best performing model during training, and a helper class called `ConsumeModel` to make predictions.</span></span>

1. <span data-ttu-id="85363-193">Dans l’étape de code du générateur de modèles, sélectionnez **Ajouter des projets** pour ajouter les projets générés automatiquement à la solution.</span><span class="sxs-lookup"><span data-stu-id="85363-193">In the code step of Model Builder, select **Add Projects** to add the autogenerated projects to the solution.</span></span>
1. <span data-ttu-id="85363-194">Ouvrez le fichier *Program.cs* dans le projet *RestaurantViolations* .</span><span class="sxs-lookup"><span data-stu-id="85363-194">Open the *Program.cs* file in the *RestaurantViolations* project.</span></span>
1. <span data-ttu-id="85363-195">Ajoutez l’instruction using suivante pour référencer le projet *RestaurantViolationsML. Model* :</span><span class="sxs-lookup"><span data-stu-id="85363-195">Add the following using statement to reference the *RestaurantViolationsML.Model* project:</span></span>

    [!code-csharp [ProgramUsings](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L2)]

1. <span data-ttu-id="85363-196">Pour effectuer une prédiction sur les nouvelles données à l’aide du modèle, créez une nouvelle instance de la classe `ModelInput` à l’intérieur de la méthode `Main` de votre application.</span><span class="sxs-lookup"><span data-stu-id="85363-196">To make a prediction on new data using the model, create a new instance of the `ModelInput` class inside the `Main` method of your application.</span></span> <span data-ttu-id="85363-197">Notez que la catégorie risque ne fait pas partie de l’entrée.</span><span class="sxs-lookup"><span data-stu-id="85363-197">Notice that the risk category is not part of the input.</span></span> <span data-ttu-id="85363-198">Cela est dû au fait que le modèle génère la prédiction pour celui-ci.</span><span class="sxs-lookup"><span data-stu-id="85363-198">This is because the model generates the prediction for it.</span></span>

    [!code-csharp [TestData](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L11-L15)]

1. <span data-ttu-id="85363-199">Utilisez la méthode `Predict` de la classe `ConsumeModel`.</span><span class="sxs-lookup"><span data-stu-id="85363-199">Use the `Predict` method from the `ConsumeModel` class.</span></span> <span data-ttu-id="85363-200">La méthode `Predict` charge le modèle formé, crée une [`PredictionEngine`](xref:Microsoft.ML.PredictionEngine%602) pour le modèle et l’utilise pour effectuer des prédictions sur de nouvelles données.</span><span class="sxs-lookup"><span data-stu-id="85363-200">The `Predict` method loads the trained model, creates a [`PredictionEngine`](xref:Microsoft.ML.PredictionEngine%602) for the model, and uses it to make predictions on new data.</span></span>

    [!code-csharp [Prediction](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L17-L24)]

1. <span data-ttu-id="85363-201">Exécutez l'application.</span><span class="sxs-lookup"><span data-stu-id="85363-201">Run the application.</span></span>

    <span data-ttu-id="85363-202">La sortie générée par le programme doit se présenter comme l’extrait de code ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="85363-202">The output generated by the program should look similar to the snippet below:</span></span>

    ```bash
    Inspection Type: Complaint
    Violation Description: Inadequate sewage or wastewater disposal
    Risk Category: Moderate Risk
    ```

<span data-ttu-id="85363-203">Si vous devez référencer ultérieurement les projets générés à l’intérieur d’une autre solution, vous pouvez les trouver dans le répertoire `C:\Users\%USERNAME%\AppData\Local\Temp\MLVSTools`.</span><span class="sxs-lookup"><span data-stu-id="85363-203">If you need to reference the generated projects at a later time inside of another solution, you can find them inside the `C:\Users\%USERNAME%\AppData\Local\Temp\MLVSTools` directory.</span></span>

<span data-ttu-id="85363-204">Félicitations !</span><span class="sxs-lookup"><span data-stu-id="85363-204">Congratulations!</span></span> <span data-ttu-id="85363-205">Vous avez correctement créé un modèle de Machine Learning pour classer les risques de violations d’intégrité à l’aide du générateur de modèles.</span><span class="sxs-lookup"><span data-stu-id="85363-205">You've successfully built a machine learning model to categorize the risk of health violations using Model Builder.</span></span> <span data-ttu-id="85363-206">Vous pouvez trouver le code source de ce didacticiel dans le référentiel GitHub [dotnet/machinelearning-Samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) .</span><span class="sxs-lookup"><span data-stu-id="85363-206">You can find the source code for this tutorial at the [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) GitHub repository.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="85363-207">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="85363-207">Additional resources</span></span>

<span data-ttu-id="85363-208">Pour en savoir plus sur les rubriques mentionnées dans ce tutoriel, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="85363-208">To learn more about topics mentioned in this tutorial, visit the following resources:</span></span>

- [<span data-ttu-id="85363-209">Scénarios du Générateur de modèles</span><span class="sxs-lookup"><span data-stu-id="85363-209">Model Builder Scenarios</span></span>](../automate-training-with-model-builder.md#scenarios)
- [<span data-ttu-id="85363-210">Classification multiclasse</span><span class="sxs-lookup"><span data-stu-id="85363-210">Multiclass Classification</span></span>](../resources/glossary.md#multiclass-classification)
- [<span data-ttu-id="85363-211">Métriques du modèle de classification multiclasse</span><span class="sxs-lookup"><span data-stu-id="85363-211">Multiclass Classification Model Metrics</span></span>](../resources/metrics.md#evaluation-metrics-for-multi-class-classification)
