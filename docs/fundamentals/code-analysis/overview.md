---
title: Analyse du code dans .NET
titleSuffix: ''
description: En savoir plus sur l’analyse du code source dans le kit de développement logiciel (SDK) .NET.
ms.date: 08/22/2020
ms.topic: overview
ms.custom: updateeachrelease
helpviewer_keywords:
- code analysis
- code analyzers
ms.openlocfilehash: 8efac4d5e3fddcb9fdc6e08bcc933f2776420ced
ms.sourcegitcommit: ecd9e9bb2225eb76f819722ea8b24988fe46f34c
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/05/2020
ms.locfileid: "96739972"
---
# <a name="overview-of-net-source-code-analysis"></a><span data-ttu-id="fd566-103">Vue d’ensemble de l’analyse du code source .NET</span><span class="sxs-lookup"><span data-stu-id="fd566-103">Overview of .NET source code analysis</span></span>

<span data-ttu-id="fd566-104">Les analyseurs .NET Compiler Platform (Roslyn) inspectent la qualité et les problèmes de styles de code de votre code C# ou Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="fd566-104">.NET compiler platform (Roslyn) analyzers inspect your C# or Visual Basic code for code quality and code style issues.</span></span> <span data-ttu-id="fd566-105">À compter de .NET 5.0, ces analyseurs sont inclus dans le kit de développement logiciel (SDK) .NET.</span><span class="sxs-lookup"><span data-stu-id="fd566-105">Starting in .NET 5.0, these analyzers are included with the .NET SDK.</span></span> <span data-ttu-id="fd566-106">Si vous ne souhaitez pas migrer vers le kit de développement logiciel (SDK) .NET 5 + ou si vous préférez un modèle basé sur un package NuGet, les analyseurs sont également disponibles dans le `Microsoft.CodeAnalysis.NetAnalyzers` [package NuGet](https://www.nuget.org/packages/Microsoft.CodeAnalysis.NetAnalyzers).</span><span class="sxs-lookup"><span data-stu-id="fd566-106">If you don't want to move to the .NET 5+ SDK or if you prefer a NuGet package-based model, the analyzers are also available in the `Microsoft.CodeAnalysis.NetAnalyzers` [NuGet package](https://www.nuget.org/packages/Microsoft.CodeAnalysis.NetAnalyzers).</span></span> <span data-ttu-id="fd566-107">Vous préférerez peut-être un modèle basé sur des packages pour les mises à jour de version à la demande.</span><span class="sxs-lookup"><span data-stu-id="fd566-107">You might prefer a package-based model for on-demand version updates.</span></span>

> [!NOTE]
> <span data-ttu-id="fd566-108">Les analyseurs .NET sont indépendants de la plateforme cible.</span><span class="sxs-lookup"><span data-stu-id="fd566-108">.NET analyzers are target-platform agnostic.</span></span> <span data-ttu-id="fd566-109">Autrement dit, votre projet n’a pas besoin de cibler une plateforme .NET spécifique.</span><span class="sxs-lookup"><span data-stu-id="fd566-109">That is, your project does not need to target a specific .NET platform.</span></span> <span data-ttu-id="fd566-110">Les analyseurs fonctionnent pour les projets qui ciblent ainsi que les `net5.0` versions antérieures de .net, telles que `netcoreapp` , `netstandard` et `net472` .</span><span class="sxs-lookup"><span data-stu-id="fd566-110">The analyzers work for projects that target `net5.0` as well as earlier .NET versions, such as `netcoreapp`, `netstandard`, and `net472`.</span></span>

- [<span data-ttu-id="fd566-111">Analyse de la qualité du code (règles « CAXXXX »)</span><span class="sxs-lookup"><span data-stu-id="fd566-111">Code quality analysis ("CAxxxx" rules)</span></span>](#code-quality-analysis)
- [<span data-ttu-id="fd566-112">Analyse de style de code (règles « IDExxxx »)</span><span class="sxs-lookup"><span data-stu-id="fd566-112">Code style analysis ("IDExxxx" rules)</span></span>](#code-style-analysis)

<span data-ttu-id="fd566-113">Si un analyseur détecte des violations de règle, celles-ci sont signalées sous la forme d’une suggestion, d’un avertissement ou d’une erreur, selon la façon dont chaque règle est [configurée](configuration-options.md).</span><span class="sxs-lookup"><span data-stu-id="fd566-113">If rule violations are found by an analyzer, they're reported as a suggestion, warning, or error, depending on how each rule is [configured](configuration-options.md).</span></span> <span data-ttu-id="fd566-114">Les violations de l’analyse du code s’affichent avec le préfixe « CA » ou « IDE » pour les différencier des erreurs du compilateur.</span><span class="sxs-lookup"><span data-stu-id="fd566-114">Code analysis violations appear with the prefix "CA" or "IDE" to differentiate them from compiler errors.</span></span>

> [!TIP]
>
> - <span data-ttu-id="fd566-115">Vous pouvez également installer des analyseurs tiers, tels que [StyleCop](https://www.nuget.org/packages/StyleCop.Analyzers/), [Roslynator](https://www.nuget.org/packages/Roslynator.Analyzers/), les [analyseurs xUnit](https://www.nuget.org/packages/xunit.analyzers/)et l' [analyseur sonar](https://www.nuget.org/packages/SonarAnalyzer.CSharp/).</span><span class="sxs-lookup"><span data-stu-id="fd566-115">You can also install third party analyzers, such as [StyleCop](https://www.nuget.org/packages/StyleCop.Analyzers/), [Roslynator](https://www.nuget.org/packages/Roslynator.Analyzers/), [XUnit Analyzers](https://www.nuget.org/packages/xunit.analyzers/), and [Sonar Analyzer](https://www.nuget.org/packages/SonarAnalyzer.CSharp/).</span></span>
> - <span data-ttu-id="fd566-116">Si vous utilisez Visual Studio, de nombreuses règles de l’analyseur sont associées à des *correctifs de code* que vous pouvez appliquer pour corriger le problème.</span><span class="sxs-lookup"><span data-stu-id="fd566-116">If you're using Visual Studio, many analyzer rules have associated *code fixes* that you can apply to correct the problem.</span></span> <span data-ttu-id="fd566-117">Les corrections de code s’affichent dans le menu de l’icône d’ampoule.</span><span class="sxs-lookup"><span data-stu-id="fd566-117">Code fixes are shown in the light bulb icon menu.</span></span>

## <a name="code-quality-analysis"></a><span data-ttu-id="fd566-118">Analyse de la qualité du code</span><span class="sxs-lookup"><span data-stu-id="fd566-118">Code quality analysis</span></span>

<span data-ttu-id="fd566-119">Les règles d’analyse de la _qualité du code (« ca »)_ inspectent votre code C# ou Visual Basic pour la sécurité, les performances, la conception et d’autres problèmes.</span><span class="sxs-lookup"><span data-stu-id="fd566-119">_Code quality analysis ("CA") rules_ inspect your C# or Visual Basic code for security, performance, design and other issues.</span></span> <span data-ttu-id="fd566-120">L’analyse est activée par défaut pour les projets qui ciblent .NET 5,0 ou une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="fd566-120">Analysis is enabled, by default, for projects that target .NET 5.0 or later.</span></span> <span data-ttu-id="fd566-121">Vous pouvez activer l’analyse du code sur des projets qui ciblent des versions antérieures de .NET en affectant à la propriété [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) la valeur `true` .</span><span class="sxs-lookup"><span data-stu-id="fd566-121">You can enable code analysis on projects that target earlier .NET versions by setting the [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) property to `true`.</span></span> <span data-ttu-id="fd566-122">Vous pouvez également désactiver l’analyse du code pour votre projet en affectant à la valeur `EnableNETAnalyzers` `false` .</span><span class="sxs-lookup"><span data-stu-id="fd566-122">You can also disable code analysis for your project by setting `EnableNETAnalyzers` to `false`.</span></span>

> [!TIP]
> <span data-ttu-id="fd566-123">Dans Visual Studio, vous pouvez activer ou désactiver l’analyse du code à l’aide du Fenêtre Propriétés de projet.</span><span class="sxs-lookup"><span data-stu-id="fd566-123">In Visual Studio, you can enable or disable code analysis using the Project Properties window.</span></span> <span data-ttu-id="fd566-124">Pour accéder au Fenêtre Propriétés du projet, cliquez avec le bouton droit sur un projet dans Explorateur de solutions et sélectionnez **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="fd566-124">To access the Project Properties window, right-click on a project within Solution Explorer and select **Properties**.</span></span> <span data-ttu-id="fd566-125">Ensuite, sélectionnez l’onglet **analyse du code** , puis activez ou désactivez la case à cocher pour activer les **analyseurs .net**.</span><span class="sxs-lookup"><span data-stu-id="fd566-125">Next, select the **Code Analysis** tab, and then either select or clear the checkbox to **Enable .NET analyzers**.</span></span>

### <a name="enabled-rules"></a><span data-ttu-id="fd566-126">Règles activées</span><span class="sxs-lookup"><span data-stu-id="fd566-126">Enabled rules</span></span>

<span data-ttu-id="fd566-127">Les règles suivantes sont activées par défaut dans .NET 5,0 Preview 8.</span><span class="sxs-lookup"><span data-stu-id="fd566-127">The following rules are enabled, by default, in .NET 5.0 Preview 8.</span></span>

| <span data-ttu-id="fd566-128">ID de diagnostic</span><span class="sxs-lookup"><span data-stu-id="fd566-128">Diagnostic ID</span></span> | <span data-ttu-id="fd566-129">Category</span><span class="sxs-lookup"><span data-stu-id="fd566-129">Category</span></span> | <span data-ttu-id="fd566-130">Gravité</span><span class="sxs-lookup"><span data-stu-id="fd566-130">Severity</span></span> | <span data-ttu-id="fd566-131">Description</span><span class="sxs-lookup"><span data-stu-id="fd566-131">Description</span></span> |
| - | - | - | - |
| [<span data-ttu-id="fd566-132">CA1416</span><span class="sxs-lookup"><span data-stu-id="fd566-132">CA1416</span></span>](/visualstudio/code-quality/ca1416) | <span data-ttu-id="fd566-133">Interopérabilité</span><span class="sxs-lookup"><span data-stu-id="fd566-133">Interoperability</span></span> | <span data-ttu-id="fd566-134">Avertissement</span><span class="sxs-lookup"><span data-stu-id="fd566-134">Warning</span></span> | <span data-ttu-id="fd566-135">Analyseur de compatibilité de plateforme</span><span class="sxs-lookup"><span data-stu-id="fd566-135">Platform compatibility analyzer</span></span> |
| [<span data-ttu-id="fd566-136">CA1417</span><span class="sxs-lookup"><span data-stu-id="fd566-136">CA1417</span></span>](/visualstudio/code-quality/ca1417) | <span data-ttu-id="fd566-137">Interopérabilité</span><span class="sxs-lookup"><span data-stu-id="fd566-137">Interoperability</span></span> | <span data-ttu-id="fd566-138">Avertissement</span><span class="sxs-lookup"><span data-stu-id="fd566-138">Warning</span></span> | <span data-ttu-id="fd566-139">Ne pas utiliser `OutAttribute` sur les paramètres de chaîne pour P/Invoke</span><span class="sxs-lookup"><span data-stu-id="fd566-139">Do not use `OutAttribute` on string parameters for P/Invokes</span></span> |
| [<span data-ttu-id="fd566-140">CA1831</span><span class="sxs-lookup"><span data-stu-id="fd566-140">CA1831</span></span>](/visualstudio/code-quality/ca1831) | <span data-ttu-id="fd566-141">Performances</span><span class="sxs-lookup"><span data-stu-id="fd566-141">Performance</span></span> | <span data-ttu-id="fd566-142">Avertissement</span><span class="sxs-lookup"><span data-stu-id="fd566-142">Warning</span></span> | <span data-ttu-id="fd566-143">Utilisez `AsSpan` à la place des indexeurs de plage pour la chaîne quand cela est approprié</span><span class="sxs-lookup"><span data-stu-id="fd566-143">Use `AsSpan` instead of range-based indexers for string when appropriate</span></span> |
| [<span data-ttu-id="fd566-144">CA2013</span><span class="sxs-lookup"><span data-stu-id="fd566-144">CA2013</span></span>](/visualstudio/code-quality/ca2013) | <span data-ttu-id="fd566-145">Fiabilité</span><span class="sxs-lookup"><span data-stu-id="fd566-145">Reliability</span></span> | <span data-ttu-id="fd566-146">Avertissement</span><span class="sxs-lookup"><span data-stu-id="fd566-146">Warning</span></span> | <span data-ttu-id="fd566-147">Ne pas utiliser `ReferenceEquals` avec les types valeur</span><span class="sxs-lookup"><span data-stu-id="fd566-147">Do not use `ReferenceEquals` with value types</span></span> |
| [<span data-ttu-id="fd566-148">CA2014</span><span class="sxs-lookup"><span data-stu-id="fd566-148">CA2014</span></span>](/visualstudio/code-quality/ca2014) | <span data-ttu-id="fd566-149">Fiabilité</span><span class="sxs-lookup"><span data-stu-id="fd566-149">Reliability</span></span> | <span data-ttu-id="fd566-150">Avertissement</span><span class="sxs-lookup"><span data-stu-id="fd566-150">Warning</span></span> | <span data-ttu-id="fd566-151">Ne pas utiliser `stackalloc` dans les boucles</span><span class="sxs-lookup"><span data-stu-id="fd566-151">Do not use `stackalloc` in loops</span></span> |
| [<span data-ttu-id="fd566-152">CA2015</span><span class="sxs-lookup"><span data-stu-id="fd566-152">CA2015</span></span>](/visualstudio/code-quality/ca2015) | <span data-ttu-id="fd566-153">Fiabilité</span><span class="sxs-lookup"><span data-stu-id="fd566-153">Reliability</span></span> | <span data-ttu-id="fd566-154">Avertissement</span><span class="sxs-lookup"><span data-stu-id="fd566-154">Warning</span></span> | <span data-ttu-id="fd566-155">Ne définissez pas de finaliseurs pour les types dérivés de <xref:System.Buffers.MemoryManager%601></span><span class="sxs-lookup"><span data-stu-id="fd566-155">Do not define finalizers for types derived from <xref:System.Buffers.MemoryManager%601></span></span> |
| [<span data-ttu-id="fd566-156">CA2200</span><span class="sxs-lookup"><span data-stu-id="fd566-156">CA2200</span></span>](/visualstudio/code-quality/ca2200) | <span data-ttu-id="fd566-157">Utilisation</span><span class="sxs-lookup"><span data-stu-id="fd566-157">Usage</span></span> | <span data-ttu-id="fd566-158">Avertissement</span><span class="sxs-lookup"><span data-stu-id="fd566-158">Warning</span></span> | <span data-ttu-id="fd566-159">Levez à nouveau une exception pour conserver les détails de la pile</span><span class="sxs-lookup"><span data-stu-id="fd566-159">Rethrow to preserve stack details</span></span>
| [<span data-ttu-id="fd566-160">CA2247</span><span class="sxs-lookup"><span data-stu-id="fd566-160">CA2247</span></span>](/visualstudio/code-quality/ca2247) | <span data-ttu-id="fd566-161">Utilisation</span><span class="sxs-lookup"><span data-stu-id="fd566-161">Usage</span></span> | <span data-ttu-id="fd566-162">Avertissement</span><span class="sxs-lookup"><span data-stu-id="fd566-162">Warning</span></span> | <span data-ttu-id="fd566-163">L’argument passé au constructeur TaskCompletionSource doit être <xref:System.Threading.Tasks.TaskCreationOptions> enum au lieu de <xref:System.Threading.Tasks.TaskContinuationOptions></span><span class="sxs-lookup"><span data-stu-id="fd566-163">Argument passed to TaskCompletionSource constructor should be <xref:System.Threading.Tasks.TaskCreationOptions> enum instead of <xref:System.Threading.Tasks.TaskContinuationOptions></span></span> |

<span data-ttu-id="fd566-164">Vous pouvez modifier la gravité de ces règles pour les désactiver ou les élever aux erreurs.</span><span class="sxs-lookup"><span data-stu-id="fd566-164">You can change the severity of these rules to disable them or elevate them to errors.</span></span>

<span data-ttu-id="fd566-165">Pour obtenir la liste complète des règles de qualité du code disponibles, consultez [règles de qualité du code](quality-rules/index.md).</span><span class="sxs-lookup"><span data-stu-id="fd566-165">For a full list of available code quality rules, see [Code quality rules](quality-rules/index.md).</span></span>

### <a name="enable-additional-rules"></a><span data-ttu-id="fd566-166">Activer des règles supplémentaires</span><span class="sxs-lookup"><span data-stu-id="fd566-166">Enable additional rules</span></span>

<span data-ttu-id="fd566-167">À compter de .NET 5,0 RC2, le kit de développement logiciel (SDK) .NET est fourni avec toutes les [règles de qualité du code « ca »](/visualstudio/code-quality/code-analysis-for-managed-code-warnings).</span><span class="sxs-lookup"><span data-stu-id="fd566-167">Starting with .NET 5.0 RC2, the .NET SDK ships with all of the ["CA" code quality rules](/visualstudio/code-quality/code-analysis-for-managed-code-warnings).</span></span> <span data-ttu-id="fd566-168">Pour obtenir la liste complète des règles incluses avec chaque version du kit de développement logiciel (SDK) .NET, consultez [releases de l’analyseur](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span><span class="sxs-lookup"><span data-stu-id="fd566-168">For a full list of rules that are included with each .NET SDK version, see [analyzer releases](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span></span>

#### <a name="default-analysis-mode"></a><span data-ttu-id="fd566-169">Mode d’analyse par défaut</span><span class="sxs-lookup"><span data-stu-id="fd566-169">Default analysis mode</span></span>

<span data-ttu-id="fd566-170">Dans le mode d’analyse par défaut, certaines règles sont [activées par défaut](#enabled-rules) en tant qu’avertissements de génération.</span><span class="sxs-lookup"><span data-stu-id="fd566-170">In the default analysis mode, some rules are [enabled by default](#enabled-rules) as build warnings.</span></span> <span data-ttu-id="fd566-171">Certaines autres règles sont activées par défaut uniquement en tant que suggestions de l’IDE Visual Studio avec les corrections de code correspondantes.</span><span class="sxs-lookup"><span data-stu-id="fd566-171">Some other rules are enabled by default only as Visual Studio IDE suggestions with corresponding code fixes.</span></span> <span data-ttu-id="fd566-172">Les règles restantes sont désactivées par défaut.</span><span class="sxs-lookup"><span data-stu-id="fd566-172">The remaining rules are disabled by default.</span></span> <span data-ttu-id="fd566-173">La [liste complète des règles](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md) comprend la gravité par défaut de chaque règle et indique si la règle est activée par défaut dans le mode d’analyse par défaut.</span><span class="sxs-lookup"><span data-stu-id="fd566-173">The [full list of rules](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md) includes each rule's default severity and whether or not the rule is enabled by default in the default analysis mode.</span></span>

#### <a name="custom-analysis-mode"></a><span data-ttu-id="fd566-174">Mode d’analyse personnalisée</span><span class="sxs-lookup"><span data-stu-id="fd566-174">Custom analysis mode</span></span>

<span data-ttu-id="fd566-175">Vous pouvez [configurer des règles d’analyse du code](configuration-options.md) pour activer ou désactiver une règle individuelle ou une catégorie de règles.</span><span class="sxs-lookup"><span data-stu-id="fd566-175">You can [configure code analysis rules](configuration-options.md) to enable or disable an individual rule or a category of rules.</span></span> <span data-ttu-id="fd566-176">En outre, vous pouvez utiliser la propriété [AnalysisMode](../../core/project-sdk/msbuild-props.md#analysismode) pour basculer vers l’un des modes d’analyse personnalisés suivants :</span><span class="sxs-lookup"><span data-stu-id="fd566-176">Additionally, you can use the [AnalysisMode](../../core/project-sdk/msbuild-props.md#analysismode) property to switch to one of the following custom analysis modes:</span></span>

- <span data-ttu-id="fd566-177">Mode _agressif_ ou _opt-out_ : toutes les règles sont activées par défaut en tant qu’avertissements de génération.</span><span class="sxs-lookup"><span data-stu-id="fd566-177">_Aggressive_ or _Opt-out_ mode: All rules are enabled by default as build warnings.</span></span> <span data-ttu-id="fd566-178">Vous pouvez [choisir](configuration-options.md) de désactiver les règles individuelles de manière sélective pour les désactiver.</span><span class="sxs-lookup"><span data-stu-id="fd566-178">You can selectively [opt out](configuration-options.md) of individual rules to disable them.</span></span>
- <span data-ttu-id="fd566-179">Mode _conservateur_ ou _opt-in_ : toutes les règles sont désactivées par défaut.</span><span class="sxs-lookup"><span data-stu-id="fd566-179">_Conservative_ or _Opt-in_ mode: All rules are disabled by default.</span></span> <span data-ttu-id="fd566-180">Vous pouvez [choisir](configuration-options.md) des règles individuelles pour les activer.</span><span class="sxs-lookup"><span data-stu-id="fd566-180">You can selectively [opt into](configuration-options.md) individual rules to enable them.</span></span>

### <a name="treat-warnings-as-errors"></a><span data-ttu-id="fd566-181">Considérer les avertissements comme des erreurs</span><span class="sxs-lookup"><span data-stu-id="fd566-181">Treat warnings as errors</span></span>

<span data-ttu-id="fd566-182">Si vous utilisez l' `-warnaserror` indicateur lorsque vous générez vos projets, tous les avertissements de l’analyse du code sont également traités comme des erreurs.</span><span class="sxs-lookup"><span data-stu-id="fd566-182">If you use the `-warnaserror` flag when you build your projects, all code analysis warnings are also treated as errors.</span></span> <span data-ttu-id="fd566-183">Si vous ne souhaitez pas que les avertissements de qualité du code (CAXXXX) soient traités comme des erreurs en présence de `-warnaserror` , vous pouvez définir la `CodeAnalysisTreatWarningsAsErrors` propriété MSBuild sur `false` dans votre fichier projet.</span><span class="sxs-lookup"><span data-stu-id="fd566-183">If you do not want code quality warnings (CAxxxx) to be treated as errors in presence of `-warnaserror`, you can set the `CodeAnalysisTreatWarningsAsErrors` MSBuild property to `false` in your project file.</span></span>

```xml
<PropertyGroup>
  <CodeAnalysisTreatWarningsAsErrors>false</CodeAnalysisTreatWarningsAsErrors>
</PropertyGroup>
```

<span data-ttu-id="fd566-184">Vous verrez toujours les avertissements liés à l’analyse du code, mais ils ne perturberont pas votre génération.</span><span class="sxs-lookup"><span data-stu-id="fd566-184">You'll still see any code analysis warnings, but they won't break your build.</span></span>

### <a name="latest-updates"></a><span data-ttu-id="fd566-185">Dernières mises à jour</span><span class="sxs-lookup"><span data-stu-id="fd566-185">Latest updates</span></span>

<span data-ttu-id="fd566-186">Par défaut, vous obtiendrez les dernières règles d’analyse du code et les gravités de règle par défaut lors de la mise à niveau vers des versions plus récentes du kit de développement logiciel (SDK) .NET.</span><span class="sxs-lookup"><span data-stu-id="fd566-186">By default, you'll get the latest code analysis rules and default rule severities as you upgrade to newer versions of the .NET SDK.</span></span> <span data-ttu-id="fd566-187">Si vous ne souhaitez pas ce comportement, par exemple, si vous souhaitez vous assurer qu’aucune nouvelle règle n’est activée ou désactivée, vous pouvez la remplacer de l’une des manières suivantes :</span><span class="sxs-lookup"><span data-stu-id="fd566-187">If you don't want this behavior, for example, if you want to ensure that no new rules are enabled or disabled, you can override it in one of the following ways:</span></span>

- <span data-ttu-id="fd566-188">Affectez à la `AnalysisLevel` propriété MSBuild une valeur spécifique pour verrouiller les avertissements à cet ensemble.</span><span class="sxs-lookup"><span data-stu-id="fd566-188">Set the `AnalysisLevel` MSBuild property to a specific value to lock the warnings to that set.</span></span> <span data-ttu-id="fd566-189">Lorsque vous effectuez une mise à niveau vers un kit de développement logiciel (SDK) plus récent, vous obtenez toujours des correctifs de bogues pour ces avertissements, mais aucun nouvel avertissement n’est activé et aucun avertissement existant n’est désactivé.</span><span class="sxs-lookup"><span data-stu-id="fd566-189">When you upgrade to a newer SDK, you'll still get bug fixes for those warnings, but no new warnings will be enabled and no existing warnings will be disabled.</span></span> <span data-ttu-id="fd566-190">Par exemple, pour verrouiller l’ensemble de règles pour celles fournies avec la version 5,0 du kit de développement logiciel (SDK) .NET, ajoutez l’entrée suivante à votre fichier projet.</span><span class="sxs-lookup"><span data-stu-id="fd566-190">For example, to lock the set of rules to those that ship with version 5.0 of the .NET SDK, add the following entry to your project file.</span></span>

  ```xml
  <PropertyGroup>
    <AnalysisLevel>5.0</AnalysisLevel>
  </PropertyGroup>
  ```

  > [!TIP]
  > <span data-ttu-id="fd566-191">La valeur par défaut de la `AnalysisLevel` propriété est `latest` , ce qui signifie que vous recevez toujours les dernières règles d’analyse du code à mesure que vous passez à des versions plus récentes du kit de développement logiciel (SDK) .net.</span><span class="sxs-lookup"><span data-stu-id="fd566-191">The default value for the `AnalysisLevel` property is `latest`, which means you always get the latest code analysis rules as you move to newer versions of the .NET SDK.</span></span>

  <span data-ttu-id="fd566-192">Pour plus d’informations et pour afficher une liste des valeurs possibles, consultez [AnalysisLevel](../../core/project-sdk/msbuild-props.md#analysislevel).</span><span class="sxs-lookup"><span data-stu-id="fd566-192">For more information, and to see a list of possible values, see [AnalysisLevel](../../core/project-sdk/msbuild-props.md#analysislevel).</span></span>

- <span data-ttu-id="fd566-193">Installez le [package NuGet Microsoft. CodeAnalysis. Netanalyzers](https://github.com/dotnet/roslyn-analyzers#microsoftcodeanalysisnetanalyzers) pour découpler les mises à jour des règles des mises à jour du kit de développement logiciel (SDK) .net.</span><span class="sxs-lookup"><span data-stu-id="fd566-193">Install the [Microsoft.CodeAnalysis.NetAnalyzers NuGet package](https://github.com/dotnet/roslyn-analyzers#microsoftcodeanalysisnetanalyzers) to decouple rule updates from .NET SDK updates.</span></span> <span data-ttu-id="fd566-194">L’installation du package désactive les analyseurs SDK intégrés et génère un avertissement de génération si le kit de développement logiciel (SDK) contient une version d’assembly d’analyseur plus récente que celle du package NuGet.</span><span class="sxs-lookup"><span data-stu-id="fd566-194">Installing the package turns off the built-in SDK analyzers and generates a build warning if the SDK contains a newer analyzer assembly version than that of the NuGet package.</span></span>

## <a name="code-style-analysis"></a><span data-ttu-id="fd566-195">Analyse de style de code</span><span class="sxs-lookup"><span data-stu-id="fd566-195">Code style analysis</span></span>

<span data-ttu-id="fd566-196">L' [analyse de style de code](/visualstudio/ide/editorconfig-code-style-settings-reference) (règles « IDExxxx ») vous permet de définir et de maintenir un style de code cohérent dans votre base de code.</span><span class="sxs-lookup"><span data-stu-id="fd566-196">[Code style analysis](/visualstudio/ide/editorconfig-code-style-settings-reference) ("IDExxxx" rules) enables you to define and maintain consistent code style in your codebase.</span></span> <span data-ttu-id="fd566-197">Les paramètres par défaut sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="fd566-197">Following are the default settings:</span></span>

- <span data-ttu-id="fd566-198">Génération de la ligne de commande : l’analyse du style de code est désactivée, par défaut, pour tous les projets .NET sur les générations à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="fd566-198">Command line build: Code style analysis is disabled, by default, for all .NET projects on command-line builds.</span></span>
- <span data-ttu-id="fd566-199">Visual Studio : l’analyse de style de code est activée, par défaut, pour tous les projets .NET dans Visual Studio en tant que [actions rapides de refactorisation de code](/visualstudio/ide/code-generation-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="fd566-199">Visual Studio: Code style analysis is enabled, by default, for all .NET projects inside Visual Studio as [code refactoring quick actions](/visualstudio/ide/code-generation-in-visual-studio).</span></span>

<span data-ttu-id="fd566-200">À partir de .NET 5,0 RC2, vous pouvez activer l’analyse de style de code sur la build, à la fois sur la ligne de commande et dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fd566-200">Starting .NET 5.0 RC2, you can enable code style analysis on build, both at the command line and inside Visual Studio.</span></span> <span data-ttu-id="fd566-201">Les violations de style de code apparaissent sous la forme d’avertissements ou d’erreurs avec un préfixe « IDE ».</span><span class="sxs-lookup"><span data-stu-id="fd566-201">Code style violations appear as warnings or errors with an "IDE" prefix.</span></span> <span data-ttu-id="fd566-202">Cela vous permet d’appliquer des styles de code cohérents au moment de la génération.</span><span class="sxs-lookup"><span data-stu-id="fd566-202">This enables you to enforce consistent code styles at build time.</span></span>

> [!NOTE]
> <span data-ttu-id="fd566-203">La fonctionnalité d’analyse de style de code est expérimentale et peut changer entre les versions .NET 5 et .NET 6.</span><span class="sxs-lookup"><span data-stu-id="fd566-203">The code style analysis feature is experimental and may change between the .NET 5 and .NET 6 releases.</span></span>

<span data-ttu-id="fd566-204">Étapes pour activer l’analyse de style de code sur la build :</span><span class="sxs-lookup"><span data-stu-id="fd566-204">Steps to enable code style analysis on build:</span></span>

1. <span data-ttu-id="fd566-205">Affectez à la propriété MSBuild [EnforceCodeStyleInBuild](../../core/project-sdk/msbuild-props.md#enforcecodestyleinbuild) la valeur `true` .</span><span class="sxs-lookup"><span data-stu-id="fd566-205">Set the MSBuild property [EnforceCodeStyleInBuild](../../core/project-sdk/msbuild-props.md#enforcecodestyleinbuild) to `true`.</span></span>

1. <span data-ttu-id="fd566-206">Dans un fichier *. editorconfig* , [configurez](configuration-options.md) chaque règle de style de code « IDE » que vous souhaitez exécuter lors de la génération comme un avertissement ou une erreur.</span><span class="sxs-lookup"><span data-stu-id="fd566-206">In an *.editorconfig* file, [configure](configuration-options.md) each "IDE" code style rule that you wish to run on build as a warning or an error.</span></span> <span data-ttu-id="fd566-207">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="fd566-207">For example:</span></span>

   ```ini
   [*.{cs,vb}]
   # IDE0040: Accessibility modifiers required (escalated to a build warning)
   dotnet_diagnostic.IDE0040.severity = warning
   ```

   <span data-ttu-id="fd566-208">Vous pouvez également configurer la catégorie « style » entière comme un avertissement ou une erreur, par défaut, puis désactiver de manière sélective les règles que vous ne souhaitez pas exécuter lors de la génération.</span><span class="sxs-lookup"><span data-stu-id="fd566-208">Alternatively, you can configure the entire "Style" category to be a warning or error, by default, and then selectively turn off rules that you don't want to run on build.</span></span> <span data-ttu-id="fd566-209">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="fd566-209">For example:</span></span>

   ```ini
   [*.{cs,vb}]

   # Default severity for analyzer diagnostics with category 'Style' (escalated to build warnings)
   dotnet_analyzer_diagnostic.category-Style.severity = warning

   # IDE0040: Accessibility modifiers required (disabled on build)
   dotnet_diagnostic.IDE0040.severity = silent
   ```

## <a name="suppress-a-warning"></a><span data-ttu-id="fd566-210">Supprimer un avertissement</span><span class="sxs-lookup"><span data-stu-id="fd566-210">Suppress a warning</span></span>

<span data-ttu-id="fd566-211">Pour supprimer une violation de règle, définissez l’option de gravité de cet ID de règle sur `none` dans un fichier EditorConfig.</span><span class="sxs-lookup"><span data-stu-id="fd566-211">To suppress a rule violation, set the severity option for that rule ID to `none` in an EditorConfig file.</span></span> <span data-ttu-id="fd566-212">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="fd566-212">For example:</span></span>

```ini
dotnet_diagnostic.CA1822.severity = none
```

<span data-ttu-id="fd566-213">Visual Studio fournit des méthodes supplémentaires pour supprimer les avertissements des règles d’analyse du code.</span><span class="sxs-lookup"><span data-stu-id="fd566-213">Visual Studio provides additional ways to suppress warnings from code analysis rules.</span></span> <span data-ttu-id="fd566-214">Pour plus d’informations, consultez [Supprimer les violations](/visualstudio/code-quality/use-roslyn-analyzers#suppress-violations).</span><span class="sxs-lookup"><span data-stu-id="fd566-214">For more information, see [Suppress violations](/visualstudio/code-quality/use-roslyn-analyzers#suppress-violations).</span></span>

<span data-ttu-id="fd566-215">Pour plus d’informations sur les niveaux de gravité de la règle, consultez [configurer la gravité](configuration-options.md#severity-level)de la règle.</span><span class="sxs-lookup"><span data-stu-id="fd566-215">For more information about rule severities, see [Configure rule severity](configuration-options.md#severity-level).</span></span>

## <a name="see-also"></a><span data-ttu-id="fd566-216">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="fd566-216">See also</span></span>

- [<span data-ttu-id="fd566-217">Référence de règle d’analyse de la qualité du code</span><span class="sxs-lookup"><span data-stu-id="fd566-217">Code quality analysis rule reference</span></span>](quality-rules/index.md)
- [<span data-ttu-id="fd566-218">Référence de règle d’analyse de style de code</span><span class="sxs-lookup"><span data-stu-id="fd566-218">Code style analysis rule reference</span></span>](style-rules/index.md)
- [<span data-ttu-id="fd566-219">Analyse du code dans Visual Studio</span><span class="sxs-lookup"><span data-stu-id="fd566-219">Code analysis in Visual Studio</span></span>](/visualstudio/code-quality/roslyn-analyzers-overview)
- [<span data-ttu-id="fd566-220">SDK .NET Compiler Platform</span><span class="sxs-lookup"><span data-stu-id="fd566-220">.NET Compiler Platform SDK</span></span>](../../csharp/roslyn-sdk/index.md)
- [<span data-ttu-id="fd566-221">Tutoriel : Écrire votre premier analyseur et correctif de code</span><span class="sxs-lookup"><span data-stu-id="fd566-221">Tutorial: Write your first analyzer and code fix</span></span>](../../csharp/roslyn-sdk/tutorials/how-to-write-csharp-analyzer-code-fix.md)
