---
title: Analyse du code dans .NET
titleSuffix: ''
description: En savoir plus sur l’analyse du code source dans le kit de développement logiciel (SDK) .NET.
ms.date: 12/04/2020
ms.topic: overview
ms.custom: updateeachrelease
helpviewer_keywords:
- code analysis
- code analyzers
ms.openlocfilehash: 80815b5913ad72756de503209b52e8848dd708bf
ms.sourcegitcommit: 5d9cee27d9ffe8f5670e5f663434511e81b8ac38
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2021
ms.locfileid: "98025079"
---
# <a name="overview-of-net-source-code-analysis"></a><span data-ttu-id="ae5b0-103">Vue d’ensemble de l’analyse du code source .NET</span><span class="sxs-lookup"><span data-stu-id="ae5b0-103">Overview of .NET source code analysis</span></span>

<span data-ttu-id="ae5b0-104">Les analyseurs .NET Compiler Platform (Roslyn) inspectent la qualité et les problèmes de styles de code de votre code C# ou Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-104">.NET compiler platform (Roslyn) analyzers inspect your C# or Visual Basic code for code quality and code style issues.</span></span> <span data-ttu-id="ae5b0-105">À compter de .NET 5,0, ces analyseurs sont inclus dans le kit de développement logiciel (SDK) .NET et vous n’avez pas besoin de les installer séparément.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-105">Starting in .NET 5.0, these analyzers are included with the .NET SDK and you don't need to install them separately.</span></span> <span data-ttu-id="ae5b0-106">Si votre projet cible .NET 5 ou une version ultérieure, l’analyse du code est activée par défaut.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-106">If your project targets .NET 5 or later, code analysis is enabled by default.</span></span> <span data-ttu-id="ae5b0-107">Si votre projet cible une implémentation .NET différente, par exemple, .NET Core, .NET Standard ou .NET Framework, vous devez activer manuellement l’analyse du code en affectant à la propriété [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) la valeur `true` .</span><span class="sxs-lookup"><span data-stu-id="ae5b0-107">If your project target a different .NET implementation, for example, .NET Core, .NET Standard, or .NET Framework, you must manually enable code analysis by setting the [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) property to `true`.</span></span>

<span data-ttu-id="ae5b0-108">Si vous ne souhaitez pas migrer vers le kit de développement logiciel (SDK) .NET 5 + ou si vous préférez un modèle basé sur un package NuGet, les analyseurs sont également disponibles dans le [package NuGet Microsoft. CodeAnalysis. Netanalyzers](https://www.nuget.org/packages/Microsoft.CodeAnalysis.NetAnalyzers).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-108">If you don't want to move to the .NET 5+ SDK or if you prefer a NuGet package-based model, the analyzers are also available in the [Microsoft.CodeAnalysis.NetAnalyzers NuGet package](https://www.nuget.org/packages/Microsoft.CodeAnalysis.NetAnalyzers).</span></span> <span data-ttu-id="ae5b0-109">Vous préférerez peut-être un modèle basé sur des packages pour les mises à jour de version à la demande.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-109">You might prefer a package-based model for on-demand version updates.</span></span>

> [!NOTE]
> <span data-ttu-id="ae5b0-110">Les analyseurs .NET sont agnostiques au Framework cible.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-110">.NET analyzers are target-framework agnostic.</span></span> <span data-ttu-id="ae5b0-111">Autrement dit, votre projet n’a pas besoin de cibler une implémentation spécifique de .NET.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-111">That is, your project does not need to target a specific .NET implementation.</span></span> <span data-ttu-id="ae5b0-112">Les analyseurs fonctionnent pour les projets qui ciblent `net5.0` et les versions antérieures de .net, telles que `netcoreapp3.1` et `net472` .</span><span class="sxs-lookup"><span data-stu-id="ae5b0-112">The analyzers work for projects that target `net5.0` as well as earlier .NET versions, such as `netcoreapp3.1` and `net472`.</span></span>

<span data-ttu-id="ae5b0-113">Si un analyseur détecte des violations de règle, celles-ci sont signalées sous la forme d’une suggestion, d’un avertissement ou d’une erreur, selon la façon dont chaque règle est [configurée](configuration-options.md).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-113">If rule violations are found by an analyzer, they're reported as a suggestion, warning, or error, depending on how each rule is [configured](configuration-options.md).</span></span> <span data-ttu-id="ae5b0-114">Les violations de l’analyse du code s’affichent avec le préfixe « CA » ou « IDE » pour les différencier des erreurs du compilateur.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-114">Code analysis violations appear with the prefix "CA" or "IDE" to differentiate them from compiler errors.</span></span>

## <a name="code-quality-analysis"></a><span data-ttu-id="ae5b0-115">Analyse de la qualité du code</span><span class="sxs-lookup"><span data-stu-id="ae5b0-115">Code quality analysis</span></span>

<span data-ttu-id="ae5b0-116">Les règles d’analyse de la *qualité du code* (« CAXXXX ») inspectent votre code C# ou Visual Basic pour la sécurité, les performances, la conception et d’autres problèmes.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-116">*Code quality analysis* ("CAxxxx") rules inspect your C# or Visual Basic code for security, performance, design and other issues.</span></span> <span data-ttu-id="ae5b0-117">L’analyse est activée par défaut pour les projets qui ciblent .NET 5,0 ou une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-117">Analysis is enabled, by default, for projects that target .NET 5.0 or later.</span></span> <span data-ttu-id="ae5b0-118">Vous pouvez activer l’analyse du code sur des projets qui ciblent des versions antérieures de .NET en affectant à la propriété [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) la valeur `true` .</span><span class="sxs-lookup"><span data-stu-id="ae5b0-118">You can enable code analysis on projects that target earlier .NET versions by setting the [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) property to `true`.</span></span> <span data-ttu-id="ae5b0-119">Vous pouvez également désactiver l’analyse du code pour votre projet en affectant à la valeur `EnableNETAnalyzers` `false` .</span><span class="sxs-lookup"><span data-stu-id="ae5b0-119">You can also disable code analysis for your project by setting `EnableNETAnalyzers` to `false`.</span></span>

> [!TIP]
> <span data-ttu-id="ae5b0-120">Si vous utilisez Visual Studio :</span><span class="sxs-lookup"><span data-stu-id="ae5b0-120">If you're using Visual Studio:</span></span>
>
> - <span data-ttu-id="ae5b0-121">De nombreuses règles de l’analyseur sont associées à des *correctifs de code* que vous pouvez appliquer pour corriger le problème.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-121">Many analyzer rules have associated *code fixes* that you can apply to correct the problem.</span></span> <span data-ttu-id="ae5b0-122">Les corrections de code s’affichent dans le menu de l’icône d’ampoule.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-122">Code fixes are shown in the light bulb icon menu.</span></span>
> - <span data-ttu-id="ae5b0-123">Vous pouvez activer ou désactiver l’analyse du code en cliquant avec le bouton droit sur un projet dans Explorateur de solutions et en sélectionnant **Propriétés**  >  onglet **analyse du code** > activer les **analyseurs .net**.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-123">You can enable or disable code analysis by right-clicking on a project in Solution Explorer and selecting **Properties** > **Code Analysis** tab > **Enable .NET analyzers**.</span></span>

### <a name="enabled-rules"></a><span data-ttu-id="ae5b0-124">Règles activées</span><span class="sxs-lookup"><span data-stu-id="ae5b0-124">Enabled rules</span></span>

<span data-ttu-id="ae5b0-125">Les règles suivantes sont activées par défaut dans .NET 5,0.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-125">The following rules are enabled, by default, in .NET 5.0.</span></span>

| <span data-ttu-id="ae5b0-126">ID de diagnostic</span><span class="sxs-lookup"><span data-stu-id="ae5b0-126">Diagnostic ID</span></span> | <span data-ttu-id="ae5b0-127">Catégorie</span><span class="sxs-lookup"><span data-stu-id="ae5b0-127">Category</span></span> | <span data-ttu-id="ae5b0-128">severity</span><span class="sxs-lookup"><span data-stu-id="ae5b0-128">Severity</span></span> | <span data-ttu-id="ae5b0-129">Description</span><span class="sxs-lookup"><span data-stu-id="ae5b0-129">Description</span></span> |
| - | - | - | - |
| [<span data-ttu-id="ae5b0-130">CA1416</span><span class="sxs-lookup"><span data-stu-id="ae5b0-130">CA1416</span></span>](/visualstudio/code-quality/ca1416) | <span data-ttu-id="ae5b0-131">Interopérabilité</span><span class="sxs-lookup"><span data-stu-id="ae5b0-131">Interoperability</span></span> | <span data-ttu-id="ae5b0-132">Avertissement</span><span class="sxs-lookup"><span data-stu-id="ae5b0-132">Warning</span></span> | <span data-ttu-id="ae5b0-133">Analyseur de compatibilité de plateforme</span><span class="sxs-lookup"><span data-stu-id="ae5b0-133">Platform compatibility analyzer</span></span> |
| [<span data-ttu-id="ae5b0-134">CA1417</span><span class="sxs-lookup"><span data-stu-id="ae5b0-134">CA1417</span></span>](/visualstudio/code-quality/ca1417) | <span data-ttu-id="ae5b0-135">Interopérabilité</span><span class="sxs-lookup"><span data-stu-id="ae5b0-135">Interoperability</span></span> | <span data-ttu-id="ae5b0-136">Avertissement</span><span class="sxs-lookup"><span data-stu-id="ae5b0-136">Warning</span></span> | <span data-ttu-id="ae5b0-137">Ne pas utiliser `OutAttribute` sur les paramètres de chaîne pour P/Invoke</span><span class="sxs-lookup"><span data-stu-id="ae5b0-137">Do not use `OutAttribute` on string parameters for P/Invokes</span></span> |
| [<span data-ttu-id="ae5b0-138">CA1831</span><span class="sxs-lookup"><span data-stu-id="ae5b0-138">CA1831</span></span>](/visualstudio/code-quality/ca1831) | <span data-ttu-id="ae5b0-139">Performances</span><span class="sxs-lookup"><span data-stu-id="ae5b0-139">Performance</span></span> | <span data-ttu-id="ae5b0-140">Avertissement</span><span class="sxs-lookup"><span data-stu-id="ae5b0-140">Warning</span></span> | <span data-ttu-id="ae5b0-141">Utilisez `AsSpan` à la place des indexeurs de plage pour la chaîne quand cela est approprié</span><span class="sxs-lookup"><span data-stu-id="ae5b0-141">Use `AsSpan` instead of range-based indexers for string when appropriate</span></span> |
| [<span data-ttu-id="ae5b0-142">CA2013</span><span class="sxs-lookup"><span data-stu-id="ae5b0-142">CA2013</span></span>](/visualstudio/code-quality/ca2013) | <span data-ttu-id="ae5b0-143">Fiabilité</span><span class="sxs-lookup"><span data-stu-id="ae5b0-143">Reliability</span></span> | <span data-ttu-id="ae5b0-144">Avertissement</span><span class="sxs-lookup"><span data-stu-id="ae5b0-144">Warning</span></span> | <span data-ttu-id="ae5b0-145">Ne pas utiliser `ReferenceEquals` avec les types valeur</span><span class="sxs-lookup"><span data-stu-id="ae5b0-145">Do not use `ReferenceEquals` with value types</span></span> |
| [<span data-ttu-id="ae5b0-146">CA2014</span><span class="sxs-lookup"><span data-stu-id="ae5b0-146">CA2014</span></span>](/visualstudio/code-quality/ca2014) | <span data-ttu-id="ae5b0-147">Fiabilité</span><span class="sxs-lookup"><span data-stu-id="ae5b0-147">Reliability</span></span> | <span data-ttu-id="ae5b0-148">Avertissement</span><span class="sxs-lookup"><span data-stu-id="ae5b0-148">Warning</span></span> | <span data-ttu-id="ae5b0-149">Ne pas utiliser `stackalloc` dans les boucles</span><span class="sxs-lookup"><span data-stu-id="ae5b0-149">Do not use `stackalloc` in loops</span></span> |
| [<span data-ttu-id="ae5b0-150">CA2015</span><span class="sxs-lookup"><span data-stu-id="ae5b0-150">CA2015</span></span>](/visualstudio/code-quality/ca2015) | <span data-ttu-id="ae5b0-151">Fiabilité</span><span class="sxs-lookup"><span data-stu-id="ae5b0-151">Reliability</span></span> | <span data-ttu-id="ae5b0-152">Avertissement</span><span class="sxs-lookup"><span data-stu-id="ae5b0-152">Warning</span></span> | <span data-ttu-id="ae5b0-153">Ne définissez pas de finaliseurs pour les types dérivés de <xref:System.Buffers.MemoryManager%601></span><span class="sxs-lookup"><span data-stu-id="ae5b0-153">Do not define finalizers for types derived from <xref:System.Buffers.MemoryManager%601></span></span> |
| [<span data-ttu-id="ae5b0-154">CA2200</span><span class="sxs-lookup"><span data-stu-id="ae5b0-154">CA2200</span></span>](/visualstudio/code-quality/ca2200) | <span data-ttu-id="ae5b0-155">Usage</span><span class="sxs-lookup"><span data-stu-id="ae5b0-155">Usage</span></span> | <span data-ttu-id="ae5b0-156">Avertissement</span><span class="sxs-lookup"><span data-stu-id="ae5b0-156">Warning</span></span> | <span data-ttu-id="ae5b0-157">Levez à nouveau une exception pour conserver les détails de la pile</span><span class="sxs-lookup"><span data-stu-id="ae5b0-157">Rethrow to preserve stack details</span></span>
| [<span data-ttu-id="ae5b0-158">CA2247</span><span class="sxs-lookup"><span data-stu-id="ae5b0-158">CA2247</span></span>](/visualstudio/code-quality/ca2247) | <span data-ttu-id="ae5b0-159">Usage</span><span class="sxs-lookup"><span data-stu-id="ae5b0-159">Usage</span></span> | <span data-ttu-id="ae5b0-160">Avertissement</span><span class="sxs-lookup"><span data-stu-id="ae5b0-160">Warning</span></span> | <span data-ttu-id="ae5b0-161">L’argument passé au constructeur TaskCompletionSource doit être <xref:System.Threading.Tasks.TaskCreationOptions> enum au lieu de <xref:System.Threading.Tasks.TaskContinuationOptions></span><span class="sxs-lookup"><span data-stu-id="ae5b0-161">Argument passed to TaskCompletionSource constructor should be <xref:System.Threading.Tasks.TaskCreationOptions> enum instead of <xref:System.Threading.Tasks.TaskContinuationOptions></span></span> |

<span data-ttu-id="ae5b0-162">Vous pouvez modifier la gravité de ces règles pour les désactiver ou les élever aux erreurs.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-162">You can change the severity of these rules to disable them or elevate them to errors.</span></span> <span data-ttu-id="ae5b0-163">Vous pouvez également [activer davantage de règles](#enable-additional-rules).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-163">You can also [enable more rules](#enable-additional-rules).</span></span>

- <span data-ttu-id="ae5b0-164">Pour obtenir la liste des règles incluses avec chaque version du kit de développement logiciel (SDK) .NET, consultez [releases de l’analyseur](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-164">For a list of rules that are included with each .NET SDK version, see [Analyzer releases](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span></span>
- <span data-ttu-id="ae5b0-165">Pour obtenir la liste de toutes les règles de qualité du code, consultez [règles de qualité du code](quality-rules/index.md).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-165">For a list of all the code quality rules, see [Code quality rules](quality-rules/index.md).</span></span>

### <a name="enable-additional-rules"></a><span data-ttu-id="ae5b0-166">Activer des règles supplémentaires</span><span class="sxs-lookup"><span data-stu-id="ae5b0-166">Enable additional rules</span></span>

<span data-ttu-id="ae5b0-167">Le *mode d’analyse* fait référence à une configuration d’analyse du code prédéfinie dans laquelle aucune, une partie ou l’ensemble des règles n’est activée.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-167">*Analysis mode* refers to a predefined code analysis configuration where none, some, or all rules are enabled.</span></span> <span data-ttu-id="ae5b0-168">Dans le mode d’analyse par défaut, seul un petit nombre de règles est [activé en tant qu’avertissements de génération](#enabled-rules).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-168">In the default analysis mode, only a small number of rules are [enabled as build warnings](#enabled-rules).</span></span> <span data-ttu-id="ae5b0-169">Vous pouvez modifier le mode d’analyse de votre projet en définissant la propriété [AnalysisMode](../../core/project-sdk/msbuild-props.md#analysismode) dans le fichier projet.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-169">You can change the analysis mode for your project by setting the [AnalysisMode](../../core/project-sdk/msbuild-props.md#analysismode) property in the project file.</span></span> <span data-ttu-id="ae5b0-170">Les valeurs autorisées sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="ae5b0-170">The allowable values are:</span></span>

| <span data-ttu-id="ae5b0-171">Value</span><span class="sxs-lookup"><span data-stu-id="ae5b0-171">Value</span></span> | <span data-ttu-id="ae5b0-172">Description</span><span class="sxs-lookup"><span data-stu-id="ae5b0-172">Description</span></span> |
| - | - |
| `AllDisabledByDefault` | <span data-ttu-id="ae5b0-173">Il s’agit du mode le plus conservateur.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-173">This is the most conservative mode.</span></span> <span data-ttu-id="ae5b0-174">Toutes les règles sont désactivées par défaut.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-174">All rules are disabled by default.</span></span> <span data-ttu-id="ae5b0-175">Vous pouvez [choisir](configuration-options.md) des règles individuelles pour les activer.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-175">You can selectively [opt into](configuration-options.md) individual rules to enable them.</span></span><br /><br />`<AnalysisMode>AllDisabledByDefault</AnalysisMode>` |
| `AllEnabledByDefault` | <span data-ttu-id="ae5b0-176">Il s’agit du mode le plus agressif.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-176">This is the most aggressive mode.</span></span> <span data-ttu-id="ae5b0-177">Toutes les règles sont activées en tant qu’avertissements de Build.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-177">All rules are enabled as build warnings.</span></span> <span data-ttu-id="ae5b0-178">Vous pouvez [choisir de](configuration-options.md) désactiver les règles individuelles de manière sélective pour les désactiver.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-178">You can selectively [opt out of](configuration-options.md) individual rules to disable them.</span></span><br /><br />`<AnalysisMode>AllEnabledByDefault</AnalysisMode>` |
| `Default` | <span data-ttu-id="ae5b0-179">Le mode par défaut, dans lequel quelques règles sont activées en tant qu’avertissements, les autres sont uniquement activées en tant que suggestions de l’IDE Visual Studio avec les correctifs de code correspondants, et les autres sont désactivés complètement.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-179">The default mode, where a handful of rules are enabled as warnings, others are enabled only as Visual Studio IDE suggestions with corresponding code fixes, and the rest are disabled completely.</span></span> <span data-ttu-id="ae5b0-180">Vous pouvez [choisir d’accepter ou de refuser des](configuration-options.md) règles individuelles pour les désactiver.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-180">You can selectively [opt into or out of](configuration-options.md) individual rules to disable them.</span></span><br /><br />`<AnalysisMode>Default</AnalysisMode>` |

<span data-ttu-id="ae5b0-181">Pour connaître la gravité par défaut de chaque règle disponible et indiquer si la règle est activée ou non dans le mode d’analyse par défaut, consultez la [liste complète des règles](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-181">To find the default severity for each available rule and whether or not the rule is enabled in the default analysis mode, see the [full list of rules](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span></span>

### <a name="treat-warnings-as-errors"></a><span data-ttu-id="ae5b0-182">Considérer les avertissements comme des erreurs</span><span class="sxs-lookup"><span data-stu-id="ae5b0-182">Treat warnings as errors</span></span>

<span data-ttu-id="ae5b0-183">Si vous utilisez l' `-warnaserror` indicateur lorsque vous générez vos projets, tous les avertissements de l’analyse du code sont également traités comme des erreurs.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-183">If you use the `-warnaserror` flag when you build your projects, all code analysis warnings are also treated as errors.</span></span> <span data-ttu-id="ae5b0-184">Si vous ne souhaitez pas que les avertissements de qualité du code (CAXXXX) soient traités comme des erreurs en présence de `-warnaserror` , vous pouvez définir la `CodeAnalysisTreatWarningsAsErrors` propriété MSBuild sur `false` dans votre fichier projet.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-184">If you do not want code quality warnings (CAxxxx) to be treated as errors in presence of `-warnaserror`, you can set the `CodeAnalysisTreatWarningsAsErrors` MSBuild property to `false` in your project file.</span></span>

```xml
<PropertyGroup>
  <CodeAnalysisTreatWarningsAsErrors>false</CodeAnalysisTreatWarningsAsErrors>
</PropertyGroup>
```

<span data-ttu-id="ae5b0-185">Vous verrez toujours les avertissements liés à l’analyse du code, mais ils ne perturberont pas votre génération.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-185">You'll still see any code analysis warnings, but they won't break your build.</span></span>

### <a name="latest-updates"></a><span data-ttu-id="ae5b0-186">Dernières mises à jour</span><span class="sxs-lookup"><span data-stu-id="ae5b0-186">Latest updates</span></span>

<span data-ttu-id="ae5b0-187">Par défaut, vous obtiendrez les dernières règles d’analyse du code et les gravités de règle par défaut lors de la mise à niveau vers des versions plus récentes du kit de développement logiciel (SDK) .NET.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-187">By default, you'll get the latest code analysis rules and default rule severities as you upgrade to newer versions of the .NET SDK.</span></span> <span data-ttu-id="ae5b0-188">Si vous ne souhaitez pas ce comportement, par exemple, si vous souhaitez vous assurer qu’aucune nouvelle règle n’est activée ou désactivée, vous pouvez la remplacer de l’une des manières suivantes :</span><span class="sxs-lookup"><span data-stu-id="ae5b0-188">If you don't want this behavior, for example, if you want to ensure that no new rules are enabled or disabled, you can override it in one of the following ways:</span></span>

- <span data-ttu-id="ae5b0-189">Affectez à la `AnalysisLevel` propriété MSBuild une valeur spécifique pour verrouiller les avertissements à cet ensemble.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-189">Set the `AnalysisLevel` MSBuild property to a specific value to lock the warnings to that set.</span></span> <span data-ttu-id="ae5b0-190">Lorsque vous effectuez une mise à niveau vers un kit de développement logiciel (SDK) plus récent, vous obtenez toujours des correctifs de bogues pour ces avertissements, mais aucun nouvel avertissement n’est activé et aucun avertissement existant n’est désactivé.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-190">When you upgrade to a newer SDK, you'll still get bug fixes for those warnings, but no new warnings will be enabled and no existing warnings will be disabled.</span></span> <span data-ttu-id="ae5b0-191">Par exemple, pour verrouiller l’ensemble de règles pour celles fournies avec la version 5,0 du kit de développement logiciel (SDK) .NET, ajoutez l’entrée suivante à votre fichier projet.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-191">For example, to lock the set of rules to those that ship with version 5.0 of the .NET SDK, add the following entry to your project file.</span></span>

  ```xml
  <PropertyGroup>
    <AnalysisLevel>5.0</AnalysisLevel>
  </PropertyGroup>
  ```

  > [!TIP]
  > <span data-ttu-id="ae5b0-192">La valeur par défaut de la `AnalysisLevel` propriété est `latest` , ce qui signifie que vous recevez toujours les dernières règles d’analyse du code à mesure que vous passez à des versions plus récentes du kit de développement logiciel (SDK) .net.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-192">The default value for the `AnalysisLevel` property is `latest`, which means you always get the latest code analysis rules as you move to newer versions of the .NET SDK.</span></span>

  <span data-ttu-id="ae5b0-193">Pour plus d’informations et pour afficher une liste des valeurs possibles, consultez [AnalysisLevel](../../core/project-sdk/msbuild-props.md#analysislevel).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-193">For more information, and to see a list of possible values, see [AnalysisLevel](../../core/project-sdk/msbuild-props.md#analysislevel).</span></span>

- <span data-ttu-id="ae5b0-194">Installez le [package NuGet Microsoft. CodeAnalysis. Netanalyzers](https://github.com/dotnet/roslyn-analyzers#microsoftcodeanalysisnetanalyzers) pour découpler les mises à jour des règles des mises à jour du kit de développement logiciel (SDK) .net.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-194">Install the [Microsoft.CodeAnalysis.NetAnalyzers NuGet package](https://github.com/dotnet/roslyn-analyzers#microsoftcodeanalysisnetanalyzers) to decouple rule updates from .NET SDK updates.</span></span> <span data-ttu-id="ae5b0-195">L’installation du package désactive les analyseurs SDK intégrés et génère un avertissement de génération si le kit de développement logiciel (SDK) contient une version d’assembly d’analyseur plus récente que celle du package NuGet.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-195">Installing the package turns off the built-in SDK analyzers and generates a build warning if the SDK contains a newer analyzer assembly version than that of the NuGet package.</span></span>

## <a name="code-style-analysis"></a><span data-ttu-id="ae5b0-196">Analyse de style de code</span><span class="sxs-lookup"><span data-stu-id="ae5b0-196">Code-style analysis</span></span>

<span data-ttu-id="ae5b0-197">Les règles d' *analyse de style code* (« IDExxxx ») vous permettent de définir et de maintenir un style de code cohérent dans votre base de code.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-197">*Code-style analysis* ("IDExxxx") rules enable you to define and maintain consistent code style in your codebase.</span></span> <span data-ttu-id="ae5b0-198">Les paramètres d’activation par défaut sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="ae5b0-198">The default enablement settings are:</span></span>

- <span data-ttu-id="ae5b0-199">Génération à partir de la ligne de commande : l’analyse de style de code est désactivée, par défaut, pour tous les projets .NET sur les générations à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-199">Command-line build: Code-style analysis is disabled, by default, for all .NET projects on command-line builds.</span></span>

  <span data-ttu-id="ae5b0-200">À compter de .NET 5,0, vous pouvez [activer l’analyse de style de code sur la build](#enable-on-build), à la fois sur la ligne de commande et dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-200">Starting in .NET 5.0, you can [enable code-style analysis on build](#enable-on-build), both at the command line and inside Visual Studio.</span></span> <span data-ttu-id="ae5b0-201">Les violations de style de code apparaissent sous la forme d’avertissements ou d’erreurs avec un préfixe « IDE ».</span><span class="sxs-lookup"><span data-stu-id="ae5b0-201">Code style violations appear as warnings or errors with an "IDE" prefix.</span></span> <span data-ttu-id="ae5b0-202">Cela vous permet d’appliquer des styles de code cohérents au moment de la génération.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-202">This enables you to enforce consistent code styles at build time.</span></span>

- <span data-ttu-id="ae5b0-203">Visual Studio : l’analyse de style de code est activée, par défaut, pour tous les projets .NET dans Visual Studio en tant que [actions rapides de refactorisation de code](/visualstudio/ide/code-generation-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-203">Visual Studio: Code-style analysis is enabled, by default, for all .NET projects inside Visual Studio as [code refactoring quick actions](/visualstudio/ide/code-generation-in-visual-studio).</span></span>

<span data-ttu-id="ae5b0-204">Pour obtenir la liste complète des règles d’analyse de style code, consultez [règles de style de code](style-rules/index.md).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-204">For a full list of code-style analysis rules, see [Code style rules](style-rules/index.md).</span></span>

### <a name="enable-on-build"></a><span data-ttu-id="ae5b0-205">Activer sur la Build</span><span class="sxs-lookup"><span data-stu-id="ae5b0-205">Enable on build</span></span>

<span data-ttu-id="ae5b0-206">Avec le kit de développement logiciel (SDK) .NET 5,0 et les versions ultérieures, vous pouvez activer l’analyse de style de code lors de la génération à partir de la ligne de commande et dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-206">With the .NET 5.0 SDK and later versions, you can enable code-style analysis when building from the command-line and in Visual Studio.</span></span> <span data-ttu-id="ae5b0-207">(Toutefois, pour des raisons de performances, [quelques règles de style de code](https://github.com/dotnet/roslyn/blob/9f87b444da9c48a4d492b19f8337339056bf2b95/src/Analyzers/Core/Analyzers/EnforceOnBuildValues.cs#L95) s’appliqueront toujours uniquement dans l’IDE de Visual Studio.)</span><span class="sxs-lookup"><span data-stu-id="ae5b0-207">(However, for performance reasons, [a handful of code-style rules](https://github.com/dotnet/roslyn/blob/9f87b444da9c48a4d492b19f8337339056bf2b95/src/Analyzers/Core/Analyzers/EnforceOnBuildValues.cs#L95) will still apply only in the Visual Studio IDE.)</span></span>

<span data-ttu-id="ae5b0-208">Procédez comme suit pour activer l’analyse de style de code sur la build :</span><span class="sxs-lookup"><span data-stu-id="ae5b0-208">Follow these steps to enable code-style analysis on build:</span></span>

1. <span data-ttu-id="ae5b0-209">Affectez à la propriété MSBuild [EnforceCodeStyleInBuild](../../core/project-sdk/msbuild-props.md#enforcecodestyleinbuild) la valeur `true` .</span><span class="sxs-lookup"><span data-stu-id="ae5b0-209">Set the MSBuild property [EnforceCodeStyleInBuild](../../core/project-sdk/msbuild-props.md#enforcecodestyleinbuild) to `true`.</span></span>

1. <span data-ttu-id="ae5b0-210">Dans un fichier *. editorconfig* , [configurez](configuration-options.md) chaque règle de style de code « IDE » que vous souhaitez exécuter lors de la génération comme un avertissement ou une erreur.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-210">In an *.editorconfig* file, [configure](configuration-options.md) each "IDE" code style rule that you wish to run on build as a warning or an error.</span></span> <span data-ttu-id="ae5b0-211">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="ae5b0-211">For example:</span></span>

   ```ini
   [*.{cs,vb}]
   # IDE0040: Accessibility modifiers required (escalated to a build warning)
   dotnet_diagnostic.IDE0040.severity = warning
   ```

   <span data-ttu-id="ae5b0-212">Vous pouvez également configurer la catégorie « style » entière comme un avertissement ou une erreur, par défaut, puis désactiver de manière sélective les règles que vous ne souhaitez pas exécuter lors de la génération.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-212">Alternatively, you can configure the entire "Style" category to be a warning or error, by default, and then selectively turn off rules that you don't want to run on build.</span></span> <span data-ttu-id="ae5b0-213">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="ae5b0-213">For example:</span></span>

   ```ini
   [*.{cs,vb}]

   # Default severity for analyzer diagnostics with category 'Style' (escalated to build warnings)
   dotnet_analyzer_diagnostic.category-Style.severity = warning

   # IDE0040: Accessibility modifiers required (disabled on build)
   dotnet_diagnostic.IDE0040.severity = silent
   ```

> [!NOTE]
> <span data-ttu-id="ae5b0-214">La fonctionnalité d’analyse de style code est expérimentale et peut changer entre les versions .NET 5 et .NET 6.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-214">The code-style analysis feature is experimental and may change between the .NET 5 and .NET 6 releases.</span></span>

## <a name="suppress-a-warning"></a><span data-ttu-id="ae5b0-215">Supprimer un avertissement</span><span class="sxs-lookup"><span data-stu-id="ae5b0-215">Suppress a warning</span></span>

<span data-ttu-id="ae5b0-216">Pour supprimer une violation de règle, définissez l’option de gravité de cet ID de règle sur `none` dans un fichier EditorConfig.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-216">To suppress a rule violation, set the severity option for that rule ID to `none` in an EditorConfig file.</span></span> <span data-ttu-id="ae5b0-217">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="ae5b0-217">For example:</span></span>

```ini
dotnet_diagnostic.CA1822.severity = none
```

<span data-ttu-id="ae5b0-218">Visual Studio fournit des méthodes supplémentaires pour supprimer les avertissements des règles d’analyse du code.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-218">Visual Studio provides additional ways to suppress warnings from code analysis rules.</span></span> <span data-ttu-id="ae5b0-219">Pour plus d’informations, consultez [Supprimer les violations](/visualstudio/code-quality/use-roslyn-analyzers#suppress-violations).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-219">For more information, see [Suppress violations](/visualstudio/code-quality/use-roslyn-analyzers#suppress-violations).</span></span>

<span data-ttu-id="ae5b0-220">Pour plus d’informations sur les niveaux de gravité de la règle, consultez [configurer la gravité](configuration-options.md#severity-level)de la règle.</span><span class="sxs-lookup"><span data-stu-id="ae5b0-220">For more information about rule severities, see [Configure rule severity](configuration-options.md#severity-level).</span></span>

## <a name="third-party-analyzers"></a><span data-ttu-id="ae5b0-221">Analyseurs tiers</span><span class="sxs-lookup"><span data-stu-id="ae5b0-221">Third-party analyzers</span></span>

<span data-ttu-id="ae5b0-222">En plus des analyseurs .NET officiels, vous pouvez également installer des analyseurs tiers, tels que [StyleCop](https://www.nuget.org/packages/StyleCop.Analyzers/), [Roslynator](https://www.nuget.org/packages/Roslynator.Analyzers/), les [analyseurs xUnit](https://www.nuget.org/packages/xunit.analyzers/)et l' [Analyseur de sonar](https://www.nuget.org/packages/SonarAnalyzer.CSharp/).</span><span class="sxs-lookup"><span data-stu-id="ae5b0-222">In addition to the official .NET analyzers, you can also install third party analyzers, such as [StyleCop](https://www.nuget.org/packages/StyleCop.Analyzers/), [Roslynator](https://www.nuget.org/packages/Roslynator.Analyzers/), [XUnit Analyzers](https://www.nuget.org/packages/xunit.analyzers/), and [Sonar Analyzer](https://www.nuget.org/packages/SonarAnalyzer.CSharp/).</span></span>

## <a name="see-also"></a><span data-ttu-id="ae5b0-223">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ae5b0-223">See also</span></span>

- [<span data-ttu-id="ae5b0-224">Référence de règle d’analyse de la qualité du code</span><span class="sxs-lookup"><span data-stu-id="ae5b0-224">Code quality analysis rule reference</span></span>](quality-rules/index.md)
- [<span data-ttu-id="ae5b0-225">Référence de règle d’analyse de style de code</span><span class="sxs-lookup"><span data-stu-id="ae5b0-225">Code style analysis rule reference</span></span>](style-rules/index.md)
- [<span data-ttu-id="ae5b0-226">Analyse du code dans Visual Studio</span><span class="sxs-lookup"><span data-stu-id="ae5b0-226">Code analysis in Visual Studio</span></span>](/visualstudio/code-quality/roslyn-analyzers-overview)
- [<span data-ttu-id="ae5b0-227">SDK .NET Compiler Platform</span><span class="sxs-lookup"><span data-stu-id="ae5b0-227">.NET Compiler Platform SDK</span></span>](../../csharp/roslyn-sdk/index.md)
- [<span data-ttu-id="ae5b0-228">Tutoriel : Écrire votre premier analyseur et correctif de code</span><span class="sxs-lookup"><span data-stu-id="ae5b0-228">Tutorial: Write your first analyzer and code fix</span></span>](../../csharp/roslyn-sdk/tutorials/how-to-write-csharp-analyzer-code-fix.md)
