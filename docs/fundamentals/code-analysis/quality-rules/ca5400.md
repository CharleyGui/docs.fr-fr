---
title: 'Ca5400 : Vérifiez que la vérification de la liste de révocation de certificats HttpClient n’est pas désactivée (analyse du code)'
description: Fournit des informations sur la règle d’analyse du code ca5400, y compris les causes, comment corriger les violations et quand la supprimer.
ms.date: 05/18/2020
ms.topic: reference
author: LLLXXXCCC
ms.author: linche
f1_keywords:
- CA5400
ms.openlocfilehash: 1b55b88ae554220178da91fe8f8b55f010d2ef65
ms.sourcegitcommit: fcbe432482464b1639decad78cc4dc8387c6269e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/12/2020
ms.locfileid: "97366731"
---
# <a name="ca5400-ensure-httpclient-certificate-revocation-list-check-is-not-disabled"></a>CA5400 : Contrôler si la vérification de la liste de révocation de certificats HttpClient est bien activée

| | Valeur |
|-|-|
| **Identificateur de la règle** |CA5400|
| **Catégorie** |Microsoft.Security|
| **Correction en rupture ou sans rupture** |Sans rupture|

## <a name="cause"></a>Cause

L’utilisation de <xref:System.Net.Http.HttpClient?displayProperty=fullName> tout en fournissant un gestionnaire spécifique à une plateforme ( <xref:System.Net.Http.WinHttpHandler?displayProperty=fullName> ou <xref:System.Net.Http.HttpClientHandler?displayProperty=fullName> ) dont `CheckCertificateRevocationList` la propriété est éventuellement définie sur permet `false` l’acceptation des certificats révoqués par le <xref:System.Net.Http.HttpClient> comme étant valide.

Cette règle est semblable à [ca5400](ca5400.md), mais l’analyse ne peut pas déterminer si la `CheckCertificateRevocationList` propriété est définitivement `false` ou non définie.

## <a name="rule-description"></a>Description de la règle

Un certificat révoqué n’est plus approuvé. Elle peut être utilisée par des attaquants qui transmettent des données malveillantes ou dérobent des données sensibles dans la communication HTTPs.

## <a name="how-to-fix-violations"></a>Comment corriger les violations

Affectez <xref:System.Net.Http.HttpClientHandler.CheckCertificateRevocationList?displayProperty=fullName> explicitement à la propriété `true` . Si la <xref:System.Net.Http.HttpClientHandler.CheckCertificateRevocationList> propriété n’est pas disponible, vous devez mettre à niveau votre version cible de .NET Framework.

## <a name="when-to-suppress-warnings"></a>Quand supprimer les avertissements

Il est possible de supprimer cette règle en toute sécurité si vous êtes sûr que la `CheckCertificateRevocationList` propriété est définie à droite.

## <a name="configurability"></a>Configurabilité

Vous pouvez configurer les parties de votre code base à exclure de l’analyse. Par exemple, pour spécifier que la règle ne doit pas être exécutée sur un code dans des types nommés `MyType` , ajoutez la paire clé-valeur suivante à un fichier *. editorconfig* dans votre projet :

```ini
dotnet_code_quality.CA5400.excluded_symbol_names = MyType
```

Formats de noms de symboles autorisés dans la valeur de l’option (séparés par `|` ) :

- Nom de symbole uniquement (comprend tous les symboles portant le nom, quel que soit le type ou l’espace de noms conteneur)
- Noms qualifiés complets dans le format d' [ID de documentation](../../../csharp/programming-guide/xmldoc/processing-the-xml-file.md#id-strings)du symbole. Chaque nom de symbole requiert un préfixe de type de symbole, tel que le préfixe « M : » pour les méthodes, le préfixe pour les types, le préfixe `T:` « N : » pour les espaces de noms, etc.
- `.ctor` pour les constructeurs et `.cctor` les constructeurs statiques

Exemples :

| Valeur d’option | Résumé |
| --- | --- |
|`dotnet_code_quality.CA5400.excluded_symbol_names = MyType` | Correspond à tous les symboles nommés’MyType’dans la compilation
|`dotnet_code_quality.CA5400.excluded_symbol_names = MyType1|MyType2` | Correspond à tous les symboles nommés’MyType1 'ou’MyType2 'dans la compilation
|`dotnet_code_quality.CA5400.excluded_symbol_names = M:NS.MyType.MyMethod(ParamType)` | Correspond à la méthode spécifique’MyMethod’avec la signature complète donnée
|`dotnet_code_quality.CA5400.excluded_symbol_names = M:NS1.MyType1.MyMethod1(ParamType)|M:NS2.MyType2.MyMethod2(ParamType)` | Met en correspondance des méthodes spécifiques « MyMethod1 » et « MyMethod2 » avec la signature complète respective

Vous pouvez configurer toutes ces options uniquement pour cette règle, pour toutes les règles ou pour toutes les règles de cette catégorie (sécurité). Pour plus d’informations, consultez Options de configuration d’une [règle de qualité du code](../code-quality-rule-options.md).

## <a name="pseudo-code-examples"></a>Exemples de pseudo-code

```csharp
using System;
using System.Net.Http;

class ExampleClass
{
    void ExampleMethod(bool checkCertificateRevocationList)
    {
        WinHttpHandler winHttpHandler = new WinHttpHandler();
        winHttpHandler.CheckCertificateRevocationList = checkCertificateRevocationList;
        Random r = new Random();

        if (r.Next(6) == 4)
        {
            winHttpHandler.CheckCertificateRevocationList = true;
        }

        HttpClient httpClient = new HttpClient(winHttpHandler);
    }
}
```

### <a name="solution"></a>Solution

```csharp
using System.Net.Http;

class ExampleClass
{
    void ExampleMethod()
    {
        WinHttpHandler winHttpHandler = new WinHttpHandler();
        winHttpHandler.CheckCertificateRevocationList = true;
        HttpClient httpClient = new HttpClient(winHttpHandler);
    }
}
```
