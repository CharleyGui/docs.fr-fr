---
title: 'CA5375 : ne pas utiliser la signature d’accès partagé du compte (analyse du code)'
description: Fournit des informations sur la règle d’analyse du code CA5375, notamment les causes, comment corriger les violations et quand la supprimer.
ms.date: 05/19/2020
ms.topic: reference
author: LLLXXXCCC
ms.author: linche
f1_keywords:
- CA5375
- DoNotUseAccountSAS
ms.openlocfilehash: 4e2eaf13735f61c3276b931cea3da386a0ee1e5d
ms.sourcegitcommit: 4df8e005c074ceb1f978f007b222fe253be2baf3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/04/2021
ms.locfileid: "99543668"
---
# <a name="ca5375-do-not-use-account-shared-access-signature"></a><span data-ttu-id="3adfa-103">CA5375 : Ne pas utiliser de signature d’accès partagé au compte</span><span class="sxs-lookup"><span data-stu-id="3adfa-103">CA5375: Do not use account shared access signature</span></span>

| | <span data-ttu-id="3adfa-104">Valeur</span><span class="sxs-lookup"><span data-stu-id="3adfa-104">Value</span></span> |
|-|-|
| <span data-ttu-id="3adfa-105">**Identificateur de la règle**</span><span class="sxs-lookup"><span data-stu-id="3adfa-105">**Rule ID**</span></span> |<span data-ttu-id="3adfa-106">CA5375</span><span class="sxs-lookup"><span data-stu-id="3adfa-106">CA5375</span></span>|
| <span data-ttu-id="3adfa-107">**Catégorie**</span><span class="sxs-lookup"><span data-stu-id="3adfa-107">**Category**</span></span> |[<span data-ttu-id="3adfa-108">Microsoft.Security</span><span class="sxs-lookup"><span data-stu-id="3adfa-108">Microsoft.Security</span></span>](security-warnings.md)|
| <span data-ttu-id="3adfa-109">**Correction en rupture ou sans rupture**</span><span class="sxs-lookup"><span data-stu-id="3adfa-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="3adfa-110">Sans rupture</span><span class="sxs-lookup"><span data-stu-id="3adfa-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="3adfa-111">Cause</span><span class="sxs-lookup"><span data-stu-id="3adfa-111">Cause</span></span>

<span data-ttu-id="3adfa-112">Génération d’une signature d’accès partagé (SAP) de compte avec la `GetSharedAccessSignature` méthode sous l' `Microsoft.WindowsAzure.Storage` espace de noms.</span><span class="sxs-lookup"><span data-stu-id="3adfa-112">Generating an account Shared Access Signature (SAS) with the `GetSharedAccessSignature` method under the `Microsoft.WindowsAzure.Storage` namespace.</span></span>

## <a name="rule-description"></a><span data-ttu-id="3adfa-113">Description de la règle</span><span class="sxs-lookup"><span data-stu-id="3adfa-113">Rule description</span></span>

<span data-ttu-id="3adfa-114">Une SAP de compte peut déléguer l’accès aux opérations de lecture, d’écriture et de suppression sur les conteneurs d’objets BLOB, les tables, les files d’attente et les partages de fichiers qui ne sont pas autorisés avec une SAP de service.</span><span class="sxs-lookup"><span data-stu-id="3adfa-114">An account SAS can delegate access to read, write, and delete operations on blob containers, tables, queues, and file shares that are not permitted with a service SAS.</span></span> <span data-ttu-id="3adfa-115">Toutefois, il ne prend pas en charge les stratégies au niveau du conteneur et a moins de flexibilité et de contrôle sur les autorisations accordées.</span><span class="sxs-lookup"><span data-stu-id="3adfa-115">However, it doesn't support container-level policies and has less flexibility and control over the permissions that are granted.</span></span> <span data-ttu-id="3adfa-116">Si possible, utilisez une SAP de service pour un contrôle d’accès affiné.</span><span class="sxs-lookup"><span data-stu-id="3adfa-116">If possible, use a service SAS for fine grained access control.</span></span> <span data-ttu-id="3adfa-117">Pour plus d’informations, consultez [Déléguer l’accès avec une signature d’accès partagé](/rest/api/storageservices/delegate-access-with-shared-access-signature).</span><span class="sxs-lookup"><span data-stu-id="3adfa-117">For more information, see [Delegate access with a shared access signature](/rest/api/storageservices/delegate-access-with-shared-access-signature).</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="3adfa-118">Comment corriger les violations</span><span class="sxs-lookup"><span data-stu-id="3adfa-118">How to fix violations</span></span>

<span data-ttu-id="3adfa-119">Utilisez une SAP de service au lieu d’une SAP de compte pour le contrôle d’accès affiné et la stratégie d’accès au niveau du conteneur.</span><span class="sxs-lookup"><span data-stu-id="3adfa-119">Use a service SAS instead of an account SAS for fine grained access control and container-level access policy.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="3adfa-120">Quand supprimer les avertissements</span><span class="sxs-lookup"><span data-stu-id="3adfa-120">When to suppress warnings</span></span>

<span data-ttu-id="3adfa-121">Il est possible de supprimer cette règle en toute sécurité si vous êtes sûr que les autorisations de toutes les ressources sont aussi limitées que possible.</span><span class="sxs-lookup"><span data-stu-id="3adfa-121">It is safe to suppress this rule if you're sure that the permissions of all resources are as restricted as possible.</span></span>

## <a name="pseudo-code-examples"></a><span data-ttu-id="3adfa-122">Exemples de pseudo-code</span><span class="sxs-lookup"><span data-stu-id="3adfa-122">Pseudo-code examples</span></span>

### <a name="violation"></a><span data-ttu-id="3adfa-123">Violation</span><span class="sxs-lookup"><span data-stu-id="3adfa-123">Violation</span></span>

<span data-ttu-id="3adfa-124">À l’heure actuelle, l’exemple de pseudo-code suivant illustre le modèle détecté par cette règle.</span><span class="sxs-lookup"><span data-stu-id="3adfa-124">At present, the following pseudo-code sample illustrates the pattern detected by this rule.</span></span>

```csharp
using System;
using Microsoft.WindowsAzure.Storage;

class ExampleClass
{
    public void ExampleMethod(SharedAccessAccountPolicy policy)
    {
        CloudStorageAccount cloudStorageAccount = new CloudStorageAccount();
        cloudStorageAccount.GetSharedAccessSignature(policy);
    }
}
```

### <a name="solution"></a><span data-ttu-id="3adfa-125">Solution</span><span class="sxs-lookup"><span data-stu-id="3adfa-125">Solution</span></span>

<span data-ttu-id="3adfa-126">Au lieu de la SAP de compte, utilisez la SAP de service.</span><span class="sxs-lookup"><span data-stu-id="3adfa-126">Instead of account SAS, use service SAS.</span></span>

```csharp
using System;
using Microsoft.WindowsAzure.Storage;
using Microsoft.WindowsAzure.Storage.File;

class ExampleClass
{
    public void ExampleMethod(StorageCredentials storageCredentials, SharedAccessFilePolicy policy, SharedAccessFileHeaders headers, string groupPolicyIdentifier, IPAddressOrRange ipAddressOrRange)
    {
        CloudFile cloudFile = new CloudFile(storageCredentials);
        SharedAccessProtocol protocols = SharedAccessProtocol.HttpsOnly;
        cloudFile.GetSharedAccessSignature(policy, headers, groupPolicyIdentifier, protocols, ipAddressOrRange);
    }
}
```

## <a name="related-rules"></a><span data-ttu-id="3adfa-127">Règles associées</span><span class="sxs-lookup"><span data-stu-id="3adfa-127">Related rules</span></span>

[<span data-ttu-id="3adfa-128">CA5376 : Utiliser SharedAccessProtocol HttpsOnly</span><span class="sxs-lookup"><span data-stu-id="3adfa-128">CA5376: Use SharedAccessProtocol HttpsOnly</span></span>](ca5376.md)

[<span data-ttu-id="3adfa-129">CA5377 : Utiliser une stratégie d’accès au niveau du conteneur</span><span class="sxs-lookup"><span data-stu-id="3adfa-129">CA5377: Use container level access policy</span></span>](ca5377.md)
