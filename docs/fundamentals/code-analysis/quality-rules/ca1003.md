---
title: 'CA1003 : utiliser les instances du gestionnaire d’événements génériques (analyse du code)'
description: 'En savoir plus sur la règle d’analyse du code CA1003 : utiliser les instances du gestionnaire d’événements génériques'
ms.date: 03/11/2019
ms.topic: reference
f1_keywords:
- UseGenericEventHandlerInstances
- CA1003
helpviewer_keywords:
- CA1003
- UseGenericEventHandlerInstances
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: ded64a3f5c2ff519448733c5c94145f2fdfc056d
ms.sourcegitcommit: a6bd4cad438fe479cbd112eae10f2cd449f06e40
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/08/2020
ms.locfileid: "96588029"
---
# <a name="ca1003-use-generic-event-handler-instances"></a>CA1003 : Utiliser les instances du gestionnaire d'événements génériques

| Élément                                     | Valeur            |
|------------------------------------------|------------------|
| ID de la règle                                   | CA1003           |
| Category                                 | Microsoft. Design |
| Correction en rupture ou sans rupture | Rupture         |

## <a name="cause"></a>Cause

Un type contient un délégué qui retourne void et dont la signature contient deux paramètres (le premier objet et le second un type qui peut être assigné à EventArgs), et l’assembly conteneur cible .NET.

Par défaut, cette règle recherche uniquement les types visibles de l’extérieur, mais elle peut [être configurée](#configurability).

## <a name="rule-description"></a>Description de la règle

Avant le .NET Framework 2,0, afin de passer des informations personnalisées au gestionnaire d’événements, un nouveau délégué qui spécifiait une classe dérivée de la classe devait être déclaré <xref:System.EventArgs?displayProperty=fullName> . Dans .NET Framework 2,0 et versions ultérieures, le <xref:System.EventHandler%601?displayProperty=fullName> délégué générique permet l’utilisation de toute classe dérivée de <xref:System.EventArgs> pour être utilisée avec le gestionnaire d’événements.

## <a name="how-to-fix-violations"></a>Comment corriger les violations

Pour corriger une violation de cette règle, supprimez le délégué et remplacez son utilisation à l’aide du <xref:System.EventHandler%601?displayProperty=fullName> délégué.

Si le délégué est généré automatiquement par le compilateur Visual Basic, modifiez la syntaxe de la déclaration d’événement pour utiliser le <xref:System.EventHandler%601?displayProperty=fullName> délégué.

## <a name="when-to-suppress-warnings"></a>Quand supprimer les avertissements

Ne supprimez aucun avertissement de cette règle.

## <a name="configurability"></a>Configurabilité

Vous pouvez configurer les parties de votre code base pour exécuter cette règle, en fonction de leur accessibilité. Par exemple, pour spécifier que la règle doit s’exécuter uniquement sur la surface d’API non publique, ajoutez la paire clé-valeur suivante à un fichier *. editorconfig* dans votre projet :

```ini
dotnet_code_quality.ca1003.api_surface = private, internal
```

Vous pouvez configurer cette option uniquement pour cette règle, pour toutes les règles ou pour toutes les règles de cette catégorie (conception). Pour plus d’informations, consultez Options de configuration d’une [règle de qualité du code](../code-quality-rule-options.md).

## <a name="example"></a> Exemple

L’exemple suivant montre un délégué qui enfreint la règle. Dans l’exemple Visual Basic, les commentaires décrivent comment modifier l’exemple pour satisfaire la règle. Pour l’exemple C#, l’exemple suivant montre le code modifié.

:::code language="vb" source="snippets/vb/all-rules/ca1003-use-generic-event-handler-instances_1.vb":::

:::code language="csharp" source="snippets/csharp/all-rules/ca1003.cs" id="snippet1":::

L’extrait de code suivant supprime la déclaration Delegate de l’exemple précédent, qui répond à la règle. Il remplace son utilisation dans les `ClassThatRaisesEvent` méthodes et à `ClassThatHandlesEvent` l’aide du <xref:System.EventHandler%601?displayProperty=fullName> délégué.

:::code language="csharp" source="snippets/csharp/all-rules/ca1003.cs" id="snippet2":::

## <a name="related-rules"></a>Règles associées

- [CA1005 : Éviter les paramètres excessifs sur les types génériques](ca1005.md)
- [CA1010 : Les collections doivent implémenter une interface générique](ca1010.md)
- [CA1000 : Ne pas déclarer de membres statiques sur les types génériques](ca1000.md)
- [CA1002 : Ne pas exposer de listes génériques](ca1002.md)

## <a name="see-also"></a>Voir aussi

- [Génériques](../../../csharp/programming-guide/generics/index.md)
