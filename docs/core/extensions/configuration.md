---
title: Configuration dans .NET
description: Découvrez comment utiliser l’API de configuration de pour configurer des applications .NET.
author: IEvangelist
ms.author: dapine
ms.date: 09/16/2020
ms.topic: overview
ms.openlocfilehash: 5955e46c2f5acb6776ada4e3fd6a65507d3faa1f
ms.sourcegitcommit: ecd9e9bb2225eb76f819722ea8b24988fe46f34c
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/05/2020
ms.locfileid: "96740123"
---
# <a name="configuration-in-net"></a><span data-ttu-id="2e4d6-103">Configuration dans .NET</span><span class="sxs-lookup"><span data-stu-id="2e4d6-103">Configuration in .NET</span></span>

<span data-ttu-id="2e4d6-104">La configuration dans .NET est effectuée à l’aide d’un ou de plusieurs [fournisseurs de configuration](#configuration-providers).</span><span class="sxs-lookup"><span data-stu-id="2e4d6-104">Configuration in .NET is performed using one or more [configuration providers](#configuration-providers).</span></span> <span data-ttu-id="2e4d6-105">Les fournisseurs de configuration lisent les données de configuration des paires clé-valeur à l’aide d’une variété de sources de configuration :</span><span class="sxs-lookup"><span data-stu-id="2e4d6-105">Configuration providers read configuration data from key-value pairs using a variety of configuration sources:</span></span>

- <span data-ttu-id="2e4d6-106">Fichiers de paramètres, tels que *appsettings.jssur*</span><span class="sxs-lookup"><span data-stu-id="2e4d6-106">Settings files, such as *appsettings.json*</span></span>
- <span data-ttu-id="2e4d6-107">Variables d'environnement</span><span class="sxs-lookup"><span data-stu-id="2e4d6-107">Environment variables</span></span>
- [<span data-ttu-id="2e4d6-108">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="2e4d6-108">Azure Key Vault</span></span>](/azure/key-vault/general/overview)
- [<span data-ttu-id="2e4d6-109">Azure App Configuration</span><span class="sxs-lookup"><span data-stu-id="2e4d6-109">Azure App Configuration</span></span>](/azure/azure-app-configuration/overview)
- <span data-ttu-id="2e4d6-110">Arguments de ligne de commande</span><span class="sxs-lookup"><span data-stu-id="2e4d6-110">Command-line arguments</span></span>
- <span data-ttu-id="2e4d6-111">Fournisseurs personnalisés, installés ou créés</span><span class="sxs-lookup"><span data-stu-id="2e4d6-111">Custom providers, installed or created</span></span>
- <span data-ttu-id="2e4d6-112">Fichiers de répertoire</span><span class="sxs-lookup"><span data-stu-id="2e4d6-112">Directory files</span></span>
- <span data-ttu-id="2e4d6-113">Objets .NET en mémoire</span><span class="sxs-lookup"><span data-stu-id="2e4d6-113">In-memory .NET objects</span></span>

## <a name="configure-console-apps"></a><span data-ttu-id="2e4d6-114">Configurer des applications console</span><span class="sxs-lookup"><span data-stu-id="2e4d6-114">Configure console apps</span></span>

<span data-ttu-id="2e4d6-115">Les nouvelles applications de console .NET créées à l’aide de [dotnet New](../tools/dotnet-new.md) ou de Visual Studio n’exposent *pas* de fonctionnalités de configuration.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-115">New .NET console applications created using [dotnet new](../tools/dotnet-new.md) or Visual Studio by default *do not* expose configuration capabilities.</span></span> <span data-ttu-id="2e4d6-116">Pour ajouter une configuration dans une nouvelle application de console .NET, [Ajoutez une référence de package](../tools/dotnet-add-package.md) à `Microsoft.Extensions.Hosting` .</span><span class="sxs-lookup"><span data-stu-id="2e4d6-116">To add configuration in a new .NET console application, [add a package reference](../tools/dotnet-add-package.md) to `Microsoft.Extensions.Hosting`.</span></span> <span data-ttu-id="2e4d6-117">Modifiez le fichier *Program.cs* de façon à ce qu’il corresponde au code suivant :</span><span class="sxs-lookup"><span data-stu-id="2e4d6-117">Modify the *Program.cs* file to match the following code:</span></span>

:::code language="csharp" source="snippets/configuration/console/Program.cs" highlight="18":::

<span data-ttu-id="2e4d6-118">La <xref:Microsoft.Extensions.Hosting.Host.CreateDefaultBuilder(System.String[])?displayProperty=nameWithType> méthode fournit la configuration par défaut pour l’application dans l’ordre suivant :</span><span class="sxs-lookup"><span data-stu-id="2e4d6-118">The <xref:Microsoft.Extensions.Hosting.Host.CreateDefaultBuilder(System.String[])?displayProperty=nameWithType> method provides default configuration for the app in the following order:</span></span>

1. <span data-ttu-id="2e4d6-119">[ChainedConfigurationProvider](xref:Microsoft.Extensions.Configuration.ChainedConfigurationSource) : ajoute un existant `IConfiguration` en tant que source.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-119">[ChainedConfigurationProvider](xref:Microsoft.Extensions.Configuration.ChainedConfigurationSource) : Adds an existing `IConfiguration` as a source.</span></span>
1. <span data-ttu-id="2e4d6-120">*appsettings.jssur* l’utilisation du [fournisseur de configuration JSON](configuration-providers.md#file-configuration-provider).</span><span class="sxs-lookup"><span data-stu-id="2e4d6-120">*appsettings.json* using the [JSON configuration provider](configuration-providers.md#file-configuration-provider).</span></span>
1. <span data-ttu-id="2e4d6-121">*appSettings.* `Environment` *. JSON* à l’aide du [fournisseur de configuration JSON](configuration-providers.md#file-configuration-provider).</span><span class="sxs-lookup"><span data-stu-id="2e4d6-121">*appsettings.*`Environment`*.json* using the [JSON configuration provider](configuration-providers.md#file-configuration-provider).</span></span> <span data-ttu-id="2e4d6-122">Par exemple, *appSettings*. ***Production \* \* _._json* et *appSettings*. \* \* \* développement** _._json \*.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-122">For example, *appsettings*.***Production\*\*_._json* and *appsettings*.\*\*\*Development** _._json\*.</span></span>
1. <span data-ttu-id="2e4d6-123">Secrets d’application lorsque l’application s’exécute dans l' `Development` environnement.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-123">App secrets when the app runs in the `Development` environment.</span></span>
1. <span data-ttu-id="2e4d6-124">Variables d’environnement à l’aide du [fournisseur de configuration des variables d’environnement](configuration-providers.md#environment-variable-configuration-provider).</span><span class="sxs-lookup"><span data-stu-id="2e4d6-124">Environment variables using the [Environment Variables configuration provider](configuration-providers.md#environment-variable-configuration-provider).</span></span>
1. <span data-ttu-id="2e4d6-125">Arguments de ligne de commande à l’aide du [fournisseur de configuration de ligne de commande](configuration-providers.md#command-line-configuration-provider).</span><span class="sxs-lookup"><span data-stu-id="2e4d6-125">Command-line arguments using the [Command-line configuration provider](configuration-providers.md#command-line-configuration-provider).</span></span>

<span data-ttu-id="2e4d6-126">Les fournisseurs de configuration ajoutés ultérieurement remplacent les paramètres de clé précédents.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-126">Configuration providers that are added later override previous key settings.</span></span> <span data-ttu-id="2e4d6-127">Par exemple, si `SomeKey` est défini dans *appsettings.jssur* et dans l’environnement, la valeur d’environnement est utilisée.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-127">For example, if `SomeKey` is set in both *appsettings.json* and the environment, the environment value is used.</span></span> <span data-ttu-id="2e4d6-128">À l’aide des fournisseurs de configuration par défaut, le [fournisseur de configuration de ligne de commande](configuration-providers.md#command-line-configuration-provider) remplace tous les autres fournisseurs.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-128">Using the default configuration providers, the [Command-line configuration provider](configuration-providers.md#command-line-configuration-provider) overrides all other providers.</span></span>

### <a name="binding"></a><span data-ttu-id="2e4d6-129">Liaison</span><span class="sxs-lookup"><span data-stu-id="2e4d6-129">Binding</span></span>

<span data-ttu-id="2e4d6-130">L’un des principaux avantages de la configuration dans .NET est la possibilité de lier des valeurs de configuration à des instances d’objets .NET.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-130">One of the key advantages to configuration in .NET is the ability to bind configuration values to instances of .NET objects.</span></span> <span data-ttu-id="2e4d6-131">Par exemple, le fournisseur de configuration JSON peut être utilisé pour mapper *desappsettings.jssur des* fichiers à des objets .net et est utilisé avec l’injection de dépendances.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-131">For example, the JSON configuration provider can be used to map *appsettings.json* files to .NET objects and is used with dependency injection.</span></span> <span data-ttu-id="2e4d6-132">Cela active le modèle d’options, le modèle d’options utilise des classes pour fournir un accès fortement typé aux groupes de paramètres associés.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-132">This enables the options pattern, the options pattern uses classes to provide strongly typed access to groups of related settings.</span></span>

## <a name="configuration-providers"></a><span data-ttu-id="2e4d6-133">Fournisseurs de configuration</span><span class="sxs-lookup"><span data-stu-id="2e4d6-133">Configuration providers</span></span>

<span data-ttu-id="2e4d6-134">Le tableau suivant présente les fournisseurs de configuration disponibles pour les applications .NET Core.</span><span class="sxs-lookup"><span data-stu-id="2e4d6-134">The following table shows the configuration providers available to .NET Core apps.</span></span>

| <span data-ttu-id="2e4d6-135">Fournisseur</span><span class="sxs-lookup"><span data-stu-id="2e4d6-135">Provider</span></span>                                                                                                               | <span data-ttu-id="2e4d6-136">Fournit la configuration à partir de</span><span class="sxs-lookup"><span data-stu-id="2e4d6-136">Provides configuration from</span></span>        |
|------------------------------------------------------------------------------------------------------------------------|------------------------------------|
| [<span data-ttu-id="2e4d6-137">Fournisseur de configuration Azure App</span><span class="sxs-lookup"><span data-stu-id="2e4d6-137">Azure App configuration provider</span></span>](/azure/azure-app-configuration/quickstart-aspnet-core-app)                          | <span data-ttu-id="2e4d6-138">Azure App Configuration</span><span class="sxs-lookup"><span data-stu-id="2e4d6-138">Azure App Configuration</span></span>            |
| [<span data-ttu-id="2e4d6-139">Fournisseur de configuration Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="2e4d6-139">Azure Key Vault configuration provider</span></span>](/azure/key-vault/general/tutorial-net-virtual-machine)                        | <span data-ttu-id="2e4d6-140">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="2e4d6-140">Azure Key Vault</span></span>                    |
| [<span data-ttu-id="2e4d6-141">Fournisseur de configuration de ligne de commande</span><span class="sxs-lookup"><span data-stu-id="2e4d6-141">Command-line configuration provider</span></span>](configuration-providers.md#command-line-configuration-provider)                  | <span data-ttu-id="2e4d6-142">Paramètres de ligne de commande</span><span class="sxs-lookup"><span data-stu-id="2e4d6-142">Command-line parameters</span></span>            |
| [<span data-ttu-id="2e4d6-143">Fournisseur de configuration personnalisé</span><span class="sxs-lookup"><span data-stu-id="2e4d6-143">Custom configuration provider</span></span>](custom-configuration-provider.md)                                                      | <span data-ttu-id="2e4d6-144">Source personnalisée</span><span class="sxs-lookup"><span data-stu-id="2e4d6-144">Custom source</span></span>                      |
| [<span data-ttu-id="2e4d6-145">Fournisseur de configuration des variables d’environnement</span><span class="sxs-lookup"><span data-stu-id="2e4d6-145">Environment Variables configuration provider</span></span>](configuration-providers.md#environment-variable-configuration-provider) | <span data-ttu-id="2e4d6-146">Variables d'environnement</span><span class="sxs-lookup"><span data-stu-id="2e4d6-146">Environment variables</span></span>              |
| [<span data-ttu-id="2e4d6-147">Fournisseur de configuration de fichier</span><span class="sxs-lookup"><span data-stu-id="2e4d6-147">File configuration provider</span></span>](configuration-providers.md#file-configuration-provider)                                  | <span data-ttu-id="2e4d6-148">Fichiers JSON, XML et INI</span><span class="sxs-lookup"><span data-stu-id="2e4d6-148">JSON, XML, and INI files</span></span>           |
| [<span data-ttu-id="2e4d6-149">Fournisseur de configuration de clé par fichier</span><span class="sxs-lookup"><span data-stu-id="2e4d6-149">Key-per-file configuration provider</span></span>](configuration-providers.md#key-per-file-configuration-provider)                  | <span data-ttu-id="2e4d6-150">Fichiers de répertoire</span><span class="sxs-lookup"><span data-stu-id="2e4d6-150">Directory files</span></span>                    |
| [<span data-ttu-id="2e4d6-151">Fournisseur de configuration de la mémoire</span><span class="sxs-lookup"><span data-stu-id="2e4d6-151">Memory configuration provider</span></span>](configuration-providers.md#memory-configuration-provider)                              | <span data-ttu-id="2e4d6-152">Collections en mémoire</span><span class="sxs-lookup"><span data-stu-id="2e4d6-152">In-memory collections</span></span>              |
| [<span data-ttu-id="2e4d6-153">Secrets d’application (gestionnaire de secret)</span><span class="sxs-lookup"><span data-stu-id="2e4d6-153">App secrets (Secret Manager)</span></span>](/aspnet/core/security/app-secrets)                                                      | <span data-ttu-id="2e4d6-154">Fichier dans le répertoire de profil utilisateur</span><span class="sxs-lookup"><span data-stu-id="2e4d6-154">File in the user profile directory</span></span> |

<span data-ttu-id="2e4d6-155">Pour plus d’informations sur les différents fournisseurs de configuration, consultez [fournisseurs de configuration dans .net](configuration-providers.md).</span><span class="sxs-lookup"><span data-stu-id="2e4d6-155">For more information on various configuration providers, see [Configuration providers in .NET](configuration-providers.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="2e4d6-156">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="2e4d6-156">See also</span></span>

- [<span data-ttu-id="2e4d6-157">Fournisseurs de configuration dans .NET</span><span class="sxs-lookup"><span data-stu-id="2e4d6-157">Configuration providers in .NET</span></span>](configuration-providers.md)
- [<span data-ttu-id="2e4d6-158">Implémenter un fournisseur de configuration personnalisé</span><span class="sxs-lookup"><span data-stu-id="2e4d6-158">Implement a custom configuration provider</span></span>](custom-configuration-provider.md)
- <span data-ttu-id="2e4d6-159">Les bogues de configuration doivent être créés dans [github.com/dotnet/extensions](https://github.com/dotnet/extensions/issues) référentiel</span><span class="sxs-lookup"><span data-stu-id="2e4d6-159">Configuration bugs should be created in the [github.com/dotnet/extensions](https://github.com/dotnet/extensions/issues) repo</span></span>
