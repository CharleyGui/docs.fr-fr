---
title: Déplacer du .NET Framework à .NET Core
description: Présentation du processus de portage et d’outils qui peuvent s’avérer utiles lors du portage d’un projet .NET Framework vers .NET Core.
author: cartermp
ms.date: 10/22/2019
ms.openlocfilehash: 74fe4519e41a07bc78a4dc346f8d1b52b5c7d092
ms.sourcegitcommit: da21fc5a8cce1e028575acf31974681a1bc5aeed
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/08/2020
ms.locfileid: "84502767"
---
# <a name="overview-of-porting-from-net-framework-to-net-core"></a><span data-ttu-id="cd2f9-103">Vue d’ensemble du Portage à partir de .NET Framework vers .NET Core</span><span class="sxs-lookup"><span data-stu-id="cd2f9-103">Overview of porting from .NET Framework to .NET Core</span></span>

<span data-ttu-id="cd2f9-104">Vous pouvez avoir du code qui s’exécute actuellement sur le .NET Framework que vous souhaitez porter vers .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-104">You might have code that currently runs on the .NET Framework that you're interested in porting to .NET Core.</span></span> <span data-ttu-id="cd2f9-105">Cet article fournit :</span><span class="sxs-lookup"><span data-stu-id="cd2f9-105">This article provides:</span></span>

* <span data-ttu-id="cd2f9-106">Vue d’ensemble du processus de Portage.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-106">An overview of the porting process.</span></span>
* <span data-ttu-id="cd2f9-107">Liste des outils que vous pouvez trouver utiles lorsque vous portez votre code vers .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-107">A list of tools that you may find helpful when you're porting your code to .NET Core.</span></span>

## <a name="overview-of-the-porting-process"></a><span data-ttu-id="cd2f9-108">Vue d’ensemble du processus de portage</span><span class="sxs-lookup"><span data-stu-id="cd2f9-108">Overview of the porting process</span></span>

<span data-ttu-id="cd2f9-109">Le portage vers .NET Core (ou .NET Standard) à partir de .NET Framework pour de nombreux projets est relativement simple.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-109">Porting to .NET Core (or .NET Standard) from .NET Framework for many projects is relatively straight forward.</span></span> <span data-ttu-id="cd2f9-110">Un certain nombre de modifications sont nécessaires, mais beaucoup d’entre elles suivent les modèles décrits ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-110">There are a number of changes that are required, but many of them follow the patterns outlined below.</span></span> <span data-ttu-id="cd2f9-111">Les projets dans lesquels le modèle d’application est disponible dans .NET Core (tels que les bibliothèques, les applications console et les applications de bureau) requièrent généralement peu de modifications.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-111">Projects where the app-model is available in .NET Core (such as libraries, console apps, and desktop applications) usually require little changes.</span></span> <span data-ttu-id="cd2f9-112">Les projets qui requièrent un nouveau modèle d’application, tels que le passage à des ASP.NET Core à partir de ASP.NET, nécessitent un peu plus de travail, mais de nombreux modèles ont des analogies qui peuvent être utilisées lors de la conversion.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-112">Projects that require a new app model, such as moving to ASP.NET Core from ASP.NET, require a bit more work, but many patterns have analogs that can be used during the conversion.</span></span> <span data-ttu-id="cd2f9-113">Ce document doit vous aider à identifier les principales stratégies qui ont été utilisées par les utilisateurs pour convertir leurs bases de code en cibles .NET Standard ou .NET Core, et traitera la conversion à deux niveaux : à l’ensemble de la solution et spécifique au projet.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-113">This document should help with identifying the main strategies that have been employed by users to successfully convert their code bases to target .NET Standard or .NET Core and will address the conversion at two levels: solution-wide and project specific.</span></span> <span data-ttu-id="cd2f9-114">Consultez les liens en bas pour obtenir des instructions sur les conversions spécifiques du modèle d’application.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-114">See the links at the bottom for directions on app-model specific conversions.</span></span>

<span data-ttu-id="cd2f9-115">Nous vous recommandons d’utiliser le processus suivant lors du Portage de votre projet vers .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-115">We recommend you use the following process when porting your project to .NET Core.</span></span> <span data-ttu-id="cd2f9-116">Chacune de ces étapes introduit des emplacements potentiels pour les changements de comportement. Veillez donc à tester correctement votre bibliothèque ou votre application avant de passer aux étapes ultérieures.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-116">Each of these steps introduces potential places for behavior changes, so ensure that you adequately test your library or application before continuing on to later steps.</span></span> <span data-ttu-id="cd2f9-117">La première étape consiste à préparer votre projet pour un basculement vers .NET Standard ou .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-117">The first steps are to get your project ready for a switch to .NET Standard or .NET Core.</span></span> <span data-ttu-id="cd2f9-118">Si vous avez des tests unitaires, il est préférable de les convertir d’abord afin de pouvoir continuer à tester les modifications dans le produit sur lequel vous travaillez.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-118">If you have unit tests, it's best to convert them first so that you can continue testing changes in the product you're working on.</span></span> <span data-ttu-id="cd2f9-119">Étant donné que le portage vers .NET Core est une modification significative de votre code base, il est fortement recommandé de porter vos projets de test afin que vous puissiez exécuter des tests au fur et à mesure que vous portez votre code.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-119">Because porting to .NET Core is such a significant change to your codebase, it's highly recommended to port your test projects so that you can run tests as you port your code over.</span></span> <span data-ttu-id="cd2f9-120">MSTest, xUnit et NUnit fonctionnent tous sur .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-120">MSTest, xUnit, and NUnit all work on .NET Core.</span></span>

## <a name="getting-started"></a><span data-ttu-id="cd2f9-121">Prise en main</span><span class="sxs-lookup"><span data-stu-id="cd2f9-121">Getting started</span></span>

<span data-ttu-id="cd2f9-122">Les outils suivants seront utilisés tout au long du processus :</span><span class="sxs-lookup"><span data-stu-id="cd2f9-122">The following tools will be used throughout the process:</span></span>

- <span data-ttu-id="cd2f9-123">Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="cd2f9-123">Visual Studio 2019</span></span>
- <span data-ttu-id="cd2f9-124">Télécharger l' [Analyseur de portabilité .net](../../standard/analyzers/portability-analyzer.md)</span><span class="sxs-lookup"><span data-stu-id="cd2f9-124">Download [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md)</span></span>
- <span data-ttu-id="cd2f9-125">_Facultatif_ Installer [dotnet try-Convert](https://github.com/dotnet/try-convert)</span><span class="sxs-lookup"><span data-stu-id="cd2f9-125">_Optional_ Install [dotnet try-convert](https://github.com/dotnet/try-convert)</span></span>

## <a name="porting-a-solution"></a><span data-ttu-id="cd2f9-126">Portage d’une solution</span><span class="sxs-lookup"><span data-stu-id="cd2f9-126">Porting a solution</span></span>

<span data-ttu-id="cd2f9-127">En présence de plusieurs projets dans une solution, le portage peut paraître plus compliqué, car vous devez traiter les projets dans un ordre spécifique.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-127">When there are multiple projects in a solution, the porting can seem more complicated because you must address projects in a specific order.</span></span> <span data-ttu-id="cd2f9-128">Le processus de conversion doit être une approche ascendante, dans laquelle les projets sans dépendances sur d’autres projets de la solution sont convertis en premier et continuent jusqu’à l’ensemble de la solution.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-128">The conversion process should be a bottom-up approach, where the projects with no dependencies on other projects in the solution are converted first, and continue up through the whole solution.</span></span>

<span data-ttu-id="cd2f9-129">Pour identifier les projets de commande à migrer, vous pouvez utiliser les outils suivants :</span><span class="sxs-lookup"><span data-stu-id="cd2f9-129">In order to identify the order projects should be migrated, you can use the following tools:</span></span>

- <span data-ttu-id="cd2f9-130">Les [diagrammes de dépendance dans Visual Studio](/visualstudio/modeling/create-layer-diagrams-from-your-code) peuvent créer un graphique orienté du code dans une solution.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-130">[Dependency Diagrams in Visual Studio](/visualstudio/modeling/create-layer-diagrams-from-your-code) can create a directed graph of the code in a solution.</span></span>
- <span data-ttu-id="cd2f9-131">Exécutez `msbuild _SolutionPath_ /t:GenerateRestoreGraphFile /p:RestoreGraphOutputPath=graph.dg.json` pour générer un document JSON qui comprend la liste des références de projet.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-131">Run `msbuild _SolutionPath_ /t:GenerateRestoreGraphFile /p:RestoreGraphOutputPath=graph.dg.json` to generate a json document that includes list of project references.</span></span>
- <span data-ttu-id="cd2f9-132">Exécutez l' [Analyseur de portabilité .net](../../standard/analyzers/portability-analyzer.md) avec le `-r DGML` commutateur pour récupérer un diagramme de dépendance des assemblys.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-132">Run [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) with the `-r DGML` switch to retrieve a dependency diagram of the assemblies.</span></span> <span data-ttu-id="cd2f9-133">Vous pourrez trouver plus d’informations [ici](../../standard/analyzers/portability-analyzer.md#solution-wide-view).</span><span class="sxs-lookup"><span data-stu-id="cd2f9-133">For more information, see [here](../../standard/analyzers/portability-analyzer.md#solution-wide-view).</span></span>

<span data-ttu-id="cd2f9-134">Une fois que vous avez des informations sur les dépendances, vous pouvez utiliser ces informations pour démarrer à partir des nœuds terminaux et travailler dans l’arborescence des dépendances en appliquant les étapes de la section suivante.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-134">Once you have dependency information, you can use that information to start at the leaf nodes and work your way up the dependency tree applying the steps in the next section.</span></span>

## <a name="per-project-steps"></a><span data-ttu-id="cd2f9-135">Par étape de projet</span><span class="sxs-lookup"><span data-stu-id="cd2f9-135">Per project steps</span></span>

<span data-ttu-id="cd2f9-136">Nous vous recommandons d’utiliser le processus suivant lors du Portage de votre projet vers .NET Core :</span><span class="sxs-lookup"><span data-stu-id="cd2f9-136">We recommend you use the following process when porting your project to .NET Core:</span></span>

1. <span data-ttu-id="cd2f9-137">Convertissez toutes vos `packages.config` dépendances au format [PackageReference](/nuget/consume-packages/package-references-in-project-files) avec l' [outil de conversion dans Visual Studio](/nuget/consume-packages/migrate-packages-config-to-package-reference).</span><span class="sxs-lookup"><span data-stu-id="cd2f9-137">Convert all of your `packages.config` dependencies to the [PackageReference](/nuget/consume-packages/package-references-in-project-files) format with the [conversion tool in Visual Studio](/nuget/consume-packages/migrate-packages-config-to-package-reference).</span></span>

   <span data-ttu-id="cd2f9-138">Cette étape implique la conversion de vos dépendances à partir du `packages.config` format hérité.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-138">This step involves converting your dependencies from the legacy `packages.config` format.</span></span> <span data-ttu-id="cd2f9-139">`packages.config`ne fonctionne pas sur .NET Core, cette conversion est donc nécessaire si vous avez des dépendances de package.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-139">`packages.config` doesn't work on .NET Core, so this conversion is required if you have package dependencies.</span></span> <span data-ttu-id="cd2f9-140">Elle nécessite également uniquement les dépendances que vous utilisez directement dans un projet, ce qui facilite les étapes ultérieures en réduisant le nombre de dépendances que vous devez gérer.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-140">It also only requires the dependencies you are directly using in a project, which makes later steps easier by reducing the number of dependencies you must manage.</span></span>

1. <span data-ttu-id="cd2f9-141">Convertissez votre fichier projet vers la nouvelle structure de fichiers de style SDK.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-141">Convert your project file to the new SDK-style files structure.</span></span> <span data-ttu-id="cd2f9-142">Vous pouvez créer des projets pour .NET Core et copier des fichiers sources, ou essayer de convertir votre fichier projet existant à l’aide d’un outil.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-142">You can create new projects for .NET Core and copy over source files, or attempt to convert your existing project file with a tool.</span></span>

   <span data-ttu-id="cd2f9-143">.NET Core utilise un [format de fichier projet](../tools/csproj.md) simplifié (et différent) que .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-143">.NET Core uses a simplified (and different) [project file format](../tools/csproj.md) than .NET Framework.</span></span> <span data-ttu-id="cd2f9-144">Vous devez convertir vos fichiers projet dans ce format pour continuer.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-144">You'll need to convert your project files into this format to continue.</span></span> <span data-ttu-id="cd2f9-145">Ce style de projet vous permet également de cibler .NET Framework, à ce stade, vous souhaitez toujours cibler.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-145">This project style allows you to also target .NET Framework, which at this point you'll still want to target.</span></span>

   <span data-ttu-id="cd2f9-146">Vous pouvez tenter de porter des solutions plus petites ou des projets individuels en une seule opération au format de fichier projet .NET Core à l’aide de l’outil [dotnet try-Convert](https://github.com/dotnet/try-convert) .</span><span class="sxs-lookup"><span data-stu-id="cd2f9-146">You can attempt to port smaller solutions or individual projects in one operation to the .NET Core project file format with the [dotnet try-convert](https://github.com/dotnet/try-convert) tool.</span></span> <span data-ttu-id="cd2f9-147">`dotnet try-convert`n’a pas la garantie de fonctionner pour tous vos projets et peut entraîner des modifications subtiles du comportement dont vous dépendez.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-147">`dotnet try-convert` is not guaranteed to work for all your projects, and it may cause subtle changes in behavior that you depended on.</span></span> <span data-ttu-id="cd2f9-148">Utilisez-le comme _point de départ_ pour automatiser les éléments de base qui peuvent être automatisés.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-148">Use it as a _starting point_ that automates the basic things that can be automated.</span></span> <span data-ttu-id="cd2f9-149">Il ne s’agit pas d’une solution garantie pour la migration d’un projet, car il existe de nombreuses différences dans les cibles utilisées par les projets de style du kit de développement logiciel (SDK) par rapport aux anciens fichiers de projet.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-149">It isn't a guaranteed solution to migrating a project, as there are many differences in the targets used by the SDK style projects compared to the old-style project files.</span></span>

1. <span data-ttu-id="cd2f9-150">Reciblez tous les projets que vous souhaitez porter vers la cible .NET Framework 4.7.2 ou une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-150">Retarget all projects you wish to port to target .NET Framework 4.7.2 or higher.</span></span>

   <span data-ttu-id="cd2f9-151">Cette étape garantit que vous pouvez utiliser des API alternatives pour des cibles spécifiques au .NET Framework si .NET Core ne prend en charge une API particulière.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-151">This step ensures that you can use API alternatives for .NET Framework-specific targets when .NET Core doesn't support a particular API.</span></span>

1. <span data-ttu-id="cd2f9-152">Mettez à jour toutes les dépendances avec la version la plus récente.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-152">Update all dependencies to the latest version.</span></span> <span data-ttu-id="cd2f9-153">Les projets utilisent peut-être des versions antérieures de bibliothèques qui n’ont peut-être pas pris en charge .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-153">Projects may be using older versions of libraries that may not have .NET Standard support.</span></span> <span data-ttu-id="cd2f9-154">Toutefois, les versions ultérieures peuvent la prendre en charge avec un commutateur simple.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-154">However, later versions may support it with a simple switch.</span></span> <span data-ttu-id="cd2f9-155">Cela peut nécessiter des modifications de code en cas de modifications avec rupture dans les bibliothèques.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-155">This may require code changes if there are breaking changes in libraries.</span></span>

1. <span data-ttu-id="cd2f9-156">Utilisez l' [Analyseur de portabilité .net](../../standard/analyzers/portability-analyzer.md) pour analyser vos assemblys et voir s’ils sont portables vers .net core.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-156">Use the [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) to analyze your assemblies and see if they're portable to .NET Core.</span></span>

   <span data-ttu-id="cd2f9-157">L’outil de l’analyseur de portabilité .NET analyse vos assemblys compilés et génère un rapport.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-157">The .NET Portability Analyzer tool analyzes your compiled assemblies and generates a report.</span></span> <span data-ttu-id="cd2f9-158">Ce rapport affiche un résumé de la portabilité de haut niveau et une répartition de chaque API que vous utilisez et qui n’est pas disponible sur le réseau principal.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-158">This report shows a high-level portability summary and a breakdown of each API you're using that isn't available on NET Core.</span></span> <span data-ttu-id="cd2f9-159">Quand vous utilisez l’outil, soumettez uniquement le projet individuel que vous convertissez pour vous concentrer sur les modifications d’API qui sont potentiellement nécessaires.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-159">While using the tool, only submit the individual project you are converting to focus on the API changes that are potentially needed.</span></span> <span data-ttu-id="cd2f9-160">La plupart des API ont une disponibilité équivalente dans .NET Core, à partir de laquelle vous souhaitez basculer.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-160">Many of the APIs have equivalent availability in .NET Core, which you'll want to switch to.</span></span>

   <span data-ttu-id="cd2f9-161">Lors de la lecture des rapports générés par l’analyseur, les informations importantes sont les API réelles qui sont utilisées et pas nécessairement le pourcentage de prise en charge de la plateforme cible.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-161">While reading the reports generated by the analyzer, the important information is the actual APIs that are being used and not necessarily the percentage of support for the target platform.</span></span> <span data-ttu-id="cd2f9-162">De nombreuses API ont des options équivalentes dans .NET Standard/Core, et par conséquent, il est important de comprendre les scénarios dont votre bibliothèque ou votre application a besoin pour déterminer l’implication de la portabilité.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-162">Many APIs have equivalent options in .NET Standard/Core, and so understanding the scenarios your library or application needs the API for will help determine the implication for portability.</span></span>

   <span data-ttu-id="cd2f9-163">Dans certains cas, les API ne sont pas équivalentes et vous devez effectuer certaines directives de préprocesseur du compilateur (autrement dit, `#if NET45` ) pour ajouter des plateformes au cas particulier.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-163">There are some cases where APIs are not equivalent and you'll need to do some compiler preprocessor directives (that is, `#if NET45`) to special case the platforms.</span></span> <span data-ttu-id="cd2f9-164">À ce stade, votre projet sera toujours ciblé .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-164">At this point, your project will still be targeting .NET Framework.</span></span> <span data-ttu-id="cd2f9-165">Pour chacun de ces cas ciblés, il est recommandé d’utiliser des conditions bien connues qui peuvent être comprises comme un scénario.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-165">For each of these targeted cases, it is recommended to use well-known conditionals that can be understood as a scenario.</span></span>  <span data-ttu-id="cd2f9-166">Par exemple, la prise en charge d’AppDomain dans .NET Core est limitée, mais pour le scénario de chargement et de déchargement des assemblys, il existe une nouvelle API qui n’est pas disponible dans .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-166">For example, AppDomain support in .NET Core is limited, but for the scenario of loading and unloading assemblies, there is a new API that's not available in .NET Core.</span></span> <span data-ttu-id="cd2f9-167">Voici un moyen courant de gérer cela dans le code :</span><span class="sxs-lookup"><span data-stu-id="cd2f9-167">A common way to handle this in code would be something like this:</span></span>

   ```csharp
   #if FEATURE_APPDOMAIN_LOADING
   // Code that uses appdomains
   #elif FEATURE_ASSEMBLY_LOAD_CONTEXT
   // Code that uses assembly load context
   #else
   #error Unsupported platform
   #endif
   ```

1. <span data-ttu-id="cd2f9-168">Installez l' [analyseur d’API .net](../../standard/analyzers/api-analyzer.md) dans vos projets pour identifier les API qui lèvent <xref:System.PlatformNotSupportedException> sur certaines plateformes et d’autres problèmes de compatibilité potentiels.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-168">Install the [.NET API analyzer](../../standard/analyzers/api-analyzer.md) into your projects to identify APIs that throw <xref:System.PlatformNotSupportedException> on some platforms and some other potential compatibility issues.</span></span>

   <span data-ttu-id="cd2f9-169">Cet outil est similaire à l’analyseur de portabilité, mais au lieu d’analyser si le code peut être généré sur .NET Core, il analyse si vous utilisez une API d’une manière qui lève une <xref:System.PlatformNotSupportedException> au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-169">This tool is similar to the portability analyzer, but instead of analyzing if code can build on .NET Core, it analyzes whether you're using an API in a way that will throw a <xref:System.PlatformNotSupportedException> at run time.</span></span> <span data-ttu-id="cd2f9-170">Bien que cela ne soit pas courant si vous passez de .NET Framework 4.7.2 ou une version ultérieure, il est préférable de vérifier.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-170">Although this isn't common if you're moving from .NET Framework 4.7.2 or higher, it's good to check.</span></span> <span data-ttu-id="cd2f9-171">Pour plus d’informations sur les API qui lèvent des exceptions sur .NET Core, consultez [API qui lèvent toujours des exceptions sur .net Core](../compatibility/unsupported-apis.md).</span><span class="sxs-lookup"><span data-stu-id="cd2f9-171">For more information about APIs that throw exceptions on .NET Core, see [APIs that always throw exceptions on .NET Core](../compatibility/unsupported-apis.md).</span></span>

1. <span data-ttu-id="cd2f9-172">À ce stade, vous pouvez basculer vers le ciblage de .NET Core (généralement pour les applications) ou .NET Standard (pour les bibliothèques).</span><span class="sxs-lookup"><span data-stu-id="cd2f9-172">At this point, you can switch to targeting .NET Core (generally for applications) or .NET Standard (for libraries).</span></span>

   <span data-ttu-id="cd2f9-173">Le choix entre .NET Core et .NET Standard dépend en grande partie de l’emplacement où le projet sera exécuté.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-173">The choice between .NET Core and .NET Standard is largely dependent on where the project will be run.</span></span> <span data-ttu-id="cd2f9-174">S’il s’agit d’une bibliothèque qui sera consommée par d’autres applications ou distribuée via NuGet, la préférence consiste généralement à cibler .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-174">If it is a library that will be consumed by other applications or distributed via NuGet, the preference is usually to target .NET Standard.</span></span> <span data-ttu-id="cd2f9-175">Toutefois, il peut y avoir des API qui sont uniquement disponibles sur .NET Core pour des raisons de performances ou pour d’autres raisons. Si c’est le cas, .NET Core doit être ciblé avec une .NET Standard Build potentiellement disponible, avec des performances ou des fonctionnalités réduites.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-175">However, there may be APIs that are only available on .NET Core for performance or other reasons; if that's the case, .NET Core should be targeted with potentially a .NET Standard build available as well with reduced performance or functionality.</span></span> <span data-ttu-id="cd2f9-176">En ciblant .NET Standard, le projet est prêt à s’exécuter sur de nouvelles plateformes (par exemple, webassembly).</span><span class="sxs-lookup"><span data-stu-id="cd2f9-176">By targeting .NET Standard, the project will be ready to run on new platforms (such as WebAssembly).</span></span> <span data-ttu-id="cd2f9-177">Si le projet a des dépendances sur des infrastructures d’application spécifiques (telles que ASP.NET Core), la cible sera limitée par les dépendances prises en charge par les dépendances.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-177">If the project has dependencies on specific app frameworks (such as ASP.NET Core), then the target will be limited by what the dependencies support.</span></span>

   <span data-ttu-id="cd2f9-178">S’il n’existe aucune directive de préprocesseur pour le code de compilation conditionnelle pour .NET Framework ou .NET Standard, il s’agit simplement de rechercher les éléments suivants dans le fichier projet :</span><span class="sxs-lookup"><span data-stu-id="cd2f9-178">If there are no preprocessor directives to conditional compile code for .NET Framework or .NET Standard, this will be as simple as finding the following in the project file:</span></span>

   ```xml
   <TargetFramework>net472</TargetFramework>
   ```

   <span data-ttu-id="cd2f9-179">et basculez vers le Framework souhaité.</span><span class="sxs-lookup"><span data-stu-id="cd2f9-179">and switch it to the desired framework.</span></span> <span data-ttu-id="cd2f9-180">Pour .NET Core 3,1, il s’agit de :</span><span class="sxs-lookup"><span data-stu-id="cd2f9-180">For .NET Core 3.1, this would be:</span></span>

   ```xml
   <TargetFramework>netcoreapp3.1</TargetFramework>
   ```

   <span data-ttu-id="cd2f9-181">Toutefois, s’il s’agit d’une bibliothèque pour laquelle vous souhaitez continuer à prendre en charge des builds spécifiques à .NET Framework, vous pouvez utiliser [plusieurs cibles](../../standard/library-guidance/cross-platform-targeting.md) en les remplaçant par les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="cd2f9-181">However, if this is a library for which you want to continue supporting .NET Framework-specific builds, you can [multi-target](../../standard/library-guidance/cross-platform-targeting.md) by replacing it with the following:</span></span>

   ```xml
   <TargetFrameworks>net472;netstandard2.0</TargetFrameworks>
   ```

   <span data-ttu-id="cd2f9-182">Si vous utilisez des API spécifiques à Windows (telles que l’accès au registre), installez le [Pack de compatibilité Windows](./windows-compat-pack.md).</span><span class="sxs-lookup"><span data-stu-id="cd2f9-182">If you're using Windows-specific APIs (such as registry access), install the [Windows Compatibility Pack](./windows-compat-pack.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="cd2f9-183">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="cd2f9-183">Next steps</span></span>

> [!div class="nextstepaction"]
> <span data-ttu-id="cd2f9-184">[Analyser les dépendances](third-party-deps.md) 
>  Package [NuGet package](../deploying/creating-nuget-packages.md) 
>  [Migration de ASP.net vers ASP.net Core](/aspnet/core/migration/proper-to-2x)</span><span class="sxs-lookup"><span data-stu-id="cd2f9-184">[Analyze dependencies](third-party-deps.md)
[Package NuGet Package](../deploying/creating-nuget-packages.md)
[ASP.NET to ASP.NET Core Migration](/aspnet/core/migration/proper-to-2x)</span></span>
