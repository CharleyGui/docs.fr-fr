---
title: Utiliser la couverture du code pour les tests unitaires
description: Découvrez comment utiliser les fonctionnalités de couverture du code pour les tests unitaires .NET.
author: IEvangelist
ms.author: dapine
ms.date: 06/16/2020
ms.openlocfilehash: 47f10ae367f511d5d02d32bfcb35bf4775a3e946
ms.sourcegitcommit: 45c8eed045779b70a47b23169897459d0323dc89
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/18/2020
ms.locfileid: "84990278"
---
# <a name="use-code-coverage-for-unit-testing"></a><span data-ttu-id="27a51-103">Utiliser la couverture du code pour les tests unitaires</span><span class="sxs-lookup"><span data-stu-id="27a51-103">Use code coverage for unit testing</span></span>

<span data-ttu-id="27a51-104">Les tests unitaires permettent de garantir des fonctionnalités et de fournir un moyen de vérification des efforts de refactorisation.</span><span class="sxs-lookup"><span data-stu-id="27a51-104">Unit tests help to ensure functionality, and provide a means of verification for refactoring efforts.</span></span> <span data-ttu-id="27a51-105">La couverture du code est une mesure de la quantité de code exécutée par les tests unitaires : lignes, branches ou méthodes.</span><span class="sxs-lookup"><span data-stu-id="27a51-105">Code coverage is a measurement of the amount of code that is run by unit tests - either lines, branches, or methods.</span></span> <span data-ttu-id="27a51-106">Par exemple, si vous avez une application simple avec deux branches conditionnelles de code (_branche a_et _branche b_), un test unitaire qui vérifie _la branche conditionnelle a_ indiquera la couverture du code de branche de 50%.</span><span class="sxs-lookup"><span data-stu-id="27a51-106">As an example, if you have a simple application with only two conditional branches of code (_branch a_, and _branch b_), a unit test that verifies conditional _branch a_ will report branch code coverage of 50%.</span></span>

<span data-ttu-id="27a51-107">Cet article traite de l’utilisation de la couverture du code pour les tests unitaires avec coverlet et la génération de rapports à l’aide de ReportGenerator.</span><span class="sxs-lookup"><span data-stu-id="27a51-107">This article discusses the usage of code coverage for unit testing with Coverlet and report generation using ReportGenerator.</span></span> <span data-ttu-id="27a51-108">Bien que cet article se concentre sur C# et xUnit comme Framework de test, MSTest et NUnit fonctionnent également.</span><span class="sxs-lookup"><span data-stu-id="27a51-108">While this article focuses on C# and xUnit as the test framework, both MSTest and NUnit would also work.</span></span> <span data-ttu-id="27a51-109">Coverlet est un [projet open source sur GitHub](https://github.com/coverlet-coverage/coverlet) qui fournit une infrastructure de couverture de code multiplateforme pour C#.</span><span class="sxs-lookup"><span data-stu-id="27a51-109">Coverlet is an [open source project on GitHub](https://github.com/coverlet-coverage/coverlet) that provides a cross platform code coverage framework for C#.</span></span> <span data-ttu-id="27a51-110">[Coverlet](https://dotnetfoundation.org/projects/coverlet) fait partie de .net Foundation.</span><span class="sxs-lookup"><span data-stu-id="27a51-110">[Coverlet](https://dotnetfoundation.org/projects/coverlet) is part of the .NET foundation.</span></span> <span data-ttu-id="27a51-111">Coverlet collecte les données de série de tests de couverture cobertura, qui sont utilisées pour la génération de rapports.</span><span class="sxs-lookup"><span data-stu-id="27a51-111">Coverlet collects Cobertura coverage test run data, which is used for report generation.</span></span>

<span data-ttu-id="27a51-112">En outre, cet article explique comment utiliser les informations de couverture du code collectées à partir d’une série de tests coverlet pour générer un rapport.</span><span class="sxs-lookup"><span data-stu-id="27a51-112">Additionally, this article details how to use the code coverage information collected from a Coverlet test run to generate a report.</span></span> <span data-ttu-id="27a51-113">La génération de rapports est possible à l’aide d’un autre [projet open source sur GitHub-ReportGenerator](https://github.com/danielpalme/ReportGenerator).</span><span class="sxs-lookup"><span data-stu-id="27a51-113">The report generation is possible using another [open source project on GitHub - ReportGenerator](https://github.com/danielpalme/ReportGenerator).</span></span> <span data-ttu-id="27a51-114">ReportGenerator convertit les rapports de couverture générés par cobertura entre plusieurs autres, en rapports lisibles par les humains dans différents formats.</span><span class="sxs-lookup"><span data-stu-id="27a51-114">ReportGenerator converts coverage reports generated by Cobertura among many others, into human readable reports in various formats.</span></span>

## <a name="system-under-test"></a><span data-ttu-id="27a51-115">Système testé</span><span class="sxs-lookup"><span data-stu-id="27a51-115">System under test</span></span>

<span data-ttu-id="27a51-116">Le « système testé » fait référence au code sur lequel vous écrivez des tests unitaires, il peut s’agir d’un objet, d’un service ou tout autre qui expose des fonctionnalités testable.</span><span class="sxs-lookup"><span data-stu-id="27a51-116">The "system under test" refers to the code that you're writing unit tests against, this could be an object, service, or anything else that exposes testable functionality.</span></span> <span data-ttu-id="27a51-117">Dans le cadre de cet article, vous allez créer une bibliothèque de classes qui sera le système testé et deux projets de test unitaire correspondants.</span><span class="sxs-lookup"><span data-stu-id="27a51-117">For the purpose of this article, you'll create a class library that will be the system under test, and two corresponding unit test projects.</span></span>

### <a name="create-a-class-library"></a><span data-ttu-id="27a51-118">Créer une bibliothèque de classes</span><span class="sxs-lookup"><span data-stu-id="27a51-118">Create a class library</span></span>

<span data-ttu-id="27a51-119">À partir d’une invite de commandes dans un nouveau répertoire nommé `UnitTestingCodeCoverage` , créez une bibliothèque de classes .NET standard à l’aide de la [`dotnet new classlib`](../tools/dotnet-new.md#classlib) commande :</span><span class="sxs-lookup"><span data-stu-id="27a51-119">From a command prompt in a new directory named `UnitTestingCodeCoverage`, create a new .NET standard class library using the [`dotnet new classlib`](../tools/dotnet-new.md#classlib) command:</span></span>

```dotnetcli
dotnet new classlib -n Numbers
```

<span data-ttu-id="27a51-120">L’extrait de code ci-dessous définit une `PrimeService` classe simple qui fournit des fonctionnalités permettant de vérifier si un nombre est premier.</span><span class="sxs-lookup"><span data-stu-id="27a51-120">The snippet below defines a simple `PrimeService` class that provides functionality to check if a number is prime.</span></span> <span data-ttu-id="27a51-121">Copiez l’extrait de code ci-dessous et remplacez le contenu du fichier *Class1.cs* qui a été créé automatiquement dans le répertoire *numbers* .</span><span class="sxs-lookup"><span data-stu-id="27a51-121">Copy the snippet below and replace the contents of the *Class1.cs* file that was automatically created in the *Numbers* directory.</span></span> <span data-ttu-id="27a51-122">Renommez le fichier *Class1.cs* en *PrimeService.cs*.</span><span class="sxs-lookup"><span data-stu-id="27a51-122">Rename the *Class1.cs* file to *PrimeService.cs*.</span></span>

```csharp
namespace System.Numbers
{
    public class PrimeService
    {
        public bool IsPrime(int candidate)
        {
            if (candidate < 2)
            {
                return false;
            }

            for (int divisor = 2; divisor <= Math.Sqrt(candidate); ++divisor)
            {
                if (candidate % divisor == 0)
                {
                    return false;
                }
            }
            return true;
        }
    }
}
```

> [!TIP]
> <span data-ttu-id="27a51-123">Il est intéressant de mentionner que la `Numbers` bibliothèque de classes a été ajoutée intentionnellement à l' `System` espace de noms.</span><span class="sxs-lookup"><span data-stu-id="27a51-123">It is worth mentioning the that `Numbers` class library was intentionally added to the `System` namespace.</span></span> <span data-ttu-id="27a51-124">Cela permet <xref:System.Math?displayProperty=fullName> à d’être accessible sans `using System;` déclaration d’espace de noms.</span><span class="sxs-lookup"><span data-stu-id="27a51-124">This allows for <xref:System.Math?displayProperty=fullName> to be accessible without a `using System;` namespace declaration.</span></span> <span data-ttu-id="27a51-125">Pour plus d’informations, consultez [espace de noms (référence C#)](../../csharp/language-reference/keywords/namespace.md).</span><span class="sxs-lookup"><span data-stu-id="27a51-125">For more information, see [namespace (C# Reference)](../../csharp/language-reference/keywords/namespace.md).</span></span>

### <a name="create-test-projects"></a><span data-ttu-id="27a51-126">Créer des projets de test</span><span class="sxs-lookup"><span data-stu-id="27a51-126">Create test projects</span></span>

<span data-ttu-id="27a51-127">Créez deux nouveaux modèles de **projet de test xUnit (.net Core)** à partir de la même invite de commandes à l’aide de la [`dotnet new xunit`](../tools/dotnet-new.md#test) commande :</span><span class="sxs-lookup"><span data-stu-id="27a51-127">Create two new **xUnit Test Project (.NET Core)** templates from the same command prompt using the [`dotnet new xunit`](../tools/dotnet-new.md#test) command:</span></span>

```dotnetcli
dotnet new xunit -n XUnit.Coverlet.Collector
```

```dotnetcli
dotnet new xunit -n XUnit.Coverlet.MSBuild
```

<span data-ttu-id="27a51-128">Les deux projets de test xUnit nouvellement créés doivent ajouter une référence de projet de la bibliothèque de classes *numbers* .</span><span class="sxs-lookup"><span data-stu-id="27a51-128">Both of the newly created xUnit test projects need to add a project reference of the *Numbers* class library.</span></span> <span data-ttu-id="27a51-129">Cela permet aux projets de test d’accéder au *PrimeService* à des fins de test.</span><span class="sxs-lookup"><span data-stu-id="27a51-129">This is so that the test projects have access to the *PrimeService* for testing.</span></span> <span data-ttu-id="27a51-130">À partir de l’invite de commandes, utilisez la [`dotnet add`](../tools/dotnet-add-reference.md) commande :</span><span class="sxs-lookup"><span data-stu-id="27a51-130">From the command prompt, use the [`dotnet add`](../tools/dotnet-add-reference.md) command:</span></span>

```dotnetcli
dotnet add XUnit.Coverlet.Collector\XUnit.Coverlet.Collector.csproj reference Numbers\Numbers.csproj
```

```dotnetcli
dotnet add XUnit.Coverlet.MSBuild\XUnit.Coverlet.MSBuild.csproj reference Numbers\Numbers.csproj
```

<span data-ttu-id="27a51-131">Le projet *MSBuild* est nommé de manière appropriée, car il dépend du package NuGet [coverlet. MSBuild](https://www.nuget.org/packages/coverlet.msbuild) .</span><span class="sxs-lookup"><span data-stu-id="27a51-131">The *MSBuild* project is named appropriately, as it will depend on the [coverlet.msbuild](https://www.nuget.org/packages/coverlet.msbuild) NuGet package.</span></span> <span data-ttu-id="27a51-132">Ajoutez cette dépendance de package en exécutant la [`dotnet add package`](../tools/dotnet-add-package.md) commande suivante :</span><span class="sxs-lookup"><span data-stu-id="27a51-132">Add this package dependency by running the [`dotnet add package`](../tools/dotnet-add-package.md) command:</span></span>

```dotnetcli
cd XUnit.Coverlet.MSBuild && dotnet add package coverlet.msbuild && cd ..
```

<span data-ttu-id="27a51-133">La commande précédente a modifié les répertoires avec efficacité pour le projet de test *MSBuild* , puis j’ai ajouté le package NuGet.</span><span class="sxs-lookup"><span data-stu-id="27a51-133">The previous command changed directories effectively scoping to the *MSBuild* test project, then added the NuGet package.</span></span> <span data-ttu-id="27a51-134">Une fois cette opération effectuée, les répertoires ont été modifiés pour remonter d’un niveau.</span><span class="sxs-lookup"><span data-stu-id="27a51-134">When that was done, it then changed directories, stepping up one level.</span></span>

<span data-ttu-id="27a51-135">Ouvrez les deux fichiers *UnitTest1.cs* et remplacez leur contenu par l’extrait de code suivant.</span><span class="sxs-lookup"><span data-stu-id="27a51-135">Open both of the *UnitTest1.cs* files, and replace their contents with the following snippet.</span></span> <span data-ttu-id="27a51-136">Renommez les fichiers *UnitTest1.cs* en *PrimeServiceTests.cs*.</span><span class="sxs-lookup"><span data-stu-id="27a51-136">Rename the *UnitTest1.cs* files to *PrimeServiceTests.cs*.</span></span>

```csharp
using System.Numbers;
using Xunit;

namespace XUnit.Coverlet
{
    public class PrimeServiceTests
    {
        readonly PrimeService _primeService;

        public PrimeServiceTests() => _primeService = new PrimeService();

        [
            Theory,
            InlineData(-1), InlineData(0), InlineData(1)
        ]
        public void IsPrime_ValuesLessThan2_ReturnFalse(int value) =>
            Assert.False(_primeService.IsPrime(value), $"{value} should not be prime");

        [
            Theory,
            InlineData(2), InlineData(3), InlineData(5), InlineData(7)
        ]
        public void IsPrime_PrimesLessThan10_ReturnTrue(int value) =>
            Assert.True(_primeService.IsPrime(value), $"{value} should be prime");

        [
            Theory,
            InlineData(4), InlineData(6), InlineData(8), InlineData(9)
        ]
        public void IsPrime_NonPrimesLessThan10_ReturnFalse(int value) =>
            Assert.False(_primeService.IsPrime(value), $"{value} should not be prime");
    }
}
```

### <a name="create-a-solution"></a><span data-ttu-id="27a51-137">Créer une solution</span><span class="sxs-lookup"><span data-stu-id="27a51-137">Create a solution</span></span>

<span data-ttu-id="27a51-138">À partir de l’invite de commandes, créez une nouvelle solution pour encapsuler la bibliothèque de classes et les deux projets de test.</span><span class="sxs-lookup"><span data-stu-id="27a51-138">From the command prompt, create a new solution to encapsulate the class library and the two test projects.</span></span> <span data-ttu-id="27a51-139">À l’aide de la [`dotnet sln`](../tools/dotnet-sln.md) commande :</span><span class="sxs-lookup"><span data-stu-id="27a51-139">Using the [`dotnet sln`](../tools/dotnet-sln.md) command:</span></span>

```dotnetcli
dotnet new sln -n XUnit.Coverage
```

<span data-ttu-id="27a51-140">Cela permet de créer un nouveau nom de fichier solution `XUnit.Coverage` dans le répertoire *UnitTestingCodeCoverage* .</span><span class="sxs-lookup"><span data-stu-id="27a51-140">This will create a new solution file name `XUnit.Coverage` in the *UnitTestingCodeCoverage* directory.</span></span> <span data-ttu-id="27a51-141">Ajoutez les projets à la racine de la solution.</span><span class="sxs-lookup"><span data-stu-id="27a51-141">Add the projects to the root of the solution.</span></span>

## <a name="linux"></a>[<span data-ttu-id="27a51-142">Linux</span><span class="sxs-lookup"><span data-stu-id="27a51-142">Linux</span></span>](#tab/linux)

```dotnetcli
dotnet sln XUnit.Coverage.sln add **/*.csproj --in-root
```

## <a name="windows"></a>[<span data-ttu-id="27a51-143">Windows</span><span class="sxs-lookup"><span data-stu-id="27a51-143">Windows</span></span>](#tab/windows)

```dotnetcli
dotnet sln XUnit.Coverage.sln add (ls **/*.csproj) --in-root
```

---

<span data-ttu-id="27a51-144">Générez la solution à l’aide de la [`dotnet build`](../tools/dotnet-build.md) commande :</span><span class="sxs-lookup"><span data-stu-id="27a51-144">Build the solution using the [`dotnet build`](../tools/dotnet-build.md) command:</span></span>

```dotnetcli
dotnet build
```

<span data-ttu-id="27a51-145">Si la génération réussit, vous avez créé les trois projets, des projets et des packages référencés de manière appropriée, et mis à jour le code source correctement.</span><span class="sxs-lookup"><span data-stu-id="27a51-145">If the build is successful, you've created the three projects, appropriately referenced projects and packages, and updated the source code correctly.</span></span> <span data-ttu-id="27a51-146">C’est terminé !</span><span class="sxs-lookup"><span data-stu-id="27a51-146">Well done!</span></span>

## <a name="tooling"></a><span data-ttu-id="27a51-147">Outillage</span><span class="sxs-lookup"><span data-stu-id="27a51-147">Tooling</span></span>

<span data-ttu-id="27a51-148">Il existe deux types d’outils de couverture du code :</span><span class="sxs-lookup"><span data-stu-id="27a51-148">There are two types of code coverage tools:</span></span>

- <span data-ttu-id="27a51-149">**DataCollectors :** DataCollectors surveiller l’exécution des tests et collecter des informations sur les séries de tests.</span><span class="sxs-lookup"><span data-stu-id="27a51-149">**DataCollectors:** DataCollectors monitor test execution and collect information about test runs.</span></span> <span data-ttu-id="27a51-150">Ils signalent les informations collectées dans divers formats de sortie, tels que XML et JSON.</span><span class="sxs-lookup"><span data-stu-id="27a51-150">They report the collected information in various output formats, such as XML and JSON.</span></span> <span data-ttu-id="27a51-151">Pour plus d’informations, consultez [votre premier DataCollector](https://github.com/Microsoft/vstest-docs/blob/master/docs/extensions/datacollector.md).</span><span class="sxs-lookup"><span data-stu-id="27a51-151">For more information, see [your first DataCollector](https://github.com/Microsoft/vstest-docs/blob/master/docs/extensions/datacollector.md).</span></span>
- <span data-ttu-id="27a51-152">**Générateurs de rapports :** Utilisez les données collectées à partir des séries de tests pour générer des rapports, souvent sous forme de styles HTML.</span><span class="sxs-lookup"><span data-stu-id="27a51-152">**Report generators:** Use data collected from test runs to generate reports, often as styled HTML.</span></span>

<span data-ttu-id="27a51-153">Dans cette section, nous allons nous concentrer sur les outils du collecteur de données.</span><span class="sxs-lookup"><span data-stu-id="27a51-153">In this section, the focus is on data collector tools.</span></span> <span data-ttu-id="27a51-154">Pour utiliser coverlet pour la couverture du code, un projet de test unitaire existant doit avoir les dépendances de package appropriées, ou s’appuyer sur les [Outils globaux .net](../tools/global-tools.md) et le package NuGet [coverlet. console](https://www.nuget.org/packages/coverlet.console) correspondant.</span><span class="sxs-lookup"><span data-stu-id="27a51-154">To use Coverlet for code coverage, an existing unit test project must have the appropriate package dependencies, or alternatively rely on [.NET global tooling](../tools/global-tools.md) and the corresponding [coverlet.console](https://www.nuget.org/packages/coverlet.console) NuGet package.</span></span>

## <a name="integrate-with-net-test"></a><span data-ttu-id="27a51-155">Intégrer avec le test .NET</span><span class="sxs-lookup"><span data-stu-id="27a51-155">Integrate with .NET test</span></span>

<span data-ttu-id="27a51-156">Le modèle de projet de test xUnit s’intègre déjà à [coverlet. Collector](https://www.nuget.org/packages/coverlet.collector) par défaut.</span><span class="sxs-lookup"><span data-stu-id="27a51-156">The xUnit test project template already integrates with [coverlet.collector](https://www.nuget.org/packages/coverlet.collector) by default.</span></span>
<span data-ttu-id="27a51-157">À partir de l’invite de commandes, remplacez les répertoires par le projet *xUnit. coverlet. Collector* , puis exécutez la [`dotnet test`](../tools/dotnet-test.md) commande :</span><span class="sxs-lookup"><span data-stu-id="27a51-157">From the command prompt, change directories to the *XUnit.Coverlet.Collector* project, and run the [`dotnet test`](../tools/dotnet-test.md) command:</span></span>

```dotnetcli
cd XUnit.Coverlet.Collector && dotnet test --collect:"XPlat Code Coverage"
```

> [!NOTE]
> <span data-ttu-id="27a51-158">L' `"XPlat Code Coverage"` argument est un nom convivial qui correspond aux collecteurs de données de coverlet.</span><span class="sxs-lookup"><span data-stu-id="27a51-158">The `"XPlat Code Coverage"` argument is a friendly name that corresponds to the data collectors from Coverlet.</span></span> <span data-ttu-id="27a51-159">Ce nom est obligatoire, mais ne respecte pas la casse.</span><span class="sxs-lookup"><span data-stu-id="27a51-159">This name is required but is case insensitive.</span></span>

<span data-ttu-id="27a51-160">Dans le cadre de l' `dotnet test` exécution, un fichier de *coverage.cobertura.xml* résultant est généré dans le répertoire *TestResults* .</span><span class="sxs-lookup"><span data-stu-id="27a51-160">As part of the `dotnet test` run, a resulting *coverage.cobertura.xml* file is output to the *TestResults* directory.</span></span> <span data-ttu-id="27a51-161">Le fichier XML contient les résultats.</span><span class="sxs-lookup"><span data-stu-id="27a51-161">The XML file contains the results.</span></span> <span data-ttu-id="27a51-162">Il s’agit d’une option multiplateforme qui s’appuie sur le CLI .NET Core et il est parfait pour les systèmes de génération où MSBuild n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="27a51-162">This is a cross platform option that relies on the .NET Core CLI, and it is great for build systems where MSBuild is not available.</span></span>

<span data-ttu-id="27a51-163">Voici l’exemple *coverage.cobertura.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="27a51-163">Below is the example *coverage.cobertura.xml* file.</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<coverage line-rate="1" branch-rate="1" version="1.9" timestamp="1592248008"
          lines-covered="12" lines-valid="12" branches-covered="6" branches-valid="6">
  <sources>
    <source>C:\</source>
  </sources>
  <packages>
    <package name="Numbers" line-rate="1" branch-rate="1" complexity="6">
      <classes>
        <class name="Numbers.PrimeService" line-rate="1" branch-rate="1" complexity="6"
               filename="Numbers\PrimeService.cs">
          <methods>
            <method name="IsPrime" signature="(System.Int32)" line-rate="1"
                    branch-rate="1" complexity="6">
              <lines>
                <line number="8" hits="11" branch="False" />
                <line number="9" hits="11" branch="True" condition-coverage="100% (2/2)">
                  <conditions>
                    <condition number="7" type="jump" coverage="100%" />
                  </conditions>
                </line>
                <line number="10" hits="3" branch="False" />
                <line number="11" hits="3" branch="False" />
                <line number="14" hits="22" branch="True" condition-coverage="100% (2/2)">
                  <conditions>
                    <condition number="57" type="jump" coverage="100%" />
                  </conditions>
                </line>
                <line number="15" hits="7" branch="False" />
                <line number="16" hits="7" branch="True" condition-coverage="100% (2/2)">
                  <conditions>
                    <condition number="27" type="jump" coverage="100%" />
                  </conditions>
                </line>
                <line number="17" hits="4" branch="False" />
                <line number="18" hits="4" branch="False" />
                <line number="20" hits="3" branch="False" />
                <line number="21" hits="4" branch="False" />
                <line number="23" hits="11" branch="False" />
              </lines>
            </method>
          </methods>
          <lines>
            <line number="8" hits="11" branch="False" />
            <line number="9" hits="11" branch="True" condition-coverage="100% (2/2)">
              <conditions>
                <condition number="7" type="jump" coverage="100%" />
              </conditions>
            </line>
            <line number="10" hits="3" branch="False" />
            <line number="11" hits="3" branch="False" />
            <line number="14" hits="22" branch="True" condition-coverage="100% (2/2)">
              <conditions>
                <condition number="57" type="jump" coverage="100%" />
              </conditions>
            </line>
            <line number="15" hits="7" branch="False" />
            <line number="16" hits="7" branch="True" condition-coverage="100% (2/2)">
              <conditions>
                <condition number="27" type="jump" coverage="100%" />
              </conditions>
            </line>
            <line number="17" hits="4" branch="False" />
            <line number="18" hits="4" branch="False" />
            <line number="20" hits="3" branch="False" />
            <line number="21" hits="4" branch="False" />
            <line number="23" hits="11" branch="False" />
          </lines>
        </class>
      </classes>
    </package>
  </packages>
</coverage>
```

> [!TIP]
> <span data-ttu-id="27a51-164">Vous pouvez également utiliser le package MSBuild si votre système de génération utilise déjà MSBuild.</span><span class="sxs-lookup"><span data-stu-id="27a51-164">As an alternative, you could use the MSBuild package if your build system already makes use of MSBuild.</span></span> <span data-ttu-id="27a51-165">À partir de l’invite de commandes, remplacez les répertoires par le projet *xUnit. coverlet. MSBuild* , puis exécutez la `dotnet test` commande :</span><span class="sxs-lookup"><span data-stu-id="27a51-165">From the command prompt, change directories to the *XUnit.Coverlet.MSBuild* project, and run the `dotnet test` command:</span></span>
>
> ```dotnetcli
> dotnet test --collect:"XPlat Code Coverage"
> ```
>
> <span data-ttu-id="27a51-166">Le fichier *coverage.cobertura.xml* résultant est output.</span><span class="sxs-lookup"><span data-stu-id="27a51-166">The resulting *coverage.cobertura.xml* file is output.</span></span>

## <a name="generate-reports"></a><span data-ttu-id="27a51-167">Génération de rapports</span><span class="sxs-lookup"><span data-stu-id="27a51-167">Generate reports</span></span>

<span data-ttu-id="27a51-168">Maintenant que vous êtes en mesure de collecter des données à partir des séries de tests unitaires, vous pouvez générer des rapports à l’aide de [ReportGenerator](https://github.com/danielpalme/ReportGenerator).</span><span class="sxs-lookup"><span data-stu-id="27a51-168">Now that you're able to collect data from unit test runs, you can generate reports using [ReportGenerator](https://github.com/danielpalme/ReportGenerator).</span></span> <span data-ttu-id="27a51-169">Pour installer le package NuGet [ReportGenerator](https://www.nuget.org/packages/dotnet-reportgenerator-globaltool) en tant qu' [outil Global .net](../tools/global-tools.md), utilisez la [`dotnet tool install`](../tools/dotnet-tool-install.md) commande suivante :</span><span class="sxs-lookup"><span data-stu-id="27a51-169">To install the [ReportGenerator](https://www.nuget.org/packages/dotnet-reportgenerator-globaltool) NuGet package as a [.NET global tool](../tools/global-tools.md), use the [`dotnet tool install`](../tools/dotnet-tool-install.md) command:</span></span>

```dotnetcli
dotnet tool install -g dotnet-reportgenerator-globaltool
```

<span data-ttu-id="27a51-170">Exécutez l’outil et fournissez les options souhaitées, en fonction du fichier de *coverage.cobertura.xml* de sortie de la série de tests précédente.</span><span class="sxs-lookup"><span data-stu-id="27a51-170">Run the tool and provide the desired options, given the output *coverage.cobertura.xml* file from the previous test run.</span></span>

```console
reportgenerator
"-reports:Path\To\TestProject\TestResults\{guid}\coverage.cobertura.xml"
"-targetdir:coveragereport"
-reporttypes:Html
```

<span data-ttu-id="27a51-171">Après l’exécution de cette commande, un fichier HTML représente le rapport généré.</span><span class="sxs-lookup"><span data-stu-id="27a51-171">After running this command, an HTML file represents the generated report.</span></span>

:::image type="content" source="media/test-report.png" lightbox="media/test-report.png" alt-text="Test unitaire-rapport généré":::

## <a name="see-also"></a><span data-ttu-id="27a51-173">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="27a51-173">See also</span></span>

- [<span data-ttu-id="27a51-174">Couverture des tests unitaires Visual Studio</span><span class="sxs-lookup"><span data-stu-id="27a51-174">Visual Studio unit test cover coverage</span></span>](/visualstudio/test/using-code-coverage-to-determine-how-much-code-is-being-tested)
- [<span data-ttu-id="27a51-175">Dépôt GitHub-coverlet</span><span class="sxs-lookup"><span data-stu-id="27a51-175">GitHub - Coverlet repository</span></span>](https://github.com/coverlet-coverage/coverlet)
- [<span data-ttu-id="27a51-176">Dépôt GitHub-ReportGenerator</span><span class="sxs-lookup"><span data-stu-id="27a51-176">GitHub - ReportGenerator repository</span></span>](https://github.com/danielpalme/ReportGenerator)
- [<span data-ttu-id="27a51-177">Site du projet ReportGenerator</span><span class="sxs-lookup"><span data-stu-id="27a51-177">ReportGenerator project site</span></span>](https://danielpalme.github.io/ReportGenerator)
- [<span data-ttu-id="27a51-178">Commande de test CLI .NET Core</span><span class="sxs-lookup"><span data-stu-id="27a51-178">.NET Core CLI test command</span></span>](../tools/dotnet-test.md)

## <a name="next-steps"></a><span data-ttu-id="27a51-179">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="27a51-179">Next Steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="27a51-180">Bonnes pratiques relatives aux tests unitaires</span><span class="sxs-lookup"><span data-stu-id="27a51-180">Unit testing best practices</span></span>](unit-testing-best-practices.md)
