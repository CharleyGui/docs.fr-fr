---
title: Migration de DNX vers l’interface CLI .NET Core
description: Migrez des outils DNX vers les outils de l’interface CLI .NET Core.
ms.date: 06/20/2016
ms.openlocfilehash: e5ebbab2551cf750a5b1136e7b1d4b67816c3b03
ms.sourcegitcommit: bf5c5850654187705bc94cc40ebfb62fe346ab02
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/23/2020
ms.locfileid: "91071116"
---
# <a name="migrating-from-dnx-to-net-core-cli-projectjson"></a><span data-ttu-id="be304-103">Migration de DNX vers l’interface CLI .NET Core (project.json)</span><span class="sxs-lookup"><span data-stu-id="be304-103">Migrating from DNX to .NET Core CLI (project.json)</span></span>

## <a name="overview"></a><span data-ttu-id="be304-104">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="be304-104">Overview</span></span>

<span data-ttu-id="be304-105">Avec la version RC1 de .NET Core et ASP.NET Core 1.0, nous avons introduit les outils DNX.</span><span class="sxs-lookup"><span data-stu-id="be304-105">The RC1 release of .NET Core and ASP.NET Core 1.0 introduced DNX tooling.</span></span> <span data-ttu-id="be304-106">Avec la version RC2 de .NET Core et ASP.NET Core 1.0, nous sommes passés de DNX à l’interface CLI .NET Core.</span><span class="sxs-lookup"><span data-stu-id="be304-106">The RC2 release of .NET Core and ASP.NET Core 1.0 moved from DNX to the .NET Core CLI.</span></span>

<span data-ttu-id="be304-107">Pour rappel, revenons sur ce qu’était DNX.</span><span class="sxs-lookup"><span data-stu-id="be304-107">As a slight refresher, let's recap what DNX was about.</span></span> <span data-ttu-id="be304-108">DNX était un runtime et un ensemble d’outils qui servait à générer des applications .NET Core et, plus précisément, des applications ASP.NET Core 1.0.</span><span class="sxs-lookup"><span data-stu-id="be304-108">DNX was a runtime and a toolset used to build .NET Core and, more specifically, ASP.NET Core 1.0 applications.</span></span> <span data-ttu-id="be304-109">Il était constitué de 3 composants principaux :</span><span class="sxs-lookup"><span data-stu-id="be304-109">It consisted of 3 main pieces:</span></span>

1. <span data-ttu-id="be304-110">DNVM : script d’installation pour obtenir DNX.</span><span class="sxs-lookup"><span data-stu-id="be304-110">DNVM - an install script for obtaining DNX</span></span>
2. <span data-ttu-id="be304-111">DNX (Dotnet Execution Runtime) : runtime chargé d’exécuter votre code.</span><span class="sxs-lookup"><span data-stu-id="be304-111">DNX (Dotnet Execution Runtime) - the runtime that executes your code</span></span>
3. <span data-ttu-id="be304-112">DNU (Dotnet Developer Utility) : outils permettant de gérer les dépendances, générer et publier les applications.</span><span class="sxs-lookup"><span data-stu-id="be304-112">DNU (Dotnet Developer Utility) - tooling for managing dependencies, building and publishing your applications</span></span>

<span data-ttu-id="be304-113">Avec l’introduction de l’interface CLI, tous les éléments ci-dessus sont désormais intégrés à un même ensemble d’outils.</span><span class="sxs-lookup"><span data-stu-id="be304-113">With the introduction of the CLI, all of the above are now part of a single toolset.</span></span> <span data-ttu-id="be304-114">Cependant, comme DNX était disponible du temps de RC1, vous vous en êtes peut-être servi pour créer des projets et souhaitez maintenant passer aux nouveaux outils CLI.</span><span class="sxs-lookup"><span data-stu-id="be304-114">However, since DNX was available in RC1 timeframe, you might have projects that were built using it that you would want to move off to the new CLI tooling.</span></span>

<span data-ttu-id="be304-115">Vous trouverez dans ce guide de migration les points essentiels à connaître pour migrer des projets de DNX vers l’interface CLI .NET Core.</span><span class="sxs-lookup"><span data-stu-id="be304-115">This migration guide will cover the essentials on how to migrate projects off of DNX and onto .NET Core CLI.</span></span> <span data-ttu-id="be304-116">Si vous voulez simplement créer un projet sur .NET Core de toutes pièces, vous pouvez sans problème ignorer ce document.</span><span class="sxs-lookup"><span data-stu-id="be304-116">If you are just starting a project on .NET Core from scratch, you can freely skip this document.</span></span>

## <a name="main-changes-in-the-tooling"></a><span data-ttu-id="be304-117">Principales évolutions des outils</span><span class="sxs-lookup"><span data-stu-id="be304-117">Main changes in the tooling</span></span>

<span data-ttu-id="be304-118">Les outils ont fait l’objet de modifications générales dont il convient tout d’abord d’exposer les grandes lignes.</span><span class="sxs-lookup"><span data-stu-id="be304-118">There are some general changes in the tooling that should be outlined first.</span></span>

### <a name="no-more-dnvm"></a><span data-ttu-id="be304-119">Disparition de DNVM</span><span class="sxs-lookup"><span data-stu-id="be304-119">No more DNVM</span></span>

<span data-ttu-id="be304-120">DNVM (*DotNet Version Manager*) était un script bash/PowerShell qui servait à installer un DNX sur un ordinateur.</span><span class="sxs-lookup"><span data-stu-id="be304-120">DNVM, short for *DotNet Version Manager* was a bash/PowerShell script used to install a DNX on your machine.</span></span> <span data-ttu-id="be304-121">Il permettait aux utilisateurs d’obtenir les DNX dont ils avaient à partir du flux qu’ils spécifiaient (ou ceux par défaut), mais aussi de marquer un certain DNX comme étant « actif », ce qui le plaçait sur le $PATH pour la session donnée.</span><span class="sxs-lookup"><span data-stu-id="be304-121">It helped users get the DNX they need from the feed they specified (or default ones) as well as mark a certain DNX "active", which would put it on the $PATH for the given session.</span></span> <span data-ttu-id="be304-122">Les différents outils pouvaient ainsi être utilisés.</span><span class="sxs-lookup"><span data-stu-id="be304-122">This would allow you to use the various tools.</span></span>

<span data-ttu-id="be304-123">DNVM a été supprimé, car son ensemble de fonctionnalités a été rendu redondant par les modifications apportées au CLI .NET Core.</span><span class="sxs-lookup"><span data-stu-id="be304-123">DNVM was discontinued because its feature set was made redundant by changes coming in the .NET Core CLI.</span></span>

<span data-ttu-id="be304-124">L’interface CLI est intégrée de deux manières :</span><span class="sxs-lookup"><span data-stu-id="be304-124">The CLI comes packaged in two main ways:</span></span>

1. <span data-ttu-id="be304-125">Programmes d’installation natifs pour une plateforme donnée</span><span class="sxs-lookup"><span data-stu-id="be304-125">Native installers for a given platform</span></span>
2. <span data-ttu-id="be304-126">Script d’installation pour les autres cas (comme les serveurs CI)</span><span class="sxs-lookup"><span data-stu-id="be304-126">Install script for other situations (like CI servers)</span></span>

<span data-ttu-id="be304-127">Compte tenu de cela, les fonctionnalités d’installation de DNVM ne sont pas nécessaires.</span><span class="sxs-lookup"><span data-stu-id="be304-127">Given this, the DNVM install features are not needed.</span></span> <span data-ttu-id="be304-128">Mais qu’en est-il des fonctionnalités de sélection de runtime ?</span><span class="sxs-lookup"><span data-stu-id="be304-128">But what about the runtime selection features?</span></span>

<span data-ttu-id="be304-129">Pour référencer un runtime dans votre fichier `project.json`, vous devez ajouter un package d’une certaine version à vos dépendances.</span><span class="sxs-lookup"><span data-stu-id="be304-129">You reference a runtime in your `project.json` by adding a package of a certain version to your dependencies.</span></span> <span data-ttu-id="be304-130">Cette modification permettra à votre application d’utiliser les nouveaux éléments de runtime.</span><span class="sxs-lookup"><span data-stu-id="be304-130">With this change, your application will be able to use the new runtime bits.</span></span> <span data-ttu-id="be304-131">Rien ne différencie l’installation de ces éléments sur votre ordinateur de celle de l’interface CLI : vous installez le runtime avec l’un des programmes d’installation natifs pris en charge ou à l’aide de son script d’installation.</span><span class="sxs-lookup"><span data-stu-id="be304-131">Getting these bits to your machine is the same as with the CLI: you install the runtime via one of the native installers it supports or via its install script.</span></span>

### <a name="different-commands"></a><span data-ttu-id="be304-132">Des commandes différentes</span><span class="sxs-lookup"><span data-stu-id="be304-132">Different commands</span></span>

<span data-ttu-id="be304-133">Si vous avez utilisé DNX, vous avez utilisé les commandes de l’un de ses trois composants (DNX, DNU ou DNVM).</span><span class="sxs-lookup"><span data-stu-id="be304-133">If you were using DNX, you used some commands from one of its three parts (DNX, DNU or DNVM).</span></span> <span data-ttu-id="be304-134">Avec l’interface CLI, certaines de ces commandes ont évolué, d’autres ne sont plus disponibles et d’autres sont identiques mais utilisent une sémantique légèrement différente.</span><span class="sxs-lookup"><span data-stu-id="be304-134">With the CLI, some of these commands change, some are not available and some are the same but have slightly different semantics.</span></span>

<span data-ttu-id="be304-135">Le tableau ci-dessous montre la correspondance entre les commandes DNX/DNU et leurs équivalents CLI.</span><span class="sxs-lookup"><span data-stu-id="be304-135">The table below shows the mapping between the DNX/DNU commands and their CLI counterparts.</span></span>

| <span data-ttu-id="be304-136">Commande DNX</span><span class="sxs-lookup"><span data-stu-id="be304-136">DNX command</span></span>                    | <span data-ttu-id="be304-137">Commande CLI</span><span class="sxs-lookup"><span data-stu-id="be304-137">CLI command</span></span>    | <span data-ttu-id="be304-138">Description</span><span class="sxs-lookup"><span data-stu-id="be304-138">Description</span></span>                                                                                                     |
|--------------------------------|----------------|-----------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="be304-139">dnx run</span><span class="sxs-lookup"><span data-stu-id="be304-139">dnx run</span></span>                        | `dotnet run`     | <span data-ttu-id="be304-140">Exécute du code à partir de la source.</span><span class="sxs-lookup"><span data-stu-id="be304-140">Run code from source.</span></span>                                                                                           |
| <span data-ttu-id="be304-141">dnu build</span><span class="sxs-lookup"><span data-stu-id="be304-141">dnu build</span></span>                      | `dotnet build`   | <span data-ttu-id="be304-142">Génère un fichier binaire IL de votre code.</span><span class="sxs-lookup"><span data-stu-id="be304-142">Build an IL binary of your code.</span></span>                                                                                |
| <span data-ttu-id="be304-143">dnu pack</span><span class="sxs-lookup"><span data-stu-id="be304-143">dnu pack</span></span>                       | `dotnet pack`    | <span data-ttu-id="be304-144">Empaquète votre code dans un package NuGet.</span><span class="sxs-lookup"><span data-stu-id="be304-144">Package up a NuGet package of your code.</span></span>                                                                        |
| <span data-ttu-id="be304-145">DNX \[commande] (par exemple, « dnx web »)</span><span class="sxs-lookup"><span data-stu-id="be304-145">dnx \[command] (for example, "dnx web")</span></span> | <span data-ttu-id="be304-146">N/A\*</span><span class="sxs-lookup"><span data-stu-id="be304-146">N/A\*</span></span>          | <span data-ttu-id="be304-147">Dans le contexte de DNX, exécute une commande telle que définie dans le fichier project.json.</span><span class="sxs-lookup"><span data-stu-id="be304-147">In DNX world, run a command as defined in the project.json.</span></span>                                                     |
| <span data-ttu-id="be304-148">dnu install</span><span class="sxs-lookup"><span data-stu-id="be304-148">dnu install</span></span>                    | <span data-ttu-id="be304-149">N/A\*</span><span class="sxs-lookup"><span data-stu-id="be304-149">N/A\*</span></span>          | <span data-ttu-id="be304-150">Dans le contexte de DNX, installe un package en tant que dépendance.</span><span class="sxs-lookup"><span data-stu-id="be304-150">In the DNX world, install a package as a dependency.</span></span>                                                            |
| <span data-ttu-id="be304-151">dnu restore</span><span class="sxs-lookup"><span data-stu-id="be304-151">dnu restore</span></span>                    | `dotnet restore` | <span data-ttu-id="be304-152">Restaure les dépendances spécifiées dans votre fichier project.json.</span><span class="sxs-lookup"><span data-stu-id="be304-152">Restore dependencies specified in your project.json.</span></span> <span data-ttu-id="be304-153">([Voir la remarque](#dotnet-restore-note))</span><span class="sxs-lookup"><span data-stu-id="be304-153">([see note](#dotnet-restore-note))</span></span>                                                            |
| <span data-ttu-id="be304-154">dnu publish</span><span class="sxs-lookup"><span data-stu-id="be304-154">dnu publish</span></span>                    | `dotnet publish` | <span data-ttu-id="be304-155">Publie votre application pour le déploiement dans l’une des trois formes possibles (portable, portable avec natif et autonome).</span><span class="sxs-lookup"><span data-stu-id="be304-155">Publish your application for deployment in one of the three forms (portable, portable with native and standalone).</span></span> |
| <span data-ttu-id="be304-156">dnu wrap</span><span class="sxs-lookup"><span data-stu-id="be304-156">dnu wrap</span></span>                       | <span data-ttu-id="be304-157">N/A\*</span><span class="sxs-lookup"><span data-stu-id="be304-157">N/A\*</span></span>          | <span data-ttu-id="be304-158">Dans le contexte de DNX, encapsule un fichier project.json dans un fichier csproj.</span><span class="sxs-lookup"><span data-stu-id="be304-158">In DNX world, wrap a project.json in csproj.</span></span>                                                                    |
| <span data-ttu-id="be304-159">dnu commands</span><span class="sxs-lookup"><span data-stu-id="be304-159">dnu commands</span></span>                   | <span data-ttu-id="be304-160">N/A\*</span><span class="sxs-lookup"><span data-stu-id="be304-160">N/A\*</span></span>          | <span data-ttu-id="be304-161">Dans le contexte de DNX, gère les commandes installées globalement.</span><span class="sxs-lookup"><span data-stu-id="be304-161">In DNX world, manage the globally installed commands.</span></span>                                                           |

<span data-ttu-id="be304-162">(\*) - ces fonctionnalités ne sont pas prises en charge dans l’interface CLI de par sa conception.</span><span class="sxs-lookup"><span data-stu-id="be304-162">(\*) - these features are not supported in the CLI by design.</span></span>

## <a name="dnx-features-that-are-not-supported"></a><span data-ttu-id="be304-163">Fonctionnalités DNX non prises en charge</span><span class="sxs-lookup"><span data-stu-id="be304-163">DNX features that are not supported</span></span>

<span data-ttu-id="be304-164">Comme le montre le tableau ci-dessus, certaines fonctionnalités de l’environnement de DNX ne sont pas prises en charge dans l’interface CLI, du moins pour l’instant.</span><span class="sxs-lookup"><span data-stu-id="be304-164">As the table above shows, there are features from the DNX world that we decided not to support in the CLI, at least for the time being.</span></span> <span data-ttu-id="be304-165">Dans cette section, nous allons nous intéresser aux fonctionnalités les plus importantes, nous expliquerons les raisons pour lesquelles nous avons décidé de renoncer à leur prise en charge, puis nous vous indiquerons des solutions de contournement au cas où vous en auriez besoin.</span><span class="sxs-lookup"><span data-stu-id="be304-165">This section will go through the most important ones and outline the rationale behind not supporting them as well as workarounds if you do need them.</span></span>

### <a name="global-commands"></a><span data-ttu-id="be304-166">Commandes globales</span><span class="sxs-lookup"><span data-stu-id="be304-166">Global commands</span></span>

<span data-ttu-id="be304-167">DNU reposait sur un concept appelé « commandes globales ».</span><span class="sxs-lookup"><span data-stu-id="be304-167">DNU came with a concept called "global commands".</span></span> <span data-ttu-id="be304-168">Il s’agissait pour l’essentiel d’applications console empaquetées sous forme de packages NuGet avec un script d’interpréteur de commandes qui appelait le DNX spécifié destiné à exécuter l’application.</span><span class="sxs-lookup"><span data-stu-id="be304-168">These were, essentially, console applications packaged up as NuGet packages with a shell script that would invoke the DNX you specified to run the application.</span></span>

<span data-ttu-id="be304-169">L’interface CLI ne prend pas en charge ce concept.</span><span class="sxs-lookup"><span data-stu-id="be304-169">The CLI does not support this concept.</span></span> <span data-ttu-id="be304-170">En revanche, il prend en charge l’ajout de commandes par projet qui peuvent être appelées à l’aide de la syntaxe `dotnet <command>` bien connue.</span><span class="sxs-lookup"><span data-stu-id="be304-170">It does, however, support the concept of adding per-project commands that can be invoked using the familiar `dotnet <command>` syntax.</span></span>

### <a name="installing-dependencies"></a><span data-ttu-id="be304-171">Installer les dépendances</span><span class="sxs-lookup"><span data-stu-id="be304-171">Installing dependencies</span></span>

<span data-ttu-id="be304-172">À partir de v1, le CLI .NET Core n’a pas `install` de commande pour l’installation des dépendances.</span><span class="sxs-lookup"><span data-stu-id="be304-172">As of v1, the .NET Core CLI doesn't have an `install` command for installing dependencies.</span></span> <span data-ttu-id="be304-173">Pour installer un package à partir de NuGet, vous devez l’ajouter en tant que dépendance à votre fichier `project.json`, puis exécuter `dotnet restore` ([voir la remarque](#dotnet-restore-note)).</span><span class="sxs-lookup"><span data-stu-id="be304-173">In order to install a package from NuGet, you would need to add it as a dependency to your `project.json` file and then run `dotnet restore` ([see note](#dotnet-restore-note)).</span></span>

### <a name="running-your-code"></a><span data-ttu-id="be304-174">Exécution de votre code</span><span class="sxs-lookup"><span data-stu-id="be304-174">Running your code</span></span>

<span data-ttu-id="be304-175">Il existe deux façons principales d’exécuter du code.</span><span class="sxs-lookup"><span data-stu-id="be304-175">There are two main ways to run your code.</span></span> <span data-ttu-id="be304-176">La première consiste à partir de la source, avec `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="be304-176">One is from source, with `dotnet run`.</span></span> <span data-ttu-id="be304-177">Contrairement à `dnx run`, aucune compilation en mémoire n’est effectuée.</span><span class="sxs-lookup"><span data-stu-id="be304-177">Unlike `dnx run`, this will not do any in-memory compilation.</span></span> <span data-ttu-id="be304-178">En fait, `dotnet build` est appelé pour générer le code, puis le fichier binaire généré est exécuté.</span><span class="sxs-lookup"><span data-stu-id="be304-178">It will actually invoke `dotnet build` to build your code and then run the built binary.</span></span>

<span data-ttu-id="be304-179">L’autre méthode consiste à utiliser `dotnet` proprement dit pour exécuter le code.</span><span class="sxs-lookup"><span data-stu-id="be304-179">Another way is using the `dotnet` itself to run your code.</span></span> <span data-ttu-id="be304-180">Pour cela, il convient d’indiquer le chemin de votre assembly : `dotnet path/to/an/assembly.dll`.</span><span class="sxs-lookup"><span data-stu-id="be304-180">This is done by providing a path to your assembly: `dotnet path/to/an/assembly.dll`.</span></span>

## <a name="migrating-your-dnx-project-to-net-core-cli"></a><span data-ttu-id="be304-181">Migration d’un projet DNX vers l’interface CLI .NET Core</span><span class="sxs-lookup"><span data-stu-id="be304-181">Migrating your DNX project to .NET Core CLI</span></span>

<span data-ttu-id="be304-182">Outre l’utilisation de nouvelles commandes pendant que vous travaillez sur votre code, vous allez devoir encore migrer trois éléments majeurs de DNX :</span><span class="sxs-lookup"><span data-stu-id="be304-182">In addition to using new commands when working with your code, there are three major things left in migrating from DNX:</span></span>

1. <span data-ttu-id="be304-183">Migrez le fichier `global.json`, le cas échéant, pour pouvoir utiliser l’interface CLI.</span><span class="sxs-lookup"><span data-stu-id="be304-183">Migrate the `global.json` file if you have it to be able to use CLI.</span></span>
2. <span data-ttu-id="be304-184">Migrez le fichier projet (`project.json`) proprement dit vers les outils de l’interface CLI.</span><span class="sxs-lookup"><span data-stu-id="be304-184">Migrating the project file (`project.json`) itself to the CLI tooling.</span></span>
3. <span data-ttu-id="be304-185">Migrez les API DNX vers leurs équivalents BCL.</span><span class="sxs-lookup"><span data-stu-id="be304-185">Migrating off of any DNX APIs to their BCL counterparts.</span></span>

### <a name="changing-the-globaljson-file"></a><span data-ttu-id="be304-186">Modification du fichier global.json</span><span class="sxs-lookup"><span data-stu-id="be304-186">Changing the global.json file</span></span>

<span data-ttu-id="be304-187">Le fichier `global.json` fait office de fichier de solution pour les projets RC1 et RC2 (ou ultérieurs).</span><span class="sxs-lookup"><span data-stu-id="be304-187">The `global.json` file acts like a solution file for both the RC1 and RC2 (or later) projects.</span></span> <span data-ttu-id="be304-188">Pour que le CLI .NET Core (ainsi que Visual Studio) de faire la différence entre la version RC1 et les versions ultérieures, il utilise la `"sdk": { "version" }` propriété pour faire la distinction entre le projet RC1 et les versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="be304-188">In order for the .NET Core CLI (as well as Visual Studio) to differentiate between RC1 and later versions, they use the `"sdk": { "version" }` property to make the distinction which project is RC1 or later.</span></span> <span data-ttu-id="be304-189">Si `global.json` ne contient pas ce nœud, il est supposé être de la dernière version.</span><span class="sxs-lookup"><span data-stu-id="be304-189">If `global.json` doesn't have this node at all, it is assumed to be the latest.</span></span>

<span data-ttu-id="be304-190">Pour mettre à jour le fichier `global.json`, supprimez la propriété ou définissez-la avec la version exacte des outils que vous voulez utiliser, en l’occurrence, **1.0.0-preview2-003121** :</span><span class="sxs-lookup"><span data-stu-id="be304-190">In order to update the `global.json` file, either remove the property or set it to the exact version of the tools that you wish to use, in this case **1.0.0-preview2-003121**:</span></span>

```json
{
    "sdk": {
        "version": "1.0.0-preview2-003121"
    }
}
```

### <a name="migrating-the-project-file"></a><span data-ttu-id="be304-191">Migration du fichier projet</span><span class="sxs-lookup"><span data-stu-id="be304-191">Migrating the project file</span></span>

<span data-ttu-id="be304-192">L’interface CLI et DNX utilisent le même système de projet basé sur le fichier `project.json`.</span><span class="sxs-lookup"><span data-stu-id="be304-192">The CLI and DNX both use the same basic project system based on `project.json` file.</span></span> <span data-ttu-id="be304-193">La syntaxe et la sémantique du fichier projet sont pratiquement identiques, avec de petites différences en fonction des scénarios.</span><span class="sxs-lookup"><span data-stu-id="be304-193">The syntax and the semantics of the project file are pretty much the same, with small differences based on the scenarios.</span></span> <span data-ttu-id="be304-194">Le schéma a également subi quelques modifications, ce que vous pouvez constater dans le [fichier de schéma](http://json.schemastore.org/project).</span><span class="sxs-lookup"><span data-stu-id="be304-194">There are also some changes to the schema which you can see in the [schema file](http://json.schemastore.org/project).</span></span>

<span data-ttu-id="be304-195">Si vous créez une application console, vous devez ajouter l’extrait de code suivant à votre fichier projet :</span><span class="sxs-lookup"><span data-stu-id="be304-195">If you are building a console application, you need to add the following snippet to your project file:</span></span>

```json
"buildOptions": {
    "emitEntryPoint": true
}
```

<span data-ttu-id="be304-196">Ce code indique à `dotnet build` d’émettre un point d’entrée pour votre application, ce qui rend effectivement le code exécutable.</span><span class="sxs-lookup"><span data-stu-id="be304-196">This instructs `dotnet build` to emit an entry point for your application, effectively making your code runnable.</span></span> <span data-ttu-id="be304-197">Si vous créez une bibliothèque de classes, omettez simplement la section ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="be304-197">If you are building a class library, simply omit the above section.</span></span> <span data-ttu-id="be304-198">Bien sûr, une fois que vous avez ajouté l’extrait de code ci-dessus à votre fichier `project.json`, vous devez ajouter un point d’entrée statique.</span><span class="sxs-lookup"><span data-stu-id="be304-198">Of course, once you add the above snippet to your `project.json` file, you need to add a static entry point.</span></span> <span data-ttu-id="be304-199">Suite à l’abandon de DNX, les services DI qu’il proposait ne sont plus disponibles et il convient donc d’utiliser un point d’entrée .NET de base : `static void Main()`.</span><span class="sxs-lookup"><span data-stu-id="be304-199">With the move off DNX, the DI services it provided are no longer available and thus this needs to be a basic .NET entry point: `static void Main()`.</span></span>

<span data-ttu-id="be304-200">Si votre `project.json` contient une section « commands », vous pouvez la supprimer.</span><span class="sxs-lookup"><span data-stu-id="be304-200">If you have a "commands" section in your `project.json`, you can remove it.</span></span> <span data-ttu-id="be304-201">Une partie des commandes qui existaient sous forme de commandes DNU, telles que les commandes de l’interface CLI Entity Framework, sont portées dans l’interface CLI pour devenir des extensions par projet.</span><span class="sxs-lookup"><span data-stu-id="be304-201">Some of the commands that used to exist as DNU commands, such as Entity Framework CLI commands, are being ported to be per-project extensions to the CLI.</span></span> <span data-ttu-id="be304-202">Si vous avez créé vos propres commandes et que vous les utilisez dans vos projets, vous devez les remplacer par des extensions CLI.</span><span class="sxs-lookup"><span data-stu-id="be304-202">If you built your own commands that you are using in your projects, you need to replace them with CLI extensions.</span></span> <span data-ttu-id="be304-203">Dans ce cas, le nœud `commands` dans `project.json` doit être remplacé par le nœud `tools` et il doit répertorier les dépendances d’outils.</span><span class="sxs-lookup"><span data-stu-id="be304-203">In this case, the `commands` node in `project.json` needs to be replaced by the `tools` node and it needs to list the tools dependencies.</span></span>

<span data-ttu-id="be304-204">Une fois ces opérations effectuées, vous devez choisir le type de portabilité que vous voulez pour votre application.</span><span class="sxs-lookup"><span data-stu-id="be304-204">After these things are done, you need to decide which type of portability you wish for you app.</span></span> <span data-ttu-id="be304-205">Avec .NET Core, nous nous sommes employés à mettre à votre disposition une gamme d’options de portabilité.</span><span class="sxs-lookup"><span data-stu-id="be304-205">With .NET Core, we have invested into providing a spectrum of portability options that you can choose from.</span></span> <span data-ttu-id="be304-206">Par exemple, vous pouvez faire de votre application une application entièrement *portable* ou une application *autonome*.</span><span class="sxs-lookup"><span data-stu-id="be304-206">For instance, you may want to have a fully *portable* application or you may want to have a *self-contained* application.</span></span> <span data-ttu-id="be304-207">L’option d’application portable se rapproche plus du mode de fonctionnement des applications .NET Framework : elle a besoin d’un composant partagé pour être exécutée sur l’ordinateur cible (.NET Core).</span><span class="sxs-lookup"><span data-stu-id="be304-207">The portable application option is more like .NET Framework applications work: it needs a shared component to execute it on the target machine (.NET Core).</span></span> <span data-ttu-id="be304-208">L’application autonome n’a pas besoin de .NET Core pour être installée sur la cible, mais vous devez produire une application pour chaque système d’exploitation que vous voulez prendre en charge.</span><span class="sxs-lookup"><span data-stu-id="be304-208">The self-contained application doesn't require .NET Core to be installed on the target, but you have to produce one application for each OS you wish to support.</span></span> <span data-ttu-id="be304-209">Ces différents types de portabilité et d’autres sont décrits dans le document sur les [types de portabilité d’application](../deploying/index.md).</span><span class="sxs-lookup"><span data-stu-id="be304-209">These portability types and more are discussed in the [application portability type](../deploying/index.md) document.</span></span>

<span data-ttu-id="be304-210">Dès lors que vous avez déterminé le type de portabilité que vous voulez utiliser, vous devez modifier le ou les frameworks ciblés.</span><span class="sxs-lookup"><span data-stu-id="be304-210">Once you make a call on what type of portability you want, you need to change your targeted framework(s).</span></span> <span data-ttu-id="be304-211">Si vous écriviez des applications pour .NET Core, il est très probable que vous utilisiez `dnxcore50` comme framework ciblé.</span><span class="sxs-lookup"><span data-stu-id="be304-211">If you were writing applications for .NET Core, you were most likely using `dnxcore50` as  your targeted framework.</span></span> <span data-ttu-id="be304-212">Avec l’interface CLI et compte tenu des changements apportés par la nouvelle bibliothèque [.NET Standard](../../standard/net-standard.md), vous devez opter pour l’un des frameworks suivants :</span><span class="sxs-lookup"><span data-stu-id="be304-212">With the CLI and the changes that the new [.NET Standard](../../standard/net-standard.md) brought, the framework needs to be one of the following:</span></span>

1. <span data-ttu-id="be304-213">`netcoreapp1.0` : si vous écrivez des applications sur .NET Core (y compris des applications ASP.NET Core)</span><span class="sxs-lookup"><span data-stu-id="be304-213">`netcoreapp1.0` - if you are writing applications on .NET Core (including ASP.NET Core applications)</span></span>
2. <span data-ttu-id="be304-214">`netstandard1.6` : si vous écrivez des bibliothèques de classes pour .NET Core</span><span class="sxs-lookup"><span data-stu-id="be304-214">`netstandard1.6` - if you are writing class libraries for .NET Core</span></span>

<span data-ttu-id="be304-215">Si vous utilisez d’autres cibles `dnx`, comme `dnx451`, vous devez aussi les modifier.</span><span class="sxs-lookup"><span data-stu-id="be304-215">If you are using other `dnx` targets, like `dnx451` you will need to change those as well.</span></span> <span data-ttu-id="be304-216">`dnx451` doit être remplacé par `net451`.</span><span class="sxs-lookup"><span data-stu-id="be304-216">`dnx451` should be changed to `net451`.</span></span>
<span data-ttu-id="be304-217">Pour plus d’informations, consultez la rubrique [.NET Standard](../../standard/net-standard.md).</span><span class="sxs-lookup"><span data-stu-id="be304-217">Please refer to the [.NET Standard](../../standard/net-standard.md) topic for more information.</span></span>

<span data-ttu-id="be304-218">Votre fichier `project.json` est maintenant pratiquement prêt.</span><span class="sxs-lookup"><span data-stu-id="be304-218">Your `project.json` is now mostly ready.</span></span> <span data-ttu-id="be304-219">Vous devez parcourir la liste de vos dépendances et les mettre à jour vers leurs versions plus récentes, surtout si vous utilisez des dépendances ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="be304-219">You need to go through your dependencies list and update the dependencies to their newer versions, especially if you are using ASP.NET Core dependencies.</span></span> <span data-ttu-id="be304-220">Si vous utilisez des packages distincts pour les API BCL, vous pouvez utiliser le package de runtime comme indiqué dans le document sur les [types de portabilité d’application](../deploying/index.md).</span><span class="sxs-lookup"><span data-stu-id="be304-220">If you were using separate packages for BCL APIs, you can use the runtime package as explained in the [application portability type](../deploying/index.md) document.</span></span>

<span data-ttu-id="be304-221">Dès que vous êtes prêt, vous pouvez tenter une restauration avec `dotnet restore` ([voir la remarque](#dotnet-restore-note)).</span><span class="sxs-lookup"><span data-stu-id="be304-221">Once you are ready, you can try restoring with `dotnet restore` ([see note](#dotnet-restore-note)).</span></span> <span data-ttu-id="be304-222">Selon la version de vos dépendances, vous pouvez rencontrer des erreurs si NuGet ne parvient pas à résoudre les dépendances pour l’un des frameworks ciblés ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="be304-222">Depending on the version of your dependencies, you may encounter errors if NuGet cannot resolve the dependencies for one of the targeted frameworks above.</span></span> <span data-ttu-id="be304-223">Il s’agit d’un problème ponctuel ; avec le temps, de plus en plus de packages incluront une prise en charge pour ces frameworks.</span><span class="sxs-lookup"><span data-stu-id="be304-223">This is a "point-in-time" problem; as time progresses, more and more packages will include support for these frameworks.</span></span> <span data-ttu-id="be304-224">Pour l’heure, si vous rencontrez ce problème, vous pouvez utiliser l’instruction `imports` dans le nœud `framework` pour indiquer à NuGet qu’il peut restaurer les packages ciblant le framework désigné dans l’instruction « imports ».</span><span class="sxs-lookup"><span data-stu-id="be304-224">For now, if you run into this, you can use the `imports` statement within the `framework` node to specify to NuGet that it can restore the packages targeting the framework within the "imports" statement.</span></span>
<span data-ttu-id="be304-225">Les erreurs de restauration que vous obtenez dans ce cas doivent fournir suffisamment d’informations pour identifier les frameworks que vous devez importer.</span><span class="sxs-lookup"><span data-stu-id="be304-225">The restoring errors you get in this case should provide enough information to tell you which frameworks you need to import.</span></span> <span data-ttu-id="be304-226">Si vous êtes un peu perdu ou que vous débutez, le fait de spécifier `dnxcore50` et `portable-net45+win8` dans l’instruction `imports` devrait normalement faire l’affaire.</span><span class="sxs-lookup"><span data-stu-id="be304-226">If you are slightly lost or new to this, in general, specifying `dnxcore50` and `portable-net45+win8` in the `imports` statement should do the trick.</span></span> <span data-ttu-id="be304-227">L’extrait de code JSON ci-dessous en constitue une bonne illustration :</span><span class="sxs-lookup"><span data-stu-id="be304-227">The JSON snippet below shows how this looks like:</span></span>

```json
    "frameworks": {
        "netcoreapp1.0": {
            "imports": ["dnxcore50", "portable-net45+win8"]
        }
    }
```

<span data-ttu-id="be304-228">L’exécution de `dotnet build` risque d’afficher des erreurs de build, même si leur nombre devrait rester limité.</span><span class="sxs-lookup"><span data-stu-id="be304-228">Running `dotnet build` will show any eventual build errors, though there shouldn't be too many of them.</span></span> <span data-ttu-id="be304-229">Dès lors que votre code se génère et s’exécute correctement, vous pouvez le tester avec le runner.</span><span class="sxs-lookup"><span data-stu-id="be304-229">After your code is building and running properly, you can test it out with the runner.</span></span> <span data-ttu-id="be304-230">Exécutez `dotnet <path-to-your-assembly>` et regardez-le s’exécuter.</span><span class="sxs-lookup"><span data-stu-id="be304-230">Execute `dotnet <path-to-your-assembly>` and see it run.</span></span>

<a name="dotnet-restore-note"></a>

[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]
