---
title: Collecter des informations détaillées sur le chargement de l’assembly-.NET Core
description: Description de la collecte des informations de chargement d’assembly dans .NET Core
author: elinor-fung
ms.author: elfung
ms.date: 11/17/2020
ms.openlocfilehash: b121982995b440ade6d72190f44f9b9d237c8af6
ms.sourcegitcommit: f2ab02d9a780819ca2e5310bbcf5cfe5b7993041
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/03/2021
ms.locfileid: "99506584"
---
# <a name="collect-detailed-assembly-loading-information"></a><span data-ttu-id="de2c0-103">Collecter des informations détaillées sur le chargement d’assembly</span><span class="sxs-lookup"><span data-stu-id="de2c0-103">Collect detailed assembly loading information</span></span>

<span data-ttu-id="de2c0-104">À compter de .NET 5,0, le runtime peut émettre `EventPipe` des événements avec des informations détaillées sur le [chargement d’assemblys managés](loading-managed.md) pour faciliter le diagnostic des problèmes de chargement d’assembly.</span><span class="sxs-lookup"><span data-stu-id="de2c0-104">Starting with .NET 5.0, the runtime can emit events through `EventPipe` with detailed information about [managed assembly loading](loading-managed.md) to aid in diagnosing assembly loading issues.</span></span> <span data-ttu-id="de2c0-105">Ces [événements](../../fundamentals/diagnostics/runtime-loader-binder-events.md) sont émis par le `Microsoft-Windows-DotNETRuntime` fournisseur sous le `AssemblyLoader` mot clé ( `0x4` ).</span><span class="sxs-lookup"><span data-stu-id="de2c0-105">These [events](../../fundamentals/diagnostics/runtime-loader-binder-events.md) are emitted by the `Microsoft-Windows-DotNETRuntime` provider under the `AssemblyLoader` keyword (`0x4`).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="de2c0-106">Prérequis</span><span class="sxs-lookup"><span data-stu-id="de2c0-106">Prerequisites</span></span>

- <span data-ttu-id="de2c0-107">[.Net 5,0 SDK](https://dotnet.microsoft.com/download) ou versions ultérieures</span><span class="sxs-lookup"><span data-stu-id="de2c0-107">[.NET 5.0 SDK](https://dotnet.microsoft.com/download) or later versions</span></span>
- <span data-ttu-id="de2c0-108">outil [dotnet-trace](../diagnostics/dotnet-trace.md) .</span><span class="sxs-lookup"><span data-stu-id="de2c0-108">[dotnet-trace](../diagnostics/dotnet-trace.md) tool.</span></span>

## <a name="collect-a-trace-with-assembly-loading-events"></a><span data-ttu-id="de2c0-109">Collecter une trace avec des événements de chargement d’assembly</span><span class="sxs-lookup"><span data-stu-id="de2c0-109">Collect a trace with assembly loading events</span></span>

<span data-ttu-id="de2c0-110">Pour activer les événements de chargement d’assembly dans le runtime et en collecter une trace, utilisez `dotnet-trace` avec la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="de2c0-110">To enable assembly loading events in the runtime and collect a trace of them, use `dotnet-trace` with the following command:</span></span>

```console
dotnet-trace collect --providers Microsoft-Windows-DotNETRuntime:4 --process-id <pid>
```

<span data-ttu-id="de2c0-111">Cela permet de collecter une trace du spécifié `<pid>` , en activant les `AssemblyLoader` événements dans le `Microsoft-Windows-DotNETRuntime` fournisseur.</span><span class="sxs-lookup"><span data-stu-id="de2c0-111">This will collect a trace of the specified `<pid>`, enabling the `AssemblyLoader` events in the `Microsoft-Windows-DotNETRuntime` provider.</span></span> <span data-ttu-id="de2c0-112">Le résultat est un `.nettrace` fichier.</span><span class="sxs-lookup"><span data-stu-id="de2c0-112">The result is a `.nettrace` file.</span></span>

## <a name="view-a-trace"></a><span data-ttu-id="de2c0-113">Afficher une trace</span><span class="sxs-lookup"><span data-stu-id="de2c0-113">View a trace</span></span>

<span data-ttu-id="de2c0-114">Le fichier de trace collecté peut être affiché sur Windows à l’aide de la vue événements dans [PerfView](https://github.com/microsoft/perfview).</span><span class="sxs-lookup"><span data-stu-id="de2c0-114">The collected trace file can be viewed on Windows using the Events view in [PerfView](https://github.com/microsoft/perfview).</span></span> <span data-ttu-id="de2c0-115">Tous les événements de chargement d’assembly seront précédés de `Microsoft-Windows-DotNETRuntime/AssemblyLoader` .</span><span class="sxs-lookup"><span data-stu-id="de2c0-115">All the assembly loading events will be prefixed with `Microsoft-Windows-DotNETRuntime/AssemblyLoader`.</span></span>

## <a name="example-on-windows"></a><span data-ttu-id="de2c0-116">Exemple (sur Windows)</span><span class="sxs-lookup"><span data-stu-id="de2c0-116">Example (on Windows)</span></span>

<span data-ttu-id="de2c0-117">Cet exemple utilise l' [exemple de points d’extension de chargement d’assembly](https://github.com/dotnet/samples/tree/master/core/extensions/AssemblyLoading).</span><span class="sxs-lookup"><span data-stu-id="de2c0-117">This example uses the [assembly loading extension points sample](https://github.com/dotnet/samples/tree/master/core/extensions/AssemblyLoading).</span></span> <span data-ttu-id="de2c0-118">L’application tente de charger un assembly `MyLibrary` : il s’agit d’un assembly qui n’est pas référencé par l’application et qui, par conséquent, doit être géré dans un point d’extension de chargement d’assembly pour être correctement chargé.</span><span class="sxs-lookup"><span data-stu-id="de2c0-118">The application attempts to load an assembly `MyLibrary` - an assembly that is not referenced by the application and thus requires handling in an assembly loading extension point to be successfully loaded.</span></span>

### <a name="collect-the-trace"></a><span data-ttu-id="de2c0-119">Collecter la trace</span><span class="sxs-lookup"><span data-stu-id="de2c0-119">Collect the trace</span></span>

01. <span data-ttu-id="de2c0-120">Accédez au répertoire à l’aide de l’exemple téléchargé.</span><span class="sxs-lookup"><span data-stu-id="de2c0-120">Navigate to the directory with the downloaded sample.</span></span> <span data-ttu-id="de2c0-121">Générez l’application avec :</span><span class="sxs-lookup"><span data-stu-id="de2c0-121">Build the application with:</span></span>

    ```console
    dotnet build
    ```

01. <span data-ttu-id="de2c0-122">Lancez l’application avec des arguments indiquant qu’elle doit s’interrompre, en attendant une pression sur une touche.</span><span class="sxs-lookup"><span data-stu-id="de2c0-122">Launch the application with arguments indicating that it should pause, waiting for a key press.</span></span> <span data-ttu-id="de2c0-123">Lors de la reprise, il tente de charger l’assembly dans la valeur par défaut, `AssemblyLoadContext` sans la gestion nécessaire pour un chargement réussi.</span><span class="sxs-lookup"><span data-stu-id="de2c0-123">On resuming, it will attempt to load the assembly in the default `AssemblyLoadContext` - without the handling necessary for a successful load.</span></span> <span data-ttu-id="de2c0-124">Accédez au répertoire de sortie et exécutez :</span><span class="sxs-lookup"><span data-stu-id="de2c0-124">Navigate to the output directory and run:</span></span>

    ```console
    AssemblyLoading.exe /d default
    ```

01. <span data-ttu-id="de2c0-125">Recherchez l’ID de processus de l’application.</span><span class="sxs-lookup"><span data-stu-id="de2c0-125">Find the application's process ID.</span></span>

    ```console
    dotnet-trace ps
    ```

    <span data-ttu-id="de2c0-126">La sortie répertorie les processus disponibles.</span><span class="sxs-lookup"><span data-stu-id="de2c0-126">The output will list the available processes.</span></span> <span data-ttu-id="de2c0-127">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="de2c0-127">For example:</span></span>

    ```console
    35832 AssemblyLoading C:\src\AssemblyLoading\bin\Debug\net5.0\AssemblyLoading.exe
    ```

01. <span data-ttu-id="de2c0-128">Attachement `dotnet-trace` à l’application en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="de2c0-128">Attach `dotnet-trace` to the running application.</span></span>

    ```console
    dotnet-trace collect --providers Microsoft-Windows-DotNETRuntime:4 --process-id 35832
    ```

01. <span data-ttu-id="de2c0-129">Dans la fenêtre qui exécute l’application, appuyez sur n’importe quelle touche pour permettre au programme de continuer.</span><span class="sxs-lookup"><span data-stu-id="de2c0-129">In the window running the application, press any key to let the program continue.</span></span> <span data-ttu-id="de2c0-130">Le suivi s’arrêtera automatiquement une fois l’application fermée.</span><span class="sxs-lookup"><span data-stu-id="de2c0-130">Tracing will automatically stop once the application exits.</span></span>

### <a name="view-the-trace"></a><span data-ttu-id="de2c0-131">Afficher la trace</span><span class="sxs-lookup"><span data-stu-id="de2c0-131">View the trace</span></span>

<span data-ttu-id="de2c0-132">Ouvrez la trace collectée dans [PerfView](https://github.com/microsoft/perfview) et ouvrez la vue événements.</span><span class="sxs-lookup"><span data-stu-id="de2c0-132">Open the collected trace in [PerfView](https://github.com/microsoft/perfview) and open the Events view.</span></span> <span data-ttu-id="de2c0-133">Filtrer la liste des événements sur `Microsoft-Windows-DotNETRuntime/AssemblyLoader` événements.</span><span class="sxs-lookup"><span data-stu-id="de2c0-133">Filter the events list to `Microsoft-Windows-DotNETRuntime/AssemblyLoader` events.</span></span>

:::image type="content" source="media/collect-details/assembly-loader-filter.png" alt-text="Image de filtre de chargeur d’assembly PerfView":::

<span data-ttu-id="de2c0-135">Tous les chargements d’assembly qui se sont produits dans l’application après le démarrage du suivi s’affichent.</span><span class="sxs-lookup"><span data-stu-id="de2c0-135">All assembly loads that occurred in the application after tracing started will be shown.</span></span> <span data-ttu-id="de2c0-136">Pour inspecter l’opération de chargement de l’assembly d’intérêt pour cet exemple `MyLibrary` , nous pouvons effectuer d’autres opérations de filtrage.</span><span class="sxs-lookup"><span data-stu-id="de2c0-136">To inspect the load operation for the assembly of interest for this example - `MyLibrary`, we can do some more filtering.</span></span>

### <a name="assembly-loads"></a><span data-ttu-id="de2c0-137">Chargements d’assemblys</span><span class="sxs-lookup"><span data-stu-id="de2c0-137">Assembly loads</span></span>

<span data-ttu-id="de2c0-138">Filtrez l’affichage avec [`Start`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadstart-event) les [`Stop`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadstop-event) événements et sous `Microsoft-Windows-DotNETRuntime/AssemblyLoader` à l’aide de la liste d’événements sur la gauche.</span><span class="sxs-lookup"><span data-stu-id="de2c0-138">Filter the view to the [`Start`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadstart-event) and [`Stop`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadstop-event) events under `Microsoft-Windows-DotNETRuntime/AssemblyLoader` using the event list on the left.</span></span> <span data-ttu-id="de2c0-139">Ajoutez les colonnes `AssemblyName` , `ActivityID` et `Success` à la vue.</span><span class="sxs-lookup"><span data-stu-id="de2c0-139">Add the columns `AssemblyName`, `ActivityID`, and `Success` to the view.</span></span> <span data-ttu-id="de2c0-140">Filtrez les événements contenant `MyLibrary` .</span><span class="sxs-lookup"><span data-stu-id="de2c0-140">Filter to events containing `MyLibrary`.</span></span>

:::image type="content" source="media/collect-details/start-stop.png" alt-text="Image des événements de démarrage et d’arrêt PerfView":::

| <span data-ttu-id="de2c0-142">Nom de l'événement</span><span class="sxs-lookup"><span data-stu-id="de2c0-142">Event Name</span></span>             | <span data-ttu-id="de2c0-143">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="de2c0-143">AssemblyName</span></span>                                      | <span data-ttu-id="de2c0-144">ActivityID</span><span class="sxs-lookup"><span data-stu-id="de2c0-144">ActivityID</span></span> | <span data-ttu-id="de2c0-145">Succès</span><span class="sxs-lookup"><span data-stu-id="de2c0-145">Success</span></span> |
| ---------------------- | ------------------------------------------------- | ---------- | ------- |
| `AssemblyLoader/Start` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="de2c0-146">1/2/</span><span class="sxs-lookup"><span data-stu-id="de2c0-146">//1/2/</span></span>     |         |
| `AssemblyLoader/Stop`  | `MyLibrary, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="de2c0-147">1/2/</span><span class="sxs-lookup"><span data-stu-id="de2c0-147">//1/2/</span></span>     | <span data-ttu-id="de2c0-148">False</span><span class="sxs-lookup"><span data-stu-id="de2c0-148">False</span></span>   |

<span data-ttu-id="de2c0-149">Vous devez voir une `Start` / `Stop` paire avec `Success=False` sur l' `Stop` événement, indiquant que l’opération de chargement a échoué.</span><span class="sxs-lookup"><span data-stu-id="de2c0-149">You should see one `Start`/`Stop` pair with `Success=False` on the `Stop` event, indicating the load operation failed.</span></span> <span data-ttu-id="de2c0-150">Notez que les deux événements ont le même ID d’activité.</span><span class="sxs-lookup"><span data-stu-id="de2c0-150">Note that the two events have the same activity ID.</span></span> <span data-ttu-id="de2c0-151">L’ID d’activité peut être utilisé pour filtrer tous les autres événements d’assembly Loader sur ceux correspondant à cette opération de chargement.</span><span class="sxs-lookup"><span data-stu-id="de2c0-151">The activity ID can be used to filter all the other assembly loader events to just the ones corresponding to this load operation.</span></span>

### <a name="breakdown-of-attempt-to-load"></a><span data-ttu-id="de2c0-152">Répartition de la tentative de chargement</span><span class="sxs-lookup"><span data-stu-id="de2c0-152">Breakdown of attempt to load</span></span>

<span data-ttu-id="de2c0-153">Pour une répartition plus détaillée de l’opération de chargement, filtrez la vue sur les [ `ResolutionAttempted` événements](../../fundamentals/diagnostics/runtime-loader-binder-events.md#resolutionattempted-event) sous `Microsoft-Windows-DotNETRuntime/AssemblyLoader` à l’aide de la liste des événements sur la gauche.</span><span class="sxs-lookup"><span data-stu-id="de2c0-153">For a more detailed breakdown of the load operation, filter the view to the [`ResolutionAttempted` events](../../fundamentals/diagnostics/runtime-loader-binder-events.md#resolutionattempted-event) under `Microsoft-Windows-DotNETRuntime/AssemblyLoader` using the event list on the left.</span></span> <span data-ttu-id="de2c0-154">Ajoutez les colonnes `AssemblyName` , `Stage` et `Result` à la vue.</span><span class="sxs-lookup"><span data-stu-id="de2c0-154">Add the columns `AssemblyName`, `Stage`, and `Result` to the view.</span></span> <span data-ttu-id="de2c0-155">Filtrez les événements avec l’ID d’activité de la `Start` / `Stop` paire.</span><span class="sxs-lookup"><span data-stu-id="de2c0-155">Filter to events with the activity ID from the `Start`/`Stop` pair.</span></span>

:::image type="content" source="media/collect-details/resolution-attempted.png" alt-text="Image des événements PerfView ResolutionAttempted":::

| <span data-ttu-id="de2c0-157">Nom de l'événement</span><span class="sxs-lookup"><span data-stu-id="de2c0-157">Event Name</span></span>                           | <span data-ttu-id="de2c0-158">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="de2c0-158">AssemblyName</span></span>                                      | <span data-ttu-id="de2c0-159">Étape</span><span class="sxs-lookup"><span data-stu-id="de2c0-159">Stage</span></span>                               | <span data-ttu-id="de2c0-160">Résultats</span><span class="sxs-lookup"><span data-stu-id="de2c0-160">Result</span></span>             |
| ------------------------------------ | ------------------------------------------------- | ----------------------------------- | ------------------ |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `FindInLoadContext`                 | `AssemblyNotFound` |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `ApplicationAssemblies`             | `AssemblyNotFound` |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `AssemblyLoadContextResolvingEvent` | `AssemblyNotFound` |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `AppDomainAssemblyResolveEvent`     | `AssemblyNotFound` |

<span data-ttu-id="de2c0-161">Les événements ci-dessus indiquent que le chargeur d’assembly a tenté de résoudre l’assembly en examinant le contexte de chargement actuel, en exécutant la logique de détection par défaut pour les assemblys d’application managée, en appelant des gestionnaires pour l' <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> événement et en appelant des gestionnaires pour le <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="de2c0-161">The events above indicate that the assembly loader attempted to resolve the assembly by looking in the current load context, running the default probing logic for managed application assemblies, invoking handlers for the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event, and invoking handlers for the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span></span> <span data-ttu-id="de2c0-162">Pour toutes ces étapes, l’assembly est introuvable.</span><span class="sxs-lookup"><span data-stu-id="de2c0-162">For all of these steps, the assembly was not found.</span></span>

### <a name="extension-points"></a><span data-ttu-id="de2c0-163">Points d’extension</span><span class="sxs-lookup"><span data-stu-id="de2c0-163">Extension points</span></span>

<span data-ttu-id="de2c0-164">Pour connaître les points d’extension qui ont été appelés, filtrez la vue sur [`AssemblyLoadContextResolvingHandlerInvoked`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadcontextresolvinghandlerinvoked-event) et [`AppDomainAssemblyResolveHandlerInvoked`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#appdomainassemblyresolvehandlerinvoked-event) sous `Microsoft-Windows-DotNETRuntime/AssemblyLoader` à l’aide de la liste des événements sur la gauche.</span><span class="sxs-lookup"><span data-stu-id="de2c0-164">To see which extension points were invoked, filter the view to the [`AssemblyLoadContextResolvingHandlerInvoked`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadcontextresolvinghandlerinvoked-event) and [`AppDomainAssemblyResolveHandlerInvoked`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#appdomainassemblyresolvehandlerinvoked-event) under `Microsoft-Windows-DotNETRuntime/AssemblyLoader` using the event list on the left.</span></span> <span data-ttu-id="de2c0-165">Ajoutez les colonnes `AssemblyName` et `HandlerName` à la vue.</span><span class="sxs-lookup"><span data-stu-id="de2c0-165">Add the columns `AssemblyName` and `HandlerName` to the view.</span></span> <span data-ttu-id="de2c0-166">Filtrez les événements avec l’ID d’activité de la `Start` / `Stop` paire.</span><span class="sxs-lookup"><span data-stu-id="de2c0-166">Filter to events with the activity ID from the `Start`/`Stop` pair.</span></span>

:::image type="content" source="media/collect-details/extension-point.png" alt-text="Image des événements du point d’extension PerfView":::

| <span data-ttu-id="de2c0-168">Nom de l'événement</span><span class="sxs-lookup"><span data-stu-id="de2c0-168">Event Name</span></span>                                                  | <span data-ttu-id="de2c0-169">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="de2c0-169">AssemblyName</span></span>                                      | <span data-ttu-id="de2c0-170">HandlerName</span><span class="sxs-lookup"><span data-stu-id="de2c0-170">HandlerName</span></span>                      |
| ----------------------------------------------------------- | ------------------------------------------------- | -------------------------------- |
| `AssemblyLoader/AssemblyLoadContextResolvingHandlerInvoked` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `OnAssemblyLoadContextResolving` |
| `AssemblyLoader/AppDomainAssemblyResolveHandlerInvoked`     | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `OnAppDomainAssemblyResolve`     |

<span data-ttu-id="de2c0-171">Les événements ci-dessus indiquent qu’un gestionnaire nommé `OnAssemblyLoadContextResolving` a été appelé pour l' <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> événement et qu’un gestionnaire nommé `OnAppDomainAssemblyResolve` était appelé pour l' <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> événement.</span><span class="sxs-lookup"><span data-stu-id="de2c0-171">The events above indicate that a handler named `OnAssemblyLoadContextResolving` was invoked for the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event and a handler named `OnAppDomainAssemblyResolve` was invoked for the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

### <a name="collect-another-trace"></a><span data-ttu-id="de2c0-172">Collecter une autre trace</span><span class="sxs-lookup"><span data-stu-id="de2c0-172">Collect another trace</span></span>

<span data-ttu-id="de2c0-173">Exécutez l’application avec des arguments de sorte que son gestionnaire de l' <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> événement charge l' `MyLibrary` assembly.</span><span class="sxs-lookup"><span data-stu-id="de2c0-173">Run the application with arguments such that its handler for the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event will load the `MyLibrary` assembly.</span></span>

```console
AssemblyLoading /d default alc-resolving
```

<span data-ttu-id="de2c0-174">Collectez et ouvrez un autre `.nettrace` fichier à l’aide [de la procédure décrite ci-dessus](#collect-the-trace).</span><span class="sxs-lookup"><span data-stu-id="de2c0-174">Collect and open another `.nettrace` file using the [steps from above](#collect-the-trace).</span></span>

<span data-ttu-id="de2c0-175">Filtrez les `Start` `Stop` événements et de `MyLibrary` nouveau.</span><span class="sxs-lookup"><span data-stu-id="de2c0-175">Filter to the `Start` and `Stop` events for `MyLibrary` again.</span></span> <span data-ttu-id="de2c0-176">Vous devez voir une `Start` / `Stop` paire avec une autre `Start` / `Stop` .</span><span class="sxs-lookup"><span data-stu-id="de2c0-176">You should see a `Start`/`Stop` pair with another `Start`/`Stop` between them.</span></span> <span data-ttu-id="de2c0-177">L’opération de chargement interne représente la charge déclenchée par le gestionnaire <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> lors de son appel <xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromAssemblyPath%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="de2c0-177">The inner load operation represents the load triggered by the handler for <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> when it called <xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromAssemblyPath%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="de2c0-178">Cette fois, vous devez voir `Success=True` sur l' `Stop` événement, indiquant que l’opération de chargement a réussi.</span><span class="sxs-lookup"><span data-stu-id="de2c0-178">This time, you should see `Success=True` on the `Stop` event, indicating the load operation succeeded.</span></span> <span data-ttu-id="de2c0-179">Le `ResultAssemblyPath` champ affiche le chemin d’accès de l’assembly résultant.</span><span class="sxs-lookup"><span data-stu-id="de2c0-179">The `ResultAssemblyPath` field shows the path of the resulting assembly.</span></span>

:::image type="content" source="media/collect-details/start-stop-success.png" alt-text="Image d’événements de démarrage et d’arrêt de PerfView réussie":::

| <span data-ttu-id="de2c0-181">Nom de l'événement</span><span class="sxs-lookup"><span data-stu-id="de2c0-181">Event Name</span></span>             | <span data-ttu-id="de2c0-182">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="de2c0-182">AssemblyName</span></span>                                                       | <span data-ttu-id="de2c0-183">ActivityID</span><span class="sxs-lookup"><span data-stu-id="de2c0-183">ActivityID</span></span> | <span data-ttu-id="de2c0-184">Succès</span><span class="sxs-lookup"><span data-stu-id="de2c0-184">Success</span></span> | <span data-ttu-id="de2c0-185">ResultAssemblyPath</span><span class="sxs-lookup"><span data-stu-id="de2c0-185">ResultAssemblyPath</span></span>                                      |
| ---------------------- | ------------------------------------------------------------------ |------------|---------| ------------------------------------------------------- |
| `AssemblyLoader/Start` |                  `MyLibrary, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="de2c0-186">1/2/</span><span class="sxs-lookup"><span data-stu-id="de2c0-186">//1/2/</span></span>     |         |                                                         |
| `AssemblyLoader/Start` | `MyLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="de2c0-187">1/2/1/</span><span class="sxs-lookup"><span data-stu-id="de2c0-187">//1/2/1/</span></span>   |         |                                                         |
| `AssemblyLoader/Stop`  | `MyLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="de2c0-188">1/2/1/</span><span class="sxs-lookup"><span data-stu-id="de2c0-188">//1/2/1/</span></span>   | <span data-ttu-id="de2c0-189">True</span><span class="sxs-lookup"><span data-stu-id="de2c0-189">True</span></span>    | <span data-ttu-id="de2c0-190">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span><span class="sxs-lookup"><span data-stu-id="de2c0-190">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span></span> |
| `AssemblyLoader/Stop`  |                  `MyLibrary, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="de2c0-191">1/2/</span><span class="sxs-lookup"><span data-stu-id="de2c0-191">//1/2/</span></span>     | <span data-ttu-id="de2c0-192">True</span><span class="sxs-lookup"><span data-stu-id="de2c0-192">True</span></span>    | <span data-ttu-id="de2c0-193">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span><span class="sxs-lookup"><span data-stu-id="de2c0-193">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span></span> |

<span data-ttu-id="de2c0-194">Nous pouvons ensuite examiner les `ResolutionAttempted` événements avec l’ID d’activité de la charge externe pour déterminer l’étape à laquelle l’assembly a été résolu avec succès.</span><span class="sxs-lookup"><span data-stu-id="de2c0-194">We can then look at the `ResolutionAttempted` events with the activity ID from the outer load to determine the step at which the assembly was successfully resolved.</span></span> <span data-ttu-id="de2c0-195">Cette fois-ci, les événements indiquent que l' `AssemblyLoadContextResolvingEvent` étape a réussi.</span><span class="sxs-lookup"><span data-stu-id="de2c0-195">This time, the events will show that the `AssemblyLoadContextResolvingEvent` stage was successful.</span></span> <span data-ttu-id="de2c0-196">Le `ResultAssemblyPath` champ affiche le chemin d’accès de l’assembly résultant.</span><span class="sxs-lookup"><span data-stu-id="de2c0-196">The `ResultAssemblyPath` field shows the path of the resulting assembly.</span></span>

:::image type="content" source="media/collect-details/resolution-attempted-success.png" alt-text="Image d’événements ResolutionAttempted réussie PerfView":::

| <span data-ttu-id="de2c0-198">Nom de l'événement</span><span class="sxs-lookup"><span data-stu-id="de2c0-198">Event Name</span></span>                           | <span data-ttu-id="de2c0-199">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="de2c0-199">AssemblyName</span></span>                                      | <span data-ttu-id="de2c0-200">Étape</span><span class="sxs-lookup"><span data-stu-id="de2c0-200">Stage</span></span>                               | <span data-ttu-id="de2c0-201">Résultats</span><span class="sxs-lookup"><span data-stu-id="de2c0-201">Result</span></span>             | <span data-ttu-id="de2c0-202">ResultAssemblyPath</span><span class="sxs-lookup"><span data-stu-id="de2c0-202">ResultAssemblyPath</span></span> |
| ------------------------------------ | ------------------------------------------------- | ----------------------------------- | ------------------ | ------------------ |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `FindInLoadContext`                 | `AssemblyNotFound` |                    |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `ApplicationAssemblies`             | `AssemblyNotFound` |                    |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `AssemblyLoadContextResolvingEvent` | `Success`          | <span data-ttu-id="de2c0-203">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span><span class="sxs-lookup"><span data-stu-id="de2c0-203">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span></span> |

<span data-ttu-id="de2c0-204">L’examen `AssemblyLoadContextResolvingHandlerInvoked` des événements indique que le gestionnaire nommé `OnAssemblyLoadContextResolving` a été appelé.</span><span class="sxs-lookup"><span data-stu-id="de2c0-204">Looking at `AssemblyLoadContextResolvingHandlerInvoked` events will show that the handler named `OnAssemblyLoadContextResolving` was invoked.</span></span> <span data-ttu-id="de2c0-205">Le `ResultAssemblyPath` champ affiche le chemin d’accès de l’assembly retourné par le gestionnaire.</span><span class="sxs-lookup"><span data-stu-id="de2c0-205">The `ResultAssemblyPath` field shows the path of the assembly returned by the handler.</span></span>

:::image type="content" source="media/collect-details/extension-point-success.png" alt-text="Image des événements du point d’extension PerfView réussie":::

| <span data-ttu-id="de2c0-207">Nom de l'événement</span><span class="sxs-lookup"><span data-stu-id="de2c0-207">Event Name</span></span>                                                  | <span data-ttu-id="de2c0-208">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="de2c0-208">AssemblyName</span></span>                                      | <span data-ttu-id="de2c0-209">HandlerName</span><span class="sxs-lookup"><span data-stu-id="de2c0-209">HandlerName</span></span>                      | <span data-ttu-id="de2c0-210">ResultAssemblyPath</span><span class="sxs-lookup"><span data-stu-id="de2c0-210">ResultAssemblyPath</span></span> |
| ----------------------------------------------------------- | ------------------------------------------------- | -------------------------------- | ------------------ |
| `AssemblyLoader/AssemblyLoadContextResolvingHandlerInvoked` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `OnAssemblyLoadContextResolving` | <span data-ttu-id="de2c0-211">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span><span class="sxs-lookup"><span data-stu-id="de2c0-211">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span></span> |

<span data-ttu-id="de2c0-212">Notez qu’il n’y a plus d' `ResolutionAttempted` événement avec l' `AppDomainAssemblyResolveEvent` étape ou les `AppDomainAssemblyResolveHandlerInvoked` événements, car l’assembly a été chargé avec succès avant d’atteindre l’étape de l’algorithme de chargement qui déclenche l' <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> événement.</span><span class="sxs-lookup"><span data-stu-id="de2c0-212">Note that there is no longer a `ResolutionAttempted` event with the `AppDomainAssemblyResolveEvent` stage or any `AppDomainAssemblyResolveHandlerInvoked` events, as the assembly was successfully loaded before reaching the step of the loading algorithm that raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

## <a name="see-also"></a><span data-ttu-id="de2c0-213">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="de2c0-213">See also</span></span>

- [<span data-ttu-id="de2c0-214">Événements du chargeur d’assembly</span><span class="sxs-lookup"><span data-stu-id="de2c0-214">Assembly loader events</span></span>](../../fundamentals/diagnostics/runtime-loader-binder-events.md)
- [<span data-ttu-id="de2c0-215">dotnet-trace</span><span class="sxs-lookup"><span data-stu-id="de2c0-215">dotnet-trace</span></span>](../diagnostics/dotnet-trace.md)
- [<span data-ttu-id="de2c0-216">PerfView</span><span class="sxs-lookup"><span data-stu-id="de2c0-216">PerfView</span></span>](https://github.com/microsoft/perfview)
