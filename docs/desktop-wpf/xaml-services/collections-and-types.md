---
title: Collections et types de collections pour XAML
ms.date: 03/30/2017
ms.assetid: 58f8e7c6-9a41-4f25-8551-c042f1315baa
ms.openlocfilehash: 2ec58026c605df31489c8aab4c4cc714dab11474
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/24/2020
ms.locfileid: "82071296"
---
# <a name="collections-and-collection-types-for-xaml"></a><span data-ttu-id="5e868-102">Collections et types de collecte pour XAML</span><span class="sxs-lookup"><span data-stu-id="5e868-102">Collections and collection types for XAML</span></span>

<span data-ttu-id="5e868-103">Cet article décrit comment définir les propriétés des types qui sont destinés à soutenir une collection, et à soutenir la syntaxe XAML pour instantanéiser les éléments de collecte comme des enfants élément d’un élément objet parent ou élément de propriété.</span><span class="sxs-lookup"><span data-stu-id="5e868-103">This article describes how to define properties of types that are intended to support a collection, and to support the XAML syntax for instantiating collection items as element children of a parent object element or property element.</span></span>

## <a name="xaml-collection-concepts"></a><span data-ttu-id="5e868-104">XAML Collection Concepts</span><span class="sxs-lookup"><span data-stu-id="5e868-104">XAML Collection Concepts</span></span>

<span data-ttu-id="5e868-105">Conceptuellement, toute relation dans XAML où il y a plusieurs articles d’enfant dans le cadre d’un élément d’objet XAML ou d’un élément de propriété XAML doit être mise en œuvre comme collection.</span><span class="sxs-lookup"><span data-stu-id="5e868-105">Conceptually, any relationship in XAML where there are multiple child items within the scope of a XAML object element or XAML property element must be implemented as a collection.</span></span> <span data-ttu-id="5e868-106">Cette collection doit être associée à une propriété XAML particulière du type XAML qui est le parent dans cette relation.</span><span class="sxs-lookup"><span data-stu-id="5e868-106">That collection must be associated with a particular XAML property of the XAML type that is the parent in that relationship.</span></span> <span data-ttu-id="5e868-107">La propriété doit être une collection parce qu’un processeur XAML s’attend à attribuer chaque article en majoration pour être un élément nouvellement ajouté de la propriété de collecte de soutien.</span><span class="sxs-lookup"><span data-stu-id="5e868-107">The property must be a collection because a XAML processor expects to assign each item in markup to be a newly added item of the backing collection property.</span></span>

<span data-ttu-id="5e868-108">Au niveau de la langue XAML, les exigences exactes du support de collecte ne sont pas entièrement définies.</span><span class="sxs-lookup"><span data-stu-id="5e868-108">At the XAML language level, the exact requirements of collection support are not fully defined.</span></span> <span data-ttu-id="5e868-109">Le concept selon lequel une collection peut être soit une liste, soit un dictionnaire (mais pas les deux) est défini au niveau de la langue XAML, mais que les types de support représentent des listes ou des dictionnaires n’est pas défini par la langue XAML.</span><span class="sxs-lookup"><span data-stu-id="5e868-109">The concept that a collection can be either a list or a dictionary(but not both) is defined at the XAML language level, but which backing types represent either lists or dictionaries is not defined by the XAML language.</span></span>

<span data-ttu-id="5e868-110">Dans .NET XAML Services, le concept de support de collecte XAML est plus clairement défini en termes de types de support .NET.</span><span class="sxs-lookup"><span data-stu-id="5e868-110">In .NET XAML Services, the concept of XAML collection support is more clearly defined in terms of .NET backing types.</span></span> <span data-ttu-id="5e868-111">Plus précisément, le support XAML pour les collections est basé sur plusieurs concepts .NET et API qui sont utilisés pour les listes et les dictionnaires en général .NET programmation.</span><span class="sxs-lookup"><span data-stu-id="5e868-111">Specifically, the XAML support for collections is based on several .NET concepts and APIs that are used for lists and dictionaries in general .NET programming.</span></span>

1. <span data-ttu-id="5e868-112">L’interface <xref:System.Collections.IList> indique une collection de liste.</span><span class="sxs-lookup"><span data-stu-id="5e868-112">The <xref:System.Collections.IList> interface indicates a list collection.</span></span>

2. <span data-ttu-id="5e868-113">L’interface <xref:System.Collections.IDictionary> indique une collection de dictionnaires.</span><span class="sxs-lookup"><span data-stu-id="5e868-113">The <xref:System.Collections.IDictionary> interface indicates a dictionary collection.</span></span>

3. <span data-ttu-id="5e868-114"><xref:System.Array>représente un tableau, et <xref:System.Collections.IList> un tableau prend en charge les méthodes.</span><span class="sxs-lookup"><span data-stu-id="5e868-114"><xref:System.Array> represents an array, and an array supports <xref:System.Collections.IList> methods.</span></span>

<span data-ttu-id="5e868-115">Dans chacun de ces concepts de collecte, un processeur .NET `Add` XAML Services XAML s’attend à appeler la méthode sur un cas spécifique du type de propriété de collecte.</span><span class="sxs-lookup"><span data-stu-id="5e868-115">In each of these collection concepts, a .NET XAML Services XAML processor expects to call the `Add` method on a specific instance of the collection property's type.</span></span> <span data-ttu-id="5e868-116">Ou, dans un scénario de sérialisation, un processeur XAML produit des instances discrètes de type XAML pour chaque élément trouvé dans la liste, le dictionnaire ou le tableau en fonction du concept spécifique de chaque collection d'" Articles ".</span><span class="sxs-lookup"><span data-stu-id="5e868-116">Or, in a serialization scenario, a XAML processor produces discrete XAML-type instances for each item found in the list, dictionary, or array based on each collection's specific concept of "Items".</span></span> <span data-ttu-id="5e868-117">Ces éléments <xref:System.Collections.IList.Item%2A?displayProperty=nameWithType>sont les: ; <xref:System.Collections.IDictionary.Item%2A?displayProperty=nameWithType>; <xref:System.Array.System%23Collections%23IList%23Item%2A?displayProperty=nameWithType> l’explicite <xref:System.Array>pour .</span><span class="sxs-lookup"><span data-stu-id="5e868-117">These items are: <xref:System.Collections.IList.Item%2A?displayProperty=nameWithType>; <xref:System.Collections.IDictionary.Item%2A?displayProperty=nameWithType>; the explicit <xref:System.Array.System%23Collections%23IList%23Item%2A?displayProperty=nameWithType> for <xref:System.Array>.</span></span>

## <a name="generic-collections"></a><span data-ttu-id="5e868-118">Collections génériques</span><span class="sxs-lookup"><span data-stu-id="5e868-118">Generic Collections</span></span>

<span data-ttu-id="5e868-119">Les collections génériques peuvent être utiles pour la programmation générale .NET, et peuvent également être utilisées pour les propriétés de collecte XAML.</span><span class="sxs-lookup"><span data-stu-id="5e868-119">Generic collections can be useful for general .NET programming, and can also be used for XAML collection properties.</span></span> <span data-ttu-id="5e868-120">Cependant, les interfaces <xref:System.Collections.Generic.IList%601> génériques et <xref:System.Collections.Generic.IDictionary%602> ne sont pas identifiés par les processeurs XAML .NET XAML Services comme étant équivalents à la non-générique <xref:System.Collections.IList> ou <xref:System.Collections.IDictionary>.</span><span class="sxs-lookup"><span data-stu-id="5e868-120">However, the generic interfaces <xref:System.Collections.Generic.IList%601> and <xref:System.Collections.Generic.IDictionary%602> are not identified by .NET XAML Services XAML processors as being equivalent to the non-generic <xref:System.Collections.IList> or <xref:System.Collections.IDictionary>.</span></span> <span data-ttu-id="5e868-121">Plutôt que de mettre en œuvre les interfaces, une <xref:System.Collections.Generic.List%601> approche <xref:System.Collections.Generic.Dictionary%602>recommandée pour les types de propriété de collecte générique est de dériver des classes ou .</span><span class="sxs-lookup"><span data-stu-id="5e868-121">Rather than implementing the interfaces, a recommended approach for generic collection property types is to derive from the classes <xref:System.Collections.Generic.List%601> or <xref:System.Collections.Generic.Dictionary%602>.</span></span> <span data-ttu-id="5e868-122">Ces classes implémentent les interfaces non génériques et incluent ainsi le support attendu pour les collections XAML dans la mise en œuvre de base.</span><span class="sxs-lookup"><span data-stu-id="5e868-122">These classes implement the non-generic interfaces and thus include the expected support for XAML collections in the base implementation.</span></span>

## <a name="read-only-collections-and-initialization-logic"></a><span data-ttu-id="5e868-123">Lire-Seulement Collections et Initialisation Logique</span><span class="sxs-lookup"><span data-stu-id="5e868-123">Read-Only Collections and Initialization Logic</span></span>

<span data-ttu-id="5e868-124">Dans la programmation .NET, il est un modèle de conception commun pour faire n’importe quelle propriété qui détient une valeur d’une collection comme une collection de lecture seulement.</span><span class="sxs-lookup"><span data-stu-id="5e868-124">In .NET programming, it is a common design pattern to make any property that holds a value of a collection as a read-only collection.</span></span> <span data-ttu-id="5e868-125">Ce modèle permet à l’instance qui possède la propriété de collecte de mieux contrôler ce qui arrive à la collection.</span><span class="sxs-lookup"><span data-stu-id="5e868-125">This pattern permits the instance that owns the collection property to better control what happens to the collection..</span></span> <span data-ttu-id="5e868-126">Plus précisément, le modèle empêche le remplacement accidentel de l’ensemble de la collection préexistante en fixant la propriété.</span><span class="sxs-lookup"><span data-stu-id="5e868-126">Specifically, the pattern prevents accidental replacement of the entire pre-existing collection by setting the property.</span></span> <span data-ttu-id="5e868-127">Dans ce modèle, tout accès à la collection par les appelants devrait plutôt être fait en appelant des <xref:System.Collections.IList>méthodes ou des propriétés telles que supportées par le type de collection et / ou les interfaces de collecte pertinentes telles que .</span><span class="sxs-lookup"><span data-stu-id="5e868-127">In this pattern, any access to the collection by callers should instead be made by calling methods or properties as supported by the collection type and/or the relevant collection interfaces such as <xref:System.Collections.IList>.</span></span>

<span data-ttu-id="5e868-128">L’utilisation de ce modèle implique que toute classe qui expose une propriété de collecte de lecture seulement doit d’abord initialiser cette propriété pour tenir une collection vide.</span><span class="sxs-lookup"><span data-stu-id="5e868-128">Using this pattern implies that any class that exposes a read-only collection property must first initialize that property to hold an empty collection.</span></span> <span data-ttu-id="5e868-129">Typiquement, l’initialisation est effectuée dans le cadre du comportement de construction pour la classe.</span><span class="sxs-lookup"><span data-stu-id="5e868-129">Typically the initialization is performed as part of the construction behavior for the class.</span></span> <span data-ttu-id="5e868-130">Pour être utile pour XAML, il est important que cette logique soit toujours référencée par le constructeur sans paramètres, parce que XAML appelle généralement le constructeur sans paramètres avant de traiter les propriétés (propriétés de collecte ou autrement).</span><span class="sxs-lookup"><span data-stu-id="5e868-130">To be useful for XAML, it is important that such logic is always referenced by the parameterless constructor, because XAML generally calls the parameterless constructor prior to processing the properties (collection properties or otherwise).</span></span>

## <a name="xaml-type-system-support-and-collections"></a><span data-ttu-id="5e868-131">Support et collections XAML Type System</span><span class="sxs-lookup"><span data-stu-id="5e868-131">XAML Type System Support and Collections</span></span>

<span data-ttu-id="5e868-132">Au-delà de la mécanique de base de l’analyse de XAML et le peuplement ou la sérialisation des propriétés de collection, le système de type XAML tel qu’il est mis en œuvre dans .NET XAML Services comprend plusieurs caractéristiques de conception qui se rapportent aux collections dans XAML.</span><span class="sxs-lookup"><span data-stu-id="5e868-132">Beyond the basic mechanics of parsing XAML and populating or serializing collection properties, the XAML type system as implemented in .NET XAML Services includes several design features that pertain to collections in XAML.</span></span>

1. <span data-ttu-id="5e868-133"><xref:System.Xaml.XamlType.IsCollection%2A>retourne vrai si le type XAML est soutenu par un type qui fournit le support de collecte XAML.</span><span class="sxs-lookup"><span data-stu-id="5e868-133"><xref:System.Xaml.XamlType.IsCollection%2A> returns true if the XAML type is backed by a type that provides XAML collection support.</span></span>

2. <span data-ttu-id="5e868-134"><xref:System.Xaml.XamlType.IsDictionary%2A>et <xref:System.Xaml.XamlType.IsArray%2A> peut identifier en outre le mode de collecte que prend en charge le type XAML.</span><span class="sxs-lookup"><span data-stu-id="5e868-134"><xref:System.Xaml.XamlType.IsDictionary%2A> and <xref:System.Xaml.XamlType.IsArray%2A> can further identify which collection mode the XAML type supports.</span></span> <span data-ttu-id="5e868-135">Pour les processeurs XAML personnalisés qui sont basés sur .NET XAML <xref:System.Xaml.XamlWriter> Services et le système de type XAML, mais pas basé sur les implémentations existantes, sachant quel mode de collecte est utilisé pourrait être nécessaire afin de savoir quelle méthode invoquer pour le traitement de collecte.</span><span class="sxs-lookup"><span data-stu-id="5e868-135">For custom XAML processors that are based on .NET XAML Services and the XAML type system but not based on existing <xref:System.Xaml.XamlWriter> implementations, knowing which collection mode is used might be necessary in order to know which method to invoke for collection processing.</span></span>

3. <span data-ttu-id="5e868-136">Chacune des valeurs de propriété précédentes <xref:System.Xaml.XamlType.LookupCollectionKind%2A> est potentiellement influencée par des remplacements de sur un type XAML.</span><span class="sxs-lookup"><span data-stu-id="5e868-136">Each of the previous property values is potentially influenced by overrides of <xref:System.Xaml.XamlType.LookupCollectionKind%2A> on a XAML type.</span></span>
