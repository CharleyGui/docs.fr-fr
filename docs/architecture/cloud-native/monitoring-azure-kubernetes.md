---
title: Supervision dans Azure Kubernetes Services
description: Supervision dans Azure Kubernetes Services
ms.date: 05/13/2020
ms.openlocfilehash: 138acf9d27fb4a676ec422c848097a6bea98fa42
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/19/2020
ms.locfileid: "83613822"
---
# <a name="monitoring-in-azure-kubernetes-services"></a><span data-ttu-id="d6255-103">Supervision dans Azure Kubernetes Services</span><span class="sxs-lookup"><span data-stu-id="d6255-103">Monitoring in Azure Kubernetes Services</span></span>

<span data-ttu-id="d6255-104">La journalisation intégrée dans Kubernetes est primitive.</span><span class="sxs-lookup"><span data-stu-id="d6255-104">The built-in logging in Kubernetes is primitive.</span></span> <span data-ttu-id="d6255-105">Toutefois, il existe des options intéressantes pour récupérer les journaux de Kubernetes et à un emplacement où ils peuvent être analysés correctement.</span><span class="sxs-lookup"><span data-stu-id="d6255-105">However, there are some great options for getting the logs out of Kubernetes and into a place where they can be properly analyzed.</span></span> <span data-ttu-id="d6255-106">Si vous devez surveiller vos clusters AKS, la configuration de la pile élastique pour Kubernetes est une solution intéressante.</span><span class="sxs-lookup"><span data-stu-id="d6255-106">If you need to monitor your AKS clusters, configuring Elastic Stack for Kubernetes is a great solution.</span></span>

## <a name="azure-monitor-for-containers"></a><span data-ttu-id="d6255-107">Azure Monitor pour conteneurs</span><span class="sxs-lookup"><span data-stu-id="d6255-107">Azure Monitor for Containers</span></span>

<span data-ttu-id="d6255-108">[Azure Monitor pour les conteneurs](https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-overview) prend en charge la consommation des journaux à partir de non seulement Kubernetes mais également d’autres moteurs d’orchestration tels que DC/OS, dockr essaim et Red Hat OpenShift.</span><span class="sxs-lookup"><span data-stu-id="d6255-108">[Azure Monitor for Containers](https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-overview) supports consuming logs from not just Kubernetes but also from other orchestration engines such as DC/OS, Docker Swarm, and Red Hat OpenShift.</span></span>

<span data-ttu-id="d6255-109">![Utilisation des journaux de divers conteneurs ](./media/containers-diagram.png)
 **figure 7-10**.</span><span class="sxs-lookup"><span data-stu-id="d6255-109">![Consuming logs from various containers](./media/containers-diagram.png)
**Figure 7-10**.</span></span> <span data-ttu-id="d6255-110">Utilisation des journaux de différents conteneurs</span><span class="sxs-lookup"><span data-stu-id="d6255-110">Consuming logs from various containers</span></span>

<span data-ttu-id="d6255-111">[Prometheus](https://prometheus.io/) est une solution de surveillance des métriques Open source populaire.</span><span class="sxs-lookup"><span data-stu-id="d6255-111">[Prometheus](https://prometheus.io/) is a popular open source metric monitoring solution.</span></span> <span data-ttu-id="d6255-112">Il fait partie de la Fondation de calcul native Cloud.</span><span class="sxs-lookup"><span data-stu-id="d6255-112">It is part of the Cloud Native Compute Foundation.</span></span> <span data-ttu-id="d6255-113">En règle générale, l’utilisation de Prometheus nécessite la gestion d’un serveur Prometheus avec son propre magasin.</span><span class="sxs-lookup"><span data-stu-id="d6255-113">Typically, using Prometheus requires managing a Prometheus server with its own store.</span></span> <span data-ttu-id="d6255-114">Toutefois, [Azure Monitor pour les conteneurs permet une intégration directe avec les points de terminaison de métriques Prometheus](https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-prometheus-integration), un serveur distinct n’est donc pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="d6255-114">However, [Azure Monitor for Containers provides direct integration with Prometheus metrics endpoints](https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-prometheus-integration), so a separate server is not required.</span></span>

<span data-ttu-id="d6255-115">Les informations de journal et de métrique sont collectées non seulement à partir des conteneurs qui s’exécutent dans le cluster, mais également des hôtes de cluster eux-mêmes.</span><span class="sxs-lookup"><span data-stu-id="d6255-115">Log and metric information is gathered not just from the containers running in the cluster but also from the cluster hosts themselves.</span></span> <span data-ttu-id="d6255-116">Il permet de mettre en corrélation les informations de journalisation des deux, ce qui facilite grandement le suivi d’une erreur.</span><span class="sxs-lookup"><span data-stu-id="d6255-116">It allows correlating log information from the two making it much easier to track down an error.</span></span>

<span data-ttu-id="d6255-117">L’installation des collecteurs de journaux diffère sur les clusters [Windows](https://docs.microsoft.com/azure/azure-monitor/insights/containers#configure-a-log-analytics-windows-agent-for-kubernetes) et [Linux](https://docs.microsoft.com/azure/azure-monitor/insights/containers#configure-a-log-analytics-linux-agent-for-kubernetes) .</span><span class="sxs-lookup"><span data-stu-id="d6255-117">Installing the log collectors differs on [Windows](https://docs.microsoft.com/azure/azure-monitor/insights/containers#configure-a-log-analytics-windows-agent-for-kubernetes) and [Linux](https://docs.microsoft.com/azure/azure-monitor/insights/containers#configure-a-log-analytics-linux-agent-for-kubernetes) clusters.</span></span> <span data-ttu-id="d6255-118">Toutefois, dans les deux cas, la collection de journaux est implémentée en tant que [DaemonSet](https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/)Kubernetes, ce qui signifie que log Collector est exécuté en tant que conteneur sur chacun des nœuds.</span><span class="sxs-lookup"><span data-stu-id="d6255-118">But in both cases the log collection is implemented as a Kubernetes [DaemonSet](https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/), meaning that the log collector is run as a container on each of the nodes.</span></span>

<span data-ttu-id="d6255-119">Quel que soit le système d’exploitation ou Orchestrator exécutant le démon Azure Monitor, les informations du journal sont transférées aux mêmes outils de Azure Monitor que ceux qui sont familiers aux utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="d6255-119">No matter which orchestrator or operating system is running the Azure Monitor daemon, the log information is forwarded to the same Azure Monitor tools with which users are familiar.</span></span> <span data-ttu-id="d6255-120">Cela garantit une expérience parallèle dans les environnements qui mélangent différentes sources de journaux, comme un environnement hybride Kubernetes/Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="d6255-120">This ensures a parallel experience in environments that mix different log sources such as a hybrid Kubernetes/Azure Functions environment.</span></span>

<span data-ttu-id="d6255-121">![Exemple de tableau de bord présentant les informations de journalisation et de métrique d’un certain nombre de conteneurs en cours d’exécution. ](./media/containers-dashboard.png)
 **Figure 7-11**.</span><span class="sxs-lookup"><span data-stu-id="d6255-121">![A sample dashboard showing logging and metric information from a number of running containers.](./media/containers-dashboard.png)
**Figure 7-11**.</span></span> <span data-ttu-id="d6255-122">Exemple de tableau de bord présentant les informations de journalisation et de métrique d’un certain nombre de conteneurs en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d6255-122">A sample dashboard showing logging and metric information from a number of running containers.</span></span>

## <a name="logfinalize"></a><span data-ttu-id="d6255-123">Log. Finalize ()</span><span class="sxs-lookup"><span data-stu-id="d6255-123">Log.Finalize()</span></span>

<span data-ttu-id="d6255-124">La journalisation est l’un des éléments les plus négligés et les plus importants du déploiement d’une application à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="d6255-124">Logging is one of the most overlooked and yet most important parts of deploying any application at scale.</span></span> <span data-ttu-id="d6255-125">À mesure que la taille et la complexité des applications augmentent, la difficulté de les déboguer est donc la plus difficile.</span><span class="sxs-lookup"><span data-stu-id="d6255-125">As the size and complexity of applications increase, then so does the difficulty of debugging them.</span></span> <span data-ttu-id="d6255-126">Le fait de disposer d’un grand nombre de journaux de qualité rend le débogage beaucoup plus facile et le déplace du domaine « presque impossible » vers « une expérience agréable ».</span><span class="sxs-lookup"><span data-stu-id="d6255-126">Having top quality logs available makes debugging much easier and moves it from the realm of "nearly impossible" to "a pleasant experience".</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="d6255-127">[Précédent](logging-with-elastic-stack.md) 
> [Suivant](azure-monitor.md)</span><span class="sxs-lookup"><span data-stu-id="d6255-127">[Previous](logging-with-elastic-stack.md)
[Next](azure-monitor.md)</span></span>
