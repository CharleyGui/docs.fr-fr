---
title: Exploitation des fonctions serverless
description: Tirer parti des Azure Functions sans serveur dans les applications natives du Cloud
ms.date: 05/13/2020
ms.openlocfilehash: 53a0fdd29630b2a4368f3aa37ddfc5f93df10a24
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/19/2020
ms.locfileid: "83613861"
---
# <a name="leveraging-serverless-functions"></a><span data-ttu-id="cab24-103">Exploitation des fonctions serverless</span><span class="sxs-lookup"><span data-stu-id="cab24-103">Leveraging serverless functions</span></span>

<span data-ttu-id="cab24-104">Dans le spectre de la gestion des machines physiques à l’exploitation des fonctionnalités du Cloud, les vies sans serveur se trouvent à l’extrême extrémité.</span><span class="sxs-lookup"><span data-stu-id="cab24-104">In the spectrum from managing physical machines to leveraging cloud capabilities, serverless lives at the extreme end.</span></span> <span data-ttu-id="cab24-105">Votre propre responsabilité est votre code et vous payez uniquement lorsque votre code s’exécute.</span><span class="sxs-lookup"><span data-stu-id="cab24-105">Your only responsibility is your code, and you only pay when your code runs.</span></span> <span data-ttu-id="cab24-106">Azure Functions offre un moyen de créer des fonctionnalités sans serveur dans vos applications Cloud natives.</span><span class="sxs-lookup"><span data-stu-id="cab24-106">Azure Functions provides a way to build serverless capabilities into your cloud-native applications.</span></span>

## <a name="what-is-serverless"></a><span data-ttu-id="cab24-107">Que sont les environnements sans serveur ?</span><span class="sxs-lookup"><span data-stu-id="cab24-107">What is serverless?</span></span>

<span data-ttu-id="cab24-108">Sans serveur est un modèle de service relativement nouveau de cloud computing.</span><span class="sxs-lookup"><span data-stu-id="cab24-108">Serverless is a relatively new service model of cloud computing.</span></span> <span data-ttu-id="cab24-109">Cela ne signifie pas que les serveurs sont facultatifs, votre code s’exécute toujours sur un serveur quelque part.</span><span class="sxs-lookup"><span data-stu-id="cab24-109">It doesn't mean that servers are optional - your code still runs on a server somewhere.</span></span> <span data-ttu-id="cab24-110">La distinction est que l’équipe de l’application ne se soucie plus de la gestion de l’infrastructure de serveur.</span><span class="sxs-lookup"><span data-stu-id="cab24-110">The distinction is that the application team no longer concerns itself with managing server infrastructure.</span></span> <span data-ttu-id="cab24-111">Au lieu de cela, il incombe au fournisseur du Cloud de s’en charger.</span><span class="sxs-lookup"><span data-stu-id="cab24-111">Instead, the cloud vendor own this responsibility.</span></span> <span data-ttu-id="cab24-112">L’équipe de développement augmente sa productivité en livrant des solutions d’entreprise aux clients, et non pas en plomb.</span><span class="sxs-lookup"><span data-stu-id="cab24-112">The development team increases its productivity by delivering business solutions to customers, not plumbing.</span></span>

<span data-ttu-id="cab24-113">L’informatique sans serveur utilise des conteneurs sans état déclenchés par des événements pour héberger vos services.</span><span class="sxs-lookup"><span data-stu-id="cab24-113">Serverless computing uses event-triggered stateless containers to host your services.</span></span> <span data-ttu-id="cab24-114">Ils peuvent être mis à l’échelle pour répondre à la demande en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="cab24-114">They can scale out and in to meet demand as-needed.</span></span> <span data-ttu-id="cab24-115">Les plateformes sans serveur telles que Azure Functions ont une intégration étroite avec d’autres services Azure tels que les files d’attente, les événements et le stockage.</span><span class="sxs-lookup"><span data-stu-id="cab24-115">Serverless platforms like Azure Functions have tight integration with other Azure services like queues, events, and storage.</span></span>

## <a name="what-challenges-are-solved-by-serverless"></a><span data-ttu-id="cab24-116">Quels sont les défis résolus sans serveur ?</span><span class="sxs-lookup"><span data-stu-id="cab24-116">What challenges are solved by serverless?</span></span>

<span data-ttu-id="cab24-117">Les plateformes sans serveur répondent à de nombreux problèmes fastidieux et coûteux :</span><span class="sxs-lookup"><span data-stu-id="cab24-117">Serverless platforms address many time-consuming and expensive concerns:</span></span>

- <span data-ttu-id="cab24-118">Achat de machines et de licences logicielles</span><span class="sxs-lookup"><span data-stu-id="cab24-118">Purchasing machines and software licenses</span></span>
- <span data-ttu-id="cab24-119">Hébergement, sécurisation, configuration et maintenance des machines et de leurs exigences en matière de mise en réseau, d’alimentation et de configuration A/C</span><span class="sxs-lookup"><span data-stu-id="cab24-119">Housing, securing, configuring, and maintaining the machines and their networking, power, and A/C requirements</span></span>
- <span data-ttu-id="cab24-120">Mise à jour corrective et mise à niveau des systèmes d’exploitation et des logiciels</span><span class="sxs-lookup"><span data-stu-id="cab24-120">Patching and upgrading operating systems and software</span></span>
- <span data-ttu-id="cab24-121">Configuration de serveurs Web ou de services d’ordinateur pour héberger des logiciels d’application</span><span class="sxs-lookup"><span data-stu-id="cab24-121">Configuring web servers or machine services to host application software</span></span>
- <span data-ttu-id="cab24-122">Configuration du logiciel d’application au sein de sa plateforme</span><span class="sxs-lookup"><span data-stu-id="cab24-122">Configuring application software within its platform</span></span>

<span data-ttu-id="cab24-123">De nombreuses entreprises allouent des budgets importants pour prendre en charge les problèmes d’infrastructure matérielle.</span><span class="sxs-lookup"><span data-stu-id="cab24-123">Many companies allocate large budgets to support hardware infrastructure concerns.</span></span> <span data-ttu-id="cab24-124">Le passage au Cloud peut contribuer à réduire ces coûts. le déplacement d’applications vers sans serveur peut aider à les éliminer.</span><span class="sxs-lookup"><span data-stu-id="cab24-124">Moving to the cloud can help reduce these costs; shifting applications to serverless can help eliminate them.</span></span>

## <a name="what-is-the-difference-between-a-microservice-and-a-serverless-function"></a><span data-ttu-id="cab24-125">Quelle est la différence entre un microservice et une fonction sans serveur ?</span><span class="sxs-lookup"><span data-stu-id="cab24-125">What is the difference between a microservice and a serverless function?</span></span>

<span data-ttu-id="cab24-126">En règle générale, un microservice encapsule une fonctionnalité métier, telle qu’un panier d’achat pour un site de commerce électronique en ligne.</span><span class="sxs-lookup"><span data-stu-id="cab24-126">Typically, a microservice encapsulates a business capability, such as a shopping cart for an online eCommerce site.</span></span> <span data-ttu-id="cab24-127">Il expose plusieurs opérations qui permettent à un utilisateur de gérer son expérience d’achat.</span><span class="sxs-lookup"><span data-stu-id="cab24-127">It exposes multiple operations that enable a user to manage their shopping experience.</span></span> <span data-ttu-id="cab24-128">Toutefois, une fonction est un petit bloc de code léger qui exécute une opération à fonction unique en réponse à un événement.</span><span class="sxs-lookup"><span data-stu-id="cab24-128">A function, however, is a small, lightweight block of code that executes a single-purpose operation in response to an event.</span></span>
<span data-ttu-id="cab24-129">Les microservices sont généralement construits pour répondre aux demandes, souvent à partir d’une interface.</span><span class="sxs-lookup"><span data-stu-id="cab24-129">Microservices are typically constructed to respond to requests, often from an interface.</span></span> <span data-ttu-id="cab24-130">Les requêtes peuvent être basées sur HTTP REST ou gRPC.</span><span class="sxs-lookup"><span data-stu-id="cab24-130">Requests can be HTTP Rest- or gRPC-based.</span></span> <span data-ttu-id="cab24-131">Les services sans serveur répondent aux événements.</span><span class="sxs-lookup"><span data-stu-id="cab24-131">Serverless services respond to events.</span></span> <span data-ttu-id="cab24-132">Son architecture pilotée par les événements est idéale pour le traitement des tâches en arrière-plan à exécution rapide.</span><span class="sxs-lookup"><span data-stu-id="cab24-132">Its event-driven architecture is ideal for processing short-running, background tasks.</span></span>

## <a name="what-scenarios-are-appropriate-for-serverless"></a><span data-ttu-id="cab24-133">Quels sont les scénarios appropriés pour les serveurs sans serveur ?</span><span class="sxs-lookup"><span data-stu-id="cab24-133">What scenarios are appropriate for serverless?</span></span>

<span data-ttu-id="cab24-134">Sans serveur expose des fonctions individuelles à exécution réduite qui sont appelées en réponse à un déclencheur.</span><span class="sxs-lookup"><span data-stu-id="cab24-134">Serverless exposes individual short-running functions that are invoked in response to a trigger.</span></span> <span data-ttu-id="cab24-135">Cela les rend idéaux pour le traitement des tâches en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="cab24-135">This makes them ideal for processing background tasks.</span></span>

<span data-ttu-id="cab24-136">Une application peut être amenée à envoyer un message électronique en tant qu’étape dans un flux de travail.</span><span class="sxs-lookup"><span data-stu-id="cab24-136">An application might need to send an email as a step in a workflow.</span></span> <span data-ttu-id="cab24-137">Au lieu d’envoyer la notification dans le cadre d’une demande de microservice, placez les détails du message dans une file d’attente.</span><span class="sxs-lookup"><span data-stu-id="cab24-137">Instead of sending the notification as part of a microservice request, place the message details onto a queue.</span></span> <span data-ttu-id="cab24-138">Une fonction Azure peut mettre le message en file d’attente et l’envoyer de façon asynchrone.</span><span class="sxs-lookup"><span data-stu-id="cab24-138">An Azure Function can dequeue the message and asynchronously send the email.</span></span> <span data-ttu-id="cab24-139">Cela pourrait améliorer les performances et l’extensibilité du microservice.</span><span class="sxs-lookup"><span data-stu-id="cab24-139">Doing so could improve the performance and scalability of the microservice.</span></span> <span data-ttu-id="cab24-140">Le nivellement de la [charge basé sur une file d’attente](https://docs.microsoft.com/azure/architecture/patterns/queue-based-load-leveling) peut être mis en œuvre pour éviter les goulots d’étranglement liés à l’envoi des e-mails.</span><span class="sxs-lookup"><span data-stu-id="cab24-140">[Queue-based load leveling](https://docs.microsoft.com/azure/architecture/patterns/queue-based-load-leveling) can be implemented to avoid bottlenecks related to sending the emails.</span></span> <span data-ttu-id="cab24-141">En outre, ce service autonome peut être réutilisé en tant qu’utilitaire dans de nombreuses applications différentes.</span><span class="sxs-lookup"><span data-stu-id="cab24-141">Additionally, this stand-alone service could be reused as a utility across many different applications.</span></span>

<span data-ttu-id="cab24-142">La messagerie asynchrone à partir des files d’attente et des rubriques est un modèle courant pour déclencher des fonctions sans serveur.</span><span class="sxs-lookup"><span data-stu-id="cab24-142">Asynchronous messaging from queues and topics is a common pattern to trigger serverless functions.</span></span> <span data-ttu-id="cab24-143">Toutefois, les Azure Functions peuvent être déclenchés par d’autres événements, tels que les modifications apportées au stockage d’objets BLOB Azure.</span><span class="sxs-lookup"><span data-stu-id="cab24-143">However, Azure Functions can be triggered by other events, such as changes to Azure Blob Storage.</span></span> <span data-ttu-id="cab24-144">Un service qui prend en charge les chargements d’image peut avoir une fonction Azure chargée de l’optimisation de la taille de l’image.</span><span class="sxs-lookup"><span data-stu-id="cab24-144">A service that supports image uploads could have an Azure Function responsible for optimizing the image size.</span></span> <span data-ttu-id="cab24-145">La fonction peut être déclenchée directement par les insertions dans le stockage d’objets BLOB Azure, ce qui complique les opérations de microservice.</span><span class="sxs-lookup"><span data-stu-id="cab24-145">The function could be triggered directly by inserts into Azure Blob Storage, keeping complexity out of the microservice operations.</span></span>

<span data-ttu-id="cab24-146">De nombreux services ont des processus de longue durée dans le cadre de leurs flux de travail.</span><span class="sxs-lookup"><span data-stu-id="cab24-146">Many services have long-running processes as part of their workflows.</span></span> <span data-ttu-id="cab24-147">Ces tâches sont souvent effectuées dans le cadre de l’interaction de l’utilisateur avec l’application.</span><span class="sxs-lookup"><span data-stu-id="cab24-147">Often these tasks are done as part of the user's interaction with the application.</span></span> <span data-ttu-id="cab24-148">Ces tâches peuvent forcer l’utilisateur à attendre, ce qui a un impact négatif sur son expérience.</span><span class="sxs-lookup"><span data-stu-id="cab24-148">These tasks can force the user to wait, negatively impacting their experience.</span></span> <span data-ttu-id="cab24-149">L’informatique sans serveur offre un excellent moyen de déplacer des tâches plus lentes en dehors de la boucle d’interaction avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="cab24-149">Serverless computing provides a great way to move slower tasks outside of the user interaction loop.</span></span> <span data-ttu-id="cab24-150">Ces tâches peuvent être mises à l’échelle avec la demande sans nécessiter une mise à l’échelle complète de l’application.</span><span class="sxs-lookup"><span data-stu-id="cab24-150">These tasks can scale with demand without requiring the entire application to scale.</span></span>

## <a name="when-should-you-avoid-serverless"></a><span data-ttu-id="cab24-151">Quand faut-il éviter les sans serveur ?</span><span class="sxs-lookup"><span data-stu-id="cab24-151">When should you avoid serverless?</span></span>

<span data-ttu-id="cab24-152">Des solutions sans serveur approvisionnent et évoluent à la demande.</span><span class="sxs-lookup"><span data-stu-id="cab24-152">Serverless solutions provision and scale on demand.</span></span> <span data-ttu-id="cab24-153">Quand une nouvelle instance est appelée, le démarrage à froid est un problème courant.</span><span class="sxs-lookup"><span data-stu-id="cab24-153">When a new instance is invoked, cold starts are a common issue.</span></span> <span data-ttu-id="cab24-154">Un démarrage à froid correspond à la durée nécessaire à la configuration de cette instance.</span><span class="sxs-lookup"><span data-stu-id="cab24-154">A cold start is the period of time it takes to provision this instance.</span></span> <span data-ttu-id="cab24-155">En règle générale, ce délai peut être de quelques secondes, mais peut être plus long en fonction de différents facteurs.</span><span class="sxs-lookup"><span data-stu-id="cab24-155">Normally, this delay might be a few seconds, but can be longer depending on various factors.</span></span> <span data-ttu-id="cab24-156">Une fois approvisionnée, une seule instance reste active tant qu’elle reçoit des demandes périodiques.</span><span class="sxs-lookup"><span data-stu-id="cab24-156">Once provisioned, a single instance is kept alive as long as it receives periodic requests.</span></span> <span data-ttu-id="cab24-157">Toutefois, si un service est appelé moins fréquemment, Azure peut le supprimer de la mémoire et nécessiter un démarrage à froid lorsqu’il est rappelé.</span><span class="sxs-lookup"><span data-stu-id="cab24-157">But, if a service is called less frequently, Azure may remove it from memory and require a cold start when reinvoked.</span></span> <span data-ttu-id="cab24-158">Les démarrages à froid sont également requis quand une fonction s’ajuste à une nouvelle instance.</span><span class="sxs-lookup"><span data-stu-id="cab24-158">Cold starts are also required when a function scales out to a new instance.</span></span>

<span data-ttu-id="cab24-159">La figure 3-10 montre un modèle de démarrage à froid.</span><span class="sxs-lookup"><span data-stu-id="cab24-159">Figure 3-10 shows a cold-start pattern.</span></span> <span data-ttu-id="cab24-160">Notez les étapes supplémentaires requises lorsque l’application est froide.</span><span class="sxs-lookup"><span data-stu-id="cab24-160">Note the extra steps required when the app is cold.</span></span>

<span data-ttu-id="cab24-161">![Le démarrage à froid et à chaud ](./media/cold-start-warm-start.png)
 **figure 3-10**.</span><span class="sxs-lookup"><span data-stu-id="cab24-161">![Cold versus warm start](./media/cold-start-warm-start.png)
**Figure 3-10**.</span></span> <span data-ttu-id="cab24-162">Démarrage à froid et démarrage à chaud.</span><span class="sxs-lookup"><span data-stu-id="cab24-162">Cold start versus warm start.</span></span>

<span data-ttu-id="cab24-163">Pour éviter tout démarrage à froid, vous pouvez passer d’un [plan de consommation à un plan dédié](https://azure.microsoft.com/blog/understanding-serverless-cold-start/).</span><span class="sxs-lookup"><span data-stu-id="cab24-163">To avoid cold starts entirely, you might switch from a [consumption plan to a dedicated plan](https://azure.microsoft.com/blog/understanding-serverless-cold-start/).</span></span> <span data-ttu-id="cab24-164">Vous pouvez également configurer une ou plusieurs [instances préchauffées](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances) avec la mise à niveau du plan Premium.</span><span class="sxs-lookup"><span data-stu-id="cab24-164">You can also configure one or more [pre-warmed instances](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances) with the premium plan upgrade.</span></span> <span data-ttu-id="cab24-165">Dans ce cas, lorsque vous devez ajouter une autre instance, celle-ci est déjà opérationnelle et prête à l’emploi.</span><span class="sxs-lookup"><span data-stu-id="cab24-165">In these cases, when you need to add another instance, it's already up and ready to go.</span></span> <span data-ttu-id="cab24-166">Ces options peuvent aider à atténuer le problème de démarrage à froid associé à l’informatique sans serveur.</span><span class="sxs-lookup"><span data-stu-id="cab24-166">These options can help mitigate the cold start issue associated with serverless computing.</span></span>

<span data-ttu-id="cab24-167">Les fournisseurs de Cloud facturent des factures sans serveur en fonction du temps d’exécution du calcul et de la mémoire consommée.</span><span class="sxs-lookup"><span data-stu-id="cab24-167">Cloud providers bill for serverless based on compute execution time and consumed memory.</span></span> <span data-ttu-id="cab24-168">Les opérations de longue durée ou de consommation de mémoire élevée ne sont pas toujours les meilleurs candidats pour l’exécution sans serveur.</span><span class="sxs-lookup"><span data-stu-id="cab24-168">Long running operations or high memory consumption workloads aren't always the best candidates for serverless.</span></span> <span data-ttu-id="cab24-169">Les fonctions sans serveur favorisent de petits segments de travail qui peuvent se terminer rapidement.</span><span class="sxs-lookup"><span data-stu-id="cab24-169">Serverless functions favor small chunks of work that can complete quickly.</span></span> <span data-ttu-id="cab24-170">La plupart des plates-formes sans serveur requièrent l’exécution de fonctions individuelles en quelques minutes.</span><span class="sxs-lookup"><span data-stu-id="cab24-170">Most serverless platforms require individual functions to complete within a few minutes.</span></span> <span data-ttu-id="cab24-171">Azure Functions est défini par défaut sur une durée de délai d’attente de 5 minutes, qui peut être configurée jusqu’à 10 minutes.</span><span class="sxs-lookup"><span data-stu-id="cab24-171">Azure Functions defaults to a 5-minute time-out duration, which can be configured up to 10 minutes.</span></span> <span data-ttu-id="cab24-172">Le plan Azure Functions Premium peut également atténuer ce problème, et les délais d’expiration par défaut sont de 30 minutes avec une limite supérieure illimitée pouvant être configurée.</span><span class="sxs-lookup"><span data-stu-id="cab24-172">The Azure Functions premium plan can mitigate this issue as well, defaulting time-outs to 30 minutes with an unbounded higher limit that can be configured.</span></span> <span data-ttu-id="cab24-173">L’heure de calcul n’est pas une heure de calendrier.</span><span class="sxs-lookup"><span data-stu-id="cab24-173">Compute time isn't calendar time.</span></span> <span data-ttu-id="cab24-174">Les fonctions plus avancées utilisant [Azure durable Functions Framework](https://docs.microsoft.com/azure/azure-functions/durable/durable-functions-overview?tabs=csharp) peuvent suspendre l’exécution pendant plusieurs jours.</span><span class="sxs-lookup"><span data-stu-id="cab24-174">More advanced functions using the [Azure Durable Functions framework](https://docs.microsoft.com/azure/azure-functions/durable/durable-functions-overview?tabs=csharp) may pause execution over a course of several days.</span></span> <span data-ttu-id="cab24-175">La facturation est basée sur la durée d’exécution réelle-lorsque la fonction sort de veille et reprend le traitement.</span><span class="sxs-lookup"><span data-stu-id="cab24-175">The billing is based on actual execution time - when the function wakes up and resumes processing.</span></span>

<span data-ttu-id="cab24-176">Enfin, tirer parti de Azure Functions pour les tâches d’application complique la tâche.</span><span class="sxs-lookup"><span data-stu-id="cab24-176">Finally, leveraging Azure Functions for application tasks adds complexity.</span></span> <span data-ttu-id="cab24-177">Il est judicieux de commencer par concevoir votre application avec une conception modulaire et faiblement couplée.</span><span class="sxs-lookup"><span data-stu-id="cab24-177">It's wise to first architect your application with a modular, loosely coupled design.</span></span> <span data-ttu-id="cab24-178">Ensuite, déterminez s’il existe des avantages sans serveur qui justifient la complexité supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="cab24-178">Then, identify if there are benefits serverless would offer that justify the additional complexity.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="cab24-179">[Précédent](leverage-containers-orchestrators.md) 
> [Suivant](combine-containers-serverless-approaches.md)</span><span class="sxs-lookup"><span data-stu-id="cab24-179">[Previous](leverage-containers-orchestrators.md)
[Next](combine-containers-serverless-approaches.md)</span></span>
