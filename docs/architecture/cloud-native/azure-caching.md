---
title: Mise en cache dans une application Cloud Native
description: En savoir plus sur les stratégies de mise en cache dans une application Cloud native.
author: robvet
ms.date: 01/22/2020
ms.openlocfilehash: 2da61a01fc53233d1934df813fcba3b91a495c43
ms.sourcegitcommit: 13e79efdbd589cad6b1de634f5d6b1262b12ab01
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/28/2020
ms.locfileid: "76794967"
---
# <a name="caching-in-a-cloud-native-app"></a><span data-ttu-id="be44c-103">Mise en cache dans une application Cloud Native</span><span class="sxs-lookup"><span data-stu-id="be44c-103">Caching in a cloud-native app</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="be44c-104">Les avantages de la mise en cache sont bien compris.</span><span class="sxs-lookup"><span data-stu-id="be44c-104">The benefits of caching are well understood.</span></span> <span data-ttu-id="be44c-105">La technique consiste à copier temporairement les données fréquemment sollicitées à partir d’un magasin de données principal vers un *stockage rapide* situé plus près de l’application.</span><span class="sxs-lookup"><span data-stu-id="be44c-105">The technique works by temporarily copying frequently accessed data from a backend data store to *fast storage* that's located closer to the application.</span></span> <span data-ttu-id="be44c-106">La mise en cache est souvent implémentée où...</span><span class="sxs-lookup"><span data-stu-id="be44c-106">Caching is often implemented where...</span></span>

- <span data-ttu-id="be44c-107">Les données restent relativement statiques.</span><span class="sxs-lookup"><span data-stu-id="be44c-107">Data remains relatively static.</span></span>
- <span data-ttu-id="be44c-108">L’accès aux données est lent, en particulier par rapport à la vitesse du cache.</span><span class="sxs-lookup"><span data-stu-id="be44c-108">Data access is slow, especially compared to the speed of the cache.</span></span>
- <span data-ttu-id="be44c-109">Les données sont soumises à des niveaux élevés de contention.</span><span class="sxs-lookup"><span data-stu-id="be44c-109">Data is subject to high levels of contention.</span></span>

## <a name="why"></a><span data-ttu-id="be44c-110">Pourquoi ?</span><span class="sxs-lookup"><span data-stu-id="be44c-110">Why?</span></span>

<span data-ttu-id="be44c-111">Comme indiqué dans le [Guide de mise en cache de Microsoft](https://docs.microsoft.com/azure/architecture/best-practices/caching), la mise en cache peut améliorer les performances, l’extensibilité et la disponibilité des microservices individuels et du système dans son ensemble.</span><span class="sxs-lookup"><span data-stu-id="be44c-111">As discussed in the [Microsoft caching guidance](https://docs.microsoft.com/azure/architecture/best-practices/caching), caching can increase performance, scalability, and availability for individual microservices and the system as a whole.</span></span> <span data-ttu-id="be44c-112">Elle réduit la latence et la contention de la gestion de grands volumes de demandes simultanées à un magasin de données.</span><span class="sxs-lookup"><span data-stu-id="be44c-112">It reduces the latency and contention of handling large volumes of concurrent requests to a data store.</span></span> <span data-ttu-id="be44c-113">À mesure que le volume de données et le nombre d’utilisateurs augmentent, plus les avantages de la mise en cache sont importants.</span><span class="sxs-lookup"><span data-stu-id="be44c-113">As data volume and the number of users increase, the greater the benefits of caching become.</span></span>

<span data-ttu-id="be44c-114">La mise en cache est plus efficace quand un client lit à plusieurs reprises des données immuables ou rarement modifiées.</span><span class="sxs-lookup"><span data-stu-id="be44c-114">Caching is most effective when a client repeatedly reads data that is immutable or that changes infrequently.</span></span> <span data-ttu-id="be44c-115">Il peut s’agir d’informations de référence, telles que des informations sur les produits et les tarifs, ou de ressources statiques partagées qui sont coûteuses à construire.</span><span class="sxs-lookup"><span data-stu-id="be44c-115">Examples include reference information such as product and pricing information, or shared static resources that are costly to construct.</span></span>

<span data-ttu-id="be44c-116">Si les microservices doivent être sans État, un cache distribué peut prendre en charge l’accès simultané aux données d’état de session quand cela est absolument requis.</span><span class="sxs-lookup"><span data-stu-id="be44c-116">While microservices should be stateless, a distributed cache can support concurrent access to session state data when absolutely required.</span></span>

<span data-ttu-id="be44c-117">Envisagez également la mise en cache pour éviter les calculs répétitifs.</span><span class="sxs-lookup"><span data-stu-id="be44c-117">Also consider caching to avoid repetitive computations.</span></span> <span data-ttu-id="be44c-118">Si une opération transforme des données ou effectue un calcul complexe, met en cache le résultat pour les demandes suivantes.</span><span class="sxs-lookup"><span data-stu-id="be44c-118">If an operation transforms data or performs a complicated calculation, cache the result for subsequent requests.</span></span>

## <a name="caching-architecture"></a><span data-ttu-id="be44c-119">Architecture de mise en cache</span><span class="sxs-lookup"><span data-stu-id="be44c-119">Caching architecture</span></span>

<span data-ttu-id="be44c-120">Les applications Cloud natives implémentent généralement une architecture de mise en cache distribuée.</span><span class="sxs-lookup"><span data-stu-id="be44c-120">Cloud native applications typically implement a distributed caching architecture.</span></span> <span data-ttu-id="be44c-121">Le cache est hébergé en tant que service de [sauvegarde](./definition.md#backing-services)Cloud, distinct des microservices.</span><span class="sxs-lookup"><span data-stu-id="be44c-121">The cache is hosted as a cloud-based [backing service](./definition.md#backing-services), separate from the microservices.</span></span> <span data-ttu-id="be44c-122">La figure 5-20 illustre l’architecture.</span><span class="sxs-lookup"><span data-stu-id="be44c-122">Figure 5-20 shows the architecture.</span></span>

![Mise en cache dans une application Cloud Native](media/caching-in-a-cloud-native-app.png)

<span data-ttu-id="be44c-124">**Figure 5-19**: mise en cache dans une application Cloud Native</span><span class="sxs-lookup"><span data-stu-id="be44c-124">**Figure 5-19**: Caching in a cloud native app</span></span>

<span data-ttu-id="be44c-125">Dans l’illustration précédente, Notez que le cache est indépendant et partagé par les microservices.</span><span class="sxs-lookup"><span data-stu-id="be44c-125">In the previous figure, note how the cache is independent of and shared by the microservices.</span></span> <span data-ttu-id="be44c-126">Dans ce scénario, le cache est appelé par la [passerelle d’API](./front-end-communication.md).</span><span class="sxs-lookup"><span data-stu-id="be44c-126">In this scenario, the cache is invoked by the [API Gateway](./front-end-communication.md).</span></span> <span data-ttu-id="be44c-127">Comme indiqué dans le chapitre 4, la passerelle sert de serveur frontal pour toutes les demandes entrantes.</span><span class="sxs-lookup"><span data-stu-id="be44c-127">As discussed in chapter 4, the gateway serves as a front end for all incoming requests.</span></span> <span data-ttu-id="be44c-128">Le cache distribué augmente la réactivité du système en retournant les données mises en cache dans la mesure du possible.</span><span class="sxs-lookup"><span data-stu-id="be44c-128">The distributed cache increases system responsiveness by returning cached data whenever possible.</span></span> <span data-ttu-id="be44c-129">En outre, la séparation du cache des services permet au cache d’être mis à l’échelle indépendamment pour répondre aux demandes de trafic accrues.</span><span class="sxs-lookup"><span data-stu-id="be44c-129">Additionally, separating the cache from the services allows the cache to scale up or out independently to meet increased traffic demands.</span></span>

<span data-ttu-id="be44c-130">La figure présente un modèle de mise en cache courant connu sous le nom de [modèle de cache](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span><span class="sxs-lookup"><span data-stu-id="be44c-130">The figure presents a common caching pattern known as the [cache-aside pattern](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span></span> <span data-ttu-id="be44c-131">Pour une demande entrante, vous devez d’abord interroger le cache (étape \#1) pour obtenir une réponse.</span><span class="sxs-lookup"><span data-stu-id="be44c-131">For an incoming request, you first query the cache (step \#1) for a response.</span></span> <span data-ttu-id="be44c-132">Si elle est trouvée, les données sont retournées immédiatement.</span><span class="sxs-lookup"><span data-stu-id="be44c-132">If found, the data is returned immediately.</span></span> <span data-ttu-id="be44c-133">Si les données n’existent pas dans le cache (ce qui s’appelle une absence dans le [cache](https://www.techopedia.com/definition/6308/cache-miss)), elles sont récupérées à partir d’une base de données locale dans un service en aval (étape \#2).</span><span class="sxs-lookup"><span data-stu-id="be44c-133">If the data doesn't exist in the cache (known as a [cache miss](https://www.techopedia.com/definition/6308/cache-miss)), it's retrieved from a local database in a downstream service (step \#2).</span></span> <span data-ttu-id="be44c-134">Elle est ensuite écrite dans le cache pour les demandes ultérieures (étape \#3) et retournée à l’appelant.</span><span class="sxs-lookup"><span data-stu-id="be44c-134">It's then written to the cache for future requests (step \#3), and returned to the caller.</span></span> <span data-ttu-id="be44c-135">Vous devez veiller à supprimer régulièrement les données mises en cache afin que le système reste en temps et en cohérence.</span><span class="sxs-lookup"><span data-stu-id="be44c-135">Care must be taken to periodically evict cached data so that the system remains timely and consistent.</span></span>

<span data-ttu-id="be44c-136">À mesure qu’un cache partagé augmente, il peut s’avérer bénéfique de partitionner ses données sur plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="be44c-136">As a shared cache grows, it might prove beneficial to partition its data across multiple nodes.</span></span> <span data-ttu-id="be44c-137">Cela permet de réduire la contention et d’améliorer l’évolutivité.</span><span class="sxs-lookup"><span data-stu-id="be44c-137">Doing so can help minimize contention and improve scalability.</span></span> <span data-ttu-id="be44c-138">De nombreux services de mise en cache prennent en charge la possibilité d’ajouter et de supprimer dynamiquement des nœuds et de rééquilibrer les données entre les partitions.</span><span class="sxs-lookup"><span data-stu-id="be44c-138">Many Caching services support the ability to dynamically add and remove nodes and rebalance data across partitions.</span></span> <span data-ttu-id="be44c-139">Cette approche implique généralement le clustering.</span><span class="sxs-lookup"><span data-stu-id="be44c-139">This approach typically involves clustering.</span></span> <span data-ttu-id="be44c-140">Le clustering expose une collection de nœuds fédérés sous la forme d’un cache unique et transparent.</span><span class="sxs-lookup"><span data-stu-id="be44c-140">Clustering exposes a collection of federated nodes as a seamless, single cache.</span></span> <span data-ttu-id="be44c-141">En interne, toutefois, les données sont dispersées sur les nœuds à la suite d’une stratégie de distribution prédéfinie qui équilibre la charge uniformément.</span><span class="sxs-lookup"><span data-stu-id="be44c-141">Internally, however, the data is dispersed across the nodes following a predefined distribution strategy that balances the load evenly.</span></span>

## <a name="azure-cache-for-redis"></a><span data-ttu-id="be44c-142">Cache Azure pour Redis</span><span class="sxs-lookup"><span data-stu-id="be44c-142">Azure Cache for Redis</span></span>

<span data-ttu-id="be44c-143">Le [cache Azure pour redims](https://azure.microsoft.com/services/cache/) est un service de mise en cache des données sécurisé et de service Broker de messagerie, entièrement géré par Microsoft.</span><span class="sxs-lookup"><span data-stu-id="be44c-143">[Azure Cache for Redis](https://azure.microsoft.com/services/cache/) is a secure data caching and messaging broker service, fully managed by Microsoft.</span></span> <span data-ttu-id="be44c-144">Utilisé comme offre PaaS (Platform as a service), il fournit un débit élevé et un accès à faible latence aux données.</span><span class="sxs-lookup"><span data-stu-id="be44c-144">Consumed as a Platform as a Service (PaaS) offering, it provides high throughput and low-latency access to data.</span></span> <span data-ttu-id="be44c-145">Le service est accessible à toutes les applications situées à l’intérieur ou à l’extérieur d’Azure.</span><span class="sxs-lookup"><span data-stu-id="be44c-145">The service is accessible to any application within or outside of Azure.</span></span>

<span data-ttu-id="be44c-146">Le service cache Azure pour Redims gère l’accès aux serveurs ReDim Open source hébergés dans des centres de données Azure.</span><span class="sxs-lookup"><span data-stu-id="be44c-146">The Azure Cache for Redis service manages access to open-source Redis servers hosted across Azure data centers.</span></span> <span data-ttu-id="be44c-147">Le service agit comme une façade assurant la gestion, le contrôle d’accès et la sécurité.</span><span class="sxs-lookup"><span data-stu-id="be44c-147">The service acts as a facade providing management, access control, and security.</span></span> <span data-ttu-id="be44c-148">Le service prend en charge en mode natif un ensemble complet de structures de données, notamment des chaînes, des hachages, des listes et des ensembles.</span><span class="sxs-lookup"><span data-stu-id="be44c-148">The service natively supports a rich set of data structures, including strings, hashes, lists, and sets.</span></span> <span data-ttu-id="be44c-149">Si votre application utilise déjà des ReDim, elle fonctionnera comme avec le cache Azure pour les opérations ReDim.</span><span class="sxs-lookup"><span data-stu-id="be44c-149">If your application already uses Redis, it will work as-is with Azure Cache for Redis.</span></span>

<span data-ttu-id="be44c-150">Le cache Azure pour les insertions est plus qu’un simple serveur de cache.</span><span class="sxs-lookup"><span data-stu-id="be44c-150">Azure Cache for Redis is more than a simple cache server.</span></span> <span data-ttu-id="be44c-151">Il peut prendre en charge un certain nombre de scénarios pour améliorer une architecture de microservices :</span><span class="sxs-lookup"><span data-stu-id="be44c-151">It can support a number of scenarios to enhance a microservices architecture:</span></span>

- <span data-ttu-id="be44c-152">Un magasin de données en mémoire</span><span class="sxs-lookup"><span data-stu-id="be44c-152">An in-memory data store</span></span>
- <span data-ttu-id="be44c-153">Une base de données non relationnelle distribuée</span><span class="sxs-lookup"><span data-stu-id="be44c-153">A distributed non-relational database</span></span>
- <span data-ttu-id="be44c-154">Un courtier de messages</span><span class="sxs-lookup"><span data-stu-id="be44c-154">A message broker</span></span>
- <span data-ttu-id="be44c-155">Un serveur de configuration ou de découverte</span><span class="sxs-lookup"><span data-stu-id="be44c-155">A configuration or discovery server</span></span>
  
<span data-ttu-id="be44c-156">Pour les scénarios avancés, une copie des données mises en cache peut être [conservée sur le disque](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-premium-persistence).</span><span class="sxs-lookup"><span data-stu-id="be44c-156">For advanced scenarios, a copy of the cached data can be [persisted to disk](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-premium-persistence).</span></span> <span data-ttu-id="be44c-157">Si un événement catastrophique désactive à la fois les caches principal et réplica, le cache est reconstruit à partir de l’instantané le plus récent.</span><span class="sxs-lookup"><span data-stu-id="be44c-157">If a catastrophic event disables both the primary and replica caches, the cache is reconstructed from the most recent snapshot.</span></span>

<span data-ttu-id="be44c-158">Le cache Redims Azure est disponible dans un certain nombre de configurations prédéfinies et de niveaux tarifaires.</span><span class="sxs-lookup"><span data-stu-id="be44c-158">Azure Redis Cache is available across a number of predefined configurations and pricing tiers.</span></span>  <span data-ttu-id="be44c-159">Le [niveau Premium](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-premium-tier-intro) offre de nombreuses fonctionnalités de niveau entreprise, telles que le clustering, la persistance des données, la géo-réplication et l’isolation du réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="be44c-159">The [Premium tier](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-premium-tier-intro) features many enterprise-level features such as clustering, data persistence, geo-replication, and virtual-network isolation.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="be44c-160">[Précédent](relational-vs-nosql-data.md)
>[Suivant](elastic-search-in-azure.md)</span><span class="sxs-lookup"><span data-stu-id="be44c-160">[Previous](relational-vs-nosql-data.md)
[Next](elastic-search-in-azure.md)</span></span>
