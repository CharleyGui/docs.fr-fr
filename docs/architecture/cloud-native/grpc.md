---
title: gRPC
description: En savoir plus sur gRPC, son rôle dans les applications natives du Cloud et sa différence par rapport à la communication HTTP RESTful.
author: robvet
no-loc:
- Blazor
- Blazor WebAssembly
ms.date: 01/19/2021
ms.openlocfilehash: 8667f2d3a7a19aa6dffdd8ce8bef103eab5cc54f
ms.sourcegitcommit: f2ab02d9a780819ca2e5310bbcf5cfe5b7993041
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/03/2021
ms.locfileid: "99505698"
---
# <a name="grpc"></a><span data-ttu-id="95117-103">gRPC</span><span class="sxs-lookup"><span data-stu-id="95117-103">gRPC</span></span>

<span data-ttu-id="95117-104">Jusqu’ici, dans cet ouvrage, nous nous sommes concentrés sur la communication [basée sur REST](/azure/architecture/best-practices/api-design) .</span><span class="sxs-lookup"><span data-stu-id="95117-104">So far in this book, we've focused on [REST-based](/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="95117-105">Nous avons vu que REST est un style architectural flexible qui définit les opérations CRUD sur les ressources d’entité.</span><span class="sxs-lookup"><span data-stu-id="95117-105">We've seen that REST is a flexible architectural style that defines CRUD-based operations against entity resources.</span></span> <span data-ttu-id="95117-106">Les clients interagissent avec les ressources sur HTTP avec un modèle de communication de demande/réponse.</span><span class="sxs-lookup"><span data-stu-id="95117-106">Clients interact with resources across HTTP with a request/response communication model.</span></span> <span data-ttu-id="95117-107">Bien que REST soit largement implémenté, une technologie de communication plus récente, gRPC, a gagné un énorme dynamisme au sein de la communauté Cloud-native.</span><span class="sxs-lookup"><span data-stu-id="95117-107">While REST is widely implemented, a newer communication technology, gRPC, has gained tremendous momentum across the cloud-native community.</span></span>

## <a name="what-is-grpc"></a><span data-ttu-id="95117-108">Qu’est-ce que gRPC ?</span><span class="sxs-lookup"><span data-stu-id="95117-108">What is gRPC?</span></span>

<span data-ttu-id="95117-109">gRPC est une infrastructure moderne et hautement performante qui fait évoluer le protocole d' [appel de procédure distante (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) Age Old.</span><span class="sxs-lookup"><span data-stu-id="95117-109">gRPC is a modern, high-performance framework that evolves the age-old [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) protocol.</span></span> <span data-ttu-id="95117-110">Au niveau de l’application, gRPC simplifie la messagerie entre les clients et les services principaux.</span><span class="sxs-lookup"><span data-stu-id="95117-110">At the application level, gRPC streamlines messaging between clients and back-end services.</span></span> <span data-ttu-id="95117-111">En provenance de Google, gRPC est open source et fait partie de l’écosystème  [Cloud Native Computing Foundation (CNCF)](https://www.cncf.io/) des offres Cloud natives.</span><span class="sxs-lookup"><span data-stu-id="95117-111">Originating from Google, gRPC is open source and part of the  [Cloud Native Computing Foundation (CNCF)](https://www.cncf.io/) ecosystem of cloud-native offerings.</span></span> <span data-ttu-id="95117-112">CNCF considère gRPC un [projet en incubation](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc).</span><span class="sxs-lookup"><span data-stu-id="95117-112">CNCF considers gRPC an [incubating project](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc).</span></span> <span data-ttu-id="95117-113">L’incubation signifie que les utilisateurs finaux utilisent la technologie dans les applications de production et que le projet a un nombre sain de contributeurs.</span><span class="sxs-lookup"><span data-stu-id="95117-113">Incubating means end users are using the technology in production applications, and the project has a healthy number of contributors.</span></span>

<span data-ttu-id="95117-114">Une application cliente gRPC standard expose une fonction in-process locale qui implémente une opération commerciale.</span><span class="sxs-lookup"><span data-stu-id="95117-114">A typical gRPC client app will expose a local, in-process function that implements a business operation.</span></span> <span data-ttu-id="95117-115">En coulisses, cette fonction locale appelle une autre fonction sur un ordinateur distant.</span><span class="sxs-lookup"><span data-stu-id="95117-115">Under the covers, that local function invokes another function on a remote machine.</span></span> <span data-ttu-id="95117-116">Ce qui semble être un appel local devient essentiellement un appel out-of-process transparent à un service distant.</span><span class="sxs-lookup"><span data-stu-id="95117-116">What appears to be a local call essentially becomes a transparent out-of-process call to a remote service.</span></span> <span data-ttu-id="95117-117">L’infrastructure RPC fait abstraction de la communication réseau point à point, de la sérialisation et de l’exécution entre les ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="95117-117">The RPC plumbing abstracts the point-to-point networking communication, serialization, and execution between computers.</span></span>

<span data-ttu-id="95117-118">Dans les applications Cloud natives, les développeurs travaillent souvent dans des langages de programmation, des infrastructures et des technologies.</span><span class="sxs-lookup"><span data-stu-id="95117-118">In cloud-native applications, developers often work across programming languages, frameworks, and technologies.</span></span> <span data-ttu-id="95117-119">Cette *interopérabilité* complique les contrats de message et les mécanismes requis pour la communication multiplateforme.</span><span class="sxs-lookup"><span data-stu-id="95117-119">This *interoperability* complicates message contracts and the plumbing required for cross-platform communication.</span></span>  <span data-ttu-id="95117-120">gRPC fournit une « couche horizontale uniforme » qui résume ces préoccupations.</span><span class="sxs-lookup"><span data-stu-id="95117-120">gRPC provides a "uniform horizontal layer" that abstracts these concerns.</span></span> <span data-ttu-id="95117-121">Les développeurs codent dans leur plate-forme native axée sur les fonctionnalités métier, tandis que gRPC gère la gestion des communications.</span><span class="sxs-lookup"><span data-stu-id="95117-121">Developers code in their native platform focused on business functionality, while gRPC handles communication plumbing.</span></span>

<span data-ttu-id="95117-122">gRPC offre une prise en charge complète des piles de développement les plus populaires, notamment Java, JavaScript, C#, Go, Swift et NodeJS.</span><span class="sxs-lookup"><span data-stu-id="95117-122">gRPC offers comprehensive support across most popular development stacks, including Java, JavaScript, C#, Go, Swift, and NodeJS.</span></span>

## <a name="grpc-benefits"></a><span data-ttu-id="95117-123">Avantages gRPC</span><span class="sxs-lookup"><span data-stu-id="95117-123">gRPC Benefits</span></span>

<span data-ttu-id="95117-124">gRPC utilise HTTP/2 pour son protocole de transport.</span><span class="sxs-lookup"><span data-stu-id="95117-124">gRPC uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="95117-125">Bien qu’compatible avec HTTP 1,1, HTTP/2 offre de nombreuses fonctionnalités avancées :</span><span class="sxs-lookup"><span data-stu-id="95117-125">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="95117-126">Protocole de tramage binaire pour le transport de données, contrairement à HTTP 1,1, qui est basé sur du texte.</span><span class="sxs-lookup"><span data-stu-id="95117-126">A binary framing protocol for data transport - unlike HTTP 1.1, which is text based.</span></span>
- <span data-ttu-id="95117-127">Prise en charge du multiplexage pour l’envoi de plusieurs requêtes parallèles sur la même connexion-HTTP 1,1 limite le traitement à un message de demande/réponse à la fois.</span><span class="sxs-lookup"><span data-stu-id="95117-127">Multiplexing support for sending multiple parallel requests over the same connection - HTTP 1.1 limits processing to one request/response message at a time.</span></span>
- <span data-ttu-id="95117-128">Communication bidirectionnelle en duplex intégral pour l’envoi simultané des demandes du client et des réponses du serveur.</span><span class="sxs-lookup"><span data-stu-id="95117-128">Bidirectional full-duplex communication for sending both client requests and server responses simultaneously.</span></span>
- <span data-ttu-id="95117-129">Streaming intégré permettant des demandes et des réponses pour diffuser de manière asynchrone des jeux de données volumineux.</span><span class="sxs-lookup"><span data-stu-id="95117-129">Built-in streaming enabling requests and responses to asynchronously stream large data sets.</span></span>
- <span data-ttu-id="95117-130">Compression d’en-tête qui réduit l’utilisation du réseau.</span><span class="sxs-lookup"><span data-stu-id="95117-130">Header compression that reduces network usage.</span></span>

<span data-ttu-id="95117-131">gRPC est léger et très performant.</span><span class="sxs-lookup"><span data-stu-id="95117-131">gRPC is lightweight and highly performant.</span></span> <span data-ttu-id="95117-132">Elle peut être jusqu’à 8 fois plus rapide que la sérialisation JSON avec des messages de 60-80% de plus.</span><span class="sxs-lookup"><span data-stu-id="95117-132">It can be up to 8x faster than JSON serialization with messages 60-80% smaller.</span></span> <span data-ttu-id="95117-133">Dans le jargon de Microsoft [Windows Communication Foundation (WCF)](../../framework/wcf/whats-wcf.md) , les performances de gRPC dépassent la vitesse et l’efficacité des [liaisons NetTcp](/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8)hautement optimisées.</span><span class="sxs-lookup"><span data-stu-id="95117-133">In Microsoft [Windows Communication Foundation (WCF)](../../framework/wcf/whats-wcf.md) parlance, gRPC performance exceeds the speed and efficiency of the highly optimized [NetTCP bindings](/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="95117-134">Contrairement à NetTCP, qui privilégie la pile Microsoft, gRPC est multiplateforme.</span><span class="sxs-lookup"><span data-stu-id="95117-134">Unlike NetTCP, which favors the Microsoft stack, gRPC is cross-platform.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="95117-135">Mémoires tampon de protocole</span><span class="sxs-lookup"><span data-stu-id="95117-135">Protocol Buffers</span></span>

<span data-ttu-id="95117-136">gRPC adopte une technologie open source appelée [mémoires tampons de protocole](https://developers.google.com/protocol-buffers/docs/overview).</span><span class="sxs-lookup"><span data-stu-id="95117-136">gRPC embraces an open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview).</span></span> <span data-ttu-id="95117-137">Ils fournissent un format de sérialisation très efficace et indépendant de la plateforme pour la sérialisation des messages structurés que les services envoient entre eux.</span><span class="sxs-lookup"><span data-stu-id="95117-137">They provide a highly efficient and platform-neutral serialization format for serializing structured messages that services send to each other.</span></span> <span data-ttu-id="95117-138">À l’aide d’un langage IDL (Interface Definition Language) multiplateforme, les développeurs définissent un contrat de service pour chaque microservice.</span><span class="sxs-lookup"><span data-stu-id="95117-138">Using a cross-platform Interface Definition Language (IDL), developers define a service contract for each microservice.</span></span> <span data-ttu-id="95117-139">Le contrat, implémenté sous forme de fichier texte `.proto` , décrit les méthodes, les entrées et les sorties pour chaque service.</span><span class="sxs-lookup"><span data-stu-id="95117-139">The contract, implemented as a text-based `.proto` file, describes the methods, inputs, and outputs for each service.</span></span> <span data-ttu-id="95117-140">Le même fichier de contrat peut être utilisé pour les clients et services gRPC basés sur différentes plateformes de développement.</span><span class="sxs-lookup"><span data-stu-id="95117-140">The same contract file can be used for gRPC clients and services built on different development platforms.</span></span>

<span data-ttu-id="95117-141">À l’aide du fichier proto, le compilateur Protobuf, `protoc` , génère le code du client et du service pour votre plateforme cible.</span><span class="sxs-lookup"><span data-stu-id="95117-141">Using the proto file, the Protobuf compiler, `protoc`, generates both client and service code for your target platform.</span></span> <span data-ttu-id="95117-142">Le code comprend les composants suivants :</span><span class="sxs-lookup"><span data-stu-id="95117-142">The code includes the following components:</span></span>

- <span data-ttu-id="95117-143">Objets fortement typés, partagés par le client et le service, qui représentent les opérations de service et les éléments de données d’un message.</span><span class="sxs-lookup"><span data-stu-id="95117-143">Strongly typed objects, shared by the client and service, that represent the service operations and data elements for a message.</span></span>
- <span data-ttu-id="95117-144">Classe de base fortement typée avec l’infrastructure réseau requise que le service gRPC distant peut hériter et étendre.</span><span class="sxs-lookup"><span data-stu-id="95117-144">A strongly typed base class with the required network plumbing that the remote gRPC service can inherit and extend.</span></span>
- <span data-ttu-id="95117-145">Stub client qui contient les plombages requis pour appeler le service gRPC distant.</span><span class="sxs-lookup"><span data-stu-id="95117-145">A client stub that contains the required plumbing to invoke the remote gRPC service.</span></span>

<span data-ttu-id="95117-146">Lors de l’exécution, chaque message est sérialisé en tant que représentation Protobuf standard et échangé entre le client et le service distant.</span><span class="sxs-lookup"><span data-stu-id="95117-146">At runtime, each message is serialized as a standard Protobuf representation and exchanged between the client and remote service.</span></span> <span data-ttu-id="95117-147">Contrairement à JSON ou XML, les messages Protobuf sont sérialisés en tant qu’octets binaires compilés.</span><span class="sxs-lookup"><span data-stu-id="95117-147">Unlike JSON or XML, Protobuf messages are serialized as compiled binary bytes.</span></span>

<span data-ttu-id="95117-148">Le livre, [gRPC pour les développeurs WCF](../grpc-for-wcf-developers/index.md), disponible sur le site de l’architecture Microsoft, fournit une couverture approfondie des gRPC et des mémoires tampons de protocole.</span><span class="sxs-lookup"><span data-stu-id="95117-148">The book, [gRPC for WCF Developers](../grpc-for-wcf-developers/index.md), available from the Microsoft Architecture site, provides in-depth coverage of gRPC and Protocol Buffers.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="95117-149">prise en charge de gRPC dans .NET</span><span class="sxs-lookup"><span data-stu-id="95117-149">gRPC support in .NET</span></span>

<span data-ttu-id="95117-150">gRPC est intégré au kit de développement logiciel (SDK) .NET Core 3,0 et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="95117-150">gRPC is integrated into .NET Core 3.0 SDK and later.</span></span> <span data-ttu-id="95117-151">Les outils suivants le prennent en charge :</span><span class="sxs-lookup"><span data-stu-id="95117-151">The following tools support it:</span></span>

- <span data-ttu-id="95117-152">Visual Studio 2019, version 16,3 ou ultérieure, avec la charge de travail développement Web installée.</span><span class="sxs-lookup"><span data-stu-id="95117-152">Visual Studio 2019, version 16.3 or later, with the web development workload installed.</span></span>
- <span data-ttu-id="95117-153">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="95117-153">Visual Studio Code</span></span>
- <span data-ttu-id="95117-154">interface CLI dotnet</span><span class="sxs-lookup"><span data-stu-id="95117-154">the dotnet CLI</span></span>

<span data-ttu-id="95117-155">Le kit de développement logiciel (SDK) comprend des outils pour le routage des points de terminaison, l’IoC intégré et la journalisation.</span><span class="sxs-lookup"><span data-stu-id="95117-155">The SDK includes tooling for endpoint routing, built-in IoC, and logging.</span></span> <span data-ttu-id="95117-156">Le serveur Web Kestrel Open Source prend en charge les connexions HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="95117-156">The open-source Kestrel web server supports HTTP/2 connections.</span></span> <span data-ttu-id="95117-157">La figure 4-20 illustre un modèle de Visual Studio 2019 qui génère une structure de projet squelette pour un service gRPC.</span><span class="sxs-lookup"><span data-stu-id="95117-157">Figure 4-20 shows a Visual Studio 2019 template that scaffolds a skeleton project for a gRPC service.</span></span> <span data-ttu-id="95117-158">Notez comment .NET prend entièrement en charge Windows, Linux et macOS.</span><span class="sxs-lookup"><span data-stu-id="95117-158">Note how .NET fully supports Windows, Linux, and macOS.</span></span>

![Prise en charge de gRPC dans Visual Studio 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="95117-160">**Figure 4-20**.</span><span class="sxs-lookup"><span data-stu-id="95117-160">**Figure 4-20**.</span></span> <span data-ttu-id="95117-161">prise en charge de gRPC dans Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="95117-161">gRPC support in Visual Studio 2019</span></span>
  
<span data-ttu-id="95117-162">La figure 4-21 montre le squelette du service gRPC généré à partir de la génération de modèles automatique intégrée incluse dans Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="95117-162">Figure 4-21 shows the skeleton gRPC service generated from the built-in scaffolding included in Visual Studio 2019.</span></span>  

![projet gRPC dans Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="95117-164">**Figure 4-21**.</span><span class="sxs-lookup"><span data-stu-id="95117-164">**Figure 4-21**.</span></span> <span data-ttu-id="95117-165">projet gRPC dans Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="95117-165">gRPC project in Visual Studio 2019</span></span>

<span data-ttu-id="95117-166">Dans l’illustration précédente, notez le fichier de description proto et le code de service.</span><span class="sxs-lookup"><span data-stu-id="95117-166">In the previous figure, note the proto description file and service code.</span></span> <span data-ttu-id="95117-167">Comme vous le verrez bientôt, Visual Studio génère une configuration supplémentaire à la fois dans la classe Startup et dans le fichier projet sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="95117-167">As you'll see shortly, Visual Studio generates additional configuration in both the Startup class and underlying project file.</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="95117-168">utilisation de gRPC</span><span class="sxs-lookup"><span data-stu-id="95117-168">gRPC usage</span></span>

<span data-ttu-id="95117-169">Privilégiez gRPC pour les scénarios suivants :</span><span class="sxs-lookup"><span data-stu-id="95117-169">Favor gRPC for the following scenarios:</span></span>

- <span data-ttu-id="95117-170">Communication du microservice vers le serveur principal synchrone, où une réponse immédiate est nécessaire pour poursuivre le traitement.</span><span class="sxs-lookup"><span data-stu-id="95117-170">Synchronous backend microservice-to-microservice communication where an immediate response is required to continue processing.</span></span>
- <span data-ttu-id="95117-171">Environnements polyglotte qui doivent prendre en charge des plateformes de programmation mixte.</span><span class="sxs-lookup"><span data-stu-id="95117-171">Polyglot environments that need to support mixed programming platforms.</span></span>
- <span data-ttu-id="95117-172">Communication à faible latence et débit élevé, où les performances sont critiques.</span><span class="sxs-lookup"><span data-stu-id="95117-172">Low latency and high throughput communication where performance is critical.</span></span>
- <span data-ttu-id="95117-173">Communication en temps réel point à point : gRPC peut envoyer des messages en temps réel sans interrogation et offre une excellente prise en charge de la diffusion bidirectionnelle.</span><span class="sxs-lookup"><span data-stu-id="95117-173">Point-to-point real-time communication - gRPC can push messages in real time without polling and has excellent support for bi-directional streaming.</span></span>
- <span data-ttu-id="95117-174">Environnements réseau restreints : les messages gRPC binaires sont toujours plus petits qu’un message JSON équivalent basé sur le texte.</span><span class="sxs-lookup"><span data-stu-id="95117-174">Network constrained environments – binary gRPC messages are always smaller than an equivalent text-based JSON message.</span></span>

<span data-ttu-id="95117-175">Au moment de la rédaction de cet article, gRPC est principalement utilisé avec les services principaux.</span><span class="sxs-lookup"><span data-stu-id="95117-175">At the time, of this writing, gRPC is primarily used with backend services.</span></span> <span data-ttu-id="95117-176">Les navigateurs modernes ne peuvent pas fournir le niveau de contrôle HTTP/2 requis pour prendre en charge un client gRPC frontal.</span><span class="sxs-lookup"><span data-stu-id="95117-176">Modern browsers can't provide the level of HTTP/2 control required to support a front-end gRPC client.</span></span> <span data-ttu-id="95117-177">Cela dit, il existe une prise en charge de [gRPC-Web avec .net](https://devblogs.microsoft.com/aspnet/grpc-web-for-net-now-available/) qui permet la communication gRPC à partir d’applications basées sur le navigateur créées avec JavaScript ou des Blazor WebAssembly technologies.</span><span class="sxs-lookup"><span data-stu-id="95117-177">That said, there's support for [gRPC-Web with .NET](https://devblogs.microsoft.com/aspnet/grpc-web-for-net-now-available/) that enables gRPC communication from browser-based apps built with JavaScript or Blazor WebAssembly technologies.</span></span> <span data-ttu-id="95117-178">[gRPC-Web](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) permet à une application ASP.net Core gRPC de prendre en charge les fonctionnalités gRPC dans les applications de navigateur :</span><span class="sxs-lookup"><span data-stu-id="95117-178">[gRPC-Web](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) enables an ASP.NET Core gRPC app to support gRPC features in browser apps:</span></span>

- <span data-ttu-id="95117-179">Clients fortement typés et générés par le code</span><span class="sxs-lookup"><span data-stu-id="95117-179">Strongly typed, code-generated clients</span></span>
- <span data-ttu-id="95117-180">Compacter les messages Protobuf</span><span class="sxs-lookup"><span data-stu-id="95117-180">Compact Protobuf messages</span></span>
- <span data-ttu-id="95117-181">Streaming de serveur</span><span class="sxs-lookup"><span data-stu-id="95117-181">Server streaming</span></span>

## <a name="grpc-implementation"></a><span data-ttu-id="95117-182">implémentation de gRPC</span><span class="sxs-lookup"><span data-stu-id="95117-182">gRPC implementation</span></span>

<span data-ttu-id="95117-183">L’architecture de référence des microservices, [eShop on containers](https://github.com/dotnet-architecture/eShopOnContainers), de Microsoft, montre comment implémenter des services gRPC dans des applications .net.</span><span class="sxs-lookup"><span data-stu-id="95117-183">The microservice reference architecture, [eShop on Containers](https://github.com/dotnet-architecture/eShopOnContainers), from Microsoft, shows how to implement gRPC services in .NET applications.</span></span> <span data-ttu-id="95117-184">La figure 4-22 présente l’architecture back-end.</span><span class="sxs-lookup"><span data-stu-id="95117-184">Figure 4-22 presents the back-end architecture.</span></span>

![Architecture backend pour eShop sur les conteneurs](./media/eshop-with-aggregators.png)

<span data-ttu-id="95117-186">**Figure 4-22**.</span><span class="sxs-lookup"><span data-stu-id="95117-186">**Figure 4-22**.</span></span> <span data-ttu-id="95117-187">Architecture backend pour eShop sur les conteneurs</span><span class="sxs-lookup"><span data-stu-id="95117-187">Backend architecture for eShop on Containers</span></span>

<span data-ttu-id="95117-188">Dans l’illustration précédente, vous remarquerez comment eShop adopte le [modèle backend pour les serveurs frontaux](/azure/architecture/patterns/backends-for-frontends) (BFF) en exposant plusieurs passerelles d’API.</span><span class="sxs-lookup"><span data-stu-id="95117-188">In the previous figure, note how eShop embraces the [Backend for Frontends pattern](/azure/architecture/patterns/backends-for-frontends) (BFF) by exposing multiple API gateways.</span></span> <span data-ttu-id="95117-189">Nous avons abordé le modèle BFF plus haut dans ce chapitre.</span><span class="sxs-lookup"><span data-stu-id="95117-189">We discussed the BFF pattern earlier in this chapter.</span></span> <span data-ttu-id="95117-190">Portez une attention particulière au microservice de l’agrégateur (en gris) qui se situe entre la passerelle d’API Web-Shopping et les microservices d’achat principaux.</span><span class="sxs-lookup"><span data-stu-id="95117-190">Pay close attention to the Aggregator microservice (in gray) that sits between the Web-Shopping API Gateway and backend Shopping microservices.</span></span> <span data-ttu-id="95117-191">L’agrégation reçoit une requête unique d’un client, la distribue à différents microservices, agrège les résultats et les renvoie au client demandeur.</span><span class="sxs-lookup"><span data-stu-id="95117-191">The Aggregator receives a single request from a client, dispatches it to various microservices, aggregates the results, and sends them back to the requesting client.</span></span> <span data-ttu-id="95117-192">Ces opérations nécessitent généralement une communication synchrone en ce qui concerne la génération d’une réponse immédiate.</span><span class="sxs-lookup"><span data-stu-id="95117-192">Such operations typically require synchronous communication as to produce an immediate response.</span></span> <span data-ttu-id="95117-193">Dans eShop, les appels backend de l’agrégateur sont effectués à l’aide de gRPC, comme le montre la figure 4-23.</span><span class="sxs-lookup"><span data-stu-id="95117-193">In eShop, backend calls from the Aggregator are performed using gRPC as shown in Figure 4-23.</span></span>

![gRPC dans eShop sur les conteneurs](./media/grpc-implementation.png)

<span data-ttu-id="95117-195">**Figure 4-23**.</span><span class="sxs-lookup"><span data-stu-id="95117-195">**Figure 4-23**.</span></span> <span data-ttu-id="95117-196">gRPC dans eShop sur les conteneurs</span><span class="sxs-lookup"><span data-stu-id="95117-196">gRPC in eShop on Containers</span></span>

<span data-ttu-id="95117-197">la communication gRPC nécessite à la fois les composants client et serveur.</span><span class="sxs-lookup"><span data-stu-id="95117-197">gRPC communication requires both client and server components.</span></span> <span data-ttu-id="95117-198">Dans la figure précédente, Notez comment l’agrégateur d’achat implémente un client gRPC.</span><span class="sxs-lookup"><span data-stu-id="95117-198">In the previous figure, note how the Shopping Aggregator implements a gRPC client.</span></span> <span data-ttu-id="95117-199">Le client effectue des appels gRPC synchrones (en rouge) aux microservices backend, chacun d’entre eux implémentant un serveur gRPC.</span><span class="sxs-lookup"><span data-stu-id="95117-199">The client makes synchronous gRPC calls (in red) to backend microservices, each of which implement a gRPC server.</span></span> <span data-ttu-id="95117-200">Le client et le serveur tirent parti des fonctionnalités gRPC intégrées du kit de développement logiciel (SDK) .NET.</span><span class="sxs-lookup"><span data-stu-id="95117-200">Both the client and server take advantage of the built-in gRPC plumbing from the .NET SDK.</span></span> <span data-ttu-id="95117-201">Les *stubs* côté client permettent d’appeler les appels gRPC distants.</span><span class="sxs-lookup"><span data-stu-id="95117-201">Client-side *stubs* provide the plumbing to invoke remote gRPC calls.</span></span> <span data-ttu-id="95117-202">Les composants côté serveur fournissent des éléments gRPC qui peuvent être hérités et consommés par les classes de service personnalisées.</span><span class="sxs-lookup"><span data-stu-id="95117-202">Server-side components provide gRPC plumbing that custom service classes can inherit and consume.</span></span>

<span data-ttu-id="95117-203">Les microservices qui exposent une API RESTful et une communication gRPC requièrent plusieurs points de terminaison pour gérer le trafic.</span><span class="sxs-lookup"><span data-stu-id="95117-203">Microservices that expose both a RESTful API and gRPC communication require multiple endpoints to manage traffic.</span></span> <span data-ttu-id="95117-204">Vous ouvrez un point de terminaison qui écoute le trafic HTTP pour les appels RESTful et un autre pour les appels gRPC.</span><span class="sxs-lookup"><span data-stu-id="95117-204">You would open an endpoint that listens for HTTP traffic for the RESTful calls and another for gRPC calls.</span></span> <span data-ttu-id="95117-205">Le point de terminaison gRPC doit être configuré pour le protocole HTTP/2 requis pour la communication gRPC.</span><span class="sxs-lookup"><span data-stu-id="95117-205">The gRPC endpoint must be configured for the HTTP/2 protocol that is required for gRPC communication.</span></span>

<span data-ttu-id="95117-206">Bien que nous cherchions à découpler les microservices avec des modèles de communication asynchrones, certaines opérations nécessitent des appels directs.</span><span class="sxs-lookup"><span data-stu-id="95117-206">While we strive to decouple microservices with asynchronous communication patterns, some operations require direct calls.</span></span> <span data-ttu-id="95117-207">gRPC doit être le principal choix pour la communication synchrone directe entre les microservices.</span><span class="sxs-lookup"><span data-stu-id="95117-207">gRPC should be the primary choice for direct synchronous communication between microservices.</span></span> <span data-ttu-id="95117-208">Son protocole de communication hautes performances, basé sur les mémoires tampons HTTP/2 et de protocole, en fait un choix parfait.</span><span class="sxs-lookup"><span data-stu-id="95117-208">Its high-performance communication protocol, based on HTTP/2 and protocol buffers, make it a perfect choice.</span></span>

## <a name="looking-ahead"></a><span data-ttu-id="95117-209">Avant</span><span class="sxs-lookup"><span data-stu-id="95117-209">Looking ahead</span></span>

<span data-ttu-id="95117-210">Avant, gRPC continuera à gagner en traction pour les systèmes Cloud natifs.</span><span class="sxs-lookup"><span data-stu-id="95117-210">Looking ahead, gRPC will continue to gain traction for cloud-native systems.</span></span> <span data-ttu-id="95117-211">Les avantages en matière de performances et de facilité de développement sont intéressants.</span><span class="sxs-lookup"><span data-stu-id="95117-211">The performance benefits and ease of development are compelling.</span></span> <span data-ttu-id="95117-212">Toutefois, REST sera probablement inactif pendant une longue période.</span><span class="sxs-lookup"><span data-stu-id="95117-212">However, REST will likely be around for a long time.</span></span> <span data-ttu-id="95117-213">Il expose les API exposées publiquement et pour des raisons de compatibilité descendante.</span><span class="sxs-lookup"><span data-stu-id="95117-213">It excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="95117-214">[Précédent](service-to-service-communication.md) 
> [Suivant](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="95117-214">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
