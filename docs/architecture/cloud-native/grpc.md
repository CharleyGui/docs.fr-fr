---
title: gRPC (en)
description: Renseignez-vous sur le gRPC, son rôle dans les applications cloud-natives, et comment il diffère de la communication RESTful HTTP.
author: robvet
ms.date: 03/31/2020
ms.openlocfilehash: 28a07ad5ec105d3fc5b65e4cf0ac0cd85eb16627
ms.sourcegitcommit: 79b0dd8bfc63f33a02137121dd23475887ecefda
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/01/2020
ms.locfileid: "80524172"
---
# <a name="grpc"></a><span data-ttu-id="fb246-103">gRPC (en)</span><span class="sxs-lookup"><span data-stu-id="fb246-103">gRPC</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="fb246-104">Jusqu’à présent, dans ce livre, nous nous sommes concentrés sur la communication basée sur [REST.](https://docs.microsoft.com/azure/architecture/best-practices/api-design)</span><span class="sxs-lookup"><span data-stu-id="fb246-104">So far in this book, we've focused on [REST-based](https://docs.microsoft.com/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="fb246-105">Nous avons vu que REST est un style architectural flexible qui définit les opérations basées sur CRUD par rapport aux ressources de l’entité.</span><span class="sxs-lookup"><span data-stu-id="fb246-105">We've seen that REST is a flexible architectural style that defines CRUD-based operations against entity resources.</span></span> <span data-ttu-id="fb246-106">Les clients interagissent avec les ressources de HTTP avec un modèle de communication de demande/réponse.</span><span class="sxs-lookup"><span data-stu-id="fb246-106">Clients interact with resources across HTTP with a request/response communication model.</span></span> <span data-ttu-id="fb246-107">Bien que REST soit largement mise en œuvre, une nouvelle technologie de communication, gRPC, a pris un élan énorme dans la communauté des personnes du cloud.</span><span class="sxs-lookup"><span data-stu-id="fb246-107">While REST is widely implemented, a newer communication technology, gRPC, has gained tremendous momentum across the cloud-native community.</span></span>

## <a name="what-is-grpc"></a><span data-ttu-id="fb246-108">Qu’est-ce que le gRPC?</span><span class="sxs-lookup"><span data-stu-id="fb246-108">What is gRPC?</span></span>

<span data-ttu-id="fb246-109">gRPC est un cadre moderne et performant qui évolue le protocole [d’appel d’intervention à distance (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) séculaire.</span><span class="sxs-lookup"><span data-stu-id="fb246-109">gRPC is a modern, high-performance framework that evolves the age-old [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) protocol.</span></span> <span data-ttu-id="fb246-110">Au niveau de l’application, gRPC rationalise la messagerie entre les clients et les services back-end.</span><span class="sxs-lookup"><span data-stu-id="fb246-110">At the application level, gRPC streamlines messaging between clients and back-end services.</span></span> <span data-ttu-id="fb246-111">Originaire de Google, gRPC est open source et fait partie de l’écosystème Cloud [Native Computing Foundation (CNCF)](https://www.cncf.io/) d’offres cloud-native.</span><span class="sxs-lookup"><span data-stu-id="fb246-111">Originating from Google, gRPC is open source and part of the  [Cloud Native Computing Foundation (CNCF)](https://www.cncf.io/) ecosystem of cloud-native offerings.</span></span> <span data-ttu-id="fb246-112">La CNCF considère gRPC comme un [projet d’incubation.](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc)</span><span class="sxs-lookup"><span data-stu-id="fb246-112">CNCF considers gRPC an [incubating project](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc).</span></span> <span data-ttu-id="fb246-113">Incubation signifie que les utilisateurs finaux utilisent la technologie dans les applications de production, et le projet a un nombre sain de contributeurs.</span><span class="sxs-lookup"><span data-stu-id="fb246-113">Incubating means end users are using the technology in production applications, and the project has a healthy number of contributors.</span></span>

<span data-ttu-id="fb246-114">Une application client GRPC typique exposera une fonction locale en cours de traitement qui met en œuvre une entreprise.</span><span class="sxs-lookup"><span data-stu-id="fb246-114">A typical gRPC client app will expose a local, in-process function that implements a business operation.</span></span> <span data-ttu-id="fb246-115">Sous les couvertures, cette fonction locale invoque une autre fonction sur une machine à distance.</span><span class="sxs-lookup"><span data-stu-id="fb246-115">Under the covers, that local function invokes another function on a remote machine.</span></span> <span data-ttu-id="fb246-116">Ce qui semble être un appel local devient essentiellement un appel transparent hors-processus à un service distant.</span><span class="sxs-lookup"><span data-stu-id="fb246-116">What appears to be a local call essentially becomes a transparent out-of-process call to a remote service.</span></span> <span data-ttu-id="fb246-117">La plomberie RPC résume la communication de réseautage point-à-point, la sérialisation et l’exécution entre les ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="fb246-117">The RPC plumbing abstracts the point-to-point networking communication, serialization, and execution between computers.</span></span>

<span data-ttu-id="fb246-118">Dans les applications cloud-natives, les développeurs travaillent souvent à travers les langages de programmation, les cadres et les technologies.</span><span class="sxs-lookup"><span data-stu-id="fb246-118">In cloud-native applications, developers often work across programming languages, frameworks, and technologies.</span></span> <span data-ttu-id="fb246-119">Cette *interopérabilité* complique les contrats de messages et la plomberie requise pour la communication interplateforme.</span><span class="sxs-lookup"><span data-stu-id="fb246-119">This *interoperability* complicates message contracts and the plumbing required for cross-platform communication.</span></span>  <span data-ttu-id="fb246-120">gRPC fournit une « couche horizontale uniforme » qui résume ces préoccupations.</span><span class="sxs-lookup"><span data-stu-id="fb246-120">gRPC provides a "uniform horizontal layer" that abstracts these concerns.</span></span> <span data-ttu-id="fb246-121">Les développeurs codent dans leur plate-forme native axée sur la fonctionnalité d’entreprise, tandis que gRPC gère la plomberie de communication.</span><span class="sxs-lookup"><span data-stu-id="fb246-121">Developers code in their native platform focused on business functionality, while gRPC handles communication plumbing.</span></span>

<span data-ttu-id="fb246-122">gRPC offre un soutien complet sur la plupart des piles de développement populaires, y compris Java, JavaScript, C, Go, Swift et NodeJS.</span><span class="sxs-lookup"><span data-stu-id="fb246-122">gRPC offers comprehensive support across most popular development stacks, including Java, JavaScript, C#, Go, Swift, and NodeJS.</span></span>

## <a name="grpc-benefits"></a><span data-ttu-id="fb246-123">avantages gRPC</span><span class="sxs-lookup"><span data-stu-id="fb246-123">gRPC Benefits</span></span>

<span data-ttu-id="fb246-124">gRPC utilise HTTP/2 pour son protocole de transport.</span><span class="sxs-lookup"><span data-stu-id="fb246-124">gRPC uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="fb246-125">Bien que compatible avec HTTP 1.1, HTTP/2 dispose de nombreuses fonctionnalités avancées :</span><span class="sxs-lookup"><span data-stu-id="fb246-125">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="fb246-126">Un protocole binaire pour le transport de données - contrairement à HTTP 1.1, qui envoie des données sous forme de texte clair.</span><span class="sxs-lookup"><span data-stu-id="fb246-126">A binary protocol for data transport - unlike HTTP 1.1, which sends data as clear text.</span></span>
- <span data-ttu-id="fb246-127">Soutien multiplexant pour l’envoi de plusieurs demandes parallèles sur la même connexion - HTTP 1.1 limite le traitement à un message de demande/réponse à la fois.</span><span class="sxs-lookup"><span data-stu-id="fb246-127">Multiplexing support for sending multiple parallel requests over the same connection - HTTP 1.1 limits processing to one request/response message at a time.</span></span>
- <span data-ttu-id="fb246-128">Communication bidirectionnelle en duplex pour l’envoi simultané de demandes de clients et de réponses au serveur.</span><span class="sxs-lookup"><span data-stu-id="fb246-128">Bidirectional full-duplex communication for sending both client requests and server responses simultaneously.</span></span>
- <span data-ttu-id="fb246-129">Streaming intégré permettant des demandes et des réponses à diffuser asynchronement de grands ensembles de données.</span><span class="sxs-lookup"><span data-stu-id="fb246-129">Built-in streaming enabling requests and responses to asynchronously stream large data sets.</span></span>

<span data-ttu-id="fb246-130">gRPC est léger et très performant.</span><span class="sxs-lookup"><span data-stu-id="fb246-130">gRPC is lightweight and highly performant.</span></span> <span data-ttu-id="fb246-131">Il peut être jusqu’à 8x plus rapide que la sérialisation JSON avec des messages 60-80% plus petit.</span><span class="sxs-lookup"><span data-stu-id="fb246-131">It can be up to 8x faster than JSON serialization with messages 60-80% smaller.</span></span> <span data-ttu-id="fb246-132">Dans le langage de [microsoft Windows Communication Foundation (WCF),](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) les performances de gRPC dépassent la vitesse et l’efficacité des [liaisons NetTCP](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8)hautement optimisées.</span><span class="sxs-lookup"><span data-stu-id="fb246-132">In Microsoft [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) parlance, gRPC performance exceeds the speed and efficiency of the highly optimized [NetTCP bindings](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="fb246-133">Contrairement à NetTCP, qui favorise la pile Microsoft, gRPC est multiplateforme.</span><span class="sxs-lookup"><span data-stu-id="fb246-133">Unlike NetTCP, which favors the Microsoft stack, gRPC is cross-platform.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="fb246-134">Mémoires tampon de protocole</span><span class="sxs-lookup"><span data-stu-id="fb246-134">Protocol Buffers</span></span>

<span data-ttu-id="fb246-135">gRPC adopte une technologie open-source appelée [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview).</span><span class="sxs-lookup"><span data-stu-id="fb246-135">gRPC embraces an open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview).</span></span> <span data-ttu-id="fb246-136">Ils fournissent un format de sérialisation très efficace et neutre sur la plate-forme pour la sérialisation des messages structurés que les services s’envoient les uns aux autres.</span><span class="sxs-lookup"><span data-stu-id="fb246-136">They provide a highly efficient and platform-neutral serialization format for serializing structured messages that services send to each other.</span></span> <span data-ttu-id="fb246-137">À l’aide d’un langage de définition d’interface interplateforme (IDL), les développeurs définissent un contrat de service pour chaque microservice.</span><span class="sxs-lookup"><span data-stu-id="fb246-137">Using a cross-platform Interface Definition Language (IDL), developers define a service contract for each microservice.</span></span> <span data-ttu-id="fb246-138">Le contrat, mis en `.proto` œuvre sous forme de fichier textuel, décrit les méthodes, les entrées et les sorties de chaque service.</span><span class="sxs-lookup"><span data-stu-id="fb246-138">The contract, implemented as a text-based `.proto` file, describes the methods, inputs, and outputs for each service.</span></span> <span data-ttu-id="fb246-139">Le même fichier de contrat peut être utilisé pour les clients et services gRPC construits sur différentes plates-formes de développement.</span><span class="sxs-lookup"><span data-stu-id="fb246-139">The same contract file can be used for gRPC clients and services built on different development platforms.</span></span>

<span data-ttu-id="fb246-140">À l’aide du fichier proto, `protoc`le compilateur Protobuf, génère à la fois le client et le code de service pour votre plate-forme cible.</span><span class="sxs-lookup"><span data-stu-id="fb246-140">Using the proto file, the Protobuf compiler, `protoc`, generates both client and service code for your target platform.</span></span> <span data-ttu-id="fb246-141">Le code comprend les composants suivants :</span><span class="sxs-lookup"><span data-stu-id="fb246-141">The code includes the following components:</span></span>

- <span data-ttu-id="fb246-142">Objets fortement typés, partagés par le client et le service, qui représentent les opérations de service et les éléments de données pour un message.</span><span class="sxs-lookup"><span data-stu-id="fb246-142">Strongly-typed objects, shared by the client and service, that represent the service operations and data elements for a message.</span></span>
- <span data-ttu-id="fb246-143">Une classe de base fortement typée avec la plomberie réseau requise que le service à distance gRPC peut hériter et étendre.</span><span class="sxs-lookup"><span data-stu-id="fb246-143">A strongly-typed base class with the required network plumbing that the remote gRPC service can inherit and extend.</span></span>
- <span data-ttu-id="fb246-144">Un talon client qui contient la plomberie requise pour invoquer le service à distance gRPC.</span><span class="sxs-lookup"><span data-stu-id="fb246-144">A client stub that contains the required plumbing to invoke the remote gRPC service.</span></span>

<span data-ttu-id="fb246-145">Au moment de l’exécution, chaque message est sérialisé en tant que représentation Protobuf standard et échangé entre le client et le service à distance.</span><span class="sxs-lookup"><span data-stu-id="fb246-145">At runtime, each message is serialized as a standard Protobuf representation and exchanged between the client and remote service.</span></span> <span data-ttu-id="fb246-146">Contrairement à JSON ou XML, les messages Protobuf sont sérialisés sous forme d’octets binaires compilés.</span><span class="sxs-lookup"><span data-stu-id="fb246-146">Unlike JSON or XML, Protobuf messages are serialized as compiled binary bytes.</span></span>

<span data-ttu-id="fb246-147">Le livre, [gRPC pour WCF Developers](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/), disponible sur le site Microsoft Architecture, offre une couverture approfondie de gRPC et Protocol Buffers.</span><span class="sxs-lookup"><span data-stu-id="fb246-147">The book, [gRPC for WCF Developers](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/), available from the Microsoft Architecture site, provides in-depth coverage of gRPC and Protocol Buffers.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="fb246-148">support gRPC en .NET</span><span class="sxs-lookup"><span data-stu-id="fb246-148">gRPC support in .NET</span></span>

<span data-ttu-id="fb246-149">gRPC est intégré dans .NET Core 3.0 SDK ou plus tard.</span><span class="sxs-lookup"><span data-stu-id="fb246-149">gRPC is integrated into .NET Core 3.0 SDK or later.</span></span> <span data-ttu-id="fb246-150">Les outils suivants le soutiennent :</span><span class="sxs-lookup"><span data-stu-id="fb246-150">The following tools support it:</span></span>

- <span data-ttu-id="fb246-151">Visual Studio 2019, version 16.3 ou plus tard, avec la charge de travail de développement web installée.</span><span class="sxs-lookup"><span data-stu-id="fb246-151">Visual Studio 2019, version 16.3 or later, with the web development workload installed.</span></span>
- <span data-ttu-id="fb246-152">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="fb246-152">Visual Studio Code</span></span>
- <span data-ttu-id="fb246-153">l’ICIC dotnet</span><span class="sxs-lookup"><span data-stu-id="fb246-153">the dotnet CLI</span></span>

<span data-ttu-id="fb246-154">Le SDK comprend l’outillage pour le routage des points de terminaison, l’IoC intégré et l’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="fb246-154">The SDK includes tooling for endpoint routing, built-in IoC, and logging.</span></span> <span data-ttu-id="fb246-155">Le serveur web open-source Kestrel prend en charge les connexions HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="fb246-155">The open-source Kestrel web server supports HTTP/2 connections.</span></span> <span data-ttu-id="fb246-156">La figure 4-20 montre un modèle Visual Studio 2019 qui échafaude un projet de squelette pour un service gRPC.</span><span class="sxs-lookup"><span data-stu-id="fb246-156">Figure 4-20 shows a Visual Studio 2019 template that scaffolds a skeleton project for a gRPC service.</span></span> <span data-ttu-id="fb246-157">Notez comment .NET Core prend pleinement en charge Windows, Linux et macOS.</span><span class="sxs-lookup"><span data-stu-id="fb246-157">Note how .NET Core fully supports Windows, Linux, and macOS.</span></span>

![support gRPC en Studio Visuel 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="fb246-159">**Figure 4-20**.</span><span class="sxs-lookup"><span data-stu-id="fb246-159">**Figure 4-20**.</span></span> <span data-ttu-id="fb246-160">gRPC support dans Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="fb246-160">gRPC support in Visual Studio 2019</span></span>
  
<span data-ttu-id="fb246-161">La figure 4-21 montre le service squelette gRPC généré par l’échafaudage intégré inclus dans Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="fb246-161">Figure 4-21 shows the skeleton gRPC service generated from the built-in scaffolding included in Visual Studio 2019.</span></span>  

![gRPC projet dans Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="fb246-163">**Figure 4-21**.</span><span class="sxs-lookup"><span data-stu-id="fb246-163">**Figure 4-21**.</span></span> <span data-ttu-id="fb246-164">gRPC projet dans Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="fb246-164">gRPC project in Visual Studio 2019</span></span>

<span data-ttu-id="fb246-165">Dans le chiffre précédent, notez le fichier de description proto et le code de service.</span><span class="sxs-lookup"><span data-stu-id="fb246-165">In the previous figure, note the proto description file and service code.</span></span> <span data-ttu-id="fb246-166">Comme vous le verrez bientôt, Visual Studio génère une configuration supplémentaire dans la classe Startup et dans le fichier de projet sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="fb246-166">As you'll see shortly, Visual Studio generates additional configuration in both the Startup class and underlying project file.</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="fb246-167">utilisation de gRPC</span><span class="sxs-lookup"><span data-stu-id="fb246-167">gRPC usage</span></span>

<span data-ttu-id="fb246-168">Favoriser gRPC pour les scénarios suivants:</span><span class="sxs-lookup"><span data-stu-id="fb246-168">Favor gRPC for the following scenarios:</span></span>

- <span data-ttu-id="fb246-169">Communication synchrone de microservice de backend-à-microservice où une réponse immédiate est nécessaire pour continuer le traitement.</span><span class="sxs-lookup"><span data-stu-id="fb246-169">Synchronous backend microservice-to-microservice communication where an immediate response is required to continue processing.</span></span>
- <span data-ttu-id="fb246-170">Environnements polyglottes qui ont besoin de prendre en charge les plates-formes de programmation mixtes.</span><span class="sxs-lookup"><span data-stu-id="fb246-170">Polyglot environments that need to support mixed programming platforms.</span></span>
- <span data-ttu-id="fb246-171">Faible latence et communication à haut débit où la performance est critique.</span><span class="sxs-lookup"><span data-stu-id="fb246-171">Low latency and high throughput communication where performance is critical.</span></span>
- <span data-ttu-id="fb246-172">Communication en temps réel point à point - gRPC peut pousser des messages en temps réel sans sondage et a un excellent soutien pour le streaming bidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="fb246-172">Point-to-point real-time communication - gRPC can push messages in real time without polling and has excellent support for bi-directional streaming.</span></span>
- <span data-ttu-id="fb246-173">Environnements de réseau restreints - les messages de gRPC binaires sont toujours plus petits qu’un message JSON basé sur le texte équivalent.</span><span class="sxs-lookup"><span data-stu-id="fb246-173">Network constrained environments – binary gRPC messages are always smaller than an equivalent text-based JSON message.</span></span>

<span data-ttu-id="fb246-174">À l’époque, de cette écriture, gRPC est principalement utilisé avec les services backend.</span><span class="sxs-lookup"><span data-stu-id="fb246-174">At the time, of this writing, gRPC is primarily used with backend services.</span></span> <span data-ttu-id="fb246-175">La plupart des navigateurs modernes ne peuvent pas fournir le niveau de contrôle HTTP/2 requis pour prendre en charge un client gRPC frontale.</span><span class="sxs-lookup"><span data-stu-id="fb246-175">Most modern browsers can't provide the level of HTTP/2 control required to support a front-end gRPC client.</span></span> <span data-ttu-id="fb246-176">Cela dit, il ya une [initiative précoce](https://devblogs.microsoft.com/aspnet/grpc-web-experiment/) qui permet la communication gRPC à partir d’applications basées sur le navigateur construit avec JavaScript ou Blazor WebAssembly technologies.</span><span class="sxs-lookup"><span data-stu-id="fb246-176">That said, there's an [early initiative](https://devblogs.microsoft.com/aspnet/grpc-web-experiment/) that enables gRPC communication from browser-based apps built with JavaScript or Blazor WebAssembly technologies.</span></span> <span data-ttu-id="fb246-177">Le [gRPC-Web pour .NET](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) permet à une application ASP.NET Core gRPC de prendre en charge les fonctionnalités gRPC dans les applications de navigateur:</span><span class="sxs-lookup"><span data-stu-id="fb246-177">The  [gRPC-Web for .NET](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) enables an ASP.NET Core gRPC app to support gRPC features in browser apps:</span></span>

- <span data-ttu-id="fb246-178">Clients fortement typés générés par le code</span><span class="sxs-lookup"><span data-stu-id="fb246-178">Strongly-typed code-generated clients</span></span>
- <span data-ttu-id="fb246-179">Messages Protobuf compacts</span><span class="sxs-lookup"><span data-stu-id="fb246-179">Compact Protobuf messages</span></span>
- <span data-ttu-id="fb246-180">Streaming serveur</span><span class="sxs-lookup"><span data-stu-id="fb246-180">Server streaming</span></span>

## <a name="grpc-implementation"></a><span data-ttu-id="fb246-181">mise en œuvre gRPC</span><span class="sxs-lookup"><span data-stu-id="fb246-181">gRPC implementation</span></span>

<span data-ttu-id="fb246-182">L’architecture de référence de microservice, [eShop sur Les conteneurs](https://github.com/dotnet-architecture/eShopOnContainers), de Microsoft, montre comment implémenter les services gRPC dans les applications .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fb246-182">The microservice reference architecture, [eShop on Containers](https://github.com/dotnet-architecture/eShopOnContainers), from Microsoft, shows how to implement gRPC services in .NET Core applications.</span></span> <span data-ttu-id="fb246-183">La figure 4-22 présente l’architecture back-end.</span><span class="sxs-lookup"><span data-stu-id="fb246-183">Figure 4-22 presents the back-end architecture.</span></span>

![Architecture backend pour eShop sur Conteneurs](./media/eshop-with-aggregators.png)

<span data-ttu-id="fb246-185">**Figure 4-22**.</span><span class="sxs-lookup"><span data-stu-id="fb246-185">**Figure 4-22**.</span></span> <span data-ttu-id="fb246-186">Architecture backend pour eShop sur Conteneurs</span><span class="sxs-lookup"><span data-stu-id="fb246-186">Backend architecture for eShop on Containers</span></span>

<span data-ttu-id="fb246-187">Dans le chiffre précédent, notez comment eShop embrasse le [modèle Backend for Frontends](https://docs.microsoft.com/azure/architecture/patterns/backends-for-frontends) (BFF) en exposant plusieurs passerelles API.</span><span class="sxs-lookup"><span data-stu-id="fb246-187">In the previous figure, note how eShop embraces the [Backend for Frontends pattern](https://docs.microsoft.com/azure/architecture/patterns/backends-for-frontends) (BFF) by exposing multiple API gateways.</span></span> <span data-ttu-id="fb246-188">Nous avons discuté du modèle BFF plus tôt dans ce chapitre.</span><span class="sxs-lookup"><span data-stu-id="fb246-188">We discussed the BFF pattern earlier in this chapter.</span></span> <span data-ttu-id="fb246-189">Portez une attention particulière au microservice Aggregator (en gris) qui se trouve entre la passerelle de l’API Web-Shopping et les microservices d’achats backend.</span><span class="sxs-lookup"><span data-stu-id="fb246-189">Pay close attention to the Aggregator microservice (in gray) that sits between the Web-Shopping API Gateway and backend Shopping microservices.</span></span> <span data-ttu-id="fb246-190">L’agrégateur reçoit une seule demande d’un client, l’envoie à divers microservices, agrége les résultats et les renvoie au client demandeur.</span><span class="sxs-lookup"><span data-stu-id="fb246-190">The Aggregator receives a single request from a client, dispatches it to various microservices, aggregates the results, and sends them back to the requesting client.</span></span> <span data-ttu-id="fb246-191">Ces opérations nécessitent généralement une communication synchrone pour produire une réponse immédiate.</span><span class="sxs-lookup"><span data-stu-id="fb246-191">Such operations typically require synchronous communication as to produce an immediate response.</span></span> <span data-ttu-id="fb246-192">Dans eShop, les appels backend de l’agrégateur sont effectués à l’aide de gRPC comme indiqué dans la figure 4-23.</span><span class="sxs-lookup"><span data-stu-id="fb246-192">In eShop, backend calls from the Aggregator are performed using gRPC as shown in Figure 4-23.</span></span>

![gRPC dans eShop sur conteneurs](./media/grpc-implementation.png)

<span data-ttu-id="fb246-194">**Figure 4-23**.</span><span class="sxs-lookup"><span data-stu-id="fb246-194">**Figure 4-23**.</span></span> <span data-ttu-id="fb246-195">gRPC dans eShop sur conteneurs</span><span class="sxs-lookup"><span data-stu-id="fb246-195">gRPC in eShop on Containers</span></span>

<span data-ttu-id="fb246-196">la communication gRPC nécessite à la fois des composants clients et serveur.</span><span class="sxs-lookup"><span data-stu-id="fb246-196">gRPC communication requires both client and server components.</span></span> <span data-ttu-id="fb246-197">Dans le chiffre précédent, notez comment l’agrégateur de shopping implémente un client gRPC.</span><span class="sxs-lookup"><span data-stu-id="fb246-197">In the previous figure, note how the Shopping Aggregator implements a gRPC client.</span></span> <span data-ttu-id="fb246-198">Le client fait des appels synchrones gRPC (en rouge) pour backend microservices, dont chacun implémente un serveur gRPC.</span><span class="sxs-lookup"><span data-stu-id="fb246-198">The client makes synchronous gRPC calls (in red) to backend microservices, each of which implement a gRPC server.</span></span> <span data-ttu-id="fb246-199">Le client et le serveur profitent de la plomberie gRPC intégrée de la .NET Core 3.0 SDK.</span><span class="sxs-lookup"><span data-stu-id="fb246-199">Both the client and server take advantage of the built-in gRPC plumbing from the .NET Core 3.0 SDK.</span></span> <span data-ttu-id="fb246-200">Les *talons* côté client fournissent la plomberie pour invoquer les appels à distance de gRPC.</span><span class="sxs-lookup"><span data-stu-id="fb246-200">Client-side *stubs* provide the plumbing to invoke remote gRPC calls.</span></span> <span data-ttu-id="fb246-201">Les composants côté serveur fournissent la plomberie gRPC que les classes de service personnalisé peuvent hériter et consommer.</span><span class="sxs-lookup"><span data-stu-id="fb246-201">Server-side components provide gRPC plumbing that custom service classes can inherit and consume.</span></span>

<span data-ttu-id="fb246-202">Les microservices qui exposent à la fois une communication RESTful API et gRPC nécessitent plusieurs paramètres de gestion du trafic.</span><span class="sxs-lookup"><span data-stu-id="fb246-202">Microservices that expose both a RESTful API and gRPC communication require multiple endpoints to manage traffic.</span></span> <span data-ttu-id="fb246-203">Vous ouvririez un point de terminaison qui écoute le trafic HTTP pour les appels RESTful et un autre pour les appels gRPC.</span><span class="sxs-lookup"><span data-stu-id="fb246-203">You would open an endpoint that listens for HTTP traffic for the RESTful calls and another for gRPC calls.</span></span> <span data-ttu-id="fb246-204">Le critère d’évaluation gRPC doit être configuré pour le protocole HTTP/2 requis pour la communication gRPC.</span><span class="sxs-lookup"><span data-stu-id="fb246-204">The gRPC endpoint must be configured for the HTTP/2 protocol that is required for gRPC communication.</span></span>

<span data-ttu-id="fb246-205">Bien que nous nous effervions à découpler les microservices avec des modèles de communication asynchrones, certaines opérations nécessitent des appels directs.</span><span class="sxs-lookup"><span data-stu-id="fb246-205">While we strive to decouple microservices with asynchronous communication patterns, some operations require direct calls.</span></span> <span data-ttu-id="fb246-206">gRPC devrait être le choix principal pour la communication synchrone directe entre les microservices.</span><span class="sxs-lookup"><span data-stu-id="fb246-206">gRPC should be the primary choice for direct synchronous communication between microservices.</span></span> <span data-ttu-id="fb246-207">Son protocole de communication haute performance, basé sur HTTP/2 et les tampons de protocole, en font un choix parfait.</span><span class="sxs-lookup"><span data-stu-id="fb246-207">Its high-performance communication protocol, based on HTTP/2 and protocol buffers, make it a perfect choice.</span></span>

## <a name="looking-ahead"></a><span data-ttu-id="fb246-208">Vers l’avenir</span><span class="sxs-lookup"><span data-stu-id="fb246-208">Looking ahead</span></span>

<span data-ttu-id="fb246-209">Pour l’avenir, gRPC continuera de gagner en traction pour les systèmes cloud-autochtones.</span><span class="sxs-lookup"><span data-stu-id="fb246-209">Looking ahead, gRPC will continue to gain traction for cloud-native systems.</span></span> <span data-ttu-id="fb246-210">Les avantages de la performance et la facilité de développement sont convaincants.</span><span class="sxs-lookup"><span data-stu-id="fb246-210">The performance benefits and ease of development are compelling.</span></span> <span data-ttu-id="fb246-211">Cependant, REST sera probablement là pendant une longue période.</span><span class="sxs-lookup"><span data-stu-id="fb246-211">However, REST will likely be around for a long time.</span></span> <span data-ttu-id="fb246-212">Il excelle pour les API publiquement exposées et pour des raisons de compatibilité rétrograde.</span><span class="sxs-lookup"><span data-stu-id="fb246-212">It excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="fb246-213">[Suivant précédent](service-to-service-communication.md)
>[Next](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="fb246-213">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
