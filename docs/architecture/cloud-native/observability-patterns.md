---
title: Modèles d’observabilité
description: Modèles d’observation pour les applications Cloud natives
ms.date: 08/10/2020
ms.openlocfilehash: 2a6ef0e58f1e20667167042614768b099f640858
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90539851"
---
# <a name="observability-patterns"></a><span data-ttu-id="d9286-103">Modèles d’observabilité</span><span class="sxs-lookup"><span data-stu-id="d9286-103">Observability patterns</span></span>

<span data-ttu-id="d9286-104">Tout comme les modèles ont été développés pour faciliter la mise en page du code dans les applications, il existe des modèles pour les applications de fonctionnement de manière fiable.</span><span class="sxs-lookup"><span data-stu-id="d9286-104">Just as patterns have been developed to aid in the layout of code in applications, there are patterns for operating applications in a reliable way.</span></span> <span data-ttu-id="d9286-105">Trois modèles utiles dans la gestion des applications sont apparu : **journalisation**, **surveillance**et **alertes**.</span><span class="sxs-lookup"><span data-stu-id="d9286-105">Three useful patterns in maintaining applications have emerged: **logging**, **monitoring**, and **alerts**.</span></span>

## <a name="when-to-use-logging"></a><span data-ttu-id="d9286-106">Quand utiliser la journalisation</span><span class="sxs-lookup"><span data-stu-id="d9286-106">When to use logging</span></span>

<span data-ttu-id="d9286-107">Quelle que soit la prudence, les applications se comportent presque toujours de manière inattendue en production.</span><span class="sxs-lookup"><span data-stu-id="d9286-107">No matter how careful we are, applications almost always behave in unexpected ways in production.</span></span> <span data-ttu-id="d9286-108">Lorsque les utilisateurs signalent des problèmes avec une application, il est utile de pouvoir voir ce qui se passe avec l’application lorsque le problème s’est produit.</span><span class="sxs-lookup"><span data-stu-id="d9286-108">When users report problems with an application, it's useful to be able to see what was going on with the app when the problem occurred.</span></span> <span data-ttu-id="d9286-109">L’une des méthodes les plus éprouvées et les plus vraies pour capturer des informations sur ce que fait une application en cours d’exécution est de faire en sorte que l’application consigne ce qu’elle fait.</span><span class="sxs-lookup"><span data-stu-id="d9286-109">One of the most tried and true ways of capturing information about what an application is doing while it's running is to have the application write down what it's doing.</span></span> <span data-ttu-id="d9286-110">Ce processus porte le nom de journalisation.</span><span class="sxs-lookup"><span data-stu-id="d9286-110">This process is known as logging.</span></span> <span data-ttu-id="d9286-111">À chaque fois que des échecs ou des problèmes surviennent en production, l’objectif doit être de reproduire les conditions dans lesquelles les défaillances se sont produites, dans un environnement hors production.</span><span class="sxs-lookup"><span data-stu-id="d9286-111">Anytime failures or problems occur in production, the goal should be to reproduce the conditions under which the failures occurred, in a non-production environment.</span></span> <span data-ttu-id="d9286-112">Le fait de disposer d’une bonne connexion permet aux développeurs de suivre le programme afin de dupliquer les problèmes dans un environnement qui peut être testé et expérimenté.</span><span class="sxs-lookup"><span data-stu-id="d9286-112">Having good logging in place provides a roadmap for developers to follow in order to duplicate problems in an environment that can be tested and experimented with.</span></span>

### <a name="challenges-when-logging-with-cloud-native-applications"></a><span data-ttu-id="d9286-113">Défis liés à la journalisation avec des applications Cloud natives</span><span class="sxs-lookup"><span data-stu-id="d9286-113">Challenges when logging with cloud-native applications</span></span>

<span data-ttu-id="d9286-114">Dans les applications traditionnelles, les fichiers journaux sont généralement stockés sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="d9286-114">In traditional applications, log files are typically stored on the local machine.</span></span> <span data-ttu-id="d9286-115">En fait, sur les systèmes d’exploitation de type UNIX, il existe une structure de dossiers définie pour contenir tous les journaux, généralement sous `/var/log` .</span><span class="sxs-lookup"><span data-stu-id="d9286-115">In fact, on Unix-like operating systems, there's a folder structure defined to hold any logs, typically under `/var/log`.</span></span>

<span data-ttu-id="d9286-116">![Journalisation dans un fichier dans une application monolithique. ](./media/single-monolith-logging.png)
 **Figure 7-1**.</span><span class="sxs-lookup"><span data-stu-id="d9286-116">![Logging to a file in a monolithic app.](./media/single-monolith-logging.png)
**Figure 7-1**.</span></span> <span data-ttu-id="d9286-117">Journalisation dans un fichier dans une application monolithique.</span><span class="sxs-lookup"><span data-stu-id="d9286-117">Logging to a file in a monolithic app.</span></span>

<span data-ttu-id="d9286-118">L’utilité de la journalisation dans un fichier plat sur un seul ordinateur est considérablement réduite dans un environnement Cloud.</span><span class="sxs-lookup"><span data-stu-id="d9286-118">The usefulness of logging to a flat file on a single machine is vastly reduced in a cloud environment.</span></span> <span data-ttu-id="d9286-119">Les applications qui produisent des journaux peuvent ne pas avoir accès au disque local ou le disque local peut être très transitoire, car les conteneurs sont mélangés à des machines physiques.</span><span class="sxs-lookup"><span data-stu-id="d9286-119">Applications producing logs may not have access to the local disk or the local disk may be highly transient as containers are shuffled around physical machines.</span></span> <span data-ttu-id="d9286-120">Même une mise à l’échelle simple des applications monolithiques sur plusieurs nœuds peut compliquer la recherche du fichier journal approprié basé sur des fichiers.</span><span class="sxs-lookup"><span data-stu-id="d9286-120">Even simple scaling up of monolithic applications across multiple nodes can make it challenging to locate the appropriate file-based log file.</span></span>

<span data-ttu-id="d9286-121">![Journalisation dans des fichiers dans une application monolithique mise à l’échelle. ](./media/multiple-node-monolith-logging.png)
 **Figure 7-2**.</span><span class="sxs-lookup"><span data-stu-id="d9286-121">![Logging to files in a scaled monolithic app.](./media/multiple-node-monolith-logging.png)
**Figure 7-2**.</span></span> <span data-ttu-id="d9286-122">Journalisation dans des fichiers dans une application monolithique mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="d9286-122">Logging to files in a scaled monolithic app.</span></span>

<span data-ttu-id="d9286-123">Les applications Cloud natives développées à l’aide d’une architecture de microservices présentent également des défis pour les enregistreurs basés sur des fichiers.</span><span class="sxs-lookup"><span data-stu-id="d9286-123">Cloud-native applications developed using a microservices architecture also pose some challenges for file-based loggers.</span></span> <span data-ttu-id="d9286-124">Les demandes de l’utilisateur peuvent maintenant s’étendre sur plusieurs services qui sont exécutés sur des ordinateurs différents et peuvent inclure des fonctions sans serveur sans accès à un système de fichiers local.</span><span class="sxs-lookup"><span data-stu-id="d9286-124">User requests may now span multiple services that are run on different machines and may include serverless functions with no access to a local file system at all.</span></span> <span data-ttu-id="d9286-125">Il serait très difficile de mettre en corrélation les journaux d’un utilisateur ou d’une session sur ces nombreux services et ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="d9286-125">It would be very challenging to correlate the logs from a user or a session across these many services and machines.</span></span>

<span data-ttu-id="d9286-126">![Journalisation dans des fichiers locaux dans une application de microservices. ](./media/local-log-file-per-service.png)
 **Figure 7-3**.</span><span class="sxs-lookup"><span data-stu-id="d9286-126">![Logging to local files in a microservices app.](./media/local-log-file-per-service.png)
**Figure 7-3**.</span></span> <span data-ttu-id="d9286-127">Journalisation dans des fichiers locaux dans une application de microservices.</span><span class="sxs-lookup"><span data-stu-id="d9286-127">Logging to local files in a microservices app.</span></span>

<span data-ttu-id="d9286-128">Enfin, le nombre d’utilisateurs dans certaines applications Cloud natives est élevé.</span><span class="sxs-lookup"><span data-stu-id="d9286-128">Finally, the number of users in some cloud-native applications is high.</span></span> <span data-ttu-id="d9286-129">Imaginez que chaque utilisateur génère une centaine de messages de journalisation lorsqu’il se connecte à une application.</span><span class="sxs-lookup"><span data-stu-id="d9286-129">Imagine that each user generates a hundred lines of log messages when they log into an application.</span></span> <span data-ttu-id="d9286-130">D’un point de vue gérable, ce qui peut être géré, mais multipliez-la par plus de 100 000 utilisateurs et le volume des journaux est suffisamment important pour que des outils spécialisés soient nécessaires pour prendre en charge l’utilisation efficace des journaux.</span><span class="sxs-lookup"><span data-stu-id="d9286-130">In isolation, that is manageable, but multiply that over 100,000 users and the volume of logs becomes large enough that specialized tools are needed to support effective use of the logs.</span></span>

### <a name="logging-in-cloud-native-applications"></a><span data-ttu-id="d9286-131">Journalisation dans les applications natives du Cloud</span><span class="sxs-lookup"><span data-stu-id="d9286-131">Logging in cloud-native applications</span></span>

<span data-ttu-id="d9286-132">Chaque langage de programmation dispose d’outils qui autorisent l’écriture de journaux, et la surcharge d’écriture de ces journaux est généralement faible.</span><span class="sxs-lookup"><span data-stu-id="d9286-132">Every programming language has tooling that permits writing logs, and typically the overhead for writing these logs is low.</span></span> <span data-ttu-id="d9286-133">La plupart des bibliothèques de journalisation permettent de consigner différents types de critiques, qui peuvent être réglés au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="d9286-133">Many of the logging libraries provide logging different kinds of criticalities, which can be tuned at run time.</span></span> <span data-ttu-id="d9286-134">Par exemple, la [bibliothèque Serilog](https://serilog.net/) est une bibliothèque de journalisation structurée populaire pour .net qui fournit les niveaux de journalisation suivants :</span><span class="sxs-lookup"><span data-stu-id="d9286-134">For instance, the [Serilog library](https://serilog.net/) is a popular structured logging library for .NET that provides the following logging levels:</span></span>

* <span data-ttu-id="d9286-135">Commentaires</span><span class="sxs-lookup"><span data-stu-id="d9286-135">Verbose</span></span>
* <span data-ttu-id="d9286-136">Débogage</span><span class="sxs-lookup"><span data-stu-id="d9286-136">Debug</span></span>
* <span data-ttu-id="d9286-137">Information</span><span class="sxs-lookup"><span data-stu-id="d9286-137">Information</span></span>
* <span data-ttu-id="d9286-138">Avertissement</span><span class="sxs-lookup"><span data-stu-id="d9286-138">Warning</span></span>
* <span data-ttu-id="d9286-139">Error</span><span class="sxs-lookup"><span data-stu-id="d9286-139">Error</span></span>
* <span data-ttu-id="d9286-140">Erreur irrécupérable</span><span class="sxs-lookup"><span data-stu-id="d9286-140">Fatal</span></span>

<span data-ttu-id="d9286-141">Ces différents niveaux de journalisation fournissent la granularité de la journalisation.</span><span class="sxs-lookup"><span data-stu-id="d9286-141">These different log levels provide granularity in logging.</span></span> <span data-ttu-id="d9286-142">Lorsque l’application fonctionne correctement en production, elle peut être configurée pour enregistrer uniquement les messages importants.</span><span class="sxs-lookup"><span data-stu-id="d9286-142">When the application is functioning properly in production, it may be configured to only log important messages.</span></span> <span data-ttu-id="d9286-143">Lorsque l’application ne fonctionne pas correctement, le niveau de journalisation peut être augmenté pour que les journaux plus détaillés soient collectés.</span><span class="sxs-lookup"><span data-stu-id="d9286-143">When the application is misbehaving, then the log level can be increased so more verbose logs are gathered.</span></span> <span data-ttu-id="d9286-144">Cela équilibre les performances par rapport à la facilité de débogage.</span><span class="sxs-lookup"><span data-stu-id="d9286-144">This balances performance against ease of debugging.</span></span>

<span data-ttu-id="d9286-145">Les performances élevées des outils de journalisation et le tunability de commentaires doivent inciter les développeurs à se connecter fréquemment.</span><span class="sxs-lookup"><span data-stu-id="d9286-145">The high performance of logging tools and the tunability of verbosity should encourage developers to log frequently.</span></span> <span data-ttu-id="d9286-146">De nombreux favorisent un modèle de journalisation de l’entrée et de la sortie de chaque méthode.</span><span class="sxs-lookup"><span data-stu-id="d9286-146">Many favor a pattern of logging the entry and exit of each method.</span></span> <span data-ttu-id="d9286-147">Cette approche peut sembler excessive, mais il est peu fréquent que les développeurs souhaitent moins de journalisation.</span><span class="sxs-lookup"><span data-stu-id="d9286-147">This approach may sound like overkill, but it's infrequent that developers will wish for less logging.</span></span> <span data-ttu-id="d9286-148">En fait, il n’est pas rare d’effectuer des déploiements dans le seul but d’ajouter la journalisation autour d’une méthode problématique.</span><span class="sxs-lookup"><span data-stu-id="d9286-148">In fact, it's not uncommon to perform deployments for the sole purpose of adding logging around a problematic method.</span></span> <span data-ttu-id="d9286-149">ERR sur le côté de la journalisation trop importante et non trop petit.</span><span class="sxs-lookup"><span data-stu-id="d9286-149">Err on the side of too much logging and not on too little.</span></span> <span data-ttu-id="d9286-150">Certains outils peuvent être utilisés pour fournir automatiquement ce type de journalisation.</span><span class="sxs-lookup"><span data-stu-id="d9286-150">Some tools can be used to automatically provide this kind of logging.</span></span>

<span data-ttu-id="d9286-151">En raison des défis associés à l’utilisation des journaux basés sur des fichiers dans les applications Cloud natives, les journaux centralisés sont préférés.</span><span class="sxs-lookup"><span data-stu-id="d9286-151">Because of the challenges associated with using file-based logs in cloud-native apps, centralized logs are preferred.</span></span> <span data-ttu-id="d9286-152">Les journaux sont collectés par les applications et expédiés à une application de journalisation centralisée qui indexe et stocke les journaux.</span><span class="sxs-lookup"><span data-stu-id="d9286-152">Logs are collected by the applications and shipped to a central logging application which indexes and stores the logs.</span></span> <span data-ttu-id="d9286-153">Cette classe de système peut ingérer des dizaines de gigaoctets de journaux tous les jours.</span><span class="sxs-lookup"><span data-stu-id="d9286-153">This class of system can ingest tens of gigabytes of logs every day.</span></span>

<span data-ttu-id="d9286-154">Il est également utile de suivre certaines pratiques standard lors de la création d’une journalisation qui s’étend sur de nombreux services.</span><span class="sxs-lookup"><span data-stu-id="d9286-154">It's also helpful to follow some standard practices when building logging that spans many services.</span></span> <span data-ttu-id="d9286-155">Par exemple, la génération d’un [ID de corrélation](https://blog.rapid7.com/2016/12/23/the-value-of-correlation-ids/) au début d’une interaction longue, puis son enregistrement dans chaque message associé à cette interaction facilite la recherche de tous les messages associés.</span><span class="sxs-lookup"><span data-stu-id="d9286-155">For instance, generating a [correlation ID](https://blog.rapid7.com/2016/12/23/the-value-of-correlation-ids/) at the start of a lengthy interaction, and then logging it in each message that is related to that interaction, makes it easier to search for all related messages.</span></span> <span data-ttu-id="d9286-156">Il suffit de rechercher un seul message et d’extraire l’ID de corrélation pour trouver tous les messages associés.</span><span class="sxs-lookup"><span data-stu-id="d9286-156">One need only find a single message and extract the correlation ID to find all the related messages.</span></span> <span data-ttu-id="d9286-157">Un autre exemple consiste à s’assurer que le format de journal est le même pour tous les services, quel que soit le langage ou la bibliothèque de journalisation qu’il utilise.</span><span class="sxs-lookup"><span data-stu-id="d9286-157">Another example is ensuring that the log format is the same for every service, whatever the language or logging library it uses.</span></span> <span data-ttu-id="d9286-158">Cette normalisation facilite grandement la lecture des journaux.</span><span class="sxs-lookup"><span data-stu-id="d9286-158">This standardization makes reading logs much easier.</span></span> <span data-ttu-id="d9286-159">La figure 7-4 montre comment une architecture de microservices peut tirer parti de la journalisation centralisée dans le cadre de son flux de travail.</span><span class="sxs-lookup"><span data-stu-id="d9286-159">Figure 7-4 demonstrates how a microservices architecture can leverage centralized logging as part of its workflow.</span></span>

<span data-ttu-id="d9286-160">![Les journaux provenant de différentes sources sont ingérés dans un magasin de journaux centralisé. ](./media/centralized-logging.png)
 **Figure 7-4**.</span><span class="sxs-lookup"><span data-stu-id="d9286-160">![Logs from various sources are ingested into a centralized log store.](./media/centralized-logging.png)
**Figure 7-4**.</span></span> <span data-ttu-id="d9286-161">Les journaux provenant de différentes sources sont ingérés dans un magasin de journaux centralisé.</span><span class="sxs-lookup"><span data-stu-id="d9286-161">Logs from various sources are ingested into a centralized log store.</span></span>

## <a name="challenges-with-detecting-and-responding-to-potential-app-health-issues"></a><span data-ttu-id="d9286-162">Difficultés liées à la détection et à la réponse aux problèmes potentiels d’intégrité des applications</span><span class="sxs-lookup"><span data-stu-id="d9286-162">Challenges with detecting and responding to potential app health issues</span></span>

<span data-ttu-id="d9286-163">Certaines applications ne sont pas stratégiques.</span><span class="sxs-lookup"><span data-stu-id="d9286-163">Some applications aren't mission critical.</span></span> <span data-ttu-id="d9286-164">Ils sont peut-être utilisés en interne uniquement et, lorsqu’un problème survient, l’utilisateur peut contacter l’équipe responsable et l’application peut être redémarrée.</span><span class="sxs-lookup"><span data-stu-id="d9286-164">Maybe they're only used internally, and when a problem occurs, the user can contact the team responsible and the application can be restarted.</span></span> <span data-ttu-id="d9286-165">Toutefois, les clients ont souvent des attentes plus élevées pour les applications qu’ils consomment.</span><span class="sxs-lookup"><span data-stu-id="d9286-165">However, customers often have higher expectations for the applications they consume.</span></span> <span data-ttu-id="d9286-166">Vous devez savoir quand des problèmes se produisent avec votre application *avant que* les utilisateurs ne le fassent, ou avant que les utilisateurs ne vous le notifient.</span><span class="sxs-lookup"><span data-stu-id="d9286-166">You should know when problems occur with your application *before* users do, or before users notify you.</span></span> <span data-ttu-id="d9286-167">Dans le cas contraire, le premier vous en saurez plus sur un problème peut être lorsque vous remarquerez une déluge de réseaux sociaux qui déplacent votre application ou même votre organisation.</span><span class="sxs-lookup"><span data-stu-id="d9286-167">Otherwise, the first you know about a problem may be when you notice an angry deluge of social media posts deriding your application or even your organization.</span></span>

<span data-ttu-id="d9286-168">Voici quelques scénarios que vous devrez peut-être envisager :</span><span class="sxs-lookup"><span data-stu-id="d9286-168">Some scenarios you may need to consider include:</span></span>

- <span data-ttu-id="d9286-169">L’un des services de votre application continue à échouer et à redémarrer, ce qui entraîne des réponses lentes intermittentes.</span><span class="sxs-lookup"><span data-stu-id="d9286-169">One service in your application keeps failing and restarting, resulting in intermittent slow responses.</span></span>
- <span data-ttu-id="d9286-170">À un moment donné de la journée, le temps de réponse de votre application est lent.</span><span class="sxs-lookup"><span data-stu-id="d9286-170">At some times of the day, your application's response time is slow.</span></span>
- <span data-ttu-id="d9286-171">Après un déploiement récent, la charge sur la base de données a triple.</span><span class="sxs-lookup"><span data-stu-id="d9286-171">After a recent deployment, load on the database has tripled.</span></span>

<span data-ttu-id="d9286-172">Correctement implémentés, la surveillance peut vous informer des conditions qui peuvent entraîner des problèmes, vous permettant de répondre aux conditions sous-jacentes avant qu’elles n’entraînent un impact significatif sur l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d9286-172">Implemented properly, monitoring can let you know about conditions that will lead to problems, letting you address underlying conditions before they result in any significant user impact.</span></span>

### <a name="monitoring-cloud-native-apps"></a><span data-ttu-id="d9286-173">Surveillance des applications Cloud natives</span><span class="sxs-lookup"><span data-stu-id="d9286-173">Monitoring cloud-native apps</span></span>

<span data-ttu-id="d9286-174">Certains systèmes de journalisation centralisée prennent le rôle supplémentaire de collecter les données de télémétrie en dehors des journaux purs.</span><span class="sxs-lookup"><span data-stu-id="d9286-174">Some centralized logging systems take on an additional role of collecting telemetry outside of pure logs.</span></span> <span data-ttu-id="d9286-175">Ils peuvent collecter des mesures, telles que le temps nécessaire à l’exécution d’une requête de base de données, le temps de réponse moyen d’un serveur Web, et même les moyennes de charge du processeur et la sollicitation de la mémoire, comme indiqué par le système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="d9286-175">They can collect metrics, such as time to run a database query, average response time from a web server, and even CPU load averages and memory pressure as reported by the operating system.</span></span> <span data-ttu-id="d9286-176">Conjointement avec les journaux, ces systèmes peuvent fournir une vue holistique de l’intégrité des nœuds du système et de l’application dans son ensemble.</span><span class="sxs-lookup"><span data-stu-id="d9286-176">In conjunction with the logs, these systems can provide a holistic view of the health of nodes in the system and the application as a whole.</span></span>

<span data-ttu-id="d9286-177">Les fonctionnalités de collecte des mesures des outils de surveillance peuvent également être alimentées manuellement à partir de l’application.</span><span class="sxs-lookup"><span data-stu-id="d9286-177">The metric-gathering capabilities of the monitoring tools can also be fed manually from within the application.</span></span> <span data-ttu-id="d9286-178">Les flux d’activités qui présentent un intérêt particulier, tels que les nouveaux utilisateurs qui s’inscrivent ou les commandes en cours de placement, peuvent être instrumentés de telle sorte qu’ils incrémentent un compteur dans le système de surveillance central.</span><span class="sxs-lookup"><span data-stu-id="d9286-178">Business flows that are of particular interest such as new users signing up or orders being placed, may be instrumented such that they increment a counter in the central monitoring system.</span></span> <span data-ttu-id="d9286-179">Cela déverrouille les outils de surveillance pour non seulement surveiller l’intégrité de l’application, mais aussi l’intégrité de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="d9286-179">This unlocks the monitoring tools to not only monitor the health of the application but the health of the business.</span></span>

<span data-ttu-id="d9286-180">Les requêtes peuvent être créées dans les outils d’agrégation de journaux pour rechercher certaines statistiques ou certains modèles, qui peuvent ensuite être affichés sous forme graphique, sur des tableaux de bord personnalisés.</span><span class="sxs-lookup"><span data-stu-id="d9286-180">Queries can be constructed in the log aggregation tools to look for certain statistics or patterns, which can then be displayed in graphical form, on custom dashboards.</span></span> <span data-ttu-id="d9286-181">Souvent, les équipes investiront dans des affichages de grande taille et montés sur un mur qui font pivoter les statistiques relatives à une application.</span><span class="sxs-lookup"><span data-stu-id="d9286-181">Frequently, teams will invest in large, wall-mounted displays that rotate through the statistics related to an application.</span></span> <span data-ttu-id="d9286-182">De cette façon, il est facile de voir les problèmes à mesure qu’ils se produisent.</span><span class="sxs-lookup"><span data-stu-id="d9286-182">This way, it's simple to see the problems as they occur.</span></span>

<span data-ttu-id="d9286-183">Les outils de surveillance Cloud-Native offrent une télémétrie en temps réel et des informations sur les applications, qu’il s’agisse d’applications monolithiques monoprocessus ou d’architectures de microservices distribuées.</span><span class="sxs-lookup"><span data-stu-id="d9286-183">Cloud-native monitoring tools provide real-time telemetry and insight into apps regardless of whether they're single-process monolithic applications or distributed microservice architectures.</span></span> <span data-ttu-id="d9286-184">Elles incluent des outils qui permettent la collecte de données à partir de l’application, ainsi que des outils permettant d’interroger et d’afficher des informations sur l’intégrité de l’application.</span><span class="sxs-lookup"><span data-stu-id="d9286-184">They include tools that allow collection of data from the app as well as tools for querying and displaying information about the app's health.</span></span>

## <a name="challenges-with-reacting-to-critical-problems-in-cloud-native-apps"></a><span data-ttu-id="d9286-185">Défis liés à la réaction aux problèmes critiques dans les applications Cloud natives</span><span class="sxs-lookup"><span data-stu-id="d9286-185">Challenges with reacting to critical problems in cloud-native apps</span></span>

<span data-ttu-id="d9286-186">Si vous devez réagir à des problèmes avec votre application, vous avez besoin d’un moyen d’alerter le personnel approprié.</span><span class="sxs-lookup"><span data-stu-id="d9286-186">If you need to react to problems with your application, you need some way to alert the right personnel.</span></span> <span data-ttu-id="d9286-187">Il s’agit du troisième modèle d’observabilité des applications natives du Cloud qui dépend de la journalisation et de la surveillance.</span><span class="sxs-lookup"><span data-stu-id="d9286-187">This is the third cloud-native application observability pattern and depends on logging and monitoring.</span></span> <span data-ttu-id="d9286-188">Votre application doit se connecter pour permettre le diagnostic des problèmes et, dans certains cas, pour alimenter les outils de surveillance.</span><span class="sxs-lookup"><span data-stu-id="d9286-188">Your application needs to have logging in place to allow problems to be diagnosed, and in some cases to feed into monitoring tools.</span></span> <span data-ttu-id="d9286-189">Il a besoin d’une analyse pour agréger les mesures d’application et les données d’intégrité au même endroit.</span><span class="sxs-lookup"><span data-stu-id="d9286-189">It needs monitoring to aggregate application metrics and health data in one place.</span></span> <span data-ttu-id="d9286-190">Une fois que cela a été établi, des règles peuvent être créées pour déclencher des alertes lorsque certaines métriques sont situées en dehors des niveaux acceptables.</span><span class="sxs-lookup"><span data-stu-id="d9286-190">Once this has been established, rules can be created that will trigger alerts when certain metrics fall outside of acceptable levels.</span></span>

<span data-ttu-id="d9286-191">En règle générale, les alertes sont superposées sur la surveillance de telle sorte que certaines conditions déclenchent des alertes appropriées pour notifier les membres de l’équipe des problèmes urgents.</span><span class="sxs-lookup"><span data-stu-id="d9286-191">Generally, alerts are layered on top of monitoring such that certain conditions trigger appropriate alerts to notify team members of urgent problems.</span></span> <span data-ttu-id="d9286-192">Voici quelques scénarios qui peuvent nécessiter des alertes :</span><span class="sxs-lookup"><span data-stu-id="d9286-192">Some scenarios that may require alerts include:</span></span>

- <span data-ttu-id="d9286-193">L’un des services de votre application ne répond pas après 1 minute de temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="d9286-193">One of your application's services is not responding after 1 minute of downtime.</span></span>
- <span data-ttu-id="d9286-194">Votre application renvoie des réponses HTTP ayant échoué à plus de 1% des demandes.</span><span class="sxs-lookup"><span data-stu-id="d9286-194">Your application is returning unsuccessful HTTP responses to more than 1% of requests.</span></span>
- <span data-ttu-id="d9286-195">Le temps de réponse moyen de votre application pour les points de terminaison de clé dépasse 2000 ms.</span><span class="sxs-lookup"><span data-stu-id="d9286-195">Your application's average response time for key endpoints exceeds 2000 ms.</span></span>

### <a name="alerts-in-cloud-native-apps"></a><span data-ttu-id="d9286-196">Alertes dans les applications Cloud natives</span><span class="sxs-lookup"><span data-stu-id="d9286-196">Alerts in cloud-native apps</span></span>

<span data-ttu-id="d9286-197">Vous pouvez élaborer des requêtes sur les outils de surveillance pour rechercher des conditions d’échec connues.</span><span class="sxs-lookup"><span data-stu-id="d9286-197">You can craft queries against the monitoring tools to look for known failure conditions.</span></span> <span data-ttu-id="d9286-198">Par exemple, les requêtes peuvent parcourir les journaux entrants pour rechercher des indications du code d’état HTTP 500, qui indique un problème sur un serveur Web.</span><span class="sxs-lookup"><span data-stu-id="d9286-198">For instance, queries could search through the incoming logs for indications of HTTP status code 500, which indicates a problem on a web server.</span></span> <span data-ttu-id="d9286-199">Dès que l’une d’entre elles est détectée, un message électronique ou un SMS peut être envoyé au propriétaire du service d’origine, qui peut commencer à examiner.</span><span class="sxs-lookup"><span data-stu-id="d9286-199">As soon as one of these is detected, then an e-mail or an SMS could be sent to the owner of the originating service who can begin to investigate.</span></span>

<span data-ttu-id="d9286-200">En règle générale, toutefois, une seule erreur 500 est insuffisante pour déterminer qu’un problème s’est produit.</span><span class="sxs-lookup"><span data-stu-id="d9286-200">Typically, though, a single 500 error isn't enough to determine that a problem has occurred.</span></span> <span data-ttu-id="d9286-201">Cela peut signifier qu’un utilisateur a mal tapé son mot de passe ou entré des données incorrectes.</span><span class="sxs-lookup"><span data-stu-id="d9286-201">It could mean that a user mistyped their password or entered some malformed data.</span></span> <span data-ttu-id="d9286-202">Les requêtes d’alerte peuvent être conçues pour se déclencher uniquement quand un nombre supérieur au nombre moyen d’erreurs 500 est détecté.</span><span class="sxs-lookup"><span data-stu-id="d9286-202">The alert queries can be crafted to only fire when a larger than average number of 500 errors are detected.</span></span>

<span data-ttu-id="d9286-203">L’un des modèles les plus dangereux des alertes consiste à déclencher un trop grand nombre d’alertes pour les êtres humains à examiner.</span><span class="sxs-lookup"><span data-stu-id="d9286-203">One of the most damaging patterns in alerting is to fire too many alerts for humans to investigate.</span></span> <span data-ttu-id="d9286-204">Les propriétaires de services seront rapidement désensibilisés des erreurs qu’ils ont déjà examinées et jugées sans gravité.</span><span class="sxs-lookup"><span data-stu-id="d9286-204">Service owners will rapidly become desensitized to errors that they've previously investigated and found to be benign.</span></span> <span data-ttu-id="d9286-205">Ensuite, lorsque des erreurs vraies se produisent, elles sont perdues dans le bruit de centaines de faux positifs.</span><span class="sxs-lookup"><span data-stu-id="d9286-205">Then, when true errors occur, they'll be lost in the noise of hundreds of false positives.</span></span> <span data-ttu-id="d9286-206">Le parable du [garçon qui effectué Wolf](https://en.wikipedia.org/wiki/The_Boy_Who_Cried_Wolf) est souvent informé des enfants pour les avertir de ce danger.</span><span class="sxs-lookup"><span data-stu-id="d9286-206">The parable of the [Boy Who Cried Wolf](https://en.wikipedia.org/wiki/The_Boy_Who_Cried_Wolf) is frequently told to children to warn them of this very danger.</span></span> <span data-ttu-id="d9286-207">Il est important de s’assurer que les alertes qui se déclenchent indiquent un problème réel.</span><span class="sxs-lookup"><span data-stu-id="d9286-207">It's important to ensure that the alerts that do fire are indicative of a real problem.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="d9286-208">[Précédent](monitoring-health.md) 
> [Suivant](logging-with-elastic-stack.md)</span><span class="sxs-lookup"><span data-stu-id="d9286-208">[Previous](monitoring-health.md)
[Next](logging-with-elastic-stack.md)</span></span>
