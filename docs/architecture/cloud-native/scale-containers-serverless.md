---
title: Mise à l’échelle des conteneurs et des applications sans serveur
description: Mise à l’échelle des applications Cloud natives avec le service Azure Kubernetes pour répondre à la demande des utilisateurs en augmentant les ressources des ordinateurs individuels ou en augmentant le nombre d’ordinateurs dans un cluster d’applications.
ms.date: 09/23/2019
ms.openlocfilehash: 2d0537fb3ed56beb4eccbf9b8c34a5d87793413b
ms.sourcegitcommit: 55f438d4d00a34b9aca9eedaac3f85590bb11565
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/23/2019
ms.locfileid: "71184798"
---
# <a name="scaling-containers-and-serverless-applications"></a><span data-ttu-id="d8f7d-103">Mise à l’échelle des conteneurs et des applications sans serveur</span><span class="sxs-lookup"><span data-stu-id="d8f7d-103">Scaling containers and serverless applications</span></span>

<span data-ttu-id="d8f7d-104">Il existe deux façons courantes de mettre à l’échelle une application : montée en puissance et montée en charge. Le premier fait référence à l’ajout de fonctionnalités à un seul hôte, tandis que ce dernier fait référence à l’ajout au nombre total d’hôtes.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-104">There are two typical ways to scale an application: scaling up and scaling out. The former refers to adding capabilities to one host, while the latter refers to adding to the total number of hosts.</span></span> <span data-ttu-id="d8f7d-105">Une analogie courante à utiliser pour réfléchir à ce sujet est la façon de vous faire part de vos amis.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-105">A common analogy to use to think about this is how to get yourself and some friends across town.</span></span> <span data-ttu-id="d8f7d-106">S’il s’agit d’un seul ami, vous pouvez passer à votre voiture de course à deux sièges.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-106">If it's just one friend, you could hop into your two-seat race car.</span></span> <span data-ttu-id="d8f7d-107">Mais s’il s’agit de trois ou quatre, vous devrez peut-être utiliser l’un de vos SUVs ou un minivan, pour augmenter la capacité.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-107">But if it's three or four, you might need to take one of your SUVs or a minivan, scaling up to increase capacity.</span></span> <span data-ttu-id="d8f7d-108">Toutefois, lorsque votre nombre total atteint une douzaine ou plus, vous devez probablement prendre plusieurs véhicules (à moins qu’un bus ne le prenne), ce qui démontre le concept de montée en charge en ajoutant des instances supplémentaires (dans ce cas, davantage de véhicules).</span><span class="sxs-lookup"><span data-stu-id="d8f7d-108">When your total number jumps up to a dozen or more, though, you probably need to take multiple vehicles (unless someone drives a bus), which demonstrates the concept of scaling out by adding more instances (in this case, more vehicles).</span></span> <span data-ttu-id="d8f7d-109">Voyons comment cela s’applique à nos applications.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-109">Let's see how this applies to our applications.</span></span>

## <a name="the-simple-solution-scaling-up"></a><span data-ttu-id="d8f7d-110">Solution simple : montée en puissance</span><span class="sxs-lookup"><span data-stu-id="d8f7d-110">The simple solution: scaling up</span></span>

<span data-ttu-id="d8f7d-111">Le processus de mise à niveau des serveurs existants pour leur accorder davantage de ressources (processeur, mémoire, vitesse d’e/s disque, vitesse d’e/s réseau) est appelé *montée*en puissance.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-111">The process of upgrading existing servers to give them more resources (CPU, memory, disk I/O speed, network I/O speed) is known as *scaling up*.</span></span> <span data-ttu-id="d8f7d-112">Dans les applications Cloud natives, la montée en puissance ne fait généralement pas référence à l’achat et à l’installation de matériel réel sur les machines physiques, si bien que le choix d’un plan plus performant dans une liste d’options disponibles.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-112">In cloud-native applications, scaling up doesn't typically refer to purchasing and installing actual hardware on physical machines so much as choosing a more capable plan from a list of options available.</span></span> <span data-ttu-id="d8f7d-113">Les applications Cloud natives évoluent généralement en modifiant la taille de machine virtuelle (VM) utilisée pour héberger les nœuds individuels dans leur pool de nœuds Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-113">Cloud-native apps typically scale up by modifying the virtual machine (VM) size used to host the individual nodes in their Kubernetes node pool.</span></span> <span data-ttu-id="d8f7d-114">Les concepts de Kubernetes comme les nœuds, les clusters et les POD sont décrits plus en détail dans [la section suivante](leverage-containers-orchestrators.md).</span><span class="sxs-lookup"><span data-stu-id="d8f7d-114">Kubernetes concepts like nodes, clusters, and pods are described further in [the next section](leverage-containers-orchestrators.md).</span></span> <span data-ttu-id="d8f7d-115">Azure prend en charge un large éventail de tailles de machines virtuelles exécutant [Windows](https://docs.microsoft.com/azure/virtual-machines/windows/sizes?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) et [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/sizes).</span><span class="sxs-lookup"><span data-stu-id="d8f7d-115">Azure supports a wide variety of VM sizes running both [Windows](https://docs.microsoft.com/azure/virtual-machines/windows/sizes?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) and [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/sizes).</span></span> <span data-ttu-id="d8f7d-116">Pour mettre à l’échelle verticalement votre application, créez un nouveau pool de nœuds avec une taille de machine virtuelle de nœud plus grande, puis migrez les charges de travail vers le nouveau pool.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-116">To vertically scale your application, create a new node pool with a larger node VM size and then migrate workloads to the new pool.</span></span> <span data-ttu-id="d8f7d-117">Cela nécessite [plusieurs pools de nœuds pour votre cluster AKS](https://docs.microsoft.com/azure/aks/use-multiple-node-pools), une fonctionnalité actuellement en préversion.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-117">This requires [multiple node pools for your AKS cluster](https://docs.microsoft.com/azure/aks/use-multiple-node-pools), a feature that is currently in preview.</span></span> <span data-ttu-id="d8f7d-118">Les applications sans serveur sont mises à l’échelle en choisissant un [plan Premium](https://docs.microsoft.com/azure/azure-functions/functions-scale) et des tailles d’instance Premium, ou en choisissant un autre plan App service dédié.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-118">Serverless apps scale up by choosing a [premium plan](https://docs.microsoft.com/azure/azure-functions/functions-scale) and premium instance sizes or by choosing a different dedicated app service plan.</span></span>

## <a name="scaling-out-cloud-native-apps"></a><span data-ttu-id="d8f7d-119">Montée en charge des applications Cloud natives</span><span class="sxs-lookup"><span data-stu-id="d8f7d-119">Scaling out cloud-native apps</span></span>

<span data-ttu-id="d8f7d-120">Les applications Cloud natives prennent en charge la montée en puissance parallèle en ajoutant des nœuds ou des Pod supplémentaires aux demandes de service.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-120">Cloud-native apps support scaling out by adding additional nodes or pods to service requests.</span></span> <span data-ttu-id="d8f7d-121">Cela peut être effectué manuellement en ajustant les paramètres de configuration de l’application (par exemple, la [mise à l’échelle d’un pool de nœuds](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)) ou la *mise à l’échelle*automatique.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-121">This can be accomplished manually by adjusting configuration settings for the app (for example, [scaling a node pool](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)), or through *autoscaling*.</span></span> <span data-ttu-id="d8f7d-122">La mise à l’échelle automatique ajuste les ressources utilisées par une application pour répondre à la demande, de la même manière qu’un thermostat répond à la température en faisant appel à des fins de chauffage ou de refroidissement supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-122">Autoscaling adjusts the resources used by an app in order to respond to demand, similar to how a thermostat responds to temperature by calling for additional heating or cooling.</span></span> <span data-ttu-id="d8f7d-123">Lors de l’utilisation de la mise à l’échelle automatique, la mise à l’échelle manuelle est désactivée.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-123">When using autoscaling, manual scaling is disabled.</span></span>

<span data-ttu-id="d8f7d-124">Les clusters AKS peuvent être mis à l’échelle de deux manières:</span><span class="sxs-lookup"><span data-stu-id="d8f7d-124">AKS clusters can scale in one of two ways:</span></span>

- <span data-ttu-id="d8f7d-125">La [mise](https://docs.microsoft.com/azure/aks/cluster-autoscaler) à l’échelle automatique du cluster surveille les gousses qui ne peuvent pas être planifiées sur les nœuds en raison de contraintes de ressources.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-125">The [cluster autoscaler](https://docs.microsoft.com/azure/aks/cluster-autoscaler) watches for pods that can't be scheduled on nodes because of resource constraints.</span></span> <span data-ttu-id="d8f7d-126">Il ajoute des nœuds supplémentaires selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-126">It adds additional nodes as required.</span></span>
- <span data-ttu-id="d8f7d-127">Le module de mise à l’échelle automatique du **Pod horizontal** utilise le serveur de métriques dans un cluster Kubernetes pour surveiller les demandes de ressources des pod.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-127">The **horizontal pod autoscaler** uses the Metrics Server in a Kubernetes cluster to monitor the resource demands of pods.</span></span> <span data-ttu-id="d8f7d-128">Si un service a besoin de davantage de ressources, la mise à l’échelle automatique augmente le nombre de Pod.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-128">If a service needs more resources, the autoscaler increases the number of pods.</span></span>

<span data-ttu-id="d8f7d-129">La figure 3-13 montre la relation entre ces deux services de mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-129">Figure 3-13 shows the relationship between these two scaling services.</span></span>

![Montée en charge d’un plan de App Service.](./media/aks-cluster-autoscaler.png)

<span data-ttu-id="d8f7d-131">**Figure 3-13**.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-131">**Figure 3-13**.</span></span> <span data-ttu-id="d8f7d-132">Montée en charge d’un plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-132">Scaling out an App Service plan.</span></span>

<span data-ttu-id="d8f7d-133">Ces services peuvent également réduire le nombre de blocs ou de nœuds en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-133">These services can also reduce the number of pods or nodes as needed.</span></span> <span data-ttu-id="d8f7d-134">Ces deux services peuvent fonctionner ensemble et sont souvent déployés ensemble dans un cluster.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-134">These two services can work together and are often deployed together in a cluster.</span></span> <span data-ttu-id="d8f7d-135">Lorsqu’il est combiné, le module de mise à l’échelle automatique du Pod horizontal est axé sur l’exécution du nombre de gousses requis pour répondre à la demande de l’application.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-135">When combined, the horizontal pod autoscaler is focused on running the number of pods required to meet application demand.</span></span> <span data-ttu-id="d8f7d-136">La mise à l’échelle automatique du cluster est axée sur l’exécution du nombre de nœuds requis pour prendre en charge les Pod planifiés.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-136">The cluster autoscaler is focused on running the number of nodes required to support the scheduled pods.</span></span>

### <a name="scaling-azure-functions"></a><span data-ttu-id="d8f7d-137">Azure Functions de la mise à l’échelle</span><span class="sxs-lookup"><span data-stu-id="d8f7d-137">Scaling Azure Functions</span></span>

<span data-ttu-id="d8f7d-138">Azure Functions prend en charge automatiquement la montée en charge. Le plan de consommation par défaut ajoute (et supprime) des ressources de manière dynamique en fonction du nombre d’événements de déclenchement entrants.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-138">Azure Functions automatically supports scaling out. The default consumption plan adds (and removes) resources dynamically based on the number of triggering events coming in.</span></span> <span data-ttu-id="d8f7d-139">Vous êtes facturé uniquement pour les ressources de calcul utilisées lorsque vos fonctions sont exécutées en fonction du nombre d’exécutions, de la durée d’exécution et de la mémoire utilisés.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-139">You're only charged for compute resources being used when your functions are running based on the number of executions, execution time, and memory used.</span></span> <span data-ttu-id="d8f7d-140">À l’aide du plan Premium, vous bénéficiez de ces mêmes fonctionnalités, mais vous pouvez également contrôler les tailles d’instance utilisées, faire en sorte que les instances soient déjà préinitialisées (pour éviter les retards de démarrage à froid) et configurer des machines virtuelles dédiées sur lesquelles exécuter vos fonctions.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-140">Using the premium plan, you get these same features but you can also control the instance sizes that are used, have instances already warmed up (to avoid cold start delays), and configure dedicated VMs on which to run your functions.</span></span> <span data-ttu-id="d8f7d-141">Alors que la configuration par défaut doit fournir une solution économique et évolutive pour la plupart des applications, l’option Premium permet aux développeurs de bénéficier d’une plus grande flexibilité pour les exigences de Azure Functions personnalisées.</span><span class="sxs-lookup"><span data-stu-id="d8f7d-141">While the default configuration should provide an economical and scalable solution for most apps, the premium option allows developers flexibility for custom Azure Functions requirements.</span></span>

## <a name="references"></a><span data-ttu-id="d8f7d-142">Références</span><span class="sxs-lookup"><span data-stu-id="d8f7d-142">References</span></span>

- [<span data-ttu-id="d8f7d-143">AKS plusieurs pools de nœuds</span><span class="sxs-lookup"><span data-stu-id="d8f7d-143">AKS Multiple Node Pools</span></span>](https://docs.microsoft.com/azure/aks/use-multiple-node-pools)
- [<span data-ttu-id="d8f7d-144">Mise à l’échelle automatique du cluster AKS</span><span class="sxs-lookup"><span data-stu-id="d8f7d-144">AKS Cluster Autoscaler</span></span>](https://docs.microsoft.com/azure/aks/cluster-autoscaler)
- [<span data-ttu-id="d8f7d-145">Tutoriel : Mettre à l’échelle des applications dans AKS</span><span class="sxs-lookup"><span data-stu-id="d8f7d-145">Tutorial: Scale applications in AKS</span></span>](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale)
- [<span data-ttu-id="d8f7d-146">Mise à l’échelle et hébergement Azure Functions</span><span class="sxs-lookup"><span data-stu-id="d8f7d-146">Azure Functions scale and hosting</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-scale)

>[!div class="step-by-step"]
><span data-ttu-id="d8f7d-147">[Précédent](deploy-containers-azure.md)
>[Suivant](other-deployment-options.md)</span><span class="sxs-lookup"><span data-stu-id="d8f7d-147">[Previous](deploy-containers-azure.md)
[Next](other-deployment-options.md)</span></span>
