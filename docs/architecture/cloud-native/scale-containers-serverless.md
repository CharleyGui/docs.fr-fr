---
title: Mise à l'échelle de conteneurs et d’applications serverless
description: Mise à l’échelle d’applications Cloud natives avec le service Azure Kubernetes pour répondre à la demande de l’utilisateur.
ms.date: 05/13/2020
ms.openlocfilehash: a5e1e8df785fd08901d9be41c0a06db35e09296b
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/19/2020
ms.locfileid: "83613718"
---
# <a name="scaling-containers-and-serverless-applications"></a><span data-ttu-id="8b697-103">Mise à l'échelle de conteneurs et d’applications serverless</span><span class="sxs-lookup"><span data-stu-id="8b697-103">Scaling containers and serverless applications</span></span>

<span data-ttu-id="8b697-104">Il existe deux façons de mettre à l’échelle une application. Le premier fait référence à l’ajout de capacité à une ressource unique, tandis que le second fait référence à l’ajout de ressources supplémentaires pour augmenter la capacité.</span><span class="sxs-lookup"><span data-stu-id="8b697-104">There are two ways to scale an application: up or out. The former refers to adding capacity to a single resource, while the latter refers to adding more resources to increase capacity.</span></span>

## <a name="the-simple-solution-scaling-up"></a><span data-ttu-id="8b697-105">Solution simple : montée en puissance</span><span class="sxs-lookup"><span data-stu-id="8b697-105">The simple solution: scaling up</span></span>

<span data-ttu-id="8b697-106">La mise à niveau d’un serveur hôte existant avec augmentation du processeur, de la mémoire, de la vitesse d’e/s disque et de la vitesse d’e/s réseau est appelée *montée*en puissance.</span><span class="sxs-lookup"><span data-stu-id="8b697-106">Upgrading an existing host server with increased CPU, memory, disk I/O speed, and network I/O speed is known as *scaling up*.</span></span> <span data-ttu-id="8b697-107">La montée en puissance d’une application Cloud Native implique de choisir des ressources plus performantes du fournisseur du Cloud.</span><span class="sxs-lookup"><span data-stu-id="8b697-107">Scaling up a cloud-native application involves choosing more capable resources from the cloud vendor.</span></span> <span data-ttu-id="8b697-108">Par exemple, vous pouvez créer un pool de nœuds avec des machines virtuelles plus volumineuses dans votre cluster Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="8b697-108">For example, you can a new node pool with larger VMs in your Kubernetes cluster.</span></span> <span data-ttu-id="8b697-109">Ensuite, migrez vos services en conteneur vers le nouveau pool.</span><span class="sxs-lookup"><span data-stu-id="8b697-109">Then, migrate your containerized services to the new pool.</span></span>

<span data-ttu-id="8b697-110">Les applications sans serveur sont mises à l’échelle en choisissant le [plan fonctions Premium](https://docs.microsoft.com/azure/azure-functions/functions-scale) ou tailles d’instance Premium à partir d’un plan App service dédié.</span><span class="sxs-lookup"><span data-stu-id="8b697-110">Serverless apps scale up by choosing the [premium Functions plan](https://docs.microsoft.com/azure/azure-functions/functions-scale) or premium instance sizes from a dedicated app service plan.</span></span>

## <a name="scaling-out-cloud-native-apps"></a><span data-ttu-id="8b697-111">Montée en charge des applications Cloud natives</span><span class="sxs-lookup"><span data-stu-id="8b697-111">Scaling out cloud-native apps</span></span>

<span data-ttu-id="8b697-112">Les applications Cloud natives subissent souvent des fluctuations importantes de la demande et requièrent une mise à l’échelle à l’avis d’un moment.</span><span class="sxs-lookup"><span data-stu-id="8b697-112">Cloud-native applications often experience large fluctuations in demand and require scale on a moment's notice.</span></span> <span data-ttu-id="8b697-113">Ils privilégient la montée en charge. La montée en charge est effectuée horizontalement en ajoutant des ordinateurs supplémentaires (appelés nœuds) ou des instances d’application à un cluster existant.</span><span class="sxs-lookup"><span data-stu-id="8b697-113">They favor scaling out. Scaling out is done horizontally by adding additional machines (called nodes) or application instances to an existing cluster.</span></span> <span data-ttu-id="8b697-114">Dans Kubernetes, vous pouvez mettre à l’échelle manuellement en ajustant les paramètres de configuration de l’application (par exemple, en [mettant à l’échelle un pool de nœuds](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)) ou en passant par la mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="8b697-114">In Kubernetes, you can scale manually by adjusting configuration settings for the app (for example, [scaling a node pool](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)), or through autoscaling.</span></span>

<span data-ttu-id="8b697-115">Les clusters AKS peuvent être mis à l’échelle de deux manières :</span><span class="sxs-lookup"><span data-stu-id="8b697-115">AKS clusters can autoscale in one of two ways:</span></span>

<span data-ttu-id="8b697-116">Tout d’abord, le module de mise à l’échelle automatique du [Pod horizontal](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale#autoscale-pods) surveille la demande des ressources et met automatiquement à l’échelle vos réplicas Pod pour les satisfaire.</span><span class="sxs-lookup"><span data-stu-id="8b697-116">First, the [Horizontal Pod Autoscaler](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale#autoscale-pods) monitors resource demand and automatically scales your POD replicas to meet it.</span></span> <span data-ttu-id="8b697-117">Lorsque le trafic augmente, des réplicas supplémentaires sont automatiquement approvisionnés pour monter en charge vos services.</span><span class="sxs-lookup"><span data-stu-id="8b697-117">When traffic increases, additional replicas are automatically provisioned to scale out your services.</span></span> <span data-ttu-id="8b697-118">De même, lorsque la demande diminue, elles sont supprimées pour mettre à l’échelle vos services.</span><span class="sxs-lookup"><span data-stu-id="8b697-118">Likewise, when demand decreases, they're removed to scale-in your services.</span></span> <span data-ttu-id="8b697-119">Vous définissez la mesure sur laquelle mettre à l’échelle, par exemple l’utilisation de l’UC.</span><span class="sxs-lookup"><span data-stu-id="8b697-119">You define the metric on which to scale, for example, CPU usage.</span></span> <span data-ttu-id="8b697-120">Vous pouvez également spécifier le nombre minimal et le nombre maximal de réplicas à exécuter.</span><span class="sxs-lookup"><span data-stu-id="8b697-120">You can also specify the minimum and maximum number of replicas to run.</span></span> <span data-ttu-id="8b697-121">AKS surveille cette mesure et la met à l’échelle en conséquence.</span><span class="sxs-lookup"><span data-stu-id="8b697-121">AKS monitors that metric and scales accordingly.</span></span>

<span data-ttu-id="8b697-122">Ensuite, la fonctionnalité de mise à l’échelle automatique du [cluster AKS](https://docs.microsoft.com/azure/aks/cluster-autoscaler) vous permet de mettre automatiquement à l’échelle des nœuds de calcul dans un cluster Kubernetes pour répondre à la demande.</span><span class="sxs-lookup"><span data-stu-id="8b697-122">Next, the [AKS Cluster Autoscaler](https://docs.microsoft.com/azure/aks/cluster-autoscaler) feature enables you to automatically scale compute nodes across a Kubernetes cluster to meet demand.</span></span> <span data-ttu-id="8b697-123">Avec elle, vous pouvez ajouter automatiquement de nouvelles machines virtuelles au groupe de machines virtuelles identiques Azure sous-jacent chaque fois que la capacité de calcul est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="8b697-123">With it, you can automatically add new VMs to the underlying Azure Virtual Machine Scale Set whenever more compute capacity of is required.</span></span> <span data-ttu-id="8b697-124">Elle supprime également les nœuds quand ils ne sont plus nécessaires.</span><span class="sxs-lookup"><span data-stu-id="8b697-124">It also removes nodes when no longer required.</span></span>

<span data-ttu-id="8b697-125">La figure 3-13 montre la relation entre ces deux services de mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="8b697-125">Figure 3-13 shows the relationship between these two scaling services.</span></span>

![Montée en charge d’un plan de App Service.](./media/aks-cluster-autoscaler.png)

<span data-ttu-id="8b697-127">**Figure 3-13**.</span><span class="sxs-lookup"><span data-stu-id="8b697-127">**Figure 3-13**.</span></span> <span data-ttu-id="8b697-128">Montée en charge d’un plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="8b697-128">Scaling out an App Service plan.</span></span>

<span data-ttu-id="8b697-129">En travaillant ensemble, veillez à ce que le nombre optimal d’instances de conteneur et de nœuds de calcul prenne en charge la demande fluctuante.</span><span class="sxs-lookup"><span data-stu-id="8b697-129">Working together, both ensure an optimal number of container instances and compute nodes to support fluctuating demand.</span></span> <span data-ttu-id="8b697-130">Le module de mise à l’échelle automatique du Pod horizontal optimise le nombre de gousses requis.</span><span class="sxs-lookup"><span data-stu-id="8b697-130">The horizontal pod autoscaler optimizes the number of pods required.</span></span> <span data-ttu-id="8b697-131">La mise à l’échelle automatique du cluster optimise le nombre de nœuds requis.</span><span class="sxs-lookup"><span data-stu-id="8b697-131">The cluster autoscaler optimizes the number of nodes required.</span></span>

### <a name="scaling-azure-functions"></a><span data-ttu-id="8b697-132">Mise à l'échelle des fonctions Azure</span><span class="sxs-lookup"><span data-stu-id="8b697-132">Scaling Azure Functions</span></span>

<span data-ttu-id="8b697-133">Azure Functions montée en charge automatiquement à la demande.</span><span class="sxs-lookup"><span data-stu-id="8b697-133">Azure Functions automatically scale out upon demand.</span></span> <span data-ttu-id="8b697-134">Les ressources du serveur sont allouées et supprimées dynamiquement en fonction du nombre d’événements déclenchés.</span><span class="sxs-lookup"><span data-stu-id="8b697-134">Server resources are dynamically allocated and removed based on the number of triggered events.</span></span> <span data-ttu-id="8b697-135">Vous êtes facturé uniquement pour les ressources de calcul consommées lorsque vos fonctions sont exécutées.</span><span class="sxs-lookup"><span data-stu-id="8b697-135">You're only charged for compute resources consumed when your functions run.</span></span> <span data-ttu-id="8b697-136">La facturation est basée sur le nombre d’exécutions, la durée d’exécution et la mémoire utilisée.</span><span class="sxs-lookup"><span data-stu-id="8b697-136">Billing is based upon the number of executions, execution time, and memory used.</span></span>

<span data-ttu-id="8b697-137">Bien que le plan de consommation par défaut offre une solution économique et évolutive pour la plupart des applications, l’option Premium permet aux développeurs de disposer d’une flexibilité pour les exigences de Azure Functions personnalisées.</span><span class="sxs-lookup"><span data-stu-id="8b697-137">While the default consumption plan provides an economical and scalable solution for most apps, the premium option allows developers flexibility for custom Azure Functions requirements.</span></span> <span data-ttu-id="8b697-138">La mise à niveau vers le plan Premium permet de contrôler les tailles d’instance, les instances préchauffées (pour éviter les retards de démarrage à froid) et les machines virtuelles dédiées.</span><span class="sxs-lookup"><span data-stu-id="8b697-138">Upgrading to the premium plan provides control over instance sizes, pre-warmed instances (to avoid cold start delays), and dedicated VMs.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="8b697-139">[Précédent](deploy-containers-azure.md) 
> [Suivant](other-deployment-options.md)</span><span class="sxs-lookup"><span data-stu-id="8b697-139">[Previous](deploy-containers-azure.md)
[Next](other-deployment-options.md)</span></span>
