---
title: Sécurité Azure pour les applications cloud-native
description: Architecting Cloud Native .NET Apps for Azure (fr) Sécurité Azure pour les applications natives Cloud
ms.date: 06/30/2019
ms.openlocfilehash: 13b5ad7a883a83014913fa0a6a020610c28c524f
ms.sourcegitcommit: e3cbf26d67f7e9286c7108a2752804050762d02d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/09/2020
ms.locfileid: "80989140"
---
# <a name="azure-security-for-cloud-native-apps"></a><span data-ttu-id="9147d-103">Sécurité Azure pour les applications cloud-native</span><span class="sxs-lookup"><span data-stu-id="9147d-103">Azure security for cloud-native apps</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="9147d-104">Les applications cloud-natives peuvent être à la fois plus faciles et plus difficiles à sécuriser que les applications traditionnelles.</span><span class="sxs-lookup"><span data-stu-id="9147d-104">Cloud-native applications can be both easier and more difficult to secure than traditional applications.</span></span> <span data-ttu-id="9147d-105">En revanche, vous devez sécuriser des applications plus petites et consacrer plus d’énergie pour construire l’infrastructure de sécurité.</span><span class="sxs-lookup"><span data-stu-id="9147d-105">On the downside, you need to secure more smaller applications and dedicate more energy to build out the security infrastructure.</span></span> <span data-ttu-id="9147d-106">La nature hétérogène des langages et des styles de programmation dans la plupart des déploiements de services signifie également que vous devez accorder plus d’attention aux bulletins de sécurité de nombreux fournisseurs différents.</span><span class="sxs-lookup"><span data-stu-id="9147d-106">The heterogeneous nature of programming languages and styles in most service deployments also means you need to pay more attention to security bulletins from many different providers.</span></span>

<span data-ttu-id="9147d-107">D’un autre côté, les petits services, chacun avec son propre magasin de données, limitent la portée d’une attaque.</span><span class="sxs-lookup"><span data-stu-id="9147d-107">On the flip side, smaller services, each with their own data store, limit the scope of an attack.</span></span> <span data-ttu-id="9147d-108">Si un attaquant compromet un système, il est probablement plus difficile pour l’attaquant de faire le saut vers un autre système qu’il ne l’est dans une application monolithique.</span><span class="sxs-lookup"><span data-stu-id="9147d-108">If an attacker compromises one system, it's probably more difficult for the attacker to make the jump to another system than it is in a monolithic application.</span></span> <span data-ttu-id="9147d-109">Les limites des processus sont des limites solides.</span><span class="sxs-lookup"><span data-stu-id="9147d-109">Process boundaries are strong boundaries.</span></span> <span data-ttu-id="9147d-110">En outre, si une base de données de sauvegarde fuit, alors les dommages sont plus limités, que cette base de données ne contient qu’un sous-ensemble de données et est peu susceptible de contenir des données personnelles.</span><span class="sxs-lookup"><span data-stu-id="9147d-110">Also, if a database backup leaks, then the damage is more limited, as that database contains only a subset of data and is unlikely to contain personal data.</span></span>

## <a name="threat-modeling"></a><span data-ttu-id="9147d-111">Modélisation des menaces</span><span class="sxs-lookup"><span data-stu-id="9147d-111">Threat modeling</span></span>

<span data-ttu-id="9147d-112">Peu importe si les avantages l’emportent sur les inconvénients des applications cloud-natives, le même état d’esprit holistique de sécurité doit être suivi.</span><span class="sxs-lookup"><span data-stu-id="9147d-112">No matter if the advantages outweigh the disadvantages of cloud-native applications, the same holistic security mindset must be followed.</span></span> <span data-ttu-id="9147d-113">La sécurité et la sécurité de la pensée doivent faire partie de chaque étape de l’histoire du développement et des opérations.</span><span class="sxs-lookup"><span data-stu-id="9147d-113">Security and secure thinking must be part of every step of the development and operations story.</span></span> <span data-ttu-id="9147d-114">Lors de la planification d’une demande, posez des questions telles que :</span><span class="sxs-lookup"><span data-stu-id="9147d-114">When planning an application ask questions like:</span></span>

- <span data-ttu-id="9147d-115">Quel serait l’impact de la perte de ces données?</span><span class="sxs-lookup"><span data-stu-id="9147d-115">What would be the impact of this data being lost?</span></span>
- <span data-ttu-id="9147d-116">Comment pouvons-nous limiter les dommages causés par l’injection de données mauvaises dans ce service ?</span><span class="sxs-lookup"><span data-stu-id="9147d-116">How can we limit the damage from bad data being injected into this service?</span></span>
- <span data-ttu-id="9147d-117">Qui devrait avoir accès à ces données?</span><span class="sxs-lookup"><span data-stu-id="9147d-117">Who should have access to this data?</span></span>
- <span data-ttu-id="9147d-118">Existe-t-il des politiques de vérification concernant le processus d’élaboration et de mise en œuvre?</span><span class="sxs-lookup"><span data-stu-id="9147d-118">Are there auditing policies in place around the development and release process?</span></span>

<span data-ttu-id="9147d-119">Toutes ces questions font partie d’un processus appelé [modélisation des menaces](https://docs.microsoft.com/azure/security/azure-security-threat-modeling-tool).</span><span class="sxs-lookup"><span data-stu-id="9147d-119">All these questions are part of a process called [threat modeling](https://docs.microsoft.com/azure/security/azure-security-threat-modeling-tool).</span></span> <span data-ttu-id="9147d-120">Ce processus tente de répondre à la question de savoir quelles sont les menaces qui pèsent sur le système, la probabilité que les menaces soient et les dommages potentiels qu’elles en causent.</span><span class="sxs-lookup"><span data-stu-id="9147d-120">This process tries to answer the question of what threats there are to the system, how likely the threats are, and the potential damage from them.</span></span>

<span data-ttu-id="9147d-121">Une fois que la liste des menaces a été établie, vous devez décider si elles valent la peine d’être atténuées.</span><span class="sxs-lookup"><span data-stu-id="9147d-121">Once the list of threats has been established, you need to decide whether they're worth mitigating.</span></span> <span data-ttu-id="9147d-122">Parfois, une menace est si peu probable et coûteuse à planifier pour qu’il ne vaut pas la peine de dépenser de l’énergie sur elle.</span><span class="sxs-lookup"><span data-stu-id="9147d-122">Sometimes a threat is so unlikely and expensive to plan for that it isn't worth spending energy on it.</span></span> <span data-ttu-id="9147d-123">Par exemple, un acteur au niveau de l’État pourrait injecter des changements dans la conception d’un processus qui est utilisé par des millions d’appareils.</span><span class="sxs-lookup"><span data-stu-id="9147d-123">For instance, some state level actor could inject changes into the design of a process that is used by millions of devices.</span></span> <span data-ttu-id="9147d-124">Maintenant, au lieu d’exécuter un certain morceau de code dans [l’anneau 3](https://en.wikipedia.org/wiki/Protection_ring), ce code est exécuté dans l’anneau 0.</span><span class="sxs-lookup"><span data-stu-id="9147d-124">Now, instead of running a certain piece of code in [Ring 3](https://en.wikipedia.org/wiki/Protection_ring), that code is run in Ring 0.</span></span> <span data-ttu-id="9147d-125">Cela permet un exploit qui peut contourner l’hyperviseur et exécuter le code d’attaque sur les machines en métal nu, permettant des attaques sur toutes les machines virtuelles qui fonctionnent sur ce matériel.</span><span class="sxs-lookup"><span data-stu-id="9147d-125">This allows an exploit that can bypass the hypervisor and run the attack code on the bare metal machines, allowing attacks on all the virtual machines that are running on that hardware.</span></span>

<span data-ttu-id="9147d-126">Les processeurs modifiés sont difficiles à détecter sans microscope et une connaissance avancée de la conception sur le silicium de ce processeur.</span><span class="sxs-lookup"><span data-stu-id="9147d-126">The altered processors are difficult to detect without a microscope and advanced knowledge of the on silicon design of that processor.</span></span> <span data-ttu-id="9147d-127">Ce scénario est peu susceptible de se produire et coûteux à atténuer, donc probablement aucun modèle de menace ne recommanderait de construire la protection d’exploitation pour elle.</span><span class="sxs-lookup"><span data-stu-id="9147d-127">This scenario is unlikely to happen and expensive to mitigate, so probably no threat model would recommend building exploit protection for it.</span></span>

<span data-ttu-id="9147d-128">Les menaces les plus probables, `Id` telles que les contrôles `Id=2` `Id=3` d’accès cassés permettant des attaques par incrémentation (remplacer par l’injection SQL) ou SQL, sont plus attrayantes pour construire des protections contre.</span><span class="sxs-lookup"><span data-stu-id="9147d-128">More likely threats, such as broken access controls permitting `Id` incrementing attacks (replacing `Id=2` with `Id=3` in the URL) or SQL injection, are more attractive to build protections against.</span></span> <span data-ttu-id="9147d-129">Les mesures d’atténuation de ces menaces sont tout à fait raisonnables pour construire et éviter les failles de sécurité embarrassantes qui salissent la réputation de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="9147d-129">The mitigations for these threats are quite reasonable to build and prevent embarrassing security holes that smear the company's reputation.</span></span>

## <a name="principle-of-least-privilege"></a><span data-ttu-id="9147d-130">Principe du privilège minimum</span><span class="sxs-lookup"><span data-stu-id="9147d-130">Principle of least privilege</span></span>

<span data-ttu-id="9147d-131">L’une des idées fondatrices en matière de sécurité informatique est le Principe du moindre privilège (POLP).</span><span class="sxs-lookup"><span data-stu-id="9147d-131">One of the founding ideas in computer security is the Principle of Least Privilege (POLP).</span></span> <span data-ttu-id="9147d-132">C’est en fait une idée fondamentale dans la plupart des formes de sécurité que ce soit numérique ou physique.</span><span class="sxs-lookup"><span data-stu-id="9147d-132">It's actually a foundational idea in most any form of security be it digital or physical.</span></span> <span data-ttu-id="9147d-133">En bref, le principe est que tout utilisateur ou processus devrait avoir le plus petit nombre de droits possibles pour exécuter sa tâche.</span><span class="sxs-lookup"><span data-stu-id="9147d-133">In short, the principle is that any user or process should have the smallest number of rights possible to execute its task.</span></span>

<span data-ttu-id="9147d-134">À titre d’exemple, pensez aux caissiers d’une banque : l’accès au coffre-fort est une activité rare.</span><span class="sxs-lookup"><span data-stu-id="9147d-134">As an example, think of the tellers at a bank: accessing the safe is an uncommon activity.</span></span> <span data-ttu-id="9147d-135">Donc, le caissier moyen ne peut pas ouvrir le coffre-fort eux-mêmes.</span><span class="sxs-lookup"><span data-stu-id="9147d-135">So, the average teller can't open the safe themselves.</span></span> <span data-ttu-id="9147d-136">Pour y avoir accès, ils doivent intensifier leur demande par l’intermédiaire d’un directeur de banque, qui effectue des contrôles de sécurité supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="9147d-136">To gain access, they need to escalate their request through a bank manager, who performs additional security checks.</span></span>

<span data-ttu-id="9147d-137">Dans un système informatique, un exemple fantastique est les droits d’un utilisateur se connectant à une base de données.</span><span class="sxs-lookup"><span data-stu-id="9147d-137">In a computer system, a fantastic example is the rights of a user connecting to a database.</span></span> <span data-ttu-id="9147d-138">Dans de nombreux cas, il existe un seul compte utilisateur utilisé pour construire la structure de la base de données et exécuter l’application.</span><span class="sxs-lookup"><span data-stu-id="9147d-138">In many cases, there's a single user account used to both build the database structure and run the application.</span></span> <span data-ttu-id="9147d-139">Sauf dans les cas extrêmes, le compte exécutant l’application n’a pas besoin de la possibilité de mettre à jour les informations schéma.</span><span class="sxs-lookup"><span data-stu-id="9147d-139">Except in extreme cases, the account running the application doesn't need the ability to update schema information.</span></span> <span data-ttu-id="9147d-140">Il devrait y avoir plusieurs comptes qui fournissent différents niveaux de privilège.</span><span class="sxs-lookup"><span data-stu-id="9147d-140">There should be several accounts that provide different levels of privilege.</span></span> <span data-ttu-id="9147d-141">L’application ne doit utiliser que le niveau d’autorisation que les subventions lisent et écrivent l’accès aux données dans les tableaux.</span><span class="sxs-lookup"><span data-stu-id="9147d-141">The application should only use the permission level that grants read and write access to the data in the tables.</span></span> <span data-ttu-id="9147d-142">Ce type de protection éliminerait les attaques qui visaient à laisser tomber les tables de base de données ou à introduire des déclencheurs malveillants.</span><span class="sxs-lookup"><span data-stu-id="9147d-142">This kind of protection would eliminate attacks that aimed to drop database tables or introduce malicious triggers.</span></span>

<span data-ttu-id="9147d-143">Presque chaque partie de la construction d’une application cloud-native peut bénéficier de se rappeler le principe du moins de privilège.</span><span class="sxs-lookup"><span data-stu-id="9147d-143">Almost every part of building a cloud-native application can benefit from remembering the principle of least privilege.</span></span> <span data-ttu-id="9147d-144">Vous pouvez le trouver en jeu lors de la configuration des pare-feu, des groupes de sécurité réseau, des rôles et des portées dans le contrôle d’accès basé sur les rôles (RBAC).</span><span class="sxs-lookup"><span data-stu-id="9147d-144">You can find it at play when setting up firewalls, network security groups, roles, and scopes in Role-based access control (RBAC).</span></span>

## <a name="penetration-testing"></a><span data-ttu-id="9147d-145">test de pénétration ;</span><span class="sxs-lookup"><span data-stu-id="9147d-145">Penetration testing</span></span>

<span data-ttu-id="9147d-146">À mesure que les applications se compliquent, le nombre de vecteurs d’attaque augmente à un rythme alarmant.</span><span class="sxs-lookup"><span data-stu-id="9147d-146">As applications become more complicated the number of attack vectors increases at an alarming rate.</span></span> <span data-ttu-id="9147d-147">La modélisation des menaces est défectueuse en ce qu’elle a tendance à être exécutée par les mêmes personnes qui construisent le système.</span><span class="sxs-lookup"><span data-stu-id="9147d-147">Threat modeling is flawed in that it tends to be executed by the same people building the system.</span></span> <span data-ttu-id="9147d-148">De la même manière que de nombreux développeurs ont du mal à envisager des interactions avec les utilisateurs, puis à construire des interfaces utilisateur inutilisables, la plupart des développeurs ont de la difficulté à voir chaque vecteur d’attaque.</span><span class="sxs-lookup"><span data-stu-id="9147d-148">In the same way that many developers have trouble envisioning user interactions and then build unusable user interfaces, most developers have difficulty seeing every attack vector.</span></span> <span data-ttu-id="9147d-149">Il est également possible que les développeurs de construire le système ne sont pas bien versés dans les méthodologies d’attaque et de manquer quelque chose de crucial.</span><span class="sxs-lookup"><span data-stu-id="9147d-149">It's also possible that the developers building the system aren't well versed in attack methodologies and miss something crucial.</span></span>

<span data-ttu-id="9147d-150">Les tests de pénétration ou les « tests de plume » impliquent d’amener des acteurs externes pour tenter d’attaquer le système.</span><span class="sxs-lookup"><span data-stu-id="9147d-150">Penetration testing or "pen testing" involves bringing in external actors to attempt to attack the system.</span></span> <span data-ttu-id="9147d-151">Ces attaquants peuvent être une société de conseil externe ou d’autres développeurs ayant de bonnes connaissances en sécurité d’une autre partie de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="9147d-151">These attackers may be an external consulting company or other developers with good security knowledge from another part of the business.</span></span> <span data-ttu-id="9147d-152">On leur donne carte blanche pour tenter de renverser le système.</span><span class="sxs-lookup"><span data-stu-id="9147d-152">They're given carte blanche to attempt to subvert the system.</span></span> <span data-ttu-id="9147d-153">Fréquemment, ils trouveront des trous de sécurité étendus qui doivent être patchés.</span><span class="sxs-lookup"><span data-stu-id="9147d-153">Frequently, they'll find extensive security holes that need to be patched.</span></span> <span data-ttu-id="9147d-154">Parfois, le vecteur d’attaque sera quelque chose de totalement inattendu comme l’exploitation d’une attaque de phishing contre le PDG.</span><span class="sxs-lookup"><span data-stu-id="9147d-154">Sometimes the attack vector will be something totally unexpected like exploiting a phishing attack against the CEO.</span></span>

<span data-ttu-id="9147d-155">Azure lui-même est constamment en train de subir des attaques d’une [équipe de hackers à l’intérieur de Microsoft](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span><span class="sxs-lookup"><span data-stu-id="9147d-155">Azure itself is constantly undergoing attacks from a [team of hackers inside Microsoft](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span></span> <span data-ttu-id="9147d-156">Au fil des ans, ils ont été les premiers à trouver des dizaines de vecteurs d’attaque potentiellement catastrophiques, les fermant avant qu’ils ne puissent être exploités à l’extérieur.</span><span class="sxs-lookup"><span data-stu-id="9147d-156">Over the years, they've been the first to find dozens of potentially catastrophic attack vectors, closing them before they can be exploited externally.</span></span> <span data-ttu-id="9147d-157">Plus une cible est tentante, plus les acteurs éternels tenteront de l’exploiter et il y a quelques cibles dans le monde plus tentantes qu’Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-157">The more tempting a target, the more likely that eternal actors will attempt to exploit it and there are a few targets in the world more tempting than Azure.</span></span>

## <a name="monitoring"></a><span data-ttu-id="9147d-158">Surveillance</span><span class="sxs-lookup"><span data-stu-id="9147d-158">Monitoring</span></span>

<span data-ttu-id="9147d-159">Si un attaquant tente de pénétrer une application, il devrait y avoir un avertissement de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="9147d-159">Should an attacker attempt to penetrate an application, there should be some warning of it.</span></span> <span data-ttu-id="9147d-160">Fréquemment, les attaques peuvent être repérées en examinant les journaux des services.</span><span class="sxs-lookup"><span data-stu-id="9147d-160">Frequently, attacks can be spotted by examining the logs from services.</span></span> <span data-ttu-id="9147d-161">Les attaques laissent des signes révélateurs qui peuvent être repérés avant qu’ils ne réussissent.</span><span class="sxs-lookup"><span data-stu-id="9147d-161">Attacks leave telltale signs that can be spotted before they succeed.</span></span> <span data-ttu-id="9147d-162">Par exemple, un attaquant qui tente de deviner un mot de passe fera de nombreuses demandes à un système de connexion.</span><span class="sxs-lookup"><span data-stu-id="9147d-162">For instance, an attacker attempting to guess a password will make many requests to a login system.</span></span> <span data-ttu-id="9147d-163">La surveillance autour du système de connexion peut détecter des modèles bizarres qui sont hors de la ligne avec le modèle d’accès typique.</span><span class="sxs-lookup"><span data-stu-id="9147d-163">Monitoring around the login system can detect weird patterns that are out of line with the typical access pattern.</span></span> <span data-ttu-id="9147d-164">Cette surveillance peut être transformée en une alerte qui peut, à son tour, alerter une personne des opérations pour activer une sorte de contre-mesure.</span><span class="sxs-lookup"><span data-stu-id="9147d-164">This monitoring can be turned into an alert that can, in turn, alert an operations person to activate some sort of countermeasure.</span></span> <span data-ttu-id="9147d-165">Un système de surveillance très mature pourrait même prendre des mesures basées sur ces écarts en ajoutant de manière proactive des règles pour bloquer les demandes ou les réponses à la manette des gaz.</span><span class="sxs-lookup"><span data-stu-id="9147d-165">A highly mature monitoring system might even take action based on these deviations proactively adding rules to block requests or throttle responses.</span></span>

## <a name="securing-the-build"></a><span data-ttu-id="9147d-166">Sécuriser la construction</span><span class="sxs-lookup"><span data-stu-id="9147d-166">Securing the build</span></span>

<span data-ttu-id="9147d-167">Un endroit où la sécurité est souvent négligée est autour du processus de construction.</span><span class="sxs-lookup"><span data-stu-id="9147d-167">One place where security is often overlooked is around the build process.</span></span> <span data-ttu-id="9147d-168">Non seulement la construction devrait exécuter des contrôles de sécurité, tels que la numérisation pour le code non sécurisé ou les informations d’identification enregistrées, mais la construction elle-même doit être sécurisée.</span><span class="sxs-lookup"><span data-stu-id="9147d-168">Not only should the build run security checks, such as scanning for insecure code or checked-in credentials, but the build itself should be secure.</span></span> <span data-ttu-id="9147d-169">Si le serveur de construction est compromis, alors il fournit un vecteur fantastique pour introduire le code arbitraire dans le produit.</span><span class="sxs-lookup"><span data-stu-id="9147d-169">If the build server is compromised, then it provides a fantastic vector for introducing arbitrary code into the product.</span></span>

<span data-ttu-id="9147d-170">Imaginez qu’un attaquant cherche à voler les mots de passe des personnes qui se connectent à une application web.</span><span class="sxs-lookup"><span data-stu-id="9147d-170">Imagine that an attacker is looking to steal the passwords of people signing into a web application.</span></span> <span data-ttu-id="9147d-171">Ils pourraient introduire une étape de construction qui modifie le code de vérification pour refléter toute demande de connexion à un autre serveur.</span><span class="sxs-lookup"><span data-stu-id="9147d-171">They could introduce a build step that modifies the checked-out code to mirror any login request to another server.</span></span> <span data-ttu-id="9147d-172">La prochaine fois que le code passe par la version, il est mis à jour en silence.</span><span class="sxs-lookup"><span data-stu-id="9147d-172">The next time code goes through the build, it's silently updated.</span></span> <span data-ttu-id="9147d-173">La numérisation de vulnérabilité de code source n’attrapera pas ceci pendant qu’elle exécute avant la construction.</span><span class="sxs-lookup"><span data-stu-id="9147d-173">The source code vulnerability scanning won't catch this as it runs before the build.</span></span> <span data-ttu-id="9147d-174">De même, personne ne l’attrapera dans un examen de code parce que les étapes de construction vivent sur le serveur de construction.</span><span class="sxs-lookup"><span data-stu-id="9147d-174">Equally, nobody will catch it in a code review because the build steps live on the build server.</span></span> <span data-ttu-id="9147d-175">Le code exploité ira à la production où il peut récolter des mots de passe.</span><span class="sxs-lookup"><span data-stu-id="9147d-175">The exploited code will go to production where it can harvest passwords.</span></span> <span data-ttu-id="9147d-176">Il n’y a probablement pas de registre de vérification des changements apportés au processus de construction, ou du moins personne ne surveille la vérification.</span><span class="sxs-lookup"><span data-stu-id="9147d-176">Probably there's no audit log of the build process changes, or at least nobody monitoring the audit.</span></span>

<span data-ttu-id="9147d-177">Il s’agit d’un parfait exemple d’une cible apparemment faible valeur qui peut être utilisé pour percer dans le système.</span><span class="sxs-lookup"><span data-stu-id="9147d-177">This is a perfect example of a seemingly low value target that can be used to break into the system.</span></span> <span data-ttu-id="9147d-178">Une fois qu’un attaquant viole le périmètre du système, il peut commencer à trouver des moyens d’élever ses autorisations au point qu’il peut causer un préjudice réel où il veut.</span><span class="sxs-lookup"><span data-stu-id="9147d-178">Once an attacker breaches the perimeter of the system, they can start working on finding ways to elevate their permissions to the point that they can cause real harm anywhere they like.</span></span>

## <a name="building-secure-code"></a><span data-ttu-id="9147d-179">Code sécurisé de construction</span><span class="sxs-lookup"><span data-stu-id="9147d-179">Building secure code</span></span>

<span data-ttu-id="9147d-180">.NET Framework est déjà un cadre tout à fait sûr.</span><span class="sxs-lookup"><span data-stu-id="9147d-180">.NET Framework is already a quite secure framework.</span></span> <span data-ttu-id="9147d-181">Il évite certains des pièges du code non menté, comme la marche hors des extrémités des tableaux.</span><span class="sxs-lookup"><span data-stu-id="9147d-181">It avoids some of the pitfalls of unmanaged code, such as walking off the ends of arrays.</span></span> <span data-ttu-id="9147d-182">Des travaux sont activement effectués pour corriger les trous de sécurité au fur et à mesure qu’ils sont découverts.</span><span class="sxs-lookup"><span data-stu-id="9147d-182">Work is actively done to fix security holes as they're discovered.</span></span> <span data-ttu-id="9147d-183">Il y a même un programme de [primes aux insectes](https://www.microsoft.com/msrc/bounty) qui permet aux chercheurs de trouver des problèmes dans le cadre et de les signaler au lieu de les exploiter.</span><span class="sxs-lookup"><span data-stu-id="9147d-183">There's even a [bug bounty program](https://www.microsoft.com/msrc/bounty) that pays researchers to find issues in the framework and report them instead of exploiting them.</span></span>

<span data-ttu-id="9147d-184">Il existe de nombreuses façons de rendre le code .NET plus sécurisé.</span><span class="sxs-lookup"><span data-stu-id="9147d-184">There are many ways to make .NET code more secure.</span></span> <span data-ttu-id="9147d-185">Suivre les lignes directrices telles que les [lignes directrices de codage sécurisée pour l’article .NET](https://docs.microsoft.com/dotnet/standard/security/secure-coding-guidelines) est une étape raisonnable à prendre pour s’assurer que le code est sécurisé à partir de zéro.</span><span class="sxs-lookup"><span data-stu-id="9147d-185">Following guidelines such as the [Secure coding guidelines for .NET](https://docs.microsoft.com/dotnet/standard/security/secure-coding-guidelines) article is a reasonable step to take to ensure that the code is secure from the ground up.</span></span> <span data-ttu-id="9147d-186">Le [top 10 OWASP](https://owasp.org/www-project-top-ten/) est un autre guide précieux pour construire le code sécurisé.</span><span class="sxs-lookup"><span data-stu-id="9147d-186">The [OWASP top 10](https://owasp.org/www-project-top-ten/) is another invaluable guide to build secure code.</span></span>

<span data-ttu-id="9147d-187">Le processus de construction est un bon endroit pour mettre des outils de numérisation pour détecter les problèmes dans le code source avant qu’ils ne le rendent en production.</span><span class="sxs-lookup"><span data-stu-id="9147d-187">The build process is a good place to put scanning tools to detect problems in source code before they make it into production.</span></span> <span data-ttu-id="9147d-188">La plupart de chaque projet a des dépendances sur d’autres paquets.</span><span class="sxs-lookup"><span data-stu-id="9147d-188">Most every project has dependencies on some other packages.</span></span> <span data-ttu-id="9147d-189">Un outil qui peut numériser pour les paquets obsolètes attrapera des problèmes dans une construction nocturne.</span><span class="sxs-lookup"><span data-stu-id="9147d-189">A tool that can scan for outdated packages will catch problems in a nightly build.</span></span> <span data-ttu-id="9147d-190">Même lors de la construction d’images Docker, il est utile de vérifier et de s’assurer que l’image de base n’a pas de vulnérabilités connues.</span><span class="sxs-lookup"><span data-stu-id="9147d-190">Even when building Docker images, it's useful to check and make sure that the base image doesn't have known vulnerabilities.</span></span> <span data-ttu-id="9147d-191">Une autre chose à vérifier est que personne n’a accidentellement vérifié les informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="9147d-191">Another thing to check is that nobody has accidentally checked in credentials.</span></span>

## <a name="built-in-security"></a><span data-ttu-id="9147d-192">Sécurité intégrée</span><span class="sxs-lookup"><span data-stu-id="9147d-192">Built-in security</span></span>

<span data-ttu-id="9147d-193">Azure est conçu pour équilibrer la convivialité et la sécurité pour la majorité des utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="9147d-193">Azure is designed to balance usability and security for the majority of users.</span></span> <span data-ttu-id="9147d-194">Différents utilisateurs vont avoir des exigences de sécurité différentes, donc ils ont besoin d’affiner leur approche de la sécurité cloud.</span><span class="sxs-lookup"><span data-stu-id="9147d-194">Different users are going to have different security requirements, so they need to fine-tune their approach to cloud security.</span></span> <span data-ttu-id="9147d-195">Microsoft publie beaucoup d’informations de sécurité dans le [Trust Center](https://azure.microsoft.com/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="9147d-195">Microsoft publishes a great deal of security information in the [Trust Center](https://azure.microsoft.com/support/trust-center/).</span></span> <span data-ttu-id="9147d-196">Cette ressource devrait être la première étape pour les professionnels intéressés à comprendre le fonctionnement des technologies intégrées d’atténuation des attaques.</span><span class="sxs-lookup"><span data-stu-id="9147d-196">This resource should be the first stop for those professionals interested in understanding how the built-in attack mitigation technologies work.</span></span>

<span data-ttu-id="9147d-197">Au sein du portail Azure, le [azuréen Advisor](https://azure.microsoft.com/services/advisor/) est un système qui scanne constamment un environnement et formule des recommandations.</span><span class="sxs-lookup"><span data-stu-id="9147d-197">Within the Azure portal, the [Azure Advisor](https://azure.microsoft.com/services/advisor/) is a system that is constantly scanning an environment and making recommendations.</span></span> <span data-ttu-id="9147d-198">Certaines de ces recommandations sont conçues pour économiser de l’argent aux utilisateurs, mais d’autres sont conçues pour identifier des configurations potentiellement précaires, comme le fait d’avoir un conteneur de stockage ouvert sur le monde et non protégé par un réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="9147d-198">Some of these recommendations are designed to save users money, but others are designed to identify potentially insecure configurations, such as having a storage container open to the world and not protected by a Virtual Network.</span></span>

## <a name="azure-network-infrastructure"></a><span data-ttu-id="9147d-199">Infrastructure réseau Azure</span><span class="sxs-lookup"><span data-stu-id="9147d-199">Azure network infrastructure</span></span>

<span data-ttu-id="9147d-200">Dans un environnement de déploiement sur site, beaucoup d’énergie est consacrée à la mise en place du réseautage.</span><span class="sxs-lookup"><span data-stu-id="9147d-200">In an on-premises deployment environment, a great deal of energy is dedicated to setting up networking.</span></span> <span data-ttu-id="9147d-201">Mise en place de routeurs, commutateurs, et le tel est un travail compliqué.</span><span class="sxs-lookup"><span data-stu-id="9147d-201">Setting up routers, switches, and the such is complicated work.</span></span> <span data-ttu-id="9147d-202">Les réseaux permettent à certaines ressources de parler à d’autres ressources et d’empêcher l’accès dans certains cas.</span><span class="sxs-lookup"><span data-stu-id="9147d-202">Networks allow certain resources to talk to other resources and prevent access in some cases.</span></span> <span data-ttu-id="9147d-203">Une règle de réseau fréquente consiste à restreindre l’accès à l’environnement de production de l’environnement de développement sur le risque hors-développement qu’un morceau de code à moitié développé tourne mal et supprime une bande de données.</span><span class="sxs-lookup"><span data-stu-id="9147d-203">A frequent network rule is to restrict access to the production environment from the development environment on the off chance that a half-developed piece of code runs awry and deletes a swath of data.</span></span>

<span data-ttu-id="9147d-204">Hors de la boîte, la plupart des ressources PaaS Azure ont seulement la configuration de réseau le plus basique et permissive.</span><span class="sxs-lookup"><span data-stu-id="9147d-204">Out of the box, most PaaS Azure resources have only the most basic and permissive networking setup.</span></span> <span data-ttu-id="9147d-205">Par exemple, n’importe qui sur Internet peut accéder à un service d’application.</span><span class="sxs-lookup"><span data-stu-id="9147d-205">For instance, anybody on the Internet can access an app service.</span></span> <span data-ttu-id="9147d-206">Les nouvelles instances SQL Server sont généralement restreintes, de sorte que les parties externes ne peuvent pas y accéder, mais les plages d’adresses IP utilisées par Azure elle-même sont autorisées à passer.</span><span class="sxs-lookup"><span data-stu-id="9147d-206">New SQL Server instances typically come restricted, so that external parties can't access them, but the IP address ranges used by Azure itself are permitted through.</span></span> <span data-ttu-id="9147d-207">Ainsi, alors que le serveur SQL est protégé contre les menaces externes, un attaquant n’a qu’à mettre en place une tête de pont Azure d’où ils peuvent lancer des attaques contre toutes les instances SQL sur Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-207">So, while the SQL server is protected from external threats, an attacker only needs to set up an Azure bridgehead from where they can launch attacks against all SQL instances on Azure.</span></span>

<span data-ttu-id="9147d-208">Heureusement, la plupart des ressources Azure peuvent être placées dans un réseau virtuel Azure qui permet un contrôle d’accès plus fin.</span><span class="sxs-lookup"><span data-stu-id="9147d-208">Fortunately, most Azure resources can be placed into an Azure Virtual Network that allows finer grained access control.</span></span> <span data-ttu-id="9147d-209">Semblable à la façon dont les réseaux sur site établissent des réseaux privés qui sont protégés du monde entier, les réseaux virtuels sont des îles d’adresses IP privées qui sont situés dans le réseau Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-209">Similar to the way that on-premises networks establish private networks that are protected from the wider world, virtual networks are islands of private IP addresses that are located within the Azure network.</span></span>

<span data-ttu-id="9147d-210">![Figure 10-1 Un réseau](./media/virtual-network.png)
virtuel dans Azure**Figure 10-1**.</span><span class="sxs-lookup"><span data-stu-id="9147d-210">![Figure 10-1 A virtual network in Azure](./media/virtual-network.png)
**Figure 10-1**.</span></span> <span data-ttu-id="9147d-211">Un réseau virtuel en Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-211">A virtual network in Azure.</span></span>

<span data-ttu-id="9147d-212">De la même manière que les réseaux sur site ont un pare-feu régissant l’accès au réseau, vous pouvez établir un pare-feu similaire à la limite du réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="9147d-212">In the same way that on-premises networks have a firewall governing access to the network, you can establish a similar firewall at the boundary of the virtual network.</span></span> <span data-ttu-id="9147d-213">Par défaut, toutes les ressources d’un réseau virtuel peuvent toujours parler à Internet.</span><span class="sxs-lookup"><span data-stu-id="9147d-213">By default, all the resources on a virtual network can still talk to the Internet.</span></span> <span data-ttu-id="9147d-214">Ce ne sont que les connexions entrantes qui nécessitent une certaine forme d’exception explicite pare-feu.</span><span class="sxs-lookup"><span data-stu-id="9147d-214">It's only incoming connections that require some form of explicit firewall exception.</span></span>

<span data-ttu-id="9147d-215">Avec le réseau établi, des ressources internes comme les comptes de stockage peuvent être configurés uniquement pour permettre l’accès par des ressources qui sont également sur le réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="9147d-215">With the network established, internal resources like storage accounts can be set up to only allow for access by resources that are also on the Virtual Network.</span></span> <span data-ttu-id="9147d-216">Ce pare-feu fournit un niveau de sécurité supplémentaire, si les clés de ce compte de stockage sont divulguées, les attaquants ne seraient pas en mesure de se connecter à elle pour exploiter les clés fuite.</span><span class="sxs-lookup"><span data-stu-id="9147d-216">This firewall provides an extra level of security, should the keys for that storage account be leaked, attackers wouldn't be able to connect to it to exploit the leaked keys.</span></span> <span data-ttu-id="9147d-217">C’est un autre exemple du principe du moins de privilège.</span><span class="sxs-lookup"><span data-stu-id="9147d-217">This is another example of the principle of least privilege.</span></span>

<span data-ttu-id="9147d-218">Les nœuds d’un cluster Azure Kubernetes peuvent participer à un réseau virtuel comme d’autres ressources plus originaires d’Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-218">The nodes in an Azure Kubernetes cluster can participate in a virtual network just like other resources that are more native to Azure.</span></span> <span data-ttu-id="9147d-219">Cette fonctionnalité s’appelle [Azure Container Networking Interface](https://github.com/Azure/azure-container-networking/blob/master/docs/cni.md).</span><span class="sxs-lookup"><span data-stu-id="9147d-219">This functionality is called [Azure Container Networking Interface](https://github.com/Azure/azure-container-networking/blob/master/docs/cni.md).</span></span> <span data-ttu-id="9147d-220">En effet, il alloue un sous-réseau dans le réseau virtuel sur lequel les machines virtuelles et les images de conteneurs sont alloués.</span><span class="sxs-lookup"><span data-stu-id="9147d-220">In effect, it allocates a subnet within the virtual network on which virtual machines and container images are allocated.</span></span>

<span data-ttu-id="9147d-221">Poursuivant sur la voie de l’illustration du principe du moindre privilège, toutes les ressources d’un réseau virtuel n’ont pas besoin de parler à toutes les autres ressources.</span><span class="sxs-lookup"><span data-stu-id="9147d-221">Continuing down the path of illustrating the principle of least privilege, not every resource within a Virtual Network needs to talk to every other resource.</span></span> <span data-ttu-id="9147d-222">Par exemple, dans une application qui fournit une API Web sur un compte de stockage et une base de données SQL, il est peu probable que la base de données et le compte de stockage doivent se parler.</span><span class="sxs-lookup"><span data-stu-id="9147d-222">For instance, in an application that provides a web API over a storage account and a SQL database, it's unlikely that the database and the storage account need to talk to one another.</span></span> <span data-ttu-id="9147d-223">Tout partage de données entre eux passerait par l’application Web.</span><span class="sxs-lookup"><span data-stu-id="9147d-223">Any data sharing between them would go through the web application.</span></span> <span data-ttu-id="9147d-224">Ainsi, un [groupe de sécurité réseau (NSG)](https://docs.microsoft.com/azure/virtual-network/security-overview) pourrait être utilisé pour refuser le trafic entre les deux services.</span><span class="sxs-lookup"><span data-stu-id="9147d-224">So, a [network security group (NSG)](https://docs.microsoft.com/azure/virtual-network/security-overview) could be used to deny traffic between the two services.</span></span>

<span data-ttu-id="9147d-225">Une politique de refus de communication entre les ressources peut être ennuyeux à mettre en œuvre, en particulier venant d’un contexte d’utilisation d’Azure sans restrictions de circulation.</span><span class="sxs-lookup"><span data-stu-id="9147d-225">A policy of denying communication between resources can be annoying to implement, especially coming from a background of using Azure without traffic restrictions.</span></span> <span data-ttu-id="9147d-226">Sur d’autres nuages, le concept de groupes de sécurité réseau est beaucoup plus répandu.</span><span class="sxs-lookup"><span data-stu-id="9147d-226">On some other clouds, the concept of network security groups is much more prevalent.</span></span> <span data-ttu-id="9147d-227">Par exemple, la politique par défaut sur AWS est que les ressources ne peuvent pas communiquer entre elles jusqu’à ce qu’elles soient activées par des règles d’un NSG.</span><span class="sxs-lookup"><span data-stu-id="9147d-227">For instance, the default policy on AWS is that resources can't communicate among themselves until enabled by rules in an NSG.</span></span> <span data-ttu-id="9147d-228">Bien que plus lent à développer cela, un environnement plus restrictif fournit un défaut plus sûr.</span><span class="sxs-lookup"><span data-stu-id="9147d-228">While slower to develop this, more restrictive environment provides a more secure default.</span></span> <span data-ttu-id="9147d-229">L’utilisation de bonnes pratiques DevOps, en particulier en utilisant [Azure Resource Manager ou Terraform](infrastructure-as-code.md) pour gérer les autorisations peut faciliter le contrôle des règles.</span><span class="sxs-lookup"><span data-stu-id="9147d-229">Making use of proper DevOps practices, especially using [Azure Resource Manager or Terraform](infrastructure-as-code.md) to manage permissions can make controlling the rules easier.</span></span>

<span data-ttu-id="9147d-230">Les réseaux virtuels peuvent également être utiles lors de la mise en place de la communication entre les ressources sur site et les ressources cloud.</span><span class="sxs-lookup"><span data-stu-id="9147d-230">Virtual Networks can also be useful when setting up communication between on-premises and cloud resources.</span></span> <span data-ttu-id="9147d-231">Un réseau privé virtuel peut être utilisé pour attacher les deux réseaux en toute transparence.</span><span class="sxs-lookup"><span data-stu-id="9147d-231">A virtual private network can be used to seamlessly attach the two networks together.</span></span> <span data-ttu-id="9147d-232">Cela permet d’exécuter un réseau virtuel sans aucune sorte de passerelle pour les scénarios où tous les utilisateurs sont sur place.</span><span class="sxs-lookup"><span data-stu-id="9147d-232">This allows running a virtual network without any sort of gateway for scenarios where all the users are on-site.</span></span> <span data-ttu-id="9147d-233">Il existe un certain nombre de technologies qui peuvent être utilisées pour établir ce réseau.</span><span class="sxs-lookup"><span data-stu-id="9147d-233">There are a number of technologies that can be used to establish this network.</span></span> <span data-ttu-id="9147d-234">Le plus simple est d’utiliser un [VPN site-site](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#s2smulti) qui peut être établi entre de nombreux routeurs et Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-234">The simplest is to use a [site-to-site VPN](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#s2smulti) that can be established between many routers and Azure.</span></span> <span data-ttu-id="9147d-235">Le trafic est crypté et tunnelé sur Internet au même coût par byte que tout autre trafic.</span><span class="sxs-lookup"><span data-stu-id="9147d-235">Traffic is encrypted and tunneled over the Internet at the same cost per byte as any other traffic.</span></span> <span data-ttu-id="9147d-236">Pour les scénarios où plus de bande passante ou plus de sécurité est souhaitable, Azure offre un service appelé [Express Route](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#ExpressRoute) qui utilise un circuit privé entre un réseau sur place et Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-236">For scenarios where more bandwidth or more security is desirable, Azure offers a service called [Express Route](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#ExpressRoute) that uses a private circuit between an on-premises network and Azure.</span></span> <span data-ttu-id="9147d-237">Il est plus coûteux et difficile à établir, mais aussi plus sûr.</span><span class="sxs-lookup"><span data-stu-id="9147d-237">It's more costly and difficult to establish but also more secure.</span></span>

## <a name="role-based-access-control-for-restricting-access-to-azure-resources"></a><span data-ttu-id="9147d-238">Contrôle d’accès basé sur les rôles pour restreindre l’accès aux ressources Azure</span><span class="sxs-lookup"><span data-stu-id="9147d-238">Role-based access control for restricting access to Azure resources</span></span>

<span data-ttu-id="9147d-239">RBAC est un système qui fournit une identité aux applications en cours d’exécution en Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-239">RBAC is a system that provides an identity to applications running in Azure.</span></span> <span data-ttu-id="9147d-240">Les applications peuvent accéder à des ressources en utilisant cette identité au lieu ou en plus d’utiliser des clés ou des mots de passe.</span><span class="sxs-lookup"><span data-stu-id="9147d-240">Applications can access resources using this identity instead of or in addition to using keys or passwords.</span></span>

## <a name="security-principals"></a><span data-ttu-id="9147d-241">Principaux de sécurité</span><span class="sxs-lookup"><span data-stu-id="9147d-241">Security Principals</span></span>

<span data-ttu-id="9147d-242">Le premier composant de RBAC est un directeur de sécurité.</span><span class="sxs-lookup"><span data-stu-id="9147d-242">The first component in RBAC is a security principal.</span></span> <span data-ttu-id="9147d-243">Un directeur de sécurité peut être un utilisateur, un groupe, un directeur de service ou une identité gérée.</span><span class="sxs-lookup"><span data-stu-id="9147d-243">A security principal can be a user, group, service principal, or managed identity.</span></span>

<span data-ttu-id="9147d-244">![Figure 10-2 Différents types](./media/rbac-security-principal.png)
de directeurs de sécurité**Figure 10-2**.</span><span class="sxs-lookup"><span data-stu-id="9147d-244">![Figure 10-2 Different types of security principals](./media/rbac-security-principal.png)
**Figure 10-2**.</span></span> <span data-ttu-id="9147d-245">Différents types de principes de sécurité.</span><span class="sxs-lookup"><span data-stu-id="9147d-245">Different types of security principals.</span></span>

- <span data-ttu-id="9147d-246">Utilisateur - Tout utilisateur qui a un compte dans Azure Active Directory est un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="9147d-246">User - Any user who has an account in Azure Active Directory is a user.</span></span>
- <span data-ttu-id="9147d-247">Groupe - Une collection d’utilisateurs de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9147d-247">Group - A collection of users from Azure Active Directory.</span></span> <span data-ttu-id="9147d-248">En tant que membre d’un groupe, un utilisateur assume les rôles de ce groupe en plus du leur.</span><span class="sxs-lookup"><span data-stu-id="9147d-248">As a member of a group, a user takes on the roles of that group in addition to their own.</span></span>
- <span data-ttu-id="9147d-249">Chef de service - Une identité de sécurité en vertu de laquelle les services ou les applications s’exécutent.</span><span class="sxs-lookup"><span data-stu-id="9147d-249">Service principal - A security identity under which services or applications run.</span></span>
- <span data-ttu-id="9147d-250">Identité gérée - Une identité Azure Active Directory gérée par Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-250">Managed identity - An Azure Active Directory identity managed by Azure.</span></span> <span data-ttu-id="9147d-251">Les identités gérées sont généralement utilisées lors du développement d’applications cloud qui gèrent les informations d’identification pour l’authentification des services Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-251">Managed identities are typically used when developing cloud applications that manage the credentials for authenticating to Azure services.</span></span>

<span data-ttu-id="9147d-252">Le principal de sécurité peut être appliqué à la plupart des ressources.</span><span class="sxs-lookup"><span data-stu-id="9147d-252">The security principal can be applied to most any resource.</span></span> <span data-ttu-id="9147d-253">Cela signifie qu’il est possible d’affecter un principal de sécurité à un conteneur fonctionnant au sein d’Azure Kubernetes, ce qui lui permet d’accéder aux secrets stockés dans Key Vault.</span><span class="sxs-lookup"><span data-stu-id="9147d-253">This means that it's possible to assign a security principal to a container running within Azure Kubernetes, allowing it to access secrets stored in Key Vault.</span></span> <span data-ttu-id="9147d-254">Une fonction Azure pourrait obtenir une autorisation lui permettant de parler à une instance active d’annuaire pour valider un JWT pour un utilisateur d’appel.</span><span class="sxs-lookup"><span data-stu-id="9147d-254">An Azure Function could take on a permission allowing it to talk to an Active Directory instance to validate a JWT for a calling user.</span></span> <span data-ttu-id="9147d-255">Une fois que les services sont activés avec un directeur de service, leurs autorisations peuvent être gérées granulairement en utilisant des rôles et des portées.</span><span class="sxs-lookup"><span data-stu-id="9147d-255">Once services are enabled with a service principal, their permissions can be managed granularly using roles and scopes.</span></span>

## <a name="roles"></a><span data-ttu-id="9147d-256">Rôles</span><span class="sxs-lookup"><span data-stu-id="9147d-256">Roles</span></span>

<span data-ttu-id="9147d-257">Un directeur de sécurité peut assumer de nombreux rôles ou, à l’aide d’une analogie plus vestimentaire, porter de nombreux chapeaux.</span><span class="sxs-lookup"><span data-stu-id="9147d-257">A security principal can take on many roles or, using a more sartorial analogy, wear many hats.</span></span> <span data-ttu-id="9147d-258">Chaque rôle définit une série d’autorisations telles que « Lire les messages à partir du point de terminaison Azure Service Bus ».</span><span class="sxs-lookup"><span data-stu-id="9147d-258">Each role defines a series of permissions such as "Read messages from Azure Service Bus endpoint".</span></span> <span data-ttu-id="9147d-259">L’ensemble d’autorisation efficace d’un principal de sécurité est la combinaison de toutes les autorisations assignées à tous les rôles que le principal de sécurité a.</span><span class="sxs-lookup"><span data-stu-id="9147d-259">The effective permission set of a security principal is the combination of all the permissions assigned to all the roles that security principal has.</span></span> <span data-ttu-id="9147d-260">Azure a un grand nombre de rôles intégrés et les utilisateurs peuvent définir leurs propres rôles.</span><span class="sxs-lookup"><span data-stu-id="9147d-260">Azure has a large number of built-in roles and users can define their own roles.</span></span>

<span data-ttu-id="9147d-261">![Figure 10-3 Définitions](./media/rbac-role-definition.png)
de rôle RBAC**Figure 10-3**.</span><span class="sxs-lookup"><span data-stu-id="9147d-261">![Figure 10-3 RBAC role definitions](./media/rbac-role-definition.png)
**Figure 10-3**.</span></span> <span data-ttu-id="9147d-262">Définitions de rôleS RBAC.</span><span class="sxs-lookup"><span data-stu-id="9147d-262">RBAC role definitions.</span></span>

<span data-ttu-id="9147d-263">Intégrés à Azure sont également un certain nombre de rôles de haut niveau tels que propriétaire, contributeur, lecteur et administrateur de compte utilisateur.</span><span class="sxs-lookup"><span data-stu-id="9147d-263">Built into Azure are also a number of high-level roles such as Owner, Contributor, Reader, and User Account Administrator.</span></span> <span data-ttu-id="9147d-264">Avec le rôle de propriétaire, un directeur de sécurité peut accéder à toutes les ressources et affecter des autorisations à d’autres.</span><span class="sxs-lookup"><span data-stu-id="9147d-264">With the Owner role, a security principal can access all resources and assign permissions to others.</span></span> <span data-ttu-id="9147d-265">Un contributeur a le même niveau d’accès à toutes les ressources, mais il ne peut pas attribuer d’autorisations.</span><span class="sxs-lookup"><span data-stu-id="9147d-265">A contributor has the same level of access to all resources but they can't assign permissions.</span></span> <span data-ttu-id="9147d-266">Un lecteur ne peut afficher que les ressources Azure existantes et un administrateur de compte utilisateur peut gérer l’accès aux ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-266">A Reader can only view existing Azure resources and a User Account Administrator can manage access to Azure resources.</span></span>

<span data-ttu-id="9147d-267">Des rôles intégrés plus granulaires tels que [DNS Zone Contributor](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#dns-zone-contributor) ont des droits limités à un seul service.</span><span class="sxs-lookup"><span data-stu-id="9147d-267">More granular built-in roles such as [DNS Zone Contributor](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#dns-zone-contributor) have rights limited to a single service.</span></span> <span data-ttu-id="9147d-268">Les directeurs de sécurité peuvent assumer n’importe quel nombre de rôles.</span><span class="sxs-lookup"><span data-stu-id="9147d-268">Security principals can take on any number of roles.</span></span>

## <a name="scopes"></a><span data-ttu-id="9147d-269">Étendues</span><span class="sxs-lookup"><span data-stu-id="9147d-269">Scopes</span></span>

<span data-ttu-id="9147d-270">Les rôles peuvent être appliqués à un ensemble restreint de ressources au sein d’Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-270">Roles can be applied to a restricted set of resources within Azure.</span></span> <span data-ttu-id="9147d-271">Par exemple, en appliquant la portée à l’exemple précédent de lecture à partir d’une file d’attente de bus de service, vous pouvez réduire l’autorisation à une seule file d’attente: "Lire les messages à partir du point de terminaison `blah.servicebus.windows.net/queue1`Azure Service Bus "</span><span class="sxs-lookup"><span data-stu-id="9147d-271">For instance, applying scope to the previous example of reading from a Service Bus queue, you can narrow the permission to a single queue: "Read messages from Azure Service Bus endpoint `blah.servicebus.windows.net/queue1`"</span></span>

<span data-ttu-id="9147d-272">La portée peut être aussi étroite qu’une seule ressource ou elle peut être appliquée à l’ensemble d’un groupe de ressources, d’un abonnement ou même d’un groupe de gestion.</span><span class="sxs-lookup"><span data-stu-id="9147d-272">The scope can be as narrow as a single resource or it can be applied to an entire resource group, subscription, or even management group.</span></span>

<span data-ttu-id="9147d-273">Lorsque l’on teste si un directeur de sécurité a une certaine autorisation, la combinaison du rôle et de la portée est prise en compte.</span><span class="sxs-lookup"><span data-stu-id="9147d-273">When testing if a security principal has a certain permission, the combination of role and scope are taken into account.</span></span> <span data-ttu-id="9147d-274">Cette combinaison fournit un mécanisme d’autorisation puissant.</span><span class="sxs-lookup"><span data-stu-id="9147d-274">This combination provides a powerful authorization mechanism.</span></span>

## <a name="deny"></a><span data-ttu-id="9147d-275">Deny</span><span class="sxs-lookup"><span data-stu-id="9147d-275">Deny</span></span>

<span data-ttu-id="9147d-276">Auparavant, seules les règles de « permis » étaient autorisées pour le RBAC.</span><span class="sxs-lookup"><span data-stu-id="9147d-276">Previously, only "allow" rules were permitted for RBAC.</span></span> <span data-ttu-id="9147d-277">Ce comportement a compliqué certaines portées à construire.</span><span class="sxs-lookup"><span data-stu-id="9147d-277">This behavior made some scopes complicated to build.</span></span> <span data-ttu-id="9147d-278">Par exemple, permettre à un principal de sécurité d’accéder à tous les comptes de stockage, sauf un, il fallait accorder une autorisation explicite à une liste potentiellement interminable de comptes de stockage.</span><span class="sxs-lookup"><span data-stu-id="9147d-278">For instance, allowing a security principal access to all storage accounts except one required granting explicit permission to a potentially endless list of storage accounts.</span></span> <span data-ttu-id="9147d-279">Chaque fois qu’un nouveau compte de stockage a été créé, il faudrait l’ajouter à cette liste de comptes.</span><span class="sxs-lookup"><span data-stu-id="9147d-279">Every time a new storage account was created, it would have to be added to this list of accounts.</span></span> <span data-ttu-id="9147d-280">Cela a ajouté des frais généraux de gestion qui n’était certainement pas souhaitable.</span><span class="sxs-lookup"><span data-stu-id="9147d-280">This added management overhead that certainly wasn't desirable.</span></span>

<span data-ttu-id="9147d-281">Les règles de refus ont préséance sur les règles d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="9147d-281">Deny rules take precedence over allow rules.</span></span> <span data-ttu-id="9147d-282">Maintenant, représentant la même portée "permettre à tous sauf un" pourrait être représenté comme deux règles "permettent à tous" et "refuser celui-ci spécifique".</span><span class="sxs-lookup"><span data-stu-id="9147d-282">Now representing the same "allow all but one" scope could be represented as two rules "allow all" and "deny this one specific one".</span></span> <span data-ttu-id="9147d-283">Refuser les règles non seulement faciliter la gestion, mais permettre des ressources qui sont très sûres en refusant l’accès à tout le monde.</span><span class="sxs-lookup"><span data-stu-id="9147d-283">Deny rules not only ease management but allow for resources that are extra secure by denying access to everybody.</span></span>

## <a name="checking-access"></a><span data-ttu-id="9147d-284">Vérification de l’accès</span><span class="sxs-lookup"><span data-stu-id="9147d-284">Checking access</span></span>

<span data-ttu-id="9147d-285">Comme vous pouvez l’imaginer, avoir un grand nombre de rôles et de portées peut rendre assez difficile la recherche de l’autorisation effective d’un directeur de service.</span><span class="sxs-lookup"><span data-stu-id="9147d-285">As you can imagine, having a large number of roles and scopes can make figuring out the effective permission of a service principal quite difficult.</span></span> <span data-ttu-id="9147d-286">Piling nier les règles en plus de cela, ne sert qu’à augmenter la complexité.</span><span class="sxs-lookup"><span data-stu-id="9147d-286">Piling deny rules on top of that, only serves to increase the complexity.</span></span> <span data-ttu-id="9147d-287">Heureusement, il ya une calculatrice d’autorisations qui peuvent montrer les autorisations efficaces pour tout directeur de service.</span><span class="sxs-lookup"><span data-stu-id="9147d-287">Fortunately, there's a permissions calculator that can show the effective permissions for any service principal.</span></span> <span data-ttu-id="9147d-288">Il se trouve généralement sous l’onglet IAM dans le portail, comme le montre la figure 10-3.</span><span class="sxs-lookup"><span data-stu-id="9147d-288">It's typically found under the IAM tab in the portal, as shown in Figure 10-3.</span></span>

<span data-ttu-id="9147d-289">![Calculatrice d’autorisation figure 10-4 pour un service](./media/check-rbac.png)
d’application Figure**10-4**.</span><span class="sxs-lookup"><span data-stu-id="9147d-289">![Figure 10-4 Permission calculator for an app service](./media/check-rbac.png)
**Figure 10-4**.</span></span> <span data-ttu-id="9147d-290">Calculatrice d’autorisation pour un service d’application.</span><span class="sxs-lookup"><span data-stu-id="9147d-290">Permission calculator for an app service.</span></span>

## <a name="securing-secrets"></a><span data-ttu-id="9147d-291">Sécurisation des secrets</span><span class="sxs-lookup"><span data-stu-id="9147d-291">Securing secrets</span></span>

<span data-ttu-id="9147d-292">Les mots de passe et les certificats sont un vecteur d’attaque courant pour les attaquants.</span><span class="sxs-lookup"><span data-stu-id="9147d-292">Passwords and certificates are a common attack vector for attackers.</span></span> <span data-ttu-id="9147d-293">Le matériel de craquage de mots de passe peut faire une attaque de force brute et essayer de deviner des milliards de mots de passe par seconde.</span><span class="sxs-lookup"><span data-stu-id="9147d-293">Password-cracking hardware can do a  brute-force attack and try to guess billions of passwords per second.</span></span> <span data-ttu-id="9147d-294">Il est donc important que les mots de passe qui sont utilisés pour accéder aux ressources sont forts, avec une grande variété de caractères.</span><span class="sxs-lookup"><span data-stu-id="9147d-294">So it's important that the passwords that are used to access resources are strong, with a large variety of characters.</span></span> <span data-ttu-id="9147d-295">Ces mots de passe sont exactement le genre de mots de passe qui sont presque impossibles à retenir.</span><span class="sxs-lookup"><span data-stu-id="9147d-295">These passwords are exactly the kind of passwords that are near impossible to remember.</span></span> <span data-ttu-id="9147d-296">Heureusement, les mots de passe d’Azure n’ont pas besoin d’être connus par un humain.</span><span class="sxs-lookup"><span data-stu-id="9147d-296">Fortunately, the passwords in Azure don't actually need to be known by any human.</span></span>

<span data-ttu-id="9147d-297">De nombreux experts en sécurité [suggèrent](https://www.troyhunt.com/password-managers-dont-have-to-be-perfect-they-just-have-to-be-better-than-not-having-one/) que l’utilisation d’un gestionnaire de mot de passe pour garder vos propres mots de passe est la meilleure approche.</span><span class="sxs-lookup"><span data-stu-id="9147d-297">Many security [experts suggest](https://www.troyhunt.com/password-managers-dont-have-to-be-perfect-they-just-have-to-be-better-than-not-having-one/) that using a password manager to keep your own passwords is the best approach.</span></span> <span data-ttu-id="9147d-298">Bien qu’il centralise vos mots de passe en un seul endroit, il permet également d’utiliser des mots de passe très complexes et de s’assurer qu’ils sont uniques pour chaque compte.</span><span class="sxs-lookup"><span data-stu-id="9147d-298">While it centralizes your passwords in one location, it also allows using highly complex passwords and ensuring they're unique for each account.</span></span> <span data-ttu-id="9147d-299">Le même système existe au sein d’Azure : un magasin central de secrets.</span><span class="sxs-lookup"><span data-stu-id="9147d-299">The same system exists within Azure: a central store for secrets.</span></span>

## <a name="azure-key-vault"></a><span data-ttu-id="9147d-300">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="9147d-300">Azure Key Vault</span></span>

<span data-ttu-id="9147d-301">Azure Key Vault fournit un emplacement centralisé pour stocker des mots de passe pour des choses telles que des bases de données, des clés API et des certificats.</span><span class="sxs-lookup"><span data-stu-id="9147d-301">Azure Key Vault provides a centralized location to store passwords for things such as databases, API keys, and certificates.</span></span> <span data-ttu-id="9147d-302">Une fois qu’un secret est entré dans la voûte, il n’est jamais montré à nouveau et les commandes pour l’extraire et le voir sont délibérément compliqués.</span><span class="sxs-lookup"><span data-stu-id="9147d-302">Once a secret is entered into the Vault, it's never shown again and the commands to extract and view it are purposefully complicated.</span></span> <span data-ttu-id="9147d-303">Les informations contenues dans le coffre-fort sont protégées à l’aide de modules de sécurité matériel validés par le chiffrement logiciel ou FIPS 140-2 de niveau 2.</span><span class="sxs-lookup"><span data-stu-id="9147d-303">The information in the safe is protected using either software encryption or FIPS 140-2 Level 2 validated Hardware Security Modules.</span></span>

<span data-ttu-id="9147d-304">L’accès au coffre-fort est assuré par l’intermédiaire des CNC, ce qui signifie que non seulement n’importe quel utilisateur peut accéder aux informations dans le coffre-fort.</span><span class="sxs-lookup"><span data-stu-id="9147d-304">Access to the key vault is provided through RBACs, meaning that not just any user can access the information in the vault.</span></span> <span data-ttu-id="9147d-305">Dites qu’une application web souhaite accéder à la chaîne de connexion de base de données stockée dans Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="9147d-305">Say a web application wishes to access the database connection string stored in Azure Key Vault.</span></span> <span data-ttu-id="9147d-306">Pour y accéder, les applications doivent être exécutées à l’aide d’un directeur de service.</span><span class="sxs-lookup"><span data-stu-id="9147d-306">To gain access, applications need to run using a service principal.</span></span> <span data-ttu-id="9147d-307">Sous ce rôle assumé, ils peuvent lire les secrets du coffre-fort.</span><span class="sxs-lookup"><span data-stu-id="9147d-307">Under this assumed role, they can read the secrets from the safe.</span></span> <span data-ttu-id="9147d-308">Il existe un certain nombre de paramètres de sécurité différents qui peuvent limiter davantage l’accès qu’une application a à la chambre forte, de sorte qu’il ne peut pas mettre à jour les secrets, mais seulement les lire.</span><span class="sxs-lookup"><span data-stu-id="9147d-308">There are a number of different security settings that can further limit the access that an application has to the vault, so that it can't update secrets but only read them.</span></span>

<span data-ttu-id="9147d-309">L’accès au coffre-fort clé peut être surveillé pour s’assurer que seules les applications attendues accèdent à la chambre forte.</span><span class="sxs-lookup"><span data-stu-id="9147d-309">Access to the key vault can be monitored to ensure that only the expected applications are accessing the vault.</span></span> <span data-ttu-id="9147d-310">Les journaux peuvent être intégrés de nouveau dans Azure Monitor, déverrouillant la possibilité de configurer des alertes lorsque des conditions imprévues sont rencontrées.</span><span class="sxs-lookup"><span data-stu-id="9147d-310">The logs can be integrated back into Azure Monitor, unlocking the ability to set up alerts when unexpected conditions are encountered.</span></span>

## <a name="kubernetes"></a><span data-ttu-id="9147d-311">Kubernetes</span><span class="sxs-lookup"><span data-stu-id="9147d-311">Kubernetes</span></span>

<span data-ttu-id="9147d-312">Au sein de Kubernetes, il y a un service similaire pour maintenir de petits morceaux d’informations secrètes.</span><span class="sxs-lookup"><span data-stu-id="9147d-312">Within Kubernetes, there's a similar service for maintaining small pieces of secret information.</span></span> <span data-ttu-id="9147d-313">Les secrets de Kubernetes `kubectl` peuvent être définis via l’exécution typique.</span><span class="sxs-lookup"><span data-stu-id="9147d-313">Kubernetes Secrets can be set via the typical `kubectl` executable.</span></span>

<span data-ttu-id="9147d-314">Créer un secret est aussi simple que de trouver la version base64 des valeurs à stocker :</span><span class="sxs-lookup"><span data-stu-id="9147d-314">Creating a secret is as simple as finding the base64 version of the values to be stored:</span></span>

```console
echo -n 'admin' | base64
YWRtaW4=
echo -n '1f2d1e2e67df' | base64
MWYyZDFlMmU2N2Rm
```

<span data-ttu-id="9147d-315">Puis l’ajouter à `secret.yml` un fichier secrets nommé par exemple qui ressemble à l’exemple suivant:</span><span class="sxs-lookup"><span data-stu-id="9147d-315">Then adding it to a secrets file named `secret.yml` for example that looks similar to the following example:</span></span>

```yml
apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
data:
  username: YWRtaW4=
  password: MWYyZDFlMmU2N2Rm
```

<span data-ttu-id="9147d-316">Enfin, ce fichier peut être chargé dans Kubernetes en exécutant la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="9147d-316">Finally, this file can be loaded into Kubernetes by running the following command:</span></span>

```console
kubectl apply -f ./secret.yaml
```

<span data-ttu-id="9147d-317">Ces secrets peuvent ensuite être montés en volumes ou exposés à des processus de conteneurs par le biais de variables de l’environnement.</span><span class="sxs-lookup"><span data-stu-id="9147d-317">These secrets can then be mounted into volumes or exposed to container processes through environment variables.</span></span> <span data-ttu-id="9147d-318">[L’approche d’application](https://12factor.net/) à douze facteurs pour les applications de construction suggère d’utiliser le plus petit dénominateur commun pour transmettre les paramètres à une application.</span><span class="sxs-lookup"><span data-stu-id="9147d-318">The [Twelve-factor app](https://12factor.net/) approach to building applications suggests using the lowest common denominator to transmit settings to an application.</span></span> <span data-ttu-id="9147d-319">Les variables de l’environnement sont le plus petit dénominateur commun, car elles sont prises en charge, peu importe le système d’exploitation ou l’application.</span><span class="sxs-lookup"><span data-stu-id="9147d-319">Environment variables are the lowest common denominator, because they're supported no matter the operating system or application.</span></span>

<span data-ttu-id="9147d-320">Une alternative pour utiliser les secrets intégrés de Kubernetes est d’accéder aux secrets de Azure Key Vault depuis Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="9147d-320">An alternative to use the built-in Kubernetes secrets is to access the secrets in Azure Key Vault from within Kubernetes.</span></span> <span data-ttu-id="9147d-321">La façon la plus simple de le faire est d’attribuer un rôle RBAC au conteneur qui cherche à charger des secrets.</span><span class="sxs-lookup"><span data-stu-id="9147d-321">The simplest way to do this is to assign an RBAC role to the container looking to load secrets.</span></span> <span data-ttu-id="9147d-322">L’application peut ensuite utiliser les API Azure Key Vault pour accéder aux secrets.</span><span class="sxs-lookup"><span data-stu-id="9147d-322">The application can then use the Azure Key Vault APIs to access the secrets.</span></span> <span data-ttu-id="9147d-323">Toutefois, cette approche nécessite des modifications au code et ne suit pas le modèle d’utilisation des variables de l’environnement.</span><span class="sxs-lookup"><span data-stu-id="9147d-323">However, this approach requires modifications to the code and doesn't follow the pattern of using environment variables.</span></span> <span data-ttu-id="9147d-324">Au lieu de cela, il est possible d’injecter des valeurs dans un conteneur grâce à l’utilisation de [l’injecteur Azure Key Vault](https://mrdevops.io/introducing-azure-key-vault-to-kubernetes-931f82364354).</span><span class="sxs-lookup"><span data-stu-id="9147d-324">Instead, it's possible to inject values into a container through the use of the [Azure Key Vault Injector](https://mrdevops.io/introducing-azure-key-vault-to-kubernetes-931f82364354).</span></span> <span data-ttu-id="9147d-325">Cette approche est en fait plus sécurisée que l’utilisation des secrets Kubernetes directement, car ils peuvent être consultés par les utilisateurs sur le cluster.</span><span class="sxs-lookup"><span data-stu-id="9147d-325">This approach is actually more secure than using the Kubernetes secrets directly, as they can be accessed by users on the cluster.</span></span>

## <a name="encryption-in-transit-and-at-rest"></a><span data-ttu-id="9147d-326">Chiffrement en transit et au repos</span><span class="sxs-lookup"><span data-stu-id="9147d-326">Encryption in transit and at rest</span></span>

<span data-ttu-id="9147d-327">Il est important de protéger les données, qu’il s’agisse d’un disque ou d’un transit entre différents services.</span><span class="sxs-lookup"><span data-stu-id="9147d-327">Keeping data safe is important whether it's on disk or transiting between various different services.</span></span> <span data-ttu-id="9147d-328">Le moyen le plus efficace d’empêcher les données de fuiter est de les chiffrer dans un format qui ne peut pas être facilement lu par d’autres.</span><span class="sxs-lookup"><span data-stu-id="9147d-328">The most effective way to keep data from leaking is to encrypt it into a format that can't be easily read by others.</span></span> <span data-ttu-id="9147d-329">Azure prend en charge un large éventail d’options de cryptage.</span><span class="sxs-lookup"><span data-stu-id="9147d-329">Azure supports a wide range of encryption options.</span></span>

### <a name="in-transit"></a><span data-ttu-id="9147d-330">En transit</span><span class="sxs-lookup"><span data-stu-id="9147d-330">In transit</span></span>

<span data-ttu-id="9147d-331">Il existe plusieurs façons de chiffrer le trafic sur le réseau azuréen.</span><span class="sxs-lookup"><span data-stu-id="9147d-331">There are several ways to encrypt traffic on the network in Azure.</span></span> <span data-ttu-id="9147d-332">L’accès aux services Azure se fait généralement sur les connexions qui utilisent transport Layer Security (TLS).</span><span class="sxs-lookup"><span data-stu-id="9147d-332">The access to Azure services is typically done over connections that use Transport Layer Security (TLS).</span></span> <span data-ttu-id="9147d-333">Par exemple, toutes les connexions aux API Azure nécessitent des connexions TLS.</span><span class="sxs-lookup"><span data-stu-id="9147d-333">For instance, all the connections to the Azure APIs require TLS connections.</span></span> <span data-ttu-id="9147d-334">De même, les connexions aux points de terminaison dans le stockage Azure peuvent être limitées au travail uniquement sur les connexions cryptées TLS.</span><span class="sxs-lookup"><span data-stu-id="9147d-334">Equally, connections to endpoints in Azure storage can be restricted to work only over TLS encrypted connections.</span></span>

<span data-ttu-id="9147d-335">TLS est un protocole compliqué et le simple fait de savoir que la connexion utilise TLS n’est pas suffisant pour assurer la sécurité.</span><span class="sxs-lookup"><span data-stu-id="9147d-335">TLS is a complicated protocol and simply knowing that the connection is using TLS isn't sufficient to ensure security.</span></span> <span data-ttu-id="9147d-336">Par exemple, TLS 1.0 est chroniquement précaire, et TLS 1.1 n’est pas beaucoup mieux.</span><span class="sxs-lookup"><span data-stu-id="9147d-336">For instance, TLS 1.0 is chronically insecure, and TLS 1.1 isn't much better.</span></span> <span data-ttu-id="9147d-337">Même dans les versions de TLS, il existe différents paramètres qui peuvent rendre les connexions plus faciles à déchiffrer.</span><span class="sxs-lookup"><span data-stu-id="9147d-337">Even within the versions of TLS, there are various settings that can make the connections easier to decrypt.</span></span> <span data-ttu-id="9147d-338">La meilleure ligne de conduite est de vérifier et de voir si la connexion du serveur utilise des protocoles à jour et bien configurés.</span><span class="sxs-lookup"><span data-stu-id="9147d-338">The best course of action is to check and see if the server connection is using up-to-date and well configured protocols.</span></span>

<span data-ttu-id="9147d-339">Cette vérification peut être effectuée par un service externe tel que le test serveur SSL des laboratoires SSL.</span><span class="sxs-lookup"><span data-stu-id="9147d-339">This check can be done by an external service such as SSL labs' SSL Server Test.</span></span> <span data-ttu-id="9147d-340">Un essai contre un critère d’évaluation Azure typique, dans ce cas, un point de terminaison de bus de service, donne un score presque parfait de A.</span><span class="sxs-lookup"><span data-stu-id="9147d-340">A test run against a typical Azure endpoint, in this case a service bus endpoint, yields a near perfect score of A.</span></span>

<span data-ttu-id="9147d-341">Même les services comme les bases de données Azure SQL utilisent le chiffrement TLS pour garder les données cachées.</span><span class="sxs-lookup"><span data-stu-id="9147d-341">Even services like Azure SQL databases use TLS encryption to keep data hidden.</span></span> <span data-ttu-id="9147d-342">La partie intéressante sur le cryptage des données en transit à l’aide de TLS est qu’il n’est pas possible, même pour Microsoft, d’écouter sur la connexion entre les ordinateurs exécutant TLS.</span><span class="sxs-lookup"><span data-stu-id="9147d-342">The interesting part about encrypting the data in transit using TLS is that it isn't possible, even for Microsoft, to listen in on the connection between computers running TLS.</span></span> <span data-ttu-id="9147d-343">Cela devrait fournir un réconfort pour les entreprises concernées que leurs données peuvent être à risque de Microsoft proprement dit ou même un acteur d’État avec plus de ressources que l’attaquant standard.</span><span class="sxs-lookup"><span data-stu-id="9147d-343">This should provide comfort for companies concerned that their data may be at risk from Microsoft proper or even a state actor with more resources than the standard attacker.</span></span>

<span data-ttu-id="9147d-344">![Figure 10-5 SSL labs rapport montrant une note de A pour un point de terminaison d’autobus de service. ](./media/ssl-report.png)
 **Figure 10-5**.</span><span class="sxs-lookup"><span data-stu-id="9147d-344">![Figure 10-5 SSL labs report showing a score of A for a Service Bus endpoint.](./media/ssl-report.png)
**Figure 10-5**.</span></span> <span data-ttu-id="9147d-345">Rapports de laboratoires SSL montrant une note de A pour un point de terminaison d’autobus de service.</span><span class="sxs-lookup"><span data-stu-id="9147d-345">SSL labs report showing a score of A for a Service Bus endpoint.</span></span>

<span data-ttu-id="9147d-346">Bien que ce niveau de cryptage ne sera pas suffisant pour toujours, il devrait inspirer confiance que les connexions Azure TLS sont tout à fait sécurisées.</span><span class="sxs-lookup"><span data-stu-id="9147d-346">While this level of encryption isn't going to be sufficient for all time, it should inspire confidence that Azure TLS connections are quite secure.</span></span> <span data-ttu-id="9147d-347">Azure continuera à faire évoluer ses normes de sécurité à mesure que le chiffrement s’améliorera.</span><span class="sxs-lookup"><span data-stu-id="9147d-347">Azure will continue to evolve its security standards as encryption improves.</span></span> <span data-ttu-id="9147d-348">Il est bon de savoir qu’il ya quelqu’un qui regarde les normes de sécurité et la mise à jour Azure comme ils s’améliorent.</span><span class="sxs-lookup"><span data-stu-id="9147d-348">It's nice to know that there's somebody watching the security standards and updating Azure as they improve.</span></span>

### <a name="at-rest"></a><span data-ttu-id="9147d-349">Au repos</span><span class="sxs-lookup"><span data-stu-id="9147d-349">At rest</span></span>

<span data-ttu-id="9147d-350">Dans toute application, il y a un certain nombre d’endroits où les données reposent sur le disque.</span><span class="sxs-lookup"><span data-stu-id="9147d-350">In any application, there are a number of places where data rests on disk.</span></span> <span data-ttu-id="9147d-351">Le code d’application lui-même est chargé à partir d’un mécanisme de stockage.</span><span class="sxs-lookup"><span data-stu-id="9147d-351">The application code itself is loaded from some storage mechanism.</span></span> <span data-ttu-id="9147d-352">La plupart des applications utilisent également une sorte de base de données comme SQL Server, Cosmos DB, ou même le stockage de table étonnamment rentable.</span><span class="sxs-lookup"><span data-stu-id="9147d-352">Most applications also use some kind of database such as SQL Server, Cosmos DB, or even the amazingly price-efficient Table Storage.</span></span> <span data-ttu-id="9147d-353">Ces bases de données utilisent toutes un stockage fortement crypté pour s’assurer que personne d’autre que les applications avec les autorisations appropriées ne peuvent lire vos données.</span><span class="sxs-lookup"><span data-stu-id="9147d-353">These databases all use heavily encrypted storage to ensure that nobody other than the applications with proper permissions can read your data.</span></span> <span data-ttu-id="9147d-354">Même les opérateurs du système ne peuvent pas lire les données qui ont été cryptées.</span><span class="sxs-lookup"><span data-stu-id="9147d-354">Even the system operators can't read data that has been encrypted.</span></span> <span data-ttu-id="9147d-355">Ainsi, les clients peuvent rester confiants que leurs informations secrètes restent secrètes.</span><span class="sxs-lookup"><span data-stu-id="9147d-355">So customers can remain confident their secret information remains secret.</span></span>

### <a name="storage"></a><span data-ttu-id="9147d-356">Stockage</span><span class="sxs-lookup"><span data-stu-id="9147d-356">Storage</span></span>

<span data-ttu-id="9147d-357">La sous-jacente d’une grande partie d’Azure est le moteur de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-357">The underpinning of much of Azure is the Azure Storage engine.</span></span> <span data-ttu-id="9147d-358">Les disques de machine virtuelle sont montés sur le dessus du stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-358">Virtual machine disks are mounted on top of Azure Storage.</span></span> <span data-ttu-id="9147d-359">Azure Kubernetes Services fonctionnent sur des machines virtuelles qui, elles-mêmes, sont hébergées sur Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="9147d-359">Azure Kubernetes Services run on virtual machines that, themselves, are hosted on Azure Storage.</span></span> <span data-ttu-id="9147d-360">Même les technologies sans serveur, telles que Azure Functions Apps et Azure Container Instances, sont à court de disque qui fait partie du stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-360">Even serverless technologies, such as Azure Functions Apps and Azure Container Instances, run out of disk that is part of Azure Storage.</span></span>

<span data-ttu-id="9147d-361">Si Azure Storage est bien crypté, il fournit une base pour que la plupart des autres soient également cryptés.</span><span class="sxs-lookup"><span data-stu-id="9147d-361">If Azure Storage is well encrypted, then it provides for a foundation for most everything else to also be encrypted.</span></span> <span data-ttu-id="9147d-362">Azure Storage [est crypté](https://docs.microsoft.com/azure/storage/common/storage-service-encryption) avec [FIPS 140-2](https://en.wikipedia.org/wiki/FIPS_140) conforme [256 bits AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard).</span><span class="sxs-lookup"><span data-stu-id="9147d-362">Azure Storage [is encrypted](https://docs.microsoft.com/azure/storage/common/storage-service-encryption) with [FIPS 140-2](https://en.wikipedia.org/wiki/FIPS_140) compliant [256-bit AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard).</span></span> <span data-ttu-id="9147d-363">Il s’agit d’une technologie de cryptage bien considérée ayant fait l’objet d’un examen universitaire approfondi au cours des une vingtaine d’années.</span><span class="sxs-lookup"><span data-stu-id="9147d-363">This is a well-regarded encryption technology having been the subject of extensive academic scrutiny over the last 20 or so years.</span></span> <span data-ttu-id="9147d-364">À l’heure actuelle, il n’y a pas d’attaque pratique connue qui permettrait à quelqu’un sans connaissance de la clé de lire les données cryptées par AES.</span><span class="sxs-lookup"><span data-stu-id="9147d-364">At present, there's no known practical attack that would allow someone without knowledge of the key to read data encrypted by AES.</span></span>

<span data-ttu-id="9147d-365">Par défaut, les clés utilisées pour chiffrer Azure Storage sont gérées par Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9147d-365">By default, the keys used for encrypting Azure Storage are managed by Microsoft.</span></span> <span data-ttu-id="9147d-366">Il existe de vastes protections en place pour éviter l’accès malveillant à ces clés.</span><span class="sxs-lookup"><span data-stu-id="9147d-366">There are extensive protections in place to ensure to prevent malicious access to these keys.</span></span> <span data-ttu-id="9147d-367">Toutefois, les utilisateurs ayant des exigences de chiffrement particulières peuvent également [fournir leurs propres clés de stockage](https://docs.microsoft.com/azure/storage/common/storage-encryption-keys-powershell) qui sont gérées dans Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="9147d-367">However, users with particular encryption requirements can also [provide their own storage keys](https://docs.microsoft.com/azure/storage/common/storage-encryption-keys-powershell) that are managed in Azure Key Vault.</span></span> <span data-ttu-id="9147d-368">Ces clés peuvent être révoquées à tout moment, ce qui rendrait effectivement le contenu du compte de stockage en les utilisant inaccessible.</span><span class="sxs-lookup"><span data-stu-id="9147d-368">These keys can be revoked at any time, which would effectively render the contents of the Storage account using them inaccessible.</span></span>

<span data-ttu-id="9147d-369">Les machines virtuelles utilisent le stockage crypté, mais il est possible de fournir une autre couche de cryptage en utilisant des technologies comme BitLocker sur Windows ou DM-Crypt sur Linux.</span><span class="sxs-lookup"><span data-stu-id="9147d-369">Virtual machines use encrypted storage, but it's possible to provide another layer of encryption by using technologies like BitLocker on Windows or DM-Crypt on Linux.</span></span> <span data-ttu-id="9147d-370">Ces technologies signifient que même si l’image du disque était divulguée hors du stockage, il resterait presque impossible de le lire.</span><span class="sxs-lookup"><span data-stu-id="9147d-370">These technologies mean that even if the disk image was leaked off of storage, it would remain near impossible to read it.</span></span>

### <a name="azure-sql"></a><span data-ttu-id="9147d-371">Azure SQL</span><span class="sxs-lookup"><span data-stu-id="9147d-371">Azure SQL</span></span>

<span data-ttu-id="9147d-372">Les bases de données hébergées sur Azure SQL utilisent une technologie appelée [Transparent Data Encryption (TDE)](/sql/relational-databases/security/encryption/transparent-data-encryption) pour s’assurer que les données restent cryptées.</span><span class="sxs-lookup"><span data-stu-id="9147d-372">Databases hosted on Azure SQL use a technology called [Transparent Data Encryption (TDE)](/sql/relational-databases/security/encryption/transparent-data-encryption) to ensure data remains encrypted.</span></span> <span data-ttu-id="9147d-373">Il est activé par défaut sur toutes les bases de données SQL nouvellement créées, mais doit être activé manuellement pour les bases de données héritées.</span><span class="sxs-lookup"><span data-stu-id="9147d-373">It's enabled by default on all newly created SQL databases, but must be enabled manually for legacy databases.</span></span> <span data-ttu-id="9147d-374">TDE exécute le cryptage en temps réel et le décryptage non seulement de la base de données, mais aussi des sauvegardes et des journaux de transaction.</span><span class="sxs-lookup"><span data-stu-id="9147d-374">TDE executes real-time encryption and decryption of not just the database, but also the backups and transaction logs.</span></span>

<span data-ttu-id="9147d-375">Les paramètres de chiffrement `master` sont stockés dans la base de données et, sur le démarrage, sont lus en mémoire pour les opérations restantes.</span><span class="sxs-lookup"><span data-stu-id="9147d-375">The encryption parameters are stored in the `master` database and, on startup, are read into memory for the remaining operations.</span></span> <span data-ttu-id="9147d-376">Cela signifie `master` que la base de données doit rester non cryptée.</span><span class="sxs-lookup"><span data-stu-id="9147d-376">This means that the `master` database must remain unencrypted.</span></span> <span data-ttu-id="9147d-377">La clé réelle est gérée par Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9147d-377">The actual key is managed by Microsoft.</span></span> <span data-ttu-id="9147d-378">Cependant, les utilisateurs ayant des exigences de sécurité exigeantes peuvent fournir leur propre clé dans Key Vault de la même manière que cela se fait pour Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="9147d-378">However, users with exacting security requirements may provide their own key in Key Vault in much the same way as is done for Azure Storage.</span></span> <span data-ttu-id="9147d-379">Le coffre-fort clé fournit des services tels que la rotation des clés et la révocation.</span><span class="sxs-lookup"><span data-stu-id="9147d-379">The Key Vault provides for such services as key rotation and revocation.</span></span>

<span data-ttu-id="9147d-380">La partie « transparente » de TDS vient du fait qu’il n’y a pas de modifications des clients nécessaires à l’utilisation d’une base de données cryptée.</span><span class="sxs-lookup"><span data-stu-id="9147d-380">The "Transparent" part of TDS comes from the fact that there aren't client changes needed to use an encrypted database.</span></span> <span data-ttu-id="9147d-381">Bien que cette approche assure une bonne sécurité, la fuite du mot de passe de base de données est suffisante pour que les utilisateurs puissent décrypter les données.</span><span class="sxs-lookup"><span data-stu-id="9147d-381">While this approach provides for good security, leaking the database password is enough for users to be able to decrypt the data.</span></span> <span data-ttu-id="9147d-382">Il y a une autre approche qui crypte des colonnes ou des tableaux individuels dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="9147d-382">There's another approach that encrypts individual columns or tables in a database.</span></span> <span data-ttu-id="9147d-383">[Toujours crypté](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault) s’assure qu’à aucun moment les données chiffrées n’apparaissent en texte clair à l’intérieur de la base de données.</span><span class="sxs-lookup"><span data-stu-id="9147d-383">[Always Encrypted](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault) ensures that at no point the encrypted data appears in plain text inside the database.</span></span>

<span data-ttu-id="9147d-384">La mise en place de ce niveau de cryptage nécessite de passer par un assistant dans SQL Server Management Studio pour sélectionner le type de cryptage et où dans Key Vault pour stocker les clés associées.</span><span class="sxs-lookup"><span data-stu-id="9147d-384">Setting up this tier of encryption requires running through a wizard in SQL Server Management Studio to select the sort of encryption and where in Key Vault to store the associated keys.</span></span>

<span data-ttu-id="9147d-385">![Figure 10-6 Sélection des colonnes dans un](./media/always-encrypted.png)
tableau à crypté à l’aide de Always Encrypted**Figure 10-6**.</span><span class="sxs-lookup"><span data-stu-id="9147d-385">![Figure 10-6 Selecting columns in a table to be encrypted using Always Encrypted](./media/always-encrypted.png)
**Figure 10-6**.</span></span> <span data-ttu-id="9147d-386">Sélection de colonnes dans une table à crypté à l’aide de Always Encrypted.</span><span class="sxs-lookup"><span data-stu-id="9147d-386">Selecting columns in a table to be encrypted using Always Encrypted.</span></span>

<span data-ttu-id="9147d-387">Les applications client qui lisent les informations de ces colonnes cryptées doivent faire des allocations spéciales pour lire les données chiffrées.</span><span class="sxs-lookup"><span data-stu-id="9147d-387">Client applications that read information from these encrypted columns need to make special allowances to read encrypted data.</span></span> <span data-ttu-id="9147d-388">Les chaînes de connexion `Column Encryption Setting=Enabled` doivent être mises à jour et les informations d’identification des clients doivent être récupérées à partir du coffre-fort.</span><span class="sxs-lookup"><span data-stu-id="9147d-388">Connection strings need to be updated with `Column Encryption Setting=Enabled` and client credentials must be retrieved from the Key Vault.</span></span> <span data-ttu-id="9147d-389">Le client SQL Server doit alors être doté des clés de chiffrement de la colonne.</span><span class="sxs-lookup"><span data-stu-id="9147d-389">The SQL Server client must then be primed with the column encryption keys.</span></span> <span data-ttu-id="9147d-390">Une fois cela fait, les autres actions utilisent les interfaces standard de SQL Client.</span><span class="sxs-lookup"><span data-stu-id="9147d-390">Once that is done, the remaining actions use the standard interfaces to SQL Client.</span></span> <span data-ttu-id="9147d-391">C’est-à-dire que des outils comme Dapper et Entity Framework, qui sont construits au-dessus de SQL Client, continueront à fonctionner sans changements.</span><span class="sxs-lookup"><span data-stu-id="9147d-391">That is, tools like Dapper and Entity Framework, which are built on top of SQL Client, will continue to work without changes.</span></span> <span data-ttu-id="9147d-392">Toujours crypté peut ne pas encore être disponible pour chaque pilote SQL Server sur chaque langue.</span><span class="sxs-lookup"><span data-stu-id="9147d-392">Always Encrypted may not yet be available for every SQL Server driver on every language.</span></span>

<span data-ttu-id="9147d-393">La combinaison de TDE et Always Encrypted, qui peuvent tous deux être utilisés avec des clés spécifiques au client, garantit que même les exigences de chiffrement les plus exigeantes sont prises en charge.</span><span class="sxs-lookup"><span data-stu-id="9147d-393">The combination of TDE and Always Encrypted, both of which can be used with client-specific keys, ensures that even the most exacting encryption requirements are supported.</span></span>

### <a name="cosmos-db"></a><span data-ttu-id="9147d-394">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="9147d-394">Cosmos DB</span></span>

<span data-ttu-id="9147d-395">Cosmos DB est la nouvelle base de données fournie par Microsoft dans Azure.</span><span class="sxs-lookup"><span data-stu-id="9147d-395">Cosmos DB is the newest database provided by Microsoft in Azure.</span></span> <span data-ttu-id="9147d-396">Il a été construit à partir de zéro avec la sécurité et la cryptographie à l’esprit.</span><span class="sxs-lookup"><span data-stu-id="9147d-396">It has been built from the ground up with security and cryptography in mind.</span></span> <span data-ttu-id="9147d-397">Le chiffrement AES-256bit est la norme pour toutes les bases de données Cosmos DB et ne peut pas être désactivé.</span><span class="sxs-lookup"><span data-stu-id="9147d-397">AES-256bit encryption is standard for all Cosmos DB databases and can't be disabled.</span></span> <span data-ttu-id="9147d-398">Couplé avec l’exigence de communication TLS 1.2, l’ensemble de la solution de stockage est cryptée.</span><span class="sxs-lookup"><span data-stu-id="9147d-398">Coupled with the TLS 1.2 requirement for communication, the entire storage solution is encrypted.</span></span>

<span data-ttu-id="9147d-399">![Figure 10-7 Le flux de cryptage](./media/cosmos-encryption.png)
des données dans Cosmos DB**Figure 10-7**.</span><span class="sxs-lookup"><span data-stu-id="9147d-399">![Figure 10-7 The flow of data encryption within Cosmos DB](./media/cosmos-encryption.png)
**Figure 10-7**.</span></span> <span data-ttu-id="9147d-400">Le flux de cryptage des données au sein de Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="9147d-400">The flow of data encryption within Cosmos DB.</span></span>

<span data-ttu-id="9147d-401">Bien que Cosmos DB ne fournisse pas de clés de chiffrement des clients, l’équipe a fait un travail important pour s’assurer qu’elle reste conforme à la PCI-DSS sans cela.</span><span class="sxs-lookup"><span data-stu-id="9147d-401">While Cosmos DB doesn't provide for supplying customer encryption keys, there has been significant work done by the team to ensure it remains PCI-DSS compliant without that.</span></span> <span data-ttu-id="9147d-402">Cosmos DB ne prend pas non plus en charge une sorte de chiffrement de colonne unique similaire à Azure SQL Always Encrypted encore.</span><span class="sxs-lookup"><span data-stu-id="9147d-402">Cosmos DB also doesn't support any sort of single column encryption similar to Azure SQL's Always Encrypted yet.</span></span>

## <a name="keeping-secure"></a><span data-ttu-id="9147d-403">Assurer la sécurité</span><span class="sxs-lookup"><span data-stu-id="9147d-403">Keeping secure</span></span>

<span data-ttu-id="9147d-404">Azure dispose de tous les outils nécessaires pour sortir un produit hautement sécurisé.</span><span class="sxs-lookup"><span data-stu-id="9147d-404">Azure has all the tools necessary to release a highly secure product.</span></span> <span data-ttu-id="9147d-405">Cependant, une chaîne n’est aussi forte que son maillon le plus faible.</span><span class="sxs-lookup"><span data-stu-id="9147d-405">However, a chain is only as strong as its weakest link.</span></span> <span data-ttu-id="9147d-406">Si les applications déployées au-dessus d’Azure ne sont pas développées avec un état d’esprit de sécurité approprié et de bons audits de sécurité, alors ils deviennent le maillon faible de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="9147d-406">If the applications deployed on top of Azure aren't developed with a proper security mindset and good security audits, then they become the weak link in the chain.</span></span> <span data-ttu-id="9147d-407">Il existe de nombreux grands outils d’analyse statique, bibliothèques de cryptage, et les pratiques de sécurité qui peuvent être utilisés pour s’assurer que le logiciel installé sur Azure est aussi sécurisé que Azure lui-même.</span><span class="sxs-lookup"><span data-stu-id="9147d-407">There are many great static analysis tools, encryption libraries, and security practices that can be used to ensure that the software installed on Azure is as secure as Azure itself.</span></span> <span data-ttu-id="9147d-408">Les exemples incluent les [outils d’analyse statique,](https://www.whitesourcesoftware.com/) [les bibliothèques de cryptage,](https://www.libressl.org/)et les pratiques de [sécurité](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span><span class="sxs-lookup"><span data-stu-id="9147d-408">Examples include [static analysis tools](https://www.whitesourcesoftware.com/), [encryption libraries](https://www.libressl.org/), and [security practices](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="9147d-409">[Suivant précédent](security.md)
>[Next](devops.md)</span><span class="sxs-lookup"><span data-stu-id="9147d-409">[Previous](security.md)
[Next](devops.md)</span></span>
