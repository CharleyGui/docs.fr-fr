---
title: REST et gRPC
description: En savoir plus sur gRPC, son rôle dans les applications natives du Cloud et sa différence par rapport à HTTP REST
author: robvet
ms.date: 09/08/2019
ms.openlocfilehash: 80960a9042b1514fb78e7a8c993a1854067407e8
ms.sourcegitcommit: 14ad34f7c4564ee0f009acb8bfc0ea7af3bc9541
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/01/2019
ms.locfileid: "73417133"
---
# <a name="rest-and-grpc"></a><span data-ttu-id="507d2-103">REST et gRPC</span><span class="sxs-lookup"><span data-stu-id="507d2-103">REST and gRPC</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="507d2-104">Jusqu’ici, dans cet ouvrage, nous nous sommes concentrés sur la communication [basée sur REST](https://docs.microsoft.com/azure/architecture/best-practices/api-design) .</span><span class="sxs-lookup"><span data-stu-id="507d2-104">So far in this book, we’ve focused on [REST-based](https://docs.microsoft.com/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="507d2-105">REST est un style architectural qui favorise l’interopérabilité entre les systèmes informatiques distribués.</span><span class="sxs-lookup"><span data-stu-id="507d2-105">REST is an architectural style that promotes interoperability between distributed computer systems.</span></span> <span data-ttu-id="507d2-106">Elle utilise un modèle de demande/réponse où chaque réponse du serveur est une demande du client.</span><span class="sxs-lookup"><span data-stu-id="507d2-106">It uses a request/response model where every response from the server is to a request from the client.</span></span> <span data-ttu-id="507d2-107">Bien que très populaires, REST n’est pas parfait pour chaque problème.</span><span class="sxs-lookup"><span data-stu-id="507d2-107">While widely popular, REST isn't a perfect fit for every problem.</span></span> <span data-ttu-id="507d2-108">Une technologie de communication plus récente, intitulée gRPC, est en pleine popularité et s’adapte à l’univers Cloud natif.</span><span class="sxs-lookup"><span data-stu-id="507d2-108">A newer communication technology, entitled gRPC, is rapidly gaining popularity and making its way into the cloud-native world.</span></span>

## <a name="grpc"></a><span data-ttu-id="507d2-109">gRPC</span><span class="sxs-lookup"><span data-stu-id="507d2-109">gRPC</span></span>

<span data-ttu-id="507d2-110">gRPC est une communication Open source qui provient de Google.</span><span class="sxs-lookup"><span data-stu-id="507d2-110">gRPC is an open-source communication that originates from Google.</span></span> <span data-ttu-id="507d2-111">Il repose sur le modèle d' [appel de procédure distante (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) , populaire dans l’informatique distribuée.</span><span class="sxs-lookup"><span data-stu-id="507d2-111">It's built upon the [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) model, popular in distributed computing.</span></span> <span data-ttu-id="507d2-112">À la suite de ce modèle, un programme client local expose une méthode in-process pour exécuter une opération.</span><span class="sxs-lookup"><span data-stu-id="507d2-112">Following this model, a local client program exposes an in-process method to execute an operation.</span></span> <span data-ttu-id="507d2-113">En arrière-plan, cet appel est appelé sur un microservice hors processus sur un réseau distribué.</span><span class="sxs-lookup"><span data-stu-id="507d2-113">Behind the scenes, that call is invoked on an out-of-process microservice across a distributed network.</span></span> <span data-ttu-id="507d2-114">Le développeur code l’opération en tant qu’appel de procédure locale.</span><span class="sxs-lookup"><span data-stu-id="507d2-114">The developer codes the operation as a local procedure call.</span></span> <span data-ttu-id="507d2-115">La plateforme sous-jacente extrait la communication réseau point à point, la sérialisation et l’exécution.</span><span class="sxs-lookup"><span data-stu-id="507d2-115">The underlying platform abstracts the point-to-point networking communication, serialization, and execution.</span></span>

<span data-ttu-id="507d2-116">gRPC est une infrastructure RPC moderne, légère et très performante.</span><span class="sxs-lookup"><span data-stu-id="507d2-116">gRPC is a modern RPC framework that is lightweight and highly performant.</span></span> <span data-ttu-id="507d2-117">Il utilise HTTP/2 pour son protocole de transport.</span><span class="sxs-lookup"><span data-stu-id="507d2-117">It uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="507d2-118">Bien qu’compatible avec HTTP 1,1, HTTP/2 offre de nombreuses fonctionnalités avancées :</span><span class="sxs-lookup"><span data-stu-id="507d2-118">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="507d2-119">Alors que HTTP 1,1 envoie des données en texte clair, HTTP/2 est un protocole binaire.</span><span class="sxs-lookup"><span data-stu-id="507d2-119">While HTTP 1.1 sends data as clear text, HTTP/2 is a binary protocol.</span></span> <span data-ttu-id="507d2-120">Il analyse les données plus rapidement en utilisant moins de mémoire, réduit la latence du réseau avec les améliorations associées à la vitesse et gère plus efficacement les ressources réseau.</span><span class="sxs-lookup"><span data-stu-id="507d2-120">It parses data faster using less memory, reduces network latency with the related improvements to speed, and manages network resources more efficiently.</span></span>
- <span data-ttu-id="507d2-121">Alors que HTTP 1,1 est limité au traitement d’une requête/réponse aller-retour à la fois, HTTP/2 prend en charge le multiplexage ou plusieurs demandes parallèles sur la même connexion.</span><span class="sxs-lookup"><span data-stu-id="507d2-121">While HTTP 1.1 is limited to processing one round-trip request/response at a time, HTTP/2 supports multiplexing, or multiple parallel requests over the same connection.</span></span>
- <span data-ttu-id="507d2-122">HTTP/2 prend en charge la communication en duplex intégral ou bidirectionnel, où le client et le serveur peuvent communiquer en même temps.</span><span class="sxs-lookup"><span data-stu-id="507d2-122">HTTP/2 supports full-duplex, or bidirectional communication, where both client and server and can communicate at the same time.</span></span> <span data-ttu-id="507d2-123">Le client peut télécharger les données de demande en même temps que le serveur qui envoie les données de réponse.</span><span class="sxs-lookup"><span data-stu-id="507d2-123">The client can be uploading request data at the same time the server is sending back response data.</span></span>
- <span data-ttu-id="507d2-124">La diffusion en continu est intégrée à HTTP/2, ce qui signifie que les demandes et les réponses peuvent diffuser de manière asynchrone des jeux de données volumineux.</span><span class="sxs-lookup"><span data-stu-id="507d2-124">Streaming is built into HTTP/2 meaning that both requests and responses can asynchronously stream large data sets.</span></span>
- <span data-ttu-id="507d2-125">En combinant gRPC et HTTP/2, les performances augmentent considérablement.</span><span class="sxs-lookup"><span data-stu-id="507d2-125">Combining gRPC and HTTP/2, performance dramatically increases.</span></span> <span data-ttu-id="507d2-126">En langage [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) , les performances de gRPC sont conformes et dépassent la vitesse et l’efficacité des [liaisons NetTcp](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span><span class="sxs-lookup"><span data-stu-id="507d2-126">In [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) parlance, gRPC performance meets and exceeds the speed and efficiency of [NetTCP bindings](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="507d2-127">Toutefois, contrairement à NetTCP, gRPC n’est pas restreinte aux langages C# Microsoft tels que ou VB.net.</span><span class="sxs-lookup"><span data-stu-id="507d2-127">However, unlike NetTCP, gRPC isn't constrained to Microsoft languages such as C# or VB.NET.</span></span>

<span data-ttu-id="507d2-128">gRPC est pris en charge sur les plateformes les plus C#populaires, y compris Java,, Golang et NodeJS.</span><span class="sxs-lookup"><span data-stu-id="507d2-128">gRPC is supported across most popular platforms, including Java, C#, Golang, and NodeJS.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="507d2-129">Mémoires tampon de protocole</span><span class="sxs-lookup"><span data-stu-id="507d2-129">Protocol Buffers</span></span>

<span data-ttu-id="507d2-130">gRPC adopte une autre technologie open source appelée [mémoires tampons de protocole](https://developers.google.com/protocol-buffers/docs/overview) ou messages Protobuf pour envoyer et recevoir des données.</span><span class="sxs-lookup"><span data-stu-id="507d2-130">gRPC embraces another open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview) or Protobuf messages to send and receive data.</span></span> <span data-ttu-id="507d2-131">À l’instar d’un [contrat de données WCF](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/using-data-contracts), Protobuf sérialise les données structurées pour que les systèmes lisent et écrivent.</span><span class="sxs-lookup"><span data-stu-id="507d2-131">Similar to a [WCF Data Contract](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/using-data-contracts), Protobuf serializes structured data for systems to read and write.</span></span> <span data-ttu-id="507d2-132">Cela réduit la surcharge que les formats explicites, tels que XML ou JSON, impliquent.</span><span class="sxs-lookup"><span data-stu-id="507d2-132">It reduces the overhead that human-readable formats like XML or JSON incur.</span></span>

<span data-ttu-id="507d2-133">De nombreuses techniques de sérialisation d’objets reflètent l’ensemble de la structure des objets de données au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="507d2-133">Many object serialization techniques reflect across the structure of data objects at run-time.</span></span> <span data-ttu-id="507d2-134">Protobuf vous oblige à définir la structure en amont avec un langage de langue dépendante de la plateforme.</span><span class="sxs-lookup"><span data-stu-id="507d2-134">Protobuf requires you to define the structure up front with a platform-agnostic language (Protocol Buffer Language).</span></span> <span data-ttu-id="507d2-135">Chaque définition est stockée dans un fichier « . proto ».</span><span class="sxs-lookup"><span data-stu-id="507d2-135">Each definition is stored in a ".proto" file.</span></span> <span data-ttu-id="507d2-136">Ensuite, à l’aide du compilateur Protobuf, « protonique », vous générez le code du client et du serveur pour toutes les plateformes prises en charge.</span><span class="sxs-lookup"><span data-stu-id="507d2-136">Then using Protobuf compiler, "Proton," you generate client and server code for any of the supported platforms.</span></span> <span data-ttu-id="507d2-137">Le code généré est optimisé pour la sérialisation/désérialisation rapide des données.</span><span class="sxs-lookup"><span data-stu-id="507d2-137">The generated code is optimized for fast serialization/deserialization of data.</span></span> <span data-ttu-id="507d2-138">Lors de l’exécution, chaque message est encapsulé dans le contrat de service fortement typé et sérialisé dans une représentation Protobuf standard.</span><span class="sxs-lookup"><span data-stu-id="507d2-138">At runtime, each message is wrapped in the strongly-typed service contract and serialized in a standard Protobuf representation.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="507d2-139">prise en charge de gRPC dans .NET</span><span class="sxs-lookup"><span data-stu-id="507d2-139">gRPC support in .NET</span></span>

<span data-ttu-id="507d2-140">Le Microsoft .NET Core Framework 3,0 comprend des outils et une prise en charge native pour gRPC.</span><span class="sxs-lookup"><span data-stu-id="507d2-140">The Microsoft .NET Core framework 3.0 includes tooling and native support for gRPC.</span></span> <span data-ttu-id="507d2-141">La figure 4-20 illustre le modèle de Visual Studio 2019 qui génère le modèle de structure d’un projet squelette gRPC pour un service gRPC.</span><span class="sxs-lookup"><span data-stu-id="507d2-141">Figure 4-20 shows the Visual Studio 2019 template that scaffolds a gRPC skeleton project for a gRPC service.</span></span> <span data-ttu-id="507d2-142">Notez comment .NET Core prend en charge les plateformes Windows, Linux et macOS.</span><span class="sxs-lookup"><span data-stu-id="507d2-142">Note how .NET Core supports the Windows, Linux, and macOS platforms.</span></span>

![Prise en charge de gRPC dans Visual Studio 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="507d2-144">**Figure 4-20**.</span><span class="sxs-lookup"><span data-stu-id="507d2-144">**Figure 4-20**.</span></span> <span data-ttu-id="507d2-145">prise en charge de gRPC dans Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="507d2-145">gRPC support in Visual Studio 2019</span></span>

<span data-ttu-id="507d2-146">.NET Core 3,0 intègre en toute transparence gRPC dans son infrastructure, y compris le routage de point de terminaison, la prise en charge IoC intégrée et la journalisation.</span><span class="sxs-lookup"><span data-stu-id="507d2-146">.NET Core 3.0 seamlessly integrates gRPC into its framework, including endpoint routing, built-in IoC support, and logging.</span></span> <span data-ttu-id="507d2-147">Le serveur Web Kestrel Open Source prend entièrement en charge les connexions HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="507d2-147">The open-source Kestrel web server fully supports HTTP/2 connections.</span></span>

<span data-ttu-id="507d2-148">La figure 4-21 illustre la structure d’un service gRPC dans Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="507d2-148">Figure 4-21 shows structure of a gRPC service in Visual Studio 2019.</span></span> <span data-ttu-id="507d2-149">Notez comment la structure de dossiers comprend des dossiers pour les fichiers proto et le code de service.</span><span class="sxs-lookup"><span data-stu-id="507d2-149">Note how the folder structure includes folders for the proto files and service code.</span></span>

![projet gRPC dans Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="507d2-151">**Figure 4-21**.</span><span class="sxs-lookup"><span data-stu-id="507d2-151">**Figure 4-21**.</span></span> <span data-ttu-id="507d2-152">projet gRPC dans Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="507d2-152">gRPC project in Visual Studio 2019</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="507d2-153">Utilisation de gRPC</span><span class="sxs-lookup"><span data-stu-id="507d2-153">gRPC Usage</span></span>

<span data-ttu-id="507d2-154">gRPC est bien adapté aux scénarios suivants :</span><span class="sxs-lookup"><span data-stu-id="507d2-154">gRPC is well suited for the following scenarios:</span></span>

- <span data-ttu-id="507d2-155">Communication à faible latence et débit élevé.</span><span class="sxs-lookup"><span data-stu-id="507d2-155">Low latency and high throughput communication.</span></span> <span data-ttu-id="507d2-156">gRPC est parfait pour les microservices légers où l’efficacité est essentielle.</span><span class="sxs-lookup"><span data-stu-id="507d2-156">gRPC is great for lightweight microservices where efficiency is critical.</span></span>
- <span data-ttu-id="507d2-157">Communication en temps réel point à point.</span><span class="sxs-lookup"><span data-stu-id="507d2-157">Point-to-point real-time communication.</span></span> <span data-ttu-id="507d2-158">gRPC offre une excellente prise en charge de la diffusion bidirectionnelle.</span><span class="sxs-lookup"><span data-stu-id="507d2-158">gRPC has excellent support for bi-directional streaming.</span></span> <span data-ttu-id="507d2-159">les services gRPC peuvent envoyer des messages en temps réel sans interrogation.</span><span class="sxs-lookup"><span data-stu-id="507d2-159">gRPC services can push messages in real time without polling.</span></span>
- <span data-ttu-id="507d2-160">Environnements polyglotte : les outils gRPC prennent en charge les langages de développement les plus populaires, ce qui en fait un bon choix pour les environnements multilingues.</span><span class="sxs-lookup"><span data-stu-id="507d2-160">Polyglot environments – gRPC tooling supports most popular development languages, making it a good choice for multi-language environments.</span></span>
- <span data-ttu-id="507d2-161">Environnements réseau restreints : les messages gRPC sont sérialisés avec Protobuf, un format de message léger.</span><span class="sxs-lookup"><span data-stu-id="507d2-161">Network constrained environments – gRPC messages are serialized with Protobuf, a lightweight message format.</span></span> <span data-ttu-id="507d2-162">Un message gRPC est toujours plus petit qu’un message JSON équivalent.</span><span class="sxs-lookup"><span data-stu-id="507d2-162">A gRPC message is always smaller than an equivalent JSON message.</span></span>

<span data-ttu-id="507d2-163">Au moment de la rédaction de ce livre, la plupart des navigateurs ont une prise en charge limitée de gRPC.</span><span class="sxs-lookup"><span data-stu-id="507d2-163">At the time of writing of this book, most browsers have limited support for gRPC.</span></span> <span data-ttu-id="507d2-164">gRPC utilise fortement les fonctionnalités HTTP/2 et aucun navigateur ne fournit le niveau de contrôle requis sur les requêtes Web pour prendre en charge un client gRPC.</span><span class="sxs-lookup"><span data-stu-id="507d2-164">gRPC heavily uses HTTP/2 features and no browser provides the level of control required over web requests to support a gRPC client.</span></span> <span data-ttu-id="507d2-165">gRPC est généralement utilisé pour la communication entre les microservices internes et les microservices.</span><span class="sxs-lookup"><span data-stu-id="507d2-165">gRPC is typically used for internal microservice to microservice communication.</span></span> <span data-ttu-id="507d2-166">La figure 4-22 illustre un modèle d’utilisation simple, mais courant.</span><span class="sxs-lookup"><span data-stu-id="507d2-166">Figure 4-22 shows a simple, but common usage pattern.</span></span>

![Modèles d’utilisation de gRPC](./media/grpc-usage.png)

<span data-ttu-id="507d2-168">**Figure 4-22**.</span><span class="sxs-lookup"><span data-stu-id="507d2-168">**Figure 4-22**.</span></span> <span data-ttu-id="507d2-169">modèles d’utilisation de gRPC</span><span class="sxs-lookup"><span data-stu-id="507d2-169">gRPC usage patterns</span></span>

<span data-ttu-id="507d2-170">Notez dans la figure précédente Comment le trafic frontal est appelé avec HTTP tandis que le microservice principal vers le microservice utilise gRPC.</span><span class="sxs-lookup"><span data-stu-id="507d2-170">Note in the previous figure how front-end traffic is invoked with HTTP while back-end microservice to microservice uses gRPC.</span></span>

<span data-ttu-id="507d2-171">Avant, gRPC peut jouer un rôle majeur dans la dethroning de la domination des REST pour les systèmes natifs du Cloud.</span><span class="sxs-lookup"><span data-stu-id="507d2-171">Looking ahead, gRPC could play a major role in dethroning the dominance of REST for cloud-native systems.</span></span> <span data-ttu-id="507d2-172">Les avantages en matière de performances et de facilité de développement sont trop bons pour être transmis.</span><span class="sxs-lookup"><span data-stu-id="507d2-172">The performance benefits and ease of development are too good to pass up.</span></span> <span data-ttu-id="507d2-173">Toutefois, ne vous contentez pas de continuer à utiliser le reste pendant une longue période.</span><span class="sxs-lookup"><span data-stu-id="507d2-173">However, make no mistake, REST will still be around for a long time.</span></span> <span data-ttu-id="507d2-174">Il est toujours plus rapide pour les API exposées publiquement et pour des raisons de compatibilité descendante.</span><span class="sxs-lookup"><span data-stu-id="507d2-174">It still excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="507d2-175">[Précédent](service-to-service-communication.md)
>[Suivant](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="507d2-175">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
