---
title: Considérations relatives à l’architecture sans serveur-applications sans serveur
description: Comprenez les défis liés à l’architecture des applications sans serveur, de la gestion de l’État et du stockage persistant à la mise à l’échelle, la journalisation, le traçage et les Diagnostics.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: c856683cf6910be98661e634246cd003b93a6d76
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/08/2019
ms.locfileid: "72522432"
---
# <a name="serverless-architecture-considerations"></a><span data-ttu-id="0aa6c-103">Considérations relatives à l’architecture serverless</span><span class="sxs-lookup"><span data-stu-id="0aa6c-103">Serverless architecture considerations</span></span>

<span data-ttu-id="0aa6c-104">L’adoption d’une architecture sans serveur est accompagnée de certains défis.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-104">Adopting a serverless architecture does come with certain challenges.</span></span> <span data-ttu-id="0aa6c-105">Cette section explore certaines des considérations les plus courantes à connaître.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-105">This section explores some of the more common considerations to be aware of.</span></span> <span data-ttu-id="0aa6c-106">Tous ces défis ont des solutions.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-106">All of these challenges have solutions.</span></span> <span data-ttu-id="0aa6c-107">Comme pour tous les choix d’architecture, la décision d’accéder sans serveur ne doit être effectuée qu’après examen minutieux des avantages et des inconvénients.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-107">As with all architecture choices, the decision to go serverless should be made only after carefully considering the pros and cons.</span></span> <span data-ttu-id="0aa6c-108">En fonction des besoins de votre application, vous pouvez décider qu’une implémentation sans serveur n’est pas la bonne solution pour certains composants.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-108">Depending on the needs of your application, you may decide a serverless implementation isn't the right solution for certain components.</span></span>

## <a name="managing-state"></a><span data-ttu-id="0aa6c-109">Gestion de l’État</span><span class="sxs-lookup"><span data-stu-id="0aa6c-109">Managing state</span></span>

<span data-ttu-id="0aa6c-110">Les fonctions sans serveur, comme les microservices en général, sont sans état par défaut.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-110">Serverless functions, as with microservices in general, are stateless by default.</span></span> <span data-ttu-id="0aa6c-111">L’évitement de l’état permet à un serveur d’être éphémère, de monter en charge et d’assurer la résilience sans point de défaillance central.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-111">Avoiding state enables serverless to be ephemeral, to scale out, and to provide resiliency without a central point of failure.</span></span> <span data-ttu-id="0aa6c-112">Dans certains cas, les processus d’entreprise nécessitent un État.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-112">In some circumstances, business processes require state.</span></span> <span data-ttu-id="0aa6c-113">Si votre processus requiert un État, deux options s’offrent à vous.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-113">If your process requires state, you have two options.</span></span> <span data-ttu-id="0aa6c-114">Vous pouvez adopter un modèle autre que sans serveur ou interagir avec un service distinct qui fournit l’État.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-114">You can adopt a model other than serverless, or interact with a separate service that provides state.</span></span> <span data-ttu-id="0aa6c-115">L’ajout de l’État peut compliquer la solution et compliquer la mise à l’échelle, et éventuellement créer un point de défaillance unique.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-115">Adding state can complicate the solution and make it harder to scale, and potentially create a single point of failure.</span></span> <span data-ttu-id="0aa6c-116">Déterminez avec soin si votre fonction requiert absolument un État.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-116">Carefully consider whether your function absolutely requires state.</span></span> <span data-ttu-id="0aa6c-117">Si la réponse est « oui », déterminez s’il est toujours judicieux de l’implémenter sans serveur.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-117">If the answer is "yes," determine whether it still makes sense to implement it with serverless.</span></span>

<span data-ttu-id="0aa6c-118">Il existe plusieurs solutions pour adopter l’État sans compromettre les avantages de l’absence de serveur.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-118">There are several solutions to adopt state without compromising the benefits of serverless.</span></span> <span data-ttu-id="0aa6c-119">Voici quelques-unes des solutions les plus populaires :</span><span class="sxs-lookup"><span data-stu-id="0aa6c-119">Some of the more popular solutions include:</span></span>

- <span data-ttu-id="0aa6c-120">Utiliser un magasin de données temporaire ou un cache distribué, comme ReDim</span><span class="sxs-lookup"><span data-stu-id="0aa6c-120">Use a temporary data store or distributed cache, like Redis</span></span>
- <span data-ttu-id="0aa6c-121">Stocker l’État dans une base de données, comme SQL ou CosmosDB</span><span class="sxs-lookup"><span data-stu-id="0aa6c-121">Store state in a database, like SQL or CosmosDB</span></span>
- <span data-ttu-id="0aa6c-122">Gérer l’état via un moteur de workflow comme des fonctions durables</span><span class="sxs-lookup"><span data-stu-id="0aa6c-122">Handle state through a workflow engine like durable functions</span></span>

<span data-ttu-id="0aa6c-123">En fin de compte, vous devez être conscient de la nécessité de gérer les États au sein des processus que vous envisagez d’implémenter avec sans serveur.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-123">The bottom line is that you should be aware of the need for any state management within processes you're considering to implement with serverless.</span></span>

## <a name="long-running-processes"></a><span data-ttu-id="0aa6c-124">Processus de longue durée</span><span class="sxs-lookup"><span data-stu-id="0aa6c-124">Long-running processes</span></span>

<span data-ttu-id="0aa6c-125">De nombreux avantages de la confiance sans serveur s’appuient sur les processus éphémères.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-125">Many benefits of serverless rely on the processes being ephemeral.</span></span> <span data-ttu-id="0aa6c-126">Des temps d’exécution courts permettent au fournisseur sans serveur de libérer plus facilement des ressources à mesure que les fonctions se terminent et partagent des fonctions entre les hôtes.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-126">Short run times make it easier for the serverless provider to free up resources as functions end and share functions across hosts.</span></span> <span data-ttu-id="0aa6c-127">La plupart des fournisseurs de Cloud limitent la durée totale d’exécution de votre fonction à environ 10 minutes.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-127">Most cloud providers limit the total time your function can run to around 10 minutes.</span></span> <span data-ttu-id="0aa6c-128">Si votre processus peut durer plus longtemps, vous pouvez envisager une autre implémentation.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-128">If your process may take longer, you might consider an alternative implementation.</span></span>

<span data-ttu-id="0aa6c-129">Il existe quelques exceptions et solutions.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-129">There are a few exceptions and solutions.</span></span> <span data-ttu-id="0aa6c-130">Une solution peut consister à diviser votre processus en composants plus petits qui prennent un temps d’exécution plus court.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-130">One solution may be to break your process into smaller components that individually take less time to run.</span></span> <span data-ttu-id="0aa6c-131">Si votre processus s’exécute longtemps en raison de dépendances, vous pouvez également envisager un flux de travail asynchrone à l’aide d’une solution comme fonctions durables.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-131">If your process runs long because of dependencies, you can also consider an asynchronous workflow using a solution like durable functions.</span></span> <span data-ttu-id="0aa6c-132">Les fonctions durables suspendent et maintiennent l’état de votre processus pendant qu’il attend qu’un processus externe se termine.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-132">Durable functions pause and maintain the state of your process while it's waiting on an external process to finish.</span></span> <span data-ttu-id="0aa6c-133">La gestion asynchrone réduit le temps d’exécution du processus réel.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-133">Asynchronous handling reduces the time the actual process runs.</span></span>

## <a name="startup-time"></a><span data-ttu-id="0aa6c-134">Temps de démarrage</span><span class="sxs-lookup"><span data-stu-id="0aa6c-134">Startup time</span></span>

<span data-ttu-id="0aa6c-135">Un problème potentiel avec les implémentations sans serveur est le temps de démarrage.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-135">One potential concern with serverless implementations is startup time.</span></span> <span data-ttu-id="0aa6c-136">Pour économiser les ressources, de nombreux fournisseurs sans serveur créent une infrastructure « à la demande ».</span><span class="sxs-lookup"><span data-stu-id="0aa6c-136">To conserve resources, many serverless providers create infrastructure "on demand."</span></span> <span data-ttu-id="0aa6c-137">Lorsqu’une fonction sans serveur est déclenchée après un certain laps de temps, il peut être nécessaire de créer ou de redémarrer les ressources pour héberger la fonction.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-137">When a serverless function is triggered after a period of time, the resources to host the function may need to be created or restarted.</span></span> <span data-ttu-id="0aa6c-138">Dans certains cas, les démarrages à froid peuvent entraîner des retards de plusieurs secondes.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-138">In some situations, cold starts may result in delays of several seconds.</span></span> <span data-ttu-id="0aa6c-139">Le temps de démarrage varie entre les fournisseurs et les niveaux de service.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-139">Startup time varies across providers and service levels.</span></span> <span data-ttu-id="0aa6c-140">Il existe plusieurs approches pour résoudre le temps de démarrage s’il est important de réduire la réussite de l’application.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-140">There are a few approaches to address startup time if it's important to minimize for the success of the app.</span></span>

- <span data-ttu-id="0aa6c-141">Certains fournisseurs permettent aux utilisateurs de payer des niveaux de service qui garantissent que l’infrastructure est « Always on ».</span><span class="sxs-lookup"><span data-stu-id="0aa6c-141">Some providers allow users to pay for service levels that guarantee infrastructure is "always on".</span></span>
- <span data-ttu-id="0aa6c-142">Implémentez un mécanisme Keep-Alive (exécutez une commande ping sur le point de terminaison pour le garder « éveillé »).</span><span class="sxs-lookup"><span data-stu-id="0aa6c-142">Implement a keep-alive mechanism (ping the endpoint to keep it "awake").</span></span>
- <span data-ttu-id="0aa6c-143">Utilisez l’orchestration comme Kubernetes avec une approche de fonction en conteneur (l’ordinateur hôte est déjà en cours d’exécution pour que les nouvelles instances soient extrêmement rapides).</span><span class="sxs-lookup"><span data-stu-id="0aa6c-143">Use orchestration like Kubernetes with a containerized function approach (the host is already running so spinning up new instances is extremely fast).</span></span>

## <a name="database-updates-and-migrations"></a><span data-ttu-id="0aa6c-144">Mises à jour et migrations de base de données</span><span class="sxs-lookup"><span data-stu-id="0aa6c-144">Database updates and migrations</span></span>

<span data-ttu-id="0aa6c-145">L’un des avantages du code sans serveur est que vous pouvez publier de nouvelles fonctions sans avoir à redéployer l’application entière.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-145">An advantage of serverless code is that you can release new functions without having to redeploy the entire application.</span></span> <span data-ttu-id="0aa6c-146">Cet avantage peut devenir un inconvénient lorsqu’il y a une base de données relationnelle impliquée.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-146">This advantage can become a disadvantage when there's a relational database involved.</span></span> <span data-ttu-id="0aa6c-147">Les modifications apportées aux schémas de base de données sont difficiles à synchroniser avec les mises à jour sans serveur.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-147">Changes to database schemas are difficult to synchronize with serverless updates.</span></span> <span data-ttu-id="0aa6c-148">Des difficultés supplémentaires sont posées lorsque des problèmes se posent et que les modifications doivent être annulées.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-148">Additional challenges are posed when things go wrong and the changes must be rolled back.</span></span> <span data-ttu-id="0aa6c-149">L’intégrité des données est l’une des raisons pour lesquelles il s’agit d’une bonne pratique pour les microservices et les fonctions sans serveur.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-149">Data integrity is one reason that a best practice for microservices and serverless functions is that they own their own data.</span></span> <span data-ttu-id="0aa6c-150">Il est possible de déployer des modifications en tant qu’unité unique de calcul et de données.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-150">It is possible to deploy changes as a single unit of compute and data.</span></span> <span data-ttu-id="0aa6c-151">En réalité, de nombreux systèmes hérités sont dotés d’une base de données principale importante qui doit être conciliée avec l’architecture sans serveur.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-151">The reality is that many legacy systems feature a large back-end database that must be reconciled with the serverless architecture.</span></span>

<span data-ttu-id="0aa6c-152">Une approche courante pour résoudre le contrôle de version de schéma consiste à ne jamais modifier les propriétés et les colonnes existantes, mais plutôt d’ajouter de nouvelles informations.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-152">A popular approach to solve schema versioning is to never modify existing properties and columns, but instead add new information.</span></span> <span data-ttu-id="0aa6c-153">Par exemple, considérez une modification pour passer d’un indicateur « Completed » booléen pour une liste TODO à une « date d’achèvement ».</span><span class="sxs-lookup"><span data-stu-id="0aa6c-153">For example, consider a change to move from a Boolean "completed" flag for a todo list to a "completed date."</span></span> <span data-ttu-id="0aa6c-154">Au lieu de supprimer l’ancien champ, la modification de la base de données :</span><span class="sxs-lookup"><span data-stu-id="0aa6c-154">Instead of removing the old field, the database change will:</span></span>

1. <span data-ttu-id="0aa6c-155">Ajoutez un nouveau champ « date de fin ».</span><span class="sxs-lookup"><span data-stu-id="0aa6c-155">Add a new "completed date" field.</span></span>
1. <span data-ttu-id="0aa6c-156">Transformez le champ booléen « Completed » en fonction calculée qui évalue si la date de fin est ultérieure à la date actuelle.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-156">Transform the "completed" Boolean field to a computed function that evaluates whether the completed date is after the current date.</span></span>
1. <span data-ttu-id="0aa6c-157">Ajoutez un déclencheur pour définir la date de fin sur la date actuelle lorsque la valeur booléenne terminée est définie sur true.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-157">Add a trigger to set the completed date to the current date when the completed Boolean is set to true.</span></span>

<span data-ttu-id="0aa6c-158">La séquence de modifications garantit que le code hérité continue à s’exécuter « en l’instant », tandis que les fonctions sans serveur plus récentes peuvent tirer parti du nouveau champ.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-158">The sequence of changes ensures that legacy code continues to run "as is" while newer serverless functions can take advantage of the new field.</span></span>

<span data-ttu-id="0aa6c-159">Pour plus d’informations sur les données des architectures sans serveur, consultez [défis et solutions pour la gestion des données distribuées](../microservices/architect-microservice-container-applications/distributed-data-management.md).</span><span class="sxs-lookup"><span data-stu-id="0aa6c-159">For more information about data in serverless architectures, see [Challenges and solutions for distributed data management](../microservices/architect-microservice-container-applications/distributed-data-management.md).</span></span>

## <a name="scaling"></a><span data-ttu-id="0aa6c-160">Mise à l'échelle</span><span class="sxs-lookup"><span data-stu-id="0aa6c-160">Scaling</span></span>

<span data-ttu-id="0aa6c-161">Il s’agit d’une idée fausse de l’absence de serveur.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-161">It's a common misconception that serverless means "no server."</span></span> <span data-ttu-id="0aa6c-162">Il s’agit en fait de « moins de serveurs ».</span><span class="sxs-lookup"><span data-stu-id="0aa6c-162">It's in fact "less server."</span></span> <span data-ttu-id="0aa6c-163">Le fait qu’il y ait une infrastructure de sauvegarde est important de comprendre quand il s’agit d’une mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-163">The fact there is a backing infrastructure is important to understand when it comes to scaling.</span></span> <span data-ttu-id="0aa6c-164">La plupart des plateformes sans serveur fournissent un ensemble de contrôles pour gérer la mise à l’échelle de l’infrastructure en cas d’augmentation de la densité d’événements.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-164">Most serverless platforms provide a set of controls to handle how the infrastructure should scale when event density increases.</span></span> <span data-ttu-id="0aa6c-165">Vous pouvez choisir parmi diverses options, mais votre stratégie peut varier en fonction de la fonction.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-165">You can choose from a variety of options, but your strategy may vary depending on the function.</span></span> <span data-ttu-id="0aa6c-166">En outre, les fonctions sont généralement exécutées sous un hôte connexe, de sorte que les fonctions sur le même hôte ont les mêmes options d’échelle.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-166">Furthermore, functions are typically run under a related host, so that functions on the same host have the same scale options.</span></span> <span data-ttu-id="0aa6c-167">Par conséquent, il est nécessaire d’organiser et de déterminer les fonctions qui sont hébergées ensemble en fonction des exigences de mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-167">Therefore it is necessary to organize and strategize which functions are hosted together based on scale requirements.</span></span>

<span data-ttu-id="0aa6c-168">Les règles spécifient souvent la mise à l’échelle (augmentation des ressources de l’ordinateur hôte) et la montée en puissance parallèle (augmenter le nombre d’instances de l’hôte) en fonction des différents paramètres.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-168">Rules often specify how to scale-up (increase the host resources) and scale-out (increase the number of host instances) based on varying parameters.</span></span> <span data-ttu-id="0aa6c-169">Les déclencheurs pour les échelles peuvent inclure la planification, les taux de demandes, l’utilisation du processeur et l’utilisation de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-169">Triggers for scales may include schedule, request rates, CPU utilization, and memory usage.</span></span> <span data-ttu-id="0aa6c-170">Des performances supérieures sont souvent supérieures.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-170">Higher performance often comes at a greater cost.</span></span> <span data-ttu-id="0aa6c-171">Les approches basées sur la consommation moins onéreuses peuvent ne pas être mises à l’échelle aussi rapidement lorsque le taux de demandes augmente soudainement.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-171">The less expensive, consumption-based approaches may not scale as quickly when the request rate suddenly increases.</span></span> <span data-ttu-id="0aa6c-172">Il existe un compromis entre le paiement d’un « coût d’assurance » et le paiement strict « au fur et à mesure de vos déplacements » et le risque de réponses plus lentes en raison de l’augmentation soudaine de la demande.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-172">There is a trade-off between paying up front "insurance cost" versus paying strictly "as you go" and risking slower responses due to sudden increases in demand.</span></span>

## <a name="monitoring-tracing-and-logging"></a><span data-ttu-id="0aa6c-173">Surveillance, suivi et journalisation</span><span class="sxs-lookup"><span data-stu-id="0aa6c-173">Monitoring, tracing, and logging</span></span>

<span data-ttu-id="0aa6c-174">Un aspect souvent négligé de DevOps est l’analyse des applications une fois qu’elles sont déployées.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-174">An often overlooked aspect of DevOps is monitoring applications once deployed.</span></span> <span data-ttu-id="0aa6c-175">Il est important de disposer d’une stratégie pour la surveillance des fonctions sans serveur.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-175">It's important to have a strategy for monitoring serverless functions.</span></span> <span data-ttu-id="0aa6c-176">Le plus grand défi est souvent la corrélation ou la reconnaissance lorsqu’un utilisateur appelle plusieurs fonctions dans le cadre de la même interaction.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-176">The biggest challenge is often correlation, or recognizing when a user calls multiple functions as part of the same interaction.</span></span> <span data-ttu-id="0aa6c-177">La plupart des plateformes sans serveur autorisent la journalisation de la console qui peut être importée dans des outils tiers.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-177">Most serverless platforms allow console logging that can be imported into third-party tools.</span></span> <span data-ttu-id="0aa6c-178">Il existe également des options pour automatiser la collecte des données de télémétrie, générer et suivre des ID de corrélation et surveiller des actions spécifiques pour fournir des informations détaillées.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-178">There are also options to automate collection of telemetry, generate and track correlation IDs, and monitor specific actions to provide detailed insights.</span></span> <span data-ttu-id="0aa6c-179">Azure fournit la [plateforme de application Insights](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) avancée pour la surveillance et l’analyse.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-179">Azure provides the advanced [Application Insights platform](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) for monitoring and analytics.</span></span>

## <a name="inter-service-dependencies"></a><span data-ttu-id="0aa6c-180">Dépendances entre les services</span><span class="sxs-lookup"><span data-stu-id="0aa6c-180">Inter-service dependencies</span></span>

<span data-ttu-id="0aa6c-181">Une architecture sans serveur peut inclure des fonctions qui reposent sur d’autres fonctions.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-181">A serverless architecture may include functions that rely on other functions.</span></span> <span data-ttu-id="0aa6c-182">En fait, il n’est pas rare de faire appel à plusieurs services dans une architecture sans serveur dans le cadre d’une interaction ou d’une transaction distribuée.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-182">In fact, it isn't uncommon in a serverless architecture to have multiple services call each other as part of an interaction or distributed transaction.</span></span> <span data-ttu-id="0aa6c-183">Pour éviter un couplage fort, il est recommandé que les services ne se référencent pas l’un l’autre directement.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-183">To avoid strong coupling, it's recommended that services don't reference each other directly.</span></span> <span data-ttu-id="0aa6c-184">Lorsque le point de terminaison d’un service doit être modifié, les références directes peuvent entraîner une refactorisation majeure.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-184">When the endpoint for a service needs to change, direct references could result in major refactoring.</span></span> <span data-ttu-id="0aa6c-185">Une solution recommandée consiste à fournir un mécanisme de détection de service, tel qu’un registre, qui fournit le point de terminaison approprié pour un type de demande.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-185">A suggested solution is to provide a service discovery mechanism, such as a registry, that provides the appropriate end point for a request type.</span></span> <span data-ttu-id="0aa6c-186">Une autre solution consiste à utiliser des services de messagerie tels que des files d’attente ou des rubriques pour la communication entre les services.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-186">Another solution is to leverage messaging services like queues or topics for communication between services.</span></span>

## <a name="managing-failure-and-providing-resiliency"></a><span data-ttu-id="0aa6c-187">Gestion des défaillances et fourniture de résilience</span><span class="sxs-lookup"><span data-stu-id="0aa6c-187">Managing failure and providing resiliency</span></span>

<span data-ttu-id="0aa6c-188">Il est également important de prendre en compte le *modèle de disjoncteur*: si, pour une raison quelconque, un service continue de tomber en panne, il n’est pas recommandé d’appeler ce service à plusieurs reprises.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-188">It's also important to consider the *circuit-breaker pattern*: If, for some reason, a service continues to fail, it isn't advisable to call that service repeatedly.</span></span> <span data-ttu-id="0aa6c-189">Au lieu de cela, un autre service est appelé ou un message est retourné jusqu’à ce que l’intégrité du service dépendant soit rétablie.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-189">Instead, an alternative service is called or a message returned until the health of the dependent service is re-established.</span></span> <span data-ttu-id="0aa6c-190">L’architecture sans serveur doit prendre en compte la stratégie de résolution et de gestion des dépendances entre les services.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-190">The serverless architecture needs to take into account the strategy for resolving and managing inter-service dependencies.</span></span>

<span data-ttu-id="0aa6c-191">Pour continuer le modèle de disjoncteur, les services doivent être tolérants aux pannes et résilients.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-191">To continue the circuit-breaker pattern, services need to be fault tolerant and resilient.</span></span> <span data-ttu-id="0aa6c-192">La tolérance de panne fait référence à la possibilité pour votre application de continuer à s’exécuter même après que des exceptions inattendues ou des États non valides ont été rencontrés.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-192">Fault tolerance refers to the ability of your application to continue running even after unexpected exceptions or invalid states are encountered.</span></span> <span data-ttu-id="0aa6c-193">La tolérance de panne est généralement une fonction du code lui-même et de la façon dont il est écrit pour gérer les exceptions.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-193">Fault tolerance is typically a function of the code itself and how it's written to handle exceptions.</span></span> <span data-ttu-id="0aa6c-194">La résilience fait référence à la capacité de récupération de l’application contre les défaillances.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-194">Resiliency refers to how capable the app is at recovering from failures.</span></span> <span data-ttu-id="0aa6c-195">La résilience est souvent gérée par la plateforme sans serveur.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-195">Resiliency is often managed by the serverless platform.</span></span> <span data-ttu-id="0aa6c-196">La plateforme doit pouvoir créer une nouvelle instance de fonction sans serveur lorsque l’instance existante échoue.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-196">The platform should be able to spin up a new serverless function instance when the existing one fails.</span></span> <span data-ttu-id="0aa6c-197">La plateforme doit également être suffisamment intelligente pour arrêter les nouvelles instances lorsque chaque nouvelle instance échoue.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-197">The platform should also be intelligent enough to stop spinning up new instances when every new instance fails.</span></span>

<span data-ttu-id="0aa6c-198">Pour plus d’informations, consultez [implémentation du modèle disjoncteur](../microservices/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="0aa6c-198">For more information, see [Implementing the Circuit Breaker pattern](../microservices/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span></span>

## <a name="versioning-and-greenblue-deployments"></a><span data-ttu-id="0aa6c-199">Gestion des versions et déploiements verts/bleus</span><span class="sxs-lookup"><span data-stu-id="0aa6c-199">Versioning and green/blue deployments</span></span>

<span data-ttu-id="0aa6c-200">L’un des principaux avantages de l’absence de serveur est la possibilité de mettre à niveau une fonction spécifique sans avoir à redéployer l’application entière.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-200">A major benefit of serverless is the ability to upgrade a specific function without having to redeploy the entire application.</span></span> <span data-ttu-id="0aa6c-201">Pour que les mises à niveau soient réussies, les fonctions doivent être gérées de manière à ce que les services qui les appellent soient acheminés vers la version correcte du code.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-201">For upgrades to be successful, functions must be versioned so that services calling them are routed to the correct version of code.</span></span> <span data-ttu-id="0aa6c-202">Une stratégie de déploiement de nouvelles versions est également importante.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-202">A strategy for deploying new versions is also important.</span></span> <span data-ttu-id="0aa6c-203">Une approche courante consiste à utiliser des « déploiements verts/bleus ».</span><span class="sxs-lookup"><span data-stu-id="0aa6c-203">A common approach is to use "green/blue deployments."</span></span> <span data-ttu-id="0aa6c-204">Le déploiement vert est la fonction active.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-204">The green deployment is the current function.</span></span> <span data-ttu-id="0aa6c-205">Une nouvelle version « Blue » est déployée en production et testée.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-205">A new "blue" version is deployed to production and tested.</span></span> <span data-ttu-id="0aa6c-206">Lorsque le test réussit, les versions vert et bleu sont échangées de sorte que la nouvelle version est publiée.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-206">When testing passes, the green and blue versions are swapped so the new version comes live.</span></span> <span data-ttu-id="0aa6c-207">Si des problèmes sont rencontrés, ils peuvent être permutés.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-207">If any issues are encountered, they can be swapped back.</span></span> <span data-ttu-id="0aa6c-208">La prise en charge du contrôle de version et des déploiements verts/bleus requiert une combinaison de la création des fonctions pour prendre en charge les modifications de version et l’utilisation de la plateforme sans serveur pour gérer les déploiements.</span><span class="sxs-lookup"><span data-stu-id="0aa6c-208">Supporting versioning and green/blue deployments requires a combination of authoring the functions to accommodate version changes and working with the serverless platform to handle deployments.</span></span> <span data-ttu-id="0aa6c-209">Une approche possible consiste à utiliser des proxies, décrits dans le chapitre consacré à la [plateforme sans serveur Azure](azure-functions.md#proxies) .</span><span class="sxs-lookup"><span data-stu-id="0aa6c-209">One possible approach is to use proxies, which are described in the [Azure serverless platform](azure-functions.md#proxies) chapter.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="0aa6c-210">[Précédent](serverless-architecture.md)
>[Suivant](serverless-design-examples.md)</span><span class="sxs-lookup"><span data-stu-id="0aa6c-210">[Previous](serverless-architecture.md)
[Next](serverless-design-examples.md)</span></span>
