---
title: Déployer des applications .NET existantes en tant que conteneurs Windows
description: Moderniser les applications .NET existantes avec les conteneurs Azure Cloud et Windows (fr) Déployer les applications .NET existantes sous forme de conteneurs Windows
ms.date: 04/29/2018
ms.openlocfilehash: 28568ca363bfc8100f78b100f8a7f0242c4f04c9
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/14/2020
ms.locfileid: "73089557"
---
# <a name="deploy-existing-net-apps-as-windows-containers"></a><span data-ttu-id="b6684-103">Déployer des applications .NET existantes en tant que conteneurs Windows</span><span class="sxs-lookup"><span data-stu-id="b6684-103">Deploy existing .NET apps as Windows containers</span></span>

<span data-ttu-id="b6684-104">Les déploiements basés sur les conteneurs Windows s’appliquent aux applications Cloud-Optimized et aux applications Cloud-Native.</span><span class="sxs-lookup"><span data-stu-id="b6684-104">Deployments that are based on Windows Containers are applicable to Cloud-Optimized applications and Cloud-Native applications.</span></span>

<span data-ttu-id="b6684-105">Cependant, dans ce guide et en particulier dans les sections suivantes, il se concentre principalement sur l’utilisation de conteneurs Windows pour les applications *cloud-Optimisées* où vous n’avez pas besoin de rearchitect votre application.</span><span class="sxs-lookup"><span data-stu-id="b6684-105">However, in this guide and especially in the following sections, it mostly focuses on using Windows Containers for *Cloud-Optimized* applications where you don’t need to rearchitect your application.</span></span>

## <a name="what-are-containers-linux-or-windows"></a><span data-ttu-id="b6684-106">Qu’est-ce qu’un conteneur ?</span><span class="sxs-lookup"><span data-stu-id="b6684-106">What are containers?</span></span> <span data-ttu-id="b6684-107">(Linux ou Windows)</span><span class="sxs-lookup"><span data-stu-id="b6684-107">(Linux or Windows)</span></span>

<span data-ttu-id="b6684-108">Les conteneurs sont un moyen de conclure une application dans son propre emballage isolé.</span><span class="sxs-lookup"><span data-stu-id="b6684-108">Containers are a way to wrap up an application into its own isolated package.</span></span> <span data-ttu-id="b6684-109">Dans son conteneur, l’application n’est pas affectée par les applications ou les processus qui existent à l’extérieur du conteneur.</span><span class="sxs-lookup"><span data-stu-id="b6684-109">In its container, the application is not affected by applications or processes that exist outside of the container.</span></span> <span data-ttu-id="b6684-110">Tout ce dont l’application dépend pour fonctionner avec succès comme un processus est à l’intérieur du conteneur.</span><span class="sxs-lookup"><span data-stu-id="b6684-110">Everything the application depends on to run successfully as a process is inside the container.</span></span> <span data-ttu-id="b6684-111">Partout où le conteneur peut se déplacer, les exigences de l’application seront toujours remplies, en termes de dépendances directes, parce qu’il est regroupé avec tout ce dont il a besoin pour fonctionner (dépendances de bibliothèque, runtimes, et ainsi de suite).</span><span class="sxs-lookup"><span data-stu-id="b6684-111">Wherever the container might move, the requirements of the application will always be met, in terms of direct dependencies, because it is bundled with everything that it needs to run (library dependencies, runtimes, and so on).</span></span>

<span data-ttu-id="b6684-112">La principale caractéristique d’un conteneur est qu’il rend l’environnement le même à travers différents déploiements parce que le conteneur lui-même est livré avec toutes les dépendances dont il a besoin.</span><span class="sxs-lookup"><span data-stu-id="b6684-112">The main characteristic of a container is that it makes the environment the same across different deployments because the container itself comes with all the dependencies it needs.</span></span> <span data-ttu-id="b6684-113">Vous pouvez déboiffer l’application sur votre machine, puis la déployer sur une autre machine, avec le même environnement garanti.</span><span class="sxs-lookup"><span data-stu-id="b6684-113">You can debug the application on your machine, and then deploy it to another machine, with the same environment guaranteed.</span></span>

<span data-ttu-id="b6684-114">Un conteneur est un exemple d’image de conteneur.</span><span class="sxs-lookup"><span data-stu-id="b6684-114">A container is an instance of a container image.</span></span> <span data-ttu-id="b6684-115">Une image de conteneur est un moyen de package une application ou un service (comme un instantané), puis de la déployer d’une manière fiable et reproductible.</span><span class="sxs-lookup"><span data-stu-id="b6684-115">A container image is a way to package an app or service (like a snapshot), and then deploy it in a reliable and reproducible way.</span></span> <span data-ttu-id="b6684-116">On pourrait dire que Docker n’est pas seulement une technologie, c’est aussi une philosophie et un processus.</span><span class="sxs-lookup"><span data-stu-id="b6684-116">You could say that Docker is not only a technology-it's also a philosophy and a process.</span></span>

<span data-ttu-id="b6684-117">À mesure que les conteneurs deviennent plus courants, ils deviennent une « unité de déploiement » à l’échelle de l’industrie.</span><span class="sxs-lookup"><span data-stu-id="b6684-117">As containers daily become more common, they are becoming an industry-wide "unit of deployment."</span></span>

## <a name="benefits-of-containers-docker-engine-on-linux-or-windows"></a><span data-ttu-id="b6684-118">Avantages des conteneurs (Moteur Docker sur Linux ou Windows)</span><span class="sxs-lookup"><span data-stu-id="b6684-118">Benefits of containers (Docker Engine on Linux or Windows)</span></span>

<span data-ttu-id="b6684-119">Construire des applications en utilisant des conteneurs - qui peuvent également être définis comme des blocs de construction légers - offre une augmentation significative de l’agilité pour la construction, l’expédition et l’exécution de toute application, à travers n’importe quelle infrastructure.</span><span class="sxs-lookup"><span data-stu-id="b6684-119">Building applications by using containers-which also might be defined as lightweight building blocks-offers a significant increase in agility for building, shipping, and running any application, across any infrastructure.</span></span>

<span data-ttu-id="b6684-120">Avec les conteneurs, vous pouvez prendre n’importe quelle application du développement à la production avec peu ou pas de changement de code, grâce à l’intégration Docker à travers les outils de développeur Microsoft, les systèmes d’exploitation et le cloud.</span><span class="sxs-lookup"><span data-stu-id="b6684-120">With containers, you can take any app from development to production with little or no code change, thanks to Docker integration across Microsoft developer tools, operating systems, and cloud.</span></span>

<span data-ttu-id="b6684-121">Lorsque vous vous déployez dans des VM simples, vous avez probablement déjà une méthode en place pour déployer ASP.NET applications dans vos VM.</span><span class="sxs-lookup"><span data-stu-id="b6684-121">When you deploy to plain VMs, you probably already have a method in place for deploying ASP.NET apps to your VMs.</span></span> <span data-ttu-id="b6684-122">Il est probable, cependant, que votre méthode implique plusieurs étapes manuelles ou des processus automatisés complexes en utilisant un outil de déploiement comme Puppet, ou un outil similaire.</span><span class="sxs-lookup"><span data-stu-id="b6684-122">It's likely, though, that your method involves multiple manual steps or complex automated processes by using a deployment tool like Puppet, or a similar tool.</span></span> <span data-ttu-id="b6684-123">Vous devrez peut-être effectuer des tâches telles que la modification d’éléments de configuration, la copie du contenu de l’application entre les serveurs et l’exécution de programmes de configuration interactifs basés sur des configurations .msi, suivies de tests.</span><span class="sxs-lookup"><span data-stu-id="b6684-123">You might need to perform tasks like modifying configuration items, copying application content between servers, and running interactive setup programs based on .msi setups, followed by testing.</span></span> <span data-ttu-id="b6684-124">Toutes ces étapes du déploiement ajoutent du temps et des risques aux déploiements.</span><span class="sxs-lookup"><span data-stu-id="b6684-124">All those steps in the deployment add time and risk to deployments.</span></span> <span data-ttu-id="b6684-125">Vous obtiendrez des échecs chaque fois qu’une dépendance n’est pas présente dans l’environnement cible.</span><span class="sxs-lookup"><span data-stu-id="b6684-125">You will get failures whenever a dependency is not present in the target environment.</span></span>

<span data-ttu-id="b6684-126">Dans Windows Containers, le processus d’applications d’emballage est entièrement automatisé.</span><span class="sxs-lookup"><span data-stu-id="b6684-126">In Windows Containers, the process of packaging applications is fully automated.</span></span> <span data-ttu-id="b6684-127">Windows Containers est basé sur la plate-forme Docker, qui offre des mises à jour automatiques et des réductions pour les déploiements de conteneurs.</span><span class="sxs-lookup"><span data-stu-id="b6684-127">Windows Containers is based on the Docker platform, which offers automatic updates and rollbacks for container deployments.</span></span> <span data-ttu-id="b6684-128">La principale amélioration que vous obtenez de l’utilisation du moteur Docker est que vous créez des images, qui sont comme des instantanés de votre application, avec toutes ses dépendances.</span><span class="sxs-lookup"><span data-stu-id="b6684-128">The main improvement you get from using the Docker engine is that you create images, which are like snapshots of your application, with all its dependencies.</span></span> <span data-ttu-id="b6684-129">Les images sont des images Docker (une image de conteneur Windows, dans ce cas).</span><span class="sxs-lookup"><span data-stu-id="b6684-129">The images are Docker images (a Windows container image, in this case).</span></span> <span data-ttu-id="b6684-130">Les images s’exécutent ASP.NET applications dans des conteneurs, sans revenir au code source.</span><span class="sxs-lookup"><span data-stu-id="b6684-130">The images run ASP.NET apps in containers, without going back to source code.</span></span> <span data-ttu-id="b6684-131">L’instantané du conteneur devient l’unité de déploiement.</span><span class="sxs-lookup"><span data-stu-id="b6684-131">The container snapshot becomes the unit of deployment.</span></span>

<span data-ttu-id="b6684-132">De nombreuses organisations conteneurisent les applications monolithiques existantes pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="b6684-132">Many organizations are containerizing existing monolithic applications for the following reasons:</span></span>

- <span data-ttu-id="b6684-133">**Libérer l’agilité grâce à un déploiement amélioré**.</span><span class="sxs-lookup"><span data-stu-id="b6684-133">**Release agility through improved deployment**.</span></span> <span data-ttu-id="b6684-134">Les conteneurs offrent un contrat de déploiement cohérent entre le développement et les opérations.</span><span class="sxs-lookup"><span data-stu-id="b6684-134">Containers offer a consistent deployment contract between development and operations.</span></span> <span data-ttu-id="b6684-135">Lorsque vous utilisez des conteneurs, vous n’entendrez pas les développeurs dire: «Cela fonctionne sur ma machine, pourquoi pas en production?"</span><span class="sxs-lookup"><span data-stu-id="b6684-135">When you use containers, you won't hear developers say, "It works on my machine, why not in production?"</span></span> <span data-ttu-id="b6684-136">Ils peuvent dire : « Il fonctionne comme un conteneur, donc il fonctionnera en production. »</span><span class="sxs-lookup"><span data-stu-id="b6684-136">They can say, "It runs as a container, so it will run in production."</span></span> <span data-ttu-id="b6684-137">L’application emballée, avec toutes ses dépendances, peut être exécutée dans n’importe quel environnement supporté à base de conteneurs.</span><span class="sxs-lookup"><span data-stu-id="b6684-137">The packaged application, with all its dependencies, can be executed in any supported container-based environment.</span></span> <span data-ttu-id="b6684-138">Il fonctionnera comme il était destiné à fonctionner dans toutes les cibles de déploiement (dev, QA, mise en scène, production).</span><span class="sxs-lookup"><span data-stu-id="b6684-138">It will run the way it was intended to run in all deployment targets (dev, QA, staging, production).</span></span> <span data-ttu-id="b6684-139">Les conteneurs éliminent la plupart des frictions lorsqu’ils se déplacent d’une étape à l’autre, ce qui améliore considérablement le déploiement, et vous pouvez expédier plus rapidement.</span><span class="sxs-lookup"><span data-stu-id="b6684-139">Containers eliminate most frictions when they move from one stage to the next, which greatly improves deployment, and you can ship faster.</span></span>

- <span data-ttu-id="b6684-140">**Réductions de coûts**.</span><span class="sxs-lookup"><span data-stu-id="b6684-140">**Cost reductions**.</span></span> <span data-ttu-id="b6684-141">Les conteneurs entraînent des coûts plus bas, soit par la consolidation et la suppression du matériel existant, soit par l’exécution d’applications à une densité plus élevée par unité de matériel.</span><span class="sxs-lookup"><span data-stu-id="b6684-141">Containers lead to lower costs, either by the consolidation and removal of existing hardware, or from running applications at a higher density per unit of hardware.</span></span>

- <span data-ttu-id="b6684-142">**Portabilité**.</span><span class="sxs-lookup"><span data-stu-id="b6684-142">**Portability**.</span></span> <span data-ttu-id="b6684-143">Les conteneurs sont modulaires et portables.</span><span class="sxs-lookup"><span data-stu-id="b6684-143">Containers are modular and portable.</span></span> <span data-ttu-id="b6684-144">Les conteneurs Docker sont pris en charge sur n’importe quel système d’exploitation serveur (Linux et Windows), dans n’importe quel grand cloud public (Microsoft Azure, Amazon AWS, Google, IBM), et dans des environnements cloud privés ou hybrides.</span><span class="sxs-lookup"><span data-stu-id="b6684-144">Docker containers are supported on any server operating system (Linux and Windows), in any major public cloud (Microsoft Azure, Amazon AWS, Google, IBM), and in on-premises and private or hybrid cloud environments.</span></span>

- <span data-ttu-id="b6684-145">**Contrôle**.</span><span class="sxs-lookup"><span data-stu-id="b6684-145">**Control**.</span></span> <span data-ttu-id="b6684-146">Les conteneurs offrent un environnement flexible et sécurisé qui est contrôlé au niveau du conteneur.</span><span class="sxs-lookup"><span data-stu-id="b6684-146">Containers offer a flexible and secure environment that's controlled at the container level.</span></span> <span data-ttu-id="b6684-147">Un conteneur peut être sécurisé, isolé et même limité en fixant des politiques de contrainte d’exécution sur le conteneur.</span><span class="sxs-lookup"><span data-stu-id="b6684-147">A container can be secured, isolated, and even limited by setting execution constraint policies on the container.</span></span> <span data-ttu-id="b6684-148">Comme indiqué dans la section sur les conteneurs Windows, Windows Server 2016 et Hyper-V offrent des options de support d’entreprise supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="b6684-148">As detailed in the section about Windows Containers, Windows Server 2016 and Hyper-V containers offer additional enterprise support options.</span></span>

<span data-ttu-id="b6684-149">Des améliorations significatives de l’agilité, de la portabilité et du contrôle entraînent en fin de compte des réductions de coûts importantes lorsque vous utilisez des conteneurs pour développer et entretenir des applications.</span><span class="sxs-lookup"><span data-stu-id="b6684-149">Significant improvements in agility, portability, and control ultimately lead to significant cost reductions when you use containers to develop and maintain applications.</span></span>

## <a name="what-is-docker"></a><span data-ttu-id="b6684-150">Présentation de Docker</span><span class="sxs-lookup"><span data-stu-id="b6684-150">What is Docker?</span></span>

<span data-ttu-id="b6684-151">[Docker](https://www.docker.com/) est un [projet open-source](https://github.com/docker/docker) qui automatise le déploiement d’applications comme des conteneurs portables autosuffisants qui peuvent fonctionner dans le cloud ou sur place.</span><span class="sxs-lookup"><span data-stu-id="b6684-151">[Docker](https://www.docker.com/) is an [open-source project](https://github.com/docker/docker) that automates the deployment of applications as portable, self-sufficient containers that can run in the cloud or on-premises.</span></span> <span data-ttu-id="b6684-152">Docker est également le nom de la [société](https://www.docker.com/) qui développe et diffuse cette technologie.</span><span class="sxs-lookup"><span data-stu-id="b6684-152">Docker is also a [company](https://www.docker.com/) that promotes and evolves this technology.</span></span> <span data-ttu-id="b6684-153">La société travaille en collaboration avec les fournisseurs de cloud, Linux et Windows, y compris Microsoft.</span><span class="sxs-lookup"><span data-stu-id="b6684-153">The company works in collaboration with cloud, Linux, and Windows vendors, including Microsoft.</span></span>

![Diagramme montrant comment Docker déploie des conteneurs dans le nuage hybride.](./media/deploy-existing-net-apps-as-windows-containers/docker-deploys-containers-all-layers.png)

<span data-ttu-id="b6684-155">**Figure 4-6.**</span><span class="sxs-lookup"><span data-stu-id="b6684-155">**Figure 4-6.**</span></span> <span data-ttu-id="b6684-156">Docker déploie des conteneurs dans toutes les couches du cloud hybride</span><span class="sxs-lookup"><span data-stu-id="b6684-156">Docker deploys containers at all layers of the hybrid cloud</span></span>

<span data-ttu-id="b6684-157">Pour quelqu’un familier avec les machines virtuelles, les conteneurs peuvent sembler être remarquablement similaires.</span><span class="sxs-lookup"><span data-stu-id="b6684-157">To someone familiar with virtual machines, containers might appear to be remarkably similar.</span></span> <span data-ttu-id="b6684-158">Un conteneur fonctionne un système d’exploitation, dispose d’un système de fichiers et peut être consulté sur un réseau, tout comme un système informatique physique ou virtuel.</span><span class="sxs-lookup"><span data-stu-id="b6684-158">A container runs an operating system, has a file system, and can be accessed over a network, just like a physical or virtual computer system.</span></span> <span data-ttu-id="b6684-159">Ceci dit, la technologie et les concepts derrière les conteneurs sont très différents de ceux des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="b6684-159">However, the technology and concepts behind containers are vastly different from virtual machines.</span></span> <span data-ttu-id="b6684-160">Du point de vue du développeur, un conteneur doit être traité davantage comme un seul processus.</span><span class="sxs-lookup"><span data-stu-id="b6684-160">From a developer point of view, a container must be treated more like a single process.</span></span> <span data-ttu-id="b6684-161">En fait, un conteneur a un seul point d’entrée pour un processus.</span><span class="sxs-lookup"><span data-stu-id="b6684-161">In fact, a container has a single entry point for one process.</span></span>

<span data-ttu-id="b6684-162">Les conteneurs Docker (pour la simplicité, *les conteneurs)* peuvent fonctionner localement sur Linux et Windows.</span><span class="sxs-lookup"><span data-stu-id="b6684-162">Docker containers (for simplicity, *containers*) can run natively on Linux and Windows.</span></span> <span data-ttu-id="b6684-163">Lors de l’exécution de conteneurs réguliers, les conteneurs Windows ne peuvent s’exécuter que sur les hôtes Windows (un serveur hôte ou un VM), et les conteneurs Linux ne peuvent s’exécuter que sur les hôtes Linux.</span><span class="sxs-lookup"><span data-stu-id="b6684-163">When running regular containers, Windows containers can run only on Windows hosts (a host server or a VM), and Linux containers can run only on Linux hosts.</span></span> <span data-ttu-id="b6684-164">Cependant, dans les versions récentes de Windows Server et des conteneurs Hyper-V, un conteneur Linux peut également fonctionner nativement sur Windows Server en utilisant la technologie d’isolement Hyper-V qui n’est actuellement disponible que dans Windows Server Containers.</span><span class="sxs-lookup"><span data-stu-id="b6684-164">However, in recent versions of Windows Server and Hyper-V containers, a Linux container also can run natively on Windows Server by using the Hyper-V isolation technology that currently is available only in Windows Server Containers.</span></span>

<span data-ttu-id="b6684-165">Dans un proche avenir, les environnements mixtes qui ont à la fois des conteneurs Linux et Windows seront possibles et même communs.</span><span class="sxs-lookup"><span data-stu-id="b6684-165">In the near future, mixed environments that have both Linux and Windows containers will be possible and even common.</span></span>

## <a name="benefits-of-windows-containers-for-your-existing-net-applications"></a><span data-ttu-id="b6684-166">Avantages des conteneurs Windows pour vos applications .NET existantes</span><span class="sxs-lookup"><span data-stu-id="b6684-166">Benefits of Windows Containers for your existing .NET applications</span></span>

<span data-ttu-id="b6684-167">Les avantages de l’utilisation de Windows Containers sont fondamentalement les mêmes avantages que vous obtenez des conteneurs en général.</span><span class="sxs-lookup"><span data-stu-id="b6684-167">The benefits of using Windows Containers are fundamentally the same benefits you get from containers in general.</span></span> <span data-ttu-id="b6684-168">L’utilisation de Windows Containers consiste à améliorer considérablement l’agilité, la portabilité et le contrôle.</span><span class="sxs-lookup"><span data-stu-id="b6684-168">Using Windows Containers is about greatly improving agility, portability, and control.</span></span>

<span data-ttu-id="b6684-169">Les applications .NET existantes se réfèrent aux applications créées à l’aide du cadre .NET.</span><span class="sxs-lookup"><span data-stu-id="b6684-169">Existing .NET applications refer to those applications that were created using the .NET Framework.</span></span> <span data-ttu-id="b6684-170">Par exemple, ils peuvent être traditionnels ASP.NET applications Web- ils n’utilisent pas .NET Core, qui est plus récent et fonctionne en multi-plateforme sur Linux, Windows et MacOS.</span><span class="sxs-lookup"><span data-stu-id="b6684-170">For example, they might be traditional ASP.NET web applications-they don't use .NET Core, which is newer and runs cross-platform on Linux, Windows, and MacOS.</span></span>

<span data-ttu-id="b6684-171">La principale dépendance dans le cadre .NET est Windows.</span><span class="sxs-lookup"><span data-stu-id="b6684-171">The main dependency in the .NET Framework is Windows.</span></span> <span data-ttu-id="b6684-172">Il a également des dépendances secondaires, comme l’IIS, et System.Web dans les ASP.NET traditionnelles.</span><span class="sxs-lookup"><span data-stu-id="b6684-172">It also has secondary dependencies, like IIS, and System.Web in traditional ASP.NET.</span></span>

<span data-ttu-id="b6684-173">Une application cadre .NET doit s’exécuter sur Windows, point final.</span><span class="sxs-lookup"><span data-stu-id="b6684-173">A .NET Framework application must run on Windows, period.</span></span> <span data-ttu-id="b6684-174">Si vous souhaitez conteneuriser les applications cadres .NET existantes et que vous ne pouvez pas ou ne voulez pas investir dans une migration vers .NET Core ("Si cela fonctionne correctement, ne le migrez pas"), le seul choix que vous avez pour les conteneurs est d’utiliser windows Containers.</span><span class="sxs-lookup"><span data-stu-id="b6684-174">If you want to containerize existing .NET Framework applications and you can't or don't want to invest in a migration to .NET Core ("If it works properly, don't migrate it"), the only choice you have for containers is to use Windows Containers.</span></span>

<span data-ttu-id="b6684-175">Ainsi, l’un des principaux avantages de Windows Containers est qu’ils vous offrent un moyen de moderniser vos applications cadre .NET existantes qui sont en cours d’exécution sur la conteneurisation Windows-through.</span><span class="sxs-lookup"><span data-stu-id="b6684-175">So, one of the main benefits of Windows Containers is that they offer you a way to modernize your existing .NET Framework applications that are running on Windows-through containerization.</span></span> <span data-ttu-id="b6684-176">En fin de compte, Windows Containers vous tire les avantages que vous recherchez en utilisant des conteneurs d’agilité, de portabilité et d’un meilleur contrôle.</span><span class="sxs-lookup"><span data-stu-id="b6684-176">Ultimately, Windows Containers gets you the benefits that you are looking for by using containers-agility, portability, and better control.</span></span>

## <a name="choose-an-os-to-target-with-net-based-containers"></a><span data-ttu-id="b6684-177">Choisissez un système d’exploitation à cibler avec . Conteneurs à base de NET</span><span class="sxs-lookup"><span data-stu-id="b6684-177">Choose an OS to target with .NET-based containers</span></span>

<span data-ttu-id="b6684-178">Compte tenu de la diversité des systèmes d’exploitation qui sont pris en charge par Docker, ainsi que les différences entre .NET Framework et .NET Core, vous devez cibler un système d’exploitation spécifique et des versions spécifiques basées sur le cadre que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="b6684-178">Given the diversity of operating systems that are supported by Docker, as well as the differences between .NET Framework and .NET Core, you should target a specific OS and specific versions based on the framework you are using.</span></span>

<span data-ttu-id="b6684-179">Pour Windows, vous pouvez utiliser Windows Server Core ou Windows Nano Server.</span><span class="sxs-lookup"><span data-stu-id="b6684-179">For Windows, you can use Windows Server Core or Windows Nano Server.</span></span> <span data-ttu-id="b6684-180">Ces versions Windows fournissent différentes caractéristiques (comme IIS par rapport à un serveur Web auto-hébergé comme Kestrel) qui pourraient être nécessaires par .NET Framework ou .NET Core applications.</span><span class="sxs-lookup"><span data-stu-id="b6684-180">These Windows versions provide different characteristics (like IIS versus a self-hosted web server like Kestrel) that might be needed by .NET Framework or .NET Core applications.</span></span>

<span data-ttu-id="b6684-181">Pour Linux, plusieurs distributions sont disponibles et prises en charge dans les images .NET Docker officielles (comme Debian).</span><span class="sxs-lookup"><span data-stu-id="b6684-181">For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).</span></span>

<span data-ttu-id="b6684-182">La figure 4-7 affiche les versions OS que vous pouvez cibler, selon la version de l’application du cadre .NET.</span><span class="sxs-lookup"><span data-stu-id="b6684-182">Figure 4-7 shows OS versions that you can target, depending on the app's version of the .NET Framework.</span></span>

![Diagramme montrant ce que le système d’exploitation cibler basé sur la version cadre .NET.](./media/deploy-existing-net-apps-as-windows-containers/dotnet-framework-operating-systems.png)

<span data-ttu-id="b6684-184">**Figure 4-7.**</span><span class="sxs-lookup"><span data-stu-id="b6684-184">**Figure 4-7.**</span></span> <span data-ttu-id="b6684-185">Systèmes d’exploitation à cibler basés sur la version cadre .NET</span><span class="sxs-lookup"><span data-stu-id="b6684-185">Operating systems to target based on .NET Framework version</span></span>

<span data-ttu-id="b6684-186">Dans les scénarios de migration pour les applications existantes ou héritées qui sont basées sur des applications cadre .NET, les principales dépendances sont sur Windows et IIS.</span><span class="sxs-lookup"><span data-stu-id="b6684-186">In migration scenarios for existing or legacy applications that are based on .NET Framework applications, the main dependencies are on Windows and IIS.</span></span> <span data-ttu-id="b6684-187">Votre seule option est d’utiliser des images Docker basées sur Windows Server Core et le cadre .NET.</span><span class="sxs-lookup"><span data-stu-id="b6684-187">Your only option is to use Docker images based on Windows Server Core and the .NET Framework.</span></span>

<span data-ttu-id="b6684-188">Lorsque vous ajoutez le nom d’image à votre fichier Dockerfile, vous pouvez sélectionner le système d’exploitation et la version en utilisant une balise, comme dans les exemples suivants pour les images de conteneurs Windows basées sur le Cadre .NET :</span><span class="sxs-lookup"><span data-stu-id="b6684-188">When you add the image name to your Dockerfile file, you can select the operating system and version by using a tag, as in the following examples for .NET Framework-based Windows container images:</span></span>

> | <span data-ttu-id="b6684-189">**étiquette**</span><span class="sxs-lookup"><span data-stu-id="b6684-189">**Tag**</span></span> | <span data-ttu-id="b6684-190">**Système et version**</span><span class="sxs-lookup"><span data-stu-id="b6684-190">**System and version**</span></span> |
> |---|---|
> | <span data-ttu-id="b6684-191">**microsoft/dotnet-framework:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="b6684-191">**microsoft/dotnet-framework:4.x-windowsservercore**</span></span> | <span data-ttu-id="b6684-192">.NET Framework 4.x sur Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="b6684-192">.NET Framework 4.x on Windows Server Core</span></span> |
> | <span data-ttu-id="b6684-193">**microsoft/aspnet:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="b6684-193">**microsoft/aspnet:4.x-windowsservercore**</span></span> | <span data-ttu-id="b6684-194">.NET Framework 4.x avec une personnalisation ASP.NET supplémentaire, sur Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="b6684-194">.NET Framework 4.x with additional ASP.NET customization, on Windows Server Core</span></span> |

<span data-ttu-id="b6684-195">Pour .NET Core (plateforme croisée pour Linux et Windows), les balises ressembleraient à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="b6684-195">For .NET Core (cross-platform for Linux and Windows), the tags would look like the following:</span></span>

> | <span data-ttu-id="b6684-196">**étiquette**</span><span class="sxs-lookup"><span data-stu-id="b6684-196">**Tag**</span></span> | <span data-ttu-id="b6684-197">**Système et version**</span><span class="sxs-lookup"><span data-stu-id="b6684-197">**System and version**</span></span>
> |---|---|
> | <span data-ttu-id="b6684-198">**microsoft/dotnet:2.0.0-runtime**</span><span class="sxs-lookup"><span data-stu-id="b6684-198">**microsoft/dotnet:2.0.0-runtime**</span></span> | <span data-ttu-id="b6684-199">.NET Core 2.0 runtime-seulement sur Linux</span><span class="sxs-lookup"><span data-stu-id="b6684-199">.NET Core 2.0 runtime-only on Linux</span></span> |
> | <span data-ttu-id="b6684-200">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span><span class="sxs-lookup"><span data-stu-id="b6684-200">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span></span> | <span data-ttu-id="b6684-201">.NET Core 2.0 runtime-seulement sur Windows Nano Server</span><span class="sxs-lookup"><span data-stu-id="b6684-201">.NET Core 2.0 runtime-only on Windows Nano Server</span></span> |

### <a name="multi-arch-images"></a><span data-ttu-id="b6684-202">Images multi-arcs</span><span class="sxs-lookup"><span data-stu-id="b6684-202">Multi-arch images</span></span>

<span data-ttu-id="b6684-203">À partir de la mi-2017, vous pouvez également utiliser une nouvelle fonctionnalité dans Docker appelée images [multi-arc.](https://github.com/moby/moby/issues/15866)</span><span class="sxs-lookup"><span data-stu-id="b6684-203">Beginning in mid-2017, you also can use a new feature in Docker called [multi-arch](https://github.com/moby/moby/issues/15866) images.</span></span> <span data-ttu-id="b6684-204">.NET Core Docker images peuvent utiliser des balises multi-arc.</span><span class="sxs-lookup"><span data-stu-id="b6684-204">.NET Core Docker images can use multi-arch tags.</span></span> <span data-ttu-id="b6684-205">Vos fichiers Dockerfile n’ont plus besoin de définir le système d’exploitation que vous ciblez.</span><span class="sxs-lookup"><span data-stu-id="b6684-205">Your Dockerfile files no longer need to define the operating system that you are targeting.</span></span> <span data-ttu-id="b6684-206">La fonction multi-arc permet d’utiliser une seule balise sur plusieurs configurations de machines.</span><span class="sxs-lookup"><span data-stu-id="b6684-206">The multi-arch feature allows a single tag to be used across multiple machine configurations.</span></span> <span data-ttu-id="b6684-207">Par exemple, avec multi-arch, vous pouvez utiliser une balise commune: **microsoft/dotnet:2.0.0-runtime**.</span><span class="sxs-lookup"><span data-stu-id="b6684-207">For instance, with multi-arch, you can use one common tag: **microsoft/dotnet:2.0.0-runtime**.</span></span> <span data-ttu-id="b6684-208">Si vous tirez cette étiquette à partir d’un environnement de conteneur Linux, vous obtenez l’image basée sur Debian.</span><span class="sxs-lookup"><span data-stu-id="b6684-208">If you pull that tag from a Linux container environment, you get the Debian-based image.</span></span> <span data-ttu-id="b6684-209">Si vous tirez cette étiquette à partir d’un environnement de conteneur Windows, vous obtenez l’image basée sur Nano Server.</span><span class="sxs-lookup"><span data-stu-id="b6684-209">If you pull that tag from a Windows container environment, you get the Nano Server-based image.</span></span>

<span data-ttu-id="b6684-210">Pour les images cadre .NET, parce que le cadre traditionnel .NET ne prend en charge que Windows, vous ne pouvez pas utiliser la fonction multi-arc.</span><span class="sxs-lookup"><span data-stu-id="b6684-210">For .NET Framework images, because the traditional .NET Framework supports only Windows, you cannot use the multi-arch feature.</span></span>

## <a name="windows-container-types"></a><span data-ttu-id="b6684-211">Types de conteneurs Windows</span><span class="sxs-lookup"><span data-stu-id="b6684-211">Windows container types</span></span>

<span data-ttu-id="b6684-212">Comme les conteneurs Linux, les conteneurs Windows Server sont gérés en utilisant Docker Engine.</span><span class="sxs-lookup"><span data-stu-id="b6684-212">Like Linux containers, Windows Server containers are managed by using Docker Engine.</span></span> <span data-ttu-id="b6684-213">Contrairement aux conteneurs Linux, les conteneurs Windows comprennent deux types de conteneurs différents, ou exécuter des conteneurs De serveur Windows et l’isolement Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="b6684-213">Unlike Linux containers, Windows containers include two different container types, or run times-Windows Server containers and Hyper-V isolation.</span></span>

<span data-ttu-id="b6684-214">**Conteneurs Windows Server**: Fournit l’isolement des applications grâce à la technologie d’isolation du processus et de l’espace de nom.</span><span class="sxs-lookup"><span data-stu-id="b6684-214">**Windows Server containers**: Provides application isolation through process and namespace isolation technology.</span></span> <span data-ttu-id="b6684-215">Un conteneur Windows Server partage un noyau avec l’hôte du conteneur et tous les conteneurs qui sont en cours d’exécution sur l’hôte.</span><span class="sxs-lookup"><span data-stu-id="b6684-215">A Windows Server container shares a kernel with the container host and all containers that are running on the host.</span></span> <span data-ttu-id="b6684-216">Ces conteneurs ne créent pas de frontière de sécurité contre le code hostile et ne doivent pas être utilisés pour isoler du code non fiable.</span><span class="sxs-lookup"><span data-stu-id="b6684-216">These containers do not provide a hostile security boundary and should not be used to isolate untrusted code.</span></span> <span data-ttu-id="b6684-217">En raison de l’espace de noyau partagé, ces conteneurs requièrent la même version et configuration de noyau.</span><span class="sxs-lookup"><span data-stu-id="b6684-217">Because of the shared kernel space, these containers require the same kernel version and configuration.</span></span>

<span data-ttu-id="b6684-218">**Isolation Hyper-V**: Élargit l’isolement fourni par Windows Server Containers en exécutant chaque conteneur sur un VM hautement optimisé.</span><span class="sxs-lookup"><span data-stu-id="b6684-218">**Hyper-V isolation**: Expands on the isolation provided by Windows Server Containers by running each container on a highly optimized VM.</span></span> <span data-ttu-id="b6684-219">Dans cette configuration, le noyau de l’hôte de conteneur n’est pas partagé avec d’autres conteneurs exécutés sur l’hôte.</span><span class="sxs-lookup"><span data-stu-id="b6684-219">In this configuration, the kernel of the container host is not shared with other containers on the same host.</span></span> <span data-ttu-id="b6684-220">Ces conteneurs sont conçus pour l’hébergement multitensif hostile, avec les mêmes garanties de sécurité d’un VM.</span><span class="sxs-lookup"><span data-stu-id="b6684-220">These containers are designed for hostile multitenant hosting, with the same security assurances of a VM.</span></span> <span data-ttu-id="b6684-221">Étant donné que ces conteneurs ne partagent pas le noyau avec l’hôte ou d’autres conteneurs sur l’hôte, ils peuvent exécuter des grains avec différentes versions et configurations (avec des versions prises en charge).</span><span class="sxs-lookup"><span data-stu-id="b6684-221">Because these containers don't share the kernel with the host or other containers on the host, they can run kernels with different versions and configurations (with supported versions).</span></span> <span data-ttu-id="b6684-222">Par exemple, tous les conteneurs Windows sur Windows 10 utilisent l’isolement Hyper-V pour utiliser la version et la configuration du noyau Windows Server.</span><span class="sxs-lookup"><span data-stu-id="b6684-222">For example, all Windows containers on Windows 10 use Hyper-V isolation to utilize the Windows Server kernel version and configuration.</span></span>

<span data-ttu-id="b6684-223">L’exécution d’un conteneur sur Windows avec ou sans l’isolement Hyper-V est une décision de durée.</span><span class="sxs-lookup"><span data-stu-id="b6684-223">Running a container on Windows with or without Hyper-V isolation is a run-time decision.</span></span> <span data-ttu-id="b6684-224">Vous pouvez choisir de créer le conteneur avec l’isolement Hyper-V initialement, et au moment de l’exécution, choisissez de l’exécuter comme un conteneur Windows Server à la place.</span><span class="sxs-lookup"><span data-stu-id="b6684-224">You might choose to create the container with Hyper-V isolation initially, and at run time, choose to run it as a Windows Server container instead.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="b6684-225">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="b6684-225">Additional resources</span></span>

- <span data-ttu-id="b6684-226">**Documentation Windows Containers**</span><span class="sxs-lookup"><span data-stu-id="b6684-226">**Windows Containers documentation**</span></span>

    <https://docs.microsoft.com/virtualization/windowscontainers/>

- <span data-ttu-id="b6684-227">**Principes fondamentaux des conteneurs Windows**</span><span class="sxs-lookup"><span data-stu-id="b6684-227">**Windows Containers fundamentals**</span></span>

    <https://docs.microsoft.com/virtualization/windowscontainers/about/>

- <span data-ttu-id="b6684-228">**Infographie: Microsoft et les conteneurs**</span><span class="sxs-lookup"><span data-stu-id="b6684-228">**Infographic: Microsoft and containers**</span></span>

    <https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf>

## <a name="the-container-ecosystem-in-azure"></a><span data-ttu-id="b6684-229">L’écosystème des conteneurs en Azure</span><span class="sxs-lookup"><span data-stu-id="b6684-229">The container ecosystem in Azure</span></span>

<span data-ttu-id="b6684-230">Dans les sections précédentes, il a été expliqué quels sont les avantages des conteneurs Docker ainsi que des détails sur les images de conteneurs spécifiques pour les applications .NET.</span><span class="sxs-lookup"><span data-stu-id="b6684-230">In previous sections, it’s been explained what the benefits of Docker containers are as well as details on the specific container images for .NET applications.</span></span> <span data-ttu-id="b6684-231">Toute cette information générique est fondamentale afin de développer ou de conteneuriser une application.</span><span class="sxs-lookup"><span data-stu-id="b6684-231">All that generic information is fundamental in order to develop or containerize an application.</span></span>
<span data-ttu-id="b6684-232">Cependant, lorsqu’il s’agit de l’environnement de déploiement de la production ou même des environnements QA et Dev/Test, Microsoft Azure offre une variété ouverte et large de choix, un écosystème de conteneurs complet dans le nuage (indiqué dans le diagramme ci-dessous).</span><span class="sxs-lookup"><span data-stu-id="b6684-232">However, when thinking about the production deployment environment or even QA and Dev/Test environments, Microsoft Azure provides an open and broad variety of choices, a full container ecosystem in the cloud (shown in the diagram below).</span></span> <span data-ttu-id="b6684-233">En fonction des besoins de votre application spécifique, vous devez choisir l’un ou l’autre produit Azure.</span><span class="sxs-lookup"><span data-stu-id="b6684-233">Depending on your specific application’s needs, you should choose one or another Azure product.</span></span>

![Diagramme de l’écosystème des conteneurs à Azure.](./media/deploy-existing-net-apps-as-windows-containers/azure-container-ecosystem.png)

<span data-ttu-id="b6684-235">**Figure 4-7.5.**</span><span class="sxs-lookup"><span data-stu-id="b6684-235">**Figure 4-7.5.**</span></span> <span data-ttu-id="b6684-236">L’écosystème des conteneurs en Azure</span><span class="sxs-lookup"><span data-stu-id="b6684-236">The container ecosystem in Azure</span></span>

<span data-ttu-id="b6684-237">De l’écosystème des conteneurs d’Azure, les produits suivants supportent les conteneurs considérés comme des infrastructures :</span><span class="sxs-lookup"><span data-stu-id="b6684-237">From the container ecosystem in Azure, the following products supporting containers that are considered infrastructure:</span></span>

- <span data-ttu-id="b6684-238">**Exemples de conteneurs Azure (ACI)**</span><span class="sxs-lookup"><span data-stu-id="b6684-238">**Azure Container Instances (ACI)**</span></span>
- <span data-ttu-id="b6684-239">**Machines virtuelles Azure** (avec le soutien du conteneur)</span><span class="sxs-lookup"><span data-stu-id="b6684-239">**Azure Virtual Machines** (With container's support)</span></span>
- <span data-ttu-id="b6684-240">**Azure Virtual Machine Scale Sets** (Avec le support du conteneur)</span><span class="sxs-lookup"><span data-stu-id="b6684-240">**Azure Virtual Machine Scale Sets** (With container's support)</span></span>

<span data-ttu-id="b6684-241">De ces trois, ACI offre un grand avantage, qui est le fait que vous n’avez pas besoin de maintenir le système d’exploitation sous-jacent, pas besoin pour vous de mettre à niveau / patch, etc, mais ACI est toujours positionné dans le niveau de l’infrastructure, comme mieux expliqué dans les sections à venir de ce livre.</span><span class="sxs-lookup"><span data-stu-id="b6684-241">From those three, ACI provides a great benefit, which is the fact that you don't need to maintain the underlying OS, no need for you to upgrade/patch, etc. but ACI still is positioned in the infrastructure level, as better explained in the upcoming sections of this book.</span></span>

<span data-ttu-id="b6684-242">Les produits azuréens supportant les conteneurs qui sont en même temps positionnés davantage au niveau PaaS (Plateforme en tant que Service) sont les :</span><span class="sxs-lookup"><span data-stu-id="b6684-242">The products in Azure supporting containers that are at the same time positioned more in the PaaS (Platform as a Service) level are:</span></span>

- <span data-ttu-id="b6684-243">**Service d’application Azure**</span><span class="sxs-lookup"><span data-stu-id="b6684-243">**Azure App Service**</span></span>
- <span data-ttu-id="b6684-244">**Azure Kubernetes Service (AKS et ACS)**</span><span class="sxs-lookup"><span data-stu-id="b6684-244">**Azure Kubernetes Service (AKS and ACS)**</span></span>
- <span data-ttu-id="b6684-245">**Azure Batch**</span><span class="sxs-lookup"><span data-stu-id="b6684-245">**Azure Batch**</span></span>

<span data-ttu-id="b6684-246">Ensuite, Azure Container Registry est un registre de conteneurs évolutif élevé hébergé en Azure que vous pouvez utiliser à partir de tous les produits précédents lors de l’enregistrement et le déploiement de vos images de conteneurs personnalisées.</span><span class="sxs-lookup"><span data-stu-id="b6684-246">Then, Azure Container Registry is a high scalable container registry hosted in Azure that you can use from all the previous products when registering and deploying your custom container images.</span></span>

<span data-ttu-id="b6684-247">De plus, à partir de vos conteneurs, vous pouvez consommer d’autres services gérés en Azure comme Azure SQL Database, Azure Redis cache, Azure Cosmos DB, etc.</span><span class="sxs-lookup"><span data-stu-id="b6684-247">In addition, from your containers, you can consume other managed services in Azure like Azure SQL Database, Azure Redis cache, Azure Cosmos DB, etc.</span></span> <span data-ttu-id="b6684-248">plus il existe des solutions/plates-formes tierces disponibles dans Azure Marketplace comme Cloud Foundry et OpenShift où vous pouvez également utiliser des conteneurs au sein d’Azure.</span><span class="sxs-lookup"><span data-stu-id="b6684-248">plus there are third-party solutions/platforms available in Azure Marketplace like Cloud Foundry and OpenShift where you can also use containers within Azure.</span></span>

<span data-ttu-id="b6684-249">Dans les sections suivantes, vous pouvez explorer les recommandations de Microsoft sur le moment d’utiliser chacun de ces produits et solutions Azure spécifiquement lors du ciblage des conteneurs Windows.</span><span class="sxs-lookup"><span data-stu-id="b6684-249">In the next sections, you can explore Microsoft's recommendations on when to use each of those Azure products and solutions specifically when targeting Windows Containers.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="b6684-250">[Suivant précédent](what-about-cloud-native-applications.md)
>[Next](when-not-to-deploy-to-windows-containers.md)</span><span class="sxs-lookup"><span data-stu-id="b6684-250">[Previous](what-about-cloud-native-applications.md)
[Next](when-not-to-deploy-to-windows-containers.md)</span></span>
