---
title: Visual Studio Tools pour Docker sur Windows
description: Familiarisez-vous avec les outils Docker disponibles dans Visual Studio 2017 versions 15.7 et ultérieures.
ms.date: 01/06/2021
ms.custom: vs-dotnet
ms.openlocfilehash: 0f6a0ca0e90021f5d374cfacc5c498f257ab5422
ms.sourcegitcommit: 7ef96827b161ef3fcde75f79d839885632e26ef1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/07/2021
ms.locfileid: "97970502"
---
# <a name="use-docker-tools-in-visual-studio-on-windows"></a><span data-ttu-id="d0175-103">Utiliser les outils de l’outil d’ancrage dans Visual Studio sur Windows</span><span class="sxs-lookup"><span data-stu-id="d0175-103">Use Docker Tools in Visual Studio on Windows</span></span>

<span data-ttu-id="d0175-104">Le workflow du développeur quand vous utilisez les outils Docker inclus dans Visual Studio 2017 versions 15.7 et ultérieures est similaire à l’utilisation de Visual Studio Code et de l’interface CLI Docker (en fait, il se base sur la même interface CLI Docker), mais il est plus facile à démarrer, il simplifie le processus et il permet une plus grande productivité pour les tâches de création, exécution et composition.</span><span class="sxs-lookup"><span data-stu-id="d0175-104">The developer workflow when using the Docker Tools included in Visual Studio 2017 version 15.7 and later, is similar to using Visual Studio Code and Docker CLI (in fact, it's based on the same Docker CLI), but it's easier to get started, simplifies the process, and provides greater productivity for the build, run, and compose tasks.</span></span> <span data-ttu-id="d0175-105">Il permet également d’exécuter et de déboguer vos conteneurs par le biais des touches `F5` et `Ctrl+F5` habituelles depuis Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d0175-105">It can also run and debug your containers via the usual `F5` and `Ctrl+F5` keys from Visual Studio.</span></span> <span data-ttu-id="d0175-106">Vous pouvez même déboguer une solution entière si ses conteneurs sont définis dans le même fichier `docker-compose.yml` au niveau de la solution.</span><span class="sxs-lookup"><span data-stu-id="d0175-106">You can even debug a whole solution if its containers are defined in the same `docker-compose.yml` file at the solution level.</span></span>

## <a name="configure-your-local-environment"></a><span data-ttu-id="d0175-107">Configurer votre environnement local</span><span class="sxs-lookup"><span data-stu-id="d0175-107">Configure your local environment</span></span>

<span data-ttu-id="d0175-108">Avec les dernières versions de Docker pour Windows, il est plus facile que jamais de développer des applications Docker, car le programme d’installation est simple, comme décrit dans les références suivantes.</span><span class="sxs-lookup"><span data-stu-id="d0175-108">With the latest versions of Docker for Windows, it's easier than ever to develop Docker applications because the setup is straightforward, as explained in the following references.</span></span>

> [!TIP]
> <span data-ttu-id="d0175-109">Pour en savoir plus sur l’installation de Docker pour Windows, accédez à (<https://docs.docker.com/docker-for-windows/>).</span><span class="sxs-lookup"><span data-stu-id="d0175-109">To learn more about installing Docker for Windows, go to (<https://docs.docker.com/docker-for-windows/>).</span></span>

## <a name="docker-support-in-visual-studio"></a><span data-ttu-id="d0175-110">Prise en charge de Docker dans Visual Studio</span><span class="sxs-lookup"><span data-stu-id="d0175-110">Docker support in Visual Studio</span></span>

<span data-ttu-id="d0175-111">Il existe deux niveaux de prise en charge de Docker que vous pouvez ajouter à un projet.</span><span class="sxs-lookup"><span data-stu-id="d0175-111">There are two levels of Docker support you can add to a project.</span></span> <span data-ttu-id="d0175-112">Dans les projets ASP.NET Core, vous pouvez simplement ajouter un fichier `Dockerfile` au projet en activant la prise en charge de Docker.</span><span class="sxs-lookup"><span data-stu-id="d0175-112">In ASP.NET Core projects, you can just add a `Dockerfile` file to the project by enabling Docker support.</span></span> <span data-ttu-id="d0175-113">Le niveau suivant est la prise en charge de l’orchestration des conteneurs, qui ajoute un `Dockerfile` au projet (s’il n’existe pas déjà) et un fichier `docker-compose.yml` au niveau de la solution.</span><span class="sxs-lookup"><span data-stu-id="d0175-113">The next level is container orchestration support, which adds a `Dockerfile` to the project (if it doesn't already exist) and a `docker-compose.yml` file at the solution level.</span></span> <span data-ttu-id="d0175-114">La prise en charge de l’orchestration des conteneurs, par le biais de Docker Compose, est ajoutée par défaut dans Visual Studio 2017 versions 15.0 à 15.7.</span><span class="sxs-lookup"><span data-stu-id="d0175-114">Container orchestration support, via Docker Compose, is added by default in Visual Studio 2017 versions 15.0 to 15.7.</span></span> <span data-ttu-id="d0175-115">La prise en charge de l’orchestration des conteneurs est une fonctionnalité à accepter dans Visual Studio 2017 versions 15.8 ou ultérieures.</span><span class="sxs-lookup"><span data-stu-id="d0175-115">Container orchestration support is an opt-in feature in Visual Studio 2017 versions 15.8 or later.</span></span> <span data-ttu-id="d0175-116">Visual Studio 2019 et versions ultérieures prennent également en charge le déploiement **Kubernetes/Helm** .</span><span class="sxs-lookup"><span data-stu-id="d0175-116">Visual Studio 2019 and later supports **Kubernetes/Helm** deployment as well.</span></span>

<span data-ttu-id="d0175-117">Les commandes **Ajouter > Prise en charge de Docker** et **Ajouter > Prise en charge des orchestrateurs de conteneurs** se trouvent dans le menu contextuel du nœud du projet pour un projet ASP.NET Core dans l’**Explorateur de solutions**, comme l’illustre la figure 4-31 :</span><span class="sxs-lookup"><span data-stu-id="d0175-117">The **Add > Docker Support** and **Add > Container Orchestrator Support** commands are located on the right-click menu (or context menu) of the project node for an ASP.NET Core project in **Solution Explorer**, as shown in Figure 4-31:</span></span>

![Option de menu Ajouter la prise en charge de Docker dans Visual Studio](media/add-docker-support-menu.png)

<span data-ttu-id="d0175-119">**Figure 4-31**.</span><span class="sxs-lookup"><span data-stu-id="d0175-119">**Figure 4-31**.</span></span> <span data-ttu-id="d0175-120">Ajout de la prise en charge de l’ancrage à un projet Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="d0175-120">Adding Docker support to a Visual Studio 2019 project</span></span>

### <a name="add-docker-support"></a><span data-ttu-id="d0175-121">Ajouter la prise en charge Docker</span><span class="sxs-lookup"><span data-stu-id="d0175-121">Add Docker support</span></span>

<span data-ttu-id="d0175-122">Outre la possibilité d’ajouter la prise en charge de l’ancrage à une application existante, comme indiqué dans la section précédente, vous pouvez également activer la prise en charge de l’ancrage pendant la création du projet en sélectionnant **activer la prise en charge** de l’ancrage dans la boîte de dialogue **nouvelle ASP.net Core application Web** qui s’ouvre lorsque vous cliquez sur **OK** dans la boîte de dialogue **nouveau projet** , comme illustré 4-32 dans la</span><span class="sxs-lookup"><span data-stu-id="d0175-122">Besides the option to add Docker support to an existing application, as shown in the previous section, you can also enable Docker support during project creation by selecting **Enable Docker Support** in the **New ASP.NET Core Web Application** dialog box that opens after you click **OK** in the **New Project** dialog box, as shown in Figure 4-32.</span></span>

![Activer la prise en charge de Docker pour une nouvelle application web ASP.NET Core dans Visual Studio](media/enable-docker-support-visual-studio.png)

<span data-ttu-id="d0175-124">**Figure 4-32**.</span><span class="sxs-lookup"><span data-stu-id="d0175-124">**Figure 4-32**.</span></span> <span data-ttu-id="d0175-125">Activer la prise en charge de l’ancrage pendant la création du projet dans Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="d0175-125">Enable Docker support during project creation in Visual Studio 2019</span></span>

<span data-ttu-id="d0175-126">Quand vous ajoutez ou activez la prise en charge de l’ancrage, Visual Studio ajoute un fichier _fichier dockerfile_ au projet, qui inclut des références à tous les projets requis de la solution.</span><span class="sxs-lookup"><span data-stu-id="d0175-126">When you add or enable Docker support, Visual Studio adds a _Dockerfile_ file to the project, that includes references to all required project from the solution.</span></span>

### <a name="add-container-orchestration-support"></a><span data-ttu-id="d0175-127">Ajouter la prise en charge de l’orchestration de conteneurs</span><span class="sxs-lookup"><span data-stu-id="d0175-127">Add container orchestration support</span></span>

<span data-ttu-id="d0175-128">Pour composer une solution à plusieurs conteneurs, ajoutez la prise en charge de l’orchestration de conteneurs à vos projets.</span><span class="sxs-lookup"><span data-stu-id="d0175-128">When you want to compose a multi-container solution, add container orchestration support to your projects.</span></span> <span data-ttu-id="d0175-129">Cela vous permet d’exécuter et de déboguer simultanément un groupe de conteneurs (une solution complète), si ces conteneurs sont définis dans le même fichier _docker-compose.yml_.</span><span class="sxs-lookup"><span data-stu-id="d0175-129">This lets you run and debug a group of containers (a whole solution) at the same time if they're defined in the same _docker-compose.yml_ file.</span></span>

<span data-ttu-id="d0175-130">Pour ajouter la prise en charge de l’orchestration de conteneurs, cliquez sur le nœud de la solution ou du projet dans l’**Explorateur de solutions**, puis choisissez **Ajouter > Prise en charge des orchestrateurs de conteneurs**.</span><span class="sxs-lookup"><span data-stu-id="d0175-130">To add container orchestration support, right-click on the solution or project node in **Solution Explorer**, and choose **Add > Container Orchestration Support**.</span></span> <span data-ttu-id="d0175-131">Choisissez ensuite **Kubernetes/Helm** ou **docker compose** pour gérer les conteneurs.</span><span class="sxs-lookup"><span data-stu-id="d0175-131">Then choose **Kubernetes/Helm** or **Docker Compose** to manage the containers.</span></span>

<span data-ttu-id="d0175-132">Une fois que vous avez ajouté la prise en charge de l’orchestration de conteneur à votre projet, vous voyez un fichier dockerfile ajouté au projet et un dossier **dockr-compose** ajouté à la solution dans **Explorateur de solutions**, comme illustré dans la figure 4-33 :</span><span class="sxs-lookup"><span data-stu-id="d0175-132">After you add container orchestration support to your project, you see a Dockerfile added to the project and a **docker-compose** folder added to the solution in **Solution Explorer**, as shown in Figure 4-33:</span></span>

![Fichiers Docker dans l’Explorateur de solutions de Visual Studio](media/docker-support-solution-explorer.png)

<span data-ttu-id="d0175-134">**Figure 4-33**.</span><span class="sxs-lookup"><span data-stu-id="d0175-134">**Figure 4-33**.</span></span> <span data-ttu-id="d0175-135">Fichiers de l’ancrage dans Explorateur de solutions dans Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="d0175-135">Docker files in Solution Explorer in Visual Studio 2019</span></span>

<span data-ttu-id="d0175-136">Si le fichier _docker-compose.yml_ existe déjà, Visual Studio ajoute simplement les lignes de code de configuration requises.</span><span class="sxs-lookup"><span data-stu-id="d0175-136">If _docker-compose.yml_ already exists, Visual Studio just adds the required lines of configuration code to it.</span></span>

## <a name="configure-docker-tools"></a><span data-ttu-id="d0175-137">Configurer les outils Docker</span><span class="sxs-lookup"><span data-stu-id="d0175-137">Configure Docker tools</span></span>

<span data-ttu-id="d0175-138">Dans le menu principal, choisissez **Outils > Options**, puis développez **Outils de conteneur > Paramètres**.</span><span class="sxs-lookup"><span data-stu-id="d0175-138">From the main menu, choose **Tools > Options**, and expand **Container Tools > Settings**.</span></span> <span data-ttu-id="d0175-139">Les paramètres des outils de conteneur s’affichent.</span><span class="sxs-lookup"><span data-stu-id="d0175-139">The container tools settings appear.</span></span>

![Options des outils de l’outil d’ancrage de Visual Studio, avec trois pages : général, projet unique et Docker Compose, détails dans le texte de l’article.](media/visual-studio-docker-tools-options.png)

<span data-ttu-id="d0175-141">**Figure 4-34**.</span><span class="sxs-lookup"><span data-stu-id="d0175-141">**Figure 4-34**.</span></span> <span data-ttu-id="d0175-142">Options des outils Docker</span><span class="sxs-lookup"><span data-stu-id="d0175-142">Docker Tools Options</span></span>

<span data-ttu-id="d0175-143">Le tableau suivant peut vous aider à déterminer comment définir ces options.</span><span class="sxs-lookup"><span data-stu-id="d0175-143">The following table might help you decide how to set these options.</span></span>

| <span data-ttu-id="d0175-144">Page/paramètre</span><span class="sxs-lookup"><span data-stu-id="d0175-144">Page/Setting</span></span>                                |  <span data-ttu-id="d0175-145">Paramètre par défaut</span><span class="sxs-lookup"><span data-stu-id="d0175-145">Default Setting</span></span>   | <span data-ttu-id="d0175-146">Description</span><span class="sxs-lookup"><span data-stu-id="d0175-146">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                           |
| ------------------------------------------- | :----------------: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="d0175-147">**Page Général**</span><span class="sxs-lookup"><span data-stu-id="d0175-147">**General page**</span></span>                            |
| <span data-ttu-id="d0175-148">Installer le Bureau de l’arrimeur si nécessaire</span><span class="sxs-lookup"><span data-stu-id="d0175-148">Install Docker Desktop if needed</span></span>            |     <span data-ttu-id="d0175-149">Me demander</span><span class="sxs-lookup"><span data-stu-id="d0175-149">Prompt me</span></span>      |
| <span data-ttu-id="d0175-150">Démarrer le Bureau de l’arrimeur si nécessaire</span><span class="sxs-lookup"><span data-stu-id="d0175-150">Start Docker Desktop if needed</span></span>              |     <span data-ttu-id="d0175-151">Me demander</span><span class="sxs-lookup"><span data-stu-id="d0175-151">Prompt me</span></span>      |
| <span data-ttu-id="d0175-152">Approuver ASP.NET Core certificat SSL</span><span class="sxs-lookup"><span data-stu-id="d0175-152">Trust ASP.NET Core SSL certificate</span></span>          |     <span data-ttu-id="d0175-153">Me demander</span><span class="sxs-lookup"><span data-stu-id="d0175-153">Prompt me</span></span>      | <span data-ttu-id="d0175-154">Si le certificat SSL localhost n’a pas été marqué comme approuvé (avec `dotnet dev-certs https --trust` ), Visual Studio vous demandera chaque fois que vous exécuterez votre projet.</span><span class="sxs-lookup"><span data-stu-id="d0175-154">If the localhost SSL certificate hasn't been marked as trusted (with `dotnet dev-certs https --trust`), Visual Studio will prompt every time you run your project.</span></span>                                                                                                                                                                                                                                                    |
| <span data-ttu-id="d0175-155">**Page de projet unique**</span><span class="sxs-lookup"><span data-stu-id="d0175-155">**Single Project page**</span></span>                     |
| <span data-ttu-id="d0175-156">Extraire les images de l’ancrage requis sur le projet ouvert</span><span class="sxs-lookup"><span data-stu-id="d0175-156">Pull required Docker images on project open</span></span> |        <span data-ttu-id="d0175-157">Vrai</span><span class="sxs-lookup"><span data-stu-id="d0175-157">True</span></span>        | <span data-ttu-id="d0175-158">Pour accroître les performances lors de l’exécution du projet, Visual Studio démarre une opération d’extraction de l’ancrage en arrière-plan. ainsi, lorsque vous êtes prêt à exécuter votre code, l’image est déjà téléchargée ou en cours de téléchargement.</span><span class="sxs-lookup"><span data-stu-id="d0175-158">For increased performance when running the project, Visual Studio will start a Docker pull operation in the background so that when you're ready to run your code, the image is already downloaded or in the process of downloading.</span></span> <span data-ttu-id="d0175-159">Si vous chargez simplement des projets et parcourez du code, vous pouvez désactiver cette option pour éviter le téléchargement des images conteneur dont vous n’avez pas besoin.</span><span class="sxs-lookup"><span data-stu-id="d0175-159">If you're just loading projects and browsing code, you can turn this off to avoid downloading container images you don't need.</span></span> <span data-ttu-id="d0175-160">Cela peut ralentir l’expérience utilisateur Open Project.</span><span class="sxs-lookup"><span data-stu-id="d0175-160">This could slow the open project user experience.</span></span> |
| <span data-ttu-id="d0175-161">Extraire les images ancrables mises à jour lors du chargement du projet</span><span class="sxs-lookup"><span data-stu-id="d0175-161">Pull updated Docker images on project load</span></span>  | <span data-ttu-id="d0175-162">Projets .NET Core</span><span class="sxs-lookup"><span data-stu-id="d0175-162">.NET Core projects</span></span> | <span data-ttu-id="d0175-163">Extrayez les mises à jour des images existantes pour accéder aux dernières mises à jour sur le projet ouvert.</span><span class="sxs-lookup"><span data-stu-id="d0175-163">Pull updates to existing images to get the latest updates on project open.</span></span> <span data-ttu-id="d0175-164">Cela peut ralentir l’expérience utilisateur Open Project.</span><span class="sxs-lookup"><span data-stu-id="d0175-164">This could slow the open project user experience.</span></span>                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="d0175-165">Supprimer les conteneurs à la fermeture du projet</span><span class="sxs-lookup"><span data-stu-id="d0175-165">Remove containers on project close</span></span>          |        <span data-ttu-id="d0175-166">Vrai</span><span class="sxs-lookup"><span data-stu-id="d0175-166">True</span></span>        | <span data-ttu-id="d0175-167">Nettoyage à la fermeture du projet, cela peut ralentir l’expérience utilisateur du projet, mais elle est généralement rapide.</span><span class="sxs-lookup"><span data-stu-id="d0175-167">Clean up on project close, This could slow the close project user experience but it's usually fast anyway.</span></span>                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="d0175-168">Exécuter les conteneurs sur le projet ouvert</span><span class="sxs-lookup"><span data-stu-id="d0175-168">Run containers on project open</span></span>              |        <span data-ttu-id="d0175-169">Vrai</span><span class="sxs-lookup"><span data-stu-id="d0175-169">True</span></span>        | <span data-ttu-id="d0175-170">Pour de meilleures performances lors de l’exécution du projet, Visual Studio démarre tous les conteneurs de la solution.</span><span class="sxs-lookup"><span data-stu-id="d0175-170">For increased performance when running the project, Visual Studio will start all containers in the solution.</span></span> <span data-ttu-id="d0175-171">Cela peut ralentir l’expérience utilisateur Open Project.</span><span class="sxs-lookup"><span data-stu-id="d0175-171">This could slow the open project user experience.</span></span>                                                                                                                                                                                                                                                        |
| <span data-ttu-id="d0175-172">**Docker Compose**</span><span class="sxs-lookup"><span data-stu-id="d0175-172">**Docker Compose**</span></span>                          |                    | <span data-ttu-id="d0175-173">La page Docker Compose contient les mêmes paramètres que la page de projet unique, mais elles s’appliquent aux solutions à plusieurs conteneurs.</span><span class="sxs-lookup"><span data-stu-id="d0175-173">The Docker Compose page contains the same settings as the Single Project page, but they apply to multi-container solutions.</span></span>                                                                                                                                                                                                                                                                                           |

> [!WARNING]
> <span data-ttu-id="d0175-174">Si le certificat SSL localhost n’est pas approuvé et que vous affectez à l’option la valeur **jamais**, les requêtes Web HTTPS risquent d’échouer au moment de l’exécution dans votre application ou service.</span><span class="sxs-lookup"><span data-stu-id="d0175-174">If the localhost SSL certificate is not trusted, and you set the option to **Never**, then HTTPS web requests might fail at runtime in your app or service.</span></span> <span data-ttu-id="d0175-175">Dans ce cas, redéfinissez la valeur sur **me demander** ou, mieux encore, approuvez les certificats de votre ordinateur de développement à l’aide de la commande `dotnet dev-certs https --trust` .</span><span class="sxs-lookup"><span data-stu-id="d0175-175">In that case, set the value back again to **Prompt me** or, better again, trust the certificates in your dev machine using the command `dotnet dev-certs https --trust`.</span></span>

> [!TIP]
> <span data-ttu-id="d0175-176">Pour plus d’informations sur l’implémentation des services et l’utilisation des outils Visual Studio pour Docker, lisez les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="d0175-176">For further details on the services implementation and use of Visual Studio Tools for Docker, read the following articles:</span></span>
>
> <span data-ttu-id="d0175-177">Déboguer des applications dans un conteneur d’ancrage local : <https://docs.microsoft.com/visualstudio/containers/edit-and-refresh></span><span class="sxs-lookup"><span data-stu-id="d0175-177">Debug apps in a local Docker container: <https://docs.microsoft.com/visualstudio/containers/edit-and-refresh></span></span>
>
> <span data-ttu-id="d0175-178">Déployer un conteneur ASP.NET sur un registre de conteneurs avec Visual Studio : <https://docs.microsoft.com/visualstudio/containers/hosting-web-apps-in-docker></span><span class="sxs-lookup"><span data-stu-id="d0175-178">Deploy an ASP.NET container to a container registry using Visual Studio: <https://docs.microsoft.com/visualstudio/containers/hosting-web-apps-in-docker></span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="d0175-179">[Précédent](docker-apps-inner-loop-workflow.md) 
>  [Suivant](set-up-windows-containers-with-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="d0175-179">[Previous](docker-apps-inner-loop-workflow.md)
[Next](set-up-windows-containers-with-powershell.md)</span></span>
