---
title: Migration d’applications de bureau modernes
description: Tout ce que vous devez savoir sur le processus de migration pour les applications de bureau modernes.
ms.date: 05/12/2020
ms.openlocfilehash: 2108aa0b99cabfbb0f3263f094ba8277f953ed6a
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/15/2020
ms.locfileid: "83423298"
---
# <a name="migrating-modern-desktop-applications"></a><span data-ttu-id="5198e-103">Migration d’applications de bureau modernes</span><span class="sxs-lookup"><span data-stu-id="5198e-103">Migrating Modern Desktop applications</span></span>

<span data-ttu-id="5198e-104">Dans ce chapitre, nous explorons les problèmes et les défis les plus courants que vous pouvez rencontrer lors de la migration d’une application existante de .NET Framework à .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-104">In this chapter, we're exploring the most common issues and challenges you can face when migrating an existing application from .NET Framework to .NET Core.</span></span>

<span data-ttu-id="5198e-105">Une application de bureau complexe ne fonctionne pas de manière isolée et nécessite un type d’interaction avec les sous-systèmes qui peuvent résider sur l’ordinateur local ou sur un serveur distant.</span><span class="sxs-lookup"><span data-stu-id="5198e-105">A complex desktop application doesn't work in isolation and needs some kind of interaction with subsystems that may reside on the local machine or on a remote server.</span></span> <span data-ttu-id="5198e-106">Il aura probablement besoin d’un type de base de données pour se connecter en tant que stockage de persistance localement ou à distance.</span><span class="sxs-lookup"><span data-stu-id="5198e-106">It will probably need some kind of database to connect as a persistence storage either locally or remotely.</span></span> <span data-ttu-id="5198e-107">Avec le déclenchement d’architectures orientées services et Internet, il est courant que votre application soit connectée à une sorte de service résidant sur un serveur distant ou dans le Cloud.</span><span class="sxs-lookup"><span data-stu-id="5198e-107">With the raise of Internet and service-oriented architectures, it's common to have your application connected to some sort of service residing on a remote server or in the cloud.</span></span> <span data-ttu-id="5198e-108">Vous devrez peut-être accéder au système de fichiers de l’ordinateur pour implémenter certaines fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="5198e-108">You may need to access the machine file system to implement some functionality.</span></span> <span data-ttu-id="5198e-109">Vous pouvez également utiliser une partie des fonctionnalités qui résident à l’intérieur d’un objet COM en dehors de votre application, ce qui est un scénario courant si, par exemple, vous intégrez des assemblys Office à votre application.</span><span class="sxs-lookup"><span data-stu-id="5198e-109">Alternatively, maybe you're using a piece of functionality that resides inside a COM object outside your application, which is a common scenario if, for example, you're integrating Office assemblies in your app.</span></span>

<span data-ttu-id="5198e-110">En outre, il existe des différences dans la surface de l’API qui est exposée par .NET Framework et .NET Core, et certaines fonctionnalités disponibles sur .NET Framework ne sont pas disponibles sur .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-110">Besides, there are differences in the API surface that is exposed by .NET Framework and .NET Core, and some features that are available on .NET Framework aren't available on .NET Core.</span></span> <span data-ttu-id="5198e-111">C’est pourquoi il est important que vous les sachiez et les prenne en compte lors de la planification d’une migration.</span><span class="sxs-lookup"><span data-stu-id="5198e-111">So, it's important for you to know and take them into account when planning a migration.</span></span>

## <a name="configuration-files"></a><span data-ttu-id="5198e-112">Fichiers de configuration</span><span class="sxs-lookup"><span data-stu-id="5198e-112">Configuration files</span></span>

<span data-ttu-id="5198e-113">Les fichiers de configuration offrent la possibilité de stocker des ensembles de propriétés qui sont lus au moment de l’exécution et qui affectent le comportement de nos applications, telles que l’emplacement de la base de données ou le nombre d’exécutions d’une boucle.</span><span class="sxs-lookup"><span data-stu-id="5198e-113">Configuration files offer the possibility to store sets of properties that are read at run time and affect the behavior of our apps, such as where to locate a database or how many times to execute a loop.</span></span> <span data-ttu-id="5198e-114">L’avantage de cette technique est que vous pouvez modifier certains aspects de l’application sans avoir besoin de le coder et de le recompiler.</span><span class="sxs-lookup"><span data-stu-id="5198e-114">The beauty of this technique is that you can modify some aspects of the application without the need to recode and recompile.</span></span> <span data-ttu-id="5198e-115">Cela est utile lorsque, par exemple, le même code d’application s’exécute sur un environnement de développement avec un certain ensemble de valeurs de configuration et en production avec un autre ensemble de valeurs de configuration.</span><span class="sxs-lookup"><span data-stu-id="5198e-115">This comes in handy when, for example, the same app code runs on a development environment with a certain set of configuration values and in production with a different one.</span></span>

### <a name="configuration-on-net-framework"></a><span data-ttu-id="5198e-116">Configuration sur .NET Framework</span><span class="sxs-lookup"><span data-stu-id="5198e-116">Configuration on .NET Framework</span></span>

<span data-ttu-id="5198e-117">Si vous disposez d’une application de bureau .NET Framework, il est probable que vous ayez un fichier *app. config* accessible via la <xref:System.Configuration.AppSettingsSection> classe à partir de l' `System.Configuration` espace de noms.</span><span class="sxs-lookup"><span data-stu-id="5198e-117">If you have a working .NET Framework desktop application, chances are you have an *app.config* file accessed through the <xref:System.Configuration.AppSettingsSection> class from the `System.Configuration` namespace.</span></span>

<span data-ttu-id="5198e-118">Dans l’infrastructure .NET Framework, il existe une hiérarchie de fichiers de configuration qui héritent des propriétés de ses parents.</span><span class="sxs-lookup"><span data-stu-id="5198e-118">Within the .NET Framework infrastructure, there's a hierarchy of configuration files that inherit properties from its parents.</span></span> <span data-ttu-id="5198e-119">Vous pouvez trouver un fichier *machine. config* qui définit de nombreuses propriétés et sections de configuration qui peuvent être utilisées ou remplacées dans n’importe quel fichier de configuration descendant.</span><span class="sxs-lookup"><span data-stu-id="5198e-119">You can find a *machine.config* file that defines many properties and configuration sections that can be used or overridden in any descendant configuration file.</span></span>

### <a name="configuration-on-net-core"></a><span data-ttu-id="5198e-120">Configuration sur .NET Core</span><span class="sxs-lookup"><span data-stu-id="5198e-120">Configuration on .NET Core</span></span>

<span data-ttu-id="5198e-121">Dans le monde .NET Core, il n’y a aucun fichier *machine. config* .</span><span class="sxs-lookup"><span data-stu-id="5198e-121">In the .NET Core world, there's no *machine.config* file.</span></span> <span data-ttu-id="5198e-122">Et même si vous pouvez continuer à utiliser l’ancien <xref:System.Configuration> espace de noms, vous pouvez envisager de passer à la version moderne <xref:Microsoft.Extensions.Configuration> , ce qui offre un bon nombre d’améliorations.</span><span class="sxs-lookup"><span data-stu-id="5198e-122">And even though you can continue to use the old fashioned <xref:System.Configuration> namespace, you may consider switching to the modern <xref:Microsoft.Extensions.Configuration>, which offers a good number of enhancements.</span></span>

<span data-ttu-id="5198e-123">L’API de configuration prend en charge le concept de fournisseur de configuration, qui définit la source de données à utiliser pour charger la configuration.</span><span class="sxs-lookup"><span data-stu-id="5198e-123">The configuration API supports the concept of configuration provider, which defines the data source to be used to load the configuration.</span></span> <span data-ttu-id="5198e-124">Il existe différents types de fournisseurs intégrés, tels que :</span><span class="sxs-lookup"><span data-stu-id="5198e-124">There are different kinds of built-in providers, such as:</span></span>

- <span data-ttu-id="5198e-125">Objets .NET en mémoire</span><span class="sxs-lookup"><span data-stu-id="5198e-125">In-memory .NET objects</span></span>
- <span data-ttu-id="5198e-126">Fichiers INI</span><span class="sxs-lookup"><span data-stu-id="5198e-126">INI files</span></span>
- <span data-ttu-id="5198e-127">Fichiers JSON</span><span class="sxs-lookup"><span data-stu-id="5198e-127">JSON files</span></span>
- <span data-ttu-id="5198e-128">Fichiers XML</span><span class="sxs-lookup"><span data-stu-id="5198e-128">XML files</span></span>
- <span data-ttu-id="5198e-129">Arguments de ligne de commande</span><span class="sxs-lookup"><span data-stu-id="5198e-129">Command-line arguments</span></span>
- <span data-ttu-id="5198e-130">Variables d'environnement</span><span class="sxs-lookup"><span data-stu-id="5198e-130">Environment variables</span></span>
- <span data-ttu-id="5198e-131">Magasin d’utilisateurs chiffré</span><span class="sxs-lookup"><span data-stu-id="5198e-131">Encrypted user store</span></span>

 <span data-ttu-id="5198e-132">Ou vous pouvez créer vos propres.</span><span class="sxs-lookup"><span data-stu-id="5198e-132">Or you can build your own.</span></span>

<span data-ttu-id="5198e-133">La nouvelle configuration autorise une liste de paires nom-valeur qui peuvent être regroupées dans une hiérarchie à plusieurs niveaux.</span><span class="sxs-lookup"><span data-stu-id="5198e-133">The new configuration allows a list of name-value pairs that can be grouped into a multi-level hierarchy.</span></span> <span data-ttu-id="5198e-134">Toute valeur stockée est mappée à une chaîne, et une prise en charge de liaison intégrée vous permet de désérialiser les paramètres dans un objet POCO (Plain Old CLR Object) personnalisé.</span><span class="sxs-lookup"><span data-stu-id="5198e-134">Any stored value maps to a string, and there's built-in binding support that allows you to deserialize settings into a custom plain old CLR object (POCO) object.</span></span>

<span data-ttu-id="5198e-135">L' <xref:Microsoft.Extensions.Configuration.ConfigurationBuilder> objet vous permet d’ajouter autant de fournisseurs de configuration dont vous pouvez avoir besoin pour votre application, en utilisant une règle de précédence pour résoudre la préférence.</span><span class="sxs-lookup"><span data-stu-id="5198e-135">The <xref:Microsoft.Extensions.Configuration.ConfigurationBuilder> object lets you add as many configuration providers you may need for your application, using a precedence rule to resolve preference.</span></span> <span data-ttu-id="5198e-136">Ainsi, le dernier fournisseur que vous ajoutez dans votre code remplacera les autres.</span><span class="sxs-lookup"><span data-stu-id="5198e-136">So, the last provider you add in your code will override the others.</span></span> <span data-ttu-id="5198e-137">Il s’agit d’une fonctionnalité intéressante pour la gestion de différents environnements en vue de leur exécution, car vous pouvez définir des configurations différentes pour les environnements de développement, de test et de production, et les gérer sur une seule fonction à l’intérieur de votre code.</span><span class="sxs-lookup"><span data-stu-id="5198e-137">This is a great feature for managing different environments for execution since you can define different configurations for development, testing and production environments, and manage them on a single function inside your code.</span></span>

### <a name="migrating-configuration-files"></a><span data-ttu-id="5198e-138">Migration des fichiers de configuration</span><span class="sxs-lookup"><span data-stu-id="5198e-138">Migrating Configuration files</span></span>

<span data-ttu-id="5198e-139">Vous pouvez continuer à utiliser votre fichier XML App. config existant.</span><span class="sxs-lookup"><span data-stu-id="5198e-139">You can continue to use your existing app.config XML file.</span></span> <span data-ttu-id="5198e-140">Toutefois, vous pouvez prendre cette occasion de migrer votre configuration pour tirer parti des nombreuses améliorations apportées à .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-140">However, you could take this opportunity to migrate your configuration to benefit from the several enhancements made on .NET Core.</span></span>

<span data-ttu-id="5198e-141">Pour migrer d’un fichier *app. config* de style ancien vers un nouveau fichier de configuration, vous devez choisir entre un format XML et un format JSON.</span><span class="sxs-lookup"><span data-stu-id="5198e-141">To migrate from an old-style *app.config* to a new configuration file, you should choose between an XML format and a JSON format.</span></span>

<span data-ttu-id="5198e-142">Si vous choisissez XML, la conversion est simple.</span><span class="sxs-lookup"><span data-stu-id="5198e-142">If you choose XML, the conversion is straightforward.</span></span> <span data-ttu-id="5198e-143">Étant donné que le contenu est identique, il vous suffit de renommer le fichier *app. config* en un fichier avec l’extension XML.</span><span class="sxs-lookup"><span data-stu-id="5198e-143">Since the content is the same, just rename the *app.config* file to a file with XML extension.</span></span> <span data-ttu-id="5198e-144">Ensuite, modifiez le code qui référence AppSettings pour utiliser la `ConfigurationBuilder` classe.</span><span class="sxs-lookup"><span data-stu-id="5198e-144">Then, change the code that references AppSettings to use the `ConfigurationBuilder` class.</span></span> <span data-ttu-id="5198e-145">Cette modification doit être facile.</span><span class="sxs-lookup"><span data-stu-id="5198e-145">This change should be easy.</span></span>

<span data-ttu-id="5198e-146">Si vous souhaitez utiliser un format JSON et que vous ne souhaitez pas migrer manuellement, il existe un outil appelé [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) disponible sur .net Core, qui peut convertir un fichier *app. config* en fichier de configuration JSON.</span><span class="sxs-lookup"><span data-stu-id="5198e-146">If you want to use a JSON format and you don't want to migrate by hand, there's a tool called [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) available on .NET Core that can convert an *app.config* file to a JSON configuration file.</span></span>

<span data-ttu-id="5198e-147">Vous pouvez également rencontrer certains problèmes lors de l’utilisation des sections de configuration qui ont été définies dans le fichier *machine. config* .</span><span class="sxs-lookup"><span data-stu-id="5198e-147">You may also come across some issues when using configuration sections that were defined in the *machine.config* file.</span></span> <span data-ttu-id="5198e-148">Par exemple, considérez la configuration suivante :</span><span class="sxs-lookup"><span data-stu-id="5198e-148">For example, consider the following configuration:</span></span>

```xml
<configuration>
    <system.diagnostics>
        <switches>
            <add name="General" value="4" />
        </switches>
        <trace autoflush="true" indentsize="2">
            <listeners>
                <add name="myListener"
                     type="System.Diagnostics.TextWriterTraceListener,
                           System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
                     initializeData="MyListener.log"
                     traceOutputOptions="ProcessId, LogicalOperationStack, Timestamp, ThreadId, Callstack, DateTime" />
            </listeners>
        </trace>
    </system.diagnostics>
</configuration>
```

<span data-ttu-id="5198e-149">Si vous utilisez cette configuration dans .NET Core, vous obtenez une exception :</span><span class="sxs-lookup"><span data-stu-id="5198e-149">If you take this configuration to a .NET Core, you'll get an exception:</span></span>

<span data-ttu-id="5198e-150">Section de configuration non reconnue System. Diagnostics</span><span class="sxs-lookup"><span data-stu-id="5198e-150">Unrecognized configuration section system.diagnostics</span></span>

<span data-ttu-id="5198e-151">Cette exception se produit parce que cette section et l’assembly responsable de la gestion de cette section ont été définis dans le fichier *machine. config* , qui n’existe pas.</span><span class="sxs-lookup"><span data-stu-id="5198e-151">This exception occurs because that section and the assembly responsible for handling that section was defined in the *machine.config* file, which now doesn't exist.</span></span>

<span data-ttu-id="5198e-152">Pour résoudre facilement le problème, vous pouvez copier la définition de la section à partir de votre ancien fichier *machine. config* vers votre nouveau fichier de configuration :</span><span class="sxs-lookup"><span data-stu-id="5198e-152">To easily fix the issue, you can copy the section definition from your old *machine.config* to your new configuration file:</span></span>

```xml
<configSections>
    <section name="system.diagnostics"
             type="System.Diagnostics.SystemDiagnosticsSection,
                   System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
</configSections>
```

## <a name="accessing-databases"></a><span data-ttu-id="5198e-153">Accès aux bases de données</span><span class="sxs-lookup"><span data-stu-id="5198e-153">Accessing databases</span></span>

<span data-ttu-id="5198e-154">Presque toutes les applications de bureau ont besoin d’un type de base de données.</span><span class="sxs-lookup"><span data-stu-id="5198e-154">Almost every desktop application needs some kind of database.</span></span> <span data-ttu-id="5198e-155">Pour les ordinateurs de bureau, il est courant de trouver des architectures client-serveur avec une connexion directe entre l’application de bureau et le moteur de base de données.</span><span class="sxs-lookup"><span data-stu-id="5198e-155">For desktop, it's common to find client-server architectures with a direct connection between the desktop app and the database engine.</span></span> <span data-ttu-id="5198e-156">Ces bases de données peuvent être locales ou distantes selon la nécessité de partager des informations entre différents utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="5198e-156">These databases can be local or remote depending on the need to share information between different users.</span></span>

<span data-ttu-id="5198e-157">Du point de vue du code, de nombreuses technologies et infrastructures ont été créées pour permettre au développeur de se connecter, d’interroger et de mettre à jour une base de données.</span><span class="sxs-lookup"><span data-stu-id="5198e-157">From the code perspective, there have been many technologies and frameworks to give the developer the possibility to connect, query, and update a database.</span></span>

<span data-ttu-id="5198e-158">Les exemples les plus courants de base de données que vous pouvez trouver lorsque vous parlez de l’application de bureau Windows sont Microsoft Access et Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5198e-158">The most common examples of database you can find when talking about Windows Desktop application are Microsoft Access and Microsoft SQL Server.</span></span> <span data-ttu-id="5198e-159">Si vous avez plus de 20 ans d’expérience dans la programmation pour le bureau, des noms comme ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ et Entity Framework vous paraîtront familiers.</span><span class="sxs-lookup"><span data-stu-id="5198e-159">If you have more than 20 years of experience programming for the desktop, names like ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ, and Entity Framework will sound familiar.</span></span>

### <a name="odbc"></a><span data-ttu-id="5198e-160">ODBC</span><span class="sxs-lookup"><span data-stu-id="5198e-160">ODBC</span></span>

<span data-ttu-id="5198e-161">Vous pouvez continuer à utiliser ODBC sur .NET Core, car Microsoft fournit la `System.Data.Odbc` bibliothèque compatible avec .NET Standard 2,0.</span><span class="sxs-lookup"><span data-stu-id="5198e-161">You can continue to use ODBC on .NET Core since Microsoft is providing the `System.Data.Odbc` library compatible with .NET Standard 2.0.</span></span>

### <a name="ole-db"></a><span data-ttu-id="5198e-162">OLE DB</span><span class="sxs-lookup"><span data-stu-id="5198e-162">OLE DB</span></span>

<span data-ttu-id="5198e-163">[OLE DB](https://msdn.microsoft.com/library/ms722784(v=vs.85).aspx)   est un excellent moyen d’accéder à diverses sources de données de manière uniforme.</span><span class="sxs-lookup"><span data-stu-id="5198e-163">[OLE DB](https://msdn.microsoft.com/library/ms722784(v=vs.85).aspx) has been a great way to access various data sources in a uniform manner.</span></span> <span data-ttu-id="5198e-164">Mais il était basé sur COM, qui est une technologie Windows uniquement et, comme cela n’était pas le mieux adapté pour une technologie multiplateforme telle que .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-164">But it was based on COM, which is a Windows-only technology, and as such wasn't the best fit for a cross-platform technology such as .NET Core.</span></span> <span data-ttu-id="5198e-165">Il n’est pas non plus pris en charge dans les versions 2014 et ultérieures de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5198e-165">It's also unsupported in SQL Server versions 2014 and later.</span></span> <span data-ttu-id="5198e-166">Pour ces raisons, OLE DB ne sera pas pris en charge par .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-166">For those reasons, OLE DB won't be supported by .NET Core.</span></span>

### <a name="adonet"></a><span data-ttu-id="5198e-167">ADO.NET</span><span class="sxs-lookup"><span data-stu-id="5198e-167">ADO.NET</span></span>

<span data-ttu-id="5198e-168">Vous pouvez toujours utiliser ADO.NET à partir de votre code de bureau existant sur .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-168">You can still use ADO.NET from your existing desktop code on .NET Core.</span></span> <span data-ttu-id="5198e-169">Vous devez simplement mettre à jour certains packages NuGet.</span><span class="sxs-lookup"><span data-stu-id="5198e-169">You just need to update some NuGet packages.</span></span>

### <a name="ef-core-vs-ef6"></a><span data-ttu-id="5198e-170">EF Core et EF6</span><span class="sxs-lookup"><span data-stu-id="5198e-170">EF Core vs. EF6</span></span>

<span data-ttu-id="5198e-171">Il existe deux versions actuellement prises en charge de Entity Framework (EF), Entity Framework 6 (EF6) et EF Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-171">There are two currently supported versions of Entity Framework (EF), Entity Framework 6 (EF6) and EF Core.</span></span>

<span data-ttu-id="5198e-172">La technologie la plus récente publiée dans le cadre du monde de la .NET Framework est Entity Framework, 6,4 étant la dernière version.</span><span class="sxs-lookup"><span data-stu-id="5198e-172">The latest technology released as part of the .NET Framework world is Entity Framework, with 6.4 being the latest version.</span></span> <span data-ttu-id="5198e-173">Avec le lancement de .NET Core, Microsoft a également publié une nouvelle pile d’accès aux données basée sur Entity Framework et appelée Entity Framework Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-173">With the launch of .NET Core, Microsoft also released a new data access stack based on Entity Framework and called Entity Framework Core.</span></span>

<span data-ttu-id="5198e-174">Vous pouvez utiliser EF 6,4 et EF Core à la fois à partir de .NET Framework et de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-174">You can use EF 6.4 and EF Core from both .NET Framework and .NET Core.</span></span> <span data-ttu-id="5198e-175">Alors, quels sont les facteurs décisionnels qui vous aideront à décider entre les deux ?</span><span class="sxs-lookup"><span data-stu-id="5198e-175">So, what are the decision drivers to help to decide between the two?</span></span>

<span data-ttu-id="5198e-176">EF 6,3 est la première version de EF6 qui peut s’exécuter sur .NET Core et travailler sur plusieurs plateformes.</span><span class="sxs-lookup"><span data-stu-id="5198e-176">EF 6.3 is the first version of EF6 that can run on .NET Core and work cross-platform.</span></span> <span data-ttu-id="5198e-177">En fait, l’objectif principal de cette version était de faciliter la migration des applications existantes qui utilisent EF6 vers .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-177">In fact, the main goal of this release was to make it easier to migrate existing applications that use EF6 to .NET Core.</span></span>

<span data-ttu-id="5198e-178">EF Core a été conçu pour fournir une expérience de développement similaire à EF6.</span><span class="sxs-lookup"><span data-stu-id="5198e-178">EF Core was designed to provide a developer experience similar to EF6.</span></span> <span data-ttu-id="5198e-179">La plupart des API de niveau supérieur restent les mêmes ; EF Core semblera donc familier aux développeurs EF6.</span><span class="sxs-lookup"><span data-stu-id="5198e-179">Most of the top-level APIs remain the same, so EF Core will feel familiar to developers who have used EF6.</span></span>

<span data-ttu-id="5198e-180">Bien que compatible, il existe des différences au niveau de l’implémentation que vous devez vérifier avant de prendre une décision.</span><span class="sxs-lookup"><span data-stu-id="5198e-180">Although compatible, there are differences on the implementation you should check before making a decision.</span></span>
<span data-ttu-id="5198e-181">Pour plus d’informations, consultez [comparer EF Core & EF6](/ef/efcore-and-ef6/).</span><span class="sxs-lookup"><span data-stu-id="5198e-181">For more information, see [Compare EF Core & EF6](/ef/efcore-and-ef6/).</span></span>

<span data-ttu-id="5198e-182">La recommandation consiste à utiliser EF Core dans les cas suivants :</span><span class="sxs-lookup"><span data-stu-id="5198e-182">The recommendation is to use EF Core if:</span></span>

* <span data-ttu-id="5198e-183">L’application a besoin des fonctionnalités de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-183">The app needs the capabilities of .NET Core.</span></span>
* <span data-ttu-id="5198e-184">EF Core prend en charge toutes les fonctionnalités requises par l’application.</span><span class="sxs-lookup"><span data-stu-id="5198e-184">EF Core supports all of the features that the app requires.</span></span>

<span data-ttu-id="5198e-185">Utilisez plutôt EF6 si les deux conditions suivantes sont remplies :</span><span class="sxs-lookup"><span data-stu-id="5198e-185">Consider using EF6 if both of the following conditions are true:</span></span>

* <span data-ttu-id="5198e-186">L’application s’exécute sur Windows et .NET Framework 4,0 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="5198e-186">The app will run on Windows and .NET Framework 4.0 or later.</span></span>
* <span data-ttu-id="5198e-187">EF6 prend en charge toutes les fonctionnalités requises par l’application.</span><span class="sxs-lookup"><span data-stu-id="5198e-187">EF6 supports all of the features that the app requires.</span></span>

### <a name="relational-databases"></a><span data-ttu-id="5198e-188">Bases de données relationnelles</span><span class="sxs-lookup"><span data-stu-id="5198e-188">Relational databases</span></span>

#### <a name="sql-server"></a><span data-ttu-id="5198e-189">SQL Server</span><span class="sxs-lookup"><span data-stu-id="5198e-189">SQL Server</span></span>

<span data-ttu-id="5198e-190">SQL Server a été l’une des bases de données de choix si vous développez pour le bureau il y a quelques années.</span><span class="sxs-lookup"><span data-stu-id="5198e-190">SQL Server has been one of the databases of choice if you were developing for the desktop some years ago.</span></span> <span data-ttu-id="5198e-191">Avec l’utilisation de <xref:System.Data.SqlClient> dans .NET Framework, vous pouvez accéder à des versions de SQL Server, qui encapsule des protocoles spécifiques à la base de données.</span><span class="sxs-lookup"><span data-stu-id="5198e-191">With the use of <xref:System.Data.SqlClient> in .NET Framework, you could access versions of SQL Server, which encapsulates database-specific protocols.</span></span>

<span data-ttu-id="5198e-192">Dans .NET Core, vous pouvez trouver une nouvelle `SqlClient` classe, entièrement compatible avec celle qui existe dans le .NET Framework, mais qui se trouve dans la <xref:Microsoft.Data.SqlClient> bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="5198e-192">In .NET Core, you can find a new `SqlClient` class, fully compatible with the one existing in the .NET Framework but located in the <xref:Microsoft.Data.SqlClient> library.</span></span> <span data-ttu-id="5198e-193">Il vous suffit d’ajouter une référence au package NuGet [Microsoft. Data. SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) et de renommer les espaces de noms pour que tout fonctionne comme prévu.</span><span class="sxs-lookup"><span data-stu-id="5198e-193">You just have to add a reference to the [Microsoft.Data.SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) NuGet package and do some renaming for the namespaces and everything should work as expected.</span></span>

#### <a name="microsoft-access"></a><span data-ttu-id="5198e-194">Microsoft Access</span><span class="sxs-lookup"><span data-stu-id="5198e-194">Microsoft Access</span></span>

<span data-ttu-id="5198e-195">Microsoft Access a été utilisé depuis des années lorsque le SQL Server sophistiqué et le plus évolutif n’était pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="5198e-195">Microsoft Access has been used for years when the sophisticated and more scalable SQL Server wasn't needed.</span></span> <span data-ttu-id="5198e-196">Vous pouvez toujours vous connecter à Microsoft Access à l’aide de la <xref:System.Data.Odbc> bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="5198e-196">You can still connect to Microsoft Access using the <xref:System.Data.Odbc> library.</span></span>

## <a name="consuming-services"></a><span data-ttu-id="5198e-197">Utilisation des services</span><span class="sxs-lookup"><span data-stu-id="5198e-197">Consuming services</span></span>

<span data-ttu-id="5198e-198">Avec l’augmentation des architectures orientées service, les applications de bureau ont commencé à évoluer d’un modèle client-serveur à l’approche à trois couches.</span><span class="sxs-lookup"><span data-stu-id="5198e-198">With the raise of service-oriented architectures, desktop applications began to evolve from a client-server model to the three-layer approach.</span></span> <span data-ttu-id="5198e-199">Dans l’approche client-serveur, une connexion directe à la base de données est établie à partir du client qui détient la logique métier généralement à l’intérieur d’un seul fichier EXE.</span><span class="sxs-lookup"><span data-stu-id="5198e-199">In the client-server approach, a direct database connection is established from the client holding the business logic usually inside a single EXE file.</span></span> <span data-ttu-id="5198e-200">En revanche, l’approche à trois couches établit une couche de service intermédiaire qui implémente la logique métier et l’accès aux bases de données, ce qui permet de renforcer la sécurité, l’extensibilité et la réutilisation.</span><span class="sxs-lookup"><span data-stu-id="5198e-200">On the other hand, the three-layer approach establishes an intermediate service layer implementing business logic and database access allowing for better security, scalability, and reusability.</span></span> <span data-ttu-id="5198e-201">Au lieu de travailler directement avec les jeux de données de données, l’approche de couche s’appuie sur un ensemble de services qui implémentent des contrats et des objets de type comme un moyen d’implémenter le transfert de données.</span><span class="sxs-lookup"><span data-stu-id="5198e-201">Instead of working directly with datasets of data, the layer approach relies in a set of services implementing contracts and types objects as a way to implement data transfer.</span></span>

<span data-ttu-id="5198e-202">Si vous disposez d’une application de bureau à l’aide d’un service WCF et que vous souhaitez la migrer vers .NET Core, vous devez prendre en compte certains éléments.</span><span class="sxs-lookup"><span data-stu-id="5198e-202">If you have a desktop application using a WCF service and you want to migrate it to .NET Core, there are some things to consider.</span></span>

<span data-ttu-id="5198e-203">La première chose à faire est de résoudre la configuration pour accéder au service.</span><span class="sxs-lookup"><span data-stu-id="5198e-203">The first thing is how to resolve the configuration to access the service.</span></span> <span data-ttu-id="5198e-204">Étant donné que la configuration est différente sur .NET Core, vous devez effectuer certaines mises à jour dans votre fichier de configuration.</span><span class="sxs-lookup"><span data-stu-id="5198e-204">Because the configuration is different on .NET Core, you'll need to make some updates in your configuration file.</span></span>

<span data-ttu-id="5198e-205">Deuxièmement, vous devez régénérer le client de service avec les nouveaux outils présents sur Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="5198e-205">Second, you'll need to regenerate the service client with the new tools present on Visual Studio 2019.</span></span> <span data-ttu-id="5198e-206">Dans cette étape, vous devez envisager d’activer la génération des opérations synchrones pour rendre le client compatible avec votre code existant.</span><span class="sxs-lookup"><span data-stu-id="5198e-206">In this step, you must consider activating the generation of the synchronous operations to make the client compatible with your existing code.</span></span>

<span data-ttu-id="5198e-207">Après la migration, si vous constatez qu’il existe des bibliothèques dont vous avez besoin et qui ne sont pas présentes sur .NET Core, vous pouvez ajouter une référence au package NuGet [Microsoft. Windows. Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) et voir si les fonctions manquantes y sont.</span><span class="sxs-lookup"><span data-stu-id="5198e-207">After the migration, if you find that there are libraries you need that aren't present on .NET Core, you can add a reference to the [Microsoft.Windows.Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) NuGet package and see if the missing functions are there.</span></span>

<span data-ttu-id="5198e-208">Si vous utilisez la <xref:System.Net.WebRequest> classe pour effectuer des appels de service Web, il se peut que vous trouviez des différences sur .net core.</span><span class="sxs-lookup"><span data-stu-id="5198e-208">If you're using the <xref:System.Net.WebRequest> class to perform web service calls, you may find some differences on .NET Core.</span></span> <span data-ttu-id="5198e-209">La recommandation consiste à utiliser System .net. http. HttpClient à la place.</span><span class="sxs-lookup"><span data-stu-id="5198e-209">The recommendation is to use the System.Net.Http.HttpClient instead.</span></span>

## <a name="consuming-a-com-object"></a><span data-ttu-id="5198e-210">Utilisation d’un objet COM</span><span class="sxs-lookup"><span data-stu-id="5198e-210">Consuming a COM Object</span></span>

<span data-ttu-id="5198e-211">Actuellement, il n’existe aucun moyen d’ajouter une référence à un objet COM à partir de Visual Studio 2019 pour l’utiliser avec .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-211">Currently, there's no way to add a reference to a COM object from Visual Studio 2019 to use with .NET Core.</span></span> <span data-ttu-id="5198e-212">Par conséquent, vous devez modifier manuellement le fichier projet.</span><span class="sxs-lookup"><span data-stu-id="5198e-212">So, you have to manually modify the project file.</span></span>

<span data-ttu-id="5198e-213">Insérez une `COMReference` structure à l’intérieur du fichier projet, comme dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="5198e-213">Insert a `COMReference` structure inside the project file like in the following example:</span></span>

```xml
<ItemGroup>
    <COMReference Include="MSHTML">
        <Guid>{3050F1C5-98B5-11CF-BB82-00AA00BDCE0B}\</Guid>
        <VersionMajor>4</VersionMajor>
        <VersionMinor>0</VersionMinor>
        <Lcid>0</Lcid>
        <WrapperTool>primary</WrapperTool>
        <Isolated>false</Isolated>
    </COMReference>
</ItemGroup>
```

## <a name="more-things-to-consider"></a><span data-ttu-id="5198e-214">Autres éléments à prendre en compte</span><span class="sxs-lookup"><span data-stu-id="5198e-214">More things to consider</span></span>

<span data-ttu-id="5198e-215">Plusieurs technologies disponibles pour les bibliothèques de .NET Framework ne sont pas disponibles pour .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-215">Several technologies available to .NET Framework libraries aren't available for .NET Core.</span></span> <span data-ttu-id="5198e-216">Si votre code s’appuie sur certaines de ces technologies, tenez compte des autres approches décrites dans cette section.</span><span class="sxs-lookup"><span data-stu-id="5198e-216">If your code relies on some of these technologies, consider the alternative approaches outlined in this section.</span></span>

<span data-ttu-id="5198e-217">Le [Pack de compatibilité Windows](../../core/porting/windows-compat-pack.md) fournit un accès aux API qui étaient auparavant disponibles uniquement pour les .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="5198e-217">The [Windows Compatibility Pack](../../core/porting/windows-compat-pack.md) provides access to APIs that were previously available only for .NET Framework.</span></span> <span data-ttu-id="5198e-218">Il peut être utilisé sur des projets .NET Core et .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="5198e-218">It can be used on .NET Core and .NET Standard projects.</span></span>

<span data-ttu-id="5198e-219">Pour plus d’informations sur la compatibilité des API, consultez la documentation sur les modifications avec rupture et les API déconseillées/héritées à l’adresse <https://docs.microsoft.com/dotnet/core/compatibility/fx-core> .</span><span class="sxs-lookup"><span data-stu-id="5198e-219">For more information on API compatibility, you can find documentation about breaking changes and deprecated/legacy APIs at <https://docs.microsoft.com/dotnet/core/compatibility/fx-core>.</span></span>

### <a name="appdomains"></a><span data-ttu-id="5198e-220">AppDomains</span><span class="sxs-lookup"><span data-stu-id="5198e-220">AppDomains</span></span>

<span data-ttu-id="5198e-221">Les domaines d’application (AppDomains) isolent les applications les unes des autres.</span><span class="sxs-lookup"><span data-stu-id="5198e-221">Application domains (AppDomains) isolate apps from one another.</span></span> <span data-ttu-id="5198e-222">Les AppDomains nécessitent une prise en charge du runtime et sont coûteux.</span><span class="sxs-lookup"><span data-stu-id="5198e-222">AppDomains require runtime support and are expensive.</span></span> <span data-ttu-id="5198e-223">La création de domaines d’application supplémentaires n’est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="5198e-223">Creating additional app domains isn't supported.</span></span> <span data-ttu-id="5198e-224">Pour l’isolation du code, nous recommandons d’utiliser des processus distincts ou des conteneurs à la place.</span><span class="sxs-lookup"><span data-stu-id="5198e-224">For code isolation, we recommend separate processes or using containers as an alternative.</span></span> <span data-ttu-id="5198e-225">Pour le chargement dynamique d’assemblys, nous vous recommandons d’utiliser la nouvelle  <xref:System.Runtime.Loader.AssemblyLoadContext> classe.</span><span class="sxs-lookup"><span data-stu-id="5198e-225">For the dynamic loading of assemblies, we recommend the new <xref:System.Runtime.Loader.AssemblyLoadContext> class.</span></span>

<span data-ttu-id="5198e-226">Pour faciliter la migration du code .NET Framework, .NET Core expose une partie de la surface de l’API AppDomain.</span><span class="sxs-lookup"><span data-stu-id="5198e-226">To make code migration from .NET Framework easier, .NET Core exposes some of the AppDomain API surface.</span></span> <span data-ttu-id="5198e-227">Certaines des API fonctionnent normalement (par exemple,  <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType> ), certains membres ne font rien (par exemple,  <xref:System.AppDomain.SetCachePath%2A> ), et certains lèvent <xref:System.PlatformNotSupportedException> (par exemple,  <xref:System.AppDomain.CreateDomain%2A> ).</span><span class="sxs-lookup"><span data-stu-id="5198e-227">Some of the APIs function normally (for example, <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>), some members do nothing (for example, <xref:System.AppDomain.SetCachePath%2A>), and some of them throw <xref:System.PlatformNotSupportedException> (for example, <xref:System.AppDomain.CreateDomain%2A>).</span></span>

### <a name="remoting"></a><span data-ttu-id="5198e-228">Communication à distance</span><span class="sxs-lookup"><span data-stu-id="5198e-228">Remoting</span></span>

<span data-ttu-id="5198e-229">.NET Remoting a été utilisé pour la communication entre AppDomains, qui n’est plus prise en charge.</span><span class="sxs-lookup"><span data-stu-id="5198e-229">.NET Remoting was used for cross-AppDomain communication, which is no longer supported.</span></span> <span data-ttu-id="5198e-230">Par ailleurs, Remoting requiert la prise en charge du runtime, dont la maintenance est coûteuse.</span><span class="sxs-lookup"><span data-stu-id="5198e-230">Also, Remoting requires runtime support, which is expensive to maintain.</span></span> <span data-ttu-id="5198e-231">Pour ces raisons, .NET Remoting n’est pas pris en charge sur .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-231">For these reasons, .NET Remoting isn't supported on .NET Core.</span></span>

<span data-ttu-id="5198e-232">Pour la communication entre les processus, vous devez considérer les mécanismes de communication entre processus (IPC) comme une alternative à la communication à distance, telle que la <xref:System.IO.Pipes?displayProperty=nameWithType> <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> classe ou.</span><span class="sxs-lookup"><span data-stu-id="5198e-232">For communication across processes, you should consider inter-process communication (IPC) mechanisms as an alternative to Remoting, such as the <xref:System.IO.Pipes?displayProperty=nameWithType> or the <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> class.</span></span>

<span data-ttu-id="5198e-233">Pour la communication entre ordinateurs, utilisez plutôt une solution réseau.</span><span class="sxs-lookup"><span data-stu-id="5198e-233">Across machines, use a network-based solution as an alternative.</span></span> <span data-ttu-id="5198e-234">De préférence, utilisez un protocole en texte clair à faible surcharge, tel que HTTP.</span><span class="sxs-lookup"><span data-stu-id="5198e-234">Preferably, use a low-overhead plaintext protocol, such as HTTP.</span></span> <span data-ttu-id="5198e-235">Le serveur web Kestrel, utilisé par ASP.NET Core, est une possibilité.</span><span class="sxs-lookup"><span data-stu-id="5198e-235">The Kestrel web server, the web server used by ASP.NET Core, is an option here.</span></span>

### <a name="code-access-security-cas"></a><span data-ttu-id="5198e-236">Sécurité d'accès du code</span><span class="sxs-lookup"><span data-stu-id="5198e-236">Code Access Security (CAS)</span></span>

<span data-ttu-id="5198e-237">Le sandboxing, qui s’appuie sur le runtime ou l’infrastructure pour contraindre les ressources qu’une application ou une bibliothèque managée utilise ou exécute, n’est pas pris en charge sur .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5198e-237">Sandboxing, which relies on the runtime or the framework to constrain which resources a managed application or library uses or runs, isn't supported on .NET Core.</span></span>

<span data-ttu-id="5198e-238">Utilisez les limites de sécurité fournies par le système d’exploitation, telles que la virtualisation, les conteneurs ou les comptes d’utilisateur pour l’exécution des processus avec l’ensemble minimal de privilèges.</span><span class="sxs-lookup"><span data-stu-id="5198e-238">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the minimum set of privileges.</span></span>

### <a name="security-transparency"></a><span data-ttu-id="5198e-239">Transparence de la sécurité</span><span class="sxs-lookup"><span data-stu-id="5198e-239">Security Transparency</span></span>

<span data-ttu-id="5198e-240">Tout comme la sécurité d’accès du code, la transparence de la sécurité sépare le code sandbox du code critique de sécurité d’une manière déclarative, mais n’est plus prise en charge en tant que limite de sécurité.</span><span class="sxs-lookup"><span data-stu-id="5198e-240">Similar to CAS, Security Transparency separates sandboxed code from security critical code in a declarative fashion but is no longer supported as a security boundary.</span></span>

<span data-ttu-id="5198e-241">Utilisez les limites de sécurité fournies par le système d’exploitation, telles que la virtualisation, les conteneurs ou les comptes d’utilisateur pour l’exécution des processus avec le plus petit ensemble de privilèges.</span><span class="sxs-lookup"><span data-stu-id="5198e-241">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the least set of privileges.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="5198e-242">[Précédent](whats-new-dotnet-core.md ) 
> [Suivant](windows-migration.md)</span><span class="sxs-lookup"><span data-stu-id="5198e-242">[Previous](whats-new-dotnet-core.md )
[Next](windows-migration.md)</span></span>
