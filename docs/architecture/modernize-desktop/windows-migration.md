---
title: Migration vers Windows 10
description: Présentation approfondie des fonctionnalités de Windows 10, telles que l’empaquetage et les îlots XAML.
ms.date: 09/16/2019
ms.openlocfilehash: cd17088b086a32fd3bb37e617d3a1047acedde0e
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/15/2020
ms.locfileid: "83423207"
---
# <a name="windows-10-migration"></a><span data-ttu-id="1f838-103">Migration vers Windows 10</span><span class="sxs-lookup"><span data-stu-id="1f838-103">Windows 10 migration</span></span>

<span data-ttu-id="1f838-104">Considérez la situation suivante : vous disposez d’une application de bureau qui a été développée dans Windows 7 jours.</span><span class="sxs-lookup"><span data-stu-id="1f838-104">Consider the following situation: You have a working desktop application that was developed in the Windows 7 days.</span></span> <span data-ttu-id="1f838-105">Il utilise la technologie WPF disponible à ce moment-là et fonctionne bien, mais il possède une interface utilisateur et des comportements obsolètes quand vous l’exécutez sur Windows 10.</span><span class="sxs-lookup"><span data-stu-id="1f838-105">It's using WPF technology available at that time and working fine but it has an outdated UI and behaviors when you run it on Windows 10.</span></span> <span data-ttu-id="1f838-106">C’est comme lorsque vous regardez un film futur comme une matrice et que vous voyez Neo à l’aide de l’appareil Nokia 8110.</span><span class="sxs-lookup"><span data-stu-id="1f838-106">It is like when you watch a futuristic movie like Matrix and you see Neo using the Nokia 8110 device.</span></span> <span data-ttu-id="1f838-107">Le film fonctionne bien après 20 ans, mais il est préférable de tirer parti d’une modernisation d’appareils.</span><span class="sxs-lookup"><span data-stu-id="1f838-107">The film works great after 20 years but it would rather benefit from a device modernization.</span></span>

<span data-ttu-id="1f838-108">Avec la sortie de Windows 10, Microsoft a introduit de nombreuses innovations pour prendre en charge des scénarios tels que les tablettes et les appareils tactiles, et pour offrir la meilleure expérience aux utilisateurs pour un système d’exploitation Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1f838-108">With the release of Windows 10, Microsoft introduced many innovations to support scenarios like tablets and touch devices and to provide the best experience for users for a Microsoft operating system ever.</span></span> <span data-ttu-id="1f838-109">Vous pouvez par exemple :</span><span class="sxs-lookup"><span data-stu-id="1f838-109">For example, you can:</span></span>

- <span data-ttu-id="1f838-110">Connectez-vous avec votre visage à l’aide de Windows Hello.</span><span class="sxs-lookup"><span data-stu-id="1f838-110">Sign in with your face using Windows Hello.</span></span>
- <span data-ttu-id="1f838-111">Utilisez un stylet pour dessiner ou écrire du texte qui est automatiquement reconnu et numériquement.</span><span class="sxs-lookup"><span data-stu-id="1f838-111">Use a pen to draw or handwrite text that is automatically recognized and digitalized.</span></span>
- <span data-ttu-id="1f838-112">Exécutez des modèles IA personnalisés localement basés sur le Cloud à l’aide de WinML.</span><span class="sxs-lookup"><span data-stu-id="1f838-112">Run locally customized AI models built on the cloud using WinML.</span></span>

<span data-ttu-id="1f838-113">Toutes ces fonctionnalités sont activées pour les développeurs Windows via des bibliothèques Windows Runtime (WinRT).</span><span class="sxs-lookup"><span data-stu-id="1f838-113">All these features are enabled for Windows developers through Windows Runtime (WinRT) libraries.</span></span> <span data-ttu-id="1f838-114">Vous pouvez tirer parti de ces fonctionnalités dans vos applications de bureau existantes, car les bibliothèques sont exposées aussi bien aux .NET Framework qu’à .NET Core.</span><span class="sxs-lookup"><span data-stu-id="1f838-114">You can take advantage of these features in your existing desktop apps because the libraries are exposed to both the .NET Framework and .NET Core as well.</span></span> <span data-ttu-id="1f838-115">Vous pouvez même moderniser votre interface utilisateur avec l’utilisation d’îlots XAML et améliorer les visuels et le comportement de vos applications en fonction des heures.</span><span class="sxs-lookup"><span data-stu-id="1f838-115">You can even modernize your UI with the use of XAML Islands and improve the visuals and behavior of your apps according to the times.</span></span>

<span data-ttu-id="1f838-116">Une chose importante à noter ici est que vous n’avez pas besoin d’abandonner .NET Framework technologie pour suivre ce chemin de modernisation.</span><span class="sxs-lookup"><span data-stu-id="1f838-116">One important thing to note here is that you don't need to abandon .NET Framework technology to follow this modernization path.</span></span> <span data-ttu-id="1f838-117">Vous pouvez rester en toute sécurité et bénéficier de tous les avantages de Windows 10 sans avoir à migrer vers .NET Core.</span><span class="sxs-lookup"><span data-stu-id="1f838-117">You can safely stay on there and have all the benefits of Windows 10 without the pressure to migrate to .NET Core.</span></span> <span data-ttu-id="1f838-118">Vous bénéficiez ainsi de la puissance et de la flexibilité nécessaire pour choisir votre chemin de modernisation.</span><span class="sxs-lookup"><span data-stu-id="1f838-118">So, you get both the power and the flexibility to choose your modernization path.</span></span>

## <a name="winrt-apis"></a><span data-ttu-id="1f838-119">API WinRT</span><span class="sxs-lookup"><span data-stu-id="1f838-119">WinRT APIs</span></span>

<span data-ttu-id="1f838-120">Les API WinRT sont des interfaces de programmation d’applications (API) orientées objet et bien structurées qui permettent aux développeurs Windows 10 d’accéder à tout ce que le système d’exploitation doit offrir.</span><span class="sxs-lookup"><span data-stu-id="1f838-120">WinRT APIs are object-oriented, well-structured application programming interfaces (APIs) that give Windows 10 developers access to everything the operating system has to offer.</span></span> <span data-ttu-id="1f838-121">Grâce aux API WinRT, vous pouvez intégrer des fonctionnalités telles que des notifications push, des API de périphérique, Microsoft Ink et WinML, entre autres sur vos applications de bureau.</span><span class="sxs-lookup"><span data-stu-id="1f838-121">Through WinRT APIs, you can integrate functionalities like Push Notifications, Device APIs, Microsoft Ink, and WinML, among others on your desktop apps.</span></span>

<span data-ttu-id="1f838-122">En général, les API WinRT peuvent être appelées à partir d’une application de bureau classique.</span><span class="sxs-lookup"><span data-stu-id="1f838-122">In general, WinRT APIs can be called from a classic desktop app.</span></span> <span data-ttu-id="1f838-123">Toutefois, deux zones principales présentent une exception à cette règle :</span><span class="sxs-lookup"><span data-stu-id="1f838-123">However, two main areas present an exception to this rule:</span></span>

* <span data-ttu-id="1f838-124">API qui requièrent une identité de package.</span><span class="sxs-lookup"><span data-stu-id="1f838-124">APIs that require a package identity.</span></span>
* <span data-ttu-id="1f838-125">API nécessitant une visualisation comme XAML ou la composition.</span><span class="sxs-lookup"><span data-stu-id="1f838-125">APIs that require visualization like XAML or Composition.</span></span>

### <a name="universal-windows-platform-uwp-packages"></a><span data-ttu-id="1f838-126">Packages plateforme Windows universelle (UWP)</span><span class="sxs-lookup"><span data-stu-id="1f838-126">Universal Windows Platform (UWP) packages</span></span>

#### <a name="application-package-identity"></a><span data-ttu-id="1f838-127">Identité du package d’application</span><span class="sxs-lookup"><span data-stu-id="1f838-127">Application Package Identity</span></span>

<span data-ttu-id="1f838-128">Les applications UWP disposent d’un système de déploiement dans lequel le système d’exploitation gère l’installation et la désinstallation de l’application.</span><span class="sxs-lookup"><span data-stu-id="1f838-128">UWP apps have a deployment system where the OS manages the installation and uninstallation of application.</span></span> <span data-ttu-id="1f838-129">Cela nécessite que l’installation soit déclarative, ce qui signifie qu’aucun code utilisateur n’est exécuté lors de l’installation.</span><span class="sxs-lookup"><span data-stu-id="1f838-129">That requires the installation to be declarative, meaning that no user code is executed during install.</span></span> <span data-ttu-id="1f838-130">Au lieu de cela, tout ce que l’application veut intégrer au système, tel que les protocoles, les types de fichiers et les extensions, est déclaré dans le manifeste de l’application.</span><span class="sxs-lookup"><span data-stu-id="1f838-130">Instead, everything the app wants to integrate with the system, such as protocols, file types, and extensions, is declared in the application manifest.</span></span> <span data-ttu-id="1f838-131">Au moment du déploiement, le pipeline de déploiement configure ces points d’intégration.</span><span class="sxs-lookup"><span data-stu-id="1f838-131">At deployment time, the deployment pipeline configures those integration points.</span></span> <span data-ttu-id="1f838-132">La seule façon pour le système d’exploitation de gérer toutes ces fonctionnalités et d’effectuer le suivi de chaque « package » pour avoir une identité, un identificateur unique pour l’application.</span><span class="sxs-lookup"><span data-stu-id="1f838-132">The only way for the OS to manage all this functionality and keep track of it is for each 'package' to have an identity, a unique identifier for the application.</span></span>

<span data-ttu-id="1f838-133">Certaines API WinRT requièrent que cette identité de package fonctionne comme prévu.</span><span class="sxs-lookup"><span data-stu-id="1f838-133">Some WinRT APIs require this package identity to work as expected.</span></span> <span data-ttu-id="1f838-134">Toutefois, les applications de bureau classiques, comme les applications natives C++ ou .NET, utilisent des systèmes de déploiement différents qui ne nécessitent pas d’identité de package.</span><span class="sxs-lookup"><span data-stu-id="1f838-134">However, classic desktop apps like native C++ or .NET apps, use different deployment systems that don't require a package identity.</span></span> <span data-ttu-id="1f838-135">Si vous souhaitez utiliser ces API WinRT dans votre application de bureau, vous devez leur fournir une identité de package.</span><span class="sxs-lookup"><span data-stu-id="1f838-135">If you want to use these WinRT APIs in your desktop application, you need to provide them a package identity.</span></span>

<span data-ttu-id="1f838-136">Une façon de procéder consiste à créer un projet d’empaquetage supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="1f838-136">One way to proceed is to build an additional packaging project.</span></span> <span data-ttu-id="1f838-137">Dans le projet de Packaging, vous pointez sur le projet de code source d’origine et spécifiez les informations d’identité que vous souhaitez fournir.</span><span class="sxs-lookup"><span data-stu-id="1f838-137">Inside the packaging project, you point to the original source code project and specify the Identity information you want to provide.</span></span><span data-ttu-id="1f838-138">Si vous installez le package et exécutez l’application installée, vous obtiendrez automatiquement une identification permettant à votre code d’appeler toutes les API WinRT nécessitant une identité.</span><span class="sxs-lookup"><span data-stu-id="1f838-138"> If you install the package and run the installed app, it will automatically get an identify enabling your code to call all WinRT APIs requiring Identity.</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<Package xmlns="http://schemas.microsoft.com/appx/manifest/foundation/windows10"
         xmlns:uap="http://schemas.microsoft.com/appx/manifest/uap/windows10">
    <Identity Name="YOUR-APP-GUID "
              Publisher="CN=YOUR COMPANY"
              Version="1.x.x.x" />
</Package>
```

<span data-ttu-id="1f838-139">Vous pouvez vérifier les API qui ont besoin d’une identité d’application empaquetée en inspectant si le type qui contient l’API est marqué avec l’attribut [DualApiPartition](xref:Windows.Foundation.Metadata.DualApiPartitionAttribute) .</span><span class="sxs-lookup"><span data-stu-id="1f838-139">You can check which APIs need a packaged application identity by inspecting if the type that contains the API is marked with the [DualApiPartition](xref:Windows.Foundation.Metadata.DualApiPartitionAttribute) attribute.</span></span><span data-ttu-id="1f838-140">Si c’est le cas, vous pouvez appeler si à partir d’une application de bureau traditionnelle non comprise.</span><span class="sxs-lookup"><span data-stu-id="1f838-140"> If it is, you can call if from an unpackaged traditional desktop app.</span></span> <span data-ttu-id="1f838-141">Dans le cas contraire, vous devez convertir votre application de bureau classique en UWP à l’aide d’un projet de Packaging.</span><span class="sxs-lookup"><span data-stu-id="1f838-141">Otherwise, you must convert your classic desktop app to a UWP with the help of a packaging project.</span></span>

<https://docs.microsoft.com/windows/desktop/apiindex/uwp-apis-callable-from-a-classic-desktop-app>

#### <a name="benefits-of-packaging"></a><span data-ttu-id="1f838-142">Avantages de l’empaquetage</span><span class="sxs-lookup"><span data-stu-id="1f838-142">Benefits of packaging</span></span>

<span data-ttu-id="1f838-143">Outre l’accès à ces API, vous bénéficiez d’avantages supplémentaires en créant un package d’application Windows pour votre application de bureau, notamment :</span><span class="sxs-lookup"><span data-stu-id="1f838-143">Besides giving you access to these APIs, you get some additional benefits by creating a Windows App package for your desktop application including:</span></span>

* <span data-ttu-id="1f838-144">**Déploiement rationalisé**.</span><span class="sxs-lookup"><span data-stu-id="1f838-144">**Streamlined deployment**.</span></span> <span data-ttu-id="1f838-145">Les applications ont une expérience de déploiement optimale qui garantit que les utilisateurs peuvent installer une application en toute confiance et la mettre à jour.</span><span class="sxs-lookup"><span data-stu-id="1f838-145">Apps have a great deployment experience ensuring that users can confidently install an application and update it.</span></span> <span data-ttu-id="1f838-146">Si un utilisateur choisit de désinstaller l’application, celle-ci est entièrement supprimée sans aucune trace à gauche, ce qui empêche le problème de la table ROT Windows.</span><span class="sxs-lookup"><span data-stu-id="1f838-146">If a user chooses to uninstall the app, it's removed completely with no trace left behind preventing the Windows rot problem.</span></span>

* <span data-ttu-id="1f838-147">**Mises à jour automatiques et licences**.</span><span class="sxs-lookup"><span data-stu-id="1f838-147">**Automatic updates and licensing**.</span></span> <span data-ttu-id="1f838-148">Votre application peut participer aux fonctionnalités intégrées de gestion des licences et de mise à jour automatique de Microsoft Store.</span><span class="sxs-lookup"><span data-stu-id="1f838-148">Your application can participate in the Microsoft Store's built-in licensing and automatic update facilities.</span></span> <span data-ttu-id="1f838-149">La mise à jour automatique est un mécanisme extrêmement fiable et efficace, car seules les parties modifiées de fichiers sont téléchargées.</span><span class="sxs-lookup"><span data-stu-id="1f838-149">Automatic update is a highly reliable and efficient mechanism, because only the changed parts of files are downloaded.</span></span>

* <span data-ttu-id="1f838-150">**Augmentation de la portée et simplification de la monétisation**.</span><span class="sxs-lookup"><span data-stu-id="1f838-150">**Increased reach and simplified monetization**.</span></span> <span data-ttu-id="1f838-151">Peut-être pas votre cas, mais si vous choisissez de distribuer votre application via le Microsoft Store vous atteignez des millions d’utilisateurs de Windows 10.</span><span class="sxs-lookup"><span data-stu-id="1f838-151">Maybe not your case but if you choose to distribute your application through the Microsoft Store you reach millions of Windows 10 users.</span></span>

* <span data-ttu-id="1f838-152">**Ajout de fonctionnalités UWP**.</span><span class="sxs-lookup"><span data-stu-id="1f838-152">**Add UWP features**.</span></span> <span data-ttu-id="1f838-153">Vous pouvez ajouter des fonctionnalités UWP au package de votre application à votre propre rythme.</span><span class="sxs-lookup"><span data-stu-id="1f838-153">You can add UWP features to your app's package at your own pace.</span></span>

#### <a name="prepare-for-packaging"></a><span data-ttu-id="1f838-154">Préparer l’empaquetage</span><span class="sxs-lookup"><span data-stu-id="1f838-154">Prepare for packaging</span></span>

<span data-ttu-id="1f838-155">Avant de commencer à empaqueter votre application de bureau, vous devez prendre en compte certains points avant de commencer le processus.</span><span class="sxs-lookup"><span data-stu-id="1f838-155">Before proceeding to package your desktop application, there are some points you have to address before starting the process.</span></span> <span data-ttu-id="1f838-156">Votre application doit respecter les règles et stratégies de Microsoft Store et s’exécuter dans le modèle d’application UWP.</span><span class="sxs-lookup"><span data-stu-id="1f838-156">Your application must respect any of the Microsoft Store rules and policies and run in the UWP application model.</span></span> <span data-ttu-id="1f838-157">Par exemple, il doit s’exécuter sur le .NET Framework 4.6.2 ou version ultérieure et écrit dans la `HKEY_CURRENT_USER` ruche du Registre, et les dossiers AppData seront virtualisés à un emplacement local de l’application spécifique à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1f838-157">For example, it has to run on the .NET Framework 4.6.2 or later and writes to the `HKEY_CURRENT_USER` registry hive and the AppData folders will be virtualized to a user-specific app-local location.</span></span>

<span data-ttu-id="1f838-158">L’objectif de conception de l’empaquetage est de séparer l’état de l’application de l’état du système tout en conservant la compatibilité avec d’autres applications.</span><span class="sxs-lookup"><span data-stu-id="1f838-158">The design goal for packaging is to separate the application state from system state while maintaining compatibility with other apps.</span></span> <span data-ttu-id="1f838-159">Windows 10 remplit cet objectif en plaçant l’application à l’intérieur d’un package UWP.</span><span class="sxs-lookup"><span data-stu-id="1f838-159">Windows 10 accomplishes this goal by placing the application inside a UWP package.</span></span> <span data-ttu-id="1f838-160">Il détecte et redirige certaines modifications apportées au système de fichiers et au registre au moment de l’exécution afin de garantir la promesse d’une installation approuvée et propre, ainsi que du comportement de désinstallation d’une application fournie par l’empaquetage.</span><span class="sxs-lookup"><span data-stu-id="1f838-160">It detects and redirects some changes to the file system and registry at run time to fulfill the promise of a trusted and clean install and uninstall behavior of an application provided by packaging.</span></span>

<span data-ttu-id="1f838-161">Les packages que vous créez pour votre application de bureau sont des applications de bureau uniquement et de confiance totale qui ne sont pas mises en sandbox, bien qu’il y ait une virtualisation légère appliquée à l’application pour les écritures dans `HKCU` et `AppData` .</span><span class="sxs-lookup"><span data-stu-id="1f838-161">Packages that you create for your desktop application are desktop-only, full-trust applications that aren't sandboxed, although there's lightweight virtualization applied to the app for writes to `HKCU` and `AppData`.</span></span> <span data-ttu-id="1f838-162">Cette virtualisation leur permet d’interagir avec d’autres applications de la même façon que les applications de bureau classiques.</span><span class="sxs-lookup"><span data-stu-id="1f838-162">This virtualization allows them to interact with other apps the same way classic desktop applications do.</span></span>

##### <a name="installation"></a><span data-ttu-id="1f838-163">Installation</span><span class="sxs-lookup"><span data-stu-id="1f838-163">Installation</span></span>

<span data-ttu-id="1f838-164">Les packages d’application sont installés sous *% ProgramFiles% \\ WindowsApps \\ package_name*, avec l’exécutable intitulé  `app_name.exe` .</span><span class="sxs-lookup"><span data-stu-id="1f838-164">App packages are installed under *%ProgramFiles%\\WindowsApps\\package_name*, with the executable titled `app_name.exe`.</span></span> <span data-ttu-id="1f838-165">Chaque dossier de package contient un manifeste (nommé `AppxManifest.xml` ) qui contient un espace de noms XML spécial pour les applications empaquetées.</span><span class="sxs-lookup"><span data-stu-id="1f838-165">Each package folder contains a manifest (named `AppxManifest.xml`) that contains a special XML namespace for packaged apps.</span></span> <span data-ttu-id="1f838-166">Dans ce fichier manifeste se trouve un  `<EntryPoint>`   élément qui fait référence à l’application de confiance totale.</span><span class="sxs-lookup"><span data-stu-id="1f838-166">Inside that manifest file is an `<EntryPoint>` element, which references the full-trust app.</span></span> <span data-ttu-id="1f838-167">Lorsque cette application est lancée, elle ne s’exécute pas dans un conteneur d’application, mais elle s’exécute en tant qu’utilisateur normalement.</span><span class="sxs-lookup"><span data-stu-id="1f838-167">When that application is launched, it doesn't run inside an app container, but instead it runs as the user as it normally would.</span></span>

<span data-ttu-id="1f838-168">Après le déploiement, les fichiers du package sont marqués en lecture seule et fortement verrouillés par le système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="1f838-168">After deployment, package files are marked read-only and heavily locked down by the operating system.</span></span> <span data-ttu-id="1f838-169">Windows empêche le lancement des applications si ces fichiers sont falsifiés.</span><span class="sxs-lookup"><span data-stu-id="1f838-169">Windows prevents apps from launching if these files are tampered with.</span></span>

##### <a name="file-system"></a><span data-ttu-id="1f838-170">Système de fichiers</span><span class="sxs-lookup"><span data-stu-id="1f838-170">File system</span></span>

<span data-ttu-id="1f838-171">Le système d’exploitation prend en charge différents niveaux d’opérations de système de fichiers pour les applications de bureau empaquetées, en fonction de l’emplacement du dossier.</span><span class="sxs-lookup"><span data-stu-id="1f838-171">The OS supports different levels of file system operations for packaged desktop applications, depending on the folder location.</span></span>

<span data-ttu-id="1f838-172">Lorsque vous tentez d’accéder au dossier *AppData* de l’utilisateur, le système crée un emplacement privé par utilisateur et par application en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="1f838-172">When trying to access the user's *AppData* folder, the system creates a private per-user, per-app location behind the scenes.</span></span> <span data-ttu-id="1f838-173">Cela crée l’illusion que l’application empaquetée modifie le *AppData* réel lorsqu’il modifie en fait une copie privée.</span><span class="sxs-lookup"><span data-stu-id="1f838-173">This creates the illusion that the packaged application is editing the real *AppData* when it's actually modifying a private copy.</span></span> <span data-ttu-id="1f838-174">En redirigeant les écritures de cette façon, le système peut suivre toutes les modifications de fichier effectuées par l’application.</span><span class="sxs-lookup"><span data-stu-id="1f838-174">By redirecting writes this way, the system can track all file modifications made by the app.</span></span> <span data-ttu-id="1f838-175">Il peut ensuite nettoyer tous ces fichiers lors de la désinstallation de la réduction du système « rot » et fournir une meilleure expérience de suppression d’application pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1f838-175">It can then clean all those files when uninstalling reducing system "rot" and providing a better application removal experience for the user.</span></span>

##### <a name="registry"></a><span data-ttu-id="1f838-176">Registre</span><span class="sxs-lookup"><span data-stu-id="1f838-176">Registry</span></span>

<span data-ttu-id="1f838-177">Les packages d’application contiennent un fichier Registry. dat, qui sert d’équivalent logique de  `HKLM\Software`   dans le registre réel.</span><span class="sxs-lookup"><span data-stu-id="1f838-177">App packages contain a registry.dat file, which serves as the logical equivalent of `HKLM\Software` in the real registry.</span></span> <span data-ttu-id="1f838-178">À l’exécution, ce Registre virtuel fusionne le contenu de cette ruche dans la ruche du système natif afin de fournir un affichage unique des deux.</span><span class="sxs-lookup"><span data-stu-id="1f838-178">At runtime, this virtual registry merges the contents of this hive into the native system hive to provide a singular view of both.</span></span>

<span data-ttu-id="1f838-179">Toutes les écritures sont conservées lors de la mise à niveau du package et ne sont supprimées que lorsque l’application est désinstallée.</span><span class="sxs-lookup"><span data-stu-id="1f838-179">All writes are kept during package upgrade and only deleted when the application is uninstalled.</span></span>

##### <a name="uninstallation"></a><span data-ttu-id="1f838-180">Désinstallation</span><span class="sxs-lookup"><span data-stu-id="1f838-180">Uninstallation</span></span>

<span data-ttu-id="1f838-181">Lorsque l’utilisateur désinstalle un package, tous les fichiers et dossiers situés sous  `C:\Program Files\WindowsApps\package_name` sont supprimés, ainsi que toutes les écritures redirigées vers AppData ou le Registre qui ont été capturées pendant le processus.</span><span class="sxs-lookup"><span data-stu-id="1f838-181">When the user uninstalls a package, all files and folders located under `C:\Program Files\WindowsApps\package_name` are removed, as well as any redirected writes to AppData or the registry that were captured during the process.</span></span>

<span data-ttu-id="1f838-182">Pour plus d’informations sur la façon dont une application empaquetée gère l’installation, l’accès aux fichiers, le registre et la désinstallation, consultez <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-behind-the-scenes> .</span><span class="sxs-lookup"><span data-stu-id="1f838-182">For details about how a packaged application handles installation, file access, registry, and uninstallation, see <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-behind-the-scenes>.</span></span>

<span data-ttu-id="1f838-183">Vous pouvez obtenir la liste complète des éléments à vérifier <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-prepare> .</span><span class="sxs-lookup"><span data-stu-id="1f838-183">You can get a complete list of things to check on <https://docs.microsoft.com/windows/msix/desktop/desktop-to-uwp-prepare>.</span></span>

## <a name="how-to-add-winrt-apis-to-your-desktop-project"></a><span data-ttu-id="1f838-184">Comment ajouter des API WinRT à votre projet de bureau</span><span class="sxs-lookup"><span data-stu-id="1f838-184">How to add WinRT APIs to your desktop project</span></span>

<span data-ttu-id="1f838-185">Dans cette section, vous trouverez une procédure pas à pas sur l’intégration des notifications Toast dans une application WPF existante.</span><span class="sxs-lookup"><span data-stu-id="1f838-185">In this section, you can find a walkthrough on how to integrate Toast Notifications in an existing WPF application.</span></span> <span data-ttu-id="1f838-186">Bien qu’il soit simple du point de vue du code, il permet d’illustrer l’ensemble du processus.</span><span class="sxs-lookup"><span data-stu-id="1f838-186">Although it's simple from the code perspective, it helps illustrate the whole process.</span></span> <span data-ttu-id="1f838-187">Les notifications sont l’une des nombreuses API WinRT disponibles que vous pouvez utiliser dans l’application .NET.</span><span class="sxs-lookup"><span data-stu-id="1f838-187">Notifications are one of the many available WinRT APIs available that you can use in .NET app.</span></span> <span data-ttu-id="1f838-188">Dans ce cas, l’API requiert une identité de package.</span><span class="sxs-lookup"><span data-stu-id="1f838-188">In this case, the API requires a Package Identity.</span></span> <span data-ttu-id="1f838-189">Ce processus est plus simple si les API ne nécessitent pas d’identité de package.</span><span class="sxs-lookup"><span data-stu-id="1f838-189">This process is more straightforward if the APIs don't require Package Identity.</span></span>

<span data-ttu-id="1f838-190">Prenons un exemple d’application WPF existant qui lit des fichiers et affiche son contenu à l’écran.</span><span class="sxs-lookup"><span data-stu-id="1f838-190">Let's take an existing WPF sample app that reads files and shows its contents on the screen.</span></span> <span data-ttu-id="1f838-191">L’objectif est d’afficher une notification Toast au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="1f838-191">The goal is to display a Toast Notification when the application starts.</span></span>

![Capture d’écran de l’exemple d’application en cours d’exécution](./media/windows-migration/sample-application.png)

<span data-ttu-id="1f838-193">Tout d’abord, vous devez consulter le lien suivant pour savoir si l’API Windows 10 que vous allez utiliser requiert une identité de package :</span><span class="sxs-lookup"><span data-stu-id="1f838-193">First, you should check in the following link whether the Windows 10 API that you'll use requires a Package Identity:</span></span>

<https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-supported-api>

<span data-ttu-id="1f838-194">Notre exemple utilise l' <xref:Windows.UI.Notifications.Notification?displayProperty=nameWithType> API qui requiert une identité empaquetée :</span><span class="sxs-lookup"><span data-stu-id="1f838-194">Our sample will use the <xref:Windows.UI.Notifications.Notification?displayProperty=nameWithType> API that requires a packaged identity:</span></span>

![Classe de notification dans la documentation Microsoft](./media/windows-migration/notification-class-documentation.png)

<span data-ttu-id="1f838-196">Pour accéder à l’API WinRT, ajoutez une référence au `Microsoft.Windows.SDK.Contracts`   package NuGet. ce package fera la magie en arrière-plan (consultez les détails à l’adresse <https://blogs.windows.com/windowsdeveloper/2019/04/30/calling-windows-10-apis-from-a-desktop-application-just-got-easier/> ).</span><span class="sxs-lookup"><span data-stu-id="1f838-196">To access the WinRT API, add a reference to the `Microsoft.Windows.SDK.Contracts` NuGet package and this package will do the magic behind the scenes (see details at <https://blogs.windows.com/windowsdeveloper/2019/04/30/calling-windows-10-apis-from-a-desktop-application-just-got-easier/>).</span></span>

<span data-ttu-id="1f838-197">Vous êtes maintenant prêt à commencer à ajouter du code.</span><span class="sxs-lookup"><span data-stu-id="1f838-197">You're now prepared to start adding some code.</span></span>

<span data-ttu-id="1f838-198">Créez une `ShowToastNotification` méthode qui sera appelée au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="1f838-198">Create a `ShowToastNotification` method that will be called on application startup.</span></span> <span data-ttu-id="1f838-199">Il génère simplement une notification toast à partir d’un modèle XML :</span><span class="sxs-lookup"><span data-stu-id="1f838-199">It just builds a toast notification from an XML pattern:</span></span>

```csharp
private void ShowNotification(string title, string content, string image)
{
    string xmlString = $@"<toast><visual><binding template = 'ToastGeneric'><text>{title}</text><text>{content}</text><image src=>'{image}'</image></binding></visual></toast>";
    XmlDocument toastXml = new XmlDocument();
    toastXml.LoadXml(xmlString);
    ToastNotification toast = new ToastNotification(toastXml);
    ToastNotificationManager.CreateToastNotifier().Show(toast);
}
```

<span data-ttu-id="1f838-200">Bien que le projet soit généré, il y a des erreurs, car l’API notifications requiert une identité de package et vous ne l’avez pas fournie.</span><span class="sxs-lookup"><span data-stu-id="1f838-200">Although the project builds, there are errors because the Notifications API requires a Package Identity and you didn't provide it.</span></span> <span data-ttu-id="1f838-201">L’ajout d’un projet de Packaging Windows à la solution permet de résoudre le problème :</span><span class="sxs-lookup"><span data-stu-id="1f838-201">Adding a Windows Packaging Project to the solution will fix the issue:</span></span>

![Capture d’écran de la boîte de dialogue Ajouter un nouveau projet dans Visual Studio](./media/windows-migration/add-packaging-project.png)

<span data-ttu-id="1f838-203">Sélectionnez la version minimale de Windows que vous souhaitez prendre en charge et la version que vous ciblez.</span><span class="sxs-lookup"><span data-stu-id="1f838-203">Select the minimum Windows version you want to support and the version you're targeting.</span></span> <span data-ttu-id="1f838-204">Toutes les API WinRT ne sont pas prises en charge dans toutes les versions de Windows 10.</span><span class="sxs-lookup"><span data-stu-id="1f838-204">Not all the WinRT APIs are supported in all Windows 10 versions.</span></span> <span data-ttu-id="1f838-205">Chaque mise à jour de Windows 10 ajoute de nouvelles API qui sont uniquement disponibles à partir de cette version. la prise en charge de niveau supérieur n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="1f838-205">Each Windows 10 update adds new APIs that are only available from this version; down-level support isn't available.</span></span>

![Sélection de la version minimale de Windows](./media/windows-migration/select-versions.png)

<span data-ttu-id="1f838-207">L’étape suivante consiste à ajouter l’application WPF au projet de Packaging Windows en ajoutant une référence de projet :</span><span class="sxs-lookup"><span data-stu-id="1f838-207">Next step is to add the WPF application to the Windows Packaging Project by adding a project reference:</span></span>

![Ajout d’une application WPF au projet de Packaging Windows](./media/windows-migration/add-application.png)

![Gestionnaire de références](./media/windows-migration/reference-manager.png)

<span data-ttu-id="1f838-210">Un projet de Packaging Windows peut empaqueter plusieurs applications. vous devez donc définir celle qui correspond au point d’entrée :</span><span class="sxs-lookup"><span data-stu-id="1f838-210">A Windows Packaging Project can package several apps so you should set which one is the Entry Point:</span></span>

![Définition du point d’entrée](./media/windows-migration/set-entry-point.png)

<span data-ttu-id="1f838-212">L’étape suivante consiste à définir le projet WPF comme projet de démarrage dans la configuration de la solution.</span><span class="sxs-lookup"><span data-stu-id="1f838-212">Next step is to set the WPF Project as the startup Project in the solution configuration.</span></span> <span data-ttu-id="1f838-213">Vous pouvez appuyer sur F5 pour compiler et générer et afficher les résultats.</span><span class="sxs-lookup"><span data-stu-id="1f838-213">You can press F5 to compile and build and see the results.</span></span>

![Exemple d’application en cours d’exécution et présentant des résultats](./media/windows-migration/sample-app-result.png)

<span data-ttu-id="1f838-215">Nous allons générer le package afin de pouvoir installer votre application.</span><span class="sxs-lookup"><span data-stu-id="1f838-215">Let's generate the package so you can install your app.</span></span> <span data-ttu-id="1f838-216">Cliquez avec le bouton droit sur **Store**  >  **créer des packages d’application**.</span><span class="sxs-lookup"><span data-stu-id="1f838-216">Right click on **Store** > **Create App Packages**.</span></span>

![Boîte de dialogue créer des packages d’application](./media/windows-migration/create-app-packages.png)

<span data-ttu-id="1f838-218">Sélectionnez l’option chargement pour déployer l’application à partir de votre ordinateur :</span><span class="sxs-lookup"><span data-stu-id="1f838-218">Select the sideloading option to deploy the app from your machine:</span></span>

![Sélection de l’option chargement](./media/windows-migration/select-sideloading-option.png)

<span data-ttu-id="1f838-220">Sélectionnez l’architecture d’application de votre application :</span><span class="sxs-lookup"><span data-stu-id="1f838-220">Select the application architecture of your app:</span></span>

![Sélection de l’architecture de l’application](./media/windows-migration/select-app-architecture.png)

<span data-ttu-id="1f838-222">Enfin, créez le package en cliquant sur **créer**.</span><span class="sxs-lookup"><span data-stu-id="1f838-222">Finally, create the package by clicking on **Create**.</span></span>

## <a name="xaml-islands"></a><span data-ttu-id="1f838-223">XAML Islands</span><span class="sxs-lookup"><span data-stu-id="1f838-223">XAML Islands</span></span>

<span data-ttu-id="1f838-224">Les îlots XAML sont un ensemble de composants qui permettent aux développeurs de bureau Windows d’utiliser les contrôles XAML UWP sur leurs applications Win32 existantes, y compris Windows Forms et WPF.</span><span class="sxs-lookup"><span data-stu-id="1f838-224">XAML Islands are a set of components that enable Windows desktop developers to use UWP XAML controls on their existing Win32 applications, including Windows Forms and WPF.</span></span>

![Structure des îlots XAML](./media/windows-migration/xaml-islands.png)

<span data-ttu-id="1f838-226">Vous pouvez créer une image de votre application Win32 avec vos contrôles standard et parmi eux un « îlot » d’interfaces utilisateur UWP contenant des contrôles du monde moderne.</span><span class="sxs-lookup"><span data-stu-id="1f838-226">You can image your Win32 app with your standard controls and among them an "island" of UWP UI containing controls from the modern world.</span></span> <span data-ttu-id="1f838-227">Le concept est similaire à la présence d’un iFrame dans une page Web qui affiche le contenu d’un`different page.`</span><span class="sxs-lookup"><span data-stu-id="1f838-227">The concept is similar as having an iFrame inside a web page that shows content from a `different page.`</span></span>

<span data-ttu-id="1f838-228">Outre l’ajout de fonctionnalités à partir des API Windows 10, vous pouvez ajouter des éléments de code XAML UWP à l’intérieur de votre application à l’aide des îlots XAML.</span><span class="sxs-lookup"><span data-stu-id="1f838-228">Besides adding functionality from the Windows 10 APIs, you can add pieces of UWP XAML inside of your app using XAML Islands.</span></span>

<span data-ttu-id="1f838-229">La mise à jour de Windows 10 1903 introduit un ensemble d’API qui permet d’héberger le contenu XAML UWP dans les fenêtres Win32.</span><span class="sxs-lookup"><span data-stu-id="1f838-229">Windows 10 1903 update introduces a set of APIs that allows hosting UWP XAML content in Win32 windows.</span></span> <span data-ttu-id="1f838-230">Seules les applications qui s’exécutent sur Windows 10 1903 peuvent utiliser des îlots XAML.</span><span class="sxs-lookup"><span data-stu-id="1f838-230">Only apps running on Windows 10 1903 can use XAML Islands.</span></span>

### <a name="the-road-to-xaml-islands"></a><span data-ttu-id="1f838-231">La route vers les îles XAML</span><span class="sxs-lookup"><span data-stu-id="1f838-231">The road to XAML Islands</span></span>

<span data-ttu-id="1f838-232">La route vers les îlots XAML a débuté dans 2012 lorsque Microsoft a introduit les API WinRT comme infrastructure pour moderniser les applications Win32 (Windows Forms, WPF et les applications Win32 natives).</span><span class="sxs-lookup"><span data-stu-id="1f838-232">The road to XAML Islands started in 2012 when Microsoft introduced the WinRT APIs as a framework to modernize the Win32 apps (Windows Forms, WPF, and native Win32 apps).</span></span> <span data-ttu-id="1f838-233">Toutefois, les nouveaux contrôles d’interface utilisateur à l’intérieur de WinRT étaient disponibles pour les nouvelles applications, mais pas pour ceux qui existent déjà.</span><span class="sxs-lookup"><span data-stu-id="1f838-233">However, the new UI controls inside WinRT were available for new applications but not for existing ones.</span></span>

<span data-ttu-id="1f838-234">Dans 2015, avec Windows 10, UWP est né.</span><span class="sxs-lookup"><span data-stu-id="1f838-234">In 2015, along with Windows 10, UWP was born.</span></span> <span data-ttu-id="1f838-235">UWP vous permet de créer des applications qui fonctionnent sur des appareils Windows tels que XBox, mobile et Desktop.</span><span class="sxs-lookup"><span data-stu-id="1f838-235">UWP allows you to create apps that work across Windows devices like XBox, Mobile, and Desktop.</span></span> <span data-ttu-id="1f838-236">Un an plus tard, Microsoft a annoncé le pont de bureau (anciennement projet Centennial).</span><span class="sxs-lookup"><span data-stu-id="1f838-236">One year later, Microsoft announced Desktop Bridge (formerly known as Project Centennial).</span></span> <span data-ttu-id="1f838-237">Desktop Bridge est un ensemble d’outils qui permettaient aux développeurs d’intégrer leurs applications Win32 existantes à la Microsoft Store.</span><span class="sxs-lookup"><span data-stu-id="1f838-237">Desktop Bridge is a set of tools that allowed developers to bring their existing Win32 apps to the Microsoft Store.</span></span> <span data-ttu-id="1f838-238">D’autres fonctionnalités ont été ajoutées dans 2017, ce qui permet aux développeurs d’améliorer leurs applications Win32 en tirant parti de certaines des nouvelles API Windows 10, comme les vignettes dynamiques et les notifications sur le centre de maintenance.</span><span class="sxs-lookup"><span data-stu-id="1f838-238">More capabilities were added in 2017, allowing developers to enhance their Win32 apps leveraging some of the new Windows 10 APIs, like live tiles and notifications on the action center.</span></span> <span data-ttu-id="1f838-239">Mais pourtant, aucun nouveau contrôle d’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1f838-239">But still, no new UI controls.</span></span>

<span data-ttu-id="1f838-240">Au niveau de la build 2018, Microsoft a annoncé aux développeurs qu’ils utilisent les nouveaux contrôles XAML Windows 10 dans leurs applications Win32 actuelles, sans migrer complètement leurs applications vers UWP.</span><span class="sxs-lookup"><span data-stu-id="1f838-240">At Build 2018, Microsoft announced a way for developers to use the new Windows 10 XAML controls into their current Win32 apps, without fully migrating their apps to UWP.</span></span> <span data-ttu-id="1f838-241">Elle a été personnalisée comme des îlots de la série UWP.</span><span class="sxs-lookup"><span data-stu-id="1f838-241">It was branded as UWP XAML Islands.</span></span>

### <a name="how-it-works"></a><span data-ttu-id="1f838-242">Fonctionnement</span><span class="sxs-lookup"><span data-stu-id="1f838-242">How it works</span></span>

<span data-ttu-id="1f838-243">La mise à jour de Windows 10 1903 introduit plusieurs API d’hébergement XAML.</span><span class="sxs-lookup"><span data-stu-id="1f838-243">The Windows 10 1903 update introduces several XAML hosting APIs.</span></span> <span data-ttu-id="1f838-244">Deux d’entre eux sont `WindowsXamlManager`   et  `DesktopWindowXamlSource` .</span><span class="sxs-lookup"><span data-stu-id="1f838-244">Two of them are `WindowsXamlManager` and `DesktopWindowXamlSource`.</span></span>

<span data-ttu-id="1f838-245">La  `WindowsXamlManager`   classe gère l’infrastructure XAML UWP.</span><span class="sxs-lookup"><span data-stu-id="1f838-245">The `WindowsXamlManager` class handles the UWP XAML Framework.</span></span> <span data-ttu-id="1f838-246">Sa `InitializeForCurrentThread` méthode charge l’infrastructure XAML UWP dans le thread actuel de l’application Win32.</span><span class="sxs-lookup"><span data-stu-id="1f838-246">Its `InitializeForCurrentThread` method loads the UWP XAML Framework inside the current thread of the Win32 app.</span></span>

<span data-ttu-id="1f838-247"> `DesktopWindowXamlSource`   Est l’instance de votre contenu d’îlot XAML.</span><span class="sxs-lookup"><span data-stu-id="1f838-247">The `DesktopWindowXamlSource` is the instance of your XAML Island content.</span></span> <span data-ttu-id="1f838-248">Il possède la `Content` propriété, que vous êtes chargé d’instancier et de définir.</span><span class="sxs-lookup"><span data-stu-id="1f838-248">It has the `Content` property, which you're responsible for instantiating and setting.</span></span> <span data-ttu-id="1f838-249">Le `DesktopWindowXamlSource`   restitue et obtient son entrée à partir d’un HWND.</span><span class="sxs-lookup"><span data-stu-id="1f838-249">The `DesktopWindowXamlSource` renders and gets its input from an HWND.</span></span> <span data-ttu-id="1f838-250">Il doit savoir à quel autre HWND il attachera l’îlot XAML, et vous êtes responsable du dimensionnement et du positionnement du HWND du parent.</span><span class="sxs-lookup"><span data-stu-id="1f838-250">It needs to know to which other HWND it will attach the XAML Island's one, and you're responsible for sizing and positioning the parent's HWND.</span></span>

<span data-ttu-id="1f838-251">Les développeurs WPF ou Windows Forms ne traitent généralement pas HWND à l’intérieur de leur code. il peut donc être difficile de comprendre et de gérer les pointeurs HWND et les câbles sous-jacents pour communiquer des mondes Win32 et UWP.</span><span class="sxs-lookup"><span data-stu-id="1f838-251">WPF or Windows Forms developers don't usually deal with HWND inside their code, so it may be hard to understand and handle HWND pointers and the underlying wiring stuff to communicate Win32 and UWP worlds.</span></span>

#### <a name="the-xaml-islands-net-wrappers"></a><span data-ttu-id="1f838-252">Wrappers .NET des îlots XAML</span><span class="sxs-lookup"><span data-stu-id="1f838-252">The XAML Islands .NET Wrappers</span></span>

<span data-ttu-id="1f838-253">La boîte à outils de la communauté Windows a défini les wrappers .NET des îlots XAML pour WPF ou Windows Forms qui facilitent l’utilisation des îlots XAML.</span><span class="sxs-lookup"><span data-stu-id="1f838-253">The Windows Community Toolkit has a set the XAML Islands .NET wrappers for WPF or Windows Forms that make easier to use XAML Islands.</span></span> <span data-ttu-id="1f838-254">Ces wrappers gèrent les HWND, la gestion du focus, entre autres choses.</span><span class="sxs-lookup"><span data-stu-id="1f838-254">These wrappers manage the HWNDs, the focus management, among other things.</span></span> <span data-ttu-id="1f838-255">Les développeurs Windows Forms et WPF doivent utiliser ces wrappers.</span><span class="sxs-lookup"><span data-stu-id="1f838-255">Windows Forms and WPF developers should use these wrappers.</span></span>

<span data-ttu-id="1f838-256">Le kit de connaissances de la communauté Windows propose deux types de contrôles : les contrôles encapsulés et les contrôles d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="1f838-256">The Windows Community Toolkit offers two types of controls: Wrapped Controls and Hosting Controls.</span></span>

##### <a name="wrapped-controls"></a><span data-ttu-id="1f838-257">Contrôles encapsulés</span><span class="sxs-lookup"><span data-stu-id="1f838-257">Wrapped Controls</span></span>

<span data-ttu-id="1f838-258">Ces contrôles encapsulés encapsulent certains contrôles UWP dans des contrôles Windows Forms ou WPF, masquant les concepts UWP pour ces développeurs.</span><span class="sxs-lookup"><span data-stu-id="1f838-258">These wrapped controls wrap some UWP controls into Windows Forms or WPF controls, hiding UWP concepts for those developers.</span></span> <span data-ttu-id="1f838-259">Ces contrôles sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="1f838-259">These controls are:</span></span>

* <span data-ttu-id="1f838-260">WebView et WebViewCompatible</span><span class="sxs-lookup"><span data-stu-id="1f838-260">WebView and WebViewCompatible</span></span>
* <span data-ttu-id="1f838-261">InkCanvas et InkToolbar</span><span class="sxs-lookup"><span data-stu-id="1f838-261">InkCanvas and InkToolbar</span></span>
* <span data-ttu-id="1f838-262">MediaPlayerElement</span><span class="sxs-lookup"><span data-stu-id="1f838-262">MediaPlayerElement</span></span>
* <span data-ttu-id="1f838-263">MapControl</span><span class="sxs-lookup"><span data-stu-id="1f838-263">MapControl</span></span>

<span data-ttu-id="1f838-264">Ajoutez le `Microsoft.Toolkit.Wpf.UI.Controls` package à votre projet, incluez la référence à l’espace de noms et commencez à les utiliser.</span><span class="sxs-lookup"><span data-stu-id="1f838-264">Add the `Microsoft.Toolkit.Wpf.UI.Controls` package to your project, include the reference to the namespace, and start using them.</span></span>

```xml
<Window
        ...
        xmlns:uwpControls="clr-namespace:Microsoft.Toolkit.Wpf.UI.Controls;assembly=Microsoft.Toolkit.Wpf.UI.Controls">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="\*"/>
    </Grid.RowDefinitions>
    <uwpControls:InkToolbar TargetInkCanvas="{x:Reference Name=inkCanvas}"/>
    <uwpControls:InkCanvas Grid.Row="1" x:Name="inkCanvas" />
</Grid>
```

##### <a name="hosting-controls"></a><span data-ttu-id="1f838-265">Hébergement de contrôles</span><span class="sxs-lookup"><span data-stu-id="1f838-265">Hosting controls</span></span>

<span data-ttu-id="1f838-266">La puissance des îlots XAML s’étend à la plupart des contrôles internes, des contrôles tiers et des contrôles personnalisés développés pour UWP, qui peuvent être intégrés à Windows Forms et WPF en tant que « îlots » avec une interface utilisateur entièrement fonctionnelle.</span><span class="sxs-lookup"><span data-stu-id="1f838-266">The power of XAML Islands extends to most first-party controls, third-party controls, and custom controls developed for UWP, which can be integrated into Windows Forms and WPF as "Islands" with fully functional UI.</span></span> <span data-ttu-id="1f838-267">Le `WindowsXamlHost` contrôle pour WPF et Windows Forms permet d’y parvenir.</span><span class="sxs-lookup"><span data-stu-id="1f838-267">The `WindowsXamlHost` control for WPF and Windows Forms allows doing this.</span></span>

<span data-ttu-id="1f838-268">Par exemple, pour utiliser le `WindowsXamlHost` contrôle dans WPF, ajoutez une référence au `Microsoft.Toolkit.Wpf.UI.XamlHost` package fourni par le kit de pratiques de la communauté Windows.</span><span class="sxs-lookup"><span data-stu-id="1f838-268">For example, to use the `WindowsXamlHost` control in WPF, add a reference to the `Microsoft.Toolkit.Wpf.UI.XamlHost` package provided by the Windows Community Toolkit.</span></span>

<span data-ttu-id="1f838-269">Une fois que vous avez placé votre `WindowsXamlHost` code dans votre code d’interface utilisateur, spécifiez le type UWP que vous souhaitez charger.</span><span class="sxs-lookup"><span data-stu-id="1f838-269">Once you've placed your `WindowsXamlHost` into your UI code, specify which UWP type you want to load.</span></span> <span data-ttu-id="1f838-270">Vous pouvez choisir d’utiliser un contrôle encapsulé comme un `Button` ou un contrôle plus complexe composé de plusieurs contrôles, qui sont un contrôle UWP personnalisé.</span><span class="sxs-lookup"><span data-stu-id="1f838-270">You can choose to use a wrapped control like a `Button` or a more complex one composed by several different controls, which are a custom UWP control.</span></span>

<span data-ttu-id="1f838-271">L’exemple suivant montre comment ajouter un UWP `Button` :</span><span class="sxs-lookup"><span data-stu-id="1f838-271">The following example shows how to add a UWP `Button`:</span></span>

```xml
<Window
        ...
        xmlns:xamlhost="clr-namespace:Microsoft.Toolkit.Wpf.UI.XamlHost;assembly=Microsoft.Toolkit.Wpf.UI.XamlHost">

<xamlhost:WindowsXamlHost x:Name="myUwpButton"
                          InitialTypeName="Windows.UI.Xaml.Controls.Button" />
```

<span data-ttu-id="1f838-272">Il y a une recommandation claire sur la façon d’aborder ce point et il est préférable de disposer d’un îlot XAML unique et plus grand contenant un contrôle composite personnalisé que d’avoir plusieurs îlots avec un seul contrôle sur chacun.</span><span class="sxs-lookup"><span data-stu-id="1f838-272">There's a clear recommendation on how to approach this and it's better to have one single and bigger XAML Island containing a custom composite control than to have several islands with one control on each.</span></span>

<span data-ttu-id="1f838-273">L’une des principales fonctionnalités de XAML est la liaison et fonctionne entre votre code Win32 et l’îlot.</span><span class="sxs-lookup"><span data-stu-id="1f838-273">One of the core features of XAML is binding and it works between your Win32 code and the island.</span></span> <span data-ttu-id="1f838-274">Ainsi, vous pouvez lier, par exemple, un Win32 `Textbox` avec un UWP `Textbox` .</span><span class="sxs-lookup"><span data-stu-id="1f838-274">So, you can bind, for instance, a Win32 `Textbox` with a UWP `Textbox`.</span></span> <span data-ttu-id="1f838-275">Un point important à prendre en compte est que ces liaisons sont des liaisons unidirectionnelles, de UWP à Win32. par conséquent, si vous mettez à jour le `Textbox` à l’intérieur de l’îlot XAML, la zone de texte Win32 est mise à jour, mais pas l’inverse.</span><span class="sxs-lookup"><span data-stu-id="1f838-275">One important thing to consider is that these bindings are one-way bindings, from UWP to Win32, so if you update the `Textbox` inside the XAML Island the Win32 Textbox will be updated, but not the other way around.</span></span>

<span data-ttu-id="1f838-276">Pour voir une procédure pas à pas sur l’utilisation des îlots XAML, consultez :</span><span class="sxs-lookup"><span data-stu-id="1f838-276">To see a walkthrough about how to use XAML Islands, see:</span></span>

<https://docs.microsoft.com/windows/apps/desktop/modernize/host-standard-control-with-xaml-islands>

#### <a name="adding-uwp-xaml-custom-controls"></a><span data-ttu-id="1f838-277">Ajout de contrôles personnalisés de XAML UWP</span><span class="sxs-lookup"><span data-stu-id="1f838-277">Adding UWP XAML custom controls</span></span>

<span data-ttu-id="1f838-278">Un contrôle personnalisé XAML est un contrôle (ou contrôle utilisateur) créé par vous ou par des tiers (y compris des contrôles WinUI 2. x).</span><span class="sxs-lookup"><span data-stu-id="1f838-278">A XAML custom control is a control (or user control) created by you or by third parties (including WinUI 2.x controls).</span></span> <span data-ttu-id="1f838-279">Pour héberger un contrôle UWP personnalisé dans une Windows Forms ou une application WPF, vous avez besoin des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="1f838-279">To host a custom UWP control in a Windows Forms or WPF app, you'll need:</span></span>

- <span data-ttu-id="1f838-280">Pour utiliser le `WindowsXamlHost` contrôle UWP dans votre application .net Core 3. x.</span><span class="sxs-lookup"><span data-stu-id="1f838-280">To use the `WindowsXamlHost` UWP control in your .NET Core 3.x app.</span></span>
- <span data-ttu-id="1f838-281">Pour créer un projet d’application UWP qui définit un `XamlApplication` objet.</span><span class="sxs-lookup"><span data-stu-id="1f838-281">To create a UWP app project that defines a `XamlApplication` object.</span></span>

<span data-ttu-id="1f838-282">Votre projet WPF ou Windows Forms doit avoir accès à une instance de la `Microsoft.Toolkit.Win32.UI.XamlHost.XamlApplication` classe fournie par le kit de pratiques de la communauté Windows.</span><span class="sxs-lookup"><span data-stu-id="1f838-282">Your WPF or Windows Forms project must have access to an instance of the `Microsoft.Toolkit.Win32.UI.XamlHost.XamlApplication` class provided by the Windows Community Toolkit.</span></span> <span data-ttu-id="1f838-283">Cet objet joue le rôle de fournisseur de métadonnées racine pour le chargement des métadonnées des types XAML UWP personnalisés dans les assemblys du répertoire actif de votre application.</span><span class="sxs-lookup"><span data-stu-id="1f838-283">This object acts as a root metadata provider for loading metadata for custom UWP XAML types in assemblies in the current directory of your application.</span></span> <span data-ttu-id="1f838-284">La méthode recommandée consiste à ajouter un projet application vide (Windows universel) à la même solution que votre projet WPF ou Windows Forms et à modifier la classe d’application par défaut de ce projet.</span><span class="sxs-lookup"><span data-stu-id="1f838-284">The recommended way to do this is to add a Blank App (Universal Windows) project to the same solution as your WPF or Windows Forms project and revise the default App class in this project.</span></span>

<span data-ttu-id="1f838-285">Le contrôle XAML UWP personnalisé peut être inclus dans cette application UWP ou dans un projet de bibliothèque de classes UWP indépendant que vous référencez dans la même solution que votre projet WPF ou Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="1f838-285">The custom UWP XAML control can be included on this UWP app or in an independent UWP Class Library project that you reference in the same solution as your WPF or Windows Forms project.</span></span>

<span data-ttu-id="1f838-286">Vous pouvez consulter une description détaillée du processus pas à pas à l’adresse suivante :</span><span class="sxs-lookup"><span data-stu-id="1f838-286">You can check a detailed step-by-step process description at:</span></span>

<https://docs.microsoft.com/windows/apps/desktop/modernize/host-custom-control-with-xaml-islands>

#### <a name="the-windows-ui-library-winui-2"></a><span data-ttu-id="1f838-287">Bibliothèque de l’interface utilisateur Windows (WinUI 2)</span><span class="sxs-lookup"><span data-stu-id="1f838-287">The Windows UI Library (WinUI 2)</span></span>

<span data-ttu-id="1f838-288">Outre les contrôles Windows 10 fournis avec le système d’exploitation, la même équipe XAML UWP fournit également des contrôles supplémentaires dans la bibliothèque de l’interface utilisateur Windows (**WinUI 2**).</span><span class="sxs-lookup"><span data-stu-id="1f838-288">Besides the inbox Windows 10 controls that comes with the OS, the same UWP XAML team also deliver additional controls in the Windows UI Library (**WinUI 2**).</span></span> <span data-ttu-id="1f838-289">WinUI 2 fournit des contrôles et des fonctionnalités d’interface utilisateur natifs de Microsoft pour les applications Windows UWP. ces contrôles peuvent être utilisés dans des îlots XAML.</span><span class="sxs-lookup"><span data-stu-id="1f838-289">WinUI 2 provides official native Microsoft UI controls and features for Windows UWP apps and these controls can be used inside of XAML Islands.</span></span>

<span data-ttu-id="1f838-290">WinUI 2 est open source et vous pouvez trouver des informations à l’adresse <https://github.com/microsoft/microsoft-ui-xaml> .</span><span class="sxs-lookup"><span data-stu-id="1f838-290">WinUI 2 is open source and you can find information at <https://github.com/microsoft/microsoft-ui-xaml>.</span></span>

<span data-ttu-id="1f838-291">L’article suivant montre comment héberger un contrôle XAML UWP à partir de la bibliothèque WinUI 2 :<https://docs.microsoft.com/windows/apps/desktop/modernize/host-custom-control-with-xaml-islands></span><span class="sxs-lookup"><span data-stu-id="1f838-291">The following article demonstrates how to host a UWP XAML control from the WinUI 2 library: <https://docs.microsoft.com/windows/apps/desktop/modernize/host-custom-control-with-xaml-islands></span></span>

### <a name="do-you-need-xaml-islands"></a><span data-ttu-id="1f838-292">Avez-vous besoin d’îlots XAML</span><span class="sxs-lookup"><span data-stu-id="1f838-292">Do you need XAML Islands</span></span>

<span data-ttu-id="1f838-293">Les îlots XAML sont destinés aux applications Win32 existantes qui souhaitent améliorer leur expérience utilisateur en tirant parti de nouveaux contrôles et comportements UWP sans réécriture complète de l’application.</span><span class="sxs-lookup"><span data-stu-id="1f838-293">XAML Islands are intended for existing Win32 apps that want to improve their user experience by leveraging new UWP controls and behaviors without a full rewrite of the app.</span></span> <span data-ttu-id="1f838-294">Vous pouvez déjà [tirer parti des API Windows 10](/windows/uwp/porting/desktop-to-uwp-enhance), mais jusqu’à ce qu’elles jusqu’à des îlots XAML, seules les API non liées à l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1f838-294">You could already [leverage Windows 10 APIs](/windows/uwp/porting/desktop-to-uwp-enhance), but up until XAML Islands, only non-UI related APIs.</span></span>

<span data-ttu-id="1f838-295">Si vous développez une nouvelle application Windows, une [application UWP](/windows/uwp/get-started/universal-application-platform-guide)   est probablement la bonne approche.</span><span class="sxs-lookup"><span data-stu-id="1f838-295">If you're developing a new Windows App, a [UWP App](/windows/uwp/get-started/universal-application-platform-guide) is probably the right approach.</span></span>

### <a name="the-road-ahead-xaml-islands-winui-30"></a><span data-ttu-id="1f838-296">Les îles de la chaussée à l’avance XAML : WinUI 3,0</span><span class="sxs-lookup"><span data-stu-id="1f838-296">The road ahead XAML Islands: WinUI 3.0</span></span>

<span data-ttu-id="1f838-297">Depuis Windows 8, la plateforme d’interface utilisateur Windows, y compris l’infrastructure d’interface utilisateur XAML, la couche de composition visuelle et le traitement d’entrée ont été intégrés à Windows.</span><span class="sxs-lookup"><span data-stu-id="1f838-297">Since Windows 8, the Windows UI platform, including the XAML UI framework, visual composition layer, and input processing has been shipped as an integral part of Windows.</span></span> <span data-ttu-id="1f838-298">Cela signifie que pour tirer parti des dernières améliorations apportées aux technologies d’interface utilisateur, vous devez effectuer une mise à niveau vers la dernière version de l’interface utilisateur, ce qui ralentit le rythme d’innovation quand vous développez vos applications.</span><span class="sxs-lookup"><span data-stu-id="1f838-298">This means that to benefit from the latest improvements on UI technologies, you must upgrade to the latest version of the UI, slowing down the pace of innovation when you develop your apps.</span></span> <span data-ttu-id="1f838-299">Pour découpler ces deux cycles d’évolution et encourager l’innovation, Microsoft travaille activement au projet WinUI.</span><span class="sxs-lookup"><span data-stu-id="1f838-299">To decouple these two evolution cycles and foster innovation, Microsoft is actively working on the WinUI project.</span></span>

<span data-ttu-id="1f838-300">À partir de l’interface WinUI 2 dans 2018, Microsoft a commencé à expédier de nouveaux contrôles et fonctionnalités de l’interface utilisateur XAML sous forme de packages NuGet distincts qui s’appuient sur le kit de développement logiciel (SDK) UWP.</span><span class="sxs-lookup"><span data-stu-id="1f838-300">Starting with WinUI 2 in 2018, Microsoft started shipping some new XAML UI controls and features as separate NuGet packages that build on top of the UWP SDK.</span></span>

![Structure de l’WinUI 2,0](./media/windows-migration/winui2.png)

<span data-ttu-id="1f838-302">WinUI 3 est en cours de développement actif et élargit de manière importante l’étendue d’WinUI pour inclure la plateforme d’interface utilisateur complète, qui sera entièrement découplée à partir du kit de développement logiciel (SDK) UWP :</span><span class="sxs-lookup"><span data-stu-id="1f838-302">WinUI 3 is under active development and will greatly expand the scope of WinUI to include the full UI platform, which will be fully decoupled from the UWP SDK:</span></span>

![Structure de l’WinUI 3,0](./media/windows-migration/winui3.png)

<span data-ttu-id="1f838-304">L’infrastructure XAML sera désormais développée sur GitHub et livrée hors bande sous forme de packages [NuGet](/nuget/what-is-nuget)   .</span><span class="sxs-lookup"><span data-stu-id="1f838-304">XAML framework will now be developed on GitHub and shipped out of band as [NuGet](/nuget/what-is-nuget) packages.</span></span>

<span data-ttu-id="1f838-305">Les API XAML UWP existantes fournies dans le cadre du système d’exploitation ne recevront plus de nouvelles mises à jour de fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="1f838-305">The existing UWP XAML APIs that ship as part of the OS will no longer receive new feature updates.</span></span> <span data-ttu-id="1f838-306">Ils recevront toujours les mises à jour de sécurité et les correctifs critiques conformément au cycle de vie de la prise en charge de Windows 10.</span><span class="sxs-lookup"><span data-stu-id="1f838-306">They will still receive security updates and critical fixes according to the Windows 10 support lifecycle.</span></span>

<span data-ttu-id="1f838-307">Le plateforme Windows universelle contient plus que l’infrastructure XAML (par exemple, le modèle d’application et de sécurité, le pipeline multimédia, les intégrations de l’interpréteur de commandes Xbox et Windows 10, la prise en charge étendue des appareils) et continuera à évoluer.</span><span class="sxs-lookup"><span data-stu-id="1f838-307">The Universal Windows Platform contains more than just the XAML framework (for example, application and security model, media pipeline, Xbox and Windows 10 shell integrations, broad device support) and will continue to evolve.</span></span> <span data-ttu-id="1f838-308">Toutes les nouvelles fonctionnalités XAML seront simplement développées et fournies dans le cadre de l’appel à la fonction WinUI.</span><span class="sxs-lookup"><span data-stu-id="1f838-308">All new XAML features will just be developed and ship as part of WinUI instead.</span></span>

#### <a name="winui-3-in-desktop-app-and-winui-xaml-islands"></a><span data-ttu-id="1f838-309">WinUI 3 dans une application de bureau et des îlots XAML WinUI</span><span class="sxs-lookup"><span data-stu-id="1f838-309">WinUI 3 in desktop app and WinUI XAML Islands</span></span>

<span data-ttu-id="1f838-310">Comme vous pouvez le voir, WinUI 3 est l’évolution du XAML UWP et fonctionne naturellement dans le modèle d’application UWP et dans toutes ses exigences (MSIX Package ID, sandbox, CoreWindow, etc.).</span><span class="sxs-lookup"><span data-stu-id="1f838-310">As you can see, WinUI 3 is the evolution of UWP XAML and it works naturally within the UWP app model and all its requirements (MSIX packaged ID, sandbox, CoreWindow, and so on.</span></span> <span data-ttu-id="1f838-311">Pour utiliser uniquement WinUI 3 dans un modèle d’application Win32, le contenu WinUI doit être hébergé par une autre infrastructure d’interface utilisateur (Windows Forms, WPF, etc.) à l’aide des **îlots XAML WinUI**.</span><span class="sxs-lookup"><span data-stu-id="1f838-311">To use just WinUI 3 in a Win32 app model, the WinUI content should be hosted by another UI Framework (Windows Forms, WPF, and so on) using **WinUI XAML Islands**.</span></span> <span data-ttu-id="1f838-312">C’est le bon chemin d’accès si vous souhaitez faire évoluer vos technologies d’application et de combinaison.</span><span class="sxs-lookup"><span data-stu-id="1f838-312">This is the right path if you want to evolve your app and mix technologies.</span></span> <span data-ttu-id="1f838-313">Toutefois, si vous souhaitez remplacer l’ancienne interface utilisateur pour WinUI, votre application ne doit pas charger d’infrastructure d’interface utilisateur pour héberger WinUI uniquement.</span><span class="sxs-lookup"><span data-stu-id="1f838-313">However, if you want to replace your entire old UI for WinUI, your app shouldn't load UI Frameworks for just hosting WinUI.</span></span>

<span data-ttu-id="1f838-314">WinUI 3 répond à ces commentaires critiques **en ajoutant WinUI dans les applications de bureau**.</span><span class="sxs-lookup"><span data-stu-id="1f838-314">WinUI 3 will address this critical feedback adding **WinUI in desktop apps**.</span></span> <span data-ttu-id="1f838-315">Cela permettra aux applications Win32 d’utiliser WinUI 3 comme infrastructure d’interface utilisateur autonome ; Il n’est pas nécessaire de charger Windows Forms ou WPF.</span><span class="sxs-lookup"><span data-stu-id="1f838-315">This will allow that Win32 apps can use WinUI 3 as standalone UI Framework; no need to load Windows Forms or WPF.</span></span>

<span data-ttu-id="1f838-316">Dans cette agrégation, WinUI 3 permet aux développeurs de mélanger facilement et de faire correspondre la bonne combinaison de :</span><span class="sxs-lookup"><span data-stu-id="1f838-316">Within this aggregation, WinUI 3 will let developers easily mix and match the right combination of:</span></span>

* <span data-ttu-id="1f838-317">Modèle d’application : UWP, Win32</span><span class="sxs-lookup"><span data-stu-id="1f838-317">App model: UWP, Win32</span></span>
* <span data-ttu-id="1f838-318">Plateforme : .NET Core ou native</span><span class="sxs-lookup"><span data-stu-id="1f838-318">Platform: .NET Core or Native</span></span>
* <span data-ttu-id="1f838-319">Langage : .NET (C \# , Visual Basic), C++ standard</span><span class="sxs-lookup"><span data-stu-id="1f838-319">Language: .NET (C\#, Visual Basic), standard C++</span></span>
* <span data-ttu-id="1f838-320">Empaquetage : MSIX, AppX pour le Microsoft Store, unpacked</span><span class="sxs-lookup"><span data-stu-id="1f838-320">Packaging: MSIX, AppX for the Microsoft Store, unpackaged</span></span>
* <span data-ttu-id="1f838-321">Interop : utilisez WinUI 3 pour étendre des applications WPF, WinForms et MFC existantes à l’aide des îlots XAML WinUI.</span><span class="sxs-lookup"><span data-stu-id="1f838-321">Interop: use WinUI 3 to extend existing WPF, WinForms, and MFC apps using WinUI XAML Islands.</span></span>

<span data-ttu-id="1f838-322">Si vous souhaitez en savoir plus, Microsoft partage cette feuille de route dans <https://github.com/microsoft/microsoft-ui-xaml/blob/master/docs/roadmap.md> .</span><span class="sxs-lookup"><span data-stu-id="1f838-322">If you want to know more details, Microsoft is sharing this roadmap in <https://github.com/microsoft/microsoft-ui-xaml/blob/master/docs/roadmap.md>.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="1f838-323">[Précédent](migrate-modern-applications.md) 
> [Suivant](example-migration-core.md)</span><span class="sxs-lookup"><span data-stu-id="1f838-323">[Previous](migrate-modern-applications.md)
[Next](example-migration-core.md)</span></span>
