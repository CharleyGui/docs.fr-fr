---
ms.openlocfilehash: 8c1ca89af289dbcc6c68d5ace3e8a9f32672ec0d
ms.sourcegitcommit: d55e14eb63588830c0ba1ea95a24ce6c57ef8c8c
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2019
ms.locfileid: "67859281"
---
### <a name="wcf-transport-security-supports-certificates-stored-using-cng"></a><span data-ttu-id="6d9fb-101">La sécurité du transport WCF prend en charge les certificats stockés à l’aide de CNG</span><span class="sxs-lookup"><span data-stu-id="6d9fb-101">WCF transport security supports certificates stored using CNG</span></span>

|   |   |
|---|---|
|<span data-ttu-id="6d9fb-102">Détails</span><span class="sxs-lookup"><span data-stu-id="6d9fb-102">Details</span></span>|<span data-ttu-id="6d9fb-103">À partir des applications qui ciblent .NET Framework 4.6.2, la sécurité du transport WCF prend en charge les certificats stockés à l’aide de la bibliothèque de chiffrement Windows (CNG).</span><span class="sxs-lookup"><span data-stu-id="6d9fb-103">Starting with apps that target the .NET Framework 4.6.2, WCF transport security supports certificates stored using the Windows Cryptography Library (CNG).</span></span> <span data-ttu-id="6d9fb-104">Cette prise en charge se limite aux certificats avec une clé publique dont l’exposant ne dépasse pas 32 bits de longueur.</span><span class="sxs-lookup"><span data-stu-id="6d9fb-104">This support is limited to certificates with a public key that has an exponent no more than 32 bits in length.</span></span> <span data-ttu-id="6d9fb-105">Quand une application cible .NET Framework 4.6.2, cette fonctionnalité est activée par défaut. Dans les versions antérieures du .NET Framework, les tentatives d’utilisation de certificats X509 avec un fournisseur de stockage de clés CSG lèvent une exception.</span><span class="sxs-lookup"><span data-stu-id="6d9fb-105">When an application targets the .NET Framework 4.6.2, this feature is on by default.In earlier versions of the .NET Framework, the attempt to use X509 certificates with a CSG key storage provider throws an exception.</span></span>|
|<span data-ttu-id="6d9fb-106">Suggestion</span><span class="sxs-lookup"><span data-stu-id="6d9fb-106">Suggestion</span></span>|<span data-ttu-id="6d9fb-107">Les applications qui ciblent .NET Framework 4.6.1 et les versions antérieures mais qui s’exécutent sur .NET Framework 4.6.2 peuvent activer la prise en charge des certificats CNG en ajoutant la ligne suivante à la section <code>&lt;runtime&gt;</code> du fichier app.config ou web.config :</span><span class="sxs-lookup"><span data-stu-id="6d9fb-107">Apps that target the .NET Framework 4.6.1 and earlier but are running on the .NET Framework 4.6.2 can enable support for CNG certificates by adding the following line to the <code>&lt;runtime&gt;</code> section of the app.config or web.config file:</span></span><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.ServiceModel.DisableCngCertificates=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="6d9fb-108">Vous pouvez en faire autant par programmation avec un code de ce type :</span><span class="sxs-lookup"><span data-stu-id="6d9fb-108">This can also be done programmatically with the following code:</span></span><pre><code class="lang-cs">private const string DisableCngCertificates = @&quot;Switch.System.ServiceModel.DisableCngCertificate&quot;;&#13;&#10;AppContext.SetSwitch(disableCngCertificates, false);&#13;&#10;</code></pre><pre><code class="lang-vb">Const DisableCngCertificates As String = &quot;Switch.System.ServiceModel.DisableCngCertificates&quot;&#13;&#10;AppContext.SetSwitch(disableCngCertificates, False)&#13;&#10;</code></pre><span data-ttu-id="6d9fb-109">Notez qu’en raison de cette modification, tout code de traitement des exceptions qui dépend de l’échec de la tentative d’établissement d’une communication sécurisée avec un certificat CNG ne s’exécutera plus.</span><span class="sxs-lookup"><span data-stu-id="6d9fb-109">Note that, because of this change, any exception handling code that depends on the attempt to initiate secure communication with a CNG certificate to fail will no longer execute.</span></span>|
|<span data-ttu-id="6d9fb-110">Portée</span><span class="sxs-lookup"><span data-stu-id="6d9fb-110">Scope</span></span>|<span data-ttu-id="6d9fb-111">Mineur</span><span class="sxs-lookup"><span data-stu-id="6d9fb-111">Minor</span></span>|
|<span data-ttu-id="6d9fb-112">Version</span><span class="sxs-lookup"><span data-stu-id="6d9fb-112">Version</span></span>|<span data-ttu-id="6d9fb-113">4.6.2</span><span class="sxs-lookup"><span data-stu-id="6d9fb-113">4.6.2</span></span>|
|<span data-ttu-id="6d9fb-114">Type</span><span class="sxs-lookup"><span data-stu-id="6d9fb-114">Type</span></span>|<span data-ttu-id="6d9fb-115">Reciblage</span><span class="sxs-lookup"><span data-stu-id="6d9fb-115">Retargeting</span></span>|

